<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live & Life Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live & Life Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live & Life" href="/opensearch.xml"><title data-react-helmet="true">PHP æ“ä½œäºŒè¿›åˆ¶æµï¼Œè¯»å–æ–‡ä»¶ç»“æ„ | Wener Live &amp; Life</title><meta data-react-helmet="true" property="og:title" content="PHP æ“ä½œäºŒè¿›åˆ¶æµï¼Œè¯»å–æ–‡ä»¶ç»“æ„ | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="æœ¬æ–‡åŒ…å«çš„å†…å®¹ï¼šè¯¦ç»†çš„packå’Œunpackè°ƒç”¨è¯¦è§£ï¼Œ16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶è¿”å›å€¼ï¼Œç­‰"><meta data-react-helmet="true" property="og:description" content="æœ¬æ–‡åŒ…å«çš„å†…å®¹ï¼šè¯¦ç»†çš„packå’Œunpackè°ƒç”¨è¯¦è§£ï¼Œ16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶è¿”å›å€¼ï¼Œç­‰"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.f53ced8f.css">
<link rel="preload" href="/styles.2f483b15.js" as="script">
<link rel="preload" href="/runtime~main.c54f7779.js" as="script">
<link rel="preload" href="/main.f72bc020.js" as="script">
<link rel="preload" href="/1.102d725e.js" as="script">
<link rel="preload" href="/2.34dcf6dc.js" as="script">
<link rel="preload" href="/3.29e9df6d.js" as="script">
<link rel="preload" href="/ccc49370.c391b892.js" as="script">
<link rel="preload" href="/65eaf7fb.cf5144f3.js" as="script">
<link rel="preload" href="/9d293816.74d0936e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Wener</strong></a><a class="navbar__item navbar__link" href="/notes/java/java">ç¬”è®°</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/story">æ•…äº‹</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">æŒ‡å—</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">å·¥å…·</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Wener</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/java">ç¬”è®°</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/story">æ•…äº‹</a></li><li class="menu__list-item"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/dns-prevent-spoofing">æŒ‡å—</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/tool/network/ip-lookup">å·¥å…·</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/openvox-gw-inside">OpenVox VoxStack ç½‘å…³åˆ†æ</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/fix-init-script">è®°å½•ä¸€æ¬¡ä¿®å¤ init è„šæœ¬çš„ç»å†</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/alpinelinux-setup-xfce">AlpineLinux å®‰è£… Xfce æ¡Œé¢</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/why-need-graphql">ä¸ºä»€ä¹ˆéœ€è¦ GraphQL</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/understand-baby-vision">ç†è§£å­©å­çš„è§†åŠ›</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">PHP æ“ä½œäºŒè¿›åˆ¶æµï¼Œè¯»å–æ–‡ä»¶ç»“æ„</h1><div class="margin-vert--md"><time datetime="2011-01-01T00:00:00.000Z" class="blogPostDate_Ta7i">January 1, 2011  Â· 3 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"></div></div></header><section class="markdown"><p>æœ¬æ–‡åŒ…å«çš„å†…å®¹ï¼šè¯¦ç»†çš„packå’Œunpackè°ƒç”¨è¯¦è§£ï¼Œ16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶è¿”å›å€¼ï¼Œç­‰</p><p>æœ¬æ–‡åŒ…å«çš„å†…å®¹ï¼šè¯¦ç»†çš„packå’Œunpackè°ƒç”¨è¯¦è§£ï¼Œ16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶è¿”å›å€¼ï¼Œç­‰åŒ…å«å®ä¾‹ï¼šè¯»å–</p><p>BMPå›¾ç‰‡ä¿¡æ¯å‡½æ•°ï¼š</p><p>//å°†16è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­¤å€¼çš„å­—ç¬¦ä¸²ã€‚</p><p>function hexstr_str( $hetstr)</p><p>//ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯packå®ç°ï¼Œä¸€ä¸ªæ˜¯chræ–¹æ³•å®ç°</p><p>æ›¾ç»ä¸ºäº†å¤„ç†æºæ–‡ä»¶å°±ç™¾åº¦äº†ä¸‹phpÂ 2
è¿›åˆ¶æ–‡ä»¶ï¼Œç»“æœå‡ºæ¥çš„è²Œä¼¼éƒ½æ˜¯ä¸€ä¸ªäººå†™çš„ï¼Œåˆ«äººå¤åˆ¶å’Œè½¬è½½çš„ï¼Œè€Œä¸”æˆ‘ä¹Ÿååæ²¡æœ‰çœ‹æ‡‚ã€‚æŒºéƒé—·çš„ã€‚å› æ­¤å°±æœ‰äº†ä¸‹æ–‡ï¼Œæˆ‘å°±è‡ªå·±ææ‰“ï¼Œç ”ç©¶ç ”ç©¶ã€‚Phpå¤„ç†</p><p>2è¿›åˆ¶æ— éå°±æ˜¯ä½¿ç”¨packå’Œunpackï¼Œåœ¨åæ–‡è®²è®²å…¶ä»–çš„åŠæ³•ã€‚</p><p>å‡½æ•°åŸå‹ï¼š</p><p>string pack (Â stringÂ $formatÂ [, <a href="http://cn2.php.net/manual/en/language.pseudo-types.php#language.types.mixed" target="_blank" rel="noopener noreferrer">mixed</a> $argsÂ [, <a href="http://cn2.php.net/manual/en/language.pseudo-types.php#language.types.mixed" target="_blank" rel="noopener noreferrer">mixed</a> $...Â ]]Â )</p><p>array unpack (Â stringÂ $formatÂ ,Â stringÂ $dataÂ )</p><p>Packæ˜¯è®²æ‰€ç»™çš„å‚æ•°æ›´å…·æ‰€ç»™çš„æ ¼å¼æ‰“åŒ…æˆ2è¿›åˆ¶å­—ç¬¦ä¸²ã€‚æ‰‹å†Œä¸Šè¯´è¿™ä¸ªå‡½æ•°å’ŒPerlçš„åŸºæœ¬ç›¸åŒï¼Œåªæ˜¯åœ¨æ ¼å¼ä¸Šå»æ‰äº†s,uç­‰ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰ç¬¦å·å’Œæ— ç¬¦å·çš„æ•°ç”±packè½¬æ¢å‡ºæ¥çš„ç»“æœç›¸åŒï¼Œä½†æ˜¯ä¼šå½±å“unpackçš„ç»“æœã€‚</p><p>å…ˆçœ‹ä¸€ä¸ªå°å°çš„å®ä¾‹ï¼š</p><p>$data = pack(&quot;N&quot;, 0x12345);</p><p>var_dump($data);</p><p>$fn = &#x27;out.text&#x27;;</p><p>$fp = fopen($fn,&#x27;w&#x27;);</p><p>fwrite($fp,$data);</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-899.png" target="_blank" rel="noopener noreferrer"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-899.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-899"></a></p><p>ç»“æœå¾ˆæ˜äº†ï¼Œç”¨æ³•å¾ˆç®€å•ã€‚</p><p>å…³äºNæ¨¡å¼ï¼š</p><p>unsignedÂ longÂ (alwaysÂ 32Â bit,Â bigÂ endianÂ byteÂ order)</p><p>æ— ç¬¦å·é•¿æ•´å‹ï¼Œæ€»æ˜¯è¿”å›32ä½</p><p>æ ¼å¼ï¼š</p><table><thead><tr><th>mode</th><th>è¯´å˜›</th></tr></thead><tbody><tr><td>a</td><td>å°†å­—ç¬¦ä¸²ç©ºç™½ä»¥ NULL å­—ç¬¦å¡«æ»¡</td></tr><tr><td>A</td><td>å°†å­—ç¬¦ä¸²ç©ºç™½ä»¥ SPACE å­—ç¬¦ (ç©ºæ ¼) å¡«æ»¡</td></tr><tr><td>h</td><td>åå…­è¿›ä½å­—ç¬¦ä¸²ï¼Œä½ä½åœ¨å‰</td></tr><tr><td>H</td><td>åå…­è¿›ä½å­—ç¬¦ä¸²ï¼Œé«˜ä½åœ¨å‰</td></tr><tr><td>c</td><td>æœ‰å·å­—ç¬¦</td></tr><tr><td>C</td><td>æ— å·å­—ç¬¦</td></tr><tr><td>s</td><td>æœ‰å·çŸ­æ•´æ•° (åå…­ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>S</td><td>æ— å·çŸ­æ•´æ•° (åå…­ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>n</td><td>æ— å·çŸ­æ•´æ•° (åå…­ä½, é«˜ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>v</td><td>æ— å·çŸ­æ•´æ•° (åå…­ä½, ä½ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>i</td><td>æœ‰å·æ•´æ•° (ä¾è®¡ç®—æœºçš„é¡ºåºåŠèŒƒå›´)</td></tr><tr><td>I</td><td>æ— å·æ•´æ•° (ä¾è®¡ç®—æœºçš„é¡ºåºåŠèŒƒå›´)</td></tr><tr><td>l</td><td>æœ‰å·é•¿æ•´æ•° (32ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>L</td><td>æ— å·é•¿æ•´æ•° (32ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>N</td><td>æ— å·çŸ­æ•´æ•° (32ä½, é«˜ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>V</td><td>æ— å·çŸ­æ•´æ•° (32ä½, ä½ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>f</td><td>å•ç²¾ç¡®æµ®ç‚¹æ•° (ä¾è®¡ç®—æœºçš„èŒƒå›´)</td></tr><tr><td>d</td><td>å€ç²¾ç¡®æµ®ç‚¹æ•° (ä¾è®¡ç®—æœºçš„èŒƒå›´)</td></tr><tr><td>x</td><td>ç©ºä½</td></tr><tr><td>X</td><td>å€’å›ä¸€ä½</td></tr><tr><td>@</td><td>å¡«å…¥ NULL å­—ç¬¦åˆ°ç»å¯¹ä½ç½®</td></tr></tbody></table><p>å…³äºpackçš„è°ƒç”¨æ–¹æ³•ã€‚</p><p>å› ä¸ºpackæ˜¯æ”¯æŒå¤šä¸ªä¸å®šä¸ªæ•°å‚æ•°çš„ï¼Œæ‰€ä»¥æ¯ä¸ªå‚æ•°éƒ½è¦æŒ‡å®šä¸€ä¸ªè½¬æ¢çš„æ¨¡å¼ã€‚</p><p>$data = pack(&quot;Nn&quot;, 0x12345, 0x12345);</p><p>å½“ä½ å‚æ•°çš„ä¸ªæ•°å¤šäºæ ¼å¼çš„ä¸ªæ•°æ—¶ï¼Œå‡ºç°ï¼š</p><p>Warning:Â pack()Â [<a href="http://localhost/lab/function.pack" target="_blank" rel="noopener noreferrer">function.pack</a>]:Â 1Â argumentsÂ unusedÂ in E:\host\htdocs\Lab\Binary.php onÂ line 4</p><p>Warningçº§é”™è¯¯ã€‚</p><p>è¿™ä¸ªè¿˜æœ‰ä¸ªæ³¨æ„çš„æ˜¯*æ¨¡å¼ã€‚</p><p>$data = pack(&quot;Nn*&quot;, 0x12345, 0x12345, 0x12345);\æœ€åä¸¤ä¸ªæ˜¯16ä½ï¼Œæ‰€ä»¥è¾“å‡ºé‡Œé¢æ˜¯2å­—èŠ‚</p><p>var_dump($data);</p><p>$fn = &#x27;out.text&#x27;;</p><p>$fp = fopen($fn,&#x27;w&#x27;);</p><p>fwrite($fp,$data);</p><p>è¾“å‡ºï¼š</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-1934.png" target="_blank" rel="noopener noreferrer"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-1934.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-1934"></a></p><p>çœ‹å‡ºæ¥äº†æœ€åä¸¤ä¸ªæ˜¯ä¸€æ ·çš„ã€‚å› ä¸ºæ‰‹å†Œä¸Šæ²¡è¯´ï¼Œä½†æ˜¯æˆ‘çŒœæµ‹*æ¨¡å¼å°±æ˜¯â€œåŒä¸Šâ€çš„æ„æ€å§ã€‚</p><p>åŸºç¡€çŸ¥è¯†ï¼š</p><p>1å­—èŠ‚ =Â Â 8ä½ = 2^8 =Â Â 256</p><p>ä¸€ä¸ªgb2312å­—ç¬¦2å­—èŠ‚ï¼Œä¸€ä¸ªasciiå­—ç¬¦1å­—èŠ‚ã€‚</p><p>å…³äºæ¨¡å¼çš„é€‰æ‹©éƒ½ç”±ä¸ªäººä½¿ç”¨çš„æƒ…å†µå†³å®šï¼Œè¿™é‡Œæˆ‘ç»™å‡ºæˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªå‡½æ•°ã€‚</p><p>//å°†16è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­¤å€¼çš„å­—ç¬¦ä¸²ã€‚</p><p>function hexstr_str( $hetstr)</p><p> {</p><p> $re = &#x27;&#x27;;</p><p> for( $i = 0;Â isset( $hetstr[ $i + 4]); $i += 4)</p><p> //echoÂ substr(Â $hetstr,Â $i,Â 2);</p><p> $re .= pack(&#x27;n&#x27;,Â ( &#x27;0x&#x27;.substr( $hetstr, $i, 4))Â * 1);</p><p> $len = strlen( $hetstr)Â - $i;</p><p> $hetstr = &#x27;0x&#x27;.substr( $hetstr, $i, strlen( $hetstr)Â - $i);</p><p> $hetstr .=Â ( $len % 2)Â ? &#x27;0&#x27;:&#x27;&#x27;;</p><p> $format = $len &lt; 3 ? &#x27;v&#x27;: &#x27;n&#x27;;</p><p> $re .= pack( $format, $hetstr * 1);</p><p> return $re;</p><p> }</p><p>æµ‹è¯•ï¼š</p><p>$data = hexstr_str( &#x27;ABCDc&#x27;);</p><p>è¾“å‡ºï¼š</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-2766.png" target="_blank" rel="noopener noreferrer"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-2766.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-2766"></a></p><p>æœ‰ç‚¹é—æ†¾çš„æ˜¯å®ƒéƒ½è¦ç”¨0æ¥è¡¥æ»¡16ä½ã€‚ä¸è¿‡æ€»çš„æ¥è¯´è¿˜æ˜¯å¾ˆä¸é”™çš„å•¦ã€‚</p><p>Unpackçš„ä½¿ç”¨ï¼Œæˆ‘è§‰å¾—ç”¨ç€è¿™ä¸ªæ„Ÿè§‰æŒºæªå¿ƒçš„ã€‚</p><p>unpack() worksÂ slightlyÂ differentÂ fromÂ PerlÂ asÂ theÂ unpackedÂ dataÂ isÂ storedÂ inÂ anÂ associativeÂ array.Â ToÂ accomplishÂ thisÂ youÂ haveÂ toÂ nameÂ theÂ differentÂ formatÂ codesÂ andÂ separateÂ themÂ byÂ aÂ slashÂ /.</p><p>Unpackçš„è¿è¡Œå’ŒPerlçš„æœ‰äº›å¾®ä¸åŒï¼Œåœ¨phpä¸­unpackçš„ç»“æœæ˜¯ç”±ä¸€ä¸ªæ•°ç»„è¿”å›çš„ã€‚å› æ­¤ä½ éœ€è¦æ¥å—è¿™äº›æ•°æ®å°±è¦ç»™æ ¼å¼å‘½åï¼Œä»¥/åˆ†éš”ã€‚</p><p>æ‰‹å†Œä¸Šçš„å®ä¾‹ï¼›</p><p>&lt;?php</p><p>$array = unpack(&quot;c2chars/nint&quot;, $binarydata);</p><p>?&gt;</p><p>çœ‹ä¸€ä¸ªæˆ‘ä¸ªäººçš„è°ƒç”¨å®ä¾‹ï¼š</p><p>$data = pack(&quot;n&quot;,Â (&#x27;0x&#x27;.&#x27;abc&#x27; )Â * 1);</p><p>$data = hexstr_str( &#x27;ABCDc&#x27;);</p><p>$s = $data;</p><p>$array = unpack(&quot;Nwen/n2stort&quot;, $s.$s);</p><p>è¾“å‡ºç»“æœï¼š</p><p>array(3)Â {</p><p> [&quot;wen&quot;]=&gt;</p><p> int(-1412579328)</p><p> [&quot;stort1&quot;]=&gt;</p><p> int(43981)</p><p> [&quot;stort2&quot;]=&gt;</p><p> int(49152)</p><p>}</p><p>ä¸Šå¼ç»“æœä¹Ÿå°±æ˜¯</p><p>wen:abcdc000</p><p>stort1:abcd</p><p>stort2:c000</p><p>çœ‹ç€è¿™æ ·çš„ç»“æœå’Œè¾“å…¥çš„æ ¼å¼æˆ‘è§‰å¾—å¾ˆæªå¿ƒçš„ã€‚ä¸è¿‡è¿™é‡Œè¿˜æ˜¯æœ‰ç‚¹å¥½å¤„çš„ï¼Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥æ ¼å¼åŒ–è¾“å‡ºä¸€ä¸ªæ–‡ä»¶çš„å¤´ä¿¡æ¯ä»€ä¹ˆçš„ã€‚</p><p>è¯¦ç»†è®²è®²uppackçš„æ ¼å¼å’Œè¾“å…¥çš„å…³ç³»ã€‚</p><p>&quot;Nwen/n2stort&quot;</p><p>å³ç¬¬ä¸€ä¸ªè§£æä»¥Nä¸ºæ ¼å¼ï¼Œä»¥wenä¸ºåå­—ã€‚</p><p> ç¬¬äºŒä¸ªè§£æä»¥nä¸ºæ ¼å¼è§£æä¸¤æ¬¡ï¼Œä»¥shortä¸ºåå­—ã€‚</p><p>ç”Ÿæˆçš„shortçš„åå­—æ˜¯ä»¥short1ï¼Œshort2ï¼Œâ€¦â€¦shortnè¿™æ ·çš„å½¢å¼å¢é•¿çš„ã€‚</p><p>è§£æçš„æ–¹æ³•ï¼š</p><p>Nï¼Œå…ˆåœ¨è¾“å…¥ï¼ˆ$s.$sï¼‰ä¸­è¯»å…¥32ä½é•¿ï¼Œå³4å­—èŠ‚ã€‚ç„¶åå†ç”¨Nè½¬æ¢ï¼Œæ­¤æ—¶æŒ‡å‘$s.$sæŒ‡é’ˆçš„ä½ç½®å·²ç»åˆ°äº†4äº†ï¼Œç¬¬ä¸€ä¸ª$så·²ç»è¯»å®Œäº†ï¼Œå› æ­¤è¦æ˜¯è¾“å…¥æ˜¯$sçš„è¯ä¼šæŠ¥é”™ï¼š</p><p>Warning:Â unpack()Â [<a href="http://localhost/lab/function.unpack" target="_blank" rel="noopener noreferrer">function.unpack</a>]:Â TypeÂ n:Â notÂ enoughÂ input,Â needÂ 2,Â haveÂ 0Â in E:\host\htdocs\Lab\Binary.php onÂ line 7</p><p>bool(false)</p><p>æ­¤æ—¶çš„è¿”å›å€¼ä¸ºfalseã€‚</p><p>åœ¨è§£æå®Œç¬¬ä¸€ä¸ªNåé‡åˆ°äº†â€œ/â€è¿›å…¥ä¸‹ä¸€ç»„çš„è§£æï¼Œè§£æçš„æ ¼å¼ä¸ºnï¼Œæœ‰2ç»„ï¼Œåå­—ä¸ºshort</p><p>æ‰€ä»¥short1ä¸ºè¾“å…¥çš„ç¬¬4-6è§£æçš„ç»“æœï¼Œè€Œshort2ä¸º6-8çš„ç»“æœã€‚éƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p><p>è¿™æ ·çœ‹æ¥ä¹Ÿä¸æ˜¯å¾ˆéš¾å˜›æ˜¯å§ã€‚</p><p>ä¸ªäººæ–¹æ³•ï¼š</p><p>Perlæ€æƒ³ä¸­æœ‰ä¸€æ¡æ˜¯ï¼š</p><p>There&#x27;s More Than One Way To Do It.</p><p>æˆ‘ä¹Ÿè§‰å¾—å¦‚æ­¤ã€‚</p><p>Phpä¸­æœ‰ä¸ªå‡½æ•°å«åš</p><p>String chr(Â intÂ $asciiÂ )</p><p>è¿”å›ä¸€ä¸ªå­—èŠ‚ï¼Œä»¥asciiå€¼ä¸ºå‚æ•°ã€‚</p><p>åŸæœ¬çš„asciiåªæœ‰127çš„ï¼Œä½†æ˜¯åæ¥æ‰©å±•åˆ°äº†255åŠ ä¸Š0é‚£å°±æ˜¯256  å¾ˆå¥½Â è¿™æ ·å°±éƒ½èƒ½è¡¨ç¤ºäº†ã€‚</p><p>æŠŠä¸Šé¢é‚£ä¸ªå‡½æ•°ç¨å¾®æ”¹é€ ä¸€ä¸‹å°±æ˜¯ï¼š</p><p>//å°†16è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­¤å€¼çš„å­—ç¬¦ä¸²ã€‚</p><p>function hexstr_str( $hexstr)</p><p>{</p><p> $re = &#x27;&#x27;;</p><p> for( $i = 0;Â isset( $hexstr[ $i +1]); $i += 2)</p><p> $re .= chr(Â (&#x27;0x&#x27;.$hexstr[ $i].$hexstr[ $i + 1])Â * 1);</p><p> if( strlen( $hexstr)Â &gt; $i)</p><p> $re .= chr(Â (&#x27;0x&#x27;.$hexstr[ $i].&#x27;0&#x27;)Â * 1);</p><p> return $re;</p><p>}</p><p>ä»£ç ç®€æ´äº†å¾ˆå¤šå•Šã€‚çœ‹èµ·æ¥é¡ºçœ¼å¤šäº†ã€‚</p><p>ç½®äºæˆ‘ä¸ºå•¥ç ”ç©¶è¿™ä¸ªç©æ„å„¿ï¼Œæˆ‘æœ€å¼€å§‹ä¹Ÿå°±æ˜¯ä¸ºäº†ç”¨å•¦è¯»å–BMPæºæ–‡ä»¶çš„ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æ¥ç®€å•å†™ä¸ªè¯»å–BMPå¤´ä¿¡æ¯çš„å‡½æ•°ã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä»¥24/32ä½å›¾ä¸¾ä¾‹ï¼Œ16/8/2ä½ä½å›¾åœ¨è¿™é‡Œå¯èƒ½è¡Œä¸é€šçš„ï¼Œå› ä¸ºæ•°æ®ç»“æ„ä¸åŒã€‚</p><p>BMPæ–‡ä»¶ç»“æ„ï¼š</p><p>Begin</p><p>//æ–‡ä»¶å¤´</p><p> section &quot;BMPÂ FileÂ Header&quot;</p><p>  read-onlyÂ char[2] &quot;BMP_ID&quot;  //Â 00</p><p>  uint32 &quot;FileÂ size&quot;    //Â 02</p><p>  uint32 &quot;Reserved&quot;    //Â 06</p><p>  uint32Â Â &quot;ImageDataOffset&quot;   //Â 0A</p><p> endsection</p><p>//ä¿¡æ¯å¤´</p><p> section &quot;BMPÂ InfoÂ Header&quot;</p><p>  uint32 &quot;HeaderSize&quot;    //Â 0E</p><p>  uint32 &quot;Width&quot;     //Â 12</p><p>  uint32 &quot;Height&quot;    //Â 16</p><p>  uint16 &quot;Planes&quot;    //Â 1A</p><p>  uint16 &quot;BPP&quot;     //Â 1C</p><p>  uint32 &quot;CompessionMethod&quot;   //Â 1E</p><p>  uint32 &quot;ImageSize&quot;    //Â 22</p><p>  uint32 &quot;XPixelsPerMeter&quot;   //Â 26</p><p>  uint32 &quot;YPixelsPerMeter&quot;   //Â 2A</p><p>  uint32 &quot;PaletteSize&quot;    //Â 2E</p><p>  uint32 &quot;ColorsImportant&quot;   //Â 32</p><p> endsection</p><p>//è°ƒè‰²æ¿ä¿¡æ¯</p><p> section &quot;Palette(IfÂ PaletteSize=0Â thenÂ noÂ palette)&quot;</p><p>  numberingÂ 0</p><p>  {</p><p>   byteÂ &quot;B[~]&quot;</p><p>   byteÂ &quot;G[~]&quot;</p><p>   byteÂ &quot;R[~]&quot;</p><p>   byteÂ &quot;A[~]&quot;</p><p>  }Â [PaletteSize]</p><p> endsection</p><p>end</p><p>å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><p>$data = file_get_contents( &#x27;Wener.bmp&#x27;);</p><p>$array = unpack(&quot;nBMP_ID/Væ–‡ä»¶å¤§å°/Vä¿ç•™å­—/Vå›¾ç‰‡ä¿¡æ¯åç§»/Vå¤´å¤§å°/Vå®½/Vé«˜/vPlanes/vBPP/Vå‹ç¼©æ–¹æ³•/Vå›¾ç‰‡å¤§å°/Væ¨ªè½´ä¸Šæ¯åƒç´ å®½/Vç«–è½´ä¸Šæ¯åƒç´ å®½/Vè°ƒè‰²æ¿å¤§å°/Vé‡è¦çš„é¢œè‰²&quot;, $data);</p><p>echo &#x27;&lt;pre&gt;&#x27;;</p><p>var_dump( $array);</p><p>foreach( $array as $k =&gt; $v)</p><p> echo $k,&#x27;:&#x27;,( $v),&#x27;&lt;br&gt;&#x27;;</p><p>è¯·æ›´æ”¹ä¸ºä½ è‡ªå·±çš„å›¾ç‰‡åœ°å€åæµ‹è¯•ã€‚æˆ‘çš„è¾“å…¥å¦‚ä¸‹ï¼š</p><p>BMP_ID:16973</p><p>æ–‡ä»¶å¤§å°:307254</p><p>ä¿ç•™å­—:0</p><p>å›¾ç‰‡ä¿¡æ¯åç§»:54</p><p>å¤´å¤§å°:40</p><p>å®½:240</p><p>é«˜:320</p><p>Planes:1</p><p>BPP:32</p><p>å‹ç¼©æ–¹æ³•:0</p><p>å›¾ç‰‡å¤§å°:307200</p><p>æ¨ªè½´ä¸Šæ¯åƒç´ å®½:0</p><p>ç«–è½´ä¸Šæ¯åƒç´ å®½:0</p><p>è°ƒè‰²æ¿å¤§å°:0</p><p>é‡è¦çš„é¢œè‰²:0</p><p>æˆ‘çš„æµ‹è¯•æ–‡ä»¶ï¼š</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-6007.png" target="_blank" rel="noopener noreferrer"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-6007-225x300.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-6007"></a></p><p>æ€»ç»“ï¼š</p><p>æ€»çš„ï¼Œæ¥è¯´ï¼Œphpçš„è¿™ä¸¤ä¸ªå‡½æ•°æ— ç–‘æ˜¯å¾ˆå¼ºå¤§çš„ã€‚ç”¨æ¥åˆ†ææ–‡ä»¶ä¹Ÿå¾ˆå¥½ç”¨ã€‚</p><p>æˆ–è®¸ä¸è¶³çš„å°±æ˜¯ç¼ºå°‘è¿™æ–¹é¢çš„æ¡ˆä¾‹å§ï¼Œæ²¡è§åˆ°å¾ˆå¤šäººç”¨è¿‡è¿™ä¸ªã€‚</p><p>ä»¥åè‡ªå·±å­¦ä¹ æ–‡ä»¶çš„ç»“æ„ä¹Ÿä¼šå¸¸å¸¸ç”¨åˆ°è¿™ä¸ªå‡½æ•°ï¼Œæœ‰æ—¶å€™è§‰å¾—unpackæ¯”packæ›´æœ‰é­…åŠ›ã€‚å…³äºæ›´è¯¦ç»†çš„BMPæ–‡ä»¶ç»“æ„å’Œä¿¡æ¯çš„è·å–æˆ‘ä¼šå¦å¤–å†™ä¸€ç¯‡æ–‡ç« çš„ã€‚è¿™ç¯‡åªæ˜¯ç•¥å¾®çš„æ¶‰åŠï¼Œä½œä¸ºä¸€ä¸ªä¾‹å­è€Œå·²ã€‚æˆ‘è¿˜æ˜¯è§‰å¾—</p><p>Phpå¤„ç†2è¿›åˆ¶æµçš„é­…åŠ›æ˜¯éå¸¸å¼ºå¤§çš„ã€‚</p><p>ç½®äºå»ºç«‹åœ¨è¿™ä¸ªä¹‹ä¸Šå†™æ›´å¤šçš„è¿ç”¨ï¼ˆåŠ å¯†ï¼Œåè®®ï¼Œç ´è§£ï¼Œè·å–æ–‡ä»¶ä¿¡æ¯ï¼‰ä»€ä¹ˆçš„å°±çœ‹ä¸ªäººå‘æŒ¥äº†ã€‚</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/story/tags/php">PHP</a><a class="margin-horiz--sm" href="/story/tags/ç¼–ç¨‹">ç¼–ç¨‹</a><a class="margin-horiz--sm" href="/story/tags/åº“">åº“</a></div></footer></article><div><a href="https://github.com/wenerme/wener/edit/master/story/2011/2011-01-01-PHP æ“ä½œäºŒè¿›åˆ¶æµï¼Œè¯»å–æ–‡ä»¶ç»“æ„.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/story/start-blogging"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« 2011å¹´çš„ç¬¬ä¸€å¤©ï¼Œä»Šå¤©å¼€é€šåšå®¢äº†</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/story/simple-compress-algorithem"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">ä¸€ç§ç®€å•çš„å‹ç¼©ç®—æ³• Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">ç¬”è®°</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Projects</h4><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Wener Site" src="/img/wener-logo.svg"></div><div class="footer__copyright">Copyright Â© 1992-2021 Wener - æ„å»ºæ—¶é—´ 2021-03-28 16:35</div></div></div></footer></div>
<script src="/styles.2f483b15.js"></script>
<script src="/runtime~main.c54f7779.js"></script>
<script src="/main.f72bc020.js"></script>
<script src="/1.102d725e.js"></script>
<script src="/2.34dcf6dc.js"></script>
<script src="/3.29e9df6d.js"></script>
<script src="/ccc49370.c391b892.js"></script>
<script src="/65eaf7fb.cf5144f3.js"></script>
<script src="/9d293816.74d0936e.js"></script>
</body>
</html>