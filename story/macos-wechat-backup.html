<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"><title data-rh="true">macOS 微信备份原理 | Wener Live &amp; Life</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wener.me/story/macos-wechat-backup"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="macOS 微信备份原理 | Wener Live &amp; Life"><meta data-rh="true" name="description" content="iPhone7 32G 用了几年后，微信占了 10G，如果能把微信备份后清除，还能再战两年！"><meta data-rh="true" property="og:description" content="iPhone7 32G 用了几年后，微信占了 10G，如果能把微信备份后清除，还能再战两年！"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-06-27T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="macOS,WeChat"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wener.me/story/macos-wechat-backup"><link data-rh="true" rel="alternate" href="https://wener.me/story/macos-wechat-backup" hreflang="en"><link data-rh="true" rel="alternate" href="https://wener.me/story/macos-wechat-backup" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://37P8DMWBKF-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a5b87add.css">
<link rel="preload" href="/assets/js/runtime~main.07b4d16f.js" as="script">
<link rel="preload" href="/assets/js/main.92dfd685.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_WawS">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--light_HlbN"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--dark__4Lo"></div><b class="navbar__title text--truncate">Wener</b></a><a class="navbar__item navbar__link" href="/notes">笔记</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_N_jk colorModeToggle_wwB5"><button class="clean-btn toggleButton_gcuK toggleButtonDisabled_AJhd" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Eiwc"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_a3UO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_Ymm7"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_uXRe"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_hOT_ thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_UA9M margin-bottom--md">Recent posts</div><ul class="sidebarItemList_IfU0 clean-list"><li class="sidebarItem_zQtY"><a class="sidebarItemLink_KEMw" href="/story/crm-trails">CRM 实现经历</a></li><li class="sidebarItem_zQtY"><a class="sidebarItemLink_KEMw" href="/story/raod-to-master">大师之路</a></li><li class="sidebarItem_zQtY"><a class="sidebarItemLink_KEMw" href="/story/2022-shanghai-lockdown-memo">2022上海封城日记</a></li><li class="sidebarItem_zQtY"><a class="sidebarItemLink_KEMw" href="/story/prerequires-for-offcial-site">企业建站的基本前提考量</a></li><li class="sidebarItem_zQtY"><a class="sidebarItemLink_KEMw" href="/story/love-the-world">Love the World</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_FXuy" itemprop="headline">macOS 微信备份原理</h1><div class="container_zqpU margin-vert--md"><time datetime="2021-06-27T00:00:00.000Z" itemprop="datePublished">June 27, 2021</time> · <!-- -->10 min read</div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>iPhone7 32G 用了几年后，微信占了 10G，如果能把微信备份后清除，还能再战两年！</p><ul><li>微信自身支持备份，但备份后是加密的，无法访问。</li><li>微信占用空间的主要是图片和视频</li><li>微信清理不会清除文本<ul><li>文本消息相对少</li><li>想要清除文本消息可以卸载重装</li></ul></li></ul><ul><li>通过 macOS 备份 iPhone 系统 - 备份时不要加密<ul><li>备份后位于 <code>$HOME/Library/Application Support/MobileSync/Backup/</code></li></ul></li><li>备份后的数据<ul><li>Manifest.{mbdb,db} - mac 备份文件清单<ul><li>Files - 文件清单<ul><li><code>fileID TEXT PRIMARY KEY, domain TEXT, relativePath TEXT, flags INTEGER, file BLOB</code><ul><li>fileID - 为 备份映射后的文件</li><li>domain - 应用</li><li>relativePath - 应用相对路径</li></ul></li><li><code>select relativePath from Files where domain = &#x27;AppDomain-com.tencent.xin&#x27; limit 10</code>;<ul><li>微信相关文件</li></ul></li></ul></li><li>Properties<ul><li><code>key TEXT PRIMARY KEY, value BLOB</code></li></ul></li><li>.mbdb - 二进制文件，需要自定义解码逻辑</li><li>.db - sqlite3 - 新版一般是 sqlite3</li></ul></li></ul></li></ul><pre><code class="language-bash"># 打开 Manifest.db
sqlite3 Manifest.db
</code></pre><pre><code class="language-sql" metastring="title=&quot;常用操作&quot;" title="&quot;常用操作&quot;">-- 查看表
.tables
.tables Chat_%
-- 查看表结构
.schema Chat_ID
</code></pre><pre><code class="language-sql">-- 关心的文件
select fileID,relativePath from Files
where domain = &#x27;AppDomain-com.tencent.xin&#x27; and
(
  relativePath like &#x27;%/MM.sqlite&#x27;
  or relativePath like &#x27;%/WCDB_Contact.sqlite&#x27;
  or relativePath like &#x27;%/message_%.sqlite&#x27;
);

-- 所有 DB 目录下内容
select fileID,relativePath from Files
where domain = &#x27;AppDomain-com.tencent.xin&#x27; and relativePath like &#x27;Documents/%/DB/%&#x27;;

-- 文件数量
select count(*) from Files
where domain = &#x27;AppDomain-com.tencent.xin&#x27;;
</code></pre><ul><li>备份后包含微信数据<ul><li><code>message_%d.sqlite</code> - 聊天对话<ul><li>ChatExt2_ID</li><li>Chat_ID - 对应一个聊天会话<ul><li>ID 为 userName 或 MD5 的 alias</li></ul></li><li>Hello_ID</li></ul></li><li>WCDB_Contact.sqlite - 联系人<ul><li>Friend - 好友</li><li>MassSendContact</li><li>QQContact - QQ 联系人</li></ul></li><li>MM - 消息<ul><li>BottleContactTable4</li><li>BottleTable4</li><li>ChatExt2_ID</li><li>Chat_ID</li><li>Emoticon1</li><li>EmoticonPackage05</li><li>EmoticonUpload_1</li><li>Friend</li><li>Friend_Ext</li><li>MassSendContactTable</li><li>MessageBizExtTable</li><li>QQContact</li><li>RevokeMsgTable</li><li>friend_meta</li></ul></li><li>contactlabel.list - 标签列表</li></ul></li></ul><h2 id="friend">Friend</h2><table><thead><tr><th>column</th><th>type</th><th>desc</th></tr></thead><tbody><tr><td>userName</td><td>text</td><td>WXID、群 ID、公众号 ID</td></tr><tr><td>type</td><td>integer</td><td>类型</td></tr><tr><td>certificationFlag</td><td>integer</td><td></td></tr><tr><td>imgStatus</td><td>integer</td><td></td></tr><tr><td>encodeUserName</td><td>text</td><td></td></tr><tr><td>dbContactLocal</td><td>blob</td><td></td></tr><tr><td>dbContactOther</td><td>blob</td><td></td></tr><tr><td>dbContactRemark</td><td>blob</td><td>联系人备注</td></tr><tr><td>dbContactHeadImage</td><td>blob</td><td>联系人头像</td></tr><tr><td>dbContactProfile</td><td>blob</td><td></td></tr><tr><td>dbContactSocial</td><td>blob</td><td></td></tr><tr><td>dbContactChatRoom</td><td>blob</td><td>群信息,XML</td></tr><tr><td>dbContactBrand</td><td>blob</td><td></td></tr><tr><td>_<!-- -->packed_DBContactTable</td><td>blob</td><td></td></tr></tbody></table><table><thead><tr><th>userName</th><th>desc</th></tr></thead><tbody><tr><td>100000000@chatroom</td><td>群组会话</td></tr><tr><td><code>wxid_</code></td><td>标准微信 ID</td></tr><tr><td>QQ1000000000</td><td></td></tr><tr><td>gh_123456789abc</td><td>公众号</td></tr></tbody></table><table><thead><tr><th>encodeUserName</th><th>desc</th></tr></thead><tbody><tr><td>v1_xxxx@stranger</td><td>加密后陌生人姓名</td></tr><tr><td>v3_xxxx@stranger</td><td>加密后陌生人姓名</td></tr></tbody></table><table><thead><tr><th>type</th><th align="right">bin</th><th>desc</th></tr></thead><tbody><tr><td>0</td><td align="right">0</td><td>微信运动</td></tr><tr><td>1</td><td align="right">1</td><td>微信应用</td></tr><tr><td>2</td><td align="right">10</td><td>app + 群</td></tr><tr><td>3</td><td align="right">11</td><td>好友</td></tr><tr><td>4</td><td align="right">100</td><td>群里面的人</td></tr><tr><td>6</td><td align="right">110</td><td>群好友，对方加你，你未通过</td></tr><tr><td>7</td><td align="right">111</td><td>群里面的人，而且互为好友</td></tr><tr><td>11</td><td align="right">1011</td><td>拉黑别人</td></tr><tr><td>67</td><td align="right">1000011</td><td>标星</td></tr><tr><td>256</td><td align="right">100000000</td><td>删除好友</td></tr><tr><td>259</td><td align="right">100000011</td><td>不让他看我的朋友圈</td></tr><tr><td>65539</td><td align="right">10000000000000011</td><td>不看他的朋友圈</td></tr></tbody></table><table><thead><tr><th>bit</th><th>desc</th></tr></thead><tbody><tr><td>1</td><td>你是否加对方为好友</td></tr><tr><td>2</td><td>对方是否加你为好友</td></tr><tr><td>3</td><td>是否群里面的</td></tr><tr><td>4</td><td>你主动拉黑对方</td></tr><tr><td>7</td><td>标星</td></tr></tbody></table><h2 id="chat">Chat</h2><ul><li>Chat<!-- -->_<!-- --> 聊天信息</li><li>ChatExt<!-- -->_<!-- --> 消息扩展信息</li></ul><table><thead><tr><th>column</th><th>type</th><th>desc</th></tr></thead><tbody><tr><td>CreateTime</td><td>INTEGER</td><td></td></tr><tr><td>Des</td><td>INTEGER</td><td></td></tr><tr><td>ImgStatus</td><td>INTEGER</td><td></td></tr><tr><td>MesLocalID</td><td>INTEGER</td><td></td></tr><tr><td>Message</td><td>TEXT</td><td>消息内容</td></tr><tr><td>MesSvrID</td><td>INTEGER</td><td></td></tr><tr><td>Status</td><td>INTEGER</td><td></td></tr><tr><td>TableVer</td><td>INTEGER</td><td></td></tr><tr><td>Type</td><td>INTEGER</td><td>消息类型</td></tr></tbody></table><table><thead><tr><th>type</th><th>desc</th></tr></thead><tbody><tr><td>1</td><td>文本</td></tr><tr><td>3</td><td>图片</td></tr><tr><td>34</td><td>语音</td></tr><tr><td>42</td><td>名片</td></tr><tr><td>43</td><td>视频</td></tr><tr><td>47</td><td>表情</td></tr><tr><td>48</td><td>位置</td></tr><tr><td>49</td><td>链接</td></tr><tr><td>50</td><td>视频/语音通话</td></tr><tr><td>62</td><td>小视频</td></tr><tr><td>10000</td><td>系统消息</td></tr></tbody></table><h1 id="附录">附录</h1><h2 id="wcdb_contactsqlite">WCDB_Contact.sqlite</h2><pre><code class="language-sql">-- WCDB_Contact
CREATE TABLE Friend
(
    userName               text primary key on conflict replace,
    type                   integer default 0,
    certificationFlag      integer default 0,
    imgStatus              integer default 0,
    encodeUserName         text,
    dbContactLocal         blob,
    dbContactOther         blob,
    dbContactRemark        blob,
    dbContactHeadImage     blob,
    dbContactProfile       blob,
    dbContactSocial        blob,
    dbContactChatRoom      blob,
    dbContactBrand         blob,
    _packed_DBContactTable blob
);
CREATE TABLE MassSendContact
(
    UsrName    text not null primary key on conflict replace,
    Detail     text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text
);
CREATE TABLE QQContact
(
    UsrName           text not null primary key on conflict replace,
    Uin               integer default 0,
    Type              integer default 0,
    Sex               integer default 0,
    Age               integer default 0,
    ImgKey            integer default 0,
    ExtKey            integer default 0,
    ImgKeyLast        integer default 0,
    ExtKeyLast        integer default 0,
    CreateTime        integer default 0,
    ConIntRes1        integer default 0,
    ConIntRes2        integer default 0,
    ConIntRes3        integer default 0,
    NickName          text,
    Email             text,
    Mobile            text,
    Address           text,
    Sign              text,
    birthday          text,
    FullPY            text,
    ShortPY           text,
    Img               text,
    ConRemark         text,
    ConRemark_PYShort text,
    ConRemark_PYFull  text,
    ConStrRes1        text,
    ConStrRes2        text,
    ConStrRes3        text
);
</code></pre><h2 id="mmsqlite">MM.sqlite</h2><pre><code class="language-sql">CREATE TABLE Friend
(
    TableVer     integer default 1,
    UsrName      text not null primary key on conflict replace,
    NickName     text,
    Uin          integer default 0,
    Email        text,
    Mobile       text,
    Sex          integer default 0,
    FullPY       text,
    ShortPY      blob,
    Img          text,
    Type         integer default 0,
    LastChatTime integer default 0,
    Draft        text
);
CREATE TABLE Friend_Ext
(
    UsrName           text not null primary key on conflict replace,
    ConType           integer default 0,
    ConRemark         text,
    ConRemark_PYShort text,
    ConRemark_PYFull  text,
    ConQQMBlog        text,
    ConSMBlog         text,
    ConChatRoomMem    text,
    ConIntRes1        integer default 0,
    ConIntRes2        integer default 0,
    ConIntRes3        integer default 0,
    ConStrRes1        text,
    ConStrRes2        text,
    ConStrRes3        text
);
CREATE TABLE friend_meta
(
    username   text primary key on conflict replace,
    lastUpdate integer,
    intCon1    integer,
    intCon2    integer,
    intCon3    integer,
    strCon1    text,
    strCon2    text,
    strCon3    text
);
CREATE TABLE QQContact
(
    UsrName           text not null primary key on conflict replace,
    Uin               integer default 0,
    Type              integer default 0,
    Sex               integer default 0,
    Age               integer default 0,
    ImgKey            integer default 0,
    ExtKey            integer default 0,
    ImgKeyLast        integer default 0,
    ExtKeyLast        integer default 0,
    CreateTime        integer default 0,
    ConIntRes1        integer default 0,
    ConIntRes2        integer default 0,
    ConIntRes3        integer default 0,
    NickName          text,
    Email             text,
    Mobile            text,
    Address           text,
    Sign              text,
    birthday          text,
    FullPY            text,
    ShortPY           text,
    Img               text,
    ConRemark         text,
    ConRemark_PYShort text,
    ConRemark_PYFull  text,
    ConStrRes1        text,
    ConStrRes2        text,
    ConStrRes3        text
);
CREATE TABLE RevokeMsgTable
(
    MSG_REVOKE_COL_SVRID   bigint  default 0 primary key,
    MSG_REVOKE_COL_CONTENT text,
    MSG_REVOKE_COL_INTRES1 integer default 0,
    MSG_REVOKE_COL_INTRES2 bigint  default 0,
    MSG_REVOKE_COL_INTRES3 bigint  default 0,
    MSG_REVOKE_COL_STRRES1 text,
    MSG_REVOKE_COL_STRRES2 text,
    MSG_REVOKE_COL_STRRES3 text,
    _packed_RevokeMessage  blob
);
CREATE TABLE Emoticon1
(
    MD5        text,
    Message    text,
    Type       integer default 0,
    CreateTime integer default 0,
    Len        integer default 0,
    Status     integer default 0,
    Catalog    text,
    CatelogID  integer default 0,
    Draft      text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConIntRes3 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text,
    ConStrRes3 text
);
CREATE TABLE EmoticonUpload_1
(
    UsrName    text,
    MesLocalID text,
    MD5        text,
    Type       integer default 0,
    Message    text,
    CreateTime integer default 0,
    SendTime   integer default 0,
    Offset     integer default 0,
    Len        integer default 0,
    Status     integer default 0,
    Catalog    text,
    CatelogID  integer default 0,
    Draft      text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConIntRes3 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text,
    ConStrRes3 text
);
CREATE TABLE BottleTable4
(
    BottleLocalID        integer primary key autoincrement,
    BottleSvrID          integer default 0,
    BottleEncryptUsrName text,
    BottleID             text,
    BottleExt            text
);
CREATE TABLE BottleContactTable4
(
    BottleContactUsrName     text not null primary key on conflict replace,
    BottleContactNickName    text,
    BottleContactSex         integer default 0,
    BottleContactImgStatus   text,
    BottleContactHDImgStatus text,
    BottleContactProvince    text,
    BottleContactCity        text,
    BottleContactSign        text,
    BottleContactImgKey      integer default 0,
    BottleContactImgKeyLast  integer default 0,
    BottleContactExtKey      integer default 0,
    BottleContactExtKeyLast  integer default 0,
    BottleContactINTRES1     integer default 0,
    BottleContactINTRES2     integer default 0,
    BottleContactINTRES3     integer default 0,
    BottleContactTEXTRES1    text,
    BottleContactTEXTRES2    text,
    BottleContactTEXTRES3    text
);
CREATE TABLE MassSendContactTable
(
    UsrName    text not null primary key on conflict replace,
    Detail     text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text
);
CREATE TABLE MessageBizExtTable
(
    chatUsername            text,
    msgLocalId              integer,
    msgType                 integer,
    msgInnerType            integer,
    bizId                   text,
    msgExtColInt1           integer,
    msgExtColInt2           integer,
    msgExtColString1        text,
    msgExtColString2        text,
    _packed_DBMessageBizExt blob
);
CREATE TABLE EmoticonPackage05
(
    EmoticonPackageId          text not null primary key on conflict replace,
    EmoticonPackageName        text,
    EmoticonPackageIconUrl     text,
    EmoticonPackagePannelUrl   text,
    EmoticonPackagePStatus     integer default 0,
    EmoticonPackageDLStatus    integer default 0,
    EmoticonPackageInstallTime integer default 0,
    EmoticonPackageRemoveTime  integer default 0,
    ConIntRes1                 integer default 0,
    ConIntRes2                 integer default 0,
    ConIntRes3                 integer default 0,
    ConStrRes1                 text,
    ConStrRes2                 text,
    ConStrRes3                 text
);
CREATE TABLE Chat
(
    TableVer   integer default 1,
    MesLocalID integer primary key autoincrement,
    MesSvrID   bigint  default 0,
    CreateTime integer default 0,
    Message    text,
    Status     integer default 0,
    ImgStatus  integer default 0,
    Type       integer,
    Des        integer
);
CREATE TABLE ChatExt2
(
    MesLocalID  integer primary key,
    msgFlag     integer default 0,
    ConIntRes2  integer default 0,
    ConIntRes3  integer default 0,
    MsgSource   text,
    MsgIdentify text,
    ConStrRes1  text,
    ConStrRes2  text,
    ConStrRes3  text,
    ConIntRes1  integer default 0
);
</code></pre><h2 id="message_dsqlite"><code>message_%d.sqlite</code></h2><pre><code class="language-sql">CREATE TABLE Chat_ID
(
    CreateTime INTEGER DEFAULT 0,
    Des        INTEGER,
    ImgStatus  INTEGER DEFAULT 0,
    MesLocalID INTEGER PRIMARY KEY AUTOINCREMENT,
    Message    TEXT,
    MesSvrID   INTEGER DEFAULT 0,
    Status     INTEGER DEFAULT 0,
    TableVer   INTEGER DEFAULT 1,
    Type       INTEGER
);
CREATE TABLE ChatExt2_ID
(
    ConIntRes1  INTEGER DEFAULT 0,
    ConIntRes2  INTEGER DEFAULT 0,
    ConIntRes3  INTEGER DEFAULT 0,
    ConStrRes1  TEXT,
    ConStrRes2  TEXT,
    ConStrRes3  TEXT,
    MesLocalID  INTEGER PRIMARY KEY,
    msgFlag     INTEGER DEFAULT 0,
    MsgIdentify TEXT,
    MsgSource   TEXT
);
CREATE TABLE Hello_ID
(
    ConIntRes1 INTEGER DEFAULT 0,
    ConIntRes2 INTEGER DEFAULT 0,
    ConIntRes3 INTEGER DEFAULT 0,
    ConStrRes1 TEXT,
    ConStrRes2 TEXT,
    ConStrRes3 TEXT,
    CreateTime INTEGER DEFAULT 0,
    Des        INTEGER,
    ImgStatus  INTEGER DEFAULT 0,
    MesLocalID INTEGER PRIMARY KEY AUTOINCREMENT,
    Message    TEXT,
    MesSvrID   INTEGER DEFAULT 0,
    OpCode     INTEGER DEFAULT 0,
    Status     INTEGER DEFAULT 0,
    TableVer   INTEGER DEFAULT 1,
    Type       INTEGER,
    UsrName    TEXT
);
</code></pre><h1 id="参考">参考</h1><ul><li><a href="https://www.jianshu.com/p/07a8d87e698b">https://www.jianshu.com/p/07a8d87e698b</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_rSrS"><div class="col"><b>Tags:</b><ul class="tags_e6lW padding--none margin-left--sm"><li class="tag_CRnL"><a class="tag_y53u tagRegular_Iz3h" href="/story/tags/mac-os">macOS</a></li><li class="tag_CRnL"><a class="tag_y53u tagRegular_Iz3h" href="/story/tags/we-chat">WeChat</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/wenerme/wener/edit/master/story/2021/2021-06-27-macos-wechat-backup.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_icZ1" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/story/how-i-build-my-site"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">我的站点是如何构建的？！</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/story/agi-vs-ami-vs-ari"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">如何选择 Asterisk 接口</div></a></nav></main><div class="col col--2"><div class="tableOfContents_Rbtr thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#friend" class="table-of-contents__link toc-highlight">Friend</a></li><li><a href="#chat" class="table-of-contents__link toc-highlight">Chat</a></li><li><a href="#wcdb_contactsqlite" class="table-of-contents__link toc-highlight">WCDB_Contact.sqlite</a></li><li><a href="#mmsqlite" class="table-of-contents__link toc-highlight">MM.sqlite</a></li><li><a href="#message_dsqlite" class="table-of-contents__link toc-highlight"><code>message_%d.sqlite</code></a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/notes/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--light_HlbN footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--dark__4Lo footer__logo"></div><div class="footer__copyright">Copyright © 1992-2022 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2022-09-22 04:38</div></div></div></footer></div>
<script src="/assets/js/runtime~main.07b4d16f.js"></script>
<script src="/assets/js/main.92dfd685.js"></script>
</body>
</html>