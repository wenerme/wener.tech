<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live & Life Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live & Life Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live & Life" href="/opensearch.xml"><title data-react-helmet="true">Firecracker è¿è¡Œ AlpineLinux | Wener Live &amp; Life</title><meta data-react-helmet="true" property="og:title" content="Firecracker è¿è¡Œ AlpineLinux | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="Firecracker æ˜¯äºšé©¬é€Š AWS ä¸ºäº†è§£å†³è™šæ‹ŸåŒ–è¿è¡Œ serveless æœåŠ¡å®ç°çš„ VMM/Virtual Machine Monitorï¼Œä½œä¸º QEMU çš„æ›¿ä»£å“ï¼Œä¸“æ³¨äºä¸ºäº‘ä¸Šç¯å¢ƒæä¾›è™šæ‹ŸåŒ–ã€‚"><meta data-react-helmet="true" property="og:description" content="Firecracker æ˜¯äºšé©¬é€Š AWS ä¸ºäº†è§£å†³è™šæ‹ŸåŒ–è¿è¡Œ serveless æœåŠ¡å®ç°çš„ VMM/Virtual Machine Monitorï¼Œä½œä¸º QEMU çš„æ›¿ä»£å“ï¼Œä¸“æ³¨äºä¸ºäº‘ä¸Šç¯å¢ƒæä¾›è™šæ‹ŸåŒ–ã€‚"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.f53ced8f.css">
<link rel="preload" href="/styles.daaf3fa9.js" as="script">
<link rel="preload" href="/runtime~main.430e3866.js" as="script">
<link rel="preload" href="/main.cf7091df.js" as="script">
<link rel="preload" href="/1.a5862bf1.js" as="script">
<link rel="preload" href="/2.55b1ee95.js" as="script">
<link rel="preload" href="/3.a9404c11.js" as="script">
<link rel="preload" href="/ccc49370.87535276.js" as="script">
<link rel="preload" href="/65eaf7fb.8dc4b144.js" as="script">
<link rel="preload" href="/ea95f6a6.d6eca2a3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Wener</strong></a><a class="navbar__item navbar__link" href="/notes/java/java">ç¬”è®°</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/story">æ•…äº‹</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">æŒ‡å—</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">å·¥å…·</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Wener</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/java">ç¬”è®°</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/story">æ•…äº‹</a></li><li class="menu__list-item"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/dns-prevent-spoofing">æŒ‡å—</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/tool/network/ip-lookup">å·¥å…·</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/fix-init-script">è®°å½•ä¸€æ¬¡ä¿®å¤ init è„šæœ¬çš„ç»å†</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/alpinelinux-setup-xfce">AlpineLinux å®‰è£… Xfce æ¡Œé¢</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/why-need-graphql">ä¸ºä»€ä¹ˆéœ€è¦ GraphQL</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/understand-baby-vision">ç†è§£å­©å­çš„è§†åŠ›</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/issues-system-design">å·¥å•ç³»ç»Ÿè®¾è®¡å®ç°</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Firecracker è¿è¡Œ AlpineLinux</h1><div class="margin-vert--md"><time datetime="2020-10-23T00:00:00.000Z" class="blogPostDate_Ta7i">October 23, 2020  Â· 4 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"></div></div></header><section class="markdown"><p>Firecracker æ˜¯äºšé©¬é€Š AWS ä¸ºäº†è§£å†³è™šæ‹ŸåŒ–è¿è¡Œ serveless æœåŠ¡å®ç°çš„ VMM/Virtual Machine Monitorï¼Œä½œä¸º QEMU çš„æ›¿ä»£å“ï¼Œä¸“æ³¨äºä¸ºäº‘ä¸Šç¯å¢ƒæä¾›è™šæ‹ŸåŒ–ã€‚</p><p><strong>ä¼˜ç‚¹</strong></p><ul><li>å¯åŠ¨å¿« &lt; 125ms</li><li>å†…å­˜å ç”¨å°‘ &lt; 5mb</li><li>Rust å®ç°</li><li>musl é™æ€é“¾æ¥</li><li>firecracker è‡ªèº«çº¦ <strong>1.6 MB</strong> - <strong>æ— ä¾èµ–</strong></li></ul><p><strong>è®¾è®¡ç›®æ ‡/ç¼ºé™·</strong></p><ul><li>åŸºäº KVM å®ç°<ul><li>åªæœ‰ Linux å¹³å°</li><li>åªèƒ½è¿è¡Œç›¸åŒæ¶æ„</li></ul></li><li>ä¸“æ³¨äºè™šæ‹ŸåŒ–åœºæ™¯<ul><li>æ”¯æŒçš„è™šæ‹Ÿè®¾å¤‡å°‘<ul><li>virtio-net - è™šæ‹ŸåŒ–ç½‘ç»œ</li><li>virtio-block - è™šæ‹ŸåŒ–å—è®¾å¤‡</li><li>virtio-vsock - unix sock</li><li>ä¸²å£ - ttyS0 ç»ˆç«¯ç™»é™†</li><li>æœ€ç®€é”®ç›˜æ§åˆ¶å™¨</li></ul></li><li>æ²¡æœ‰ bios</li><li>é€šè¿‡ vmlinux+initramfs+rootfs å¯åŠ¨</li></ul></li><li>è¦æ±‚ Kernel 4.14+</li></ul><p><strong>ä¸ºä»€ä¹ˆé€‰æ‹© Alpineï¼Ÿ</strong></p><ul><li>æœ€å®¹æ˜“æ„å»º</li><li>æœ€å®¹æ˜“ä½¿ç”¨</li><li>æ„å»º Firecracker èƒ½ä½¿ç”¨çš„ CentOS, Debian, Ubuntu, Fedora çœŸå¤ªéš¾äº† - å¦‚æœæ²¡æŒæ¡å†…éƒ¨å¯åŠ¨æœºåˆ¶ä¸å»ºè®®å°è¯•</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æ³¨æ„"></a>æ³¨æ„<a class="hash-link" href="#æ³¨æ„" title="Direct link to heading">#</a></h2><p>ä¸€äº›æ³¨æ„äº‹é¡¹å†™åœ¨å‰é¢ï¼š</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Firecracker æ³¨æ„ç‚¹</h5></div><div class="admonition-content"><ul><li>æ²¡æœ‰ç”µæºç®¡ç†ï¼Œå› æ­¤ä¸æ”¯æŒé‡å¯ï¼Œä¼šç›´æ¥é€€å‡º</li><li>ç³»ç»Ÿå†… poweroff æˆ– halt ä¸ä¼šé€€å‡º - reboot ä¼š</li><li>å¯ä»¥å‘é€ SendCtrlAltDel é€€å‡º</li><li>ä¸æ”¯æŒ QCOW2 æ ¼å¼ï¼Œå¯ä»¥è€ƒè™‘é…åˆ NDB ä½¿ç”¨</li><li>alpine å†…æ ¸éœ€è¦ boot-source.initrd_path =&gt; initramfs-virt</li><li>alpine netboot çš„ initramfs-virt æ²¡æœ‰ ext4</li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å®‰è£…"></a>å®‰è£…<a class="hash-link" href="#å®‰è£…" title="Direct link to heading">#</a></h2><p>Firecracker çš„<a href="https://github.com/firecracker-microvm/firecracker/releases" target="_blank" rel="noopener noreferrer">å‘å¸ƒé¡µ</a>å¯ç›´æ¥ä¸‹è½½æ¯ä¸ªç‰ˆæœ¬ã€‚è¿™é‡Œä½¿ç”¨ curl ä¸‹è½½æœ€æ–°ç‰ˆå¹¶å®‰è£…åˆ° <code>/usr/loca/bin</code>ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ä¸‹è½½å®‰è£… firecracker åˆ° /usr/local/bin/firecracker</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">latest</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">basename</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">curl -fsSLI -o /dev/null -w  %</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token variable" style="color:rgb(191, 199, 213)">url_effective</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token variable" style="color:rgb(191, 199, 213)"> https://github.com/firecracker-microvm/firecracker/releases/latest</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L -o /usr/local/bin/firecracker https://github.com/firecracker-microvm/firecracker/releases/download/</span><span class="token variable" style="color:rgb(191, 199, 213)">${latest}</span><span class="token plain">/firecracker-</span><span class="token variable" style="color:rgb(191, 199, 213)">${latest}</span><span class="token plain">-</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">uname</span><span class="token variable" style="color:rgb(191, 199, 213)"> -m</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x /usr/local/bin/firecracker</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rootfs"></a>rootfs<a class="hash-link" href="#rootfs" title="Direct link to heading">#</a></h2><p>å¯åŠ¨ firecracker éœ€è¦ kernel å’Œ rootfsï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™å¯èƒ½å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨å‡†å¤‡ rootfsã€‚è¿™é‡Œä½¿ç”¨ alpinelinuxï¼ŒåŠŸèƒ½å®Œå–„æ„å»ºç®€å•ã€‚</p><p>å› ä¸º alpine éƒ½ä¼šæä¾›åŸºç¡€çš„ rootfsï¼Œè¿™é‡Œç›´æ¥ä¸‹è½½è§£å‹åˆ° ext4 çš„ loopdev ä¸­ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># åˆ›å»º root ç›˜</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># qemu-img create -f raw alpine.rootfs.ext4 1G</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fallocate -l 1G ubuntu.rootfs.ext4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ ¼å¼åŒ–ä¸º ext4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkfs.ext4 ./alpine.rootfs.ext4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‚è½½åˆ° /tmp/rootfs</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> /tmp/rootfs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mount</span><span class="token plain"> alpine.rootfs.ext4 /tmp/rootfs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ä¸‹è½½ rootfs</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -OJ https://mirrors.aliyun.com/alpine/v3.12/releases/x86_64/alpine-minirootfs-3.12.0-x86_64.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å®‰è£…åˆ° /tmp/rootfs</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> zxvf alpine-minirootfs-3.12.0-x86_64.tar.gz -C /tmp/rootfs/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>åŸºç¡€ rootfs è¿˜ä¸è¶³ä»¥å¯åŠ¨ç³»ç»Ÿï¼Œå› ä¸ºæ— æ³•è¿›è¡Œç³»ç»Ÿ initï¼Œå› æ­¤è¿˜éœ€è¦åœ¨ rootfs ä¸­å®‰è£…å¿…è¦çš„åŒ…å¯åŠ¨å¿…è¦çš„æœåŠ¡ã€‚</p><p>è¿›å…¥ rootfs ä¹‹å‰éœ€è¦ resolv.confï¼ŒåŒ…å«äº† DNS ä¿¡æ¯ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ‹·è´ dns é…ç½® - æ²¡æœ‰ä¼šæ— æ³•è¿›è¡Œ dns è§£æ</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> /etc/resolv.conf /tmp/rootfs/etc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¦‚æœä¸»æœºæ˜¯ alpinelinux å¯ä»¥ä»ä¸»æœºæ‹·è´é…é•œåƒç½®æ–‡ä»¶</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¦‚æœä¸æ˜¯å»ºè®®è®¾ç½®é•œåƒ</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># sudo cp /etc/apk/repositories /tmp/rootfs/etc/apk/repositories</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># chroot è¿›å…¥ rootfs å®‰è£…ç¯å¢ƒ</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">chroot</span><span class="token plain"> /tmp/rootfs/ /bin/sh</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æ­¤æ—¶è¿›å…¥äº† rootfsï¼Œå› ä¸ºæ²¡æœ‰æŒ‚è½½ procfsã€sysfs ç­‰ç›®å½•ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªèƒ½å®Œæ•´ä½¿ç”¨çš„ rootfsï¼Œä½†å¯¹äºå®‰è£…åŒ…æ¥è¯´å·²ç»è¶³å¤Ÿã€‚</p><ul><li><a href="https://pkgs.alpinelinux.org/package/v3.12/main/x86_64/alpine-base" target="_blank" rel="noopener noreferrer">alpine-base</a><ul><li>åŸºç¡€ç³»ç»Ÿ</li><li>ä¾èµ–äº† openrcï¼Œlayoutï¼Œbusyboxï¼Œapkï¼Œconf ç­‰åŸºç¡€åŒ…</li></ul></li><li>linux-virt<ul><li>virt å†…æ ¸ - ä¸åŒ…å«å›ºä»¶ï¼ˆ200MBå·¦å³ï¼‰ï¼Œé»˜è®¤ init åŒ…å« virtio ç­‰å†…æ ¸æ¨¡å—</li><li>å®‰è£…åèƒ½è·å–åˆ°å†…æ ¸å’Œ initramfs</li><li>/boot ä¸‹ vmlinuz+initramfs+System.map çº¦ 15MB - å¯åŠ¨æ˜¯ä¸éœ€è¦çš„ï¼Œæ‹¿åˆ°åå¯ä»¥åˆ é™¤</li></ul></li><li>haveged<ul><li>éšæœºç†µæœåŠ¡</li><li>è™šæ‹ŸåŒ–ç¯å¢ƒèƒ½æ›´å¿«å¯åŠ¨ï¼Œå¦åˆ™ç†µåˆå§‹åŒ–å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ</li></ul></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> alpine-base linux-virt haveged</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¼€æœºå¯åŠ¨</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rc-update </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> haveged</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># root è´¦å·å¯†ç </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> root:root </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> chpasswd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># åŸºç¡€æœåŠ¡</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(191, 199, 213)">svc</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> devfs procfs sysfs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -fs /etc/init.d/</span><span class="token variable" style="color:rgb(191, 199, 213)">$svc</span><span class="token plain"> /etc/runlevels/boot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exit</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># firecracker ä½¿ç”¨ ttyS0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -s agetty /etc/init.d/agetty.ttyS0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> ttyS0 </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /etc/securetty</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rc-update </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> agetty.ttyS0 default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ä» rootfs è·å–åˆ° vmlinuz å’Œ initramfs</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> /tmp/rootfs/boot/initramfs-virt initramfs-virt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> /tmp/rootfs/boot/vmlinuz-virt vmlinuz-virt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å–æ¶ˆæŒ‚è½½</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">umount</span><span class="token plain"> /tmp/rootfs</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>rootfs å‡†å¤‡å®Œæˆã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="vmlinuxinitrd"></a>vmlinux+initrd<a class="hash-link" href="#vmlinuxinitrd" title="Direct link to heading">#</a></h2><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ rootfs æ‹¿åˆ°çš„ Linux å†…æ ¸ vmlinuz-virt å’Œåˆå§‹å†…å­˜é•œåƒ initramfs-virt</p><ul><li>vmlinuz-virt<ul><li>å‹ç¼©åçš„ Linux å†…æ ¸ - éœ€è¦è§£å‹å firecracker æ‰èƒ½è¯†åˆ«</li><li>è§£å‹åä¸º ELF æ ¼å¼å¯æ‰§è¡Œæ–‡ä»¶ - ä¸ä¸€èˆ¬ Linux ä¸‹å¯æ‰§è¡Œæ–‡ä»¶ç›¸åŒ</li></ul></li><li>initramfs-virt<ul><li>å‹ç¼©åçš„ cpio æ ¼å¼</li><li>åŒ…å«äº† Linux å†…æ ¸éœ€è¦çš„ virtio å’Œ ext4 ç­‰æ¨¡å—</li><li>åŒ…å«äº† Alpine çš„ init ç³»ç»Ÿ<ul><li>åŠ è½½å†…æ ¸æ¨¡å—</li><li>æ‰¾åˆ°å¹¶æŒ‚è½½ rootfs</li></ul></li></ul></li></ul><p>å› ä¸ºå†…æ ¸æ˜¯å‹ç¼©åçš„ï¼Œå› æ­¤è¿˜éœ€è¦è¿›è¡Œè§£å‹</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ä¸‹è½½å®‰è£… extract-vmlinux</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L -o /usr/local/bin/extract-vmlinux https://raw.githubusercontent.com/torvalds/linux/master/scripts/extract-vmlinux</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x /usr/local/bin/extract-vmlinux</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è§£å‹ vmlinuz-virt</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">extract-vmlinux vmlinuz-virt </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> vmlinux-virt</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å¯åŠ¨"></a>å¯åŠ¨<a class="hash-link" href="#å¯åŠ¨" title="Direct link to heading">#</a></h2><p>æ‰€æœ‰å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼Œå¾—åˆ°</p><ul><li>alpine.rootfs.ext4 - ç³»ç»Ÿç›˜</li><li>vmlinux-virt - å†…æ ¸</li><li>initramfs-virt - åˆå§‹å†…å­˜é•œåƒ</li></ul><p>firecracker æœ‰ä¸¤ç§å¯åŠ¨æ–¹å¼</p><ol><li>ç›‘å¬ç«¯å£/socket</li></ol><ul><li>é€šè¿‡è°ƒç”¨æ¥å£é…ç½® rootfsã€å†…æ ¸ç­‰</li><li>é…ç½®å®Œæˆåè¯·æ±‚ InstanceStart è¿›è¡Œå¯åŠ¨</li></ul><ol start="2"><li>é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®</li></ol><ul><li>é…ç½®æ–‡ä»¶ç­‰åŒäºæ¥å£è¯·æ±‚</li><li>å‚æ•°å†…å®¹å’Œè·¯å¾„ä¸æ¥å£ä¸€è‡´</li></ul><p>è¿™é‡Œä½¿ç”¨æ–¹æ³• #2ï¼Œå› ä¸ºæ–¹ä¾¿ä¹¦å†™ç¼–è¾‘ç®€å•ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç”Ÿæˆ alpine.json é…ç½®</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">CONF</span><span class="token string bash punctuation" style="color:rgb(199, 146, 234)"> </span><span class="token string bash punctuation operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token string bash punctuation" style="color:rgb(199, 146, 234)"> alpine.json</span><span class="token string" style="color:rgb(195, 232, 141)"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  &quot;boot-source&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;initrd_path&quot;: &quot;initramfs-virt&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;kernel_image_path&quot;: &quot;vmlinux-virt&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;boot_args&quot;: &quot;console=ttyS0 reboot=k panic=1 pci=off modules=virtio_mmio,ext4 rootfstype=ext4&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  &quot;drives&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">      &quot;drive_id&quot;: &quot;rootfs&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">      &quot;path_on_host&quot;: &quot;alpine.rootfs.ext4&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">      &quot;is_root_device&quot;: true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">      &quot;is_read_only&quot;: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  &quot;machine-config&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;vcpu_count&quot;: 1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;mem_size_mib&quot;: 1024,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;ht_enabled&quot;: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">CONF</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># é…ç½®å®Œæˆ - å¯åŠ¨</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è¿›å…¥åä½¿ç”¨ root:root ç™»é™†</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">firecracker --api-sock /tmp/firecracker.socket --config-file alpine.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="åœæ­¢"></a>åœæ­¢<a class="hash-link" href="#åœæ­¢" title="Direct link to heading">#</a></h2><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Firecracker ä¸èƒ½æ­£å¸¸å…³æœº</h5></div><div class="admonition-content"><p>firecracker ä¸èƒ½ä½¿ç”¨ poweroff å…³æœºï¼Œå¦‚æœä½¿ç”¨äº† poweroff åˆ™åªèƒ½ kill è¿›ç¨‹æ¥é€€å‡ºã€‚</p></div></div><p>åœ¨ç³»ç»Ÿä¹‹å¤–å¯ä»¥è¯·æ±‚ <code>Ctrl+Alt+Del</code> è¿›è¡Œå…³æœºï¼Œå®è´¨ä¸Šæ˜¯é‡å¯çš„æ•ˆæœï¼Œä½†å› ä¸º firecracker ä¸èƒ½é‡å¯ï¼Œå› æ­¤ init é€€å‡ºåå°±å…³æœºäº†ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> --unix-socket /tmp/firecracker.socket -i </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -X PUT </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://localhost/actions&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -H  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;accept: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -H  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{&quot;action_type&quot;: &quot;SendCtrlAltDel&quot;}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç³»ç»Ÿå†…å¯ä»¥ç›´æ¥ <code>reboot</code> è¿›è¡Œå…³æœºã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æ€»ç»“"></a>æ€»ç»“<a class="hash-link" href="#æ€»ç»“" title="Direct link to heading">#</a></h2><p>Firecracker ä½¿ç”¨èµ·æ¥è›®æƒŠè‰³ï¼Œèƒ½æˆåŠŸçš„å¿«é€Ÿçš„å¯åŠ¨ç³»ç»Ÿï¼Œå¯åŠ¨é€Ÿåº¦ä¼šæ¯” QEMU å¿«ä¸å°‘ï¼Œå› ä¸ºå°‘äº† biosã€bootloaderã€å†…æ ¸è§£å‹ ç­‰è¿‡ç¨‹ã€‚</p><p>å› ä¸º Firecracker ä¼˜ç¼ºç‚¹éå¸¸æ˜æ˜¾ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹é€‚ç”¨åœºæ™¯ï¼š</p><ul><li>serveless åœºæ™¯ - éœ€è¦å¿«é€Ÿèµ·åœï¼Œå®‰å…¨éš”ç¦»ï¼Œç¯å¢ƒç‹¬ç«‹</li><li>å¤„äºå®‰å…¨è€ƒè™‘è¿›è¡Œå®¹å™¨æ‰§è¡Œç¯å¢ƒéš”ç¦» - ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶</li><li>å°†åº”ç”¨æ‰“åŒ…ä¸ºç³»ç»Ÿè¿›è¡Œåˆ†å‘ï¼Œä½¿ç”¨ firecracker å±è”½ç³»ç»Ÿå·®å¼‚</li></ul><p>ä¸é€‚ç”¨åœºæ™¯ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p><ul><li>å¦‚æœéœ€è¦ä½¿ç”¨ CentOSã€Debianã€Ubuntu ä¹‹ç±»ç³»ç»Ÿï¼Œéå¸¸ä¸å»ºè®®<ul><li>æ„é€ ä¸€ä¸ªå¯ä½¿ç”¨çš„ rootfs å’Œ initramfs éå¸¸éº»çƒ¦</li></ul></li><li>éœ€è¦ç”¨åˆ°çš„è®¾å¤‡ firecracker å¯èƒ½ä¸æ”¯æŒ</li><li>éœ€è¦é€ä¼ è®¾å¤‡åˆ° VM</li></ul><p>Firecracker ç›¸å¯¹è¾ƒæ–°ï¼Œé›†æˆä½¿ç”¨æ–¹é¢è¿˜æœ‰æ‰€æ¬ ç¼ºï¼Œä½†åœ¨ Firecracker æ“…é•¿çš„é¢†åŸŸä½¿ç”¨èµ·æ¥æ˜¯éå¸¸èˆ’æœçš„ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å‚è€ƒ"></a>å‚è€ƒ<a class="hash-link" href="#å‚è€ƒ" title="Direct link to heading">#</a></h2><ul><li><a href="https://gist.github.com/wenerme/97a2f088496bb3e6492ef7e8fe23da8a" target="_blank" rel="noopener noreferrer">boot-alpine-in-firecracker.sh</a> - ä»¥ä¸Šæ‰€æœ‰ä»£ç </li><li><a href="https://github.com/firecracker-microvm/firecracker" target="_blank" rel="noopener noreferrer">firecracker-microvm/firecracker</a> - æ ¸å¿ƒä»“åº“</li><li><a href="https://github.com/firecracker-microvm/firectl" target="_blank" rel="noopener noreferrer">firecracker-microvm/firectl</a> - Golang å®ç°ç”¨äºç®¡ç† firecracker è™šæ‹Ÿæœºçš„è¾…åŠ©å·¥å…·</li><li><a href="https://github.com/firecracker-microvm/firecracker-go-sdk" target="_blank" rel="noopener noreferrer">firecracker-microvm/firecracker-go-sdk</a> - Golang ç›´æ¥æ“ä½œ Firecracker</li></ul></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/story/tags/alpine-linux">AlpineLinux</a><a class="margin-horiz--sm" href="/story/tags/firecracker">Firecracker</a></div></footer></article><div><a href="https://github.com/wenerme/wener/edit/master/story/2020/2020-10-23-alpine-in-firecracker.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/story/rancher-vs-kubesphere"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Rancher vs. Kubesphere</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/story/kubernetes-vs-openstack"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Kubernetes vs OpenStack Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#æ³¨æ„" class="table-of-contents__link">æ³¨æ„</a></li><li><a href="#å®‰è£…" class="table-of-contents__link">å®‰è£…</a></li><li><a href="#rootfs" class="table-of-contents__link">rootfs</a></li><li><a href="#vmlinuxinitrd" class="table-of-contents__link">vmlinux+initrd</a></li><li><a href="#å¯åŠ¨" class="table-of-contents__link">å¯åŠ¨</a></li><li><a href="#åœæ­¢" class="table-of-contents__link">åœæ­¢</a></li><li><a href="#æ€»ç»“" class="table-of-contents__link">æ€»ç»“</a></li><li><a href="#å‚è€ƒ" class="table-of-contents__link">å‚è€ƒ</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">ç¬”è®°</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Projects</h4><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Wener Site" src="/img/wener-logo.svg"></div><div class="footer__copyright">Copyright Â© 1992-2021 Wener - æ„å»ºæ—¶é—´ 2021-03-20 01:25</div></div></div></footer></div>
<script src="/styles.daaf3fa9.js"></script>
<script src="/runtime~main.430e3866.js"></script>
<script src="/main.cf7091df.js"></script>
<script src="/1.a5862bf1.js"></script>
<script src="/2.55b1ee95.js"></script>
<script src="/3.a9404c11.js"></script>
<script src="/ccc49370.87535276.js"></script>
<script src="/65eaf7fb.8dc4b144.js"></script>
<script src="/ea95f6a6.d6eca2a3.js"></script>
</body>
</html>