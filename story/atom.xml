<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://wener.me/story</id>
    <title>Wener Live &amp; Life Blog</title>
    <updated>2022-03-26T20:52:21.861Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://wener.me/story"/>
    <subtitle>Wener Live &amp; Life Blog</subtitle>
    <icon>https://wener.me/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[æ•°æ®åŒæ­¥æ¨¡å¼]]></title>
        <id>etl-pattens</id>
        <link href="https://wener.me/story/etl-pattens"/>
        <updated>2022-03-26T20:52:21.861Z</updated>
        <summary type="html"><![CDATA[A åŒæ­¥åˆ° B]]></summary>
        <content type="html"><![CDATA[<blockquote><p>A åŒæ­¥åˆ° B</p><p>DBA -&gt; A -&gt; B -&gt; DBB</p><p>Extract -&gt; Load</p><p>Extract -Transform-&gt; Load</p></blockquote><h2>åœºæ™¯</h2><p><strong>A,B,DBA,DBB äº’é€šæ€§</strong></p><table><thead><tr><th>from\to</th><th>DBA</th><th>A</th><th>B</th><th>DBB</th></tr></thead><tbody><tr><td>DBA</td><td></td><td></td><td></td><td>ğŸŸ¡</td></tr><tr><td>A</td><td></td><td></td><td>ğŸŸ¢</td><td>ğŸŸ¡</td></tr><tr><td>B</td><td>ğŸŸ </td><td>ğŸŸ¢</td><td></td><td></td></tr><tr><td>DBB</td><td>ğŸŸ </td><td></td><td></td><td></td></tr></tbody></table><ul><li>ğŸŸ¢ - æœ‰å¯èƒ½ - A &lt;-&gt; B</li><li>ğŸŸ¡ - ä¹Ÿè®¸å¯èƒ½ - æä¾›å…¬æœ‰äº‘æ•°æ®åº“ä½œä¸ºåŒæ­¥ç›®æ ‡</li><li>ğŸŸ  - ä¸å¤ªå¯èƒ½<ul><li>å¦‚æœæ˜¯å†…éƒ¨æœåŠ¡æ˜¯å¯èƒ½çš„</li></ul></li></ul><h2>æ¨¡å¼</h2><ul><li>Push - æ¨ - A -&gt; B</li><li>Pull - æ‹‰ - A &lt;- B</li><li>Reactive - A &lt;-&gt; B</li><li>ç¬¬ä¸‰æ–¹ - A -&gt; X -&gt; B</li></ul><h2>æ–¹å¼</h2><ul><li>å…¨é‡</li><li>å¢é‡<ul><li>åŸºäºå¢é‡æ¸¸æ ‡</li><li>åŸºäº CDC äº‹ä»¶</li></ul></li><li>Schema+Data</li></ul><h2>å®ç°æ–¹æ¡ˆ</h2><ul><li>DBA -&gt; A -&gt; B -&gt; DBB<ul><li>B æš´éœ² APIï¼ŒA è¯·æ±‚ B - Push/Hook</li><li>ä¾‹å¦‚: WebHook</li></ul></li><li>DBA -&gt; A &lt;- B -&gt; DBB<ul><li>A æš´éœ² APIï¼ŒB è¯·æ±‚ A - Pull/Query</li><li>ä¾‹å¦‚: WebHook</li></ul></li><li>DBA -&gt; A -&gt; DBB<ul><li>ä¾‹å¦‚: é…ç½®åŒæ­¥ç›®æ ‡ç»™ A, A ç›´æ¥å†™å…¥</li></ul></li><li>DBA -&gt; B -&gt; DBB<ul><li>ä¾‹å¦‚: RLS æš´éœ²ç»™ B è®¿é—®</li></ul></li><li>DBA &lt;-&gt; DBB<ul><li>ä¾‹å¦‚: DB Link, Replication</li></ul></li><li>DBA -&gt; A -&gt; Queue -&gt; B -&gt; DBB<ul><li>A,B é€šè¿‡ Queue äº¤äº’ - A,B éƒ½æ²¡æœ‰æš´éœ²æ¥å£</li><li>è¢«åŠ¨</li><li>Queue å®šä½<ul><li>æ•°æ®å­˜å‚¨ - Kafka</li><li>ä¿¡æ¯ä¼ è¾“ - Redis, Nats - ä¾‹å¦‚ RPC over Redis Stream</li></ul></li></ul></li><li>DBA -&gt; X -&gt; DBB</li><li>DBA -&gt; A -&gt; X -&gt; B -&gt; DBB<ul><li>å€ŸåŠ©ç¬¬ä¸‰æ–¹æœåŠ¡ - ä¾‹å¦‚: AirByte, PgLoader</li><li>X æœåŠ¡ä½œä¸º ä¸­é—´æœåŠ¡ ä¸ A,B äº¤äº’<ul><li>æ›¿ä»£ Queue è§’è‰²</li><li>ä¸»åŠ¨</li></ul></li><li>X å…·æœ‰é€‚é…èƒ½åŠ›</li></ul></li></ul><h2>Transform è€ƒè™‘</h2><ul><li>æ•°æ® Schema é€‚é…</li><li>æ•°æ®ç±»å‹é€‚é…</li><li>è¿‡æ»¤ã€è½¬æ¢ã€è®¡ç®—</li><li>é€šå¸¸åŒ…å«é€»è¾‘<ul><li>é€»è¾‘ ~= Script<ul><li>Lua, Python, JS</li></ul></li><li>gRPC - å¤–éƒ¨è°ƒç”¨</li></ul></li><li>Transform çš„å¤æ‚åº¦å†³å®šäº†æ˜¯ ETL è¿˜æ˜¯æµå¤„ç†<ul><li>ETL - ç®€å•é€‚é…ã€è°ƒæ•´ã€å…ƒæ•°æ®</li><li>æµå¤„ç† - åŒ…å«çŠ¶æ€ã€ä¾èµ–å‰åæ¶ˆæ¯/Windowã€åŒ…å«èšåˆ</li></ul></li><li>ä¾‹å¦‚: Flink, SparkSQL, Stormã€KafkaSQL</li></ul><h2>æ•°æ®ç¼–ç  è€ƒè™‘</h2><ul><li>æ–‡æœ¬ç¼–ç  - CSV,JSON,JSONL - åŸºç¡€ï¼Œä¸¢å¤±ç±»å‹ä¿¡æ¯</li><li>äºŒè¿›åˆ¶ç¼–ç  - Avro, Parqute, Protobuf</li><li>CBOR - Concise Binary Object Representation<ul><li>å¯¹æ¯” JSON èƒ½æ›´å¥½çš„ä¿ç•™ç±»å‹ä¿¡æ¯</li></ul></li><li>Schema+Data - æ•°æ®æ›´ç´§å‡‘</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Rancher vs. Kubesphere]]></title>
        <id>rancher-vs-kubesphere</id>
        <link href="https://wener.me/story/rancher-vs-kubesphere"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[| info.                 | Rancher                                                 | Kubesphere                                                          |]]></summary>
        <content type="html"><![CDATA[<table><thead><tr><th>info.</th><th>Rancher</th><th>Kubesphere</th></tr></thead><tbody><tr><td>å¼€å‘è€…</td><td>Rancher/SUSE</td><td>é’äº‘å¼€æº</td></tr><tr><td>æºç </td><td><a href="https://github.com/rancher/rancher">rancher/rancher</a></td><td><a href="https://github.com/kubesphere/kubesphere">kubesphere/kubesphere</a></td></tr><tr><td>Stars</td><td>15.5k</td><td>4.6k</td></tr><tr><td>å¼€æºåè®®</td><td>Apache-2.0</td><td>æ§åˆ¶å™¨ Apache-2.0 <br/> å‰ç«¯ <strong>AGPL-3.0</strong> / ä¸å…è®¸å•†ä¸šé—­æºä¿®æ”¹å‰ç«¯</td></tr><tr><td>å®‰è£…</td><td>Helm</td><td>ks-installer(Ansible)+CRD</td></tr><tr><td>éƒ¨ç½² K8S</td><td>rke/rancher</td><td>kubekey</td></tr><tr><td>ç‰ˆæœ¬</td><td>v2.5</td><td>v3.0</td></tr><tr><td>ç›‘æ§</td><td>Grafana+Prometheus</td><td>Prometheus+å‰ç«¯é›†æˆ</td></tr><tr><td>å‘Šè­¦</td><td>Grafana/Altermanager</td><td>é‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡ã€Slack</td></tr><tr><td>æ—¥å¿—</td><td>Banzi Operator</td><td>Elasticseach, fluentbit + å‰ç«¯é›†æˆ<br/>äº‹ä»¶æ—¥å¿—ï¼Œå®¡è®¡æ—¥å¿—</td></tr><tr><td>ServiceMesh</td><td>Istio</td><td>Istio</td></tr><tr><td>DevOps</td><td>2.5 ä¹‹å Fleet GitOps<br/><del>2.5 ä¹‹å‰ Pipeline/Jenkins</del></td><td>Jenkins</td></tr><tr><td>åº”ç”¨å•†åº—</td><td>Helm Repo</td><td><a href="https://github.com/openpitrix/openpitrix">openpitrix/openpitrix</a></td></tr><tr><td>è§’è‰²æƒé™ç®¡ç†</td><td>âœ…</td><td>âœ…</td></tr><tr><td>é…ç½®æ–¹å¼</td><td>Web UI/CRD</td><td>ç¼–è¾‘ CRD/yaml</td></tr><tr><td>åº”ç”¨</td><td>Helm</td><td>Helm/<a href="https://github.com/kubernetes-sigs/application">CRD</a></td></tr><tr><td>å®ç°ä¾èµ–</td><td>-</td><td>etcd+redis+minio+openldap+mysql</td></tr><tr><td>å®ç°æœåŠ¡</td><td>rancher+fleet</td><td>ks-controller-manager<br/>ks-apiserver+ks-console</td></tr><tr><td>å¤šé›†ç¾¤</td><td>âœ…</td><td>âœ…</td></tr><tr><td>UI ç¾è§‚</td><td>â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸</td></tr><tr><td>UI åŠŸèƒ½</td><td>â­ï¸â­ï¸â­ï¸</td><td>â­ï¸â­ï¸</td></tr><tr><td>äº‘å¹³å°é›†æˆ</td><td>â­ï¸â­ï¸</td><td>âŒ</td></tr><tr><td>æ–‡æ¡£</td><td>â­ï¸â­ï¸</td><td>â­ï¸</td></tr><tr><td>å¼€å‘å‹å¥½</td><td>â­ï¸</td><td>â­ï¸â­ï¸â­ï¸</td></tr><tr><td>è¿ç»´å‹å¥½</td><td>â­ï¸â­ï¸â­ï¸</td><td>â­ï¸</td></tr><tr><td>ä½¿ç”¨è€…å¯¹ K8S æŒæ¡ç¨‹åº¦</td><td>é«˜</td><td>ä½</td></tr><tr><td>æ ¸å¿ƒä½“éªŒ</td><td>å¤šé›†ç¾¤è¿ç»´éƒ¨ç½²</td><td>å‹å¥½çš„ä¸€ä½“åŒ–å¼€å‘<br/>å‹å¥½=ç¾è§‚çš„ç•Œé¢<br/>ä¸€ä½“åŒ–å¼€å‘=Jenkins+Elastic</td></tr><tr><td>æ ¸å¿ƒç«äº‰åŠ›</td><td>å¤šé›†ç¾¤<br/>èµ„æºç®¡ç†è¿ç»´<br/>æ ¸å¿ƒåº”ç”¨é›†æˆ</td><td>é›†æˆå¤šåŠŸèƒ½çš„<strong>ç¾è§‚ç•Œé¢</strong> / AGPL-3.0</td></tr></tbody></table><p>:::tip</p><ul><li>é€‰æ‹© Kubesphere<ul><li>å¦‚æœçŠ¹è±« - å› ä¸ºä½¿ç”¨ç®€å•</li><li>å¦‚æœè¿½æ±‚ç•Œé¢ç¾è§‚</li><li>å¦‚æœå·¥ä½œä»¥å¼€å‘ä¸ºä¸»</li><li>å¦‚æœå¸Œæœ›å®šåˆ¶åŒ–äº§å‡ºè‡ªå·±å¹³å°ç®¡ç†<ul><li>ç•Œé¢ AGPL-3.0 ,å®šåˆ¶åçš„é—­æºå•†ä¸šäº§å“éœ€ä»˜è´¹</li></ul></li></ul></li><li>é€‰æ‹© Rancher<ul><li>å¦‚æœå¯¹ Kubernetes æŒæ¡é€å½»</li><li>å¦‚æœéœ€è¦ç®¡ç†å¤šé›†ç¾¤</li><li>å¦‚æœå·¥ä½œä»¥è¿ç»´éƒ¨ç½²ä¸ºä¸»</li><li>å¦‚æœéœ€è¦æ•´åˆäº‘å¹³å°èµ„æº</li></ul></li></ul><p>:::</p><p>ç»¼åˆä½¿ç”¨ä¸‹æ¥åè§‰å¾— Kubesphere ä¸ Rancher åº”ç”¨åœºæ™¯å¹¶ä¸ç‰¹åˆ«é‡å¤ï¼ŒæŒ‰è‡ªå·±çš„éœ€æ±‚é€‰æ‹©å³å¯ï¼Œå®é™…æƒ…å†µå¯èƒ½æ˜¯ä¸¤ä¸ªéƒ½ç”¨ã€‚Ranher ç”¨äºç®¡ç†å’Œå¼€é€šé›†ç¾¤ï¼ŒKubesphere ç”¨äºç»™å¼€å‘è€…æ“ä½œå•ä¸ªé›†ç¾¤ã€‚</p><h2>Rancher</h2><h3>ä¼˜ç‚¹</h3><ul><li>æ›´å¤§çš„å¼€å‘å›¢é˜Ÿ</li><li>æ›´å¥½çš„ K3S æ”¯æŒ</li><li>æ›´å¥½çš„äº‘å¹³å°æ”¯æŒ</li><li>æ›´å¥½çš„å¤šé›†ç¾¤ç®¡ç†</li><li>é»˜è®¤ HTTPS</li><li>ä¸ºä»€ä¹ˆæ›´å¥½ï¼Ÿ<ul><li>2.5 çš„ Exploere</li><li>WebShell ä¼šæ˜¾ç¤º Helm å®‰è£…è¿‡ç¨‹</li><li>å†…ç½® Helm ä»“åº“åŒ…å« Rancher é›†æˆåº”ç”¨</li><li>Helm Values èƒ½è¢«æ˜ å°„ä¸º Form è¡¨å•</li><li>é›†ç¾¤å¤‡ä»½æ¢å¤</li><li>Fleet GitOps</li></ul></li></ul><h3>ç¼ºç‚¹</h3><ul><li>è¦æ±‚ä½¿ç”¨äººå‘˜å¯¹ Kubernetes æœ‰ä¸€å®šè®¤çŸ¥å’Œè¿ç»´èƒ½åŠ›</li><li>WebUI ä½¿ç”¨èµ·æ¥æ€»æœ‰ç§å¡é¡¿çš„æ„Ÿè§‰</li><li>2.5 çš„æ–° UI ç›®å‰åŠ è½½æ€»ä¼šé—ªçƒ - Loadding</li><li>èµ„æºåˆ†ç±»æœ‰ç‚¹æ··ä¹± - æ²¡æœ‰ Lens æ¸…æ™°</li><li>~2.5 è¿˜åœ¨ latest é˜¶æ®µï¼Œå°šæœªè¿›å…¥ stable~</li><li>~2.5 çš„ Exploere è¿˜æ²¡æœ‰ä¸­æ–‡ï¼Œä¸è¿‡å·²æœ‰å¤šè¯­è¨€æ”¯æŒ~</li></ul><h2>Kubesphere</h2><h3>ä¼˜ç‚¹</h3><ul><li><strong>ç•Œé¢å‹å¥½ç¾è§‚</strong></li><li>é›†æˆç›‘æ§</li><li>é›†æˆæ—¥å¿—</li><li>é›†æˆ DevOps</li><li>é›†æˆåº”ç”¨ä¸€ä½“åŒ–ä½“éªŒ - ä¸éœ€è¦å» Grafana çœ‹ç›‘æ§ï¼Œä¸éœ€è¦å» Kibana çœ‹æ—¥å¿—</li><li>é¢å‘å†…éƒ¨çš„åº”ç”¨å•†åº—æ¯” Helm Repo åœ¨å®é™…å¼€å‘æ—¶æ›´æœ‰å®é™…æ„ä¹‰</li></ul><h3>ç¼ºç‚¹</h3><ul><li><strong>ä¸å…¼å®¹ k8s v1.19</strong> - åœ¨ v1.19 å·²ç»å‘å¸ƒä¸¤ä¸ªæœˆå<ul><li>csr v1 <a href="https://github.com/kubesphere/kubesphere/issues/2928">#2928</a></li></ul></li><li>é€šè¿‡ç¼–è¾‘ CRD å¯åŠ¨åŠŸèƒ½<ul><li>ä¸çŸ¥é“çŠ¶æ€å’Œé”™è¯¯ - åªèƒ½çœ‹æ—¥å¿—</li></ul></li><li>Ansible æ§åˆ¶åŠŸèƒ½<ul><li>å¼€å¯å®¹æ˜“ï¼Œå…³é—­éš¾</li><li>Ansible æœ¬èº«æ— çŠ¶æ€ï¼Œæ²¡æœ‰ Helm çš„å¸è½½æ¦‚å¿µ</li></ul></li><li>åˆ—è¡¨ä¸èƒ½è®¾ç½®æ¯é¡µæ•°é‡ - é»˜è®¤ 10 æ¡ç›®/é¡µ - å¯¹äº K8S èµ„æºç®¡ç†æ¥è¯´æœ‰ç‚¹å°‘äº†</li><li>ç¿»é¡µä¸ä¾¿æ“ä½œ</li><li>åŒ…å«é’äº‘é›†æˆåŠŸèƒ½</li></ul><h2>å®‰è£…ç»´åº¦</h2><h3>Rancher</h3><p>Rancher æ³¨é‡ç®¡ç†ï¼Œv2.5 æ²¡æœ‰ Pipeline å’Œå†…å»ºçš„ç›‘æ§é›†æˆï¼Œè‡ªèº«éå¸¸è½»é‡ï¼Œç”šè‡³ç›®å‰åœ¨å°è¯•å•äºŒè¿›åˆ¶å¯åŠ¨ï¼ŒRancherDã€‚
Rancher çš„ç”¨æˆ·ï¼Œé¡¹ç›®ï¼Œé›†ç¾¤ç­‰é…ç½®å‡ä½¿ç”¨ CRDï¼Œå› æ­¤ä¸éœ€è¦æ•°æ®åº“å­˜å‚¨ï¼Œä½¿ç”¨ CRD ç›¸å½“äºæ¥å£ï¼Œåˆ©äºè‡ªåŠ¨åŒ–é›†æˆã€‚</p><p>ä¸€èˆ¬é€šè¿‡ Helm å®‰è£… Rancherï¼Œæ–¹ä¾¿å‡çº§ã€ç®¡ç†ã€é…ç½®ã€‚</p><pre><code class="language-bash"># stable
helm repo add rancher https://releases.rancher.com/server-charts/stable
# é…ç½®é¡¹ https://rancher.com/docs/rancher/v2.x/en/installation/resources/chart-options
cat &lt;&lt;YAML &gt; rancher.values.yaml
hostname: rancher.my.corp
# ä¸ä½¿ç”¨ cert-manager åˆ™éœ€è¦å¼€å¯ - å»ºè®®ä½¿ç”¨ cert-manager
# privateCA: true
# rancher ç³»ç»Ÿé•œåƒ
systemDefaultRegistry: registry.cn-hangzhou.aliyuncs.com
# é»˜è®¤ 3 å‰¯æœ¬
replicas: 1
YAML
# å®‰è£…æˆ–å‡çº§
helm upgrade -i rancher rancher/rancher -n cattle-system --create-namespace -f rancher.values.yaml
</code></pre><h3>Kubesphere</h3><p>Kubesphere é»˜è®¤æœ‰å¤§é‡é›†æˆï¼Œæœ‰ç‚¹ç±»ä¼¼äº v2.5 ä¹‹å‰çš„ Rancherã€‚
åŠŸèƒ½è¾ƒå¤šï¼Œä¸”æ§åˆ¶å™¨é€šè¿‡æ•°æ®åº“è¿›è¡Œå­˜å‚¨ï¼Œéƒ¨ç½² Kubesphere æ—¶éœ€è¦éƒ¨ç½²æ•°æ®åº“ï¼Œè¿ç»´å±‚é¢æ¥è¯´ä¼šå˜å¾—éº»çƒ¦ï¼Œå› ä¸º K8S ä¸Šæ•°æ®åº“æ¶‰åŠåˆ°å­˜å‚¨é—®é¢˜ï¼Œé™¤äº†æ•°æ®åº“ï¼ŒKubesphere è¿˜é»˜è®¤ä¾èµ–äº† etcd+redis+minio+openldapï¼Œå¯ä»¥ç®—æ˜¯æ¯”è¾ƒå¤æ‚çš„ä¸€ä¸ªç³»ç»Ÿäº†ã€‚</p><p>å®é™…éƒ¨ç½²é…ç½®ä½¿ç”¨ Ansibleï¼Œè§’è‰²å®šä¹‰ä½äº <a href="https://github.com/kubesphere/ks-installer/tree/master/roles">ks-installer/roles</a>ã€‚
è¯¥éƒ¨ç½²æ¨¡å¼ä¼˜ç¼ºç‚¹æ˜æ˜¾ï¼š</p><ul><li>ä¼˜ç‚¹<ul><li>Ansible éƒ¨ç½²æ“ä½œå¹‚ç­‰</li><li>Ansible æ“…é•¿é›†æˆéƒ¨ç½²å„ç§æœåŠ¡</li></ul></li><li>ç¼ºç‚¹<ul><li>å¤±å»äº† K8S çš„ å£°æ˜å¼ Yaml<ul><li>Ansible æ¶‰åŠå¤§é‡çš„æ¨¡ç‰ˆæ“ä½œï¼Œè¿˜æœ‰å¤§é‡çš„ç›´æ¥ kubectl</li></ul></li><li>å³æ‡‚ Ansible åˆæ‡‚ K8S çš„äººå å°‘æ•° - ç¡®ä¿èƒ½ç”¨ï¼Œä½†æƒ³è¦ä¿®æ”¹æˆ–æ·±å…¥äº†è§£æœ‰é—¨æ§›</li><li>Ansible æ— çŠ¶æ€ - åŸºæœ¬ç­‰åŒäº <strong>æ— æ³•åˆ é™¤</strong></li></ul></li></ul><p>Kubesphere ä½“ç³»å¤æ‚ï¼Œä¹Ÿèƒ½ç†è§£é€‰æ‹© Ansibleï¼Œä½†æ›¾ç»ä½¿ç”¨è¿‡ Ansible è¿ç»´ K8Sï¼Œå¤æ‚åçœŸçš„ä¼šå¾ˆéš¾å—ã€‚</p><pre><code class="language-bash"># éƒ¨ç½²å®‰è£…å™¨ - Operator
kubectl apply -f https://raw.githubusercontent.com/kubesphere/ks-installer/v3.0.0/deploy/kubesphere-installer.yaml
# æ·»åŠ  CRD èµ„æº - å®šä¹‰ ks å®‰è£…é…ç½®
kubectl apply -f https://raw.githubusercontent.com/kubesphere/ks-installer/v3.0.0/deploy/cluster-configuration.yaml

# å®‰è£…è¿‡ç¨‹
kubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l app=ks-install -o jsonpath=&#x27;{.items[0].metadata.name}&#x27;) -f
</code></pre><h2>å¼€å‘ç»´åº¦</h2><p>å¼€å‘ä¸»è¦åˆ†ä¸º CI å’Œ CD ä¸¤éƒ¨åˆ†ï¼ŒCI åå‘ä»£ç åˆ°äº§å‡ºç‰©çš„è¿‡ç¨‹ï¼ŒCD åå‘äº§å‡ºç‰©åˆ°çº¿ä¸Šè¿è¡Œçš„è¿‡ç¨‹ã€‚</p><p>ä¸¤è€…çš„æ ¸å¿ƒéƒ½æ˜¯æµç¨‹è‡ªåŠ¨åŒ–å¤„ç†ï¼Œä½†é¢å‘çš„å¯¹è±¡å’Œåœºæ™¯å´å·®åˆ«å¾ˆå¤§ã€‚</p><ul><li>CI - ä»£ç åˆ°äº§å‡ºç‰©çš„è¿‡ç¨‹<ul><li>æäº¤ä»£ç  - è§¦å‘ Hook - é€‰æ‹©æ‰§è¡Œå™¨ - æ‰§è¡Œå®šä¹‰çš„ Pipeline</li><li>ä¾èµ–: ä»£ç ä»“åº“ã€äº§å‡ºç‰©ä»“åº“ã€åŠ¨æ€è°ƒåº¦çš„æ‰§è¡ŒèŠ‚ç‚¹</li><li>äº®ç‚¹: <strong>å¿«</strong>ã€çµæ´»çš„æµç¨‹å®šä¹‰ã€å¯è§†åŒ–çš„æ‰§è¡Œè¿‡ç¨‹ã€ä¸ä»£ç ä»“åº“çš„é›†æˆç¨‹åº¦</li><li>äº§å“<ul><li>Jenkins</li><li>DroneCI</li><li>Github Action</li><li>Gitlab CI/CD</li></ul></li></ul></li><li>CD - äº§å‡ºç‰©éƒ¨ç½²åˆ°çº¿ä¸Šçš„è¿‡ç¨‹ - ç°åœ¨çš„ä¸»æµåšæ³•æ˜¯ GitOps<ul><li>æäº¤éƒ¨ç½²å®šä¹‰ - è§¦å‘ Hook/å®šæ—¶æ‰«æä¿®æ”¹ - åº”ç”¨ yaml</li><li>äº®ç‚¹: å¯è§†åŒ–ã€å¤šé›†ç¾¤ã€è‡ªåŠ¨ä¿®å¤</li><li>äº§å“<ul><li>ArgoCD - å¯è§†åŒ–ä¾èµ–ã€å¯è§†åŒ–æ—¥å¿—ã€å¤šé›†ç¾¤(åå¼±)ã€å¥åº·ç®¡ç†</li><li>rancher/fleet - rancher é›†æˆç®¡ç†ã€å¤šé›†ç¾¤ã€æ‰å‡ºä¸ä¹…å°šä¸å®Œå–„</li><li>fluxcd - v1 åºŸå¼ƒç»´æŠ¤é˜¶æ®µï¼Œv2 å˜åŒ–è¾ƒå¤§å˜ä¸ºå·¥å…·é›† - é€‰æ‹© fluxcd ä¼šæœ‰ç‚¹å°´å°¬</li></ul></li></ul></li></ul><p>CD é€»è¾‘ä½“éªŒç›¸å¯¹ç®€å•ï¼Œä½† CI çš„ä½“éªŒå´å¯ä»¥åŒºåˆ«å¾ˆå¤§ã€‚
æˆ‘è®¤ä¸ºç§æœ‰ CI æœ€å¥½çš„ä½“éªŒæ˜¯ Gitlab è‡ªè¡Œéƒ¨ç½² Runnerï¼Œå…¶æ¬¡æ˜¯ DroneCIï¼Œæœ€åæ‰æ˜¯ Jenkinsã€‚</p><ul><li>Gitlab CI/CD<ul><li>é è¿‘ä»£ç ä»“åº“ - å¼€å‘æœ¬èƒ½</li><li>æ”¯æŒè‡ªè¡Œéƒ¨ç½² Runner - Docker/Shell - <strong>å¿«</strong>, å¯ä»¥åœ¨ç§æœ‰ç¯å¢ƒ</li><li>yaml å®šä¹‰ ci å¤„ç† - åŠŸèƒ½å¼ºå¤§</li><li>Gitlab æä¾›äº† Docker ä»“åº“ï¼Œå½“ç„¶ Push çš„æ—¶å€™ä¹Ÿå¯ä»¥ Push åˆ°å…¶ä»–ä»“åº“</li><li>Gitlab æä¾›äº†å¼€å‘ä»“åº“ - ç›¸å½“äºèŠ‚çœä¸€ä¸ª Nexus</li></ul></li><li>DroneCI<ul><li>å¤§ä½“ä¸Šç±»ä¼¼ Gitlab Runner</li><li>ä½†ç‹¬ç«‹äºä»£ç ä»“åº“</li></ul></li><li>Jenkins<ul><li>å¤ªé‡</li><li>ç•Œé¢ä¸å¤ªå‹å¥½</li></ul></li></ul><p>æˆ‘ç†è§£ CI ä¸ CD è¿˜æœ‰ä¸€ä¸ªä¸­é—´ä¸´ç•Œç‚¹ï¼Œåº”ç”¨å•†åº—æˆ– Helm Repoï¼Œå¼€å‘å¥½çš„åº”ç”¨å¯ä»¥å¾ˆå¥½å‘ˆç°ç»™éœ€è¦çš„äººï¼Œéœ€è¦çš„äººå¯ä»¥éå¸¸ä¾¿æ·çš„éƒ¨ç½²åº”ç”¨åˆ°é›†ç¾¤ã€‚</p><h3>Rancher</h3><p>2.5 ä¹‹å‰çš„ Pipeline ä¾¿æ˜¯ Jenkins çš„å°è£…ï¼ŒåŸºæœ¬ç­‰åŒäº Kubesphere çš„ DevOpsã€‚
2.5 ä¹‹å Rancher åºŸå¼ƒäº† Pipeline è½¬è€Œé»˜è®¤éƒ¨ç½² Fleetã€‚</p><p><a href="https://github.com/rancher/fleet">rancher/fleet</a> æ˜¯é¢å‘å¤šé›†ç¾¤çš„ GitOpsï¼Œä¸ Pipeline å®Œå…¨æ˜¯ä¸¤ä¸ªæ–¹å‘ã€‚rancher æ³¨é‡è¿ç»´ï¼Œfleet ä½¿å¾— rancher çš„è¿ç»´èƒ½åŠ›æ­¥ä¸Šæ–°çš„å°é˜¶ã€‚</p><p>fleet å¤šé›†ç¾¤æ¯” argocd å¼º</p><ul><li>é»˜è®¤æ”¯æŒä¸€ä¸ªåº”ç”¨éƒ¨ç½²åˆ°å¤šä¸ªé›†ç¾¤ - é›†ç¾¤é€‰æ‹©å™¨</li><li>ä¸åŒé›†ç¾¤æ”¯æŒä¸åŒ overlay è¿›è¡Œå®šåˆ¶åŒ–</li><li>fleet agent å®‰è£…ç®€å•</li><li>æ”¯æŒé›†ç¾¤å±æ€§ - æ‰“æ ‡ã€é€‰æ‹©</li></ul><p>ä½† fleet è¿˜æœ‰å¾ˆå¤šå¼±é¡¹</p><ul><li>å¿…é¡»è¦èµ„æºå…ˆä¸å­˜åœ¨ - æ— æ³•è¿ç§»</li><li>å¯è§†åŒ–è¾ƒå¼± - å¯¹æ¯” ArgoCD</li></ul><p>å¦‚æœçš„ç¡®æ˜¯éœ€è¦å¤šé›†ç¾¤è¿ç»´ï¼Œé‚£ä¹ˆ fleet çš„ç¡®æ˜¯ä¸äºŒä¹‹é€‰ï¼Œå¦‚æœåªè¦åœºæ™¯åªæœ‰ä¸€ä¸ªæˆ–å°‘æ•°é›†ç¾¤ï¼Œå»ºè®®ä½¿ç”¨ ArgoCDã€‚</p><h3>Kubesphere</h3><p>Kubesphere åŒ…å« DevOps æ¨¡å—å’Œ Elastic æ—¥å¿—é‡‡é›†é›†æˆã€‚
é›†æˆåŠŸèƒ½éƒ½æä¾›äº†ç¾è§‚çš„ç•Œé¢ï¼ˆ<strong>ç•Œé¢æ‰æ˜¯ KS çš„æ ¸å¿ƒç«äº‰åŠ›</strong>ï¼‰ï¼Œä½¿å¾—ä½“éªŒçš„ç¡®éå¸¸å¥½ã€‚</p><p>DevOps åŸºäº Jenkinsã€Harborã€Minoã€SonarQube ç­‰ï¼Œå› æ­¤æ‰€æœ‰ç›¸å…³ç»„ä»¶çš„é—®é¢˜ä¹Ÿä¼šå˜æˆ KS çš„é—®é¢˜ï¼Œä¹Ÿä¼šå‘ç°ç¤¾åŒºæœ‰éå¸¸å¤šå…³äº Jenkinsã€Harbod ä¹‹ç±»çš„é—®é¢˜ï¼Œæˆ‘è®¤ä¸º Rancher æ”¾å¼ƒåŸºäº Jenkins çš„ Pipeline æ˜¯ååˆ†æ­£ç¡®çš„é€‰æ‹©ã€‚</p><p>è‡³äº Elastic æ—¥å¿—é›†æˆï¼Œæˆ‘è®¤ä¸ºï¼Œå¦‚æœä½¿ç”¨å¤–éƒ¨è¿ç»´çš„ Elastic ç»“åˆ KS çš„ç•Œé¢æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºè¦åœ¨ K8S ä¸Šè¿ç»´å¥½ Elastic è¿™ç§ä½“é‡çš„åº”ç”¨è¿˜æ˜¯ä¸å®¹æ˜“ã€‚</p><h2>è¿ç»´ç»´åº¦</h2><p>æˆ‘ç†è§£çš„è¿ç»´åŒ…å«äº† K8S èµ„æºå¯è§†åŒ–ã€èµ„æºç¼–è¾‘ã€æŒ‡æ ‡å¯è§†åŒ–ã€å¤šé›†ç¾¤æ”¯æŒã€ç”¨æˆ·æƒé™ä½“ç³»ã€é›†æˆåº”ç”¨ç®¡ç†èƒ½åŠ›ç­‰ã€‚</p><h3>More Than Kubernetes Dashboard/Lens</h3><p>Kubernetes Dashboard å’Œ Lens éƒ½æ˜¯éå¸¸ç®€æ´æ˜äº†çš„é›†ç¾¤ç®¡ç†å·¥å…·ï¼ŒLens ç”šè‡³ä¹Ÿèƒ½æ”¯æŒå¤šé›†ç¾¤ã€‚Kubernetes Dashboard å ç”¨å¼‚å¸¸å°‘çš„èµ„æºæä¾›é›†ç¾¤èµ„æºçš„ CRUDï¼Œèµ„æºå¯è§†åŒ–ã€‚</p><p>ä¹‹æ‰€ä»¥é€‰æ‹©å…¶ä»–çš„ç®¡ç†å¹³å°ï¼Œæ˜¯å› ä¸ºé›†ç¾¤ç®¡ç†ä¸­å¿…é¡»çš„ä¸€äº›åŠŸèƒ½ä¸åœ¨ Kubernetes Dashboard å’Œ Lens çš„é¢†åŸŸèŒƒç•´ã€‚</p><ol><li>è§’è‰²æƒé™ç®¡ç† - å¤šç”¨æˆ·</li><li>åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç† - Helm åº”ç”¨</li><li>èµ„æºé›†æˆç®¡ç† - ä½¿ç”¨ UI è€Œé Yaml çš„æ–¹å¼ç¼–è¾‘èµ„æº</li><li>å¤šé›†ç¾¤</li></ol><p>Rancher å’Œ Kubesphere éƒ½å¾ˆå¥½çš„å®Œæˆäº†è¿™äº›ç›®æ ‡ã€‚</p><p>ä½†é—æ†¾çš„æ˜¯ Kubesphere æœ€åŸºç¡€çš„èµ„æºç®¡ç†åŠŸèƒ½è¿˜æ²¡æœ‰ Lens/Kubernetes Dashboard ç›´è§‚ï¼Œå› ä¸ºè¿½æ±‚äº†ç•Œé¢é›†æˆå’Œç¾è§‚ï¼Œæ‰€ä»¥å¯¹äºæœ‰ Kubernetes ç»éªŒçš„ä½¿ç”¨è€…æ¥è¯´åè€Œè§‰å¾—ç¹çã€‚</p><p>Rancher 2.5 çš„ é›†ç¾¤èµ„æºæµè§ˆå™¨ ç®—æ˜¯è¿½èµ¶ä¸Šäº† Lens/Kubernetes Dashboard æ‰€æä¾›çš„åŠŸèƒ½ï¼Œä½†ä¾ç„¶æ²¡æœ‰ Lens ç›´è§‚ã€‚</p><p>Rancher å’Œ Kubesphere éƒ½æ²¡æœ‰å¾ˆå¥½çš„é›†æˆ metric-serverï¼Œå¯¼è‡´æ²¡æœ‰å®‰è£…ç‰¹å®šçš„ç›‘æ§åº”ç”¨æ—¶æ— æ³•æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µã€‚
è€Œç›‘æ§çš„å®‰è£…åˆå› ä¸ºå¹³å°é›†æˆæ–¹å¼ä¸åŒï¼Œå®‰è£…æ–¹å¼ä¸åŒï¼Œå³ä¾¿å·²ç»å­˜åœ¨ä¹Ÿå¯èƒ½çœ‹ä¸åˆ°ç›‘æ§ï¼Œè¿™ä¸€ç‚¹è¿˜æ²¡æœ‰ Kubernetes Dashboard çš„èµ„æºä½¿ç”¨æƒ…å†µæ¥çš„ç›´è§‚ã€‚</p><p>Rancher å’Œ Kubesphere ä»ç®¡ç†ä¸Šè¶…è¶Šäº† Kubernetes Dashboard/Lensï¼Œä½†å®é™…ä½“éªŒå’Œä½¿ç”¨ä¸Šå´ä»æœ‰ä¸è¶³ã€‚</p><h3>å¤šé›†ç¾¤</h3><p>è®¨è®ºå¤šé›†ç¾¤æ—¶ï¼Œä¼˜å…ˆæ˜ç¡®åœºæ™¯</p><ol><li>å¤§é‡é›†ç¾¤ - Rancher - ä»¥è¿ç»´ä¸ºä¸»</li></ol><ul><li>åº”ç”¨éƒ¨ç½²</li><li>èµ„æºç®¡ç†</li><li>Agent æ˜“äºå®‰è£…ï¼Œå ç”¨èµ„æºå°‘</li></ul><ol><li>å°‘é‡é›†ç¾¤ - Kubesphere - å¼€å‘ä½“éªŒ</li></ol><ul><li>DevOps</li></ul><p>å› ä¸º Kubesphere æœ¬èº«èµ„æºç®¡ç†èƒ½åŠ›å¼±äº Rancherï¼Œå› æ­¤å½“å¤šé›†ç¾¤èµ„æºè¿‡å¤šçš„æ—¶å€™åªèƒ½é€‰æ‹© Rancherã€‚Rancher çš„èµ„æºæµè§ˆå™¨å’Œ Fleet éƒ½æ˜¯é’ˆå¯¹è¿™æ ·çš„åœºæ™¯è®¾è®¡çš„ã€‚
Rancher agent å’Œ fleet agent èµ„æºå ç”¨éƒ½è¾ƒå°‘ï¼Œå› æ­¤å¤§é‡éƒ¨ç½²æ—¶è´Ÿæ‹…ä¹Ÿä¸ä¼šå¤§ã€‚</p><p>å¦‚æœéœ€è¦ DevOps åˆ™å¯ä»¥è€ƒè™‘å•ç‹¬é›†ç¾¤å®‰è£… Kubesphere æˆ–è€…é€‰æ‹© Argocdã€Gitlab ç­‰å¯¹åº”åœºæ™¯çš„åº”ç”¨äº§å“ã€‚</p><h1>æ€»ç»“</h1><p>é€‰æ‹© Rancher å’Œ Kubesphere å¹¶ä¸å†²çªï¼Œä¸¤è€…å‘å±•æ–¹å‘ä¹Ÿä¸å°½ç›¸åŒã€‚å› æ­¤æ ¹æ®å®é™…æƒ…å†µå’Œé¡¹ç›®éœ€è¦é€‰æ‹©å³å¯ã€‚</p><h1>å‚è€ƒ</h1><ul><li><a href="https://github.com/rancher/rancher">rancher/rancher</a></li><li><a href="https://github.com/kubesphere/kubesphere">kubesphere/kubesphere</a></li><li><a href="https://info.rancher.com/hubfs/eBooks,%20reports,%20and%20whitepapers/%5BBuyers%20Guide%5D%20Rancher,%20Openshift,%20Tanzu,%20Anthos%2020200911.pdf">A Buyerâ€™s Guide to Enterprise Kubernetes Management Platforms</a><ul><li>Rancher å¯¹è‡ªå·±çš„å®šä½ä¸åŒäº Kubesphere</li></ul></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CRM åŸºç¡€ - çº¿ç´¢ã€å•†æœºã€è´¦æˆ·ã€è”ç³»äºº]]></title>
        <id>crm-basic-leads-opportunities-accounts-contacts</id>
        <link href="https://wener.me/story/crm-basic-leads-opportunities-accounts-contacts"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[CRM åŸºç¡€ - çº¿ç´¢ã€å•†æœºã€è´¦æˆ·ã€è”ç³»äºº]]></summary>
        <content type="html"><![CDATA[<h2>CRM åŸºç¡€ - çº¿ç´¢ã€å•†æœºã€è´¦æˆ·ã€è”ç³»äºº</h2><ul><li>çº¿ç´¢ - leads<ul><li>æ˜¯ è¥é”€/marketing ä¸ é”€å”®/sales çš„äº¤ç•Œç‚¹</li><li>è¥é”€è´Ÿè´£åˆ›é€ ã€å‘ç°çº¿ç´¢ï¼Œé”€å”®äººå‘˜éœ€è¦ä»çº¿ç´¢æŒ–æ˜å•†æœºè¿›è¡Œé”€å”®è½¬åŒ–</li><li>æŒ–æ˜è¿‡ç¨‹å°±æ˜¯åˆ¤æ–­çº¿ç´¢æ˜¯å¦åˆæ ¼ï¼ˆqualifyï¼‰æˆ–ä¸åˆæ ¼ï¼ˆdisqualifyï¼‰çš„è¿‡ç¨‹ï¼Œå¦‚æœåˆæ ¼åˆ™èƒ½è¢«è½¬åŒ–ä¸ºå•†æœº</li><li>çº¿ç´¢è¡¨ç¤ºçš„ <strong>æ½œåœ¨</strong> çš„ <strong>é”€å”®ç›®æ ‡</strong></li><li>åŒ…å«åŸºç¡€çš„æŒ‡å‘ä¿¡æ¯ - ä¾‹å¦‚ åç‰‡ã€ç”µè¯å·ç +åå­—</li></ul></li><li>å•†æœº - opportunities<ul><li>å•†æœºå¯ç”±çº¿ç´¢è½¬åŒ–ï¼Œä¹Ÿå¯ç›´æ¥å½•å…¥</li><li>å•†æœºåŒæ—¶ä¹Ÿæ˜¯è”ç³»äººï¼ˆcontactï¼‰ï¼Œåœ¨åˆ›å»ºå•†æœºæ—¶è‡ªåŠ¨åˆ›å»ºå…³è”çš„è”ç³»äººå’Œè´¦æˆ·</li><li>å•†æœº=æ½œåœ¨é”€å”®ç›®æ ‡ï¼ˆlead+contactï¼‰+æ½œåœ¨å¯é”€å”®æœåŠ¡</li></ul></li><li>è´¦æˆ· - accounts<ul><li>B2B å…³ç³»å¾€æ¥ç›®æ ‡ - é€šå¸¸å¯¹æ–¹ä¸ºå…¬å¸</li><li>å…³ç³»å¾€æ¥ç±»å‹ä¸åªæ˜¯é”€å”®å®¢æˆ·å…³ç³»ï¼Œè¿˜å¯èƒ½æ˜¯ åˆä½œä¼™ä¼´ï¼ˆpartnerï¼‰ã€ä¾›åº”å•†ï¼ˆvendorï¼‰ ç­‰</li><li>æœ‰å±‚çº§å…³ç³»ï¼Œæ”¯æŒå¤æ‚çš„ç»„ç»‡ç»“æ„</li></ul></li><li>è”ç³»äºº - contacts<ul><li>B2B å…³ç³»ä¸­å¯¹æ–¹å…¬å¸å®é™…æ“ä½œçš„äºº - ä¾‹å¦‚ ä¸‹å•ã€å®¡æ ¸ã€å¤„ç†å‘ç¥¨æ”¶æ® çš„ <strong>äºº</strong></li></ul></li></ul><h2>ä» Issues çœ‹ CRM åŸºç¡€æ¦‚å¿µ</h2><p>ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œå¯¹ Issues/å·¥å•/è®®é¢˜ æ›´åŠ ç†Ÿæ‚‰ã€‚ç®¡ç†çš„å¥½çš„å·¥å•ä¼šä½¿å¾—æ•´ä¸ªå¼€å‘æµç¨‹æ›´åŠ é¡ºç•…ï¼Œç®¡ç†çš„ä¸å¥½åˆ™ä¼šå¯¼è‡´å·¥å•æš´å¢å¯¼è‡´æ— æ³•æ”¶å°¾æœ€ç»ˆåªæœ‰å¤§æ‰¹é‡å…³é—­ã€‚</p><p>å·¥å•ç»å†å‘ç°ã€åˆ›å»ºã€ç¡®è®¤ã€ä¿®å¤ã€å…³é—­ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸ CRM çš„ çº¿ç´¢ã€å•†æœºã€æˆäº¤è¿‡ç¨‹ååˆ†ç›¸ä¼¼ã€‚</p><p>å·¥å•çœ‹ä¼¼æ˜¯çº¿æ€§çš„ï¼Œä½†å®é™…å¤„ç†çš„æ—¶å€™åˆæ˜¯æµç¨‹åŒ–çš„ï¼Œè¿™ä¸ªæµç¨‹å¹¶ä¸å›ºå®šï¼Œè€Œæ˜¯å–å†³äºå½“å‰é—®é¢˜çš„çŠ¶æ€ã€ç±»å‹ã€æŒ‡æ´¾äººã€‚</p><p>ä»¥ kubernetes çš„ <a href="https://github.com/kubernetes/kubernetes/issues">issues</a> ä¸ºä¾‹ï¼Œå¤§é‡çš„ issues éƒ½ä¼šæ‰“ä¸Š<a href="https://github.com/kubernetes/kubernetes/labels?sort=count-desc">å„ç§æ ‡ç­¾</a>ã€‚</p><table><thead><tr><th>Label</th><th>CRM</th></tr></thead><tbody><tr><td>needs-triage</td><td>å¾…è·Ÿè¿›</td></tr><tr><td>triage/unresolved</td><td>æ— æ•ˆçš„</td></tr><tr><td>triage/accepted</td><td>å·²ç¡®è®¤</td></tr><tr><td><code>kind/*</code></td><td>åˆ’åˆ†ç±»å‹</td></tr><tr><td><code>area/*</code></td><td>åˆ’åˆ†æœåŠ¡èŒƒå›´</td></tr></tbody></table><p>CRM çš„æ ¸å¿ƒæ˜¯ <strong>åä½œ</strong>ï¼Œå·¥å•çš„æ ‡ç­¾ç³»ç»Ÿä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿åä½œï¼Œä¸åŒçš„é¡¹ç›®ä½¿ç”¨çš„ä½“ç³»ä¸å°½ç›¸åŒï¼Œå› ä¸ºåœºæ™¯å’Œå¤„ç†æµç¨‹ä¸åŒï¼Œä½†æ ¸å¿ƒç›®çš„éƒ½æ˜¯ä¸ºäº†åä½œè§£å†³é—®é¢˜ã€‚</p><p>é€šè¿‡å·¥å•çš„æ ‡ç­¾å®šä¹‰å¯è§‚æµ‹å‡ºå¤„ç†æµç¨‹ï¼Œè¿™æ ·çš„å¤„ç†æµç¨‹æ˜¯ä¸€å¥— <strong>é¡¹ç›®ç®¡ç†æ¡†æ¶</strong>ï¼ŒCRM ä¸­é”€å”®ä¹Ÿéœ€è¦ä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„æ¡†æ¶ï¼Œåªæœ‰å½“é”€å”®äººå‘˜éµå¾ªä¸€å¥—æ¡†æ¶ä½“ç³»æ—¶æµç¨‹æ‰å¯èƒ½å¾—ä»¥ä¼˜åŒ–ã€‚</p><p>å¤§å°é¡¹ç›®çš„æ ‡ç­¾åˆ†å‘æµç¨‹ä½“ç³»ä¸åŒï¼Œå°±å¥½æ¯”å¤§å°å…¬å¸å¯¹ CRM è¦æ±‚ä¸åŒï¼ŒåˆæœŸçš„éœ€æ±‚åªè¦è®°å½•ä¿¡æ¯ï¼Œä¸­é˜¶çš„è¦æ±‚éœ€è¦èƒ½æŒ‰äººå‘˜æŒ‰æŒ‡è´£å»æµè½¬è·Ÿè¿›ï¼Œé«˜é˜¶çš„åˆ™éœ€è¦é›†æˆå¤§é‡çš„å¤–éƒ¨ç³»ç»Ÿä½¿å¾—æµç¨‹è‡ªåŠ¨åŒ–ã€‚</p><p>å·¥å•ç³»ç»Ÿè¿™æ ·çš„è‡ªåŠ¨åŒ–æ¯”ä¼ ç»Ÿ CRM ä¸€æ¡ä¸€æ¡è®°å½•æ›´åŠ æ™ºèƒ½ï¼Œä¾‹å¦‚ Github èƒ½é›†æˆå„ç§ç¬¬ä¸‰æ–¹çš„ CI/CD ä½“ç°çŠ¶æ€ï¼Œé›†æˆå„ç§æœºå™¨äººå¯¹ issue è¿›è¡Œè‡ªåŠ¨æ‰“æ ‡ï¼Œè¿˜æœ‰æœ€å¸¸è§çš„æœºå™¨äººæ ‡è®° issue è¿‡æœŸå¹¶è‡ªåŠ¨å…³é—­ã€‚</p><p>ä¸ç®¡æ˜¯å·¥å•è¿˜æ˜¯ CRM çš„è·Ÿè¿›ä½“ç³»æœ€é‡è¦çš„æ˜¯è¾¾åˆ°æœ€ç»ˆå®ŒæˆçŠ¶æ€ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦æ¨è¿›åˆ™éœ€è¦ç³»ç»Ÿè¿›è¡Œè¾…åŠ©ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ç¡®å®šä¸‹ä¸€ä»¶äº‹çš„æ—¶é—´èŠ‚ç‚¹ï¼Œå°†ä¸åŒçš„å·¥å•/è·Ÿè¿›åˆ†æµç»™ä¸åŒçš„äººå»å¤„ç†ã€‚</p><p>å·¥å•/è·Ÿè¿›éƒ½æ˜¯éå¸¸åŸå§‹/åŸå­ï¼ˆprimitiveï¼‰çš„å¯¹è±¡ï¼Œåœ¨è¿™æ ·çš„ä½“ç³»ä¹‹ä¸Šå¯ä»¥æ„å»º</p><ul><li>çœ‹æ¿</li><li>é‡Œç¨‹ç¢‘</li><li>å¾…åŠåˆ—è¡¨/Todo List</li><li>Epic</li><li>å¤–éƒ¨é›†æˆ</li><li>è‡ªåŠ¨åŒ–</li></ul><p>ä½œä¸ºé©±åŠ¨ CRM é”€å”®æ—¥å¸¸äº‹åŠ¡æ¥è¯´æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><p>ä½†ï¼Œå·¥å•ç³»ç»Ÿä¸è·Ÿè¿›ä¹Ÿæœ‰å¾ˆå¤šä¸åŒç‚¹ï¼š</p><table><thead><tr><th>-</th><th>å·¥å•</th><th>é”€å”®è·Ÿè¿›</th></tr></thead><tbody><tr><td>å¯è§æ€§</td><td>å…¬å¼€ã€å°ç»„</td><td>ä¸ªäººã€å°ç»„</td></tr><tr><td>å†…å®¹</td><td>æ–‡æœ¬ã€è¯„è®ºã€æ´»åŠ¨</td><td>è¡¨å•ã€æ´»åŠ¨ã€é™„ä»¶</td></tr><tr><td>å†…å®¹ç›®æ ‡</td><td>äº‹</td><td>äºº+äº‹</td></tr><tr><td>åä½œäººå‘˜</td><td>å¼€å‘+æµ‹è¯•+è®¾è®¡+PM</td><td>é”€å”®ä¸ªäºº+é”€å”®å°ç»„+å®¢æœ+ç»ç†</td></tr><tr><td>KPI</td><td>å°ç»„ç›¸å…³</td><td>ä¸ªäººç›¸å…³ã€å°ç»„ç›¸å…³</td></tr><tr><td>é¢‘åº¦</td><td>é«˜</td><td>ä½</td></tr><tr><td>å·¥ä½œå†…å®¹</td><td>PR, æäº¤</td><td>ç”µè¯ã€æ²Ÿé€šã€æ—¥å¸¸äº‹åŠ¡</td></tr></tbody></table><h2>çº¿ç´¢ã€å•†æœºã€è´¦æˆ·ã€è”ç³»äºº</h2><p>å›åˆ°æœ¬æ¥çš„å…³æ³¨ç‚¹ï¼Œå…ˆå‚ç…§ç°æœ‰çš„ç³»ç»Ÿè®¾è®¡ã€‚</p><h3>Dynamic 365</h3><ul><li><a href="https://docs.microsoft.com/en-us/dynamics365/customerengagement/on-premises/developer/entities/lead">Lead Entity</a></li><li><a href="https://docs.microsoft.com/en-us/dynamics365/customerengagement/on-premises/developer/entities/opportunity">Opportunity Entity</a></li><li><a href="https://docs.microsoft.com/en-us/dynamics365/customerengagement/on-premises/developer/entities/account">Account Entity</a></li><li><a href="https://docs.microsoft.com/en-us/dynamics365/customerengagement/on-premises/developer/entities/contact">Contact Entity</a></li><li><a href="https://docs.microsoft.com/en-us/dynamics365/customerengagement/on-premises/developer/entities/activitypointer">ActivityPointer</a><ul><li>å·²å®Œæˆæˆ–æœªå®Œæˆçš„äº‹åŠ¡</li></ul></li><li><a href="https://docs.microsoft.com/en-us/dynamics365/customerengagement/on-premises/developer/entities/activityparty">ActivityParty</a><ul><li>æ´»åŠ¨å‚ä¸æ–¹</li></ul></li></ul><p>å…¶ä¸­çš„ Activity æ´»åŠ¨æ¦‚å¿µå…¶å®å°±å¯¹åº”äº†å·¥å•ä¸­çš„æ´»åŠ¨è®°å½•ï¼Œæ‰€æœ‰çš„è·Ÿè¿›è¿‡ç¨‹éƒ½ä»¥æ´»åŠ¨å‘ˆç°ã€‚ä¼¼ä¹æ¥ä¸‹æ¥è¯¥äº†è§£ä¸€ä¸‹å·¥å•ç³»ç»Ÿçš„å®ç°äº†</p><h2>å‚è€ƒ</h2><ul><li><a href="https://yaweriqbal.com/2016/01/10/understanding-leads-opportunities-accounts-and-contacts-in-crm/">Understanding leads, opportunities, accounts and contacts in CRM</a></li><li><a href="https://www.salesforcetraining.com/salesforce-manages-leads-contacts-accounts-opportunities/">How Salesforce Manages Leads, Contacts, Accounts and Opportunities</a></li><li>Gitlab <a href="https://docs.gitlab.com/ee/user/project/issues/">Issues</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å·¥å•ç³»ç»Ÿè®¾è®¡å®ç°]]></title>
        <id>issues-system-design</id>
        <link href="https://wener.me/story/issues-system-design"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[å·¥å•/Issues ç³»ç»Ÿéƒ½ä¸ä¼šé™Œç”Ÿï¼ŒGithubã€Gitlabã€Gitea ä¸­æ¯å¤©éƒ½åœ¨æ¥è§¦çš„ç³»ç»Ÿã€‚æƒ³è¦å­¦ä¹ å¦‚ä½•è®¾è®¡å®ç°æœ€ç®€å•çš„æ˜¯ç›´æ¥ä»åˆ«äººçš„ç³»ç»Ÿé€»è¾‘å‚è€ƒç†è§£ã€‚]]></summary>
        <content type="html"><![CDATA[<p>å·¥å•/Issues ç³»ç»Ÿéƒ½ä¸ä¼šé™Œç”Ÿï¼ŒGithubã€Gitlabã€Gitea ä¸­æ¯å¤©éƒ½åœ¨æ¥è§¦çš„ç³»ç»Ÿã€‚æƒ³è¦å­¦ä¹ å¦‚ä½•è®¾è®¡å®ç°æœ€ç®€å•çš„æ˜¯ç›´æ¥ä»åˆ«äººçš„ç³»ç»Ÿé€»è¾‘å‚è€ƒç†è§£ã€‚</p><p>æˆ‘ç†è§£çš„å·¥å•ç³»ç»Ÿ</p><ul><li>å…ƒæ•°æ®ä¸°å¯Œ</li><li>åˆ†ç±»æ ‡ç­¾ä½“ç³»</li><li>åŸºäºæ—¶é—´çº¿å‘ˆç°æ´»åŠ¨</li><li>å¯æ‰©å±•æ€§å¼º</li><li>èƒ½å°è£…å‡ºä¸Šå±‚ç®¡ç†ä½“ç³»<ul><li>çœ‹æ¿</li><li>é‡Œç¨‹ç¢‘</li><li>æ—¥å†</li></ul></li></ul><h2>Gitea</h2><ul><li>Issues ç‰¹æ€§<ul><li>ä¸Šä¸‹æ–‡åˆ‡æ¢ - ç»„ç»‡ã€å½“å‰ç”¨æˆ·</li><li>æ¨¡æ¿</li><li>é‡Œç¨‹ç¢‘</li><li>æ ‡ç­¾</li><li>æŒ‡æ´¾</li><li>æ—¶é—´è·Ÿè¸ª</li><li>å›åº” - è¡¨æƒ…</li><li>è¿‡æ»¤<ul><li>Open</li><li>Closed</li><li>ä½ çš„ä»“åº“</li><li>è¢«æŒ‡æ´¾å·¥å•</li><li>ä½ åˆ›å»ºçš„å·¥å•</li><li>ä»“åº“</li></ul></li><li>æ’åºï¼š æœ€è€çš„ã€æœ€è¿‘æ›´æ–°ã€è¯„è®ºæ•°é‡</li><li>æœç´¢ã€è¯„è®ºã€é™„ä»¶</li></ul></li><li>æ•°æ®æ¨¡å‹ä½äº <a href="https://github.com/go-gitea/gitea/tree/master/models">models</a><ul><li>13 ä¸ªå…³äºç”¨æˆ·çš„æ¨¡å‹æ–‡ä»¶</li><li>23 ä¸ªå…³äºä»“åº“çš„æ¨¡å‹æ–‡ä»¶</li><li><strong>28</strong> ä¸ªå…³äºå·¥å•çš„æ¨¡å‹æ–‡ä»¶ - æ˜¯ç³»ç»Ÿä¸­æœ€å¤šçš„æ¨¡å—</li></ul></li><li>è¯„è®ºä½œä¸ºæ´»åŠ¨/æŒ‡ä»¤ï¼ŒIssues åŸºäºæ—¶é—´å…³è”è¯„è®ºä¿®æ”¹æ“ä½œ</li></ul><p>æ ¸å¿ƒ Issue æ¨¡å‹</p><pre><code class="language-go">// Issue represents an issue or pull request of repository.
type Issue struct {
    ID               int64       `xorm:&quot;pk autoincr&quot;`
    RepoID           int64       `xorm:&quot;INDEX UNIQUE(repo_index)&quot;`
    Repo             *Repository `xorm:&quot;-&quot;`
    Index            int64       `xorm:&quot;UNIQUE(repo_index)&quot;` // Index in one repository.
    PosterID         int64       `xorm:&quot;INDEX&quot;`
    Poster           *User       `xorm:&quot;-&quot;`
    OriginalAuthor   string
    OriginalAuthorID int64      `xorm:&quot;index&quot;`
    Title            string     `xorm:&quot;name&quot;`
    Content          string     `xorm:&quot;TEXT&quot;`
    RenderedContent  string     `xorm:&quot;-&quot;`
    Labels           []*Label   `xorm:&quot;-&quot;`
    MilestoneID      int64      `xorm:&quot;INDEX&quot;`
    Milestone        *Milestone `xorm:&quot;-&quot;`
    Project          *Project   `xorm:&quot;-&quot;`
    Priority         int
    AssigneeID       int64        `xorm:&quot;-&quot;`
    Assignee         *User        `xorm:&quot;-&quot;`
    IsClosed         bool         `xorm:&quot;INDEX&quot;`
    IsRead           bool         `xorm:&quot;-&quot;`
    IsPull           bool         `xorm:&quot;INDEX&quot;` // Indicates whether is a pull request or not.
    PullRequest      *PullRequest `xorm:&quot;-&quot;`
    NumComments      int
    Ref              string

    DeadlineUnix timeutil.TimeStamp `xorm:&quot;INDEX&quot;`

    CreatedUnix timeutil.TimeStamp `xorm:&quot;INDEX created&quot;`
    UpdatedUnix timeutil.TimeStamp `xorm:&quot;INDEX updated&quot;`
    ClosedUnix  timeutil.TimeStamp `xorm:&quot;INDEX&quot;`

    Attachments      []*Attachment `xorm:&quot;-&quot;`
    Comments         []*Comment    `xorm:&quot;-&quot;`
    Reactions        ReactionList  `xorm:&quot;-&quot;`
    TotalTrackedTime int64         `xorm:&quot;-&quot;`
    Assignees        []*User       `xorm:&quot;-&quot;`

    // IsLocked limits commenting abilities to users on an issue
    // with write access
    IsLocked bool `xorm:&quot;NOT NULL DEFAULT false&quot;`

    // For view issue page.
    ShowTag CommentTag `xorm:&quot;-&quot;`
}
</code></pre><p>å…³è”å†…å®¹</p><ul><li>ä¸Šä¸‹æ–‡å…³è”: Repo, Project</li><li>å…ƒä¿¡æ¯å…³è”: Poster, OriginalAuthor, PullRequest</li><li>åˆ†ç±»å…³è”: Labels, Milestone</li><li>æŒ‡æ´¾å…³è”: Assignee, Assignees</li><li>å†…å®¹å…³è”: Attachments, Comments, Reactions</li></ul><p>è¯„è®ºæ ¸å¿ƒæ¨¡å‹</p><pre><code class="language-go">// Comment represents a comment in commit and issue page.
type Comment struct {
    ID               int64       `xorm:&quot;pk autoincr&quot;`
    Type             CommentType `xorm:&quot;INDEX&quot;`
    PosterID         int64       `xorm:&quot;INDEX&quot;`
    Poster           *User       `xorm:&quot;-&quot;`
    OriginalAuthor   string
    OriginalAuthorID int64
    IssueID          int64  `xorm:&quot;INDEX&quot;`
    Issue            *Issue `xorm:&quot;-&quot;`
    LabelID          int64
    Label            *Label   `xorm:&quot;-&quot;`
    AddedLabels      []*Label `xorm:&quot;-&quot;`
    RemovedLabels    []*Label `xorm:&quot;-&quot;`
    OldProjectID     int64
    ProjectID        int64
    OldProject       *Project `xorm:&quot;-&quot;`
    Project          *Project `xorm:&quot;-&quot;`
    OldMilestoneID   int64
    MilestoneID      int64
    OldMilestone     *Milestone `xorm:&quot;-&quot;`
    Milestone        *Milestone `xorm:&quot;-&quot;`
    AssigneeID       int64
    RemovedAssignee  bool
    Assignee         *User `xorm:&quot;-&quot;`
    AssigneeTeamID   int64 `xorm:&quot;NOT NULL DEFAULT 0&quot;`
    AssigneeTeam     *Team `xorm:&quot;-&quot;`
    ResolveDoerID    int64
    ResolveDoer      *User `xorm:&quot;-&quot;`
    OldTitle         string
    NewTitle         string
    OldRef           string
    NewRef           string
    DependentIssueID int64
    DependentIssue   *Issue `xorm:&quot;-&quot;`

    CommitID        int64
    Line            int64 // - previous line / + proposed line
    TreePath        string
    Content         string `xorm:&quot;TEXT&quot;`
    RenderedContent string `xorm:&quot;-&quot;`

    // Path represents the 4 lines of code cemented by this comment
    Patch       string `xorm:&quot;-&quot;`
    PatchQuoted string `xorm:&quot;TEXT patch&quot;`

    CreatedUnix timeutil.TimeStamp `xorm:&quot;INDEX created&quot;`
    UpdatedUnix timeutil.TimeStamp `xorm:&quot;INDEX updated&quot;`

    // Reference issue in commit message
    CommitSHA string `xorm:&quot;VARCHAR(40)&quot;`

    Attachments []*Attachment `xorm:&quot;-&quot;`
    Reactions   ReactionList  `xorm:&quot;-&quot;`

    // For view issue page.
    ShowTag CommentTag `xorm:&quot;-&quot;`

    Review      *Review `xorm:&quot;-&quot;`
    ReviewID    int64   `xorm:&quot;index&quot;`
    Invalidated bool

    // Reference an issue or pull from another comment, issue or PR
    // All information is about the origin of the reference
    RefRepoID    int64                 `xorm:&quot;index&quot;` // Repo where the referencing
    RefIssueID   int64                 `xorm:&quot;index&quot;`
    RefCommentID int64                 `xorm:&quot;index&quot;`    // 0 if origin is Issue title or content (or PR&#x27;s)
    RefAction    references.XRefAction `xorm:&quot;SMALLINT&quot;` // What hapens if RefIssueID resolves
    RefIsPull    bool

    RefRepo    *Repository `xorm:&quot;-&quot;`
    RefIssue   *Issue      `xorm:&quot;-&quot;`
    RefComment *Comment    `xorm:&quot;-&quot;`

    Commits     *list.List `xorm:&quot;-&quot;`
    OldCommit   string     `xorm:&quot;-&quot;`
    NewCommit   string     `xorm:&quot;-&quot;`
    CommitsNum  int64      `xorm:&quot;-&quot;`
    IsForcePush bool       `xorm:&quot;-&quot;`
}
</code></pre><p>å› ä¸ºè¯„è®ºåŒæ—¶è¡¨ç¤ºäº† Issue çš„è¯„è®ºå’Œ Commit è¯„è®ºï¼Œå› æ­¤åŒ…å«äº†å¾ˆå¤šæäº¤ç›¸å…³çš„ä¿¡æ¯ã€‚è¯„è®ºæœ‰ç›¸å½“å¤šçš„ç±»å‹</p><pre><code class="language-go">const (
  // æ™®é€šè¯„è®º - å¯å…³è”åˆ°æäº¤å’Œè¡Œ
    CommentTypeComment CommentType = iota
    CommentTypeReopen
    CommentTypeClose

    CommentTypeIssueRef         // å·¥å•å¼•ç”¨
    CommentTypeCommitRef        // æäº¤å¼•ç”¨
    CommentTypeCommentRef       // è¯„è®ºå¼•ç”¨
    CommentTypePullRef          // PR å¼•ç”¨
    CommentTypeLabel            // æ ‡ç­¾ä¿®æ”¹
    CommentTypeMilestone        // é‡Œç¨‹ç¢‘ä¿®æ”¹
    CommentTypeAssignees        // æŒ‡æ´¾äººä¿®æ”¹
    CommentTypeChangeTitle      // æ ‡é¢˜ä¿®æ”¹
    CommentTypeDeleteBranch     // åˆ é™¤åˆ†æ”¯
    CommentTypeStartTracking    // å¼€å§‹æ—¶é—´è·Ÿè¸ª
    CommentTypeStopTracking     // ç»“æŸæ—¶é—´è·Ÿè¸ª
    CommentTypeAddTimeManual    // æ‰‹åŠ¨æ·»åŠ æ—¶é—´è·Ÿè¸ªä¿¡æ¯
    CommentTypeCancelTracking   // å–æ¶ˆæ—¶é—´è·Ÿè¸ª
    CommentTypeAddedDeadline    // æ·»åŠ æˆªæ­¢æ—¥æœŸ
    CommentTypeModifiedDeadline // ä¿®æ”¹æˆªæ­¢æ—¥æœŸ
    CommentTypeRemovedDeadline  // åˆ é™¤æˆªæ­¢æ—¥æœŸ
    CommentTypeAddDependency    // æ·»åŠ ä¾èµ–
    CommentTypeRemoveDependency // åˆ é™¤ä¾èµ–
    CommentTypeCode             // è¯„è®ºä»£ç è¡Œ
    CommentTypeReview           // PR è¯„è®ºåé¦ˆ
    CommentTypeLock             // é”å®šå·¥å•ä¸ºåä½œè€…
    CommentTypeUnlock           // è§£é”å·¥å•
    CommentTypeChangeTargetBranch // ä¿®æ”¹ PR ç›®æ ‡åˆ†æ”¯
    CommentTypeDeleteTimeManual // åˆ é™¤æ—¶é—´è·Ÿè¸ª
    CommentTypeReviewRequest    // æ·»åŠ æˆ–åˆ é™¤å®¡æ ¸è¯·æ±‚
    CommentTypeMergePull        // åˆå¹¶ PR
    CommentTypePullPush         // æ¨é€åˆ° PR head åˆ†æ”¯
    CommentTypeProject          // ä¿®æ”¹é¡¹ç›®
    CommentTypeProjectBoard     // ä¿®æ”¹é¡¹ç›®é¢æ¿
)
</code></pre><p>è¯„è®ºç±»å‹éå¸¸è¯¦ç»†ï¼Œå› ä¸º Issues æ˜¯åŸºäºæ—¶é—´çº¿çš„äº‹ä»¶ï¼Œè¯„è®ºç­‰åŒäºæ³¨é‡Šï¼Œæ¯ä¸ªæ³¨é‡Šéƒ½æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œä½¿ç”¨å‘½ä»¤çš„æ–¹å¼æ‰èƒ½å®ç°æ—¶é—´çº¿å˜åŒ–ã€‚</p><h2>Gitlab</h2><p>Gitlab ç›¸æ¯” Gitea çš„ Issues åŠŸèƒ½æ›´åŠ å¼ºå¤§</p><p><strong>Issues <a href="https://docs.gitlab.com/ee/user/project/issues/">åŠŸèƒ½ç‰¹æ€§</a></strong></p><ul><li>å†…å®¹: æ ‡é¢˜, æè¿°, ä»»åŠ¡</li><li>äººå‘˜: ä½œè€…, æŒ‡æ´¾äºº</li><li>çŠ¶æ€: æ‰“å¼€/å…³é—­, å¥åº·çŠ¶æ€, å¯ä¿¡åº¦, ä»»åŠ¡å®Œæˆåº¦</li><li>è®¡åˆ’å’Œè·Ÿè¸ª: é‡Œç¨‹ç¢‘, æˆªæ­¢æ—¥æœŸï¼Œæƒé‡ï¼Œæ—¶é—´è·Ÿè¸ªï¼Œæ ‡ç­¾ï¼ŒæŠ•ç¥¨ï¼Œè¡¨æƒ…ï¼Œå·¥å•å…³è”ï¼ŒEpic å…³è”ï¼Œå”¯ä¸€çš„ç¼–å·å’Œåœ°å€</li><li>å…¶ä»–ç›¸å…³åŠŸèƒ½<ul><li>çœ‹æ¿</li><li>Epic</li><li>æœåŠ¡å°/Service Deck</li><li>å¤–éƒ¨é›†æˆ</li><li>å¸¦èŒƒå›´æ”¯æŒå±‚çº§çš„ Label</li><li>ç”¨æˆ· Todo List</li><li>ç‡ƒå°½å›¾</li><li>åˆ†ç»„ç®¡ç† - ç»„çº§åˆ«å¯ç»Ÿè®¡å’Œç®¡ç†ç»„å†…é¡¹ç›®</li><li>è¿­ä»£</li><li>è®¾è®¡ç®¡ç†</li><li>ä»·å€¼æµ</li><li>æ´å¯Ÿ</li></ul></li></ul><p>Issues å¯¹äº Gitlab æ¥è¯´ä¸åªæ˜¯å·¥å•ç®¡ç†ï¼Œåœ¨æœ€åŸºç¡€çš„åŠŸèƒ½ä¸Šå®ç°äº†æ›´å¤šç®¡ç†å’Œåˆ†æç›¸å…³çš„åŠŸèƒ½ï¼Œä½œä¸ºæœ‰ä¸€å®šè§„æ¨¡çš„å›¢é˜Ÿï¼Œè¿™äº›é™„åŠ çš„åŠŸèƒ½éƒ½æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><p>æ ¸å¿ƒ <a href="https://github.com/gitlabhq/gitlabhq/blob/2eaa60e4555bb11ad5c0af905217f0fa61cf7cc9/db/structure.sql#L13105">issues</a>  è¡¨</p><ul><li>API <a href="https://docs.gitlab.com/ee/api/api_resources.html">Reference</a></li><li>GraphQL <a href="https://gitlab.com/-/graphql-explorer">explorer</a></li></ul><pre><code class="language-sql">CREATE TABLE issues (
    id integer NOT NULL,
    title character varying,
    author_id integer,
    project_id integer,                       -- é¡¹ç›®ç®¡ç†
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    description text,
    milestone_id integer,                     -- é‡Œç¨‹ç¢‘
    iid integer,                              -- é¡¹ç›®å†… ID
    updated_by_id integer,
    weight integer,
    confidential boolean DEFAULT false NOT NULL,  -- éšç§˜
    due_date date,                            -- æˆªæ­¢æ—¥æœŸ
    moved_to_id integer,                      -- è¿ç§»
    lock_version integer DEFAULT 0,
    title_html text,
    description_html text,
    time_estimate integer,                    -- æ—¶é—´é¢„ä¼°
    relative_position integer,
    service_desk_reply_to character varying,
    cached_markdown_version integer,
    last_edited_at timestamp without time zone,
    last_edited_by_id integer,
    discussion_locked boolean,
    closed_at timestamp with time zone,
    closed_by_id integer,
    state_id smallint DEFAULT 1 NOT NULL,     -- çŠ¶æ€
    duplicated_to_id integer,                 -- é‡å¤æ ‡å¿—
    promoted_to_epic_id integer,              -- epic
    health_status smallint,                   -- å¥åº·çŠ¶æ€
    external_key character varying(255),      -- å¤–éƒ¨å…³è”
    sprint_id bigint,                         -- sprint å…³è”
    issue_type smallint DEFAULT 0 NOT NULL,   -- ç±»å‹
    blocking_issues_count integer DEFAULT 0 NOT NULL,
    CONSTRAINT check_fba63f706d CHECK ((lock_version IS NOT NULL))
);


-- æåŠçš„ç”¨æˆ·
CREATE TABLE issue_user_mentions (
    id bigint NOT NULL,
    issue_id integer NOT NULL,
    note_id integer,
    mentioned_users_ids integer[],
    mentioned_projects_ids integer[],
    mentioned_groups_ids integer[]
);
-- æŒ‡æ´¾å…³ç³»
CREATE TABLE issue_assignees (
    user_id integer NOT NULL,
    issue_id integer NOT NULL
);
-- é‚®ä»¶ - service desk
CREATE TABLE issue_email_participants (
    id bigint NOT NULL,
    issue_id bigint NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    email text NOT NULL
);
-- slas
CREATE TABLE issuable_slas (
    id bigint NOT NULL,
    issue_id bigint NOT NULL,
    due_at timestamp with time zone NOT NULL
);
-- ä¸¥é‡ç¨‹åº¦
CREATE TABLE issuable_severities (
    id bigint NOT NULL,
    issue_id bigint NOT NULL,
    severity smallint DEFAULT 0 NOT NULL
);
-- epic
CREATE TABLE epic_issues (
    id integer NOT NULL,
    epic_id integer NOT NULL,
    issue_id integer NOT NULL,
    relative_position integer
);
</code></pre><p>Gitlab ä¸æ˜¯é€šè¿‡æ³¨é‡Šæ¥å…³è”æ´»åŠ¨ï¼Œè€Œæ˜¯é€šè¿‡ events è¿›è¡Œå…³è”ã€‚ä¾‹å¦‚</p><pre><code class="language-sql">-- è¿­ä»£äº‹ä»¶
CREATE TABLE resource_iteration_events (
    id bigint NOT NULL,
    user_id bigint NOT NULL,
    issue_id bigint,
    merge_request_id bigint,
    iteration_id bigint,
    created_at timestamp with time zone NOT NULL,
    action smallint NOT NULL
);
-- æ ‡ç­¾äº‹ä»¶
CREATE TABLE resource_label_events (
    id bigint NOT NULL,
    action integer NOT NULL,
    issue_id integer,
    merge_request_id integer,
    epic_id integer,
    label_id integer,
    user_id integer,
    created_at timestamp with time zone NOT NULL,
    cached_markdown_version integer,
    reference text,
    reference_html text
);
-- é‡Œç¨‹ç¢‘äº‹ä»¶
CREATE TABLE resource_milestone_events (
    id bigint NOT NULL,
    user_id bigint,
    issue_id bigint,
    merge_request_id bigint,
    milestone_id bigint,
    action smallint NOT NULL,
    state smallint NOT NULL,
    created_at timestamp with time zone NOT NULL
);
-- çŠ¶æ€äº‹ä»¶
CREATE TABLE resource_state_events (
    id bigint NOT NULL,
    user_id bigint,
    issue_id bigint,
    merge_request_id bigint,
    created_at timestamp with time zone NOT NULL,
    state smallint NOT NULL,
    epic_id integer,
    source_commit text,
    close_after_error_tracking_resolve boolean DEFAULT false NOT NULL,
    close_auto_resolve_prometheus_alert boolean DEFAULT false NOT NULL,
    source_merge_request_id bigint,
    CONSTRAINT check_f0bcfaa3a2 CHECK ((char_length(source_commit) &lt;= 40)),
    CONSTRAINT state_events_must_belong_to_issue_or_merge_request_or_epic CHECK ((((issue_id &lt;&gt; NULL::bigint) AND (merge_request_id IS NULL) AND (epic_id IS NULL)) OR ((issue_id IS NULL) AND (merge_request_id &lt;&gt; NULL::bigint) AND (epic_id IS NULL)) OR ((issue_id IS NULL) AND (merge_request_id IS NULL) AND (epic_id &lt;&gt; NULL::integer))))
);
-- æƒé‡äº‹ä»¶
CREATE TABLE resource_weight_events (
    id bigint NOT NULL,
    user_id bigint,
    issue_id bigint NOT NULL,
    weight integer,
    created_at timestamp with time zone NOT NULL
);
</code></pre><p>ä½¿ç”¨äº‹ä»¶çš„æ¨¡å¼åˆ™éƒ½æ˜¯åå‘å…³è”ï¼Œæ‰©å±•æ€§ç›¸å¯¹é€šè¿‡ Type+æ¡ä»¶å­—æ®µ æ›´å¥½ï¼Œæ¨¡å—ä¹‹é—´å½±å“ä¹Ÿä¼šæ›´å°ã€‚ä½†éœ€è¦æŸ¥è¯¢æ‰€æœ‰çš„äº‹ä»¶åˆ™ä¼šéº»çƒ¦ä¸€ç‚¹ã€‚</p><p>Gitlab çš„ Issues é¡µé¢æ˜¯åœ¨æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œä¸”ç”Ÿæˆçš„å†…å®¹ä¼šç¼“å­˜ï¼ŒMarkdown ç”Ÿæˆçš„ HTML ä¼šç›´æ¥å†™å…¥è¡¨ä¸­ï¼ŒæŸç§ç¨‹åº¦ä¸Šå‡å°‘äº†éœ€è¦å®¢æˆ·ç«¯æ‹‰å–æ‰€æœ‰äº‹ä»¶çš„å¤æ‚åº¦ã€‚</p><h2>æ€»ç»“</h2><p>è™½ç„¶åªçœ‹äº† Gitea å’Œ Gitlab çš„å®ç°ï¼Œä½†ä¹Ÿè¶³å¤Ÿæœ‰å‚è€ƒæ„ä¹‰ï¼Œå¦‚æœè¦å®ç°ç®€å•çš„å·¥å•ç³»ç»Ÿï¼Œå¯èƒ½ä¼šé€‰æ‹©ç¬¬ä¸€ç§ï¼Œä½†è¦å®ç°å¤æ‚çš„é€»è¾‘åˆ™è€ƒè™‘é€‰æ‹©ç¬¬äºŒç§æ–¹å¼ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç†è§£å­©å­çš„è§†åŠ›]]></title>
        <id>understand-baby-vision</id>
        <link href="https://wener.me/story/understand-baby-vision"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[æ–°ç”Ÿå„¿çš„è§†åŠ›æ˜¯éå¸¸å¼±çš„ï¼Œåªèƒ½çœ‹åˆ°éå¸¸è¿‘è·ç¦»çš„ç‰©ä½“ã€‚åœ¨å…­ä¸ƒå‘¨åå­©å­çš„çœ¼ç›åº”è¯¥ä¼šéšç€ç‰©ä½“è½¬åŠ¨ã€‚]]></summary>
        <content type="html"><![CDATA[<p>æ–°ç”Ÿå„¿çš„è§†åŠ›æ˜¯éå¸¸å¼±çš„ï¼Œåªèƒ½çœ‹åˆ°éå¸¸è¿‘è·ç¦»çš„ç‰©ä½“ã€‚åœ¨å…­ä¸ƒå‘¨åå­©å­çš„çœ¼ç›åº”è¯¥ä¼šéšç€ç‰©ä½“è½¬åŠ¨ã€‚
å‰ä¸€ä¸¤å²çš„æ—¶å€™ï¼Œå­©å­çš„è§†åŠ›å‘è‚²ä¼šéå¸¸è¿…é€Ÿï¼Œåˆ°ä¸¤å²æ—¶è§†åŠ›åŸºæœ¬ç­‰åŒäºæ­£å¸¸æˆå¹´äººçš„è§†åŠ›ã€‚</p><p>çˆ¶æ¯åº”è¯¥å…³æ³¨å­©å­çš„çœ¼ç›æœ‰æ²¡æœ‰ä»¥ä¸‹ç°è±¡</p><ul><li>åŒçœ¼ä¸å¯¹ç§°è½¬åŠ¨æˆ–äº¤å‰</li><li>å°å­©å­ä¸å¯¹è„¸å’Œç©å…·æ„Ÿå…´è¶£</li><li>çœ¼çƒè½¬åŠ¨æœ‰è½»å¾®é¢¤æŠ–</li><li>çœ‹ä¸œè¥¿å¤´éƒ¨å€¾æ–œ</li><li>çœ‹ä¸œè¥¿æŒ¤çœ¼</li></ul><p>ä¸€ä¸¤å²çš„å­©å­è§†åŠ›æ­£å¤„äºå‘è‚²é˜¶æ®µï¼Œå› æ­¤æ˜¯å¦éœ€è¦ä½©æˆ´çœ¼é•œï¼Œçœ¼ç›æ˜¯å¦æœ‰è§†åŠ›é—®é¢˜éœ€è¦å…ˆæ£€æµ‹å¹¶ä¸”è¿›è¡Œä¸€å®šçš„è§‚å¯Ÿã€‚</p><h2>å­©å­çš„è§†åŠ›</h2><p>äººä»¬é€šå¸¸å¯¹ä½©æˆ´çœ¼é•œæœ‰é”™è¯¯çš„è®¤è¯†ï¼š</p><ul><li>å°çš„æ—¶å€™ä½©æˆ´äº†çœ¼é•œï¼Œé•¿å¤§åä¾¿ä¸éœ€è¦äº†</li><li>å°çš„æ—¶å€™ä½©æˆ´äº†çœ¼é•œï¼Œä¼šäº§ç”Ÿä¾èµ–ï¼Œå¯¼è‡´ä»¥åä¸€ç›´ä¼šä½©æˆ´çœ¼é•œ</li></ul><p>ä¸Šè¿°çš„è¯´æ³•å¹¶ä¸æ­£ç¡®ï¼Œå°å­©å­ä¹‹æ‰€ä»¥éœ€è¦ä½©æˆ´çœ¼é•œï¼Œæ›´å¤šçš„åŸå› æ˜¯ <strong>å…ˆå¤©æ€§</strong> çš„ è¿‘è§†ã€è¿œè§†ã€æ•£å…‰å¯¼è‡´çš„ã€‚
å¦‚æœä¸é€šè¿‡çœ¼é•œå¹²é¢„ï¼Œçœ¼ç›çš„æƒ…å†µå¹¶ä¸ä¼šè‡ªå·±å¾—åˆ°æ”¹å–„ç”šè‡³å¯èƒ½åŠ é‡ã€‚</p><p>è¿‘è§†é€šå¸¸å‘ç”Ÿåœ¨ 8-15 å²ï¼Œä½†ä¹Ÿå¯èƒ½æ›´æ—©ã€‚
è¿œè§†åˆ™æ›´ä¸ºå¸¸è§ï¼Œåªè¦è¿œè§†ä¸è¿‡äºä¸¥é‡éƒ½ä¸éœ€è¦è¿›è¡Œäººä¸ºå¹²é¢„ã€‚ä½†ä¸¥é‡çš„è¿œè§†ä¼šå¯¼è‡´çœ‹ä¸æ¸…è¿‘å¤„çš„ç‰©ä½“ï¼Œç”šè‡³çœ‹è¿‘å¤„ç‰©ä½“æ—¶ä¼šå˜æˆâ€œæ–—é¸¡çœ¼â€ã€‚
è¿œè§†é€šå¸¸å‘ç”Ÿåœ¨ä¸¤å²å·¦å³ã€‚
å‡ ä¹ <strong>æ‰€æœ‰äºº</strong> éƒ½ä¼šæœ‰ä¸€å®šç¨‹åº¦çš„æ•£å…‰ï¼Œå¦‚æœæ•£å…‰è¾ƒä¸ºä¸¥é‡ï¼Œåˆ™éœ€è¦ä½©æˆ´çœ¼é•œã€‚</p><p>ä¸æˆå¹´äººä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œå°å­©å­éœ€è¦ä½©æˆ´çœ¼é•œä»¥é¢„é˜² <strong>å¼±è§†</strong>ï¼Œå¼±è§†çš„æ˜¯è¯´åŒçœ¼æƒ…å†µä¸åŒï¼Œæ­£å¸¸çš„çœ¼ç›å—ä¸æ­£å¸¸å½±å“ï¼Œå¯¼è‡´æœ€ç»ˆåŒçœ¼æ— æ³•èšç„¦ã€‚
å¼±è§†è¾ƒä¸ºä¸¥é‡çš„æ—¶å€™ï¼Œåˆ™éœ€è¦ä½©æˆ´çœ¼é•œæ¥ <strong>ä¿æŠ¤</strong> æ­£å¸¸çš„çœ¼ç›ã€‚</p><h2>å­©å­çš„çœ¼é•œ</h2><p>ç°ä»£åŒ»å­¦èƒ½å¤Ÿå¾ˆå®¹æ˜“æµ‹é‡å­©å­çš„è§†åŠ›é—®é¢˜ï¼Œå³ä¾¿å°å­©å­ä¸é…åˆä¹Ÿèƒ½å¤Ÿè¿›è¡Œå‡†ç¡®æµ‹é‡ã€‚</p><p>ç°åœ¨çš„å¤§å¤šé•œç‰‡éƒ½æ˜¯å¡‘æ–™çš„ï¼Œæ¯”ä¼ ç»Ÿçš„ç»ç’ƒé•œç‰‡æ›´ç¡¬æ›´è½»ã€‚å»ºè®®é•œç‰‡è¿›è¡Œé˜²åˆ®æ¶‚å±‚å¤„ç†ï¼Œå› ä¸ºå°å­©å­å¾ˆå®¹æ˜“å°±æŠŠçœ¼é•œåˆ®èŠ±äº†ã€‚
è¦æ³¨æ„é•œç‰‡ä¸è¦è¿‡æš—ï¼Œé¿å…æ— æ³•çœ‹æ¸…å®¤å†…ç¯å¢ƒã€‚</p><p>é•œæ¡†åˆ™é€‰æ‹©å®‰å…¨èˆ’é€‚çš„å³å¯ã€‚ç°åœ¨æœ‰è¾ƒå¤šçš„æ–¹å¼ä¿æŒçœ¼é•œä¸ä¼šæ‰è½ï¼Œæ‰é¼»æ¢çš„å­©å­çœ¼é•œå¯èƒ½æ›´å®¹æ˜“è„±è½ã€‚
å­¦æ­¥çš„å„¿ç«¥å¯é€‰æ‹©ä½©æˆ´è€³å‹¾ï¼Œå©´å¹¼å„¿å¯é€‰æ‹©ä½©æˆ´çœ¼é“¾ã€‚é€‰æ‹©åˆé€‚çš„çœ¼é•œä½©æˆ´å°½é‡è®©çœ¼é•œå’Œå­©å­ä¸€èµ·â€œæˆé•¿â€ï¼Œé¿å…ä¾§è‡‚æŠ˜æ–­ã€‚</p><p>å°å­©å­å¤§å¤šä¸ä¼šé…åˆä½©æˆ´çœ¼é•œï¼Œè¿™æ—¶å€™éœ€è¦å®¶é•¿è¿›è¡Œåˆ†æ•£æ³¨æ„åŠ›ã€è¯±å¯¼æˆ–è€…â€œæŠ•é£Ÿâ€æ¥å¸®åŠ©å­©å­å…»æˆä½©æˆ´çœ¼é•œçš„ä¹ æƒ¯ã€‚
å¦‚æœå®åœ¨ä¸è¡Œï¼Œå¯è®©çœ¼ç§‘åŒ»ç”Ÿå¼€çœ¼è¯æ°´ï¼Œåœ¨æ²¡æœ‰çœ¼é•œæ—¶å°†æ­£å¸¸çœ¼é•œæ¨¡ç³Šæ‰ï¼Œè¿™æ ·é€šå¸¸å¯ä»¥å…‹æœå­©å­çš„åˆæœŸæŠµæŠ—ã€‚</p><h2>å­©å­çš„é˜…è¯»é—®é¢˜</h2><p>å½“å­©å­æœ‰é˜…è¯»å›°éš¾æ—¶ï¼Œå®¶é•¿é€šå¸¸è®¤ä¸ºæ˜¯çœ¼ç›æœ‰é—®é¢˜ï¼Œå¦‚æœæ£€æŸ¥æ’é™¤äº†æ‰€æœ‰çš„è§†åŠ›é—®é¢˜ï¼Œé‚£ä¹ˆæ›´å¯èƒ½æ˜¯å­©å­æœ‰å­¦ä¹ éšœç¢ã€‚</p><p>å­¦ä¹ éšœç¢æ˜¯äººåœ¨ ä¸åŒé¢†åŸŸçš„èƒ½åŠ›å’Œè¡¨ç°å·®è·ã€‚ä¸æ™ºåŠ›æ™ºå•† <strong>æ— å…³</strong>ã€‚å­¦ä¹ éšœç¢å¯èƒ½ä¼šå¯¼è‡´å­©å­åœ¨å­¦æ ¡è¡¨ç°è¾ƒå·®ï¼Œå¦‚æœä¸è¿›è¡Œå¹²é¢„åˆ™ä¼šå¯¼è‡´å­©å­äº§ç”Ÿè‡ªå‘æƒ…ç»ªï¼Œè¿›è€ŒåŒå­¦ã€‚</p><p>å­¦ä¹ éšœç¢å’Œé˜…è¯»é—®é¢˜é€šå¸¸ä¸çœ¼ç›æ— å…³ï¼Œæ›´å¤šçš„æ˜¯éœ€è¦å°è¯•ä¸åŒçš„æ•™è‚²æ–¹å¼ã€‚çˆ¶æ¯åœ¨è¿™ä¸ªè¿‡ç¨‹æå…¶é‡è¦ï¼Œéœ€è¦æ›´å¤šé¼“åŠ±æ”¯æŒå­©å­ï¼Œæ›´å¤šçš„é™ªåŒï¼Œä¸€èµ·é˜…è¯»ç­‰ã€‚
å…·æœ‰å­¦ä¹ éšœç¢çš„å­©å­éœ€è¦æ›´å¤šçš„é¼“åŠ±ï¼Œå°è¯•å¹¶å‘ç°å…¶ä»–çš„æ„Ÿå…´è¶£çš„é¢†åŸŸï¼Œå‘è§‰ä»–ä»¬ç‹¬ç‰¹çš„èƒ½åŠ›ã€‚</p><h2>å­©å­çš„çœ¼ç›å®‰å…¨</h2><p>æ¯ä¸ªäººçš„çœ¼ç›éƒ½å¯èƒ½å—ä¼¤ï¼Œç‰¹åˆ«æ˜¯å°å­©å­åˆ™æ›´ä¸ºå¸¸è§ï¼Œä½†åœ¨å®¶é•¿çš„ç›‘æŠ¤ä¸‹æˆ–è€…ä½©æˆ´é˜²æŠ¤çœ¼é•œ 90% çš„é—®é¢˜éƒ½æ˜¯å¯ä»¥é¿å…çš„ã€‚</p><p>åœ¨è¿›è¡Œè¿åŠ¨æ—¶ä½©æˆ´æŠ¤ç›®é•œå¯ä¿æŠ¤çœ¼ç›ï¼Œä¾‹å¦‚ ç¯®çƒï¼Œç¾½æ¯›çƒç­‰ã€‚
é€‰æ‹©æ ‘è„‚é•œç‰‡ï¼Œå®‰å…¨çš„é•œæ¡†å¯é¿å…ä½©æˆ´çš„çœ¼é•œå¸¦æ¥çš„é¢å¤–ä¼¤å®³ï¼Œç¾å›½æœ‰ ANSI Z87.1 æ ‡å‡†å®šä¹‰çœ¼é•œçš„å®‰å…¨æ ‡å‡†ã€‚</p><p>é€‚å½“çš„å®¶é•¿ç›‘ç£ä¹Ÿæä¸ºé‡è¦ï¼Œä¸è¦è®©å­©å­ç© çƒŸèŠ±ã€BB æŠ¢ã€å¿«é€Ÿæˆ–é”‹åˆ©çš„ç‰©ä½“ï¼Œä¾‹å¦‚ é£é•–ã€å‰ªåˆ€ã€å°åˆ€ã€ç¬”ç­‰ã€‚
åœ¨è‰åªä¸Šä¹Ÿéœ€è¦æ³¨æ„çŸ³å¤´ç­‰é¿å…ç»Šå€’è¢«è‰åˆºä¼¤ã€‚åŒ–å­¦ç‰©å“åˆ™éœ€è¦æ³¨æ„å•æ‰€æ´—å‰‚ï¼Œè¡£ç‰©æ´—å‰‚ç­‰ã€‚</p><h2>é«˜åº¦è¿œè§†çš„å±å®³å’Œä¸¥é‡æ€§</h2><p>å› ä¸ºè¿œè§†å‘ç”Ÿåœ¨ä¸¤å²æˆ–è€…æ›´æ—©çš„æ—¶å€™ï¼Œè¿œè§†ä¼šå¯¼è‡´è¿‘å¤„ç‰©ä½“æ¨¡ç³Šï¼Œè‡´ä½¿å­©å­å‘è‚²å—åˆ°å½±å“ã€‚å¸¸è§çš„å½±å“å¦‚ä¸‹</p><ul><li>æ— æ³•çœ‹æ¸…çˆ¶æ¯</li><li>æ— æ³•çœ‹æ¸…é£Ÿç‰©</li><li>æ— æ³•çœ‹æ¸…æ¨¡ä»¿è¿‘å¤„é¢å­” - è¯­è¨€å‘è‚²å—åˆ°å½±å“</li><li>æ— æ³•çœ‹æ¸…è„šä¸‹ - è¿åŠ¨æœºèƒ½å‘è‚²è¿Ÿç¼“</li><li>æ— æ³•çœ‹æ¸…è„šä¸‹çš„ç©å…· - å¯è§‚æµ‹å­©å­çš„è¡Œä¸ºè½¨è¿¹ç¡®è®¤æ˜¯å¦æœ‰è¿œè§†</li><li>è¾ƒå°‘è§‚å¯Ÿå‘¨å›´ç‰©ä½“ - è¾ƒå°‘ä¸è¿‘å¤„ç‰©ä½“äº¤äº’ - å½±å“è¿åŠ¨æœºèƒ½</li></ul><p>æˆ´çœ¼é•œä¸åªæ˜¯ä¸ºäº†å­©å­çœ‹å¾—æ¸…ï¼Œæ›´é‡è¦çš„æ˜¯ç¡®ä¿å­©å­æ­£å¸¸å‘è‚²ã€‚</p><h2>ç†è§£æ•£å…‰</h2><p> æ•£å…‰æ˜¯ç”±äºå±ˆå…‰ä¸æ­£å¯¼è‡´ï¼Œçœ¼çƒè§’è†œæˆ–æ™¶çŠ¶ä½“å¼§åº¦å¼‚å¸¸ï¼Œä¸æ˜¯åœ†å½¢è€Œæ˜¯åæ¤­åœ†å½¢ã€‚å¯¼è‡´å…‰è¿›å…¥è§†ç½‘è†œåæ— æ³•æ­£å¸¸èšç„¦ï¼Œæˆåƒæ¨¡ç³Šã€‚
å°å­©å­çš„æ•£å…‰å¤§å¤šæœ‰é—ä¼ å› ç´ ï¼Œå…¶ä»–çš„ä¹Ÿå¯èƒ½æ˜¯ç”±äºå—ä¼¤æˆ–æ‰‹æœ¯å¯¼è‡´ã€‚</p><p>æ•£å…‰ç°è±¡ï¼š</p><ul><li>è§†çº¿æ¨¡ç³Šæ‰­æ›²</li><li>çœ¼ç›æ˜“ç–²åŠ³æˆ–æœ‰å‹åŠ›</li><li>å¤´ç–¼</li><li>æ–œè§†</li><li>å¤œæ™šè§†é‡ä¸å¥½</li></ul><p>æ•£å…‰ç±»å‹ï¼š</p><ul><li>æ™¶çŠ¶ä½“æ•£å…‰ - ç”±æ™¶çŠ¶ä½“å¯¼è‡´è€Œéè§’è†œå¯¼è‡´</li><li>è¿‘è§†æ•£å…‰</li><li>è¿œè§†æ•£å…‰</li><li>æ··åˆæ•£å…‰ - æ—¢æœ‰è¿‘è§†åˆæœ‰è¿œè§†çš„æƒ…å†µ</li></ul><p>æ•£å…‰ä¹Ÿåˆ†ä¸ºæ­£å¸¸å’Œéæ­£å¸¸ï¼Œæ­£å¸¸æŒ‡ä¸¤ä¸ªæ›²é¢ä¸º 90 åº¦ï¼Œä¸æ­£å¸¸åˆ™æŒ‡é 90 åº¦ã€‚
éæ­£å¸¸æ•£å…‰é€šå¸¸ç”±äºçœ¼éƒ¨å—ä¼¤ã€çœ¼ç›ç¥ç»åˆ›ä¼¤ã€æ‰‹æœ¯æˆ–çœ¼ç›ç‰¹æ®Šæ¡ä»¶ï¼ˆåœ†é”¥è§’è†œï¼‰å¯¼è‡´ï¼Œçœ¼ç›è§’è†œå˜è–„çš„ç°è±¡ã€‚</p><p>æ•£å…‰æ²»ç–—ï¼š</p><ul><li>çœ¼é•œ - å¸¸è§å¸¸ç”¨æ–¹å¼</li><li>éšå½¢çœ¼é•œ - å¯ç”¨äºä½åº¦æ•£å…‰</li><li>å±ˆå…‰æ‰‹æœ¯ - æ¿€å…‰çŸ«æ­£çœ¼çƒå½¢çŠ¶</li></ul><h2>çœ¼ç›æ‰‹æœ¯</h2><p>:::warn</p><p>å±ˆå…‰çŸ«æ­£å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœåº¦æ•°è¿‡äºä¸¥é‡ï¼Œä½©æˆ´çœ¼é•œæˆ–è€…éšå½¢çœ¼é•œå·²ç»ä¸¥é‡å½±å“ç”Ÿæ´»çš„æ—¶å€™å¯ä»¥è€ƒè™‘ã€‚</p><p>:::</p><p>çœ¼ç›çš„é—®é¢˜é€šå¸¸éƒ½æ˜¯å›ºå®šå­˜åœ¨çš„ï¼Œå°±å¥½æ¯”äººçš„èº«é«˜ã€‚ä½†çœ¼çƒçš„å½¢çŠ¶æ˜¯å¯ä»¥å¼ºåˆ¶æ¿€å…‰æ‰‹æœ¯çŸ«æ­£çš„ã€‚
ç›®å‰å¤§å¤šä½¿ç”¨å‡†åˆ†å­æ¿€å…‰æ¥çŸ«æ­£è§’è†œã€‚æˆåŠŸçš„å±ˆå…‰çŸ«æ­£æ‰‹æœ¯å¯ä»¥å‡è½»æˆ–æ²»æ„ˆè¿‘è§†ã€è¿œè§†ã€è€åŒ–å’Œæ•£å…‰ã€‚</p><p>æ‰‹æœ¯ç±»å‹åˆ†ä¸ºï¼š</p><ul><li>è§’è†œç“£å¤„ç† - ä½¿ç”¨æ¿€å…‰åˆ‡é™¤éƒ¨åˆ†åšçš„è§’è†œç“£<ul><li>LASIK / Laser-Assisted in Situ Keratomileusis / å‡†åˆ†å­æ¿€å…‰åŸä½è§’è†œç£¨é•¶æœ¯</li></ul></li><li>è§’è†œè¡¨é¢å±‚å¤„ç† - ä¸éœ€è¦åˆ‡é™¤ï¼ŒåŒºåˆ«ä»…åœ¨äºä¸ä¸Šçš®å¤„ç†ä¸åŒ<ul><li>PRK / Photorefractive keratectomy / æ¿€å…‰å±ˆå…‰è§’è†œåˆ‡å‰Šæœ¯<ul><li>2015 å¹´åå®Œå…¨ç”± TransPRK å–ä»£</li><li>æ¿€å…‰ç…§åœ¨è§’è†œè¡¨é¢ç»„ç»‡ä½¿å…¶è’¸æ•£æŒ¥å‘æ‰ï¼Œä¼¤å£å‘¨å›´ä¸å¹³æ•´ï¼Œæœ¯åç–¼ç—›æ„Ÿè¾ƒé«˜ï¼Œä¸”æ¢å¤æœŸè¾ƒæ…¢ï¼Œä½†ä¸é¡»åˆ¶ä½œè§’è†œç“£å¯ä»¥ä¿ç•™è¾ƒå¤šçš„è§’è†œåšåº¦ã€‚</li><li>1980 å¹´ï¼Œä¼ ç»Ÿçš„æ‰‹æœ¯æ–¹å¼</li></ul></li><li>LASEK / Laser Assisted Sub-Epithelium Keratomileusis</li><li>TransPRK / Transepithelial Photorefractive Keratectomy / ç»ä¸Šçš®æ¿€å…‰å±ˆå…‰è§’è†œå‰Šåˆ‡æœ¯<ul><li><strong>é™ä½</strong> LASIK æ‰‹æœ¯åå¯èƒ½çš„ <em>è§’è†œç§»ä½</em> ã€ <em>æ¸¸ç¦»è§’è†œç“£</em> ã€<em>å¤ªè–„çš„è§’è†œç“£</em> ç­‰é£é™©</li><li>å‡ä½ä¼ ç»Ÿ PRK ç–¼ç—›æ„Ÿ</li><li>ä¸éœ€æ¥è§¦è§’è†œï¼Œé¿å…äººä¸ºæ¥è§¦é£é™©</li><li>ä¸å¿…åˆ¶ä½œè§’è†œç“£çš„å±ˆå…‰çŸ«æ­£æ‰‹æœ¯ï¼Œèƒ½æä¾›æœ€ä½³è§’è†œç¨³å®šæ€§åŠé•¿æœŸå®‰å…¨æ€§</li><li>2009 å¹´ï¼Œå¯¹æ¯” PRK ä¸éœ€è¦ç”¨æº¶å‰‚æ³¡è§’è†œä¸Šçš®ï¼Œåˆ©ç”¨å‡†åˆ†å­æ¿€å…‰ä»¥å•ä¸€æ­¥éª¤å‰Šåˆ‡è§’è†œä¸Šçš®å’Œè¿›è¡Œåº¦æœ¯çŸ«æ­£ã€‚</li></ul></li></ul></li><li>è§’è†œåˆ‡å£å¤„ç†</li></ul><p><strong>æ‰‹æœ¯é£é™©</strong></p><p>æ‚£æœ‰è§†ç½‘è†œã€è§’è†œçœ¼ç–¾çš„äººä¸å»ºè®®æ‰‹æœ¯ã€‚æ‚£æœ‰é’å…‰çœ¼ã€ç³–å°¿ç—…ã€ä¸å—æ§åˆ¶çš„è¡€ç®¡ç–¾ç—…ã€å…ç–«ç–¾ç—…ä¹Ÿä¸å»ºè®®æ‰‹æœ¯ã€‚
æ‰‹æœ¯ä¼šå¯¼è‡´è§’è†œå˜è–„ï¼Œæœ¯åä¹Ÿå¯èƒ½ä¼šæœ‰è§’è†œç ´è£‚çš„é£é™©ï¼Œæœ€ç»ˆåªèƒ½é€‰æ‹©è§’è†œç§»æ¤ï¼Œå› æ­¤è§’è†œçš„åšåº¦æµ‹é‡æ˜¯éå¸¸é‡è¦çš„æ­¥éª¤ã€‚
éƒ¨åˆ†äººå¯èƒ½ç”±äºçœ¼ç›å½¢çŠ¶çš„é—®é¢˜ä¹Ÿä¸ä¾¿äºæ‰‹æœ¯ã€‚</p><p>ç›®å‰å±ˆå…‰çŸ«æ­£æ‰‹æœ¯æ—¥è¶‹å®Œå–„ï¼Œä½†ä¸å¯é¿å…çš„è¿˜æ˜¯å¯èƒ½ä¼šå¯¼è‡´æ„å¤–åæœï¼Œä¾‹å¦‚ æœ¯åäº§ç”Ÿé‡å½±ã€å…‰æ™•ã€æ–‘ç‚¹ã€åŒè§†ã€çœ¼ç›å¹²ç‡¥ç­‰é—®é¢˜ã€‚
å¦‚æœä½¿ç”¨ LASIK ç­‰æ–¹å¼ï¼Œæ–°å¢çš„è§’è†œç“£å¯èƒ½ä¼šå¯¼è‡´æœ¯åå¤šå¹´ç–¼ç—›çš„é€‚åº”è¿‡ç¨‹ã€‚
å¦‚æœæ‚£æœ‰æ–œè§†ï¼Œåˆ™è¿˜éœ€è¦è€ƒè™‘æœ¯åå¤„ç†æ–œè§†é—®é¢˜ï¼Œå±ˆå…‰çŸ«æ­£åº”ä¼˜å…ˆäºæ–œè§†è¿›è¡Œï¼Œä½†å¯èƒ½ä¼šå¢åŠ æˆ–å‡å°‘æ–œè§†ã€‚</p><p><strong>å„¿ç«¥æ‰‹æœ¯é£é™©</strong></p><p>å„¿ç«¥é£é™©è¿œå¤§äºæˆäººï¼Œå› ä¸ºå„¿ç«¥æ‰‹æœ¯éœ€è¦è¿›è¡Œéº»é†‰ï¼Œæœ¬èº«ä¼šå¸¦æ¥é¢å¤–é£é™©ã€‚
å„¿ç«¥å¤„äºå‘è‚²æœŸï¼Œçœ¼ç›æƒ…å†µå°šæœªå®Œå…¨å®šå‹ï¼Œå¦‚æœè¿›è¡ŒçŸ«æ­£æ‰‹æœ¯è¿˜è¦è€ƒè™‘å­©å­æœªæ¥çš„å‘å±•æƒ…å†µã€‚</p><p><strong>æ‰‹æœ¯è´¹ç”¨</strong></p><p>ç›®å‰å¤§å¤šæ‰‹æœ¯çš„æ–¹å¼åŸºæœ¬åœ¨ 10000Â¥ åˆ° 40000Â¥ ä¹‹é—´ï¼Œ LASIK å’Œ LASEK ç›¸å¯¹ä»·æ ¼ä½å»‰ï¼Œå¤§çº¦ 15000Â¥ å·¦å³ã€‚
æ‰‹æœ¯ä»·æ ¼åŒºåˆ†å•çœ¼å’ŒåŒçœ¼ï¼Œå•çœ¼å¯åŸºæœ¬æŒ‰ç…§åŠä»·è®¡ç®—ã€‚</p><blockquote><p>æ‰‹æœ¯è´¹ç”¨å‚è€ƒè‡ªé¦™æ¸¯å’Œç¾å›½</p></blockquote><h2>æœ€å</h2><p>ä½œä¸ºçˆ¶æ¯ï¼Œéƒ½å¸Œæœ›è‡ªå·±çš„å­å¥³å¥åº·å¹³å®‰ï¼Œä½†å¦‚æœçœŸçš„çœ¼ç›æœ‰é—®é¢˜ä¹Ÿä¸è¦æƒŠæ…Œï¼Œåº”å°½å¿«ç¡®è¯Šç¡®å®šå¤„ç†æ–¹æ¡ˆï¼Œå¦‚æœç»“è®ºæ˜¯è¦å¸¦çœ¼é•œï¼Œé‚£å°±åº”è¯¥è¶æ—©ç»™å­©å­å‡†å¤‡å¥½çœ¼é•œï¼ŒåŸ¹å…»ä½©æˆ´çœ¼é•œçš„ä¹ æƒ¯ã€‚</p><h2>å‚è€ƒ</h2><ul><li><a href="http://carabineyecare.com/what-parents-should-know-about-infants-and-babies-and-their-vision">What Parents Should Know About Infants and Babies and Their Vision</a><ul><li>å¤§å¤šå†…å®¹ç¿»è¯‘è‡ªè¯¥æ–‡ç« </li></ul></li><li><a href="https://www.bisselleyecare.com/mothers-story/">A MOTHERâ€™S STORY</a></li><li>Wikipedia</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸ºä»€ä¹ˆéœ€è¦ GraphQL]]></title>
        <id>why-need-graphql</id>
        <link href="https://wener.me/story/why-need-graphql"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[é¡¹ç›®å¼€å§‹æ—¶äººå‘˜é…å¤‡ä¸€èˆ¬æœ‰å‡ ç§æƒ…å†µ]]></summary>
        <content type="html"><![CDATA[<p>é¡¹ç›®å¼€å§‹æ—¶äººå‘˜é…å¤‡ä¸€èˆ¬æœ‰å‡ ç§æƒ…å†µ</p><ul><li>å‰åç«¯åŒä¸€ä¸ªäºº</li><li>å‰åç«¯åŒä¸€ä¸ªå›¢é˜Ÿ</li><li>å‰åç«¯ä¸åŒäººåŒä¸€ä¸ªå›¢é˜Ÿ</li><li>å‰åç«¯ä¸åŒäººä¸åŒå›¢é˜Ÿ</li></ul><p>å¼€å‘çš„åº”ç”¨ä¸€èˆ¬åŒºåˆ†ä¸º</p><ul><li>é‡å‰ç«¯</li><li>é‡åç«¯</li><li>ä¸šåŠ¡æ€§</li><li>æ•°æ®æ€§</li><li>å†…å®¹æ€§</li></ul><p>å› æ­¤ä¼šé‡åˆ°å‡ ä¸ªç°è±¡</p><ul><li>å‰åç«¯å¼€å‘è¿›åº¦ä¸åŒ</li><li>å‰åç«¯ç›¸åŒæ¨¡å—åŠŸèƒ½å¤æ‚åº¦ä¸åŒ</li><li>ä¸åŒçš„åç«¯å¯¹è±¡æœ‰ç›¸åŒçš„æ•°æ®å…³è”</li><li>ç›¸åŒå‰ç«¯ä¸åŒæ¨¡å—éœ€è¦ä¸åŒæ•°æ®</li><li>ä¸åŒå‰ç«¯éœ€è¦ä½¿ç”¨ä¸åŒæ•°æ®</li><li>å‰ç«¯è¯·æ±‚ä¸€æ¬¡æ•°æ®åä¼šå†æ¬¡å‘èµ· N æ¬¡è¯·æ±‚ - N+1</li><li>å‰ç«¯ä¸€ä¸ªæ¨¡å—éœ€è¦å¯¹åº”å¤šä¸ªåç«¯</li></ul><p>é‚£ä¹ˆå°±ä¼šè€ƒè™‘å‡ ä¸ªåœºæ™¯</p><ul><li>å‰ç«¯è‡ªè¡Œé€‰æ‹©è¦å“ªäº›æ•°æ®å­—æ®µ</li><li>å‰ç«¯æä¾›å…³è”çš„æ•°æ®é¡¹è¿›è¡Œä¸€æ¬¡æ€§è¿”å›</li><li>åç«¯æ•´åˆå…¶ä»–æœåŠ¡è¿”å›ç»“æœè¿›è¡Œä¸€æ¬¡æ€§è¿”å›</li></ul><p>é‚£ä¹ˆè¿™æ—¶å€™å°±å¯ä»¥é€‰æ‹©ä½¿ç”¨ GraphQLã€‚</p><h2>GraphQL ä¸é€‚åˆåœºæ™¯</h2><ul><li>å¿«é€Ÿè¿›å…¥å¼€å‘ - å¦‚æœé¡¹ç›®åˆšå¼€å§‹æƒ³è¦é€Ÿåº¦å¿«ï¼Œé‚£æœ€å¥½è¿˜æ˜¯ REST<ul><li>æ²¡æœ‰æ—¶é—´æŠ•å…¥äº†è§£ GraphQL æ–¹æ¡ˆ</li></ul></li><li>ä¸€ä¸ªå‰ç«¯ä¸€ä¸ªåç«¯ï¼Œå‰ç«¯é€»è¾‘ç¡®å®šï¼Œåç«¯ä¸éœ€è¦å˜åŠ¨åˆ™æ²¡å¿…è¦ä½¿ç”¨ GraphQL<ul><li>ä¸€æ¬¡æ€§å·¥ä½œï¼Œé¡¹ç›®ä¸éœ€è¦æ¼”è¿›</li></ul></li></ul><h2>åº”ç”¨åœºæ™¯ä¸¾ä¾‹</h2><h3>é€‰æ‹©æ€§çš„è¿”å›è¾ƒé‡çš„è¯·æ±‚</h3><pre><code class="language-sql">create table users (
  id bigint,
  name text
);
create table orders (
  id bigint,
  user_id bigint,
  title text
);
</code></pre><p>ç°åœ¨ ä¸ªäººé¡µ éœ€è¦åœ¨è¯·æ±‚ç”¨æˆ·æ—¶åŒæ—¶è¿”å›ç”¨æˆ·çš„è®¢å•æ€»æ•°ï¼Œä½†å…¶ä»–åœºæ™¯ä¸éœ€è¦ã€‚</p><pre><code class="language-graphql">object User {
  id: Int
  name: String
  orderCount: Int # -&gt; select count(*) from orders where user_id = source.id
}
</code></pre><p>é€šè¿‡ GraphQL å¯ä»¥å°†é€‰æ‹©ç•™ç»™å‰ç«¯ï¼Œä¸éœ€è¦ç”±åç«¯å»å†³å®šä»€ä¹ˆæ—¶å€™è¦è¿”å›ä¸€ä¸ªç›¸å¯¹â€œæ˜‚è´µâ€çš„è¯·æ±‚ã€‚</p><h3>å¤æ‚å…³è”å…³ç³»</h3><pre><code class="language-sql">create table users (
  id bigint,
  name text
);
create table articles (
  id bigint,
  title text
);
create table lables (
  id bigint,
  color_id bigint,
  name text
  target_id bigint,
  target_type bigint -- User, Label
);
create table lable_colors (
  id bigint,
  color text
)
</code></pre><p>å› ä¸º ç”¨æˆ· å’Œ æ–‡ç«  éƒ½æ”¯æŒæ‰“æ ‡ç­¾ï¼Œå› æ­¤åœ¨å®ç°æ—¶ç›¸åŒçš„é€»è¾‘éœ€è¦å¤šæ¬¡å®ç°ã€‚
ä½¿ç”¨ GraphQL ç®€åŒ–å…³è”å¯¹è±¡æŸ¥è¯¢ã€‚</p><pre><code class="language-graphql">object User {
  id: Int
  name: String
  lables: Label[] # -&gt; select * from lables where target_id = source.id and target_type = &#x27;User&#x27;
}
object Article {
  id: Int
  title: String
  lables: Label[] # -&gt; select * from lables where target_id = source.id and target_type = &#x27;Article&#x27;
}
object Lable {
  name: String
  color: LableColor
}
object LableColor {
  color: String
}
</code></pre><p>åœ¨æŸ¥è¯¢æ—¶å³å¯ä¸€æ¬¡æ€§æŸ¥è¯¢ï¼Œè€Œä¸”å¢åŠ é¢å¤–çš„å…³è”ä¹Ÿç›¸å¯¹ç®€å•ã€‚</p><pre><code class="language-graphql">user:User{
  name
  lables: {
    name
    color: {
      color
    }
  }
}
article:Article {
  title
  labels: {
    name
  }
}
</code></pre><h3>ç½‘å…³æ•´åˆæœåŠ¡</h3><ul><li>å‡è®¾æœ‰ä¸€ä¸ª å¤–éƒ¨çš„ é‚®ä»¶æœåŠ¡ï¼Œç°åœ¨éœ€è¦åœ¨è·å–ç”¨æˆ·æ—¶åŒæ—¶è¿”å›é‚®ä»¶æ•°é‡</li><li>æ­¤æ—¶å¯ä»¥é€šè¿‡ç½‘å…³å°†è¯¥æœåŠ¡æ•´åˆåˆ°ç°æœ‰çš„ GraphQL æœåŠ¡ä¸­</li></ul><pre><code class="language-graphql">object User {
  id: Int
  name: String # è¯¥å­—æ®µç”±å®é™…åç«¯å¤„ç†
  emailCount: Int # è¯¥å­—æ®µç”±ç½‘å…³å±‚è¿›è¡Œå¤„ç†
}
</code></pre><h2>æ€»ç»“</h2><p>éœ€è¦ GraphQL çš„ç†ç”±å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯å½“åç«¯çš„æŸ¥è¯¢ä»£ç å†™çš„ â€œå¾ˆçƒ¦â€ çš„æ—¶å€™ï¼Œéœ€è¦ä»ä¸­è§£è„±å‡ºæ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€‰æ‹©ä½¿ç”¨ GraphQLï¼Œç»™å‰ç«¯æ›´å¤§çš„é€‰æ‹©å’Œæ§åˆ¶æƒã€‚</p><p>:::tip ä½¿ç”¨æ³¨æ„äº‹é¡¹</p><ul><li>GraphQL æœ¬èº«å°±åŒ…å«äº†æ–‡æ¡£<ul><li>ä¸åƒ REST è¿˜è¦ç»´æŠ¤ Swagger/OpenAPI</li></ul></li><li>å‰åç«¯å°½é‡é€‰æ‹©æ”¯æŒç”Ÿæˆ GraphQL çš„ æ–¹å¼/æ¡†æ¶/å·¥å…·</li><li>ç”ŸæˆåŒºåˆ†ä¸º å…ˆ Schema æˆ– å…ˆ Entity - çœ‹æƒ…å†µæŒ‰éœ€</li><li>å‰ç«¯ä½¿ç”¨ TypeScript èƒ½å¤Ÿåˆ©ç”¨ GraphQL Schema ç±»å‹ä¿¡æ¯</li><li>æœ€å¥½æ˜¯é¢å¤–æä¾› Entity Schema/Metadata/JSONSchema ç»™å‰ç«¯<ul><li>é‡æ•°æ®åœºæ™¯å‰ç«¯ç»„ä»¶å¯ç›´æ¥ç”Ÿæˆ</li><li>å‰ç«¯å¯æŒ‰ç…§ Schema ç”ŸæˆæŸ¥è¯¢</li></ul></li></ul><p>:::</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[AlpineLinux å®‰è£… Xfce æ¡Œé¢]]></title>
        <id>alpinelinux-setup-xfce</id>
        <link href="https://wener.me/story/alpinelinux-setup-xfce"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[å‡è®¾å·²ç»æœ‰ä¸€ä¸ªåŸºç¡€å¯ç”¨çš„ AlpineLinux, å¦‚æœæ²¡æœ‰å¯å‰å¾€ wenerme/alpine-image ä¸‹è½½æˆ–è‡ªè¡Œåˆ¶ä½œ]]></summary>
        <content type="html"><![CDATA[<blockquote><p>å‡è®¾å·²ç»æœ‰ä¸€ä¸ªåŸºç¡€å¯ç”¨çš„ AlpineLinux, å¦‚æœæ²¡æœ‰å¯å‰å¾€ <a href="https://github.com/wenerme/alpine-image">wenerme/alpine-image</a> ä¸‹è½½æˆ–è‡ªè¡Œåˆ¶ä½œ</p></blockquote><h2>setup xorg</h2><p>å®‰è£… X server å’ŒåŸºç¡€ç¡¬ä»¶é©±åŠ¨</p><pre><code class="language-bash"># xfce + xorg
setup-xorg-base xfce4 xfce4-terminal dbus-x11 sudo

# xorg è¾“å…¥è®¾å¤‡
apk add xf86-input-mouse xf86-input-keyboard kbd

# Intel èŠ¯ç‰‡é›†æˆæ˜¾å¡
apk add xf86-video-intel
# AMD æ˜¾å¡
apk add xf86-video-amdgpu
# QEMU
# apk add xf86-video-qxl
# å¦‚æœä»¥ä¸Šéƒ½ä¸æ”¯æŒåˆ™è€ƒè™‘ä½¿ç”¨ framebuffer
# apk add xf86-video-fbdev
</code></pre><p>æ­¤æ—¶å·²ç»å¯ä»¥è¿›å…¥ xfce æ¡Œé¢, æ²¡æœ‰ç™»é™†ç•Œé¢, è¿›å…¥ç•Œé¢åå¯å³ä¸Šè§’é€€å‡ºç™»é™†æˆ–è€… <code>Ctrl+Alt+F1</code> æ¥åˆ‡æ¢å›å‘½ä»¤è¡Œä¼šè¯ã€‚</p><pre><code class="language-bash"># é€šè¿‡ xorg æä¾›çš„ startx å¯åŠ¨
startx
# æˆ–è€…æŒ‡å®šå¯åŠ¨ xfce4
startxfce4
</code></pre><h2>setup lightdm</h2><p>å®‰è£… lightdm åå¯ä»¥å¯ä»¥é€šè¿‡è´¦å·å¯†ç ç™»é™†, ä¹Ÿå¯ä»¥è¿œç¨‹ VNC è¿›å…¥ xfce ä¼šè¯ã€‚</p><pre><code class="language-bash">apk add lightdm-gtk-greeter

# å¦‚æœæ²¡å¯åŠ¨åˆ™éœ€è¦æå‰å¼€å¯
rc-service dbus start
rc-update add dbus

# æ·»åŠ é root ç”¨æˆ· admin å¯†ç  admin - ä¸å°‘åº”ç”¨éœ€è¦é root ç”¨æˆ·
adduser -d admin
echo admin:admin | chpasswd
echo &#x27;admin ALL=(ALL) NOPASSWD: ALL&#x27; &gt;&gt; /etc/sudoers

# å¼€æœºè¿›å…¥ç™»é™†ç•Œé¢
rc-update add lightdm
# ç«‹å³å¯åŠ¨ lightdm è¿›è¡Œç™»é™†
rc-service lightdm start
</code></pre><h2>setup xfce</h2><p>å®‰è£…å¸¸ç”¨çš„åŒ…</p><pre><code class="language-bash"># é»˜è®¤æ— æ³•æ˜¾ç¤ºä¸­æ–‡å­—ç¬¦
apk add noto-font-cjk

# å…è®¸é root é€šè¿‡ fuse è®¿é—®è®¾å¤‡
apk add gvfs-fuse gvfs-smb
rc-service fuse start
rc-update add fuse

# è‡ªåŠ¨æŒ‚è½½ å¤–éƒ¨è®¾å¤‡
apk add thunar-volman udisks2
# éƒ¨åˆ†è®¾å¤‡éœ€è¦é¢å¤–çš„åŒ…
# gvfs-mtp - MTP - åª’ä½“æ’­æ”¾å™¨å’Œç§»åŠ¨è®¾å¤‡
# gvfs-gphoto2 - PTP - ç›¸æœºå’Œç§»åŠ¨è®¾å¤‡
# gvfs-afc - è‹¹æœç§»åŠ¨è®¾å¤‡

# æ–‡ä»¶ç®¡ç†å™¨æ”¯æŒå‹ç¼©å’Œè§£å‹
apk add thunar-archive-plugin
apk add file-roller # thunar-archive-plugin æ”¯æŒçš„ç®¡ç†å™¨
</code></pre><p>å®‰è£…äº†ç›¸å…³æ’ä»¶åæœ€å¥½é€€å‡ºä¼šè¯é‡æ–°ç™»é™†ç¡®ä¿ç”Ÿæ•ˆã€‚</p><h2>åº”ç”¨</h2><pre><code class="language-bash"># å±ä¿, ä»»åŠ¡ç®¡ç†å™¨
apk add xfce4-screensaver xfce4-taskmanager

# è°·æ­Œæµè§ˆå™¨ - ä¹Ÿå¯ä»¥é€šè¿‡ flatpak å®‰è£…
apk add chromium
# ç«ç‹æµè§ˆå™¨
# apk add firefox-esr
</code></pre><h3>flatpak</h3><p>Linux å› ä¸ºå‘å¸ƒç‰ˆå¤ªå¤§äº†ï¼Œåº”ç”¨åˆ†å‘æ¯”è¾ƒæ··ä¹±ï¼Œä¸”ä¸å°‘åº”ç”¨å¹¶ä¸ç›´æ¥æ”¯æŒ muslï¼Œä½¿ç”¨ flatpak æ‰“åŒ…çš„åº”ç”¨å¯é¿å…è¿™äº›é—®é¢˜ã€‚</p><pre><code class="language-bash">apk add flatpak
flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo

# å®‰è£…
flatpak install flathub com.visualstudio.code
# å¯åŠ¨
flatpak run com.visualstudio.code
</code></pre><p><strong>å¸¸ç”¨åº”ç”¨</strong></p><table><thead><tr><th>id</th><th>name</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>com.visualstudio.code</td><td>VSC</td><td>ç¼–è¾‘å™¨</td></tr><tr><td>om.vscodium.codium</td><td>Codium</td><td>ç¼–è¾‘å™¨</td></tr><tr><td>org.chromium.Chromium</td><td>Chromium</td><td>æµè§ˆå™¨</td></tr><tr><td>org.mozilla.firefox</td><td>Firefox</td><td>æµè§ˆå™¨</td></tr><tr><td>org.telegram.desktop</td><td>Telegram</td><td>å³æ—¶èŠå¤©</td></tr><tr><td>com.valvesoftware.Steam</td><td>Steam</td><td>æ¸¸æˆ</td></tr><tr><td>org.mozilla.Thunderbird</td><td>Thunderbird</td><td>é‚®ä»¶</td></tr><tr><td>org.filezillaproject.Filezilla</td><td>Filezilla</td><td>æ–‡ä»¶</td></tr></tbody></table><h3>AppImage</h3><p>ä¸é€šè¿‡ flatpak éœ€è¦å®‰è£…ï¼ŒAppImage æ˜¯å°è£…å¥½çš„ä¸€ä½“åŒ–åº”ç”¨ï¼Œç±»ä¼¼å®¹å™¨ï¼Œç±»ä¼¼ macOS åº”ç”¨ã€‚
ä½†ç›®å‰ç”±äº glibc å…¼å®¹é—®é¢˜ Alpine æ— æ³•è¿è¡Œ AppImage å‚è§ <a href="https://github.com/AppImage/AppImageKit/issues/1015">AppImage/AppImageKit#1015</a>ã€‚</p><p><strong>å·²çŸ¥æä¾› AppImage çš„åº”ç”¨</strong></p><ul><li>Jetbrain Toolbox</li><li>Lens - Kubernetes IDE</li></ul><h2>å…¶ä»–æœåŠ¡</h2><ul><li>xrdp - RDP æœåŠ¡ç«¯ - æ”¯æŒ Windows ç›´æ¥è¿œç¨‹ç™»é™†</li><li>gvncviewer - VNC å®¢æˆ·ç«¯</li></ul><h1>FAQ</h1><h2>xfce æ”¯æŒé«˜åˆ†è¾¨ç‡</h2><pre><code class="language-bash"># ä¸¤å€ç¼©æ”¾
# Settings Manager &gt; Appearance &gt; Settings &gt; Window Scaling
xfconf-query -c xsettings -p /Gdk/WindowScalingFactor -s 2
# è°ƒæ•´ä¸»é¢˜ä¸º é»˜è®¤ xhdpi
# Settings Manager &gt; Window Manager &gt; Style
xfconf-query -c xfwm4 -p /general/theme -s Default-xhdpi
</code></pre><h2>æŸ¥çœ‹å½“å‰æ˜¾å¡å’Œå£°å¡ä¿¡æ¯</h2><pre><code class="language-bash">apk add inxi
inxi -AG
</code></pre><h2>kernel: i915 0000:00:02.0: <!-- -->[drm]<!-- --> <em>ERROR</em> CPU pipe A FIFO underrun</h2><p>å¦‚æœè¯¥é”™è¯¯å¯¼è‡´é—ªçƒå¯æ·»åŠ å¯åŠ¨å‚æ•°é¿å… <code>i915.enable_psr=0</code></p><blockquote><p><a href="https://wiki.archlinux.org/index.php/Intel_graphics#Screen_flickering">Intel graphics#Screen flickering</a></p><p>å¯èƒ½ç”±äº Intel é›†æˆæ˜¾å¡çš„èŠ‚èƒ½åŠŸèƒ½å¯¼è‡´</p></blockquote><h2>VNC è¿œç¨‹æ¡Œé¢</h2><pre><code class="language-bash">apk add x11vnc

# å¯åŠ¨æœåŠ¡ç«¯è®¿é—®å·²æ‰“å¼€ä¼šè¯
x11vnc -display :0 -auth /var/run/lightdm/root/\:0
# ç„¶åè®¿é—® vnc://&lt;IP&gt;:5900 å³å¯

# ä¸é€€å‡º
x11vnc -display :0 -auth /var/run/lightdm/root/\:0 --loop

# è®¿é—®æ—¶åˆ›å»ºæ–°çš„ä¼šè¯
# ç¡®ä¿ init èƒ½å¯åŠ¨
echo &quot;exec startxfce4&quot; &gt;&gt; ~/.xinitrc
apk add xvfb
x11vnc -ncache_cr -display :1 -auth /var/run/lightdm/root/\:1 --create

# ä¸è­¦å‘Šæ²¡æœ‰è®¾ç½®å¯†ç 
echo nopw &gt;&gt; ~/.x11vncrc

# å¯è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨
# x11vnc -create -xkb -noxrecord -noxfixes -noxdamage -display :0 -auth /var/run/lightdm/root/:0 -rfbauth /etc/x11vnc.pass -rfbport 5900

# ç™»é™†ä¹‹å‰å¼€å¯ VNC
# x11vnc -auth guess -display :0
</code></pre><blockquote><p>å¦‚æœæœåŠ¡å¸¸å¼€ï¼Œå»ºè®®è®¾ç½®å¯†ç </p></blockquote><h1>å‚è€ƒ</h1><ul><li>AlpineLinux <a href="https://wiki.alpinelinux.org/wiki/Xfce_Setup">Xfce Setup</a></li><li><a href="https://wiki.archlinux.org/index.php/HiDPI#Xfce">HiDPI#Xfce</a></li><li>flatpak <a href="https://flathub.org/apps">åº”ç”¨åˆ—è¡¨</a></li><li>archlinux <a href="https://wiki.archlinux.org/index.php/x11vnc">x11vnc</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è®°å½•ä¸€æ¬¡ä¿®å¤ init è„šæœ¬çš„ç»å†]]></title>
        <id>fix-init-script</id>
        <link href="https://wener.me/story/fix-init-script"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[é—®é¢˜äº§ç”Ÿè¿‡ç¨‹]]></summary>
        <content type="html"><![CDATA[<h2>é—®é¢˜äº§ç”Ÿè¿‡ç¨‹</h2><p>ç”±äºå®šåˆ¶åŒ–è¿‡ <code>/usr/share/mkinitfs/initramfs-init</code> è„šæœ¬ï¼Œåœ¨å‡çº§å¤§ç‰ˆæœ¬åï¼Œè¯¥æ–‡ä»¶è¢«è¦†ç›–ï¼Œå¯¼è‡´ç”Ÿæˆçš„ initramfs æ— æ³•å¯åŠ¨ç³»ç»Ÿã€‚</p><p>æ­£å¸¸æƒ…å†µå‡çº§ <code>/etc</code> ä¸‹ä¼šäº§ç”Ÿ <code>.apk-new</code> åç¼€æ–‡ä»¶é¿å…å‡çº§è¦†ç›–ï¼Œä½†ç”±äºæ˜¯ <code>/usr/share</code> ä¸‹æ–‡ä»¶ï¼Œå› æ­¤å¯¼è‡´è¦†ç›–ã€‚</p><h2>éš¾ç‚¹</h2><ul><li>ç³»ç»Ÿä½¿ç”¨é™æ€ IP<ul><li>éœ€è¦æä¾›ç›¸åŒ IP æ®µåœ°å€æ‰èƒ½è¿›è¡Œ SSH</li><li>å‡è®¾ IP ä¸º 192.168.66.99/22</li></ul></li><li>ç³»ç»Ÿåœ¨ç¡¬ç›˜ä¸Š - M2<ul><li>æ— æ³•ç›´æ¥åœ¨å…¶ä»–ç³»ç»Ÿä¸Šè¿›è¡Œä¿®å¤</li><li>é€šè¿‡æä¾› U ç›˜ ç³»ç»Ÿåœ¨åŸåœ°æ¢å¤</li></ul></li><li>root ç›˜æœ‰ luks åŠ å¯†<ul><li>ä¾èµ–ç¡¬ä»¶ç¯å¢ƒ</li><li>QEMU å¯åŠ¨æ— æ³•æ¨¡æ‹Ÿç›¸åŒç¯å¢ƒ</li><li>éœ€è¦æ‰‹åŠ¨è¾“å…¥å¯†é’¥è¿›è¡ŒæŒ‚è½½</li></ul></li><li>root å¯†ç ä¸º UUID<ul><li>æå…¶éš¾è¾“å…¥</li><li>ä¸”éœ€è¦è¾“å…¥å¤šæ¬¡ï¼Œå› æ­¤é€‰æ‹©ç½‘ç»œæ‰“é€šé€šè¿‡ SSH ç™»é™†</li></ul></li></ul><h2>æ“ä½œè¿‡ç¨‹</h2><h3>å‡†å¤‡è™šæ‹Ÿæœºå’Œç¯å¢ƒ</h3><pre><code class="language-bash"># QEMU è™šæ‹Ÿæœº
apk add qemu-system-x86_64

# æ¡¥æ¥æ¨¡æ‹Ÿç½‘ç»œç¯å¢ƒ - ä½¿ç”¨ç›¸åŒ IP æ®µè®¿é—®
ip li add vmbr0 type bridge
ip li set vmbr0 up
# æ¡¥æ¥ä»¥ä¾¿äºè®¿é—® 192.168.66.99/22
ip addr add 192.168.66.1/22 dev vmbr0

# å…è®¸ qemu æ¡¥æ¥ç½‘å¡
echo &#x27;allow vmbr0&#x27; &gt;&gt; /etc/qemu/bridge.conf
</code></pre><h3>å¯åŠ¨ç³»ç»Ÿ</h3><pre><code class="language-bash"># æä¾› vnc æ–¹ä¾¿æŸ¥çœ‹
# -curses æ–¹ä¾¿è¾“å…¥ luks å¯†é’¥
# æ¡¥æ¥ vmbr0
qemu-system-x86_64 -accel kvm -m 2G \
  -vnc 0.0.0.0:1 /dev/sda \
  -netdev bridge,br=vmbr0,id=n1 -device virtio-net,netdev=n1 \
  -curses
</code></pre><p>å¯åŠ¨åæ— æ³•è¿›å…¥ç³»ç»Ÿï¼Œ/sysroot æŒ‚è½½å¤±è´¥ï¼Œå‡ºç°ä¿®å¤ shell</p><pre><code>mount: mounting /dev/sda2 on /sysroot failed: Invalid argument
Mounting root failed.
initramfs emergency recovery shell launched. Type &#x27;exit&#x27; to continue boot
sh: can&#x27;t access tty; job control turned off
/ #
</code></pre><p>æ­¤æ—¶æ‰‹åŠ¨æŒ‚è½½ /sysroot</p><pre><code class="language-bash">cryptsetup open /dev/sda2 cryptroot
# ç²˜è´´å¯†é’¥

# æŒ‚è½½ sysroot
mount /dev/mapper/cryptroot /sysroot

# é€€å‡º shell æ­£å¸¸è¿›å…¥ç³»ç»Ÿ
exit
</code></pre><h3>ä¿®å¤ init è„šæœ¬</h3><pre><code class="language-bash"># å°†å‡†å¤‡å¥½çš„ init è„šæœ¬ç›´æ¥è¦†ç›–
rsync --rsync-path=&#x27;sudo rsync&#x27; --no-owner initramfs-init admin@192.168.66.99:/usr/share/mkinitfs/initramfs-init

# è¿›å…¥è™šæ‹Ÿæœº
ssh admin@192.168.66.99

# ä»æ–°ç”Ÿæˆ initramfs
mkinitfs

# ä¸ºå®‰å…¨èµ·è§ï¼ŒéªŒè¯è„šæœ¬æ­£ç¡®
mkdir -p /tmp/init
cd /tmp/init
# è§£å‹åˆ°å½“å‰ç›®å½•
zcat &lt; /boot/initramfs-lts | cpio -idmv
# ç¡®ä¿æ˜¯æ­£ç¡®çš„è„šæœ¬
cat init
</code></pre><h3>é¿å…å†æ¬¡å‡ºç°é—®é¢˜</h3><p>/etc ä¸‹é…ç½®ä¸ä¼šè¢«è¦†ç›–ï¼Œlbu è¿˜èƒ½å¤‡ä»½ï¼Œå› æ­¤å°† init è„šæœ¬æ”¾åˆ° etcï¼Œä¿®æ”¹ mkinitfs é…ç½®æŒ‡å‘æœŸæœ›çš„è„šæœ¬ã€‚</p><p><a href="https://github.com/alpinelinux/mkinitfs/blob/master/mkinitfs.in">mkinitfs</a> çš„é…ç½®æ–‡ä»¶ä½äº <code>/etc/mkinitfs/mkinitfs.conf</code>, é»˜è®¤é…ç½® features, è¯¥æ–‡ä»¶ä¼šè¢«è„šæœ¬ç›´æ¥ source (<a href="https://github.com/alpinelinux/mkinitfs/blob/a4d6120aa949cdb6d18eb8241c4706f96685a359/mkinitfs.in#L237">mkinitfs.in#L237</a>), ä»è„šæœ¬å¯çœ‹å‡ºé…ç½®å˜é‡ä¸º init.</p><pre><code class="language-bash">cp /usr/share/mkinitfs/initramfs-init /etc/mkinitfs/initramfs-init
echo &quot;init=/etc/mkinitfs/initramfs-init&quot; &gt;&gt; /etc/mkinitfs/mkinitfs.conf
</code></pre><h2>æ€»ç»“</h2><p>ä¸è¦ä¿®æ”¹ <code>/usr/share</code> ä¸‹çš„é»˜è®¤é…ç½®ï¼Œå°†é…ç½®æ”¾åˆ° <code>/etc</code> ä¸‹ï¼Œå®‰å…¨å¯é ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ lbu å¤‡ä»½ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[OpenVox VoxStack ç½‘å…³åˆ†æ]]></title>
        <id>openvox-gw-inside</id>
        <link href="https://wener.me/story/openvox-gw-inside"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[å› ä¸ºæ·˜åˆ°ä¸€ä¸ªäºŒæ‰‹ OpenVox è¯­éŸ³ç½‘å…³ï¼Œå°±å¥½å¥‡"é‡Œé¢"é•¿ä»€ä¹ˆæ ·ã€‚]]></summary>
        <content type="html"><![CDATA[<p>å› ä¸ºæ·˜åˆ°ä¸€ä¸ªäºŒæ‰‹ OpenVox è¯­éŸ³ç½‘å…³ï¼Œå°±å¥½å¥‡&quot;é‡Œé¢&quot;é•¿ä»€ä¹ˆæ ·ã€‚</p><p>Let&#x27;s find out.</p><h2>VS-AGU-E2M0800</h2><ul><li>VS - VoxStack ç³»åˆ— - æ¨¡å—åŒ–ï¼Œçƒ­æ’æ‹”</li><li>AGU - Analog Gateway - æ¨¡æ‹Ÿç½‘å…³</li><li>è½¯ä»¶ 1.1.10</li><li>ç¡¬ä»¶ 1.0.0</li></ul><p>ä¸€å¼ å¡ä¸¤ä¸ªæ¨¡å—</p><ul><li>E2M8HJ9DJ68P - VS æ¨¡å—<ul><li>M83241G13 - Freescale Semiconductor - NXP<ul><li>Telecom Interface ICs C1K-LS102M 450MHz</li><li>IC C1K 450MHZ VOIP 448BGA</li></ul></li></ul></li><li>FXS-420 v1.2 - FS42HJ1KK4UY5<ul><li>S13215-FM</li></ul></li><li>FXO-400 v1.4 - FXODHJO2XT6L<ul><li>3019-FT 1718FF L0L4</li><li>Si3050-FT 1708EM F1Q5</li></ul></li></ul><h2>Web ç®¡ç†ç•Œé¢</h2><p>ç•Œé¢ç±»ä¼¼äºå®˜æ–¹æ¼”ç¤º http://admin:<a href="mailto:admin@demo.openvox.cn">admin@demo.openvox.cn</a>:65327</p><p>é€šè¿‡å¼€å¯ ssh, è´¦å·åè®¾ç½®ä¸º super å¯è·å–åˆ° root æƒé™ï¼Œé»˜è®¤ SSH ç«¯å£ 12345ã€‚</p><h2>ç¡¬ä»¶</h2><blockquote><p>æœªå¼€ç®±ï¼Œä¸ä¸€å®šå‡†ç¡®ã€‚</p></blockquote><table><thead><tr><th>-</th><th>è§„æ ¼</th></tr></thead><tbody><tr><td>å†…å­˜</td><td>120MB</td></tr><tr><td>CPU</td><td>ARMv6-compatible processor rev 5 (v6l)</td></tr></tbody></table><p><strong>Comcerto 1000 M83263G</strong></p><ul><li>ARM1136 - 2 Core, 650MHz</li><li>æ•è¿…ç§‘æŠ€/Mindspeed Technologies èŠ¯ç‰‡</li><li>Mindspeed ä¸»è¦æä¾› VoIP é¢†åŸŸè§£å†³æ–¹æ¡ˆ - DSP, LTE, Transcede</li><li>VoIP, Security Engine, PCIe 2, RGMII 2</li><li>SDRAM 16/32 bit DDR2-800/667/533</li><li>L1 ç¼“å­˜ 2x(64K D$/64K I$)</li><li>VoIP èƒ½åŠ›<ul><li>Field hardened voice features</li><li>World class acoustic echo cancellation technology</li><li>Narrow and wideband codecs</li><li>G.711, G.729, G.722, G.723.1, iLBC, T.38, G.729.1, G.722.2, AMR, AMR Wideband</li><li>Enhanced echo canceller, CID-I/II, VAD/CNG, AGC</li><li>3-Way conferencing</li></ul></li><li>TDM/PCM interface for glue-less VoIP support</li><li>2009 å¹´</li></ul><p><strong>/proc/cpuinfo</strong></p><pre><code>Processor   : ARMv6-compatible processor rev 5 (v6l)
BogoMIPS    : 648.80
Features    : swp half thumb fastmult edsp java
CPU implementer : 0x41
CPU architecture: 6TEJ
CPU variant : 0x1
CPU part    : 0xb36
CPU revision    : 5

Hardware    : Comcerto 1000 (EVM)
Revision    : 0000
Serial      : 0000000000000000
</code></pre><h2>ç³»ç»Ÿç¯å¢ƒ</h2><blockquote><p>åº•å±‚åŸºäº OpenWrt</p></blockquote><table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td>uname -a</td><td>Linux General 2.6.33.5 #4 Tue Aug 29 20:38:01 CST 2017 armv6l unknown</td></tr><tr><td>Busybox</td><td>1.4.2</td></tr><tr><td>Asterisk</td><td>1.8.20.0 / 1.8.X å‘å¸ƒäº 2010-10-21 EOL 2015-10-21</td></tr><tr><td>dahdi</td><td>2.6.0</td></tr><tr><td>dcra</td><td>0.1.0</td></tr></tbody></table><blockquote><p>Busybox applet</p><p>[, [[, arping, ash, awk, awx, basename, bunzip2, bzcat, cat, chgrp, chmod, chown, chroot, clear, cp, crond, crontab, cut, date, df, dirname, dmesg, du, echo, egrep, env, expr, false, fgrep, find, free, getty, grep, gunzip, gzip, halt, head, hostid, hostname, httpd, id, ifconfig, init, insmod, ipkg, kill, killall, killall5, klogd, length, less, ln, lock, logger, login, logread, ls, lsmod, md5sum, mdev, mesg, mkdir, mkfifo, mknod, mktemp, mount, mv, nc, netmsg, netstat, nice, nslookup, passwd, pidof, ping, ping6, pivot_root, poweroff, printf, ps, pwd, rdate, reboot, renice, reset, rm, rmdir, rmmod, route, sed, seq, sh, sleep, sort, strings, stty, switch_root, sync, sysctl, syslogd, tail, tar, tee, telnet, test, time, top, touch, tr, traceroute, true, tty, udhcpc, umount, uname, uniq, uptime, vconfig, vi, watchdog, wc, wget, which, xargs, yes, zcat</p></blockquote><p><strong>cmdline</strong></p><pre><code>init=/etc/preinit ubi.mtd=4,2048 ubi.block=0,0 root=/dev/ubiblk0_0 ro rootfstype=squashfs hwaddress=eth0,a0:98:05:0e:04:8e hwaddress=eth2,00:03:7F:0B:00:01 console=ttyS0,115200 mtdparts=comcertonand:256k(uboot),128k(env),128K(param),4M(kernel),20M(root),4M(ekernel),20M(eroot),16M(config),-(system) partno=M83263G fppmode=1
</code></pre><p><strong>å†…æ ¸æ¨¡å—</strong></p><table><thead><tr><th>Module</th><th>Size</th><th>Used by</th></tr></thead><tbody><tr><td>wctdmc1k</td><td>30096</td><td>16</td></tr><tr><td>dcra</td><td>8524</td><td>1 wctdmc1k</td></tr><tr><td>dahdi</td><td>185948</td><td>17 wctdmc1k</td></tr><tr><td>krtpd</td><td>148520</td><td>0</td></tr><tr><td>csmencaps</td><td>14740</td><td>2</td></tr><tr><td>led_key</td><td>2500</td><td>4</td></tr></tbody></table><ul><li>dahdi<ul><li>wctdmc1k - OpenVox æ¨¡æ‹Ÿä¿¡å·å¤„ç†æ¨¡å—<ul><li>WCTDMC1K è®¾å¤‡é©±åŠ¨ - Mindspeed å¼€å‘çš„èŠ¯ç‰‡é©±åŠ¨</li></ul></li><li>dcra - opvx_dcra - Access Dahdi Channel Registers through procfs</li></ul></li><li>csmencaps - åº”è¯¥æ˜¯ FX å¤„ç†ç›¸å…³æ¨¡å—</li><li>led_key - åº”è¯¥æ˜¯é©±åŠ¨é¢æ¿ led çš„</li><li>krtpd - Kernel RTP proxy for Asterisk - openvox å¼€å‘<ul><li>ç±»ä¼¼åŠŸèƒ½å¼€æº <a href="https://github.com/sipwise/rtpengine">sipwise/rtpengine</a></li></ul></li></ul><pre><code>filename:       /lib/modules/2.6.33.5/dcra.ko
license:        GPL v2
alias:          opvx_dcra
description:    Access Dahdi Channel Registers through procfs
parmtype:       maxchan:int
parmtype:       debug:int
depends:
vermagic:       2.6.33.5 mod_unload ARMv6
</code></pre><p><strong>ä¸»è¦ç”¨æˆ·è¿›ç¨‹</strong></p><table><thead><tr><th>proc</th><th>desc</th></tr></thead><tbody><tr><td>/bin/php /my_tools/keeper</td><td></td></tr><tr><td>/bin/php /my_tools/logfile_monitor</td><td></td></tr><tr><td>/my_tools/checkasteriskstat</td><td></td></tr><tr><td>/my_tools/ntpclient</td><td>æ—¶é—´åŒæ­¥</td></tr><tr><td>/my_tools/resetkey</td><td></td></tr><tr><td>/my_tools/sys_restore</td><td></td></tr><tr><td>/my_tools/watchdog</td><td></td></tr><tr><td>/usr/sbin/crond</td><td>å®šæ—¶ä»»åŠ¡</td></tr><tr><td>/webservice/service</td><td></td></tr><tr><td>asterisk -g</td><td>asterisk ä¸»è¿›ç¨‹</td></tr><tr><td>dropbear -p 12345</td><td>SSH å®ˆæŠ¤è¿›ç¨‹</td></tr><tr><td>lighttpd -f /etc/lighttpd.conf -m /usr/lib/lighttpd</td><td>Web æœåŠ¡</td></tr></tbody></table><h3>ç³»ç»Ÿç›®å½•</h3><ul><li>/www -&gt; /tmp/web/www</li><li>/tmp/web/www - cgi-bin css images index.html js lang - ç®¡ç†åº”ç”¨</li><li>/data/<ul><li>info/</li><li>log/<ul><li>cdr.db - SQLite é€šè¯è®°å½•</li><li>sys-log - ç³»ç»Ÿæ—¥å¿—</li><li>update.txt - æ›´æ–°æ—¥å¿—</li></ul></li><li>sms/</li></ul></li><li>/my_tools/ - ç³»ç»Ÿå·¥å…·</li><li>/webservice/service - æœåŠ¡</li><li>/version<ul><li>version - ç³»ç»Ÿç‰ˆæœ¬</li><li>build_time - æ„å»ºæ—¶é—´</li><li>cfg_ver_list - é…ç½®ç‰ˆæœ¬ - å†…å®¹ <code>1.1.10</code></li><li>def_cfg.tar.gz - asterisk é…ç½®å¤‡ä»½</li><li>openvpn.sample_configs.tar.gz</li><li>sip_bendpoints.sample_configs.tar.gz</li></ul></li></ul><p><strong>ç³»ç»ŸæŒ‚è½½</strong></p><table><thead><tr><th>dev</th><th>size</th><th>path</th><th>fstype</th></tr></thead><tbody><tr><td>/dev/ubiblk0_0</td><td>16.1M</td><td>/</td><td>rootfs, squashfs</td></tr><tr><td>none</td><td>57.5M</td><td>/tmp</td><td>tmpfs</td></tr><tr><td>tmpfs</td><td>512.0k</td><td>/dev</td><td>tmpfs</td></tr><tr><td>/dev/mtdblock7</td><td>16.0M</td><td>/etc/asterisk</td><td>jffs2</td></tr><tr><td>/dev/mtdblock8</td><td>63.5M</td><td>/data</td><td>jffs2</td></tr></tbody></table><p><strong>mtd åˆ†åŒº</strong></p><table><thead><tr><th>mtd</th><th>fs</th><th>range</th><th>name</th><th>size</th><th>mount</th></tr></thead><tbody><tr><td>mtd0</td><td></td><td>0x000000000000-0x000000040000</td><td>uboot</td><td>256k</td><td></td></tr><tr><td>mtd1</td><td></td><td>0x000000040000-0x000000060000</td><td>env</td><td>128k</td><td></td></tr><tr><td>mtd2</td><td></td><td>0x000000060000-0x000000080000</td><td>param</td><td>128K</td><td></td></tr><tr><td>mtd3</td><td></td><td>0x000000080000-0x000000480000</td><td>kernel</td><td>4M</td><td></td></tr><tr><td>mtd4</td><td>ubi0</td><td>0x000000480000-0x000001880000</td><td>root</td><td>20MB</td><td>/</td></tr><tr><td>mtd5</td><td></td><td>0x000001880000-0x000001c80000</td><td>ekernel</td><td>4M</td><td></td></tr><tr><td>mtd6</td><td></td><td>0x000001c80000-0x000003080000</td><td>eroot</td><td>20M</td><td></td></tr><tr><td>mtd7</td><td>jffs2</td><td>0x000003080000-0x000004080000</td><td>config</td><td>16M</td><td>/etc/asterisk</td></tr><tr><td>mtd8</td><td>jffs2</td><td>0x000004080000-0x000008000000</td><td>system</td><td>63.5MB</td><td>/data</td></tr></tbody></table><p><strong>v1.1.23</strong></p><p>ç‰ˆæœ¬å˜åŒ–åº•å±‚ç³»ç»Ÿå’Œè½¯ä»¶å‡æ— å˜åŒ–ï¼Œå˜åŒ–çš„ä¸»è¦æ˜¯ php ä»£ç å’Œéƒ¨åˆ†é…ç½®ã€‚</p><table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td>uname -a</td><td>Linux General 2.6.33.5 #23 Mon Oct 14 17:12:50 CST 2019 armv6l unknown</td></tr></tbody></table><h3>å®‰è£…åŒ…</h3><blockquote><p>ipkg list</p></blockquote><table><thead><tr><th>pkg</th><th>ver</th></tr></thead><tbody><tr><td>base-files-comcerto1000</td><td>14-unknown</td></tr><tr><td>busybox</td><td>1.4.2-1</td></tr><tr><td>cmm</td><td>7.00-5</td></tr><tr><td>cyclesoak</td><td>none-1</td></tr><tr><td>dropbear</td><td>0.49-1</td></tr><tr><td>ethtool</td><td>3-0</td></tr><tr><td>hotplug2</td><td>0.9-1</td></tr><tr><td>ip</td><td>2.6.23-1</td></tr><tr><td>kernel</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-csme</td><td>2.6.33.5+2.14.0-comcerto1000-1</td></tr><tr><td>kmod-fci</td><td>2.6.33.5+7.00-comcerto1000-1</td></tr><tr><td>kmod-fpp-csme</td><td>2.6.33.5+2.14.0-comcerto1000-1</td></tr><tr><td>kmod-fpp-driver</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-ipt-conntrack</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-ipt-core</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-matisse</td><td>1.00-0</td></tr><tr><td>kmod-nf-conntrack-netlink</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-nfnetlink</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>ldd</td><td>14</td></tr><tr><td>libc</td><td>2.7-14</td></tr><tr><td>libcli</td><td>1.9.3-1</td></tr><tr><td>libgcc</td><td>4.1.2-14</td></tr><tr><td>libgdbm</td><td>1.8.3-0</td></tr><tr><td>libgmp</td><td>4.2.1-1</td></tr><tr><td>libiptc</td><td>1.4.7-1</td></tr><tr><td>libncurses</td><td>5.2-8</td></tr><tr><td>libnfconntrack</td><td>0.0.100</td></tr><tr><td>libnfnetlink</td><td>1.0.0</td></tr><tr><td>libopenssl</td><td>0.9.8q-1</td></tr><tr><td>libpcap</td><td>1.1.1-2</td></tr><tr><td>libpopt</td><td>1.7-4</td></tr><tr><td>libpthread</td><td>2.7-14</td></tr><tr><td>librt</td><td>2.7-14</td></tr><tr><td>libstdcpp</td><td>4.1.2-14</td></tr><tr><td>libxtables</td><td>1.4.7-1</td></tr><tr><td>msp-firmware</td><td>2.6.33.5+3.00.11-comcerto1000-1</td></tr><tr><td>mtd</td><td>5</td></tr><tr><td>ntpclient</td><td>2003_194-2</td></tr><tr><td>openssl-util</td><td>0.9.8q-1</td></tr><tr><td>ppp</td><td>2.4.3-7</td></tr><tr><td>ppp-mod-pppoe</td><td>2.4.3-7</td></tr><tr><td>rp-pppoe-client</td><td>3.8-1</td></tr><tr><td>udevtrigger</td><td>106-1</td></tr><tr><td>vapi</td><td>2.14.0</td></tr><tr><td>zlib</td><td>1.2.3-3</td></tr></tbody></table><p><strong>/etc/ipkg.conf</strong></p><pre><code>/etc/ipkg.conf
src snapshots http://openwrt.org/downloads/snapshots/$S/packages
dest root /
dest ram /tmp
</code></pre><h3>ç³»ç»Ÿå·¥å…·/my_tools</h3><table><thead><tr><th>name</th><th>type</th><th>desc</th></tr></thead><tbody><tr><td>add_syslog</td><td>shell</td><td>log åˆ° syslog</td></tr><tr><td>addkey_client.sh</td><td>shell</td><td></td></tr><tr><td>addkey_server.sh</td><td>shell</td><td></td></tr><tr><td>astmanproxy</td><td></td><td>Asterisk Manager Proxy</td></tr><tr><td>checkAsteriskProc.sh</td><td>shell</td><td>æ£€æµ‹å¹¶å¯åŠ¨ dahdi å’Œ asterisk</td></tr><tr><td>checkCapture.sh</td><td>shell</td><td>dahdi åœæ­¢ dump ç»™å®š chanid</td></tr><tr><td>checkStartFinish.sh</td><td>shell</td><td>sleep 1000s é‡å¯</td></tr><tr><td>checkasteriskstat</td><td></td><td></td></tr><tr><td>cluster_mode</td><td>php</td><td>é…ç½®é›†ç¾¤æ¨¡å¼ - master, slave, standalone</td></tr><tr><td>cluster_slave</td><td></td><td>slave åº”ç”¨</td></tr><tr><td>cpuusage</td><td></td><td>CPU ä½¿ç”¨æƒ…å†µ - ç±»ä¼¼ vmstat</td></tr><tr><td>eth_server.conf</td><td></td><td></td></tr><tr><td>fetch</td><td></td><td>è§£å¯†å›ºä»¶</td></tr><tr><td>get_backport</td><td></td><td></td></tr><tr><td>gwping</td><td></td><td>eth ping å®¢æˆ·ç«¯</td></tr><tr><td>gwpingd</td><td></td><td>eth_server - eth_server.conf ä¸ºé…ç½®æ–‡ä»¶</td></tr><tr><td>if_monitor</td><td></td><td></td></tr><tr><td>keeper</td><td></td><td>ä¿æŒè¿›ç¨‹å­˜åœ¨ - ç±»ä¼¼ supervisor</td></tr><tr><td>krtpd_cli</td><td></td><td></td></tr><tr><td>led_key.ko</td><td>å†…æ ¸æ¨¡å—</td><td></td></tr><tr><td>logfile_monitor</td><td>php</td><td>æ—¥å¿—ç›‘æ§</td></tr><tr><td>lstast</td><td></td><td></td></tr><tr><td>net_tool</td><td></td><td>è·å–ç½‘å¡ä¿¡æ¯</td></tr><tr><td>ntpclient</td><td></td><td>NTP å®¢æˆ·ç«¯</td></tr><tr><td>play_all_led</td><td></td><td>æ‰€æœ‰ LED äº®</td></tr><tr><td>process_cdr</td><td></td><td>CDR å¤„ç†</td></tr><tr><td>readDeviceID</td><td></td><td></td></tr><tr><td>resetkey</td><td></td><td></td></tr><tr><td>restore_cfg_file</td><td></td><td>æ¢å¤ asterisk é…ç½®æ–‡ä»¶</td></tr><tr><td>safe_append_to_file</td><td></td><td></td></tr><tr><td>safe_reboot</td><td>shell</td><td>reboot</td></tr><tr><td>set_busytone.sh</td><td>shell</td><td>fxomon.conf busytone è®¾ç½®</td></tr><tr><td>set_config</td><td></td><td>é…ç½®æ–‡ä»¶æ“ä½œ</td></tr><tr><td>set_default</td><td></td><td></td></tr><tr><td>set_registers.sh</td><td>shell</td><td>æ³¨å†Œ dcra</td></tr><tr><td>sys_restore</td><td></td><td></td></tr><tr><td>unpack.sh</td><td>shell</td><td>ç”¨äºè§£å‹å›ºä»¶ - unzip, md5 checmsum, è§£å¯†, unzip</td></tr><tr><td>watchdog</td><td></td><td></td></tr><tr><td>web_language_init</td><td>php</td><td>åˆå§‹åŒ– web çš„è¯­è¨€</td></tr></tbody></table><ul><li>astmanproxy<ul><li><a href="https://github.com/davetroy/astmanproxy">davetroy/astmanproxy</a></li></ul></li></ul><pre><code class="language-bash"># å›ºä»¶è§£å¯† - ç±»ä¼¼ fetch
openssl enc -aes-256-cbc -d -in firmware.img -pass pass:O7r8yGv0cdlNM4lQ -out firmware.tar.gz

# è·å–é…ç½®
/my_tools/set_config /etc/asterisk/gw/web_server.conf get option_value general port 2
</code></pre><h2>å›ºä»¶</h2><p>å®˜ç½‘æä¾›å›ºä»¶ä¸‹è½½ <a href="https://www.openvox.cn/pub/firmwares">https://www.openvox.cn/pub/firmwares</a> , Web ç•Œé¢æ”¯æŒä¸Šä¼ æˆ–åœ¨çº¿æ›´æ–°ã€‚</p><p>å›ºä»¶æ›´æ–°ä¸Šä¼ é€»è¾‘ä½äº /www/cgi-bin/php/system-tools.php ã€‚
å›ºä»¶å‡†å¤‡å¥½åé€šè¿‡ /my_tools/unpack.sh è§£å‹å‡çº§ã€‚</p><p><strong>å›ºä»¶æ ¼å¼</strong></p><ul><li>AnalogGateway-current.bin -&gt; tar.gz<ul><li>firmware/AnalogGateway-1.1.20.img.md5</li><li>firmware/AnalogGateway-1.1.20.img - openssl enc&#x27;d data with salted password</li></ul></li><li>AnalogGateway-1.1.20.img - è§£å¯† -&gt; tar.gz<ul><li>AnalogGateway.img - åº”è¯¥ä¸ºç³»ç»Ÿé•œåƒ</li><li>key - AnalogGateway.img çš„ md5 checksum</li><li>u-boot.bin - bootloader</li><li>upgrade.sh - å‡çº§è„šæœ¬</li></ul></li></ul><pre><code class="language-bash"># ä¸‹è½½
curl -O https://www.openvox.cn/pub/firmwares/Analog%20Gateway/AnalogGateway-current.bin
# å›ºä»¶ä¸º tar.gz
tar zxvf AnalogGateway-current.bin
cd firmware
# å›ºä»¶ç»è¿‡ openssl åŠ å¯† - è§£å¯†åä¸º tar.tz
openssl enc -aes-256-cbc -d -in AnalogGateway-*.img -pass pass:O7r8yGv0cdlNM4lQ -out AnalogGateway.tar.gz

# è§£å‹è·å–å®é™…å†…å®¹
mkdir firmware
tar zxvf AnalogGateway.tar.gz -C firmware
</code></pre><p><strong>å›ºä»¶å‡çº§</strong></p><p>å›ºä»¶å‡çº§ä½¿ç”¨ openvox å†…ç½®çš„è‡ªå®šä¹‰å·¥å…· /usr/bin/auto_updateï¼Œä¸»è¦æ¶‰åŠæ“ä½œ mtdã€‚</p><pre><code class="language-bash"># -i 1 - ä½¿ç”¨ ubiblk
auto_update -i 1
# -b å‡çº§ ubook
auto_update -b u-boot.bin
# -f æ›´æ–°æ–‡ä»¶ï¼Œ -u å‡çº§ç³»ç»Ÿ
auto_update -u -f AnalogGateway.img
</code></pre><h2>é›†ç¾¤æ¨¡å¼</h2><p>è¿è¡Œæ¨¡å¼é€šè¿‡ /my_tools/cluster_mode é…ç½®ã€‚</p><p><strong>slave extension</strong></p><pre><code class="language-ini">#include sip_general.conf
#include sip_endpoints.conf
#include sip_slave.conf

#include extensions_macro.conf
#include extensions_slave.conf
#include extensions_dialmatchingrules.conf

# ext = slave_password+index
[fxs-&lt;ext&gt;-&lt;master_ip&gt;]
exten =&gt; #00,1,playback(Ext_number)
exten =&gt; #00,n,agi(getsipbinding.sh)
exten =&gt; #00,n,Wait(1)
exten =&gt; #00,n,Hangup()
exten =&gt; s,1,Dial(SIP/$sip_extension-$slave_masterip)
exten =&gt; s,n,Hangup()

exten =&gt; *1*2*3*4,1,agi(factoryreset.sh)
exten =&gt; *1*2*3*4,n,Hangup()
exten =&gt; **,1,playback(IP_address)
exten =&gt; **,n,agi(geteth0ip.sh)

[sip-$sip_extension]
exten =&gt; _X.,1,GotoIf($[&quot;${SIP_HEADER(X-Best-Codec)}&quot; = &quot;&quot;]?dial)
exten =&gt; _X.,n,Set(SIP_CODEC=${SIP_HEADER(X-Best-Codec)})
exten =&gt; _X.,n(dial),Dial(dahdi/${i}r1/${EXTEN},$DIALTIMEOUT)
exten =&gt; _X.,n,Hangup()
</code></pre><p><strong>master extension</strong></p><pre><code class="language-ini">#include sip_general.conf
#include sip_endpoints.conf
#include sip_master.conf

#include extensions_macro.conf
#include extensions_fxs.conf
#include extensions_master.conf
#include extensions_internal.conf
#include extensions_routing.conf
;#include extensions_sipdef.conf
#include extensions_dialmatchingrules.conf
</code></pre><h2>VS_USB-400</h2><ul><li>æ— çº¿ç½‘å…³</li></ul><h3>ç³»ç»Ÿç¯å¢ƒ</h3><ul><li>è½¯ä»¶ç‰ˆæœ¬ 2.1.22</li><li>ç¡¬ä»¶ç‰ˆæœ¬ 1.0</li><li>ä¸€ä¸ªä¸»æ§ï¼Œå¤šä¸ªæ¨¡å—ï¼Œæ¨¡å—ä¸å¸¦ CPU</li><li>æ— çº¿æ¨¡å—ä¸º é«˜é€š Gobi æ— çº¿å®½å¸¦èŠ¯ç‰‡æŠ€æœ¯ - GobiNet - USB é©±åŠ¨</li><li>é€šé“ STM32, åº•æ¿ MCU STM8</li><li>è¯¥ç‰ˆæœ¬åŒ…å« frpc - å…è®¸ openvox cloud å»ºç«‹é“¾æ¥ - æ˜ å°„äº† ssh å’Œ web</li></ul><blockquote><p>è¯¥ç‰ˆæœ¬æœ€å¤§çš„åŒºåˆ«æ˜¯æ¨¡å—ä¸åœ¨æ˜¯ç‹¬ç«‹ç³»ç»Ÿã€‚</p></blockquote><table><thead><tr><th>HW</th><th>Desc</th></tr></thead><tbody><tr><td>CPU</td><td>Intel(R) Atom(TM) CPU Z3735G @ 1.33GHz</td></tr><tr><td>Memory</td><td>1 G</td></tr><tr><td>Disk</td><td>16 G Flash</td></tr></tbody></table><table><thead><tr><th>SW</th><th>Desc</th></tr></thead><tbody><tr><td>Debian</td><td>8</td></tr><tr><td>uname -a</td><td>Linux Wireless-Gateway 4.19.81 #7 SMP Thu Feb 13 08:24:02 CST 2020 i686 i386</td></tr><tr><td>Busybox</td><td>v1.22.1</td></tr><tr><td>Asterisk</td><td>1.8.20.0</td></tr><tr><td>/proc/cmdline</td><td>BOOT_IMAGE=/vmlinuz ro root=LABEL=kernel1 intel_pstate=disable quiet console=ttyS0,115200n8</td></tr></tbody></table><p><strong>/proc/mtrr</strong></p><pre><code>reg00: base=0x0ffd00000 ( 4093MB), size=    4MB, count=1: write-protect
reg01: base=0x000000000 (    0MB), size= 1024MB, count=1: write-back
reg02: base=0x03e000000 (  992MB), size=   32MB, count=1: uncachable
reg03: base=0x03d000000 (  976MB), size=   16MB, count=1: uncachable
reg04: base=0x03ce00000 (  974MB), size=    2MB, count=1: uncachable
reg05: base=0x03c800000 (  968MB), size=    4MB, count=1: uncachable
</code></pre><p><strong>/proc/mounts</strong></p><table><thead><tr><th>dev</th><th>size</th><th>path</th><th>fs</th></tr></thead><tbody><tr><td>/dev/mmcblk0p6</td><td>487.9M</td><td>/etc/cfg</td><td>ext4</td></tr><tr><td>/dev/mmcblk0p7</td><td>487.9M</td><td>/data</td><td>ext4</td></tr><tr><td>/dev/mmcblk0p2</td><td>92.8M</td><td>/boot</td><td>ext4</td></tr><tr><td>/dev/mmcblk0p4</td><td>28.9M</td><td>/gateway</td><td>squashfs</td></tr></tbody></table><p><strong>modules</strong></p><ul><li>GobiNet - é©±åŠ¨æ— çº¿æ¨¡å—</li><li>usb_wwan</li><li>cdc_acm</li><li>ch341</li><li>usbserial - ä¾èµ– USB ä¸²å£</li><li>cdc_ether</li><li>usbnet</li><li>r8152</li><li>snd_pcm</li><li>snd_timer</li><li>i2c_hid</li><li>i2c_algo_bit</li><li>soundcore</li><li>sdhci_acpi</li><li>button</li></ul><h3>ç³»ç»Ÿç›®å½•</h3><ul><li>/my_tools -&gt; /gateway/my_tools</li><li>/sound -&gt; /gateway/sound</li><li>/webservice -&gt; /gateway/webservice</li><li>/version -&gt; /gateway/version</li><li>/www -&gt; /gateway/www</li><li>/conf</li><li>/data<ul><li>log/<ul><li>cdr.db</li><li>smsinbox.db</li><li>smsoutbox.db</li></ul></li></ul></li><li>/etc<ul><li>cfg/ - Asteris é…ç½® - ç‹¬ç«‹æŒ‚è½½ - å¯å¤‡ä»½<ul><li>gw/ - ç½‘å…³é…ç½®<ul><li>n2n/ - 2 å±‚ Mesh ç»„ç½‘</li><li>sim840w.conf - SIM æ¨¡å—é…ç½® - AT å‘½ä»¤ä¹‹ç±»</li><li>sim6320.conf - SIM æ¨¡å—é…ç½®</li><li>uc15.conf - SIM æ¨¡å—é…ç½® - UC15</li><li>sms.conf - çŸ­ä¿¡é…ç½®</li></ul></li><li>cloud/ - åº”è¯¥æ˜¯ openvox äº‘å¹³å°ä¹‹ç±»çš„ - <a href="https://cloud.openvox.com.cn/">https://cloud.openvox.com.cn/</a><ul><li>cloud.conf</li><li>frpc.ini - openvox è®¿é—® ssh å’Œ web çš„åé—¨</li></ul></li></ul></li><li>udev/rules.d/<ul><li>gobinet.rules - GobiNet æ˜ å°„ - <code>/sys/class/net/gobinet*</code></li><li>internet.rules - æ¨¡å—å†…éƒ¨ usbnet æ˜ å°„ - ä¼š symlink åˆ° <code>/dev/opvx/</code></li></ul></li></ul></li><li>/tmp<ul><li>hw_info.cfg - ç¡¬ä»¶é…ç½® - ç”±äºç”Ÿæˆ asterisk gw_gsm.conf å’Œ extra-channels.conf é…ç½®</li></ul></li><li>/usr/sbin/cloudMain</li><li>/usr/sbin/cloudExternal</li><li>/usr/sbin/cloudNat</li><li>/gateway - å®Œæ•´ç½‘å…³ç³»ç»Ÿ - ç‹¬ç«‹æŒ‚è½½<ul><li>www/ - PHP ç½‘ç«™</li><li>my_tools/ - å·¥å…·é›†</li></ul></li></ul><h2>Asterisk</h2><blockquote><p>ä¸ç®¡ä»€ä¹ˆç‰ˆæœ¬çš„ç½‘å…³ï¼ŒAsterisk çš„ç‰ˆæœ¬ä¼¼ä¹éƒ½æ²¡æœ‰å˜è¿‡ - 1.8.20.0</p></blockquote><table><thead><tr><th>mod</th><th>desc</th></tr></thead><tbody><tr><td>chan_extra</td><td>GSM/CDMA Telephony Driver FOR Asterisk</td></tr></tbody></table><ul><li>chan_extra<ul><li>OpenVox å¼€å‘çš„æ— çº¿æ¨¡å— - GSM, CDMA å’Œæ–°çš„ LTE å‡ä½¿ç”¨è¯¥æ¨¡å—</li><li>opvxg4xx é©±åŠ¨æä¾›æ”¯æŒ</li><li>é…ç½®æ–‡ä»¶ extra-channels.conf, chan_extra.conf</li><li>GSM, CDMA åŸºäº DAHDi</li><li>4G LTE åŸºäº GobiNet å†…æ ¸é©±åŠ¨</li><li>é©±åŠ¨ä¸‹è½½ <a href="https://www.openvox.cn/pub/misc/GSM/">https://www.openvox.cn/pub/misc/GSM/</a></li></ul></li></ul><pre><code class="language-bash">modprobe opvxg4xx
</code></pre><pre><code class="language-bash"># Asterisk å‘½ä»¤
gsm show spans
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¦‚ä½•é€‰æ‹© Asterisk æ¥å£]]></title>
        <id>agi-vs-ami-vs-ari</id>
        <link href="https://wener.me/story/agi-vs-ami-vs-ari"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[Asterisk è‡ª 1999 å¹´å‘å±•åˆ°ç°åœ¨ï¼Œå·²ç»æˆä¸ºä¸šç•Œæ ‡å‡†çš„ PBX å®ç°åº•å±‚ï¼Œä½†è¿™ 20 å¤šå¹´çš„å‘å±•ä¹Ÿè®© Asterisk å®ç°éå¸¸å¤šçš„æ¥å£ã€‚]]></summary>
        <content type="html"><![CDATA[<p>Asterisk è‡ª 1999 å¹´å‘å±•åˆ°ç°åœ¨ï¼Œå·²ç»æˆä¸ºä¸šç•Œæ ‡å‡†çš„ PBX å®ç°åº•å±‚ï¼Œä½†è¿™ 20 å¤šå¹´çš„å‘å±•ä¹Ÿè®© Asterisk å®ç°éå¸¸å¤šçš„æ¥å£ã€‚</p><h2>æ¥å£ç®€ä»‹</h2><table><thead><tr><th>API</th><th>Protocol</th><th>Async</th><th>Block</th><th>Access Dialplan</th></tr></thead><tbody><tr><td>AGI</td><td>Shell/Socket</td><td>â›”ï¸</td><td>âœ…</td><td>âœ…</td></tr><tr><td>AMI</td><td>TCP/5038/Event</td><td>âœ…</td><td>â›”ï¸</td><td>â›”ï¸</td></tr><tr><td>ARI</td><td>HTTP/REST/WebSocket</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr></tbody></table><p>AGI, AMI åŠŸèƒ½å®Œå…¨ä¸åŒï¼Œä½† ARI å’Œ AGIï¼ŒAMI éƒ½æœ‰æ‰€é‡å ã€‚</p><ul><li>AGI - Asterisk Gateway Interface<ul><li>ç®€å•</li><li>ä½œä¸º Dialplan å‡½æ•°</li></ul></li><li>AMI - Asterisk Manager Interface<ul><li>ä¿®æ”¹æˆ–åˆ›å»º Channel</li></ul></li><li>ARI - Asterisk RESTful Interface<ul><li><strong>Asterisk 12+</strong></li><li>HTTP Websocket - äº‹ä»¶, Stasis åº”ç”¨</li><li>RESTful æ¥å£ - æ§åˆ¶åº•å±‚èµ„æº</li></ul></li></ul><h2>æ¥å£ä½¿ç”¨åœºæ™¯</h2><pre><code>AMI - ARI - AGI
å‘¼å«æ§åˆ¶
      è‡ªå®šä¹‰é€šä¿¡åº”ç”¨
            Dialplan æ‰§è¡Œ
</code></pre><ul><li>AGI - æ‰©å±• Dialplan å¤„ç†<ul><li>å»ºè®®å®ç° é€šç”¨ - ç‹¬ç«‹ - ç‰¹æ€§æ— å…³ çš„ Dialplan å‡½æ•°</li><li>ä¾‹å¦‚ å‘¼å«å»ºç«‹ã€æ‹†é™¤ï¼›å¤–çº¿æ§åˆ¶ï¼›CDR</li></ul></li><li>AMI - é€‚ç”¨äºé€šè¯æ—¶é€šé“ç®¡æ§</li><li>ARI<ul><li>ARI åŒ…å« AMI å’Œ AGI ä¸»è¦åŠŸèƒ½</li><li>è‡ªå®šä¹‰ Dialplan åº”ç”¨</li><li>é«˜åº¦å®šåˆ¶</li></ul></li></ul><p>å¼€å‘ä½¿ç”¨ä¸€å®šè¦ç¼ºå°‘è¾¹ç•Œï¼Œå› ä¸ºå¾ˆå¤šåŠŸèƒ½æ˜¯è¿™ä¹Ÿå¯ä»¥é‚£ä¹Ÿå¯ä»¥ã€‚</p><pre><code class="language-mermaid">sequenceDiagram
    PJSIP -&gt;&gt; Dialplan: å¤„ç†é€šé“
    Dialplan -&gt;&gt; AGI: è·¯ç”±
    AGI -&gt;&gt; Handler: å¤„ç† FastAGI/AGI è¯·æ±‚
    Handler -&gt;&gt; Dialplan: åº”ç”¨ç¡®å®šå¦‚ä½•å¤„ç†ï¼Œè¿”å›ä¸‹ä¸€ä¸ª Dialplan
    Dialplan -&gt;&gt; Stasis: æ‰§è¡Œ Stasis Dialplan
    Stasis -&gt;&gt; Handler: å¤„ç† ARI å®ç°è‡ªå®šä¹‰åº”ç”¨
</code></pre><h2>å…¶ä»–æ¥å£</h2><ul><li>Asterisk CLI<ul><li>å¼€å‘ä½¿ç”¨ç®€å•æ–¹ä¾¿</li><li>åŠŸèƒ½æœ‰ä¸€å®šé™åˆ¶</li></ul></li><li>Call File<ul><li>0 è€¦åˆ</li><li>ä»ç›®å½•æ‹‰å–å‘¼å«è¯·æ±‚ <code>&lt;astspooldir&gt;/outgoing</code> - <code>/var/spool/asterisk/outgoing/</code><ul><li>ç±»ä¼¼æ‰“å°æœº pool</li><li>é€‚ç”¨äºè‡ªåŠ¨å‘èµ·å‘¼å«</li></ul></li><li>ç”Ÿæˆæ–‡ä»¶æ”¾åˆ°ç›®å½•ç”± chan_pickup å»è·å–ç„¶åå‘èµ·å‘¼å«</li><li>è¯­æ³•ä¸ HTTP Header ç›¸åŒï¼Œæ”¯æŒ <code>#</code> å’Œ <code>;</code> ä½œä¸ºæ³¨é‡Š</li><li>æ³¨æ„ âš ï¸ - å…ˆåˆ›å»ºå¥½æ–‡ä»¶ç„¶å ç§»åŠ¨ åˆ°ç›®å½•ï¼Œé¿å…åœ¨ç›®å½•ç›´æ¥åˆ›å»º</li></ul></li><li>CDR - å‘¼å«è®°å½•<ul><li>æ¯ä¸€é€šå‘¼å«å¯ä»¥è®°å½•åˆ° DB</li><li>å¯é€šè¿‡æŸ¥è¯¢ cdr å®ç°å‘¼å«è®°å½•åŠŸèƒ½</li><li>å¼€å‘ä½¿ç”¨éå¸¸æ–¹ä¾¿</li><li>é¿å…è‡ªè¡Œè®°å½•</li></ul></li><li>CEL - äº‹ä»¶æ—¥å¿—<ul><li>æ—¥å¿—é‡å–å†³äºé…ç½®ï¼Œå¯èƒ½éå¸¸å¤š</li><li>é€šè¿‡å¤„ç†æ—¥å¿—èƒ½å¤Ÿåˆ†æå‡ºå½“å‰çš„é€šé“çŠ¶æ€</li><li>å®æ—¶å¤„ç†æ—¥å¿—èƒ½å®ç°ç”¨æˆ·é€šçŸ¥å’Œæé†’</li><li>é¿å…æ“ä½œ AMI æˆ– ARI</li></ul></li><li>SNMP<ul><li>åŸºæœ¬æœåŠ¡ç›‘æ§</li></ul></li><li>Statd<ul><li>æœåŠ¡æŒ‡æ ‡ç›‘æ§</li><li>é€šè¯æ•°é‡ï¼Œåå¸­æ•°é‡</li></ul></li><li>Realtime DB<ul><li>ç®¡ç†é€šé“åå¸­</li><li>æ¨¡å—é…ç½®</li></ul></li><li>Function_CURL<ul><li>Dialplan é‡Œä½¿ç”¨ CURL è¯·æ±‚å¤–éƒ¨ç³»ç»Ÿ</li><li>å®ç°éå¸¸ç®€å•çš„ç³»ç»Ÿé›†æˆ</li></ul></li><li>åç«¯æ¥å£<ul><li>LDAP</li><li>cURL</li><li>ODBC, SQLite, PostgreSQL, MySQL</li></ul></li></ul><pre><code class="language-bash"># ä½¿ç”¨ CLI å‘èµ·å‘¼å«
asterisk -rx &#x27;channel originate SIP/6003 extension 10086@sip-6003&#x27;
</code></pre><p><strong>/var/spool/asterisk/outgoing/hello.call</strong></p><pre><code class="language-ini">Channel: SIP/trunkname/6001
; Callerid: &lt;callerid&gt;
; WaitTime: &lt;number&gt;
; MaxRetries: &lt;number&gt;
; RetryTime: &lt;number&gt;
; Account: &lt;account&gt;

; æ‰§è¡Œçš„åº”ç”¨å’Œå‚æ•°
Application: Playback
Data: hello-world

; Context+Extension
; Context: &lt;context&gt;
; Extension: &lt;exten&gt;
; Priority: &lt;priority&gt;
; Setvar: &lt;var=value&gt;

; yes ä¼šå½’æ¡£åˆ° outgoing_done
; å½’æ¡£åè¿˜ä¼šè®°å½•çŠ¶æ€
; Archive: &lt;yes|no&gt;
; Status: &lt;exitstatus&gt;

; é‡è¯•çŠ¶æ€
; StartRetry: &lt;pid&gt; &lt;retrycount&gt; (&lt;time&gt;)
; EndRetry: &lt;pid&gt; &lt;retrycount&gt; (&lt;time&gt;)
</code></pre><h2>æ€»ç»“</h2><ul><li>ä½¿ç”¨ Stasis æ›¿ä»£ Dial</li><li>é¿å… Asterisk åŒ…å«å¤æ‚è·¯ç”±é€»è¾‘</li><li>é€šè¿‡ ARI æ¥è€¦</li><li>æ²¡æœ‰ ARI çš„ä½ç‰ˆæœ¬ Asterisk åªèƒ½ä½¿ç”¨ AMI æ¥è¿›è¡Œå®æ—¶ç®¡ç†</li></ul><h2>å‚è€ƒ</h2><ul><li><a href="https://www.slideshare.net/JranVinzens/ari-and-agi-a-powerful-combination">ARI and AGI, a powerful combination</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[macOS å¾®ä¿¡å¤‡ä»½åŸç†]]></title>
        <id>macos-wechat-backup</id>
        <link href="https://wener.me/story/macos-wechat-backup"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[iPhone7 32G ç”¨äº†å‡ å¹´åï¼Œå¾®ä¿¡å äº† 10Gï¼Œå¦‚æœèƒ½æŠŠå¾®ä¿¡å¤‡ä»½åæ¸…é™¤ï¼Œè¿˜èƒ½å†æˆ˜ä¸¤å¹´ï¼]]></summary>
        <content type="html"><![CDATA[<p>iPhone7 32G ç”¨äº†å‡ å¹´åï¼Œå¾®ä¿¡å äº† 10Gï¼Œå¦‚æœèƒ½æŠŠå¾®ä¿¡å¤‡ä»½åæ¸…é™¤ï¼Œè¿˜èƒ½å†æˆ˜ä¸¤å¹´ï¼</p><ul><li>å¾®ä¿¡è‡ªèº«æ”¯æŒå¤‡ä»½ï¼Œä½†å¤‡ä»½åæ˜¯åŠ å¯†çš„ï¼Œæ— æ³•è®¿é—®ã€‚</li><li>å¾®ä¿¡å ç”¨ç©ºé—´çš„ä¸»è¦æ˜¯å›¾ç‰‡å’Œè§†é¢‘</li><li>å¾®ä¿¡æ¸…ç†ä¸ä¼šæ¸…é™¤æ–‡æœ¬<ul><li>æ–‡æœ¬æ¶ˆæ¯ç›¸å¯¹å°‘</li><li>æƒ³è¦æ¸…é™¤æ–‡æœ¬æ¶ˆæ¯å¯ä»¥å¸è½½é‡è£…</li></ul></li></ul><ul><li>é€šè¿‡ macOS å¤‡ä»½ iPhone ç³»ç»Ÿ - å¤‡ä»½æ—¶ä¸è¦åŠ å¯†<ul><li>å¤‡ä»½åä½äº <code>$HOME/Library/Application Support/MobileSync/Backup/</code></li></ul></li><li>å¤‡ä»½åçš„æ•°æ®<ul><li>Manifest.{mbdb,db} - mac å¤‡ä»½æ–‡ä»¶æ¸…å•<ul><li>Files - æ–‡ä»¶æ¸…å•<ul><li><code>fileID TEXT PRIMARY KEY, domain TEXT, relativePath TEXT, flags INTEGER, file BLOB</code><ul><li>fileID - ä¸º å¤‡ä»½æ˜ å°„åçš„æ–‡ä»¶</li><li>domain - åº”ç”¨</li><li>relativePath - åº”ç”¨ç›¸å¯¹è·¯å¾„</li></ul></li><li><code>select relativePath from Files where domain = &#x27;AppDomain-com.tencent.xin&#x27; limit 10</code>;<ul><li>å¾®ä¿¡ç›¸å…³æ–‡ä»¶</li></ul></li></ul></li><li>Properties<ul><li><code>key TEXT PRIMARY KEY, value BLOB</code></li></ul></li><li>.mbdb - äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéœ€è¦è‡ªå®šä¹‰è§£ç é€»è¾‘</li><li>.db - sqlite3 - æ–°ç‰ˆä¸€èˆ¬æ˜¯ sqlite3</li></ul></li></ul></li></ul><pre><code class="language-bash"># æ‰“å¼€ Manifest.db
sqlite3 Manifest.db
</code></pre><pre><code class="language-sql" metastring="title=&quot;å¸¸ç”¨æ“ä½œ&quot;" title="&quot;å¸¸ç”¨æ“ä½œ&quot;">-- æŸ¥çœ‹è¡¨
.tables
.tables Chat_%
-- æŸ¥çœ‹è¡¨ç»“æ„
.schema Chat_ID
</code></pre><pre><code class="language-sql">-- å…³å¿ƒçš„æ–‡ä»¶
select fileID,relativePath from Files
where domain = &#x27;AppDomain-com.tencent.xin&#x27; and
(
  relativePath like &#x27;%/MM.sqlite&#x27;
  or relativePath like &#x27;%/WCDB_Contact.sqlite&#x27;
  or relativePath like &#x27;%/message_%.sqlite&#x27;
);

-- æ‰€æœ‰ DB ç›®å½•ä¸‹å†…å®¹
select fileID,relativePath from Files
where domain = &#x27;AppDomain-com.tencent.xin&#x27; and relativePath like &#x27;Documents/%/DB/%&#x27;;

-- æ–‡ä»¶æ•°é‡
select count(*) from Files
where domain = &#x27;AppDomain-com.tencent.xin&#x27;;
</code></pre><ul><li>å¤‡ä»½ååŒ…å«å¾®ä¿¡æ•°æ®<ul><li><code>message_%d.sqlite</code> - èŠå¤©å¯¹è¯<ul><li>ChatExt2_ID</li><li>Chat_ID - å¯¹åº”ä¸€ä¸ªèŠå¤©ä¼šè¯<ul><li>ID ä¸º userName æˆ– MD5 çš„ alias</li></ul></li><li>Hello_ID</li></ul></li><li>WCDB_Contact.sqlite - è”ç³»äºº<ul><li>Friend - å¥½å‹</li><li>MassSendContact</li><li>QQContact - QQ è”ç³»äºº</li></ul></li><li>MM - æ¶ˆæ¯<ul><li>BottleContactTable4</li><li>BottleTable4</li><li>ChatExt2_ID</li><li>Chat_ID</li><li>Emoticon1</li><li>EmoticonPackage05</li><li>EmoticonUpload_1</li><li>Friend</li><li>Friend_Ext</li><li>MassSendContactTable</li><li>MessageBizExtTable</li><li>QQContact</li><li>RevokeMsgTable</li><li>friend_meta</li></ul></li><li>contactlabel.list - æ ‡ç­¾åˆ—è¡¨</li></ul></li></ul><h2>Friend</h2><table><thead><tr><th>column</th><th>type</th><th>desc</th></tr></thead><tbody><tr><td>userName</td><td>text</td><td>WXIDã€ç¾¤ IDã€å…¬ä¼—å· ID</td></tr><tr><td>type</td><td>integer</td><td>ç±»å‹</td></tr><tr><td>certificationFlag</td><td>integer</td><td></td></tr><tr><td>imgStatus</td><td>integer</td><td></td></tr><tr><td>encodeUserName</td><td>text</td><td></td></tr><tr><td>dbContactLocal</td><td>blob</td><td></td></tr><tr><td>dbContactOther</td><td>blob</td><td></td></tr><tr><td>dbContactRemark</td><td>blob</td><td>è”ç³»äººå¤‡æ³¨</td></tr><tr><td>dbContactHeadImage</td><td>blob</td><td>è”ç³»äººå¤´åƒ</td></tr><tr><td>dbContactProfile</td><td>blob</td><td></td></tr><tr><td>dbContactSocial</td><td>blob</td><td></td></tr><tr><td>dbContactChatRoom</td><td>blob</td><td>ç¾¤ä¿¡æ¯,XML</td></tr><tr><td>dbContactBrand</td><td>blob</td><td></td></tr><tr><td>_<!-- -->packed_DBContactTable</td><td>blob</td><td></td></tr></tbody></table><table><thead><tr><th>userName</th><th>desc</th></tr></thead><tbody><tr><td>100000000@chatroom</td><td>ç¾¤ç»„ä¼šè¯</td></tr><tr><td><code>wxid_</code></td><td>æ ‡å‡†å¾®ä¿¡ ID</td></tr><tr><td>QQ1000000000</td><td></td></tr><tr><td>gh_123456789abc</td><td>å…¬ä¼—å·</td></tr></tbody></table><table><thead><tr><th>encodeUserName</th><th>desc</th></tr></thead><tbody><tr><td>v1_xxxx@stranger</td><td>åŠ å¯†åé™Œç”Ÿäººå§“å</td></tr><tr><td>v3_xxxx@stranger</td><td>åŠ å¯†åé™Œç”Ÿäººå§“å</td></tr></tbody></table><table><thead><tr><th>type</th><th align="right">bin</th><th>desc</th></tr></thead><tbody><tr><td>0</td><td align="right">0</td><td>å¾®ä¿¡è¿åŠ¨</td></tr><tr><td>1</td><td align="right">1</td><td>å¾®ä¿¡åº”ç”¨</td></tr><tr><td>2</td><td align="right">10</td><td>app + ç¾¤</td></tr><tr><td>3</td><td align="right">11</td><td>å¥½å‹</td></tr><tr><td>4</td><td align="right">100</td><td>ç¾¤é‡Œé¢çš„äºº</td></tr><tr><td>6</td><td align="right">110</td><td>ç¾¤å¥½å‹ï¼Œå¯¹æ–¹åŠ ä½ ï¼Œä½ æœªé€šè¿‡</td></tr><tr><td>7</td><td align="right">111</td><td>ç¾¤é‡Œé¢çš„äººï¼Œè€Œä¸”äº’ä¸ºå¥½å‹</td></tr><tr><td>11</td><td align="right">1011</td><td>æ‹‰é»‘åˆ«äºº</td></tr><tr><td>67</td><td align="right">1000011</td><td>æ ‡æ˜Ÿ</td></tr><tr><td>256</td><td align="right">100000000</td><td>åˆ é™¤å¥½å‹</td></tr><tr><td>259</td><td align="right">100000011</td><td>ä¸è®©ä»–çœ‹æˆ‘çš„æœ‹å‹åœˆ</td></tr><tr><td>65539</td><td align="right">10000000000000011</td><td>ä¸çœ‹ä»–çš„æœ‹å‹åœˆ</td></tr></tbody></table><table><thead><tr><th>bit</th><th>desc</th></tr></thead><tbody><tr><td>1</td><td>ä½ æ˜¯å¦åŠ å¯¹æ–¹ä¸ºå¥½å‹</td></tr><tr><td>2</td><td>å¯¹æ–¹æ˜¯å¦åŠ ä½ ä¸ºå¥½å‹</td></tr><tr><td>3</td><td>æ˜¯å¦ç¾¤é‡Œé¢çš„</td></tr><tr><td>4</td><td>ä½ ä¸»åŠ¨æ‹‰é»‘å¯¹æ–¹</td></tr><tr><td>7</td><td>æ ‡æ˜Ÿ</td></tr></tbody></table><h2>Chat</h2><ul><li>Chat<!-- -->_<!-- --> èŠå¤©ä¿¡æ¯</li><li>ChatExt<!-- -->_<!-- --> æ¶ˆæ¯æ‰©å±•ä¿¡æ¯</li></ul><table><thead><tr><th>column</th><th>type</th><th>desc</th></tr></thead><tbody><tr><td>CreateTime</td><td>INTEGER</td><td></td></tr><tr><td>Des</td><td>INTEGER</td><td></td></tr><tr><td>ImgStatus</td><td>INTEGER</td><td></td></tr><tr><td>MesLocalID</td><td>INTEGER</td><td></td></tr><tr><td>Message</td><td>TEXT</td><td>æ¶ˆæ¯å†…å®¹</td></tr><tr><td>MesSvrID</td><td>INTEGER</td><td></td></tr><tr><td>Status</td><td>INTEGER</td><td></td></tr><tr><td>TableVer</td><td>INTEGER</td><td></td></tr><tr><td>Type</td><td>INTEGER</td><td>æ¶ˆæ¯ç±»å‹</td></tr></tbody></table><table><thead><tr><th>type</th><th>desc</th></tr></thead><tbody><tr><td>1</td><td>æ–‡æœ¬</td></tr><tr><td>3</td><td>å›¾ç‰‡</td></tr><tr><td>34</td><td>è¯­éŸ³</td></tr><tr><td>42</td><td>åç‰‡</td></tr><tr><td>43</td><td>è§†é¢‘</td></tr><tr><td>47</td><td>è¡¨æƒ…</td></tr><tr><td>48</td><td>ä½ç½®</td></tr><tr><td>49</td><td>é“¾æ¥</td></tr><tr><td>50</td><td>è§†é¢‘/è¯­éŸ³é€šè¯</td></tr><tr><td>62</td><td>å°è§†é¢‘</td></tr><tr><td>10000</td><td>ç³»ç»Ÿæ¶ˆæ¯</td></tr></tbody></table><h1>é™„å½•</h1><h2>WCDB_Contact.sqlite</h2><pre><code class="language-sql">-- WCDB_Contact
CREATE TABLE Friend
(
    userName               text primary key on conflict replace,
    type                   integer default 0,
    certificationFlag      integer default 0,
    imgStatus              integer default 0,
    encodeUserName         text,
    dbContactLocal         blob,
    dbContactOther         blob,
    dbContactRemark        blob,
    dbContactHeadImage     blob,
    dbContactProfile       blob,
    dbContactSocial        blob,
    dbContactChatRoom      blob,
    dbContactBrand         blob,
    _packed_DBContactTable blob
);
CREATE TABLE MassSendContact
(
    UsrName    text not null primary key on conflict replace,
    Detail     text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text
);
CREATE TABLE QQContact
(
    UsrName           text not null primary key on conflict replace,
    Uin               integer default 0,
    Type              integer default 0,
    Sex               integer default 0,
    Age               integer default 0,
    ImgKey            integer default 0,
    ExtKey            integer default 0,
    ImgKeyLast        integer default 0,
    ExtKeyLast        integer default 0,
    CreateTime        integer default 0,
    ConIntRes1        integer default 0,
    ConIntRes2        integer default 0,
    ConIntRes3        integer default 0,
    NickName          text,
    Email             text,
    Mobile            text,
    Address           text,
    Sign              text,
    birthday          text,
    FullPY            text,
    ShortPY           text,
    Img               text,
    ConRemark         text,
    ConRemark_PYShort text,
    ConRemark_PYFull  text,
    ConStrRes1        text,
    ConStrRes2        text,
    ConStrRes3        text
);
</code></pre><h2>MM.sqlite</h2><pre><code class="language-sql">CREATE TABLE Friend
(
    TableVer     integer default 1,
    UsrName      text not null primary key on conflict replace,
    NickName     text,
    Uin          integer default 0,
    Email        text,
    Mobile       text,
    Sex          integer default 0,
    FullPY       text,
    ShortPY      blob,
    Img          text,
    Type         integer default 0,
    LastChatTime integer default 0,
    Draft        text
);
CREATE TABLE Friend_Ext
(
    UsrName           text not null primary key on conflict replace,
    ConType           integer default 0,
    ConRemark         text,
    ConRemark_PYShort text,
    ConRemark_PYFull  text,
    ConQQMBlog        text,
    ConSMBlog         text,
    ConChatRoomMem    text,
    ConIntRes1        integer default 0,
    ConIntRes2        integer default 0,
    ConIntRes3        integer default 0,
    ConStrRes1        text,
    ConStrRes2        text,
    ConStrRes3        text
);
CREATE TABLE friend_meta
(
    username   text primary key on conflict replace,
    lastUpdate integer,
    intCon1    integer,
    intCon2    integer,
    intCon3    integer,
    strCon1    text,
    strCon2    text,
    strCon3    text
);
CREATE TABLE QQContact
(
    UsrName           text not null primary key on conflict replace,
    Uin               integer default 0,
    Type              integer default 0,
    Sex               integer default 0,
    Age               integer default 0,
    ImgKey            integer default 0,
    ExtKey            integer default 0,
    ImgKeyLast        integer default 0,
    ExtKeyLast        integer default 0,
    CreateTime        integer default 0,
    ConIntRes1        integer default 0,
    ConIntRes2        integer default 0,
    ConIntRes3        integer default 0,
    NickName          text,
    Email             text,
    Mobile            text,
    Address           text,
    Sign              text,
    birthday          text,
    FullPY            text,
    ShortPY           text,
    Img               text,
    ConRemark         text,
    ConRemark_PYShort text,
    ConRemark_PYFull  text,
    ConStrRes1        text,
    ConStrRes2        text,
    ConStrRes3        text
);
CREATE TABLE RevokeMsgTable
(
    MSG_REVOKE_COL_SVRID   bigint  default 0 primary key,
    MSG_REVOKE_COL_CONTENT text,
    MSG_REVOKE_COL_INTRES1 integer default 0,
    MSG_REVOKE_COL_INTRES2 bigint  default 0,
    MSG_REVOKE_COL_INTRES3 bigint  default 0,
    MSG_REVOKE_COL_STRRES1 text,
    MSG_REVOKE_COL_STRRES2 text,
    MSG_REVOKE_COL_STRRES3 text,
    _packed_RevokeMessage  blob
);
CREATE TABLE Emoticon1
(
    MD5        text,
    Message    text,
    Type       integer default 0,
    CreateTime integer default 0,
    Len        integer default 0,
    Status     integer default 0,
    Catalog    text,
    CatelogID  integer default 0,
    Draft      text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConIntRes3 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text,
    ConStrRes3 text
);
CREATE TABLE EmoticonUpload_1
(
    UsrName    text,
    MesLocalID text,
    MD5        text,
    Type       integer default 0,
    Message    text,
    CreateTime integer default 0,
    SendTime   integer default 0,
    Offset     integer default 0,
    Len        integer default 0,
    Status     integer default 0,
    Catalog    text,
    CatelogID  integer default 0,
    Draft      text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConIntRes3 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text,
    ConStrRes3 text
);
CREATE TABLE BottleTable4
(
    BottleLocalID        integer primary key autoincrement,
    BottleSvrID          integer default 0,
    BottleEncryptUsrName text,
    BottleID             text,
    BottleExt            text
);
CREATE TABLE BottleContactTable4
(
    BottleContactUsrName     text not null primary key on conflict replace,
    BottleContactNickName    text,
    BottleContactSex         integer default 0,
    BottleContactImgStatus   text,
    BottleContactHDImgStatus text,
    BottleContactProvince    text,
    BottleContactCity        text,
    BottleContactSign        text,
    BottleContactImgKey      integer default 0,
    BottleContactImgKeyLast  integer default 0,
    BottleContactExtKey      integer default 0,
    BottleContactExtKeyLast  integer default 0,
    BottleContactINTRES1     integer default 0,
    BottleContactINTRES2     integer default 0,
    BottleContactINTRES3     integer default 0,
    BottleContactTEXTRES1    text,
    BottleContactTEXTRES2    text,
    BottleContactTEXTRES3    text
);
CREATE TABLE MassSendContactTable
(
    UsrName    text not null primary key on conflict replace,
    Detail     text,
    ConIntRes1 integer default 0,
    ConIntRes2 integer default 0,
    ConStrRes1 text,
    ConStrRes2 text
);
CREATE TABLE MessageBizExtTable
(
    chatUsername            text,
    msgLocalId              integer,
    msgType                 integer,
    msgInnerType            integer,
    bizId                   text,
    msgExtColInt1           integer,
    msgExtColInt2           integer,
    msgExtColString1        text,
    msgExtColString2        text,
    _packed_DBMessageBizExt blob
);
CREATE TABLE EmoticonPackage05
(
    EmoticonPackageId          text not null primary key on conflict replace,
    EmoticonPackageName        text,
    EmoticonPackageIconUrl     text,
    EmoticonPackagePannelUrl   text,
    EmoticonPackagePStatus     integer default 0,
    EmoticonPackageDLStatus    integer default 0,
    EmoticonPackageInstallTime integer default 0,
    EmoticonPackageRemoveTime  integer default 0,
    ConIntRes1                 integer default 0,
    ConIntRes2                 integer default 0,
    ConIntRes3                 integer default 0,
    ConStrRes1                 text,
    ConStrRes2                 text,
    ConStrRes3                 text
);
CREATE TABLE Chat
(
    TableVer   integer default 1,
    MesLocalID integer primary key autoincrement,
    MesSvrID   bigint  default 0,
    CreateTime integer default 0,
    Message    text,
    Status     integer default 0,
    ImgStatus  integer default 0,
    Type       integer,
    Des        integer
);
CREATE TABLE ChatExt2
(
    MesLocalID  integer primary key,
    msgFlag     integer default 0,
    ConIntRes2  integer default 0,
    ConIntRes3  integer default 0,
    MsgSource   text,
    MsgIdentify text,
    ConStrRes1  text,
    ConStrRes2  text,
    ConStrRes3  text,
    ConIntRes1  integer default 0
);
</code></pre><h2><code>message_%d.sqlite</code></h2><pre><code class="language-sql">CREATE TABLE Chat_ID
(
    CreateTime INTEGER DEFAULT 0,
    Des        INTEGER,
    ImgStatus  INTEGER DEFAULT 0,
    MesLocalID INTEGER PRIMARY KEY AUTOINCREMENT,
    Message    TEXT,
    MesSvrID   INTEGER DEFAULT 0,
    Status     INTEGER DEFAULT 0,
    TableVer   INTEGER DEFAULT 1,
    Type       INTEGER
);
CREATE TABLE ChatExt2_ID
(
    ConIntRes1  INTEGER DEFAULT 0,
    ConIntRes2  INTEGER DEFAULT 0,
    ConIntRes3  INTEGER DEFAULT 0,
    ConStrRes1  TEXT,
    ConStrRes2  TEXT,
    ConStrRes3  TEXT,
    MesLocalID  INTEGER PRIMARY KEY,
    msgFlag     INTEGER DEFAULT 0,
    MsgIdentify TEXT,
    MsgSource   TEXT
);
CREATE TABLE Hello_ID
(
    ConIntRes1 INTEGER DEFAULT 0,
    ConIntRes2 INTEGER DEFAULT 0,
    ConIntRes3 INTEGER DEFAULT 0,
    ConStrRes1 TEXT,
    ConStrRes2 TEXT,
    ConStrRes3 TEXT,
    CreateTime INTEGER DEFAULT 0,
    Des        INTEGER,
    ImgStatus  INTEGER DEFAULT 0,
    MesLocalID INTEGER PRIMARY KEY AUTOINCREMENT,
    Message    TEXT,
    MesSvrID   INTEGER DEFAULT 0,
    OpCode     INTEGER DEFAULT 0,
    Status     INTEGER DEFAULT 0,
    TableVer   INTEGER DEFAULT 1,
    Type       INTEGER,
    UsrName    TEXT
);
</code></pre><h1>å‚è€ƒ</h1><ul><li><a href="https://www.jianshu.com/p/07a8d87e698b">https://www.jianshu.com/p/07a8d87e698b</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æˆ‘çš„ç«™ç‚¹æ˜¯å¦‚ä½•æ„å»ºçš„ï¼Ÿï¼]]></title>
        <id>how-i-build-my-site</id>
        <link href="https://wener.me/story/how-i-build-my-site"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[æˆ‘çš„ç«™ç‚¹ wener.me å’Œå›½å†…å¤‡æ¡ˆé•œåƒ wener.tech æ„å»ºè¿‡ç¨‹å’Œé€»è¾‘ã€‚]]></summary>
        <content type="html"><![CDATA[<p>æˆ‘çš„ç«™ç‚¹ <a href="https://wener.me">wener.me</a> å’Œå›½å†…å¤‡æ¡ˆé•œåƒ <a href="https://wener.tech">wener.tech</a> æ„å»ºè¿‡ç¨‹å’Œé€»è¾‘ã€‚</p><h2>Docusaurus</h2><p>ç«™ç‚¹åŸºäº <a href="https://docusaurus.io/">docusaurus</a> 2.0-alpha æ„å»ºï¼Œdocusaurus å¤„äº 2.0-alpha å·²ç»å¾ˆé•¿ä¸€æ®µæ—¶é—´äº†ï¼Œæœ€è¿‘è¿›å…¥äº† beta é˜¶æ®µã€‚æ—©æœŸå¯¹ä¸­æ–‡æ”¯æŒæœ‰ç¼ºé™·ï¼Œæäº¤å‡ ä¸ªä¿®å¤åéƒ½èƒ½æ­£å¸¸ä½¿ç”¨äº†ã€‚</p><p>docusaurus æœ‰ blog å’Œ doc çš„æ¦‚å¿µã€‚
docusaurus æœ¬èº«æ˜¯ facebook ä¸ºäº†æ”¯æŒæŠ€æœ¯æ–‡æ¡£å­˜åœ¨çš„ï¼Œå› æ­¤å¯¹ doc çš„æ”¯æŒéå¸¸å¥½ï¼Œdoc ä¸»è¦ç‰¹æ€§</p><ul><li>å¤šç‰ˆæœ¬</li><li>å¤šè¯­è¨€</li><li>é›†æˆ algolia æœç´¢</li><li>è‡ªå®šä¹‰æ’ä»¶</li><li>mdx</li><li>æ”¯æŒæ›¿æ¢å†…ç½® ç»„ä»¶</li></ul><p>doc é»˜è®¤ç›®å½•ä¸º /docsï¼Œå¯è‡ªå®šä¹‰ã€‚</p><p>blog ä¸ºå•ç¯‡æ–‡ç« ï¼Œé»˜è®¤ç›®å½•ä¸º /blogï¼Œæ”¯æŒè‡ªå®šä¹‰ slugï¼Œé»˜è®¤ slug ä¸ºæ³›åŒ–åçš„æ–‡ä»¶åã€‚</p><pre><code class="language-bash"># æ–°é¡¹ç›®åˆå§‹åŒ–
npx @docusaurus/init@latest init my-website classic
</code></pre><h2>æ„å»º</h2><p>å½’æ ¹ç»“åº•ï¼Œdocusaurus æ˜¯ä¸€ä¸ª npm åº“ï¼Œå› æ­¤å®ç°è‡ªå®šä¹‰éœ€è¦åŸºäºä¸€ä¸ª node é¡¹ç›®ã€‚
ç«™ç‚¹çš„æ„å»ºé¡¹ç›®ä½äº <a href="https://github.com/wenerme/wener/tree/master/site">site</a> ç›®å½•ä¸‹ï¼Œæ„å»ºè¿‡ç¨‹ä¸º</p><ul><li>åŒæ­¥ /story åˆ° /site/story</li><li>åŒæ­¥ /notes åˆ° /site/notes</li></ul><p>:::tip</p><p>åŒæ­¥è¿‡ç¨‹ä¼šè¿‡æ»¤éƒ¨åˆ† md æ–‡ä»¶ï¼Œdocusaurus é»˜è®¤ä¼šå¤„ç†æ‰€æœ‰ md æ–‡ä»¶ï¼Œä½†æ˜¯ wenerme/wener ä¸­çš„éƒ¨åˆ† md æ–‡ä»¶æ˜¯ä¸å¸Œæœ›è¢«æ„å»ºçš„ã€‚
å› æ­¤æˆ‘çš„è¿‡æ»¤é€»è¾‘æ˜¯åªåŒ…å«æ–‡ä»¶å¼€å¤´æœ‰ frontmatter çš„ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶å¼€å¤´ä¸º <code>---</code>ã€‚</p><p>:::</p><ul><li>é¢„å¤„ç† markdown<ul><li>ä¾‹å¦‚ å¼•ç”¨å¤–éƒ¨ markdown <a href="https://raw.githubusercontent.com/wenerme/wener/master/story/project/bbvm.md">story/project/bbvm.md</a></li></ul></li><li>è‡ªå®šä¹‰è„šæœ¬ç”Ÿæˆ sidebar<ul><li>docusaurus çš„ sidebar éœ€è¦æ‰‹åŠ¨ä¹¦å†™ï¼Œä½†æ–‡æ¡£è¿‡å¤šä¸”æ¯æ¬¡æ–°å¢åéƒ½éœ€è¦æ·»åŠ ï¼Œå› æ­¤å®ç°äº†è„šæœ¬è‡ªåŠ¨æ‰«æ</li><li><a href="https://github.com/wenerme/wener/blob/f34b8624b8cc55e539af282d275d4805650aee41/site/sidebars.js#L48-L65">site/sidebars.js#L48-L65</a></li></ul></li><li>ç«™ç‚¹æ„å»º<ul><li>æ„å»ºåä¼šç”Ÿæˆåˆ° /build ç›®å½•</li></ul></li></ul><h2>è‡ªåŠ¨åŒ–éƒ¨ç½²</h2><p>ç«™ç‚¹åŸºäº github <a href="https://github.com/wenerme/wener/blob/master/.github/workflows/build.yaml">action</a> è¿›è¡Œæ„å»ºï¼Œæ¯æ¬¡æ¨é€åä¼šè¿›è¡Œæ„å»ºï¼Œä¼šå°†æ„å»ºçš„å†…å®¹æ¨é€åˆ° <a href="https://github.com/wenerme/wener/deployments">gh-pages</a> åˆ†æ”¯ã€‚
æ¨é€çš„å†…å®¹åŒæ—¶åŒ…å«äº† CNAMEï¼Œå®ç°äº† wener.me åŸŸåçš„æ˜ å°„ã€‚</p><p>å®Œæˆ wener.me æ¨é€åä¿®æ”¹ CNAME ä¸º wener.tech æ¨é€åˆ° <a href="https://github.com/wenerme/wener.tech">wenerme/wener.tech</a>ï¼Œå®ç° wener.tech åŸŸåçš„æ˜ å°„ã€‚</p><h2>åŸŸåé…ç½®</h2><p>.me åŸŸååœ¨å›½å†…æ— æ³•å¤‡æ¡ˆï¼Œå› æ­¤ç›´æ¥æ‰˜ç®¡åœ¨äº† <a href="https://cloudflare.com">cloudflare.com</a>ï¼Œæ·»åŠ ä¸¤ä¸ªè®°å½•</p><pre><code>A wener.me 185.199.109.153
A wener.me 185.199.108.153
</code></pre><p>è‡³æ­¤ wener.me å¯ä»¥è¢«è®¿é—®ã€‚</p><p>å› ä¸º cloudflare åœ¨å›½å†…è®¿é—®é€Ÿåº¦è¾ƒæ…¢ï¼Œä¸” .me æ— æ³•å¤‡æ¡ˆçš„åŸå› ï¼Œå› æ­¤é•œåƒäº† wener.techã€‚</p><p>:::caution</p><p>å¾®ä¿¡ä¼šæ‹¦æˆªæ‰€æœ‰æ²¡æœ‰å¤‡æ¡ˆçš„åŸŸåï¼Œæç¤ºç”¨æˆ·æ˜¯å¦å‰å¾€ï¼Œéå¸¸å½±å“ä½“éªŒã€‚</p><p>:::</p><p>wener.tech ä½¿ç”¨é˜¿é‡Œäº‘ dcdn/å…¨ç«™åŠ é€Ÿ å®ç°ï¼Œæ·»åŠ åŸŸå <a href="http://www.wener.tech">www.wener.tech</a> ï¼ŒæŒ‡å‘ 185.199.108.153 å’Œ 185.199.109.153ã€‚
æ·»åŠ å®Œæˆåå‰å¾€åŸŸåè§£æï¼Œå°† <a href="http://www.wener.tech">www.wener.tech</a> CNAME åˆ° <a href="http://www.wener.tech.w.kunluncan.com">www.wener.tech.w.kunluncan.com</a> ã€‚å®Œæˆåå»ºè®®å¼€å¯ httpsã€‚</p><p>è‡³æ­¤ <a href="http://www.wener.tech">www.wener.tech</a> å¯ä»¥è¢«è®¿é—®ã€‚</p><p>:::caution dcdn çš„ å‘</p><ul><li>é˜¿é‡Œçš„ dcdn å®ç°å’Œ cloudflare ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†ä½“éªŒå·®å¾ˆå¤š</li><li>dcdn é€šè¿‡ CNAME å®ç°ï¼Œä¸»åŸŸå wener.tech æ— æ³•è¿›è¡Œ CNAMEï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ <a href="http://www.wener.tech">www.wener.tech</a></li><li>è®¿é—® wener.tech ä¼šå‘ç°å·¦ä¾§ä¾§è¾¹æ å¡é¡¿ï¼Œåº”è¯¥æ˜¯ dcdn çš„â€œä¼˜åŒ–â€å¯¼è‡´çš„<ul><li>wener.me æ²¡æœ‰è¿™ä¸ªé—®é¢˜</li></ul></li></ul><p>:::</p><h2>æ€»ç»“</h2><p>åŸºäº github action + cloudflare å¯ä»¥å¾ˆå®¹æ˜“å®ç°â€œå…è´¹â€çš„é™æ€ç«™ç‚¹æ‰˜ç®¡ã€‚
å¦‚æœéœ€è¦åŠ¨æ€èƒ½åŠ›ï¼Œå¯ä»¥é…åˆ <a href="https://github.com/vercel/next.js">next.js</a>+<a href="https://vercel.com/">vercel</a> å®ç°ã€‚ä¾‹å¦‚ <a href="https://apis.wener.me">apis.wener.me</a>ã€‚</p><p>cloudflare çœ‹ä¼¼æ²¡èµ·ä»€ä¹ˆä½œç”¨ï¼Œä½†æ˜¯å´æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºé»˜è®¤ github pages å’Œ vercel åœ¨å›½å†…éƒ½æ— æ³•è®¿é—®ï¼Œæˆ–è®¿é—®éƒ½æ˜¯é—´æ­‡æ€§èƒ½é€šï¼Œä½¿ç”¨ cloudflare è™½ç„¶é€Ÿåº¦åæ…¢ï¼Œä½†è‡³å°‘éƒ½èƒ½è®¿é—®ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ—¥å¸¸å·¥ä½œä¹‹å¤–]]></title>
        <id>out-of-daily-work</id>
        <link href="https://wener.me/story/out-of-daily-work"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[å·¥ä½œæ˜¯æ°¸è¿œä¹Ÿåšä¸å®Œçš„ï¼Œä½†åœ¨è¿™æ¡èµ°ä¸å®Œçš„è·¯ä¸Šä¹Ÿè¦å¤šçœ‹çœ‹æ²¿é€”çš„é£æ™¯ã€‚]]></summary>
        <content type="html"><![CDATA[<blockquote><p>å·¥ä½œæ˜¯æ°¸è¿œä¹Ÿåšä¸å®Œçš„ï¼Œä½†åœ¨è¿™æ¡èµ°ä¸å®Œçš„è·¯ä¸Šä¹Ÿè¦å¤šçœ‹çœ‹æ²¿é€”çš„é£æ™¯ã€‚</p></blockquote><p><strong>å‘ç°å’Œè§‚å¯Ÿ</strong></p><ul><li>æ£€æŸ¥é‚®ä»¶<ul><li>News</li><li>Mail list</li></ul></li><li>æµè§ˆ HN</li><li>æµè§ˆ Reddit</li><li>æµè§ˆ Twitter</li><li>æµè§ˆ IRC - çœ‹æœ‰ä»€ä¹ˆå€¼å¾—æ³¨æ„çš„</li><li>æµè§ˆ Telegram çœ‹çœ‹æœ‰è¶£çš„äº‹æƒ…</li><li>è¿‡æ‰å¾®ä¿¡æœªè¯»æ¶ˆæ¯</li><li>æ£€æŸ¥ Github<ul><li>å…³æ³¨é—®é¢˜æ˜¯å¦æœ‰æ‰€å˜åŒ–å’Œè¿›å±•</li><li>å…³æ³¨é¡¹ç›®æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬<ul><li>æ›´æ–° AlpineLinux åŒ…</li></ul></li></ul></li></ul><p>Back to work.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[K3S vs K0S]]></title>
        <id>k3s-vs-k0s</id>
        <link href="https://wener.me/story/k3s-vs-k0s"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[| vs.               | k0s                               | k3s                                   |]]></summary>
        <content type="html"><![CDATA[<table><thead><tr><th>vs.</th><th>k0s</th><th>k3s</th></tr></thead><tbody><tr><td>since</td><td>2020-06</td><td>2019-03</td></tr><tr><td>by</td><td>Mirants</td><td>Rancher/SUSE</td></tr><tr><td>Governance</td><td>Mirants</td><td>CNCF</td></tr><tr><td>Github</td><td><a href="https://github.com/k0sproject/k0s">k0sproject/k0s</a></td><td><a href="https://github.com/k3s-io/k3s">k3s-io/k3s</a></td></tr><tr><td>Stars</td><td><a href="https://github.com/k0sproject/k0s"><img src="https://img.shields.io/github/stars/k0sproject/k0s"/></a></td><td><a href="https://github.com/k3s-io/k3s"><img src="https://img.shields.io/github/stars/k3s-io/k3s"/></a></td></tr><tr><td>Issues</td><td><a href="https://github.com/k0sproject/k0s"><img src="https://img.shields.io/github/issues/k0sproject/k0s"/></a></td><td><a href="https://github.com/k3s-io/k3s"><img src="https://img.shields.io/github/issues/k3s-io/k3s"/></a></td></tr><tr><td>CNI</td><td>kube-router,calico</td><td>flannel</td></tr><tr><td>CRI</td><td>containerd</td><td>containerd</td></tr><tr><td>CSI</td><td>OpenEBS</td><td>local-path-provisioner</td></tr><tr><td>Windows</td><td>âœ… - calico</td><td>âŒ</td></tr><tr><td>Arch</td><td>amd64,arm,arm64</td><td>amd64,arm,arm64</td></tr><tr><td>LoadBalancer</td><td>n/a</td><td>klipper-lb</td></tr><tr><td>Ingress</td><td>n/a</td><td>traefik</td></tr><tr><td>Controller-Worker</td><td><a href="https://kubernetes.io/docs/tasks/extend-kubernetes/setup-konnectivity/">konnectivity</a></td><td><a href="https://github.com/rancher/remotedialer">remotedialer</a> - WebSocket åå‘ä»£ç†</td></tr><tr><td>æ–‡æ¡£</td><td>â­ï¸â­ï¸</td><td>â­ï¸â­ï¸</td></tr><tr><td>æˆç†Ÿ</td><td>â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸</td></tr><tr><td>å›½å†…ç¯å¢ƒå‹å¥½</td><td>â­ï¸</td><td>â­ï¸â­ï¸â­ï¸</td></tr><tr><td>Pod CIDR</td><td>10.244.0.0/16</td><td>10.42.0.0/16</td></tr><tr><td>Service CIDR</td><td>10.96.0.0/12</td><td>10.43.0.0/16</td></tr><tr><td>CoreDNS</td><td>10.96.0.10</td><td>10.43.0.10</td></tr><tr><td>configuration</td><td>/etc/k0s/k0s.yaml</td><td>/etc/rancher/k3s/config.yaml</td></tr><tr><td>registry</td><td>/etc/k0s/k0s.yaml</td><td>/etc/rancher/k3s/registry.yaml</td></tr><tr><td>data-dir</td><td>/var/lib/k0s</td><td>/var/lib/rancher/k3s</td></tr><tr><td>bin-dir</td><td>/var/lib/k0s/bin</td><td>n/a</td></tr><tr><td>kubeconfig</td><td>/var/lib/k0s/pki/admin.conf</td><td>/etc/rancher/k3s/k3s.yaml</td></tr><tr><td>manifest</td><td>/var/lib/k0s/manifests</td><td>/var/lib/rancher/k3s/server/manifests</td></tr><tr><td>local storage</td><td>/var/openebs/local</td><td>/var/lib/rancher/k3s/storage/</td></tr><tr><td>æœåŠ¡è¿è¡Œæ–¹å¼</td><td>supervisor - ç‹¬ç«‹å¤šè¿›ç¨‹</td><td>embeded - å•è¿›ç¨‹</td></tr><tr><td>containerd</td><td>bundled</td><td>ç³»ç»Ÿ</td></tr></tbody></table><ul><li><a href="https://wener.me/notes/devops/kubernetes/distro/k0s">k0s</a><ul><li>CIS security benchmark</li><li>ç¬¦åˆ FIPS 140-2 è¦æ±‚</li><li>bundled<ul><li>iptables, containerd, ctr, runc, etcd, kine</li><li>openebs<ul><li>openebs-hostpath -&gt; /var/openebs/local</li></ul></li><li>kube-router</li><li>konnectivity</li><li>helm-controller</li></ul></li></ul></li><li><a href="https://wener.me/notes/devops/kubernetes/distro/k3s">k3s</a><ul><li>CNCF é¡¹ç›® - è„±ç¦»äº† rancher</li><li>bundled<ul><li>containerd, ctr, runc, etcd, kine</li><li>helm-controller - æ”¯æŒéƒ¨ç½² helm chart, CDR æ§åˆ¶</li><li>traefik - æä¾› ingress èƒ½åŠ› - é€šè¿‡ helm éƒ¨ç½²</li><li>local-path-provisioner - æä¾›åŸºäºæœ¬åœ°ç›®å½•çš„å­˜å‚¨ç±»<ul><li>é»˜è®¤ /var/lib/rancher/k3s/storage</li></ul></li><li>klipper-lb - åŸºäº iptable è½¬å‘çš„è´Ÿè½½å‡è¡¡</li></ul></li></ul></li></ul><p>:::caution</p><ul><li>k3s é»˜è®¤åŒ…å«è¾ƒå¤šç»„ä»¶ï¼Œéƒ¨ç½²å å¯ä½¿ç”¨æ€§ æ›´é«˜ï¼Œä½†éƒ¨åˆ†ç»„ä»¶ï¼ˆ traefik,klipper-lb,local-path-provisioner ï¼‰ä¸å»ºè®®ç”Ÿäº§ä½¿ç”¨ï¼Œæä¾›è¿™äº›ç»„ä»¶æ›´å¤šæ˜¯ä¸ºäº†ä¿è¯åŠŸèƒ½å®Œæ•´ï¼Œå¼€ç®±å³ç”¨ã€‚</li><li>ä½¿ç”¨ k3s ä¸æ¨èä½¿ç”¨å†…ç½® traefik å’Œ klipper-lb<ul><li>ingress å»ºè®®è‡ªè¡Œå®‰è£… - æ¯”è¾ƒé‡è¦çš„æ ¸å¿ƒç»„ä»¶</li><li>å»ºè®®ä½¿ç”¨ metallb æ›¿ä»£ klipper-lb</li></ul></li><li>å› ä¸º Controller-Worker ç½‘ç»œä¸åŒï¼Œk3s å’Œ k0s æ— æ³•æ··åˆä½¿ç”¨</li></ul><p>:::</p><p><strong>å‘½ä»¤å¯¹æ¯”</strong></p><table><thead><tr><th>k0s</th><th>k3s</th></tr></thead><tbody><tr><td>k0s systinfo</td><td>./contrib/util/check-config.sh</td></tr><tr><td>k0s backup</td><td>k3s etcd-snapshot</td></tr><tr><td>k0s restore</td><td>k3s server --cluster-reset-restore-path</td></tr><tr><td>k0s controller</td><td>k3s server</td></tr><tr><td>k0s worker</td><td>k3s agent</td></tr><tr><td>n/a</td><td>k3s crictl</td></tr><tr><td>k0s install</td><td><a href="https://get.k3s.io">https://get.k3s.io</a> ä¼šå®‰è£… systemd, openrc æœåŠ¡</td></tr><tr><td>k0s reset</td><td>n/a</td></tr><tr><td>k0s kubeconfig create</td><td>n/a</td></tr><tr><td>k0sctl</td><td>n/a</td></tr><tr><td>k0sctl apply</td><td>~autok3s</td></tr><tr><td>k0sctl backup</td><td>n/a</td></tr><tr><td>---</td><td>---</td></tr><tr><td>k0s kubectl</td><td>k3s kubectl</td></tr><tr><td>k0s ctr</td><td>k3s ctr</td></tr></tbody></table><h2>å¦‚ä½•é€‰æ‹©</h2><p><strong>ç›¸åŒç‚¹</strong></p><ul><li>é¢å‘ç›¸åŒç”¨æˆ·ç¾¤ä½“å’Œä½¿ç”¨åœºæ™¯ï¼Œéå¸¸ç±»ä¼¼</li><li>æ ¸å¿ƒéƒ½ä½¿ç”¨ kine - åŒºåˆ«ä¸å¤§</li><li>éƒ½æœ‰å¤§çš„ä¼ä¸šæ”¯æ’‘å¼€å‘</li></ul><p><strong>é€‰æ‹©è€ƒé‡</strong></p><ul><li>k3s<ul><li>æ›´æˆç†Ÿ - å­˜åœ¨æ—¶é—´æ›´é•¿ï¼Œä½¿ç”¨çš„æ›´ç‹¬ç«‹</li><li>ç¤¾åŒºæ›´å¤§ - ç¤¾åŒºè¿˜ä¸ rancherã€rke æœ‰äº¤é›†</li><li>ä¸­æ–‡åŒ–ç¤¾åŒºå‹å¥½</li></ul></li><li>k0s<ul><li>æ›´æ–° - 2020 å¹´ - ç›®å‰å·²ç»æˆç†Ÿï¼Œå¯ä»¥ç”¨äºç”Ÿäº§</li><li>ç”¨æˆ·ä½“éªŒæ›´å¥½</li><li><strong>k0sctl</strong><ul><li>èƒ½æ›´å¥½çš„è¾…åŠ©ç»´æŠ¤æ›´å¤šçš„é›†ç¾¤ï¼Œå‡å°‘å¯¹ è„šæœ¬/ansible çš„ä¾èµ–ã€‚</li><li>æ›´å¥½å‡çº§</li><li>æ›´å¥½å¤‡ä»½</li></ul></li></ul></li></ul><h2>ä¸ºä»€é€‰æ‹© K0S</h2><ul><li>k0s ä½œä¸º supervisor è¿è¡Œ - ğŸŒŸ<ul><li>æ¯ä¸ªè¿›ç¨‹ç‹¬ç«‹ - etcd, k0s-api, kube-apiserver<ul><li>æ–¹ä¾¿è°ƒè¯•ï¼Œæ’æŸ¥é—®é¢˜ - èƒ½æ¸…æ¥šçŸ¥é“å“ªä¸ªè¿›ç¨‹å¯åŠ¨äº†æ²¡å¯åŠ¨</li><li>èƒ½çœ‹åˆ°æ‰€æœ‰å®é™…è¿è¡Œå‚æ•°</li><li>å¯ä»¥å•ç‹¬ kill è¿›ç¨‹ - ä¾‹å¦‚: ä¿®æ”¹äº† containerd é•œåƒé…ç½®ï¼Œåªèƒ½é€šè¿‡ kill æ¥ä½¿æ–°çš„é…ç½®ç”Ÿæ•ˆ<ul><li>ä¸éœ€è¦å¯åœå…¨éƒ¨æœåŠ¡</li></ul></li></ul></li><li>ä»£ç éƒ¨ç½²è¿è¡Œé€»è¾‘æ¸…æ™° - å¦‚æœéœ€è¦æ›´æ·±å…¥äº†è§£</li></ul></li><li>k0s bundled äº†æ›´å¤šä¾èµ– - â­ï¸ - containerd, iptables<ul><li>å‡ ä¹å¯¹ç³»ç»Ÿæ²¡ä»€ä¹ˆé¢å¤–ä¾èµ–</li></ul></li><li>k0sctl è¾…åŠ©éƒ¨ç½²<ul><li>å¦‚æœéœ€è¦å¯è‡ªè¡Œè¿›è¡Œå®šåˆ¶åŒ–</li><li>æ›¿ä»£éƒ¨åˆ† ansible å·¥ä½œ</li></ul></li><li>é»˜è®¤ control plane å’Œ worker åˆ†ç¦»<ul><li>âš ï¸ éƒ¨ç½²æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹</li></ul></li><li>ä½¿ç”¨ konnectivity - ç›¸å¯¹æ›´ kubernetes</li></ul><p>:::caution</p><p>é»˜è®¤ç”¨åˆ°äº† k8s.gcr.io é•œåƒ - å›½å†…ç¯å¢ƒéƒ¨ç½²éœ€è¦æ³¨æ„ï¼Œå»ºè®®ç”¨ airgap åŒ…å¯¼å…¥åŸºç¡€é•œåƒã€‚</p><p>:::</p><h2>ç»„ä»¶ç®€ä»‹</h2><ul><li><a href="https://wener.me/notes/devops/kubernetes/distro/kine">kine</a>
k3s å’Œ k0s æœ€æ ¸å¿ƒç»„ä»¶<ul><li>æä¾› etcd èƒ½åŠ›</li><li>åç«¯æ”¯æŒ etcd,sqlite,mysql,postgresql,dqlite</li></ul></li><li><a href="https://wener.me/notes/devops/kubernetes/network/traefik-ingress">traefik</a><ul><li>æä¾› Ingress èƒ½åŠ›</li></ul></li><li><a href="https://github.com/k3s-io/helm-controller">k3s-io/helm-controller</a><ul><li>æ”¯æŒéƒ¨ç½² helm chart</li><li>é€šè¿‡ CDR æ§åˆ¶</li></ul></li><li>CNI - å®¹å™¨ç½‘ç»œ<ul><li><a href="https://wener.me/notes/devops/kubernetes/network/flannel/">flannel</a></li><li><a href="https://wener.me/notes/devops/kubernetes/network/calico/">calico</a></li><li><a href="https://wener.me/notes/devops/kubernetes/network/kube-router/">kube-router</a></li></ul></li><li>CSI - å®¹å™¨å­˜å‚¨<ul><li><a href="https://wener.me/notes/devops/kubernetes/storage/local-path-provisioner/">local-path-provisioner</a><ul><li>åŸºäºæœ¬åœ°è·¯å¾„æä¾› volume</li></ul></li><li><a href="https://wener.me/notes/devops/kubernetes/storage/openebs/">openebs</a></li></ul></li><li>LoadBalancer<ul><li><a href="https://github.com/k3s-io/klipper-lb">k3s-io/klipper-lb</a><ul><li>åŸºäº iptable æä¾› ClusterIP èƒ½åŠ›</li></ul></li><li><a href="https://wener.me/notes/devops/kubernetes/network/metallb/">metallb</a></li></ul></li></ul><h2>å‚è€ƒ</h2><ul><li><a href="https://landscape.cncf.io/card-mode?category=certified-kubernetes-installer&amp;grouping=category">certified-kubernetes-installer</a></li></ul><h1>ä¸ºä»€ä¹ˆä¼šå­˜åœ¨ä¸åŒå‘è¡Œç‰ˆ</h1><p>K8S ä½œä¸ºæœ€åŸå§‹çš„é¡¹ç›®ï¼Œæ´¾ç”Ÿå‡ºæ¥å¾ˆå¤š åˆ†æ”¯/å‘å¸ƒç‰ˆã€‚</p><p>Kubernetes çš„æ ¸å¿ƒèƒ½åŠ›ä¸ºèµ„æºè°ƒåº¦ï¼Œä¸»è¦èµ„æºä¸º Pod/å®¹å™¨ç»„/è®¡ç®—èµ„æºã€‚
å› ä¸ºæ˜¯åˆ†å¸ƒå¼å¤šèŠ‚ç‚¹ï¼Œæ‰€ä»¥å¯¹ç½‘ç»œæœ‰è¦æ±‚ã€‚Pod è°ƒåº¦ä¸»è¦æä¾›è®¡ç®—èƒ½åŠ›ï¼Œå®é™…ä½¿ç”¨è¿˜ä¼šéœ€è¦å­˜å‚¨èƒ½åŠ›ã€‚
ä¹Ÿå°±æ˜¯è¯´ Kubernetes æ¶‰åŠåˆ°æ ¸å¿ƒçš„ä¸‰å…ƒç´ </p><ul><li>è®¡ç®—</li><li>ç½‘ç»œ</li><li>å­˜å‚¨</li></ul><p>Kubernetes æ ¸å¿ƒè°ƒåº¦è®¡ç®—èµ„æºï¼Œä½†å¯¹äºç½‘ç»œå’Œå­˜å‚¨æ˜¯ æ— æ„è§/Unopinioned ï¼Œä½†å®é™…éƒ¨ç½²ä½¿ç”¨æ—¶è¿™æ—¶å€™åˆä¸å¯é¿å…çš„è¦é¢å¯¹è¿™äº›é—®é¢˜ã€‚
å› æ­¤ä¸åŒçš„ å‘å¸ƒç‰ˆ/Distribution å°±æ˜¯å¯¹è¿™äº›é—®é¢˜ä¸åŒçš„çœ‹æ³•ã€‚</p><h2>K8S è¦æ±‚</h2><p>Kubernetes ç”± Google å¼€å‘ï¼Œä½†ä¸æ˜¯æ‰€æœ‰äººéƒ½æœ‰é‚£ä¹ˆå¤§è§„æ¨¡çš„é—®é¢˜ï¼Œè€Œå¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯å°è§„æ¨¡ï¼Œå…ˆè®© K8S â€œè·‘èµ·æ¥â€ã€‚</p><p>Kubernetes è‡ªèº«å› ä¸ºå¯¹åŸºç¡€è®¾æ–½å±‚ æ— æ„è§/Unopinionedï¼Œå› æ­¤é»˜è®¤æ˜¯æ²¡æœ‰éƒ¨ç½²å·¥å…·ï¼Œåªæœ‰è¦æ±‚ï¼š</p><ul><li>è¦æ±‚èŠ‚ç‚¹è¿è¡Œåœ¨å¹³å¦ç½‘ç»œ</li><li>è¦æ±‚ etcd èƒ½åŠ›çš„çŠ¶æ€å­˜å‚¨</li><li>è¦æ±‚ cloud-controller æä¾›èŠ‚ç‚¹ä¿¡æ¯</li><li>è¦æ±‚ å®¹å™¨è¿è¡Œæ—¶</li></ul><p>åœ¨è¿™äº›åŸºç¡€ä¹‹ä¸Šï¼ŒKubernetes æä¾›åŸºäºçŠ¶æ€çš„ æ¥å£ è¿›è¡Œèµ„æºè°ƒåº¦ã€‚</p><h2>K8S éƒ¨ç½²</h2><p>é™¤äº†æ»¡è¶³ K8S çš„è¦æ±‚ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶è¿˜å¸Œæœ›èƒ½æ–¹ä¾¿å¿«æ·çš„ç®¡ç†éƒ¨ç½²ã€‚
K8S æä¾›äº† kubeadm è¿›è¡Œå®‰è£…ï¼Œä¸åŒçš„å‘å¸ƒç‰ˆä¹Ÿéœ€è¦æä¾›ç±»ä¼¼çš„å·¥å…·ï¼Œä½†å·¥å…·åŒºåˆ†ä¸ºä¸¤éƒ¨åˆ†</p><ol><li>è¿œç¨‹å¼€é€šéƒ¨ç½²<ul><li>SSH</li><li>æ§åˆ¶èŠ‚ç‚¹é€šè¿‡å·¥å…·éƒ¨ç½²åˆ°å¤šä¸ªèŠ‚ç‚¹</li></ul></li><li>å¼€é€šéƒ¨ç½²çš„æå‰å‡†å¤‡<ul><li>CA è¯ä¹¦</li><li>ETCD/å­˜å‚¨åˆå§‹åŒ–</li><li>ç½‘ç»œè®¾ç½®</li><li>Bootstrap</li></ul></li></ol><p>kubeadm å’Œ k0s, k3s éƒ½å±äºç¬¬äºŒç§åœºæ™¯ï¼Œç¬¬ä¸€ç§åœºæ™¯çš„å·¥å…·ä¾‹å¦‚</p><ul><li>autok3s</li><li>rke</li><li>ansible</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PostgreSQL ORDER BY+LIMIT æ—¶çš„ç´¢å¼•é€‰æ‹©]]></title>
        <id>postgresql-use-wrong-index-with-order-and-limit</id>
        <link href="https://wener.me/story/postgresql-use-wrong-index-with-order-and-limit"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[å½“ä½¿ç”¨ ORDER BY+LIMIT æ—¶ PostgreSQL å¯èƒ½ä¼šé€‰æ‹©æ›´å·®çš„æ‰§è¡Œæ–¹å¼ï¼Œæ•°æ®é‡å¤§æ—¶ï¼Œæ‰§è¡Œæ•ˆç‡ç›¸å·®æˆç™¾ä¸Šåƒå€ã€‚]]></summary>
        <content type="html"><![CDATA[<p>å½“ä½¿ç”¨ ORDER BY+LIMIT æ—¶ PostgreSQL å¯èƒ½ä¼šé€‰æ‹©æ›´å·®çš„æ‰§è¡Œæ–¹å¼ï¼Œæ•°æ®é‡å¤§æ—¶ï¼Œæ‰§è¡Œæ•ˆç‡ç›¸å·®æˆç™¾ä¸Šåƒå€ã€‚</p><h2>ç´¢å¼•é€‰æ‹©é—®é¢˜</h2><p>å‡è®¾ç»“æ„å¦‚ä¸‹</p><pre><code class="language-sql">create table organizations(
  id bigserial primary key,
  jgmc text,
  clrq date
);

create index if not exists idx_organizations_clrq on ic.organizations (clrq);
create index if not exists idx_organizations_jgmc_fts on ic.organizations using pgroonga (jgmc);
</code></pre><p>æŸ¥è¯¢é€šå¸¸åŸºäº clrq æ’åºï¼Œä½†ä¼š æœç´¢ jgmcã€‚</p><pre><code class="language-sql">explain analyse verbose
select jgmc, clrq, id
from ic.organizations
where jgmc &amp;@~ &#x27;ç™¾åº¦&#x27;
  and clrq is not null
order by clrq desc
limit 30 offset 0
;
</code></pre><p>:::tip ä½¿ç”¨äº† clrq is not null è€Œé nulls last</p><p>å› ä¸ºç´¢å¼•é»˜è®¤éšå« nulls lastï¼Œä¹Ÿå°±æ˜¯è¯´ <code>order by clrq asc</code> éšå« <code>order by clrq asc nulls last</code>ã€‚
å½“ä½¿ç”¨ <code>order by clrq desc nulls last</code> æ—¶ä¸ä¼šé€‰æ‹© <code>idx_organizations_clrq</code> ç´¢å¼•ï¼Œå› ä¸º nulls é¡ºåºä¸åŒ¹é…ã€‚
å› æ­¤ä½¿ç”¨ <code>is not null</code> æ’é™¤ã€‚</p><p>:::</p><p>ç»™å‡ºçš„æ‰§è¡Œè®¡åˆ’å’Œç»“æœå¦‚ä¸‹</p><pre><code>Limit  (cost=0.43..33132.51 rows=30 width=1284) (actual time=4678.918..13104.109 rows=6 loops=1)
&quot;  Output: jgmc, clrq, id&quot;
  -&gt;  Index Scan Backward using idx_organizations_clrq on ic.organizations  (cost=0.43..4069724.46 rows=3685 width=1284) (actual time=4678.916..13104.101 rows=6 loops=1)
&quot;        Output: jgmc, clrq, id&quot;
        Index Cond: (organizations.clrq IS NOT NULL)
        Filter: (organizations.jgmc &amp;@~ &#x27;ç™¾åº¦&#x27;::text)
        Rows Removed by Filter: 3685166
Planning Time: 0.826 ms
Execution Time: 13104.226 ms
</code></pre><p>å®é™…æ‰§è¡Œäº† 13sï¼Œé€‰æ‹©äº† idx_organizations_clrq ç´¢å¼•ã€‚</p><p>ä½†å¦‚æœå»æ‰ LIMITï¼š</p><pre><code class="language-sql">explain analyse verbose
select jgmc, clrq, id
from ic.organizations
where jgmc &amp;@~ &#x27;ç™¾åº¦&#x27;
  and clrq is not null
order by clrq desc
-- limit 30 offset 0
;
</code></pre><p>ç»™å‡ºçš„è®¡åˆ’å¦‚ä¸‹</p><pre><code>Sort  (cost=40479.53..40488.74 rows=3685 width=1284) (actual time=19.771..19.774 rows=6 loops=1)
&quot;  Output: jgmc, clrq, id&quot;
  Sort Key: organizations.clrq DESC
  Sort Method: quicksort  Memory: 36kB
  -&gt;  Index Scan using idx_organizations_jgmc_fts on ic.organizations  (cost=0.00..40261.24 rows=3685 width=1284) (actual time=19.716..19.737 rows=6 loops=1)
&quot;        Output: jgmc, clrq, id&quot;
        Index Cond: (organizations.jgmc &amp;@~ &#x27;ç™¾åº¦&#x27;::text)
        Filter: (organizations.clrq IS NOT NULL)
Planning Time: 0.706 ms
Execution Time: 21.824 ms
</code></pre><p>å®é™…æ‰§è¡Œåªéœ€è¦ 21msï¼Œé€‰æ‹©äº† idx_organizations_jgmc_fts ç´¢å¼•ã€‚</p><p>PostgreSQL åœ¨è¿™æ ·çš„åœºæ™¯ä¸‹é€‰æ‹©äº†é”™è¯¯çš„ç´¢å¼•ï¼Œå¯¼è‡´æŸ¥è¯¢æ—¶é—´ç›¸å·® 600 å€ã€‚</p><h2>ç´¢å¼•é€‰æ‹©åŸå› </h2><p>ORDER BY+LIMIT è®©æŸ¥è¯¢æœ‰ <strong>æå‰ç»“æŸçš„å¯èƒ½</strong>ã€‚</p><p>ä¾‹å¦‚ å®é™…æ•°æ® 10k,ä½† limit 10, åªéœ€ä½¿ç”¨ç´¢å¼•æ‰«æ 10 æ¡æ•°æ®ä¾¿å¯ä»¥åœæ­¢æ‰§è¡Œï¼Œè€Œä¸éœ€è¦å…ˆåˆ¤æ–­ å…¶ä»– æ¡ä»¶ã€‚</p><p>å› æ­¤ PostgreSQL çš„ optimizer æœ‰è®©è¿™ç§é€‰æ‹©ä¼˜å…ˆçš„é€»è¾‘ <a href="https://github.com/postgres/postgres/blob/REL_13_STABLE/src/backend/optimizer/util/pathnode.c#L3633-L3753">pathnode.c#L3633-L3753</a>ã€‚</p><ul><li>create_limit_path é’ˆå¯¹ LIMIT/OFFSET åˆ›å»ºæ‰§è¡Œè®¡åˆ’<ul><li>adjust_limit_rows_costs è°ƒæ•´æ­¤æ—¶çš„ rows costs</li></ul></li></ul><pre><code class="language-c" metastring="title=&quot;adjust_limit_rows_costs&quot;" title="&quot;adjust_limit_rows_costs&quot;">*total_cost = *startup_cost +
  (input_total_cost - input_startup_cost)
  * count_rows / input_rows;
</code></pre><table><thead><tr><th align="right">var</th><th>meaning</th></tr></thead><tbody><tr><td align="right">total_cost</td><td>æ€» cost</td></tr><tr><td align="right">startup_cost</td><td>åˆå§‹ cost</td></tr><tr><td align="right">input_total_cost</td><td>è¾“å…¥æ€» cost</td></tr><tr><td align="right">input_startup_cost</td><td>è¾“å…¥åˆå§‹æ€» cost</td></tr><tr><td align="right">count_rows</td><td>limit</td></tr><tr><td align="right">input_rows</td><td>è¾“å…¥ è¡Œ</td></tr></tbody></table><p>åœ¨è¿™ä¸ªè°ƒæ•´é€»è¾‘é‡Œä¼šå°†ç°åœ¨çš„è¿‡ç¨‹ cost <code>input_total_cost - input_startup_cost</code> ä¹˜ä»¥ ç³»æ•° <code>count_rows / input_rows</code>ã€‚
è¿™ä¸ªç³»æ•°ä¾¿ä¼šä½¿å¾— ORDER BY+LIMIT æ—¶ä¼˜å…ˆé€‰æ‹©ç´¢å¼•ã€‚</p><p>å› ä¸ºä¸¤ä¸ªè®¡åˆ’çš„ rows ç›¸åŒï¼Œä¼˜å…ˆäº† æ’åºç´¢å¼•åˆ™ä¼šé€‰æ‹©æ’åºç´¢å¼•æ–¹æ¡ˆã€‚</p><h2>è§£å†³é—®é¢˜</h2><p>:::tip ç›®æ ‡</p><p>é¿å…é€‰æ‹©æ’åºç´¢å¼•</p><p>:::</p><ol><li>ä½¿ç”¨ noop function é¿å…ç´¢å¼•</li></ol><pre><code class="language-sql">explain verbose
select clrq, jgmc, id
from ic.organizations
where jgmc &amp;@~ &#x27;ç™¾åº¦&#x27;
  and clrq is not null
order by coalesce(clrq) desc
limit 30 offset 0
;
</code></pre><ol start="2"><li>ä½¿ç”¨ expression é¿å…ç´¢å¼•</li></ol><pre><code class="language-sql">explain verbose
select clrq, jgmc, id
from ic.organizations
where jgmc &amp;@~ &#x27;ç™¾åº¦&#x27;
  and clrq is not null
order by clrq+0 desc
limit 30 offset 0
;
</code></pre><ol start="3"><li>æ·»åŠ  nulls é¡ºåºé¿å…ç´¢å¼•</li></ol><ul><li>å› ä¸º index é»˜è®¤ asc nulls last å› æ­¤ asc å’Œ desc é€‰æ‹©ä¸åŒ nulls é¡ºåº</li><li>where is not null</li><li>desc nulls last</li><li>asc nulls first</li></ul><pre><code class="language-sql">explain verbose
select clrq, jgmc, id
from ic.organizations
where jgmc &amp;@~ &#x27;ç™¾åº¦&#x27;
  and clrq is not null
order by clrq desc nulls last
limit 30 offset 0
;
</code></pre><ol start="4"><li>è°ƒæ•´ STATISTICS</li></ol><ul><li>åœ¨ä¸¤è€…ç»Ÿè®¡ rows ä¸åŒçš„æƒ…å†µä¸‹ - è¿™é‡Œä¸é€‚ç”¨</li><li>SET STATISTICS</li><li>CREATE STATISTICS</li></ul><h2>STATISTICS åœºæ™¯</h2><p>STATISTICS å½±å“ n_distinctï¼Œn_distinct å½±å“ inputs_rowsï¼Œå¤šä¸ªè®¡åˆ’ç›¸åŒï¼Œå¯å¢åŠ  STATISTICS é¿å…é”™è¯¯é€‰æ‹©ç´¢å¼•ã€‚</p><pre><code class="language-sql">SELECT attname,
       n_distinct,
       null_frac
FROM pg_stats
WHERE tablename = &#x27;organizations&#x27;
  and attname in (&#x27;clrq&#x27;, &#x27;jgmc&#x27;);
</code></pre><table><thead><tr><th align="left">attname</th><th align="left">n_distinct</th><th align="left">null_frac</th></tr></thead><tbody><tr><td align="left">clrq</td><td align="left">7914</td><td align="left">0.00030666665</td></tr><tr><td align="left">jgmc</td><td align="left">-0.99441195</td><td align="left">0.0030133333</td></tr></tbody></table><pre><code class="language-sql">SELECT relname, reltuples, relpages
FROM pg_class
WHERE relname LIKE &#x27;organizations&#x27;;
</code></pre><table><thead><tr><th align="left">relname</th><th align="left">reltuples</th><th align="left">relpages</th></tr></thead><tbody><tr><td align="left">organizations</td><td align="left">3686376</td><td align="left">1116103</td></tr></tbody></table><h2>å‚è€ƒ</h2><ul><li><a href="https://gocardless.com/blog/debugging-the-postgres-query-planner/">https://gocardless.com/blog/debugging-the-postgres-query-planner/</a></li><li><a href="https://dba.stackexchange.com/a/258986/234272">https://dba.stackexchange.com/a/258986/234272</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç³»ç»Ÿç›˜æ¢å¤]]></title>
        <id>rescue-root-disk</id>
        <link href="https://wener.me/story/rescue-root-disk"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[å–œæ¬¢ä½¿ç”¨ é—ªå­˜ç›˜/U ç›˜ ä½œä¸º Linux ç³»ç»Ÿç›˜ï¼Œä½† U ç›˜ ä½¿ç”¨å¯¿å‘½æœ‰é™ï¼Œå½“å¼‚å¸¸åéœ€è¦å¯¹ç³»ç»Ÿç›˜è¿›è¡Œæ›´æ¢ã€‚]]></summary>
        <content type="html"><![CDATA[<p>å–œæ¬¢ä½¿ç”¨ é—ªå­˜ç›˜/U ç›˜ ä½œä¸º Linux ç³»ç»Ÿç›˜ï¼Œä½† U ç›˜ ä½¿ç”¨å¯¿å‘½æœ‰é™ï¼Œå½“å¼‚å¸¸åéœ€è¦å¯¹ç³»ç»Ÿç›˜è¿›è¡Œæ›´æ¢ã€‚</p><h2>ç°çŠ¶</h2><p>ä½¿ç”¨ SanDisk CZ430 ä½œä¸º ç³»ç»Ÿç›˜/Root åˆ†åŒº</p><p><strong>lsblk</strong></p><pre><code>NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    1 114.6G  0 disk
â”œâ”€sda1   8:1    1   128M  0 part /boot
â””â”€sda2   8:2    1 114.4G  0 part /
</code></pre><p><strong>df -h /</strong></p><pre><code>Filesystem      Size  Used Avail Use% Mounted on
/dev/sda2       113G  2.2G  106G   2% /
</code></pre><p>åœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œ U ç›˜ å¼‚å¸¸ï¼Œç³»ç»Ÿè¢«é‡æ–°æŒ‚è½½ä¸ºåªè¯»ã€‚</p><pre><code class="language-bash">touch ~/test
</code></pre><pre><code>touch: cannot touch &#x27;/home/admin/test&#x27;: Read-only file system
</code></pre><p>dmesg å¯çœ‹åˆ°å¼‚å¸¸ä¿¡æ¯ï¼Œå‡ ä¸ªæœˆå‰å·²ç»å‡ºé—®é¢˜äº†ï¼Œå› ä¸ºç³»ç»Ÿè¿˜èƒ½æ­£å¸¸ä½¿ç”¨æš‚ä¸”æ²¡ç®¡ã€‚</p><pre><code class="language-dmesg" metastring="title=&quot;dmesg -T&quot;" title="&quot;dmesg">[Tue Sep  7 16:48:16 2021] sd 2:0:0:0: [sda] tag#0 UNKNOWN(0x2003) Result: hostbyte=0x00 driverbyte=0x08 cmd_age=0s
[Tue Sep  7 16:48:16 2021] sd 2:0:0:0: [sda] tag#0 Sense Key : 0x7 [current]
[Tue Sep  7 16:48:16 2021] sd 2:0:0:0: [sda] tag#0 ASC=0x27 ASCQ=0x0
[Tue Sep  7 16:48:16 2021] sd 2:0:0:0: [sda] tag#0 CDB: opcode=0x2a 2a 00 00 04 16 90 00 00 08 00
[Tue Sep  7 16:48:16 2021] blk_update_request: critical target error, dev sda, sector 267920 op 0x1:(WRITE) flags 0x103000 phys_seg 1 prio class 0
[Tue Sep  7 16:48:16 2021] Buffer I/O error on dev sda2, logical block 466, lost async page write
</code></pre><h2>å¤‡ä»½æ¢å¤æ–¹æ¡ˆ</h2><p>å°†ç°åœ¨æ•°æ®å®Œæ•´å¤‡ä»½åˆ°æ–°çš„ U ç›˜ï¼Œé‡å¯å³å¯ï¼Œä½†æ¢å¤å¤‡ä»½æœ‰å¥½å‡ ç§æ–¹å¼ã€‚</p><ol><li>å…¨ç›˜ dd</li></ol><ul><li>é€Ÿåº¦æ…¢</li><li>ç®€å•æš´åŠ›</li><li>éœ€è¦æä¾›è‡³å°‘ç°åœ¨ç£ç›˜å¤§å°çš„å­˜å‚¨</li></ul><ol start="2"><li>é‡è£… - ä»…æ‹·è´æ•°æ®</li></ol><ul><li>éº»çƒ¦</li></ul><ol start="3"><li>æ¢å¤åˆ†åŒºã€æ¢å¤æ•°æ®</li></ol><ul><li>é«˜æ•ˆ</li><li>éœ€è¦å¤šä¸€ç‚¹æ“ä½œ</li><li>æ–°ç£ç›˜åªéœ€è¦å·²ç”¨ç©ºé—´å¤§å°å³å¯</li></ul><h2>æ¢å¤</h2><p>å› ä¸ºè¿™æ˜¯å·²ç»ç¬¬ä¸‰å››æ¬¡æ¢å¤äº†ï¼Œä¹‹å‰éƒ½æ˜¯ ddï¼Œä½†è¿™æ¬¡æ‰“ç®—ç”¨æ›´é«˜æ•ˆçš„æ–¹å¼ï¼Œä¸”è¿™æ¬¡çš„ç³»ç»Ÿç›˜ä¸º 128Gï¼Œä½†ç›®å‰åªæœ‰ 64G çš„ç©ºé—² U ç›˜ï¼Œæ•…é€‰æ‹©æ–¹æ¡ˆ 3ã€‚</p><p><strong>æ¢å¤è¿‡ç¨‹</strong></p><ol start="0"><li>å‡†å¤‡å¤‡ä»½ç›˜</li><li>åˆ†åŒºè¡¨å¤‡ä»½ &amp; å¯åŠ¨åˆ†åŒºå¤‡ä»½</li><li>root åˆ†åŒº å¤‡ä»½ &amp; ä¿®å¤</li><li>éªŒè¯</li><li>å…³æœº</li><li>å–æ‰åçš„ U ç›˜</li><li>å¼€æœº</li></ol><p>:::tip æ¢å¤å¤‡ä»½æ³¨æ„äº‹é¡¹</p><ul><li>é€‰æ‹©ä¸€ä¸ªå¯å†™ç›®å½• - tmpfs,shm - ä¾‹å¦‚: /run, /var/run, /tmp, /dev/shm</li></ul><p>:::</p><h3>å‡†å¤‡å¤‡ä»½ç›˜</h3><ul><li>å¤‡ä»½ç›˜ /dev/sdb 64Gï¼ŒåŒ SanDisk CZ430</li></ul><pre><code class="language-pre" metastring="title=&quot;lsblk&quot;" title="&quot;lsblk&quot;">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    1 114.6G  0 disk
â”œâ”€sda1   8:1    1   128M  0 part /boot
â””â”€sda2   8:2    1 114.4G  0 part /
sdb      8:16   1  57.3G  0 disk
</code></pre><h3>åˆ†åŒºè¡¨&amp;å¯åŠ¨åˆ†åŒºå¤‡ä»½</h3><pre><code class="language-bash"># ç¡®ä¿ä½¿ç”¨ root ç”¨æˆ·æ“ä½œ
sudo su
# è¿›å…¥å¯å†™ç›®å½•
cd /run

# æ­£å¸¸æƒ…å†µåˆ†åŒºè¡¨çš„å¤‡ä»½æ¢å¤
# sfdisk -d /dev/sda | sfdisk -f /dev/sdb

# é€‰æ‹©ç®€å•æ–¹å¼å¤‡ä»½åå†ä¿®æ”¹æœ€ååˆ†åŒº
# è¿™é‡Œ dd 130MB - åŒæ—¶æŠŠ boot åˆ†åŒºå¤‡ä»½äº†
dd if=/dev/sda of=/dev/sdb bs=1M count=130 status=progress

# è½¬å‚¨åˆ†åŒºè¡¨
sfdisk -d /dev/sda &gt; sda.partition.table.txt
# åˆ é™¤ç¬¬äºŒä¸ªåˆ†åŒºçš„å¤§å°
sed -r &#x27;$ s/size=\s*\d+,//&#x27; -i sda.partition.table.txt
# é‡å»ºåˆ†åŒº
sfdisk -f /dev/sdb &lt; sda.partition.table.txt
# ç°åœ¨åˆ†åŒºå¤§å°æ­£å¸¸
fdisk -l /dev/sdb

# åˆ†åŒºå˜åŒ–é‡æ–°æ‰«æ
mdev -s
partprobe
# å‡ºç°åˆ†åŒº
ls /dev/sdb*
</code></pre><h3>root åˆ†åŒºå¤‡ä»½</h3><ul><li>root åˆ†åŒºä¸€èˆ¬è¾ƒå¤§ï¼Œç›´æ¥ dd æ…¢ä¸”ä¼¤ U ç›˜</li><li>ç›´æ¥ dd éœ€è¦ç›®æ ‡ç›¸åŒå¤§å°ï¼Œå¦åˆ™ä¸¢æ•°æ®</li><li>è¿™é‡Œä½¿ç”¨ clone æ•°æ®æ–¹å¼</li></ul><p>:::caution ç”±äºç›®æ ‡åˆ†åŒºæ›´å°ï¼Œä¸èƒ½ç›´æ¥å¤åˆ¶</p><pre><code class="language-bash"># ext4 æ•°æ®æ‹·è´ - åŸºäº ext4 blockï¼Œåªæ‹·è´ä½¿ç”¨éƒ¨åˆ†
# ä¹Ÿå¯ä»¥ç”¨äºç”Ÿæˆ img å¤‡ä»½é•œåƒä¹‹åç”¨
e2image -ra -p /dev/sda2 /dev/sdb2
</code></pre><ul><li>å¦‚æœåˆ†åŒºå¤§å°è¶³å¤Ÿï¼Œç›´æ¥å¤åˆ¶å³å¯</li></ul><p>:::</p><p>å› ä¸º root åˆ†åŒºä¸º 120Gï¼Œä½†å®é™…åªç”¨äº† 2.2Gï¼Œ å…ˆé•œåƒåˆ†åŒºï¼Œç¼©å°åˆ†åŒºï¼Œç„¶åæ¢å¤åˆ°æ–°çš„åˆ†åŒºã€‚</p><p>ç´¢æ€§å†…å­˜æœ‰ 4Gï¼Œå› æ­¤ç›´æ¥åœ¨ /dev/shm æ“ä½œï¼Œå¦åˆ™éœ€è¦å¤–ç½®å­˜å‚¨ã€‚</p><pre><code class="language-bash"># ä»æ–°æŒ‚è½½ä¸º 3G - é»˜è®¤ 2G
mount -o remount,size=3G /dev/shm
# åˆ¶ä½œé•œåƒ
e2image -rap /dev/sda2 sda2.raw

# ä¿®å¤åˆ†åŒº - ä¸€èˆ¬ Uç›˜ æŸåéƒ½ä¼šå¯¼è‡´ fs å¼‚å¸¸
e2fsck -y sda2.raw
# ç¼©å°åˆ†åŒº
resize2fs sda2.raw 4G
# æ¢å¤
e2image -rap sda2.raw /dev/sdb2
# æ‰©å±•åˆ†åŒº
resize2fs /dev/sdb2
</code></pre><h3>éªŒè¯</h3><pre><code class="language-bash">fsck /dev/sdb1
fsck /dev/sdb2

mount /dev/sdb2 /mnt
mount /dev/sdb1 /mnt/boot
# ä¸åº”è¯¥æœ‰å˜åŒ–
rsync -vna /boot/ /mnt/boot/

# ç”±äº fsck ä¿®å¤ï¼Œå¯èƒ½ root åˆ†åŒºå¤§å°ä¸åŒ
df / /mnt /boot /mnt/boot
</code></pre><p>å¦‚æœè£…æœ‰ qemuï¼Œè¿˜å¯ä»¥ç›´æ¥å¯ç”¨ qemu éªŒè¯ï¼Œç›®å‰å°±ç®€å•ç¡®è®¤æ–‡ä»¶æ²¡é—®é¢˜å³å¯ã€‚</p><pre><code class="language-bash"># å‡†å¤‡å…³æœºé‡å¯
umount -R /mnt
eject /dev/sdb

poweroff
</code></pre><p>å–æ‰ åçš„ U ç›˜ï¼Œå¯åŠ¨ã€‚</p><p>ä¸€åˆ‡æ¢å¤æ­£å¸¸ã€‚ğŸ‰</p><h2>æ€»ç»“</h2><p>ç³»ç»Ÿç›˜æ¢å¤è¿˜æ˜¯ç›¸å½“å®¹æ˜“ï¼Œä½† CZ430 ç¡®å®æœ‰ç‚¹è€äº†ï¼Œåœ¨ 2017 å¹´å·¦å³ä¸Šå¸‚ï¼Œç›¸åŒè§„æ ¼å·²ç»å– 4ã€5 å¹´äº†ï¼Œæ€§èƒ½å„æ–¹é¢æœ‰æ‰€æ¬ ç¼ºï¼Œä¹‹åä¼šå°½é‡é€‰æ‹© Lexar S47ã€‚</p><ul><li><a href="https://wener.me/notes/ops/admin/fio-out/">https://wener.me/notes/ops/admin/fio-out/</a><ul><li>SanDisk CZ430, Lexar S47 æ€§èƒ½å¯¹æ¯”</li></ul></li></ul><p>æ­¤å¤–ä½¿ç”¨ U ç›˜ åšç³»ç»Ÿç›˜çš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„ä¿®æ”¹ docker ä¹‹ç±»çš„æ•°æ®ç›®å½•ä¸ºå…¶ä»–å­˜å‚¨ï¼Œå› ä¸ºè·‘å®é™…åº”ç”¨çš„æ—¶å€™ U ç›˜ æ€§èƒ½æ˜¯ä¸è¶³çš„ï¼Œä¸”æ•°æ®åº“ç±»å‹åº”ç”¨çš„å° BlockSize IO ä¸é€‚åˆ U ç›˜ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä»æ–°å­¦ä¹ ]]></title>
        <id>relearning</id>
        <link href="https://wener.me/story/relearning"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[æœ€è¿‘å¼€å§‹å­¦ä¹  PMPï¼Œç®¡ç†ï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªâ€œå…¨æ–°â€çš„é¢†åŸŸã€‚]]></summary>
        <content type="html"><![CDATA[<p>æœ€è¿‘å¼€å§‹å­¦ä¹  PMPï¼Œç®¡ç†ï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªâ€œå…¨æ–°â€çš„é¢†åŸŸã€‚</p><p>å­¦ä¹ å»å­¦ä¹ ï¼Œæ˜¯è¿™æ¬¡å­¦ä¹ å¼€å§‹è€å¸ˆè®²çš„ä¸»é¢˜ï¼Œå› æ­¤ä¹Ÿäº§ç”Ÿäº†è‡ªå·±çš„ä¸€äº›æ€è€ƒã€‚
å­¦ä¹ å»å­¦ä¹ ï¼Œæˆ‘è®¤ä¸ºæ˜¯ meta-learningã€‚å­¦ä¹ ï¼Œåº”è¯¥ä»æœªåœæ­¢è¿‡ï¼Œå½“æˆ‘ä»¬ä»çŒ´å­å¼€å§‹ï¼Œæˆ‘ä»¬å°±åœ¨å­¦ä¹ å»ç†Ÿæ‚‰ã€äº†è§£ã€æŒæ¡æ–°çš„å·¥å…·ã€ç¯å¢ƒã€äº‹ç‰©ã€‚</p><p>ä¸éœ€è¦å­¦ä¹ çš„æ€è€ƒï¼Œæ˜¯æ½œæ„è¯†çš„æå‡ã€‚å¯¹å­¦ä¹ è¿‡ç¨‹è¿›è¡Œæ€è€ƒå½’çº³æ€»ç»“æ˜¯ï¼Œå¾—åˆ°çš„æ˜¯è¿‡ç¨‹æ”¹è¿›æ–¹å¼ï¼Œå› æ­¤ä¸¤ä¸ªäººå­¦ä¹ ä¸€å¤©çš„ç»“æœä¼šæœ‰æ‰€ä¸åŒã€‚</p><p>è®©ç»™æˆ‘è”æƒ³åˆ°è‹±è¯­çš„ä¸¤ä¸ªå•è¯ï¼Œstudy &amp; learnã€‚study å¼ºè°ƒçš„åªæ˜¯è¿‡ç¨‹ï¼Œlearn å¼ºè°ƒçš„æ˜¯ç»“æœå†…å®¹ï¼Œåº”è¯¥æ€è€ƒå¹³æ—¶å­¦ä¹ æ˜¯ study è¿˜æ˜¯ learnã€‚</p><blockquote><p>å¸¦æ€è€ƒçš„å­¦ä¹ æ›´å®¹æ˜“è·å–ä¸€é¡¹æŠ€èƒ½çŸ¥è¯†ã€‚</p></blockquote><h2>ç®¡ç†</h2><p>ç®¡ç†ï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ª â€œå…¨æ–°â€ çš„é¢†åŸŸï¼Œä½œä¸ºæŠ€æœ¯ç ”å‘ï¼Œä»æœªä»ç®¡ç†å­¦çš„æ¦‚å¿µå»æ€è€ƒè¿‡é—®é¢˜ã€‚
ä½†ä¹‹æ‰€ä»¥æ˜¯â€œå…¨æ–°â€ï¼Œæ˜¯å› ä¸ºï¼Œç”Ÿæ´»æ— å¤„ä¸æ˜¯ç®¡ç†ï¼Œå®¶åº­çº çº·ã€ç”Ÿæ´»è§„åˆ’ã€æ—¥å¸¸å·¥ä½œã€‚</p><p>æˆ‘ç†è§£çš„ç®¡ç†ï¼Œæ˜¯æ§åˆ¶ã€‚</p><p><img src="./feedback-loop.svg"/></p><p>æ§åˆ¶ç†è®ºçš„ åé¦ˆå¾ªç¯ï¼ˆfeedbak loopï¼‰ å›¾ã€‚</p><p><img src="./PDCA-Multi-Loop.png"/></p><p>ç²¾ç›Šç”Ÿäº§çš„ PDCA å¾ªåå›¾ã€‚</p><p><img src="https://kroki.io/plantuml/svg/eNpljrFKBDEQhvt5iqkF5fZQ7AQtfAGvOyxCdm43bDIJySyH1hYqIip2VlZrp5Wlb7PnPYZ7rhwBq498f_iS1BgOKiqHzrPXdfSOUGJLkLZLVNwkCjidZLIMBouD3KgY_XJWG90wpYSTvcNsDEo3qqKZEUvH1lTsiAUtLSS71CbSKtGJjyXFvLSfP0wL1Vo59Sxn5pKwmOZfJS2KK_uvUQDUpiQkF-RiaCQdTRDjGWC-c467R9g_vPe3bwh_HMy6u-qvn2DERqxuuvXrHYz4Fc-f_ccXjNiIoQXbfTh_vzyu7jsYkTV_AJjNmHw="/></p><p>é¡¹ç›®ç®¡ç† 5 å¤§è¿‡ç¨‹ç»„ã€‚</p><p>è™½ç„¶æ˜¯ä¸åŒé¢†åŸŸé‡Œçš„ä¸»é¢˜ï¼Œä½†è¡¨è¾¾çš„å´æ˜¯ç›¸åŒçš„å†…å®¹ã€‚</p><p>æ§åˆ¶ï¼Œå‡å°‘å˜é‡ï¼Œæå‡å¯é¢„æµ‹æ€§ã€‚</p><p>æ§åˆ¶ï¼Œæ˜¯ä¸ºäº† æå‡/æ”¹è¿› ç°æœ‰è¿‡ç¨‹ã€‚</p><p>What happened is happened,but what we can learn from the past ?</p><h2>å­¦ä¹ </h2><p>ä¸ºäº†æ›´å¥½ç†è§£å’Œç®¡ç†è‡ªå·±çš„å­¦ä¹ ï¼Œæˆ‘æ¢³ç†äº†æˆ‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½ä»æ— æ„è¯†å˜æˆæœ‰æ„è¯†çš„å­¦ä¹ ã€‚</p><p><strong>æˆ‘çš„å­¦ä¹ è¿‡ç¨‹</strong></p><ul><li>Repeat - é‡å¤ - æŠ„å†™é‡å¤æœ€ä¸ºæµ…æ˜¾çš„å†…å®¹</li><li>Refactor - é‡æ„ - æŒ‰ç…§è‡ªå·±çš„ç†è§£ä»æ–°ç»„ç»‡å†…å®¹è¯­è¨€</li><li>Realize - ä»æ–°æ„è¯† - å¯¹ç…§ç”Ÿæ´»ã€å·¥ä½œã€ç°å®ã€è·³å‡ºå›ºåŒ–åœºæ™¯</li><li>Regain - ä»æ–°è·å– - æŒæ¡</li></ul><p>:::caution</p><p>å¹¶ä¸æ˜¯æ‰€æœ‰ä¸»é¢˜éƒ½ä¼šç»å†æ‰€æœ‰çš„è¿‡ç¨‹ã€‚å­¦ä»¥è‡´ç”¨ï¼Œæ— ä»¥è‡´ç”¨çš„ä¸»é¢˜åªä¼šåœç•™åœ¨æ—©æœŸé˜¶æ®µã€‚</p><p>:::</p><blockquote><p><del>We learn from teacher.</del></p><p>Teacher teached us.</p><p>Whatever teaches us is our teacher.</p></blockquote><p>è€å¸ˆã€ä¹¦æœ¬ã€æ–‡ç« ã€æºç ã€äº‹ä»¶éƒ½å¯èƒ½è§¦å‘æˆ‘ä»¬çš„â€œæå‡â€ã€‚</p><p><strong>Repeat</strong></p><p>è¿™æ—¶å€™æˆ‘ä¼šè¿›è¡Œç®€å•çš„è®°å½•ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚</p><p>åœ¨ <a href="https://github.com/wenerme/wener">https://github.com/wenerme/wener</a> è¿™é‡Œæˆ‘è®°å½•äº†æ„Ÿå…´è¶£çš„å¾ˆå¤šå†…å®¹ï¼Œæœ‰çš„å¯èƒ½æ˜¯å·¥ä½œç›¸å…³çš„ï¼Œä¾‹å¦‚ï¼šæŠ€æœ¯ï¼›å¯èƒ½æ˜¯å·¥ä½œæ— å…³çš„ï¼Œä¾‹å¦‚ï¼š<a href="https://github.com/wenerme/wener/blob/958471ae9d9e2399e3c901f68380cea3c3154e82/notes/healthcare/disease/rheumatoid-arthritis.md">åŒ»å­¦</a>ã€‚</p><p>:::tip Repeaté˜¶æ®µ å†…å®¹çš„ç‰¹ç‚¹</p><ul><li>æµ…æ˜¾</li><li>ç¦»æ•£</li><li>ç²¾ç®€</li></ul><p>:::</p><ul><li>æµ…æ˜¾ - You get what you see</li><li>ç¦»æ•£</li><li>ç²¾ç®€ - çŸ¥è¯†ç´¢å¼•</li></ul><p><strong>Refactor</strong></p><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé‡å¤é‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼ŒæŠ±æœ‰ç›¸åŒçš„ç–‘é—®ï¼Œéœ€è¦å‚è€ƒç›¸åŒçš„è¯é¢˜ã€‚</p><p>æ­¤æ—¶å‚è€ƒç®€å•è®°å½•çš„å†…å®¹å·²ç»ä¸è¶³ä»¥å›ç­”æˆ–è§£å†³é—®é¢˜ï¼Œå› æ­¤ï¼Œä¼šå¯¹å†…å®¹è¿›è¡Œé‡æ–°é‡æ„ã€‚</p><p>é‡æ„æ„å‘³ç€é‡æ–°æ¢³ç†å†…å®¹çŸ¥è¯†ï¼Œä»æ–°è°ƒæ•´â€œç´¢å¼•â€å†…å®¹ï¼ŒæŒ‰ç…§è‡ªå·±çš„â€œè„‘å›è·¯â€å¯¹é—®é¢˜åŸŸè¿›è¡Œç†è§£åˆ†æã€‚</p><p>ä½¿ç”¨ git è¿›è¡Œç¬”è®°çš„å¥½å¤„æ˜¯å®ƒèƒ½è®°å½•ä½ çš„â€œ<a href="https://github.com/wenerme/wener/commits/master/notes/devops/kubernetes">è¿‡ç¨‹</a>â€ã€‚</p><p>:::tip Refactoré˜¶æ®µ å†…å®¹çš„ç‰¹ç‚¹</p><ul><li>å‘æ•£çš„å•ä¸ªä¸»é¢˜ç‰µå¼•å‡ºæ–°çš„ä¸»é¢˜</li><li>æŒ‰ç…§è‡ªå·±çš„â€œè„‘å›è·¯â€ç»„ç»‡çš„å†…å®¹ç»“æ„</li><li>éƒ¨åˆ†å†…å®¹ä¼šè¿›è¡Œç»†åŒ–</li></ul><p>:::</p><p><strong>Realize</strong></p><p>æ„è¯†é˜¶æ®µæœ‰ä¸¤ä¸ªæ–¹å¼ï¼š</p><ol><li>è‡ªèº«</li><li>è·¨åŸŸ</li></ol><p>è‡ªèº«ï¼Œæˆ‘ä»¬é€šå¸¸è®²ä»å¤±è´¥å­¦ä¹ ï¼Œæ›´å¤šçš„æ˜¯æ„è¯†åˆ°äº†é—®é¢˜ç‚¹ï¼Œé—®é¢˜ç‚¹åœ¨ä¸ç»å†çš„æ—¶å€™æ˜¯ä¸ä¼šå‘ç°çš„ï¼Œè€Œå½“é‡åˆ°é—®é¢˜ï¼Œè§£å†³é—®é¢˜è¿™ä¸ªå¾ªç¯è¿›è¡Œå¤šæ¬¡åï¼Œä¼šåŸºäºåŸºæœ¬çš„ç†è®ºçŸ¥è¯†æŠ½å–å‡ºå±äºè‡ªå·±çš„ç»éªŒç»“è®ºã€‚</p><p>è·¨åŸŸï¼Œå­¦ä¹ å’Œæˆé•¿ä¸å¯èƒ½æ˜¯ä¸€æ¡è·¯èµ°åˆ°å¤´çš„ï¼Œæœ‰æ‰€æˆå°±çš„äººç»ä¸å¯èƒ½åªä¼šç²¾é€šä¸€é—¨å­¦ç§‘ï¼Œç†è§£ä¸åŒé¢†åŸŸäº‹ç‰©çš„ç›¸å…³æ€§æ˜¯æ„è¯†æå‡çš„å…³é”®ã€‚</p><p><strong>Regain</strong></p><p>ä¹‹æ‰€ä»¥å« regainï¼Œæ˜¯å› ä¸ºå·²ç»ç»å†è¿‡æ—©æœŸçš„ gain è¿‡ç¨‹ï¼Œregain æ—¶ï¼Œæ‰æ˜¯æˆ‘ä»¬çœŸæ­£çš„æœ‰æ‰€æŒæ¡ï¼Œå­¦ä»¥è‡´ç”¨ã€‚</p><p>:::tip Ragain é˜¶æ®µçš„ä½“ç°</p><ul><li>ç‹¬ç«‹å†³ç­–</li><li>é¢„æµ‹è¡Œä¸º</li></ul><p>:::</p><p>è¿™æ—¶å€™æˆ‘æ„¿ç§°ä¹‹ä¸ºï¼š ä¸“å®¶/Masterã€‚</p><h2>æ€ç»´æ¨¡å¼</h2><p>é€šå¸¸å­¦ä¹ åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š</p><ol><li>å·¥å…·æŠ€æœ¯å­¦ä¹  - å®</li><li>æ€æƒ³æ–¹æ³•è®ºå­¦ä¹  - è™š</li></ol><p>å› ä¸ºæˆ‘çš„ä¸»è¦èŒè´£æ˜¯è½¯ä»¶å¼€å‘ï¼Œç®¡ç†å¯¹æˆ‘æ¥è¯´æ˜¯ä¸ªâ€œè™šâ€æŠ€èƒ½ï¼Œå› ä¸ºå¹¶ä¸èƒ½ç›´æ¥æŒ‡å¯¼å·¥ä½œã€‚ä½†å¯¹äºé¡¹ç›®ç»ç†æ¥è¯´ï¼Œç®¡ç†æ˜¯ä¸ªâ€œå®â€æŠ€èƒ½ï¼Œè€Œè®¡ç®—æœºç†è®ºåˆ™æ˜¯â€œè™šâ€æŠ€èƒ½ã€‚</p><p>å­¦ä¹ é¡¹ç›®ç®¡ç†ï¼Œæ˜¯æ›´å¤šæ˜¯ä¸ºäº†å»äº†è§£é¡¹ç›®ç®¡ç†çš„æ€ç»´æ¨¡å¼ã€‚</p><p>:::tip æ¨¡å¼=é”¤å­=å·¥å…·</p><p>å½“æˆ‘ä»¬æ‰‹é‡Œæ‹¿ç€é”¤å­æ—¶ï¼Œçœ‹åˆ°æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯é’‰å­ã€‚</p><p>-- å·¥å…·å®šå¾‹</p><p>:::</p><p>é¡¹ç›®ç®¡ç†æ€ç»´æ¨¡å¼ å’Œ è½¯ä»¶è®¾è®¡æ¨¡å¼ éå¸¸ç›¸ä¼¼ï¼Œæ˜¯å½“æˆ‘ä»¬è§£å†³é—®é¢˜æ—¶çš„å‚ç…§ã€‚</p><p>ä½†å½“ä½ æ²¡æœ‰è¿™ä¸ªå‚ç…§ï¼Œæ²¡æœ‰è¿™æŠŠé”¤å­æ—¶ï¼Œå°±ä¼šé™·å…¥å›°å¢ƒï¼Œä¸æ–­é‡å¤é”™è¯¯ã€‚</p><h2>å­¦ä¹ ä¸»é¢˜</h2><p>å­¦ä¹ æ˜¯ä¸€ä¸ªåŠ¨ä½œï¼Œå¿…ç„¶ä¼šæœ‰ç›®æ ‡ï¼Œå­¦ä¹ çš„ä¸»é¢˜å¯ä»¥æ˜¯å¤§è€Œå¹¿çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å°è€Œç²¾çš„ã€‚ä¸å¦‚è¯´ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŠŠè‡ªå·±çš„çŸ¥è¯†å‚¨å¤‡ç£¨ç»ƒæˆ T å‹ç»“æ„ã€‚</p><p><img src="https://kroki.io/excalidraw/svg/eNrdls1u20YQgN-Fvars_v_opjiOrdR1XNiFHRhCsRbX0tYUSZArWbLha1-gt158aq-9Bn2eBO1jdEjqD6LSCE7ToNVJuzucmZ35dmbuAz_LbNAO7LRvYhfl5varfuyyq9TkUdAKbGxHNvFF0L68D1wEgpHz12PHJ53vh_34ZO-wc6WPLEjO9Zg8T29hOQ3anLOQaa6YFkhTyVvBLGgTqUItNWEKMaHKzVsX-WHQpoiGCsEJoYIShQkcDa0bDH3QRq3AJIPYVv8Kn6c3di-N0xzsfYGqH1i8Mv2bQZ6Ok2hx5nOTFJnJ4QJwfu3i-NTPSi3B0PSH47x0u9Z2XvuAF-uFXJFCTEAK1A6GiS0gDqQVpJnpOw-XwQj8KW1m3agMUW_5_dDkWS0fVC6VlqyF-GGhicYaSdkKJjYvXJrApkLL1XGa9ME01lxIwjQCn1zxHPLgy8-vTVxYuGupc3-Zm2Qcx61gnEXG1zao1gzCzwUGM1nq6gxeohbqtS63RBr1wPXYFH4vHY2cBy0n5UcLzYU3uX_mksglg8WeTaKNnUqqU-Z_aE20Jre2N-fjoTWniT4zL7_pdvvadrPvzu72z05u7iZbaRKahUhLjISmlGuq5jjhUDHKGFOEEbwOFFrxg7UOBUMIM8FAuhT63_BEFZacKoHXeUKswRMwQSBOVD6dJ64gCU2eUKsR38-A0wYxy1gQQTdjobAC8un2p1Vh-e3gIp3-wPeywy_ZgZrI8-TV-etPmPMVjSXpgoZCIiwEwlyQRd1EALrEVDKOscT66eA234cUIYFSQTRFYAee06pacQK1iiu9O5cbLJXCDZKkqI3sBMIHQNoNkW3YNq7d6_0dSZThxqvCAiGOSJmO96BEOjOD2aE9OPdndpQM85sL--LfQkkSHjJCOBNQISRWi6JJQoyZBJoo01J8PErQ5zEUIQRcKokEdJ4VXJqEEjiWUBkg9YirBVyEUwzWMf5n2YJGoOjnZmtLQBpxqGmrIJnuvT5Jzgf7t9PJeEzNy4wd6_6qDXo79XUXlEKHME5xiYnSaFkcOA5hsFJI8XrQmuelbAqLNBD1X256Rfl_1fQY3JYiCO1602OqOURRSaki8ulNT2ClNSiuUtAO_nj85c_ffnz3-FjGIk38qbsDOwTVqxdm5OJZFYJSvhO7ATgWxPba14XEO5iyF9s-zaqIFzZ2SakFPuuDFgOrvLtELs3dwCUmPtv0YK1WzQFZlSrRLFUUmrMQMD29t1SZztHR9CLqjM5y__zg9PTV19fj409fqhi8C0KV0gpRxYSumyCDIVXCoCewxgxIr0CnWoUw6Smp64L28V1w84nMAQPLBPoww7ujuUNtEgQjincgB9S-ffPT2zc_v_v91wYjO6P1YZhWRh56VZ4teH7_8PAXflh1kw=="/></p><p>:::tip ä¿—è¯è¯´</p><p>ä¸œæ–¹ä¸äº®è¥¿æ–¹äº®ã€‚</p><p>:::</p><p>ä¸åŒçš„è§’åº¦ã€è§‚ç‚¹éƒ½ä¼šè®©å­¦ä¹ æ›´åŠ å®¹æ˜“ã€‚</p><h2>å­¦ä¹ è¿‡ç¨‹</h2><p>å­¦ä¹ æ˜¯æŒç»­çš„ä¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ²¡æœ‰æ—¶é—´é™åˆ¶ï¼Œæ²¡æœ‰é¢†åŸŸé™åˆ¶ï¼Œæ²¡æœ‰æ€ç»´é™åˆ¶ã€‚</p><p>å­¦ä¹ çš„é©±åŠ¨å´è‚¯å®šæ˜¯æœ‰æ ¹å› çš„ï¼Œæ¯ä¸ªäººéƒ½æœ‰æ‰€ä¸åŒã€‚</p><blockquote><p>We are who we are.</p></blockquote><p>å­¦ä¹ çš„å‚è€ƒä¸åº”è¯¥æ˜¯åˆ«äººï¼Œè€Œæ˜¯è‡ªå·±ã€‚ä»Šå¤©çš„è‡ªå·±æœŸæœ›æ˜å¤©çš„è‡ªå·±å¯¹æ¯”æ˜¨å¤©çš„è‡ªå·±èƒ½æœ‰æ‰€æå‡ï¼Œè€Œè¾¾æˆè¿™æ ·æå‡çš„å°±æ˜¯å­¦ä¹ ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç»„å»ºä½ è‡ªå·±çš„ NAS æœåŠ¡å™¨]]></title>
        <id>build-your-own-nas</id>
        <link href="https://wener.me/story/build-your-own-nas"/>
        <updated>2022-03-26T20:52:21.857Z</updated>
        <summary type="html"><![CDATA[- ä»·æ ¼ä¾¿å®œ]]></summary>
        <content type="html"><![CDATA[<p>:::tip ç›®æ ‡</p><ul><li>ä»·æ ¼ä¾¿å®œ</li><li>å®¹é‡é«˜</li></ul><p>:::</p><ul><li>HP MicroServer å…¨æ–°å¾®å¡” - å‚è€ƒä»·æ ¼: Â¥4000 , åŠŸè€— 60W<ul><li>HP MicroServer Gen 10<ul><li>å…¨æ–° AMD x3216 8G Â¥2300</li><li>æœ€å¤š 4 ä¸ªç¡¬ç›˜</li></ul></li><li>SAS 6TÃ—4 - Â¥1600</li><li>SAS å¡ - Â¥100</li></ul></li><li>äºŒæ‰‹å¡”å¼ - å‚è€ƒä»·æ ¼: Â¥4700 , åŠŸè€— 120W<ul><li>DDR4 æœåŠ¡å™¨ - ~Â¥2000<ul><li>1U 4Ã—3.5 å¯¸ç›˜ä½</li><li>2U 8Ã—3.5 å¯¸ç›˜ä½</li></ul></li><li>CPU XeonE5v4Ã—2 ~Â¥1000 - 32 æ ¸ 64 çº¿ç¨‹</li><li>å†…å­˜ DDR4 ECC REG 16GÃ—4 - 64G ~Â¥1000</li><li>SAS 6TÃ—4 - Â¥1600</li><li>SAS å¡ - Â¥100</li></ul></li><li>æ˜Ÿé™…èœ—ç‰› J1900 - å‚è€ƒä»·æ ¼: Â¥2500 , åŠŸè€— 30W<ul><li>æ˜Ÿé™…èœ—ç‰› DDR3 J1900 8G ~ Â¥800</li><li>SAS 6TÃ—4 - Â¥1600</li><li>SAS å¡ - Â¥100</li><li>éå¸¸å…¥é—¨æ¬¾ï¼Œæ²¡ä»€ä¹ˆä¸Šå‡ç©ºé—´ï¼Œæ²¡ä»€ä¹ˆæŠ˜è…¾çš„æ„ä¹‰</li></ul></li></ul><p>:::tip å®¹é‡è€ƒè™‘</p><p>ç°åœ¨ 2022 å¹´ï¼Œæ‰‹æœºå¹³å°å­˜å‚¨ä¸Š T çš„å·²ç»è¶Šæ¥è¶Šå¤šï¼Œç¬”è®°æœ¬ SSD éƒ½æœ‰å‡  T çš„äº†ï¼Œå°å¼æœºæ›´ä¸ç”¨è¯´ï¼Œå‡  T çš„å­˜å‚¨å¾ˆæ­£å¸¸ã€‚</p><ul><li>å•ç›˜ &lt; 4T ä¼šæ¯”è¾ƒæµªè´¹ç›˜ä½</li><li>å•ç›˜ &gt; 10T æ¢å¤éå¸¸æ…¢</li><li>å»ºè®®è‡³å°‘ 6TÃ—4 - RAID5 å¯ç”¨å¤§çº¦ 15T</li></ul><p>:::</p><h2>éƒ¨ä»¶å‚è€ƒä»·æ ¼</h2><table><thead><tr><th>éƒ¨ä»¶</th><th>è§„æ ¼</th><th>Â¥</th><th>taobao</th></tr></thead><tbody><tr><td>SAS</td><td>6T 3.5 å¯¸ 7.2K</td><td>Â¥400</td><td><a href="https://item.taobao.com/item.htm?id=560836442610">https://item.taobao.com/item.htm?id=560836442610</a></td></tr><tr><td>SAS</td><td>1.2T 2.5 å¯¸ 10K</td><td>Â¥160</td><td><a href="https://item.taobao.com/item.htm?id=547264783830">https://item.taobao.com/item.htm?id=547264783830</a></td></tr><tr><td>SAS ç›´é€šå¡</td><td></td><td>Â¥100</td><td><a href="https://item.taobao.com/item.htm?id=521090584542">https://item.taobao.com/item.htm?id=521090584542</a></td></tr><tr><td>SATA</td><td>14TB 3.5 å¯¸ 7.2K</td><td>Â¥1200</td><td><a href="https://item.taobao.com/item.htm?id=599544680031">https://item.taobao.com/item.htm?id=599544680031</a></td></tr><tr><td>å†…å­˜ DDR3 ECC REG</td><td>16G</td><td>~Â¥120</td><td><a href="https://item.taobao.com/item.htm?id=13978621463">https://item.taobao.com/item.htm?id=13978621463</a></td></tr><tr><td>å†…å­˜ DDR4 ECC REG</td><td>16G</td><td>~Â¥250</td><td><a href="https://item.taobao.com/item.htm?id=567468034444">https://item.taobao.com/item.htm?id=567468034444</a></td></tr><tr><td>å†…å­˜ DDR4 ECC REG</td><td>32G</td><td>~Â¥600</td><td><a href="https://item.taobao.com/item.htm?id=567468034444">https://item.taobao.com/item.htm?id=567468034444</a></td></tr><tr><td>å†…å­˜ DDR4 ECC NOREG</td><td>16G</td><td>~Â¥500</td><td></td></tr><tr><td>å†…å­˜ DDR4 ECC NOREG</td><td>32G</td><td>~Â¥1000</td><td></td></tr><tr><td>CPU <a href="https://ark.intel.com/content/www/us/en/ark/products/91766/intel-xeon-processor-e52683-v4-40m-cache-2-10-ghz.html">E5-2683V4</a></td><td>2.1G 16C32T 120W</td><td>~Â¥500</td><td><a href="https://item.taobao.com/item.htm?id=597514302182">https://item.taobao.com/item.htm?id=597514302182</a></td></tr><tr><td>CPU <a href="https://www.intel.cn/content/www/cn/zh/products/sku/88170/intel-xeon-processor-e31235l-v5-8m-cache-2-00-ghz/specifications.html">E3-1235Lv5</a></td><td></td><td></td><td></td></tr></tbody></table><p>:::caution PC å’Œ ä¼ä¸šçº§æœåŠ¡å™¨ è¿‡æ¸¡äº§å“</p><ul><li>æœåŠ¡å™¨å¸‚åœºæœ‰æ¯” PC å¼ºï¼Œä½†æ¯”æœåŠ¡å™¨å¼±çš„ä¸€ä¸ªäº§å“çº¿ï¼Œé€šå¸¸ç”¨äºä¸ªäººå·¥ä½œå®¤ä¹‹ç±»çš„åœºæ™¯ã€‚</li><li>ç‰¹ç‚¹<ul><li>æœåŠ¡å™¨ä½“ç§¯å°</li><li>CPU åŠŸè€—ä½ - 25W</li><li>å†…å­˜ä½¿ç”¨ ECC NOREG<ul><li>äºŒæ‰‹å¸‚åœºå°‘ï¼Œä»·æ ¼åé«˜</li><li>éœ€è¦ CPU æ”¯æŒ</li><li>éœ€è¦ä¸»æ¿æ”¯æŒ</li></ul></li></ul></li></ul><p>:::</p><h2>ä¸»æœºé€‰æ‹©</h2><ul><li>æœºå‹é€‰æ‹©<ul><li>å¾®å¡” - å™ªéŸ³å°ï¼ŒåŠŸè€—ä¸€èˆ¬ ~60w<ul><li>äºŒæ‰‹å°‘ - å¤§å¤šä¹°æ–°çš„ï¼Œä»·æ ¼é«˜</li><li>ä½“ç§¯å°</li><li>ä¸€èˆ¬ä¸»æ¿ä¸æ”¯æŒ ECC REG å†…å­˜</li></ul></li><li>æœåŠ¡å™¨ - å™ªéŸ³å¤§ï¼ŒåŠŸè€—ä¸€èˆ¬ ~120w<ul><li>äºŒæ‰‹å¤š - ä¾¿å®œ</li><li>ä½“ç§¯å¤§ - ä¸€èˆ¬ 1U</li><li>æ‰©å±•èƒ½åŠ›å¼º - é€šå¸¸æ”¯æŒ ä¸€ä¸ªåŠé«˜+ä¸€ä¸ªå…¨é«˜ PCI - å› æ­¤å¯ä»¥é… GPU</li><li>å¦‚æœæ²¡æœ‰ä¹¦æˆ¿ã€åº“æˆ¿æˆ–éšç’è§’è½ä¸æ¨è</li><li>éƒ¨åˆ†æœåŠ¡å™¨å™ªéŸ³ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¤§</li></ul></li></ul></li><li>å¹³å°é€‰æ‹©<ul><li>é€šå¸¸äºŒæ‰‹éƒ½æ˜¯è½åå¥½å‡ ä¸ªä¸–ä»£ï¼Œä½†å»ºè®®è‡³å°‘é€‰æ‹© DDR4</li><li>DDR3 ä»·æ ¼æ˜¯ DDR4 çš„ä¸€åŠ - å¦‚æœé¢„ç®—æœ‰é™ï¼Œé‚£ä¹Ÿæ˜¯å¯ä»¥çš„<ul><li>é€‰æ‹© DDR3 CPU ä¹Ÿä¼šä¾¿å®œä¸€åŠä»¥ä¸Š - æ˜¯å†ä¸Šä¸€ä¸ªä¸–ä»£çš„å¹³å°</li></ul></li></ul></li><li>é…ç½®é€‰æ‹©<ul><li>å…¨æ–°æ•´å¥—ä¸»æœº - åŒ…å« CPU+å†…å­˜<ul><li>æ€§ä»·æ¯”ä¸é«˜ï¼Œä½†çœäº‹</li></ul></li><li>äºŒæ‰‹æœåŠ¡å™¨<ul><li>æ€§ä»·æ¯”æœ€é«˜ï¼Œçœäº‹</li><li>å¯é€‰æ€§ä¸å¤š</li></ul></li><li>è‡ªå·±é…ä¸»æœº - ä¸»æ¿+æœºç®±+ç”µæº+CPU+å†…å­˜<ul><li>äº‹æƒ…æœ€å¤šï¼Œå¦‚æœä¸æ˜¯å–œæ¬¢æè¿™ä¸ªï¼Œå»ºè®®ä¸è¦</li></ul></li></ul></li><li>æœåŠ¡å™¨é€‰æ‹©<ul><li>æ¶å¼<ul><li>äºŒæ‰‹å¸‚åœºæœ€å¤šï¼Œå åœ°é¢ç§¯å¤§</li><li>1U<ul><li>8 ä¸ª 2.5 å¯¸ç›˜ä½</li><li>4 ä¸ª 3.5 å¯¸ç›˜ä½</li></ul></li></ul></li><li>å¡”å¼<ul><li>äºŒæ‰‹å¸‚åœºä¸å¤šï¼Œå åœ°é¢ç§¯å¤§</li><li>å’Œæ™®é€šå°å¼ç”µè„‘å·®ä¸å¤š</li><li>æœåŠ¡å™¨ä¸»æ¿</li></ul></li><li>åˆ€ç‰‡<ul><li>äºŒæ‰‹å¸‚åœºå¾ˆå°‘</li></ul></li><li>æ¨¡å—<ul><li>äºŒæ‰‹å¸‚åœºä¸å¤ªå¤šï¼Œå åœ°é¢ç§¯å¾ˆå°</li><li>é­”æ”¹åçš„éå¸¸å®‰é™</li></ul></li></ul></li><li>æˆå“ NAS æœåŠ¡å™¨<ul><li>ç¾¤æ™– - ä¸å†è¿™é‡Œçš„è®¨è®ºèŒƒå›´å†…</li></ul></li></ul><h3>é…ç½®ç›®æ ‡</h3><table><thead><tr><th>-</th><th>æœºå‹</th><th>CPU</th><th>å†…å­˜</th><th>ç¡¬ç›˜</th></tr></thead><tbody><tr><td>æœ€ä½</td><td>å¾®å¡”,ITX</td><td>4 æ ¸</td><td>8G</td><td>6TÃ—4 raidz1</td></tr><tr><td>æ¨è</td><td>-</td><td>4 æ ¸+</td><td>16G+</td><td></td></tr><tr><td>æ›´é«˜</td><td>æœåŠ¡å™¨</td><td>32 æ ¸å¿ƒ+</td><td>128G+</td><td></td></tr></tbody></table><blockquote><p>é€šå¸¸é…ç½®ä¸ªæœ€ä½ï¼ŒåæœŸèƒ½å¤Ÿè°ƒæ•´ç»„ä»¶å³å¯</p></blockquote><h3>å…¨æ–°æ•´å¥—ä¸»æœº</h3><ul><li><a href="https://www.hpe.com/psnow/doc/a00008701enw">hp microserver gen 10</a><ul><li>AMD x3216 8G Â¥2300</li><li><a href="https://item.taobao.com/item.htm?id=564308249868#detail">https://item.taobao.com/item.htm?id=564308249868#detail</a></li></ul></li><li>hp microserver gen 10 plus<ul><li><strong>éå¸¸å°å·§</strong></li><li>éœ€è¦æµ·æ·˜</li><li>Â¥5000</li></ul></li><li>mineNAS è‡³å¼º å¾®å¡”<ul><li>Core ç³»åˆ— CPU <a href="https://item.taobao.com/item.htm?id=546747046542">https://item.taobao.com/item.htm?id=546747046542</a><ul><li>Â¥3600</li></ul></li><li>Xeon ç³»åˆ— CPU <a href="https://item.taobao.com/item.htm?id=523041473305">https://item.taobao.com/item.htm?id=523041473305</a><ul><li>Â¥7500+</li></ul></li></ul></li></ul><h3>äºŒæ‰‹æœåŠ¡å™¨</h3><ul><li>æ¶å¼<ul><li>HP DL160G9 <a href="https://item.taobao.com/item.htm?id=564082577179">https://item.taobao.com/item.htm?id=564082577179</a><ul><li>å‡†ç³»ç»Ÿ Â¥750</li><li>E5-4650V3<!-- -->*<!-- -->2 24 æ ¸ 48 çº¿ + 64G + Intel 800G SSD Â¥3290</li><li>8Ã—2.5 å¯¸ç›˜ä½</li></ul></li><li>DELL R430 X99 <a href="https://item.taobao.com/item.htm?id=567440742661">https://item.taobao.com/item.htm?id=567440742661</a><ul><li>å‡†ç³»ç»Ÿ Â¥2200</li><li>4Ã—3.5 å¯¸ç›˜ä½</li></ul></li><li>DELL R630 <a href="https://item.taobao.com/item.htm?id=557304169457">https://item.taobao.com/item.htm?id=557304169457</a><ul><li>å‡†ç³»ç»Ÿ Â¥1449</li><li>8Ã—2.5 å¯¸ç›˜ä½</li></ul></li><li>DELL R730 - <a href="https://item.taobao.com/item.htm?id=604846119404">https://item.taobao.com/item.htm?id=604846119404</a><ul><li>2U</li><li>8-12 3.5 å¯¸ç›˜ä½, 8-24 2.5 å¯¸ç›˜ä½,</li></ul></li></ul></li><li>æ¨¡å—æœåŠ¡å™¨<ul><li>å¹¿è¾¾ å•æ¨¡å—å³å¯</li><li>æ”¹è£…åçš„éå¸¸å®‰é™</li><li>ä»·æ ¼ ~Â¥500</li><li><strong>æ³¨æ„</strong> ç¡¬ç›˜å¯èƒ½ä¸å¤ªå¥½æ”¾</li></ul></li></ul><h3>è£…æœº</h3><p>:::tip</p><ul><li>è£…æœºé€šå¸¸ä¸»æ¿éƒ½æ˜¯ä¹°æ–°çš„</li><li>æœºç®±çœ‹æƒ…å†µä¹°æ–°çš„æˆ–äºŒæ‰‹çš„æˆ–å®šåˆ¶çš„</li><li>æ˜ç¡®è£…æœºè¦è¾¾æˆçš„ç›®æ ‡ - ä¸è¦ä¸ºäº†è£…æœºè€Œè£…æœº<ul><li>å®¹é‡ï¼Ÿ</li><li>å°ºå¯¸å¤§å°ï¼Ÿ</li><li>ç¡¬ç›˜ã€å†…å­˜ã€CPUï¼Ÿ</li></ul></li></ul><p>:::</p><ul><li>ä¸»æ¿<ul><li><a href="https://www.asrockrack.com/">https://www.asrockrack.com/</a><ul><li>é€‰æ‹©å¥½åå¯æ·˜äºŒæ‰‹</li></ul></li></ul></li><li>æœºç®±<ul><li>ç¡®å®šå¥½ä¸»æ¿ç±»å‹åå†³å®š</li><li>å°çš„æƒ…å†µå¯å®šåˆ¶ äºšå…‹åŠ› æœºç®±</li></ul></li><li>ç”µæº<ul><li>åŠŸè€— &lt; 120W æ—¶å¯è€ƒè™‘å¤–ç½®</li><li>æœåŠ¡å™¨åŠŸè€—æœ€å¥½ä¹° äºŒæ‰‹ æœåŠ¡å™¨ç”µæºæ¨¡å—</li></ul></li></ul><h2>ç³»ç»Ÿ</h2><ol><li>é»‘ç¾¤æ™–</li></ol><ul><li>å®‰è£…ä½¿ç”¨å®¹æ˜“</li><li>ç°æˆçš„åº”ç”¨</li><li>é€‚ç”¨äºæ–°æ‰‹æˆ–ä¸æ„¿æ„æŠ˜è…¾çš„ç©å®¶</li><li>ç›¸å¯¹å°é—­ - ä¸å»ºè®®ç”¨æœåŠ¡å™¨è¿è¡Œï¼Œå¯ä»¥è€ƒè™‘å¼€è™šæ‹Ÿæœº</li></ul><ol start="2"><li>Linux</li></ol><h3>Linux</h3><ul><li>AlpineLinux</li><li>zfs<ul><li>çœ‹æƒ…å†µä½¿ç”¨ raidz1,raidz2,draid<ul><li>raidz1=raid5 - 4 ç›˜æ—¶</li><li>raidz2=raid6 - 6 ç›˜æ—¶</li><li>draid - &gt;= 12 ç›˜æ—¶</li></ul></li><li>SSD ç¼“å­˜ - å¦‚æœæœ‰é¢„ç®—</li></ul></li><li>åº”ç”¨åœºæ™¯<ul><li>å¤šåª’ä½“ - Jeylyfin, Plex, ç…§ç‰‡, éŸ³ä¹</li><li>ä¸‹è½½å™¨ - aria2, qtorrent, transimision</li><li>å®¶åº­ - Nextcloud</li><li>å…±äº« - samba, afp</li><li>å¤‡ä»½ - afp/TimeMachine</li><li>å¸¸ç”¨åº”ç”¨ - vaultwarden</li><li>æœåŠ¡å™¨<ul><li>Kubernetes/k3s - æ¨è</li><li>Docker</li><li>è™šæ‹Ÿæœº</li></ul></li></ul></li></ul><h1>å¸¸è§é—®é¢˜</h1><h2>å¦‚ä½•é€‰æ‹©ç¡¬ç›˜ç¼“å­˜</h2><ul><li>å¦‚æœä½¿ç”¨ ZFS+SSD ä½œä¸ºç¼“å­˜ï¼Œé‚£ç¡¬ç›˜çš„ç¼“å­˜å½±å“ä¸å¤§</li><li>å¦‚æœä½¿ç”¨ ç¡¬ä»¶ RAIDï¼Œé‚£ç¡¬ç›˜çš„ç¼“å­˜èƒ½ææ•ˆ</li></ul><h2>ä¸ºä»€ä¹ˆé€‰æ‹© SAS ç¡¬ç›˜</h2><ul><li>SAS ä¸ºä¼ä¸šçº§ç¡¬ç›˜ - äºŒæ‰‹è´¨é‡é«˜</li><li>äºŒæ‰‹å¸‚åœºå¤š</li><li>æ”¯æŒçƒ­æ’æ‹” - æ›´æ¢å®¹æ˜“</li><li><strong>ä½†</strong> é€šå¸¸éœ€è¦é¢å¤–çš„ SAS å¡ - ä¸€èˆ¬é€‰æ‹©åŠé«˜ PCI</li><li>SAS è¿˜éœ€è¦æ³¨æ„åŒºåˆ† 2.5 å’Œ 3.5<ul><li>3.5 - å®¹é‡ 300G-5T, è½¬é€Ÿ 7200+</li><li>2.5 - å®¹é‡ 120G-1T, è½¬é€Ÿ 10000-15000</li></ul></li></ul><h2>å¦‚ä½•é€‰æ‹© CPU</h2><ul><li>å¿—å¼º Xeon<ul><li>ä¼˜ç‚¹<ul><li>äºŒæ‰‹å¸‚åœºå¤š</li><li>ä»·æ ¼ä¾¿å®œ</li><li>æ€§èƒ½éå¸¸å¥½ - æ ¸å¿ƒå¤š</li></ul></li><li>ç¼ºç‚¹<ul><li>åŠŸè€—é«˜ - 120W</li><li>éœ€è¦ä¸»æ¿æ”¯æŒ</li><li>ä¸€èˆ¬åª’ä½“èƒ½åŠ›æ™®é€š</li><li>å…¨æ–°éå¸¸è´µ</li></ul></li></ul></li><li>å¿—å¼º Xeon L<ul><li>ä¼˜ç‚¹<ul><li>åŠŸè€—ä½ - 25W</li></ul></li><li>ç¼ºç‚¹<ul><li>ECC NOREG</li><li>é€šå¸¸å†…å­˜åªæ”¯æŒ 2 é€šé“ - ä¸€èˆ¬å®¶ç”¨ NAS è¶³çŸ£</li></ul></li></ul></li><li>é…·ç¿ Core<ul><li>ä¼˜ç‚¹<ul><li>å•æ ¸é¢‘ç‡é«˜</li><li>åª’ä½“å¤„ç†èƒ½åŠ›å¼º</li><li>åŠŸè€—ä¸€èˆ¬ - 60W</li></ul></li><li>ç¼ºç‚¹<ul><li>è´µ</li><li>æ ¸å¿ƒæ•°å°‘ - ä½œä¸ºæœåŠ¡å™¨æ ¸å¿ƒæ•°æ¯”å•æ ¸é¢‘ç‡æ›´é‡è¦</li></ul></li></ul></li><li>å‡ŒåŠ¨ Celeron<ul><li>ä¼˜ç‚¹<ul><li>åŠŸè€—éå¸¸ä½ - 10W</li></ul></li><li>ç¼ºç‚¹<ul><li>èƒ½åŠ›æœ‰é™</li></ul></li></ul></li></ul><h2>æœåŠ¡å™¨ å’Œ PC/HTPC çš„åŒºåˆ«</h2><ul><li>æœåŠ¡å™¨é€šå¸¸æ”¯æŒç®¡ç†æ¨¡å—<ul><li>å¯åŠ¨æ…¢</li><li>æ”¯æŒè¿œç¨‹è¿œç¦» - å¼€æœºï¼Œåœæœºï¼Œå¥åº·æ£€æŸ¥ï¼ŒKVM</li><li>å›ºä»¶å‡çº§</li></ul></li><li>PC/HTPC ä¸€èˆ¬ç›´æ¥å¯åŠ¨å³å¯</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸€ç§ç®€å•çš„å‹ç¼©ç®—æ³•]]></title>
        <id>simple-compress-algorithem</id>
        <link href="https://wener.me/story/simple-compress-algorithem"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[ä½¿ç”¨ç¯å¢ƒï¼šç®€å•åŠ å¯†ï¼Œä½¿ç”¨å­—ç¬¦ä¸²çš„è¯»å–æ–¹å¼ï¼Œå‹ç¼©æ‚é¡¹æ•°æ®]]></summary>
        <content type="html"><![CDATA[<p>ä½¿ç”¨ç¯å¢ƒï¼šç®€å•åŠ å¯†ï¼Œä½¿ç”¨å­—ç¬¦ä¸²çš„è¯»å–æ–¹å¼ï¼Œå‹ç¼©æ‚é¡¹æ•°æ®</p><p>åŸºæœ¬åŸç†ï¼šä¹Ÿå°±æ˜¯æŠŠæ··ä¹±çš„æ•°æ®ä¸­çš„00å­—èŠ‚å»æ‰ã€‚</p><p>æˆ‘æƒ³åˆ°ä½¿ç”¨è¿™ä¸ªå‹ç¼©æ–¹æ³•çš„æ—¶å€™æ˜¯ä¸ºäº†åœ¨æ–‡ä»¶ioå¾ˆæ…¢çš„ç¯å¢ƒä¸‹ä¸€æ¬¡æ€§è¯»å–è¾ƒå¤šçš„æ–‡ä»¶å†…å®¹ï¼Œä»è€Œè¿›è¡Œçš„å‹ç¼©ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹å­—ç¬¦ä¸²éƒ½æ˜¯ä»¥00ç»“å°¾çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå‹ç¼©çš„ç®—æ³•åªæ˜¯æŠŠæ•°æ®ä¸­çš„00å­—èŠ‚å»æ‰äº†ã€‚å½“è¢«å¤„ç†çš„æ–‡ä»¶ä¸­å¾ˆå¤š00çš„æ—¶å€™å‹ç¼©ç‡è¾ƒå¤§ã€‚ä½†æ˜¯ä¸é€‚å®œå¯¹æ–‡æœ¬ï¼Œå›¾ç‰‡ä¹‹ç±»çš„å‹ç¼©ã€‚æ³¨æ„ï¼Œåªæ˜¯ç®€å•çš„å‹ç¼©ï¼Œå‹ç¼©åèƒ½å¤Ÿç®€å•çš„è§£å‹ç¼©ã€‚åœ¨å‹ç¼©æ™®é€šæ•°æ®çš„æ—¶å€™ï¼Œå¤§æ¦‚å¹³å‡å‹ç¼©ç‡èƒ½å¤Ÿè¾¾åˆ° 3 ï¼š4</p><p>E.g. Â Â Â Â Â Â Â Â Â Â Â Â  90 80 29 00 78 98 00 00</p><p>è¿™æ®µæ•°æ®è¢«å‹ç¼©åçš„ç»“æœæ˜¯</p><p>{ 00 010011 } 90 80 29 78 98Â  æ³¨æ„åªèƒ½è¡¨ç¤º 90 80 29 00 78 98 è¿™6ä½æ•°æ®</p><p>{}ä¸º1byteå¤§å°</p><p>ä¸€çœ‹è¿™ä¸ªåˆ—å­å°±å¾ˆç®€å•äº†å§</p><p>ç¬¬ä¸€byteä¸ºæ ‡å¿—ä½ã€‚</p><p>å…·ä½“è¯´æ˜</p><p>1Â Â Â Â  å…¨ä¸º0ä½ è‹¥æ•°æ®å…¨ä¸º00 åˆ™æ­¤ä½ä¸º1</p><p>E.g.Â  00 00 00 00 00 00 =<!-- -->&gt;<!-- --> æ ‡å¿—ä½{ 10 000000 }</p><p>2Â Â Â Â  å…¨ä¸º1ä½ è‹¥æ•°æ®å…¨ä¸ä¸º00 åˆ™æ­¤ä½ä¸º1</p><p>E.g.Â  01 02 03 04 05 06Â  =<!-- -->&gt;<!-- --> æ ‡å¿—ä½{ 01 000000 } 01 02 03 04 05 06</p><p>æ­¤æ—¶æ•°æ®å˜å¤§</p><p>3-8 ä½è¡¨ç¤ºè¯¥ä½æ˜¯å¦ä¸º00 è‹¥æ˜¯åˆ™ä¸º 1 å½“ 1th æˆ–2ed ä¸å…¨ä¸º0æ—¶ï¼Œå¯ä»¥å¿½ç•¥åé¢çš„ 3-8ä½</p><p>æ‰€ä»¥ ä¸€ä¸ªæ ‡å¿—ä½æœ€å¤šèƒ½å¤Ÿè¡¨ç¤ºåé¢çš„6å­—èŠ‚æ•°æ®ï¼Œæ­¤æ—¶æ¶ˆé™¤äº†æ•°æ®ä¸­çš„00ä½ï¼Œå°±å¯ä»¥ç”¨å­—ç¬¦ä¸²çš„è¯»å–æ–¹å¼æ¥ä¸€æ¬¡æ€§è¯»å–ï¼Œæˆ–è€…åšç®€å•çš„åŠ å¯†ã€‚</p><p>ä¸€ä¸ªç¤ºä¾‹çš„ç¨‹åºï¼š</p><p>æ˜¯ç”¨çš„æ­¥æ­¥é«˜å­¦ä¹ æœºçš„ä¸€ç§å«åšBBasicçš„ç¯å¢ƒä¸‹å†™çš„ï¼Œè¿™ä¸ªç®—æ³•å…¶å®å°±æ˜¯ä¸ºäº†åº”ä»˜å®ƒioæå…¶çš„æ…¢çš„æ¯›ç—…ã€‚</p><p>è¿™ä¸ªä»£ç æˆ‘ä¹Ÿåªèƒ½è¯´è¡¨è¾¾çš„æ˜¯é‚£ä¸ªæ„æ€ï¼Œå¦‚æœç¨åŠ æ”¹é€ ä¸‹ï¼Œå¤§æ¦‚èƒ½å¤Ÿæé€Ÿ10å€ - 100 +å€ã€‚</p><p>declare function dechex$( decVal)</p><p>declare function bindec( binVal$)</p><p>&#x27;//æŠŠæ‰€ç»™çš„ä¸€æ®µæ•°æ®å‹ç¼©</p><p>&#x27;//æ­¥éª¤Â Â  æˆ‘å…ˆè€ƒè™‘æ˜¯å†…å­˜çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯ç»™å‡ºä¸€ä¸ªä½ç½®åç§»ï¼Œç„¶åæŒ¨ä¸ªå»è¯»</p><p>dim XDB_GetOffset, XDB_GetLen, XDB_GetStr$, XDB_PutFp, XDB_I</p><p>dim XDB_GetCur, XDB_AllZ, XDB_AllO</p><p>dim Xbd_Offset_Cur</p><p>dim XDB_HStr$, XDB_CStr$</p><p>dim XDB_HCode</p><p>dim XDB_GetStr_len</p><p>asm</p><p>ld int <!-- -->[ vint_XDB_GetOffset]<!-- -->, 0</p><p>endasm</p><p>XDB_GetLen = 7685 - 16</p><p>&#x27;ab cd 00 39 09 28</p><p>&#x27;19 08 02 18 00 00</p><p>&#x27;82 10 00 28 19 00</p><p>open &quot;x.txt&quot; for binary as #1</p><p>XDB_GetStr_len = 0</p><p>XDB_HCode = 0</p><p>XDB_GetStr$ = &quot;&quot;</p><p>XDB_CStr$ = &quot;&quot;</p><p>XDB_HStr$ = &quot;&quot;</p><p>t = gettick()</p><p>while XDB_I <!-- -->&lt;<!-- -->= XDB_GetLen</p><p>locate( 1, 1)</p><p>XDB_I = XDB_I + 1</p><p>Xbd_Offset_Cur = XDB_I mod 6</p><p>if Xbd_Offset_Cur = 0 then</p><p>if XDB_AllZ then</p><p>XDB_CStr$ = &quot;&quot;</p><p>end if</p><p>XDB_GetStr$ = XDB_GetStr$ + chr$( bindec( XDB_AllO$ + XDB_AllZ$ +XDB_HStr$ )) + XDB_CStr$</p><p>XDB_HStr$ = &quot;&quot;</p><p>XDB_HCode = 0</p><p>XDB_CStr$ = &quot;&quot;</p><p>XDB_AllZ$ = &quot;1&quot;</p><p>XDB_AllO$ = &quot;1&quot;</p><p>XDB_GetStr_len = XDB_GetStr_len + 1</p><p>if XDB_GetStr_len <!-- -->&gt;<!-- --> 4088 * 4 then</p><p>print XDB_I</p><p>put #1, XDB_GetStr$</p><p>XDB_GetStr$ = &quot;&quot;</p><p>end if</p><p>end if</p><p>&#x27;print &quot;ç¬¬äºŒæ­¥&quot;</p><p>asm</p><p>ld int <!-- -->[ vint_XDB_GetCur]<!-- -->, 0</p><p>ld int r0, <!-- -->[ vint_XDB_GetOffset]</p><p>ld byte <!-- -->[ vint_XDB_GetCur]<!-- -->, <!-- -->[ r0 ]</p><p>endasm</p><p>&#x27;=/å½“å‰ä½ä¸ºé0</p><p>if XDB_GetCur then</p><p>XDB_CStr$ = XDB_CStr$ + chr$( XDB_GetCur)&#x27;&quot;.&quot; + dechex$( XDB_GetCur)</p><p>XDB_HStr$ = XDB_HStr$ + &quot;0&quot;</p><p>&#x27;==//å…¨ä¸º0çš„æ ‡å¿—ä½</p><p>XDB_AllZ$ = &quot;0&quot;</p><p>&#x27;=/å½“å‰ä½ä¸º0</p><p>else</p><p>XDB_HStr$ = XDB_HStr$ + &quot;1&quot;</p><p>&#x27;==//å…¨ä¸º1çš„æ ‡å¿—ä½</p><p>XDB_AllO$ = &quot;0&quot;</p><p>end if</p><p>XDB_GetStr_len = XDB_GetStr_len + 1</p><p>&#x27;==//ä¸€æ¬¡å¤„ç†12ä½</p><p>XDB_GetOffset = XDB_GetOffset + 1</p><p>wend</p><p>print &quot;ç”¨æ—¶&quot;; gettick() - t</p><p>put #1, XDB_GetStr$</p><p>put #1, &quot;END&quot;</p><p>close #1</p><p>asm</p><p>jmp QingWuShi_XDB:</p><p>XDB_Compression_HCode:</p><p>.block 1 0</p><p>XDB_Compression_CCode:</p><p>.block 6 0</p><p>XDB_Compression_Catch:</p><p>.block 15 0</p><p>XDB_Compression_Base:</p><p>endasm</p><p>asm</p><p>ret</p><p>data x bin %abcd00390928190802180000821000281900%</p><p>QingWuShi_XDB:</p><p>endasm</p>]]></content>
        <author>
            <name>wener</name>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[2011å¹´çš„ç¬¬ä¸€å¤©ï¼Œä»Šå¤©å¼€é€šåšå®¢äº†]]></title>
        <id>start-blogging</id>
        <link href="https://wener.me/story/start-blogging"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[ç®—æ¥ç®—å»ç»ˆäºåˆ°äº†ä»Šå¤©äº†ã€‚]]></summary>
        <content type="html"><![CDATA[<p>ç®—æ¥ç®—å»ç»ˆäºåˆ°äº†ä»Šå¤©äº†ã€‚</p><p>æœ‰æ„ç­‰åˆ°äº†ä»Šå¤©å°±å¼€é€šæˆ‘çš„åšå®¢ï¼Œè¿™æ ·ä¸€ä¸ªçš„å¹³å°ä¸Šï¼Œè¯´è‡ªå·±æƒ³è¯´çš„ï¼Œåšè‡ªå·±æƒ³åšçš„ï¼ŒæŒºå¥½çš„ã€‚</p><p>ä¸ºäº†é¿å…åšå®¢ç©ºè¡è¡çš„ï¼Œæ‰€ä»¥æˆ‘å°±äº‹å…ˆå†™å¥½äº†<!-- -->[Php æ“ä½œäºŒè¿›åˆ¶æµï¼Œè¯»å–æ–‡ä»¶ç»“æ„]<!-- -->(./2011-01-01-PHP æ“ä½œäºŒè¿›åˆ¶æµï¼Œè¯»å–æ–‡ä»¶ç»“æ„.md)è¿™ç¯‡æ–‡ç« ï¼Œæ©æ©ï¼Œä¸ªäººæ„Ÿè§‰è‰¯å¥½å•Šã€‚</p><p>ä¸çŸ¥é“è¿™ä¸ªåšå®¢ä¼šé™ªä¼´æˆ‘èµ°å¤šä¹…ï¼Œè‡³å°‘æˆ‘ä¼šè®°å¾—11å¹´çš„01æ—¥æ˜¯å¥¹çš„è¯è¾°ï¼Œæ¯å¹´çš„ç¬¬ä¸€å¤©éƒ½æ˜¯ä»–çš„ç”Ÿè¾°ï¼Œå¸Œæœ›å¥¹èƒ½ä¸€ç›´é™ªæˆ‘èµ°ä¸‹å»å§ï¼Œæˆ‘çœ‹ç€å¥¹æˆé•¿ï¼Œä»–ä¹Ÿçœ‹ç€æˆ‘æˆé•¿ã€‚</p><p>è¯»ç€ä¹¦ï¼Œæˆ‘éƒ½æ‰“ç®—æ¯æœˆæ›´æ–°ä¸€ç¯‡æ–‡ç« äº†ï¼Œå¾ˆå¤šä¸œè¥¿ï¼Œå…¶å®æ•´ç†ä¸€ä¸‹å°±åˆæ˜¯ä¸€ç¯‡ä¸é”™çš„æ–‡ç« äº†ï¼Œè‡ªå·±ä¹Ÿäº«å—é‚£æ•´ç†çš„è¿‡ç¨‹ã€‚æŒºå¿«ä¹çš„ï¼Œè€Œä¸”ä¹Ÿå·©å›ºäº†è‡ªå·±çš„çŸ¥è¯†ã€‚ä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ</p><p>æˆ‘çš„åšå®¢ä¸Šæˆ–è®¸ä¸ä¼šå‡ºç°ä»€ä¹ˆå¹¿å‘Šå§ï¼Œæˆ‘ä¹Ÿä¸ä¼šç”¨å¹¿å‘Šæ¥èµšé’±ï¼Œæ„Ÿè§‰æ²¡æœ‰å¹¿å‘Šæ¸…çˆ½å¤šäº†ï¼Œä¹Ÿå¹²å‡€äº›ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[PHP æ“ä½œäºŒè¿›åˆ¶æµï¼Œè¯»å–æ–‡ä»¶ç»“æ„]]></title>
        <id>php-read-binary</id>
        <link href="https://wener.me/story/php-read-binary"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[æœ¬æ–‡åŒ…å«çš„å†…å®¹ï¼šè¯¦ç»†çš„packå’Œunpackè°ƒç”¨è¯¦è§£ï¼Œ16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶è¿”å›å€¼ï¼Œç­‰]]></summary>
        <content type="html"><![CDATA[<p>æœ¬æ–‡åŒ…å«çš„å†…å®¹ï¼šè¯¦ç»†çš„packå’Œunpackè°ƒç”¨è¯¦è§£ï¼Œ16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶è¿”å›å€¼ï¼Œç­‰</p><p>æœ¬æ–‡åŒ…å«çš„å†…å®¹ï¼šè¯¦ç»†çš„packå’Œunpackè°ƒç”¨è¯¦è§£ï¼Œ16è¿›åˆ¶æ•°å­—å­—ç¬¦ä¸²ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶è¿”å›å€¼ï¼Œç­‰åŒ…å«å®ä¾‹ï¼šè¯»å–</p><p>BMPå›¾ç‰‡ä¿¡æ¯å‡½æ•°ï¼š</p><p>//å°†16è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­¤å€¼çš„å­—ç¬¦ä¸²ã€‚</p><p>function hexstr_str( $hetstr)</p><p>//ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯packå®ç°ï¼Œä¸€ä¸ªæ˜¯chræ–¹æ³•å®ç°</p><p>æ›¾ç»ä¸ºäº†å¤„ç†æºæ–‡ä»¶å°±ç™¾åº¦äº†ä¸‹phpÂ 2
è¿›åˆ¶æ–‡ä»¶ï¼Œç»“æœå‡ºæ¥çš„è²Œä¼¼éƒ½æ˜¯ä¸€ä¸ªäººå†™çš„ï¼Œåˆ«äººå¤åˆ¶å’Œè½¬è½½çš„ï¼Œè€Œä¸”æˆ‘ä¹Ÿååæ²¡æœ‰çœ‹æ‡‚ã€‚æŒºéƒé—·çš„ã€‚å› æ­¤å°±æœ‰äº†ä¸‹æ–‡ï¼Œæˆ‘å°±è‡ªå·±ææ‰“ï¼Œç ”ç©¶ç ”ç©¶ã€‚Phpå¤„ç†</p><p>2è¿›åˆ¶æ— éå°±æ˜¯ä½¿ç”¨packå’Œunpackï¼Œåœ¨åæ–‡è®²è®²å…¶ä»–çš„åŠæ³•ã€‚</p><p>å‡½æ•°åŸå‹ï¼š</p><p>string pack (Â stringÂ $formatÂ [, <a href="http://cn2.php.net/manual/en/language.pseudo-types.php#language.types.mixed">mixed</a> $argsÂ [, <a href="http://cn2.php.net/manual/en/language.pseudo-types.php#language.types.mixed">mixed</a> $...Â ]]Â )</p><p>array unpack (Â stringÂ $formatÂ ,Â stringÂ $dataÂ )</p><p>Packæ˜¯è®²æ‰€ç»™çš„å‚æ•°æ›´å…·æ‰€ç»™çš„æ ¼å¼æ‰“åŒ…æˆ2è¿›åˆ¶å­—ç¬¦ä¸²ã€‚æ‰‹å†Œä¸Šè¯´è¿™ä¸ªå‡½æ•°å’ŒPerlçš„åŸºæœ¬ç›¸åŒï¼Œåªæ˜¯åœ¨æ ¼å¼ä¸Šå»æ‰äº†s,uç­‰ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰ç¬¦å·å’Œæ— ç¬¦å·çš„æ•°ç”±packè½¬æ¢å‡ºæ¥çš„ç»“æœç›¸åŒï¼Œä½†æ˜¯ä¼šå½±å“unpackçš„ç»“æœã€‚</p><p>å…ˆçœ‹ä¸€ä¸ªå°å°çš„å®ä¾‹ï¼š</p><p>$data = pack(&quot;N&quot;, 0x12345);</p><p>var_dump($data);</p><p>$fn = &#x27;out.text&#x27;;</p><p>$fp = fopen($fn,&#x27;w&#x27;);</p><p>fwrite($fp,$data);</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-899.png"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-899.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-899"/></a></p><p>ç»“æœå¾ˆæ˜äº†ï¼Œç”¨æ³•å¾ˆç®€å•ã€‚</p><p>å…³äºNæ¨¡å¼ï¼š</p><p>unsignedÂ longÂ (alwaysÂ 32Â bit,Â bigÂ endianÂ byteÂ order)</p><p>æ— ç¬¦å·é•¿æ•´å‹ï¼Œæ€»æ˜¯è¿”å›32ä½</p><p>æ ¼å¼ï¼š</p><table><thead><tr><th>mode</th><th>è¯´å˜›</th></tr></thead><tbody><tr><td>a</td><td>å°†å­—ç¬¦ä¸²ç©ºç™½ä»¥ NULL å­—ç¬¦å¡«æ»¡</td></tr><tr><td>A</td><td>å°†å­—ç¬¦ä¸²ç©ºç™½ä»¥ SPACE å­—ç¬¦ (ç©ºæ ¼) å¡«æ»¡</td></tr><tr><td>h</td><td>åå…­è¿›ä½å­—ç¬¦ä¸²ï¼Œä½ä½åœ¨å‰</td></tr><tr><td>H</td><td>åå…­è¿›ä½å­—ç¬¦ä¸²ï¼Œé«˜ä½åœ¨å‰</td></tr><tr><td>c</td><td>æœ‰å·å­—ç¬¦</td></tr><tr><td>C</td><td>æ— å·å­—ç¬¦</td></tr><tr><td>s</td><td>æœ‰å·çŸ­æ•´æ•° (åå…­ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>S</td><td>æ— å·çŸ­æ•´æ•° (åå…­ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>n</td><td>æ— å·çŸ­æ•´æ•° (åå…­ä½, é«˜ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>v</td><td>æ— å·çŸ­æ•´æ•° (åå…­ä½, ä½ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>i</td><td>æœ‰å·æ•´æ•° (ä¾è®¡ç®—æœºçš„é¡ºåºåŠèŒƒå›´)</td></tr><tr><td>I</td><td>æ— å·æ•´æ•° (ä¾è®¡ç®—æœºçš„é¡ºåºåŠèŒƒå›´)</td></tr><tr><td>l</td><td>æœ‰å·é•¿æ•´æ•° (32ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>L</td><td>æ— å·é•¿æ•´æ•° (32ä½ï¼Œä¾è®¡ç®—æœºçš„ä½é¡ºåº)</td></tr><tr><td>N</td><td>æ— å·çŸ­æ•´æ•° (32ä½, é«˜ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>V</td><td>æ— å·çŸ­æ•´æ•° (32ä½, ä½ä½åœ¨åçš„é¡ºåº)</td></tr><tr><td>f</td><td>å•ç²¾ç¡®æµ®ç‚¹æ•° (ä¾è®¡ç®—æœºçš„èŒƒå›´)</td></tr><tr><td>d</td><td>å€ç²¾ç¡®æµ®ç‚¹æ•° (ä¾è®¡ç®—æœºçš„èŒƒå›´)</td></tr><tr><td>x</td><td>ç©ºä½</td></tr><tr><td>X</td><td>å€’å›ä¸€ä½</td></tr><tr><td>@</td><td>å¡«å…¥ NULL å­—ç¬¦åˆ°ç»å¯¹ä½ç½®</td></tr></tbody></table><p>å…³äºpackçš„è°ƒç”¨æ–¹æ³•ã€‚</p><p>å› ä¸ºpackæ˜¯æ”¯æŒå¤šä¸ªä¸å®šä¸ªæ•°å‚æ•°çš„ï¼Œæ‰€ä»¥æ¯ä¸ªå‚æ•°éƒ½è¦æŒ‡å®šä¸€ä¸ªè½¬æ¢çš„æ¨¡å¼ã€‚</p><p>$data = pack(&quot;Nn&quot;, 0x12345, 0x12345);</p><p>å½“ä½ å‚æ•°çš„ä¸ªæ•°å¤šäºæ ¼å¼çš„ä¸ªæ•°æ—¶ï¼Œå‡ºç°ï¼š</p><p>Warning:Â pack()Â [<a href="http://localhost/lab/function.pack">function.pack</a>]:Â 1Â argumentsÂ unusedÂ in E:\host\htdocs\Lab\Binary.php onÂ line 4</p><p>Warningçº§é”™è¯¯ã€‚</p><p>è¿™ä¸ªè¿˜æœ‰ä¸ªæ³¨æ„çš„æ˜¯*æ¨¡å¼ã€‚</p><p>$data = pack(&quot;Nn*&quot;, 0x12345, 0x12345, 0x12345);<!-- -->\<!-- -->æœ€åä¸¤ä¸ªæ˜¯16ä½ï¼Œæ‰€ä»¥è¾“å‡ºé‡Œé¢æ˜¯2å­—èŠ‚</p><p>var_dump($data);</p><p>$fn = &#x27;out.text&#x27;;</p><p>$fp = fopen($fn,&#x27;w&#x27;);</p><p>fwrite($fp,$data);</p><p>è¾“å‡ºï¼š</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-1934.png"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-1934.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-1934"/></a></p><p>çœ‹å‡ºæ¥äº†æœ€åä¸¤ä¸ªæ˜¯ä¸€æ ·çš„ã€‚å› ä¸ºæ‰‹å†Œä¸Šæ²¡è¯´ï¼Œä½†æ˜¯æˆ‘çŒœæµ‹*æ¨¡å¼å°±æ˜¯â€œåŒä¸Šâ€çš„æ„æ€å§ã€‚</p><p>åŸºç¡€çŸ¥è¯†ï¼š</p><p>1å­—èŠ‚ =Â Â 8ä½ = 2^8 =Â Â 256</p><p>ä¸€ä¸ªgb2312å­—ç¬¦2å­—èŠ‚ï¼Œä¸€ä¸ªasciiå­—ç¬¦1å­—èŠ‚ã€‚</p><p>å…³äºæ¨¡å¼çš„é€‰æ‹©éƒ½ç”±ä¸ªäººä½¿ç”¨çš„æƒ…å†µå†³å®šï¼Œè¿™é‡Œæˆ‘ç»™å‡ºæˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªå‡½æ•°ã€‚</p><p>//å°†16è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­¤å€¼çš„å­—ç¬¦ä¸²ã€‚</p><p>function hexstr_str( $hetstr)</p><p> {</p><p> $re = &#x27;&#x27;;</p><p> for( $i = 0;Â isset( $hetstr<!-- -->[ $i + 4]<!-- -->); $i += 4)</p><p> //echoÂ substr(Â $hetstr,Â $i,Â 2);</p><p> $re .= pack(&#x27;n&#x27;,Â ( &#x27;0x&#x27;.substr( $hetstr, $i, 4))Â * 1);</p><p> $len = strlen( $hetstr)Â - $i;</p><p> $hetstr = &#x27;0x&#x27;.substr( $hetstr, $i, strlen( $hetstr)Â - $i);</p><p> $hetstr .=Â ( $len % 2)Â ? &#x27;0&#x27;:&#x27;&#x27;;</p><p> $format = $len <!-- -->&lt;<!-- --> 3 ? &#x27;v&#x27;: &#x27;n&#x27;;</p><p> $re .= pack( $format, $hetstr * 1);</p><p> return $re;</p><p> }</p><p>æµ‹è¯•ï¼š</p><p>$data = hexstr_str( &#x27;ABCDc&#x27;);</p><p>è¾“å‡ºï¼š</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-2766.png"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-2766.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-2766"/></a></p><p>æœ‰ç‚¹é—æ†¾çš„æ˜¯å®ƒéƒ½è¦ç”¨0æ¥è¡¥æ»¡16ä½ã€‚ä¸è¿‡æ€»çš„æ¥è¯´è¿˜æ˜¯å¾ˆä¸é”™çš„å•¦ã€‚</p><p>Unpackçš„ä½¿ç”¨ï¼Œæˆ‘è§‰å¾—ç”¨ç€è¿™ä¸ªæ„Ÿè§‰æŒºæªå¿ƒçš„ã€‚</p><p>unpack() worksÂ slightlyÂ differentÂ fromÂ PerlÂ asÂ theÂ unpackedÂ dataÂ isÂ storedÂ inÂ anÂ associativeÂ array.Â ToÂ accomplishÂ thisÂ youÂ haveÂ toÂ nameÂ theÂ differentÂ formatÂ codesÂ andÂ separateÂ themÂ byÂ aÂ slashÂ /.</p><p>Unpackçš„è¿è¡Œå’ŒPerlçš„æœ‰äº›å¾®ä¸åŒï¼Œåœ¨phpä¸­unpackçš„ç»“æœæ˜¯ç”±ä¸€ä¸ªæ•°ç»„è¿”å›çš„ã€‚å› æ­¤ä½ éœ€è¦æ¥å—è¿™äº›æ•°æ®å°±è¦ç»™æ ¼å¼å‘½åï¼Œä»¥/åˆ†éš”ã€‚</p><p>æ‰‹å†Œä¸Šçš„å®ä¾‹ï¼›</p><p>&lt;<!-- -->?php</p><p>$array = unpack(&quot;c2chars/nint&quot;, $binarydata);</p><p>?<!-- -->&gt;</p><p>çœ‹ä¸€ä¸ªæˆ‘ä¸ªäººçš„è°ƒç”¨å®ä¾‹ï¼š</p><p>$data = pack(&quot;n&quot;,Â (&#x27;0x&#x27;.&#x27;abc&#x27; )Â * 1);</p><p>$data = hexstr_str( &#x27;ABCDc&#x27;);</p><p>$s = $data;</p><p>$array = unpack(&quot;Nwen/n2stort&quot;, $s.$s);</p><p>è¾“å‡ºç»“æœï¼š</p><p>array(3)Â {</p><p> <!-- -->[&quot;wen&quot;]<!-- -->=<!-- -->&gt;</p><p> int(-1412579328)</p><p> <!-- -->[&quot;stort1&quot;]<!-- -->=<!-- -->&gt;</p><p> int(43981)</p><p> <!-- -->[&quot;stort2&quot;]<!-- -->=<!-- -->&gt;</p><p> int(49152)</p><p>}</p><p>ä¸Šå¼ç»“æœä¹Ÿå°±æ˜¯</p><p>wen:abcdc000</p><p>stort1:abcd</p><p>stort2:c000</p><p>çœ‹ç€è¿™æ ·çš„ç»“æœå’Œè¾“å…¥çš„æ ¼å¼æˆ‘è§‰å¾—å¾ˆæªå¿ƒçš„ã€‚ä¸è¿‡è¿™é‡Œè¿˜æ˜¯æœ‰ç‚¹å¥½å¤„çš„ï¼Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥æ ¼å¼åŒ–è¾“å‡ºä¸€ä¸ªæ–‡ä»¶çš„å¤´ä¿¡æ¯ä»€ä¹ˆçš„ã€‚</p><p>è¯¦ç»†è®²è®²uppackçš„æ ¼å¼å’Œè¾“å…¥çš„å…³ç³»ã€‚</p><p>&quot;Nwen/n2stort&quot;</p><p>å³ç¬¬ä¸€ä¸ªè§£æä»¥Nä¸ºæ ¼å¼ï¼Œä»¥wenä¸ºåå­—ã€‚</p><p> ç¬¬äºŒä¸ªè§£æä»¥nä¸ºæ ¼å¼è§£æä¸¤æ¬¡ï¼Œä»¥shortä¸ºåå­—ã€‚</p><p>ç”Ÿæˆçš„shortçš„åå­—æ˜¯ä»¥short1ï¼Œshort2ï¼Œâ€¦â€¦shortnè¿™æ ·çš„å½¢å¼å¢é•¿çš„ã€‚</p><p>è§£æçš„æ–¹æ³•ï¼š</p><p>Nï¼Œå…ˆåœ¨è¾“å…¥ï¼ˆ$s.$sï¼‰ä¸­è¯»å…¥32ä½é•¿ï¼Œå³4å­—èŠ‚ã€‚ç„¶åå†ç”¨Nè½¬æ¢ï¼Œæ­¤æ—¶æŒ‡å‘$s.$sæŒ‡é’ˆçš„ä½ç½®å·²ç»åˆ°äº†4äº†ï¼Œç¬¬ä¸€ä¸ª$så·²ç»è¯»å®Œäº†ï¼Œå› æ­¤è¦æ˜¯è¾“å…¥æ˜¯$sçš„è¯ä¼šæŠ¥é”™ï¼š</p><p>Warning:Â unpack()Â [<a href="http://localhost/lab/function.unpack">function.unpack</a>]:Â TypeÂ n:Â notÂ enoughÂ input,Â needÂ 2,Â haveÂ 0Â in E:\host\htdocs\Lab\Binary.php onÂ line 7</p><p>bool(false)</p><p>æ­¤æ—¶çš„è¿”å›å€¼ä¸ºfalseã€‚</p><p>åœ¨è§£æå®Œç¬¬ä¸€ä¸ªNåé‡åˆ°äº†â€œ/â€è¿›å…¥ä¸‹ä¸€ç»„çš„è§£æï¼Œè§£æçš„æ ¼å¼ä¸ºnï¼Œæœ‰2ç»„ï¼Œåå­—ä¸ºshort</p><p>æ‰€ä»¥short1ä¸ºè¾“å…¥çš„ç¬¬4-6è§£æçš„ç»“æœï¼Œè€Œshort2ä¸º6-8çš„ç»“æœã€‚éƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p><p>è¿™æ ·çœ‹æ¥ä¹Ÿä¸æ˜¯å¾ˆéš¾å˜›æ˜¯å§ã€‚</p><p>ä¸ªäººæ–¹æ³•ï¼š</p><p>Perlæ€æƒ³ä¸­æœ‰ä¸€æ¡æ˜¯ï¼š</p><p>There&#x27;s More Than One Way To Do It.</p><p>æˆ‘ä¹Ÿè§‰å¾—å¦‚æ­¤ã€‚</p><p>Phpä¸­æœ‰ä¸ªå‡½æ•°å«åš</p><p>String chr(Â intÂ $asciiÂ )</p><p>è¿”å›ä¸€ä¸ªå­—èŠ‚ï¼Œä»¥asciiå€¼ä¸ºå‚æ•°ã€‚</p><p>åŸæœ¬çš„asciiåªæœ‰127çš„ï¼Œä½†æ˜¯åæ¥æ‰©å±•åˆ°äº†255åŠ ä¸Š0é‚£å°±æ˜¯256  å¾ˆå¥½Â è¿™æ ·å°±éƒ½èƒ½è¡¨ç¤ºäº†ã€‚</p><p>æŠŠä¸Šé¢é‚£ä¸ªå‡½æ•°ç¨å¾®æ”¹é€ ä¸€ä¸‹å°±æ˜¯ï¼š</p><p>//å°†16è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­¤å€¼çš„å­—ç¬¦ä¸²ã€‚</p><p>function hexstr_str( $hexstr)</p><p>{</p><p> $re = &#x27;&#x27;;</p><p> for( $i = 0;Â isset( $hexstr<!-- -->[ $i +1]<!-- -->); $i += 2)</p><p> $re .= chr(Â (&#x27;0x&#x27;.$hexstr<!-- -->[ $i]<!-- -->.$hexstr<!-- -->[ $i + 1]<!-- -->)Â * 1);</p><p> if( strlen( $hexstr)Â <!-- -->&gt;<!-- --> $i)</p><p> $re .= chr(Â (&#x27;0x&#x27;.$hexstr<!-- -->[ $i]<!-- -->.&#x27;0&#x27;)Â * 1);</p><p> return $re;</p><p>}</p><p>ä»£ç ç®€æ´äº†å¾ˆå¤šå•Šã€‚çœ‹èµ·æ¥é¡ºçœ¼å¤šäº†ã€‚</p><p>ç½®äºæˆ‘ä¸ºå•¥ç ”ç©¶è¿™ä¸ªç©æ„å„¿ï¼Œæˆ‘æœ€å¼€å§‹ä¹Ÿå°±æ˜¯ä¸ºäº†ç”¨å•¦è¯»å–BMPæºæ–‡ä»¶çš„ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æ¥ç®€å•å†™ä¸ªè¯»å–BMPå¤´ä¿¡æ¯çš„å‡½æ•°ã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä»¥24/32ä½å›¾ä¸¾ä¾‹ï¼Œ16/8/2ä½ä½å›¾åœ¨è¿™é‡Œå¯èƒ½è¡Œä¸é€šçš„ï¼Œå› ä¸ºæ•°æ®ç»“æ„ä¸åŒã€‚</p><p>BMPæ–‡ä»¶ç»“æ„ï¼š</p><p>Begin</p><p>//æ–‡ä»¶å¤´</p><p> section &quot;BMPÂ FileÂ Header&quot;</p><p>  read-onlyÂ char<!-- -->[2]<!-- --> &quot;BMP_ID&quot;  //Â 00</p><p>  uint32 &quot;FileÂ size&quot;    //Â 02</p><p>  uint32 &quot;Reserved&quot;    //Â 06</p><p>  uint32Â Â &quot;ImageDataOffset&quot;   //Â 0A</p><p> endsection</p><p>//ä¿¡æ¯å¤´</p><p> section &quot;BMPÂ InfoÂ Header&quot;</p><p>  uint32 &quot;HeaderSize&quot;    //Â 0E</p><p>  uint32 &quot;Width&quot;     //Â 12</p><p>  uint32 &quot;Height&quot;    //Â 16</p><p>  uint16 &quot;Planes&quot;    //Â 1A</p><p>  uint16 &quot;BPP&quot;     //Â 1C</p><p>  uint32 &quot;CompessionMethod&quot;   //Â 1E</p><p>  uint32 &quot;ImageSize&quot;    //Â 22</p><p>  uint32 &quot;XPixelsPerMeter&quot;   //Â 26</p><p>  uint32 &quot;YPixelsPerMeter&quot;   //Â 2A</p><p>  uint32 &quot;PaletteSize&quot;    //Â 2E</p><p>  uint32 &quot;ColorsImportant&quot;   //Â 32</p><p> endsection</p><p>//è°ƒè‰²æ¿ä¿¡æ¯</p><p> section &quot;Palette(IfÂ PaletteSize=0Â thenÂ noÂ palette)&quot;</p><p>  numberingÂ 0</p><p>  {</p><p>   byteÂ &quot;B<!-- -->[~]<!-- -->&quot;</p><p>   byteÂ &quot;G<!-- -->[~]<!-- -->&quot;</p><p>   byteÂ &quot;R<!-- -->[~]<!-- -->&quot;</p><p>   byteÂ &quot;A<!-- -->[~]<!-- -->&quot;</p><p>  }Â <!-- -->[PaletteSize]</p><p> endsection</p><p>end</p><p>å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><p>$data = file_get_contents( &#x27;Wener.bmp&#x27;);</p><p>$array = unpack(&quot;nBMP_ID/Væ–‡ä»¶å¤§å°/Vä¿ç•™å­—/Vå›¾ç‰‡ä¿¡æ¯åç§»/Vå¤´å¤§å°/Vå®½/Vé«˜/vPlanes/vBPP/Vå‹ç¼©æ–¹æ³•/Vå›¾ç‰‡å¤§å°/Væ¨ªè½´ä¸Šæ¯åƒç´ å®½/Vç«–è½´ä¸Šæ¯åƒç´ å®½/Vè°ƒè‰²æ¿å¤§å°/Vé‡è¦çš„é¢œè‰²&quot;, $data);</p><p>echo &#x27;<!-- -->&lt;<!-- -->pre<!-- -->&gt;<!-- -->&#x27;;</p><p>var_dump( $array);</p><p>foreach( $array as $k =<!-- -->&gt;<!-- --> $v)</p><p> echo $k,&#x27;:&#x27;,( $v),&#x27;<!-- -->&lt;<!-- -->br<!-- -->&gt;<!-- -->&#x27;;</p><p>è¯·æ›´æ”¹ä¸ºä½ è‡ªå·±çš„å›¾ç‰‡åœ°å€åæµ‹è¯•ã€‚æˆ‘çš„è¾“å…¥å¦‚ä¸‹ï¼š</p><p>BMP_ID:16973</p><p>æ–‡ä»¶å¤§å°:307254</p><p>ä¿ç•™å­—:0</p><p>å›¾ç‰‡ä¿¡æ¯åç§»:54</p><p>å¤´å¤§å°:40</p><p>å®½:240</p><p>é«˜:320</p><p>Planes:1</p><p>BPP:32</p><p>å‹ç¼©æ–¹æ³•:0</p><p>å›¾ç‰‡å¤§å°:307200</p><p>æ¨ªè½´ä¸Šæ¯åƒç´ å®½:0</p><p>ç«–è½´ä¸Šæ¯åƒç´ å®½:0</p><p>è°ƒè‰²æ¿å¤§å°:0</p><p>é‡è¦çš„é¢œè‰²:0</p><p>æˆ‘çš„æµ‹è¯•æ–‡ä»¶ï¼š</p><p><a href="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-6007.png"><img src="http://www.wener.me/wp-content/uploads/2011/01/php%E5%A4%84%E7%90%862%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6-6007-225x300.png" title="phpå¤„ç†2è¿›åˆ¶æ–‡ä»¶-6007"/></a></p><p>æ€»ç»“ï¼š</p><p>æ€»çš„ï¼Œæ¥è¯´ï¼Œphpçš„è¿™ä¸¤ä¸ªå‡½æ•°æ— ç–‘æ˜¯å¾ˆå¼ºå¤§çš„ã€‚ç”¨æ¥åˆ†ææ–‡ä»¶ä¹Ÿå¾ˆå¥½ç”¨ã€‚</p><p>æˆ–è®¸ä¸è¶³çš„å°±æ˜¯ç¼ºå°‘è¿™æ–¹é¢çš„æ¡ˆä¾‹å§ï¼Œæ²¡è§åˆ°å¾ˆå¤šäººç”¨è¿‡è¿™ä¸ªã€‚</p><p>ä»¥åè‡ªå·±å­¦ä¹ æ–‡ä»¶çš„ç»“æ„ä¹Ÿä¼šå¸¸å¸¸ç”¨åˆ°è¿™ä¸ªå‡½æ•°ï¼Œæœ‰æ—¶å€™è§‰å¾—unpackæ¯”packæ›´æœ‰é­…åŠ›ã€‚å…³äºæ›´è¯¦ç»†çš„BMPæ–‡ä»¶ç»“æ„å’Œä¿¡æ¯çš„è·å–æˆ‘ä¼šå¦å¤–å†™ä¸€ç¯‡æ–‡ç« çš„ã€‚è¿™ç¯‡åªæ˜¯ç•¥å¾®çš„æ¶‰åŠï¼Œä½œä¸ºä¸€ä¸ªä¾‹å­è€Œå·²ã€‚æˆ‘è¿˜æ˜¯è§‰å¾—</p><p>Phpå¤„ç†2è¿›åˆ¶æµçš„é­…åŠ›æ˜¯éå¸¸å¼ºå¤§çš„ã€‚</p><p>ç½®äºå»ºç«‹åœ¨è¿™ä¸ªä¹‹ä¸Šå†™æ›´å¤šçš„è¿ç”¨ï¼ˆåŠ å¯†ï¼Œåè®®ï¼Œç ´è§£ï¼Œè·å–æ–‡ä»¶ä¿¡æ¯ï¼‰ä»€ä¹ˆçš„å°±çœ‹ä¸ªäººå‘æŒ¥äº†ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[â€œWenerâ€çš„æ¥å† - ä¸€æ®µæ•…äº‹]]></title>
        <id>wener-is-my-name</id>
        <link href="https://wener.me/story/wener-is-my-name"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[è®°å¾—é‚£è¿˜æ˜¯åœ¨åˆä¸­çš„æ—¶å€™å§ï¼ŒåˆäºŒå·¦å³å§ï¼Œé‚£æ—¶å€™ç­ä¸Šå°±å¼€å§‹å«â€œç®€ç§°â€äº†ï¼Œè®°å¾—æœ€å…ˆå‡ºç°çš„æ˜¯â€œå¿—å„¿â€ï¼Œç„¶åå«äº†å«çš„å¤§å®¶éƒ½å¼€å§‹å«ç®€ç§°äº†ï¼Œæˆ‘è§‰å¾—è¿™æ ·ä¹ŸæŒºå¥½çš„ï¼Œå«äººæ²¡é‚£ä¹ˆè´¹åŠ›äº†ï¼Œä¹ŸèŠ‚çœäº†ä¸å°‘å£æ°´å’Œæ—¶é—´ã€‚]]></summary>
        <content type="html"><![CDATA[<p>è®°å¾—é‚£è¿˜æ˜¯åœ¨åˆä¸­çš„æ—¶å€™å§ï¼ŒåˆäºŒå·¦å³å§ï¼Œé‚£æ—¶å€™ç­ä¸Šå°±å¼€å§‹å«â€œç®€ç§°â€äº†ï¼Œè®°å¾—æœ€å…ˆå‡ºç°çš„æ˜¯â€œå¿—å„¿â€ï¼Œç„¶åå«äº†å«çš„å¤§å®¶éƒ½å¼€å§‹å«ç®€ç§°äº†ï¼Œæˆ‘è§‰å¾—è¿™æ ·ä¹ŸæŒºå¥½çš„ï¼Œå«äººæ²¡é‚£ä¹ˆè´¹åŠ›äº†ï¼Œä¹ŸèŠ‚çœäº†ä¸å°‘å£æ°´å’Œæ—¶é—´ã€‚</p><p>æ‰€ä»¥æˆ‘å‘¢â€œæ–‡å„¿â€å°±è¿™æ ·å‡ºæ¥äº†ï¼Œæˆ‘è§‰å¾—è¿™æ ·å«èµ·æ¥å…¶å®æŒºäº²åˆ‡çš„ï¼Œå¬ç€çš„æ„Ÿè§‰ä¹Ÿå¾ˆå¥½çš„ã€‚</p><p>è€Œ æ–‡å„¿ å³Wen eräº†ï¼Œä¸­æ–‡å¼çš„æ‹¼éŸ³è½¬åŒ–è¿‡æ¥çš„ï¼ˆè™½ç„¶ä»å°æ‹¼éŸ³å°±ä¸å¥½ï¼Œé‚£è¿™ä¹Ÿç®—æ˜¯å¼¥è¡¥ä¸‹å§.......ï¼‰ã€‚</p><p>è€Œè¿˜æœ‰ä¸€ä¸ªè‹±è¯­çš„å•è¯ WinÂ  Î½.èƒœåˆ©Â  WinnerÂ  n.èƒœè€…</p><p>å¦‚æœ Wenerä¸­çš„ e å‘<code>[i:]</code>çš„éŸ³é‚£å°±å’Œ Winnerçš„éŸ³ç›¸åŒäº†ã€‚è°ä¸å¸Œæœ›æˆä¸ºä¸€ä¸ªèƒœè€…å‘¢ã€‚</p><p>è¿™ä¹Ÿç®—æˆ‘æ€€æ£ç€è‡ªå·±çš„æ¢¦æƒ³å§ã€‚</p><p>ç»¼ä¸Šå‘¢ æˆ‘å°±ç‰¹åˆ«å–œæ¬¢ <em>Wener</em> å’Œ <em>æ–‡å„¿</em> è¿™ä¸ªåå­—äº†</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ–‡ä»¶å­˜å‚¨ç»“æ„çš„åŸºæœ¬å½¢å¼åŠè€ƒè™‘å› ç´ ]]></title>
        <id>file-data-structures</id>
        <link href="https://wener.me/story/file-data-structures"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[æ¯å¤©æˆ‘ä»¬éƒ½åœ¨æ¥è§¦å„ç§å„æ ·çš„æ–‡ä»¶ï¼Œä½¿ç”¨å’Œè®°å½•å„ç§å„æ ·çš„æ•°æ®ä¿¡æ¯ï¼Œé‚£è¿™äº›æ–‡ä»¶éƒ½æ˜¯ä»¥ä»€ä¹ˆç»“æ„å­˜å‚¨çš„å‘¢ï¼Ÿæ­¤æ–‡å¯¹æ­¤è¿›è¡Œäº†ä¸€äº›å°å°çš„æ¶‰åŠå’Œè®²è§£ã€‚]]></summary>
        <content type="html"><![CDATA[<p>æ¯å¤©æˆ‘ä»¬éƒ½åœ¨æ¥è§¦å„ç§å„æ ·çš„æ–‡ä»¶ï¼Œä½¿ç”¨å’Œè®°å½•å„ç§å„æ ·çš„æ•°æ®ä¿¡æ¯ï¼Œé‚£è¿™äº›æ–‡ä»¶éƒ½æ˜¯ä»¥ä»€ä¹ˆç»“æ„å­˜å‚¨çš„å‘¢ï¼Ÿæ­¤æ–‡å¯¹æ­¤è¿›è¡Œäº†ä¸€äº›å°å°çš„æ¶‰åŠå’Œè®²è§£ã€‚</p><h1>æ–‡ä»¶å­˜å‚¨ç»“æ„</h1><p>åŸºæœ¬ç»„ç»‡æ–¹å¼ï¼š é¡ºåºç»„ç»‡Â  ç´¢å¼•ç»„ç»‡Â  æ•£åˆ—ç»„ç»‡Â  é“¾ç»„ç»‡</p><p>å¸¸ç”¨ç»“æ„Â Â Â Â Â Â Â  ï¼šÂ  é¡ºåºç»“æ„Â  ç´¢å¼•ç»“æ„Â  æ•£åˆ—ç»“æ„Â  é“¾ç»“æ„</p><h2>é¡ºåºç»“æ„ï¼ˆé¡ºåºè¡¨ï¼‰</h2><p>åˆ†ç±»ï¼š</p><p>å­˜å‚¨ä½ç½®ç›¸é‚»ï¼ˆè¿ç»­æ–‡ä»¶ï¼‰</p><p>è®°å½•é—´ä»¥æŒ‡é’ˆé“¾æ¥ï¼ˆä¸²è”æ–‡ä»¶ï¼‰</p><p>æè¿°ï¼šé¡ºåºç»“æ„å¯ç”¨äºé¡ºåºå­˜å–,ä½†æ›´æ”¹åéœ€è¦å…¨éƒ¨å¤åˆ¶ï¼Œå¯¹å¢åˆ æ“ä½œä¸æ–¹ä¾¿ã€‚ä¼˜ç‚¹æ˜¯å­˜å–è¾ƒå¿«ç”¨äºæ‰¹é‡ä¿®æ”¹ï¼Œä¸èƒ½åŠ¨æ€å¢é•¿ã€‚</p><p>æ¯”å¦‚ï¼š<a href="http://club.eebbk.com/bbkbbs/dispbbs.asp?boardid=38&amp;Id=250082">http://club.eebbk.com/bbkbbs/dispbbs.asp?boardid=38<!-- -->&amp;<!-- -->Id=250082</a></p><p>è¿™ä¸ªæ˜¯æ­¥æ­¥é«˜å­¦ä¹ æœºä¸­çš„æ–‡ä»¶ï¼Œlccï¼ˆåç‰‡æ–‡ä»¶ï¼‰å’Œç”¨æˆ·è¯å…¸æ•°æ®ã€‚éƒ½èƒ½ç®—åšæ˜¯é¡ºåºç»“æ„å§ï¼Œåªæ˜¯lccè¿˜åŒ…å«æœ‰ä¸€ç‚¹å¤´ä¿¡æ¯</p><h2>ç´¢å¼•ç»“æ„</h2><p>ç´¢å¼•æ–‡ä»¶åŒ…å«ï¼šç´¢å¼•è¡¨ï¼Œæ•°æ®è¡¨</p><p>æè¿°ï¼š</p><p>ç´¢å¼•è¡¨ä¸­ç´¢å¼•é¡¹åŒ…å«äº†ä¸å…·ä½“æ•°æ®æœ‰å…³çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚ä¸€äº›å…³é”®å­—ç­‰ï¼Œä½†æœ€ä¸»è¦çš„æ˜¯æŒ‡å‘æ•°æ®è¡¨çš„ä¸€ä¸ªåœ°å€ã€‚ç´¢å¼•è¡¨æ˜¯æœ‰åºçš„ï¼Œç‰©ç†æ¬¡åºä½“ç°æ–‡ä»¶é€»è¾‘æ¬¡åºï¼Œå®ç°æ–‡ä»¶çº¿æ€§ç»“æ„ã€‚</p><p>ç´¢å¼•è¡¨åªèƒ½æ˜¯ç£ç›˜æ–‡ä»¶ï¼Œç´¢å¼•ç»“æ„çš„æ–‡ä»¶æ—¢èƒ½é¡ºåºå­˜å–åˆèƒ½éšæœºå­˜å–</p><p>æ¯”å¦‚ï¼š</p><p><a href="http://club.eebbk.com/bbkbbs/dispbbs.asp?boardid=38&amp;Id=250018">http://club.eebbk.com/bbkbbs/dispbbs.asp?boardid=38<!-- -->&amp;<!-- -->Id=250018</a></p><p><a href="http://club.eebbk.com/bbkbbs/dispbbs.asp?boardid=38&amp;Id=250092">http://club.eebbk.com/bbkbbs/dispbbs.asp?boardid=38<!-- -->&amp;<!-- -->Id=250092</a></p><p>cue-Wv æ–‡ä»¶ï¼Œä¸€ç§åª’ä½“æ ¼å¼</p><p>Dvdçš„ä¸€äº›Vobæ–‡ä»¶ä¹Ÿæ˜¯ç´¢å¼•çš„</p><p>è¿™ç§æ–‡ä»¶ä¸­æœ‰çš„æ˜¯ä»¥ä¸€æ•´æ®µæ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œç„¶åä»¥ç´¢å¼•è¡¨æ¥åˆ†æ®µã€‚æœ‰çš„æ˜¯ä¸ºäº†æŠŠå¤šæ®µæ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œç„¶åä»¥ç´¢å¼•è¡¨æ¥è¾¨åˆ«åˆ†åˆ«çš„æ¯ä¸ªæ–‡ä»¶ã€‚</p><h2>æ•£åˆ—ç»“æ„ï¼ˆè®¡ç®—æœºå¯»å€ç»“æ„ï¼Œå…¶æ–‡ä»¶è¢«ç§°ä¸ºæ•£åˆ—æ–‡ä»¶ï¼‰</h2><p>æè¿°ï¼š</p><p>è®°å½•çš„æ˜¯åˆå…³é”®å­—ç»è¿‡æ•£åˆ—å‡½æ•°ç¡®å®šçš„åœ°å€ï¼Œå­˜å–å¿«ï¼Œä¸éœ€è¦ç´¢å¼•èŠ‚çœäº†ç©ºé—´ï¼Œä½†ä¸èƒ½é¡ºåºå­˜å– åªèƒ½éšæœºã€‚RAM éšæœºå­˜å–çš„ã€‚</p><p>å…·ä½“å“ªäº›æ–‡ä»¶æ˜¯æˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œå› ä¸ºä¸€èˆ¬å“ªäº›æ–‡ä»¶ç»“æ„éƒ½æ¯”è¾ƒéš¾å¼„çš„æ¸…æ¥šï¼Œå¿…é¡»è¦çŸ¥é“æ•£åˆ—å‡½æ•°æ‰èƒ½ç¡®å®šå…¶æ•°æ®ç»“æ„ã€‚</p><h2>é“¾ç»“æ„</h2><p>æè¿°ï¼š</p><p>å³ä»¥æŒ‡é’ˆé“¾æ¥çš„æ¯ä¸ªç‰©ç†å—ã€‚</p><p>ä¼˜ç‚¹æ˜¯ï¼šèƒ½å¤Ÿå­˜å‚¨ç¢ç‰‡ï¼Œåˆ©äºåŠ¨æ€å¢åˆ ï¼Œæé«˜ç£ç›˜åˆ©ç”¨ç‡</p><p>ç¼ºç‚¹æ˜¯ï¼šå­˜å–è¾ƒæ…¢ï¼Œä¸é€‚ç”¨äºéšæœºå­˜å–ï¼Œæ•ˆç‡ä½ï¼Œå¯é æ€§ä½ï¼ˆä¸€ä¸ªæŒ‡é’ˆå‡ºé”™å°±å…¨éƒ¨éƒ½é”™äº†ï¼‰ï¼ŒæŒ‡é’ˆéœ€è¦ç©ºé—´æ¥å­˜å‚¨</p><p>é“¾ç»“æ„åœ¨è®¡ç®—æœºä¸­è¿ç”¨è¿˜æ˜¯å¾ˆå¹¿æ³›çš„ï¼Œç¼–ç¨‹æ—¶çš„æ•°ç»„å¯¹è±¡ç­‰æ•°æ®ç»“æ„åŸºæœ¬éƒ½æ˜¯ä»¥é“¾ç»“æ„å‚¨å­˜çš„ã€‚</p><p>ä¸€èˆ¬é“¾ç»“æ„çš„keyéƒ½éœ€è¦ä¸€äº›æŒ‡é’ˆä¿¡æ¯ï¼Œä¾‹å¦‚ä¸Šä¸€ä¸ªä½ç½®ä¸‹ä¸€ä¸ªä½ç½®ï¼Œæ„Ÿè§‰å°±åƒæ˜¯æ•°ç»„ç»“æ„ã€‚</p><h1>è€ƒè™‘å› ç´ </h1><p>ä¸€èˆ¬é€‰æ‹©å…·ä½“æ–‡ä»¶ç»“æ„çš„æ—¶å€™éƒ½éœ€è¦æ›´å…·å…·ä½“æƒ…å†µæ¥è€ƒè™‘ï¼Œæˆ‘è¿™é‡Œåªèƒ½ç½—åˆ—å‡ºä¸€äº›è€ƒè™‘çš„å› ç´ </p><p>è€ƒè™‘å› ç´ ï¼šå­˜å‚¨ä»‹è´¨ç±»å‹ï¼Œè®°å½•ç±»å‹ï¼Œå¤§å°ï¼Œå…³é”®å­—æ•°ç›®ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œä½•ç§æ“ä½œç­‰</p><p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šä½•å¿…å†ã€‹]]></title>
        <id>no-more</id>
        <link href="https://wener.me/story/no-more"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <content type="html"><![CDATA[<pre><code>ä½•å¿… ä½•å¿…çš„å†
ä¸ºä½ æƒ³å¾—å¤ªå¤š
åšçš„ è¯´çš„
å¤ªå¤š
é‡å¤çš„
ä½ è¯´è¿‡çš„
é‚£å·²ä¸å†æœ‰æ„ä¹‰
è¨€è¯­ è¯å¥
è¿˜æ˜¯é‚£ä¹ˆçš„è¯—æƒ…ç”»æ„
çˆ±ä½  æœªæ›¾æœ‰ç§˜å¯†
ä½ è¯´ä»Šç”Ÿæ³¨å®š
ä¸èƒ½åœ¨ä¸€èµ·
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šæ­Œå£°ã€‹]]></title>
        <id>the-song</id>
        <link href="https://wener.me/story/the-song"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <content type="html"><![CDATA[<pre><code>å¾˜å¾Šåœ¨è€³é—´
æœ‰ä½ çš„å‘¼å¸ å–˜æ¯

ä¸åœåœ° åŠªåŠ›åœ°
è¯‰è¯´ç€æ­Œé‡Œçš„æ•…äº‹

ç•™ç€ä½ çš„æ³ª ä¼¤ç€ä½ çš„å¿ƒ å›ç€ä½ çš„å¿†

ä½ å’Œä»–æ€æ²¡ç»§ç»­
é‚£ä¹ˆå¤šå’Œä»–çš„å°ç§˜å¯†

ä¸ºä»€ä¹ˆä¸æ›¾å‘Šè¯‰ä»–
å´æ¥å‘æˆ‘è¯´ï¼Ÿ
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šæ²‰é†‰çš„çŠ¯ç½ªã€‹]]></title>
        <id>addicted-sin</id>
        <link href="https://wener.me/story/addicted-sin"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <content type="html"><![CDATA[<pre><code>æœˆå…‰ä½¿äººæ²‰é†‰
è·¯ç¯å…‰ä½¿äººçŠ¯ç½ª

é‚£äº›æ²‰é†‰åœ¨æ‹¥æ€€ä¸­çŠ¯ç½ªçš„äººå•Š
æ‚¨å¯å¦æŒªæŒª

æˆ‘ä¸æ˜¯æœ‰æ„è¦æ‰“æ‰°ä½ 
åªæ˜¯ä½ ç«™åœ¨é‚£é‡Œæˆ‘å¤ªå¯¹ä¸èµ·
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šç»­çˆ±ã€‹]]></title>
        <id>love-more</id>
        <link href="https://wener.me/story/love-more"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <content type="html"><![CDATA[<pre><code>å»¶ç»­ä¸Šä¸–çš„è®°å¿†
ä»Šç”Ÿæƒ³ç€å¦‚ä½•è¿˜èƒ½å’Œä½ ç»§ç»­

æˆ‘æ€å¿µçš„äººå•Š
æˆ‘ä»¬ç›¸éš”ä¸€ä¸–çš„è·ç¦»

ä½ æ˜¯å¦è¿˜è®°å¾—
æœ‰è¿™ä¸ªä¸€ä¸ªæœŸå¾…

ä½ å¯ä»¥ä¾èµ–
ç»§ç»­æˆ‘ä»¬ä»Šç”Ÿçˆ±
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å­¦ä¹ ä¹‹è°ˆ]]></title>
        <id>learning-skill</id>
        <link href="https://wener.me/story/learning-skill"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[ä¸€ä¸‹å†…å®¹ä¹‹ä½œä¸ºä¸ªäººå­¦ä¹ çš„ä¸€äº›ç»éªŒ]]></summary>
        <content type="html"><![CDATA[<blockquote><p>ä¸€ä¸‹å†…å®¹ä¹‹ä½œä¸ºä¸ªäººå­¦ä¹ çš„ä¸€äº›ç»éªŒ
å¸¦æœ‰å¼ºçƒˆçš„ä¸»è§‚è‰²å½©, ä¸èƒ½è®¤ä¸ºå®Œå…¨æ­£ç¡®. :smile:</p></blockquote><h2>å­¦ä¹  Java çš„æ–¹æ³•</h2><ul><li>æœ‰å…´è¶£</li><li>ä¼šè°·æ­Œ</li><li>æœ‰é—®é¢˜å°±è°·æ­Œ</li><li>ä¼šç‚¹è®¡ç®—æœºè‹±è¯­</li><li>æœ‰é—®é¢˜å°±è°·æ­Œ,å°½é‡ç”¨è‹±è¯­</li><li>ä¼šç¿»å¢™</li><li>æœ‰é—®é¢˜å°±è°·æ­Œ,å°½é‡ç”¨è‹±è¯­,ä¼šç¿»å¢™æ‰èƒ½çœ‹åˆ°è°·æ­Œ</li></ul><h2>Java çš„å­¦ä¹ é¡ºåºåº”è¯¥å¦‚ä½•å‘¢</h2><ul><li>åšä¸€ä¸ªä¸œè¥¿</li><li>å°æ¸¸æˆä»€ä¹ˆçš„ è¿™ä¸ªè¿‡ç¨‹ä¼šå­¦åˆ°å¾ˆå¤š</li><li>å°½é‡å·æ‡’</li></ul><h2>é™¤äº†è¿™ä¸ªæ¥ä¸‹æ¥çœ‹å“ªéƒ¨åˆ†å‘¢ I/O æµä¹‹ç±»çš„ï¼Ÿ</h2><ul><li>æ²¡æœ‰ä¸ªé¡ºåº ç”¨åˆ°å†å­¦</li><li>ä¸ç„¶ä¸ºäº†å­¦è€Œå­¦æ²¡æ„ä¹‰</li></ul><h2>æƒ³å­¦ä¼šäº†çŸ¥è¯† å†ç”¨ ç„¶åæ‰¾å·¥ä½œ</h2><ul><li>çŸ¥è¯†å­¦ä¸å®Œ</li><li>åšç‚¹ä½œå“åº”è¯¥æ‰æ˜¯é‡è¦çš„ æˆ‘è§‰å¾—</li></ul><h2>å­¦åˆ°å¤Ÿå·¥ä½œå°±å¤Ÿäº† ç„¶åæ›´å¤šçš„éƒ½æ˜¯åœ¨å·¥ä½œä¸­å­¦</h2><ul><li>æ°¸è¿œå¤Ÿä¸äº†</li><li>æ²¡æœ‰é“¶å¼¹</li></ul><p>Q: å­¦åˆ°å¤Ÿä¸€äº›åŸºæœ¬å·¥ä½œçš„ ç„¶ååœ¨å·¥ä½œä¸­ä¼šä¸æ–­ç”¨åˆ°çŸ¥è¯†ä»€ä¹ˆçš„ ä¹Ÿå¯ä»¥å†ç»§ç»­å­¦ åˆé”»ç‚¼åˆå­¦,
è‡ªå·±å­¦çš„è¯ç»ˆå½’å¾ˆå¤šæ˜¯ä¸å…¨é¢çš„ å·¥ä½œäº†çŸ¥é“éœ€è¦ä»€ä¹ˆäº† æ–¹å‘è·Ÿæ›´æ˜ç¡®å§</p><ul><li>æ‰€ä»¥ç­‰åˆ°ç”¨çš„æ—¶å€™å†å­¦</li><li>èƒ½åšå‡ºæ¥ä¸œè¥¿è¯´æ˜ä½ æœ‰åº•å­äº†</li><li>ä¹Ÿæœ‰äº†ä¸€å®šè§£å†³é—®é¢˜çš„èƒ½åŠ›</li></ul><p>Q: ä½†æ˜¯ç°åœ¨æˆ‘è¿˜æ˜¯æ„Ÿè§‰å­¦çš„å¤ªå°‘äº† è¿˜æ˜¯ä»€ä¹ˆéƒ½ä¸ä¼šä¸€æ · æ‰€ä»¥æƒ³é—®é—®åŸºæœ¬æŒæ¡å“ªäº›çŸ¥è¯†å¯ä»¥æŠ•å…¥å·¥ä½œ æˆ–è€…å°±æ˜¯è¯´å­¦ä¹ çš„åŸºæœ¬é¡ºåº</p><ul><li>çŸ¥é“æ¯ä¸ªå…³é”®å­—çš„ä½œç”¨</li><li>ä»€ä¹ˆæ—¶å€™ç”¨ æ€ä¹ˆç”¨</li><li>çŸ¥é“åŸºæœ¬çš„è¯­æ³•</li><li>ç„¶åå°±å¯ä»¥å°è¯•åˆ›é€ è‡ªå·±çš„ä¸–ç•Œäº†</li><li>è¿‡ç¨‹ä¸­ä¸æ–­æŸ¥æ‰¾æ–‡æ¡£</li></ul><h2>æˆ‘æ€ä¹ˆå·æ‡’çš„</h2><ul><li>ä¸€èˆ¬æƒ³è¦åšä¸€ä¸ªä¸œè¥¿çš„æ—¶å€™, éƒ½ä¼šå¤§æ¦‚çš„è§„åˆ’ä¸‹, éœ€è¦äº›ä»€ä¹ˆæ ·çš„å·¥å…·</li><li>ç„¶åä¼šèŠ±è´¹å¤§é‡çš„æ—¶é—´è°·æ­Œ</li><li>æ‰¾è‡ªå·±èƒ½åˆ©ç”¨çš„,å¯ç”¨çš„,é«˜æ•ˆçš„ä¸€äº›å·¥å…·</li><li>å“ªæ€•æ˜¯ä¸ºäº†è‡ªå·±å°‘å†™å‡ åè¡Œä»£ç ä¹Ÿä¼šå¼•å…¥ä¸€ä¸ª jar åŒ…</li><li>ä¸€å®šè¦ä¼š maven æˆ– ivy, gradle ç­‰</li><li>æœ‰äº†ä¾èµ–ç®¡ç†å·¥å…·, å¯¼å…¥ jar åŒ…ç­‰, å°±æ˜“å¦‚åæŒäº†</li><li>åœ¨è¿™æ ·çš„ä¸€ä¸ªè¿‡ç¨‹ä¸­, ä½ ä¸€å®šä¼šç»“è¯†ä¸€äº›å¾ˆå¥½ç”¨çš„å·¥å…·, è¿™äº›éƒ½æœ‰åŠ©äºä»¥åçš„å¼€å‘</li><li>å¸¸ç”¨çš„å¥½å·¥å…·: guava, guice, jodd ç³»åˆ—, commons ç³»åˆ—, joda-time ...</li><li>é™¤éå¿…è¦, å°½é‡ä¸è¦é‡å¤é€ è½®å­.</li><li>æŠŠè‡ªå·±å†™è¿‡çš„å°ä¸œè¥¿ç•™ä¸‹æ¥, ä¸‹æ¬¡å†™ä¸œè¥¿çš„æ—¶å€™, åº”è¯¥é‡Œé¢å¾ˆå¤šçš„ä¸œè¥¿éƒ½è¿˜ä¼šç”¨åˆ°.</li><li>å¦‚æœå¯ä»¥, å°½é‡ä½¿ç”¨é«˜ç‰ˆæœ¬çš„ java</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æˆ‘çš„ç¼–ç¨‹ä¹‹é“]]></title>
        <id>the-why-i-write-code</id>
        <link href="https://wener.me/story/the-why-i-write-code"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[- èƒ½ä¸èƒ½åš]]></summary>
        <content type="html"><![CDATA[<ul><li>èƒ½ä¸èƒ½åš</li><li>è¯¥æ€ä¹ˆåš</li><li>è¿™æ ·åšä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜</li><li>æˆ‘æœ‰æ²¡æœ‰åŠæ³•èƒ½å¤Ÿåè°ƒè¿™äº›é—®é¢˜</li><li>å°†æ¥ä¼šæœ‰ä»€ä¹ˆæ ·çš„æ”¹å˜</li><li>æˆ‘éœ€è¦è¿è¡Œåœ¨ä»€ä¹ˆç¯å¢ƒä¸‹</li><li>ç”¨ä»€ä¹ˆè¯­è¨€å†™</li><li>è¿è¡Œæ—¶éœ€è¦ä¾èµ–ä»€ä¹ˆæ¡ä»¶</li><li>æµ‹è¯•æ˜¯å¦é€šè¿‡</li></ul><h1>æˆ‘çš„è§‚å¿µ</h1><h2>ç¼©çŸ­å˜é‡ä½œç”¨åŸŸ</h2><ul><li>å¯ä»¥å‡å°‘ä»£ç é”™è¯¯</li><li>å¯ä»¥é‡ç”¨å˜é‡å</li><li>å¯ä»¥æ–¹ä¾¿ä»£ç çš„é‡æ„</li><li>æ¨¡å—åŒ–æ›´å¼º</li><li>é¿å…å…¨å±€å˜é‡,æœ‰äº›å…¨å±€å˜é‡å¯ä»¥ç”¨ singleton æ¨¡å¼æ¥æ›¿ä»£</li></ul><h2>å†™å®Œæ•´çš„å•è¯,å‡†ç¡®çš„åå­—</h2><ul><li>å¯ä»¥å‡å°‘å¯¹æ³¨é‡Šçš„éœ€æ±‚</li><li>ä»£ç æ›´æ¸…æ™°,æ˜ç™½</li></ul><h2>é€‚å½“çš„æ³¨é‡Š,å¯æ–‡æ¡£åŒ–çš„æ³¨é‡Š</h2><ul><li>ä¾¿äºç”Ÿæˆä»£ç æ–‡æ¡£,æ–¹ä¾¿æŸ¥é˜…</li><li>ä¾¿äºåä½œè€…ä½¿ç”¨ä½ çš„ä»£ç å’Œæ¥å£</li><li>ä¸€èˆ¬ ide æ”¯æŒçš„æ³¨é‡Šå¯ä»¥ç›´æ¥æ˜¾ç¤ºå‡ºæ¥,å„ç§æ–¹ä¾¿</li><li>åŠ¨æ€ç±»å‹è¯­è¨€çš„æ–‡æ¡£å¯ä»¥æä¾›æ›´å¤šçš„ç±»å‹ä¿¡æ¯,æ¯”å¦‚ js</li><li>jsdoc,javadoc,doxgen,luadoc .....</li></ul><h2>å°½é‡çš„å·æ‡’</h2><ul><li>åœ¨å‡†å¤‡å†™ä¹‹å‰å¤šæŸ¥æŸ¥å·²ç»æœ‰çš„åº“ (github, google code, sf.net, ....)</li><li>ä»£ç æ¨¡å—åŒ–è¶Šå¼º,å°±è¶Šèƒ½å·æ‡’</li><li>å†™ä»£ç æ—¶,è€ƒè™‘ä¸‹æ€ä¹ˆåšå°½é‡å°çš„ä¿®æ”¹å°±å¯ä»¥åšå…¶ä»–çš„ä¸œè¥¿</li><li>ä¸ºé‡ç”¨è€Œç¼–ç </li><li>ä½¿ç”¨ä»£ç ç”Ÿæˆ, lombok, less, dart .....</li></ul><h1>æˆ‘çš„ä»£ç é£æ ¼</h1><h2>ç¼©è¿›é£æ ¼</h2><p>æˆ‘çš„ä»£ç é£æ ¼ä¸»è¦å’Œ <a href="http://en.wikipedia.org/wiki/Indent_style#Horstmann_style">Horstmann</a> ç›¸è¿‘,ä½†æ˜¯ä¹Ÿæœ‰äº›ä¸åŒçš„åœ°æ–¹.</p><p>Horstmann é£æ ¼:</p><pre><code class="language-c">while (x == y)
{   something();
    somethingelse();
    //...
    if (x &lt; 0)
    {   printf(&quot;Negative&quot;);
        negative(x);
    }
    else
    {   printf(&quot;Non-negative&quot;);
        nonnegative(x);
    }
}
finalthing();
</code></pre><p>æˆ‘çš„é£æ ¼:</p><pre><code class="language-c">while (x == y)
{
    something();
    somethingelse();
    //...
    if (x &lt; 0)
    {
        printf(&quot;Negative&quot;);
        negative(x);
    }else
    {
        printf(&quot;Non-negative&quot;);
        nonnegative(x);
    }
}
finalthing();
</code></pre><p>ä¸ªäººè§‚ç‚¹:</p><ul><li>å› ä¸ºå¸¸ç”¨ <code>{}</code> æ¥ç¼©å‡ä½œç”¨åŸŸ,å¼€æ‹¬å·æ¢è¡Œè¿™æ ·è®©ä»£ç æ›´æ¸…æ™°,ä¹Ÿä¾¿äºè‡ªåŠ¨ç¼©è¿›</li><li>å› ä¸º <code>{</code> å•ç‹¬å äº†ä¸€è¡Œ,è¿™æ ·è®©ä»£ç æ›´é•¿,ä½†æ˜¯ä¹Ÿæ›´å¤šç©ºç™½,çœ‹èµ·æ¥æ›´è½»æ¾</li></ul><h2>è‹±æ–‡å•è¯çš„é€‰æ‹©</h2><h3>title vs name</h3><p>See <a href="http://stackoverflow.com/questions/5527632/c-sharp-naming-convention-title-vs-name">http://stackoverflow.com/questions/5527632/c-sharp-naming-convention-title-vs-name</a></p><blockquote><p>Name is used more frequently for an object with an internal name or for business objects that naturally has a Name property (such as a person)</p><p>Title is used more often to refer to a User Interface Control object or a business object that naturally has a title, like an article.</p></blockquote><h3>ID vs Id</h3><p>See <a href="http://stackoverflow.com/questions/1151338/id-or-id-on-user-interface">http://stackoverflow.com/questions/1151338/id-or-id-on-user-interface</a></p><h3>Filename, FileName, filename</h3><p>See <a href="http://english.stackexchange.com/questions/5366/which-is-correct-filename-file-name-or-filename">http://english.stackexchange.com/questions/5366/which-is-correct-filename-file-name-or-filename</a></p><p>ä¸€èˆ¬æˆ‘é€‰æ‹© Filename.</p><h3>OK vs Ok : OK</h3><p>OK æ˜¯æ­£ç¡®çš„å†™æ³•</p><h3>DB vs Db</h3><p>See <a href="http://stackoverflow.com/questions/1345103/why-is-db-an-acronym-and-not-abbreviation">http://stackoverflow.com/questions/1345103/why-is-db-an-acronym-and-not-abbreviation</a></p><p>æ„Ÿè§‰ DB æ¯” Db æ›´å¥½</p><h2>æ ‡è¯†ç¬¦</h2><ul><li>åœ¨ c ç±»å‡½æ•°å¼è¯­è¨€å¸¸ç”¨ <code>_</code> æ¥åˆ†å‰²å•è¯, å› ä¸º c çš„å‡½æ•°å¤§å¤šæ˜¯è¿™ä¸ªé£æ ¼
e.g. <code>void enter_stage();</code></li><li>åœ¨ java ç±» oo è¯­è¨€å¸¸ç”¨é©¼å³°å‘½å
e.g. <code>function enterStage()</code></li><li>é™æ€æ–¹æ³•ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™</li><li>ç”¨ set/get å‰ç¼€,å¹¶ä¸” setter æ˜¯å¯é“¾çš„.
e.g <code>Action setTime(int t){time = t; return this;} </code></li><li>å¦‚æœä¸ç”¨ set/get åˆ™ç”¨ æµå¼çš„ API.</li></ul><pre><code>class Action
{
    int time;
    Action time(int t){time = t; return this;}
    int time(){ return time;}
}
</code></pre><ul><li>å¦‚æœè¿”å›ç±»å‹ä¸º <code>boolean</code> åˆ™ç”¨ is ä½œä¸º getter å‰ç¼€
e.g. <code>boolean isTimeOut();</code></li><li>åœ¨ä¸åŸç”Ÿæ”¯æŒ äº‹ä»¶ çš„è¯­è¨€é‡Œ,ç”¨ <code>On</code> ä½œä¸ºäº‹ä»¶çš„å‰ç¼€.
e.g. <code>void OnKeyInput(KeyEvent e);</code></li></ul><h1>æˆ‘çš„å®è·µ</h1><p>åœ¨ä¸€äº›ç‰¹å®šè¯­è¨€é‡Œ,æˆ‘çš„ä¹ æƒ¯</p><h2>JS</h2><h3>å°æŠ€å·§å’Œä¹ æƒ¯</h3><pre><code class="language-js">// ä»stringè½¬æ¢ä¸ºnumber
+numberString;

// å¼ºåˆ¶è½¬æ¢ä¸º boolean
!!object;

// æ¯”è¾ƒæ—¶ä½¿ç”¨ ===
if(!!objA === !!objB)
{}

// ç”¨å‰ç¼€ $ æ¥æ ‡è¯†nodeæˆ–jqæŸ¥è¯¢
var $main = $(&#x27;#main&#x27;);
var $wener = document.querySelector(&#x27;#wener&#x27;);

// ç”¨ []/{} æ¥åˆå§‹åŒ–æ•°ç»„å’Œç±»
var list = [];// è€Œä¸æ˜¯ new Array()
var obj = {};// è€Œä¸æ˜¯ new Object()

</code></pre><h3>æ–‡ä»¶æ¨¡å¼</h3><pre><code class="language-js">// æ–‡ä»¶ action.js
(function()
{
    // code for action.js
})();
</code></pre><h3>ç±»æ¨¡å¼</h3><pre><code class="language-js">// ç±» Action
(function(window)
{
    function Action(){}
    Action.prototype[&#x27;doSomthing&#x27;] = function(){};
    // export
    // window[&#x27;Action&#x27;] æ¯” window.Action åœ¨å‹ç¼©çš„æ—¶å€™æ›´å¥½
    // google closure compiler çš„å¯¼å‡ºæ–¹æ³•
    window[&#x27;Action&#x27;] = Action;
})(window);
</code></pre><h3>åŒ…/å‘½åç©ºé—´/ç±» æ¨¡å¼</h3><pre><code class="language-js">// åŒ…/å‘½åç©ºé—´ ui
// label.js
(function(ui)
{
    function Label(){}
    // export
    ui[&#x27;Label&#x27;] = Label;
})(window.ui || (window.ui = {}));
// button.js
(function(ui)
{
    function Button(){}
    // export
    ui[&#x27;Button&#x27;] = Button;
})(window.ui || (window.ui = {}));
</code></pre><h3>static æ–¹æ³•</h3><pre><code class="language-js">// ç±» Action
(function(window)
{
    function Action(){}
    Action[&#x27;doSomthing&#x27;] = function(){};
    // export
    window[&#x27;Action&#x27;] = Action;
})(window);
</code></pre><h3>singleton æ¨¡å¼</h3><pre><code class="language-js">// ç±» Action
(function(window)
{
    var instance = null;
    function Action()
    {
        if(instance != null)
            throw new Error(&quot;already init Action&quot;);
    }
    Action[&#x27;getInstance&#x27;] = function()
    {
        if(instance == null)
            instance = new Action();
        return instance;
    };
    // export
    window[&#x27;Action&#x27;] = Action;
})(window);
</code></pre><h3>é¿å…ä½¿ç”¨ä¸€æ¬¡æ€§çš„åŒ¿åå‡½æ•°</h3><ul><li>ä¾¿äºé‡æ„</li><li>ä¾¿äºæ›´æ”¹</li><li>ä»£ç æ¸…æ™°</li><li>å¯é‡ç”¨</li></ul><pre><code class="language-js">function OnLoad(){}
window.onload = OnLoad; // è€Œä¸æ˜¯ window.onload = function(){};
</code></pre><h1>èµ„æº</h1><ul><li><a href="https://projectlombok.org">lombok</a>,java ä»£ç ç”Ÿæˆ</li><li><a href="https://github.com/rzwitserloot/lombok">github-lombok</a></li><li><a href="http://usejsdoc.org/">jsdoc</a>, js æ³¨é‡Šè§„èŒƒ,æ–‡æ¡£ç”Ÿæˆ</li><li><a href="https://developers.google.com/closure/compiler/docs/js-for-compiler">js-for-compiler</a>
,Closure Compiler çš„æ³¨é‡Šè§„èŒƒ</li><li><a href="https://developers.google.com/closure/">closure</a>, js ä¼˜åŒ–,å‹ç¼© å·¥å…·</li><li><a href="https://jshint.com">jshint</a>, js lint å·¥å…·,å¯é…ç½®çš„ jslint ç‰ˆæœ¬.</li><li><a href="https://github.com/shichuan/javascript-patterns">javascript-patterns</a>, js ç¼–ç¨‹æ¨¡å¼</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CentOS æ–°æ‰‹]]></title>
        <id>centos-newbie</id>
        <link href="https://wener.me/story/centos-newbie"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[è®°å½•æˆ‘ç© centos çš„ç»å†]]></summary>
        <content type="html"><![CDATA[<blockquote><p>è®°å½•æˆ‘ç© centos çš„ç»å†
å¾ˆå¤šæ—¶å€™éœ€è¦ sudo ç­‰ root æƒé™çš„æ—¶å€™éœ€è¦è‡ªè¡Œåˆ¤æ–­.å°½é‡ä¸ç›´æ¥ç”¨ root å¸æˆ·.</p></blockquote><blockquote><p>æˆ‘è‡ªå·±ä½¿ç”¨æ—¶çš„ä¸»è¦å®‰è£…è¿‡ç¨‹</p><p>åˆå§‹é…ç½® -&gt; è®¾ç½®å¥½ openssh-server -&gt; æ·»åŠ é¢å¤–çš„ repo -&gt; å®‰è£… git
ä¸‹è½½æˆ‘çš„<a href="https://github.com/wenerme/dotfiles">dotfiles</a>
å…¶ä»–æ­¥éª¤åˆ™æŒ‰éœ€è¿›è¡Œ</p></blockquote><h2>åˆå§‹ minimal é…ç½®</h2><pre><code class="language-bash"># é¦–å…ˆæ˜¯æ‰“å¼€ç½‘ç»œå’¯
ifconfig eth0 up
dhclient
# æ·»åŠ ä¸ªå¸å·, è®¾ç½®å¥½å¯†ç 
useradd wener
passwd wener
# æŠŠ åˆ›å»ºçš„å¸å·æ·»åŠ åˆ° sudoers file ä¸­
echo &quot;wener ALL=(ALL) ALL&quot; &gt;&gt; /etc/sudoers
# æ›´æ–°ä¸€ä¸‹å…ˆ
yum update -y
# å› ä¸ºæ˜¯ minimal ç‰ˆæœ¬, å…ˆå®‰è£…ä¸€äº›å¿…è¦çš„ä¸œè¥¿
yum install man wget curl -y
# ç™»å‡º,ä¸‹é¢çš„æ“ä½œä¸åœ¨rootä¸‹æ“ä½œäº†,å®‰å…¨ç‚¹
logout
# ç”¨ä¹‹å‰åˆ›å»ºçš„å¸å·ç™»å½•
</code></pre><h2>é minimal çš„å‡†å¤‡</h2><pre><code class="language-bash"># Download ISOs
# UNETBootin
# Install
# ===============
# Configuration
# ===============
# basic upgrade
su root
yum upgrade
</code></pre><h2>æ·»åŠ å…¶ä»–çš„ repo</h2><pre><code class="language-bash"># add rpmforge
# fllow this http://wiki.centos.org/AdditionalResources/Repositories/RPMForge
rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt
# ç‰ˆæœ¬å·å¯èƒ½æœ‰æ‰€ä¸åŒ,å‚è§ä¸Šé¢çš„é“¾æ¥
# æ ¹æ®ä¸ªäººçš„ç³»ç»Ÿæ„æ¶`uname -i`é€‰æ‹© i686 æˆ– x86_64
wget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm
rpm -K rpmforge-release-*.rpm
rpm -i rpmforge-release-*.rpm
yum upgrade
</code></pre><h2>æ‚é¡¹</h2><pre><code class="language-bash"># lscpi
yum install pciutils -y
# iwconfig ç­‰æ— çº¿å·¥å…·
yum install wireless-tools -y

# åˆ—å‡ºå·²å®‰è£…çš„åŒ…
yum list installed

# åˆ‡æ¢ TTY çš„å¿«æ·é”® &lt;C-A-F1-6&gt;

# sudo é™„åŠ åˆ°æ–‡ä»¶
echo BOOTPROTO=dhcp | sudo tee -a /etc/sysconfig/network-scripts/ifcfg-wlan0

# æŒ‚è½½ vbox çš„å…±äº«ç›®å½•
mkdir ~/shared
sudo mount -t vboxsf shared ~/shared

# ä½¿ç”¨sudoæ‰¾ä¸åˆ°å‘½ä»¤çš„æ—¶å€™
# å¯ä»¥è€ƒè™‘å°† /usr/local/bin/:/usr/local/sbin/
# æ·»åŠ åˆ° /etc/sudoers çš„ secure_path ä¸­

# åˆ¤æ–­è¿œç¨‹æŸç«¯å£æ˜¯å¦å¼€å¯
timeout 1 bash -c &#x27;cat &lt; /dev/null &gt; /dev/tcp/192.168.56.101/8087&#x27;
echo $?
</code></pre><p>CentOS ä¸‹ å®‰è£…çš„ wpa_supplicant æ²¡æœ‰ wpa_gui,å¯ä»¥å‚è§ <a href="http://www.linuxfromscratch.org/blfs/view/svn/basicnet/wpa_supplicant.html">è¿™é‡Œ</a>,ä¸»è¦æ˜¯å› ä¸º centos çš„ wpa_supplicant ç‰ˆæœ¬å¤ªè€äº†,0.7 çš„,ç°åœ¨æœ€æ–°çš„æ˜¯ 2.1 çš„,æŸ¥çœ‹<a href="http://w1.fi/wpa_supplicant/">å®˜æ–¹ä¸»é¡µ</a>å¯ä¸‹è½½.ä½†æ˜¯è¿™ä¸ªè½¯ä»¶çš„ä¾èµ–é¡¹å¯¹ centos æ¥è¯´ ç‰ˆæœ¬å¤ªé«˜äº†,å®‰è£…èµ·æ¥éå¸¸å¤æ‚.</p><h2>å¯åŠ¨ä¸å¸¦çª—å£çš„ vbox</h2><p>å¾ˆå¤šæ—¶å€™åªéœ€è¦è®©ç³»ç»Ÿè¿è¡Œ, ç„¶åè¿œç¨‹ ssh è®¿é—®, åŒæ—¶ä¹ŸèŠ‚çº¦ç‚¹å†…å­˜.</p><pre><code class="language-bash"># æ–¹æ³•ä¸€. ä½¿ç”¨å‘½ä»¤è¡Œ
# çŸ¥é“å¯åŠ¨ç³»ç»Ÿçš„åå­—æˆ–UUID
VBoxManager list vms
# å¯åŠ¨æŒ‡å®šçš„ç³»ç»Ÿ
VBoxManager -s UUID
# æˆ–
VBoxManager -s ç³»ç»Ÿåå­—
# æ–¹æ³•äºŒ. åœ¨ç‚¹å¯åŠ¨æŒ‰é’®çš„æ—¶å€™,æŒ‰ä½ Shift å³å¯
</code></pre><h2>å®‰è£…å‰æ</h2><pre><code># åœ¨è¿›è¡Œä¸‹åˆ—å®‰è£…çš„æ—¶å€™ å‡è®¾å·²ç»è®¾ç½®å¥½äº† rpmforg å·²ç»å®‰è£…äº†å¼€å‘tao#å¥—ä»¶ groupinstall &quot;Development tools&quot; -y
</code></pre><h2>Install 7z</h2><pre><code class="language-bash"># Install 7zip, centos can not uncompress some zip file.
yum install p7zip -y
</code></pre><h2>å®‰è£… GUI, åªé’ˆå¯¹äº minimal å®‰è£…çš„</h2><pre><code class="language-bash">yum -y groupinstall &quot;X Window System&quot; &quot;Desktop&quot; &quot;Fonts&quot; &quot;General Purpose Desktop&quot;
# é»˜è®¤æ˜¯æ²¡æœ‰ç«ç‹çš„,è‡ªå·±æ‰‹åŠ¨å®‰è£…
yum -y firefox
</code></pre><h2>å®‰è£… virtual-box çš„é™„åŠ æ‰©å±•</h2><p>ä¸€èˆ¬ç›´æ¥å®‰è£…æ‰©å±•çš„æ—¶å€™å®‰è£…ä¸»æ¨¡å—æœ‰å¯èƒ½å¤±è´¥.</p><pre><code class="language-bash"># å‚è€ƒ http://wiki.centos.org/HowTos/Virtualization/VirtualBox/CentOSguest
# éœ€è¦å…ˆé…ç½®å¥½ rpmforge
yum -y install dkms
yum -y groupinstall &quot;Development Tools&quot;
yum -y install kernel-devel
</code></pre><h2>å®‰è£… git</h2><pre><code class="language-bash"># å› ä¸º git ç‰ˆæœ¬å¤ªä½äº†,æ‰€ä»¥æ‰“ç®—è‡ªå·±å®‰è£…git
yum --enablerepo=updates clean metadata
yum install perl-devel -y
yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel -y
# å¯ä»¥è€ƒè™‘ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬, ä¾‹å¦‚ https://github.com/git/git/archive/v1.9.4.zip
# ä½¿ç”¨å‘å¸ƒç‰ˆç¨³å®šäº›
curl -L -o git.zip https://github.com/git/git/archive/master.zip
# æˆ–
# wget -O git.zip https://github.com/git/git/archive/master.zip
unzip git*.zip
cd git*
make prefix=/usr/local all
make prefix=/usr/local install
# è¿™é‡Œå¯èƒ½å’Œ åœ¨ Development tools é‡Œçš„gitå†²çª
# å¯ä»¥ç§»é™¤å®‰è£…çš„git ä»æ–°æ‰“å¼€ç»ˆç«¯å°±å¥½äº†
yum remove git
exit
# reopen an terminal
# å¦‚æœä¸æƒ³ç§»é™¤ git
# æ¸…é™¤ä¸‹ git çš„hashå°±å¥½äº†
hash -d git
</code></pre><h2>Intsall ntfs-3g</h2><pre><code class="language-bash"># Add ntfs filesystem support, because I install centos with win7
# fllow this http://wiki.centos.org/TipsAndTricks/NTFS
yum install ntfs-3g -y
</code></pre><h2>Install iBus</h2><pre><code class="language-bash"># fllow this http://code.google.com/p/ibus/wiki/CentOS
# 1.Install necessary packages
yum install ibus ibus-gtk ibus-qt
yum install ibus-pinyin # or other engine(s) you want
yum install im-chooser
# 2. Enable input method at System-&gt;Perferences-&gt;Input Method
# 3. Add input methods
# 4.Re-login
</code></pre><h2>Install python2.7 for goagent</h2><pre><code class="language-bash"># Setup Development tools
yum groupinstall &quot;Development tools&quot; -y
# basic lib
yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel -y

# Manualy install puthon2.7, not change the system&#x27;s 2.6 version
# When I install python 2.7.x, the newest is 2.7.5
# go check at http://python.org/ftp/python/
# BTW, you can install 3.x python by this way
PYTHON_VERSION=2.7.5
mkdir ~/src &amp;&amp; cd $_
wget http://python.org/ftp/python/${PYTHON_VERSION}/Python-${PYTHON_VERSION}.tar.bz2
tar xf Python-${PYTHON_VERSION}.tar.bz2
cd Python-${PYTHON_VERSION}
./configure --prefix=/usr/local

# -j 8 for more quickly
# Notice, make install change to make altinstall
make -j 8 &amp;&amp; make altinstall
</code></pre><h2>Install python-openssl for python2.7</h2><pre><code class="language-bash"># Install python-openssl for goagent
mkdir -p ~/src &amp;&amp; cd $_
yum install openssl openssl-devel -y
wget --no-check-certificate https://pypi.python.org/packages/source/p/pyOpenSSL/pyOpenSSL-0.13.tar.gz
tar -xzfv pyOpenSSL-0.13.tar.gz
cd pyOpenSSL-0.13
# Notice, compile for python2.7
python2.7 setup.py build_ext -I /usr/local/include/python2.7/ -L /usr/local/lib/python2.7/
python2.7 setup.py build
python2.7 setup.py install
</code></pre><h2>Install goagent</h2><pre><code class="language-bash"># Download goagent and run it, because I have to install chrome
mkdir -p ~/app &amp;&amp; cd $_
wget https://goagent.googlecode.com/archive/3.0.zip
7za x 3.0.zip
mv goagent-* goagent

# setup your gea
vim goagent/local/proxy.ini

# and run
python2.7  goagent/local/goagent-gtk.py &amp;
</code></pre><h2>Install chrome</h2><pre><code class="language-bash"># Setup wget proxy for download chrome
# append the proxy setting to &#x27;/etc/wgetrc&#x27;
# Reamove it, when you do not need this
https_proxy = http://127.0.0.1:8087/
http_proxy = http://127.0.0.1:8087/
ftp_proxy = http://127.0.0.1:8087/
use_proxy = on

# Install google-chrome
# fllow this http://chrome.richardlloyd.org.uk/
mkdir -p ~/app &amp;&amp; cd $_
wget http://chrome.richardlloyd.org.uk/install_chrome.sh
chmod u+x install_chrome.sh
./install_chrome.sh
</code></pre><h2>Install gvim7.4</h2><pre><code class="language-bash">mkdir -p ~/src &amp;&amp; cd $_
wget ftp://ftp.vim.org/pub/vim/unix/vim-7.4.tar.bz2
tar -jxvf vim-7.4.tar.bz2
#
yum install lua lua-devel -y
yum install libX11 libX11-devel libXt-devel libgtk2 libgtk2-devel -y
#
VIM_FLAG=&#x27;--enable-luainterp=yes --enable-cscope --enable-multibyte --enable-fontset --enable-gui&#x27;
#
./configure $VIM_FLAG
make -j 8 &amp;&amp; make test -j 8 &amp;&amp; make install
</code></pre><h2>Install vim</h2><pre><code class="language-bash"># ç›´æ¥ä½¿ç”¨yumæœç´¢åˆ°çš„ ä¸ºäº†ä½¿ç”¨ç®€å•
yum install vim-enhanced -y
</code></pre><h2>Install Nvidia-driver</h2><pre><code class="language-bash"># find out you card info
lspic | grep VGA
# download form nvidia http://www.nvidia.in/Download/index.aspx

# prepare
yum update
yum clean all
yum groupinstall &quot;Development Tools&quot;
yum install kernel-devel kernel-headers gcc make

added the following line to /etc/modprobe.d/blacklist.conf file
</code></pre><h2>Bully + Aircrack-ng + Reaver</h2><blockquote><p><a href="https://reaver-wps.googlecode.com/files/reaver-1.4.tar.gz">reaver</a> &gt; <a href="http://download.aircrack-ng.org/aircrack-ng-1.2-beta1.tar.gz">aircrack-ng-1.2-beta1</a>
reaver çš„æ›¿ä»£ <a href="https://github.com/bdpurcell/bully">bully</a></p></blockquote><pre><code class="language-bash"># å‡†å¤‡å·¥ä½œ
yum install -y libpcap libpcap-devel openssl-devel sqlite sqlite-devel
# è¿™ä¸ªlibnl æ˜¯ç”¨æ¥æ”¯æŒ netlink (nl80211) çš„
yum install -y libnl libnl-devel

# å…ˆæå¥½ bully
curl -L -o bully.zip https://github.com/bdpurcell/bully/archive/master.zip
7za x bully.zip
cd bully-master/src
make
make install
cd -

# å†æ Aircrack-ng
# æˆ‘å®‰è£…æ—¶ æœ€é«˜ç‰ˆæœ¬ä¸º 1.2-beta3
# è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, aircrack-ng è¢«å¢™äº†,è‡³å°‘æˆ‘ä¸‹è½½çš„æ—¶å€™æ˜¯çš„
# æˆ‘æ˜¯æ”¾åœ¨å…±äº«ç›®å½•é‡Œæ‹·è´è¿‡æ¥çš„
# ä¹Ÿå¯ä»¥ä» github ä¸‹è½½
# https://github.com/aircrack-ng/aircrack-ng
wget -O aircrack-ng.tar.gz http://download.aircrack-ng.org/aircrack-ng-1.2-beta3.tar.gz
tar -xvf aircrack-ng.tar.gz
cd aircrack-ng-*
# å®‰è£…è¿‡ç¨‹å¯ä»¥å‚è€ƒè¿™é‡Œ
# http://www.aircrack-ng.org/doku.php?id=install_aircrack#installing_aircrack-ng_from_source
make sqlite=true
sudo make install
# æ›´æ–° OUI
sudo airodump-ng-oui-update

# å®‰è£… reaver, è™½ç„¶æœ‰bully,ä½†æ˜¯reaverè¿˜æ˜¯è›®ä¸é”™çš„
wget https://reaver-wps.googlecode.com/files/reaver-1.4.tar.gz
tar -xzvf reaver-*.tar.gz
cd reaver-*/src
./configure
make
make install
</code></pre><h2>pin creack</h2><pre><code class="language-bash">ifconfig wlan0 down
# è¿™é‡Œä¼šæç¤ºä¸€äº›æœ‰å¯èƒ½è¢«å½±å“çš„è¿›ç¨‹ dhclient å’Œ wpa_supplicant
# å¯ä»¥è€ƒè™‘å°†è¿™äº›è¿›ç¨‹å…³é—­
airmon-ng start wlan0
bully -e çƒ­ç‚¹åå­— -v3 mon0

# ä½¿ç”¨ reaver çš„æ–¹æ³•
wash -i mon0
reaver -a -S -vv -i mon0 -b `MAC`
</code></pre><h2>é€šè¿‡å‘½ä»¤è¡Œè¿æ¥æ— çº¿ç½‘, ç®€å•ç‰ˆ</h2><p>æ¥è‡ª <a href="http://www.ghacks.net/2009/04/14/connect-to-a-wireless-network-via-command-line/">connect-to-a-wireless-network-via-command-line</a></p><pre><code class="language-bash">#! /bin/bash
ifconfig wlan0
iwconfig wlan0 essid NETWORK_ID key WIRELESS_KEY
dhclient wlan0
</code></pre><p><code>NETWORK_ID</code> ä¸ºæ— çº¿å
<code>WIRELESS_KEY</code> æä¸æ¸…æ¥š,åº”è¯¥æ˜¯å¯†ç å§. é»˜è®¤ä¸º 16 è¿›åˆ¶çš„å€¼,å¯ä»¥ç”¨ <code>s:WIRELESS_KEY</code> æ¥ä½¿ç”¨ ascii</p><h2>é€šè¿‡å‘½ä»¤è¡Œè¿æ¥æ— çº¿ç½‘</h2><p>æ¥è‡ª <a href="http://linuxcommando.blogspot.com/2013/10/how-to-connect-to-wpawpa2-wifi-network.html">how-to-connect-to-wpawpa2-wifi-network</a></p><p>éœ€è¦ä½¿ç”¨çš„å·¥å…·
<code>yum install wpa_supplicant wireless-tools -y</code></p><pre><code class="language-bash"># 1. æŸ¥çœ‹ä½ çš„æ— çº¿è®¾å¤‡å
$iw dev
phy#0
    Interface wlan0
        ifindex 3
        type managed
# 2. æ£€æŸ¥æ— çº¿è®¾å¤‡æ˜¯å¦å¯ç”¨ é‡Œé¢éœ€è¦æœ‰ä¸ªUP
$ ip link show wlan0
3: wlan0: (BROADCAST,MULTICAST) mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000
    link/ether 74:e5:43:a1:ce:65 brd ff:ff:ff:ff:ff:ff
# å¯ç”¨æ— çº¿è®¾å¤‡
$ ip link set wlan0 up

# æ£€æŸ¥æ— çº¿è®¾å¤‡æ˜¯å¦å¯ç”¨ é‡Œé¢æœ‰ä¸ªUP
$ ip link show wlan0
3: wlan0: (NO-CARRIER,BROADCAST,MULTICAST,UP) mtu 1500 qdisc mq state DOWN mode DEFAULT qlen 1000
    link/ether 74:e5:43:a1:ce:65 brd ff:ff:ff:ff:ff:ff

# 3. æ£€æŸ¥è¿æ¥çŠ¶æ€
$ /sbin/iw wlan0 link
Not connected.

# 4. æ‰«æç½‘ç»œ
$ sudo /sbin/iw wlan0 scan
BSS 00:14:d1:9c:1f:c8 (on wlan0)
        ... ç•¥è¿‡ ...
    freq: 2412
    SSID: Touch-me
    RSN:     * Version: 1
         * Group cipher: CCMP
         * Pairwise ciphers: CCMP
         * Authentication suites: PSK
         * Capabilities: (0x0000)
        ... ç•¥è¿‡ ...

# è¿™é‡Œçš„ SSID å’Œ å®‰å…¨åè®®ç±»å‹å¾ˆé‡è¦
# è¿™é‡Œæ˜¯ RSN, å³ wpa2

# 5. è¿æ¥åˆ° WPA/WPA2 wifi

$ wpa_passphrase æ— çº¿åç§° &gt;&gt; /etc/wpa_supplicant.conf
æ— çº¿å¯†ç 

# æ­£ç¡®çš„åº”è¯¥æ˜¯è¿™æ ·çš„
$ cat /etc/wpa_supplicant.conf
# reading passphrase from stdin
network={
    ssid=&quot;gorilla&quot;
    #psk=&quot;testtest&quot;
    psk=4dfe1c985520d26a13e932bf0acb1d4580461dd854ed79ad1a88ec221a802061
}

# è¿æ¥
$ sudo wpa_supplicant -B -D wext -i wlan0 -c /etc/wpa_supplicant.conf
# -B åœ¨åå°è¿è¡Œ
# -D æŒ‡å®šæ— çº¿è®¾ä¸º, wextä¸ºæ™®é€šæ— çº¿è®¾å¤‡
# -c é…ç½®æ–‡ä»¶è·¯å¾„

# æ£€æŸ¥æ˜¯å¦è¿æ¥
$ /sbin/iw wlan0 link
Connected to 00:14:d1:9c:1f:c8 (on wlan0)
    SSID: gorilla
    freq: 2412
    RX: 63825 bytes (471 packets)
    TX: 1344 bytes (12 packets)
    signal: -27 dBm
    tx bitrate: 6.5 MBit/s MCS 0

    bss flags:  short-slot-time
    dtim period:    0
    beacon int: 100
# 6. é€šè¿‡ DHCP è·å– IPåœ°å€
$ sudo dhclient wlan0
# æœ‰æ—¶å€™æ— æ³•è·å– å¯ä»¥è€ƒè™‘ dhclient -x å…³é—­åä»æ–°è·å–

# æŸ¥çœ‹ IP åœ°å€
$ ip addr show wlan0
3: wlan0:  mtu 1500 qdisc mq state UP qlen 1000
    link/ether 74:e5:43:a1:ce:65 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.113/24 brd 192.168.1.255 scope global wlan0
    inet6 fe80::76e5:43ff:fea1:ce65/64 scope link
       valid_lft forever preferred_lft forever

# 7. æ·»åŠ é»˜è®¤è·¯ç”±è§„åˆ™(å¯ç•¥è¿‡)
$ ip route show
192.168.1.0/24 dev wlan0  proto kernel  scope link  src 192.168.1.113

#  è¿™æ¡è§„åˆ™æ˜¯è½¬å‘ (192.168.1.*) åˆ° wlan0,å¦‚æœä½ æƒ³æ·»åŠ å…¶ä»–çš„ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•
$ sudo ip route add default via 192.168.1.254 dev wlan0
$ ip route show
default via 192.168.1.254 dev wlan0
192.168.1.0/24 dev wlan0  proto kernel  scope link  src 192.168.1.113

# 8. æµ‹è¯•æ˜¯å¦æ­£ç¡®è¿æ¥
$ ping 8.8.8.8
</code></pre><h2>è‡ªåŠ¨è¿æ¥æ— çº¿çš„é…ç½®</h2><p>å‚è€ƒå®˜æ–¹çš„ <a href="http://wiki.centos.org/HowTos/Laptops/WpaSupplicant">wpa_supplicant é…ç½®</a>
è¿™é‡Œæ²¡æœ‰æåˆ°ç»™ wlan0 é…ç½®è‡ªåŠ¨çš„ dhcp</p><p>æ„Ÿè§‰ä¸Š
<code>echo BOOTPROTO=dhcp | sudo tee -a /etc/sysconfig/network-scripts/ifcfg-wlan0</code>
è¿™æ ·å°±å¯ä»¥äº†~ä½†æ˜¯è¿˜æ˜¯ä¸è¡Œ,è¿˜æ˜¯è¦ <code>dhclient wlan0</code></p><p>éœ€è¦å‚è€ƒ <a href="http://www.centos.org/docs/5/html/Deployment_Guide-en-US/s1-networkscripts-interfaces.html">è¿™ä¸ª</a> æ¥é…ç½®.ä¹Ÿå¯ä»¥å‚è€ƒ<a href="http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_:_Ch13_:_Linux_Wireless_Networking#.U0YCk_mSyR0">è¿™ä¸ª</a>æ¥é…ç½®.</p><pre><code># è°ƒè¯•
wp _supplicantwpaa_supplicant -iwlan0 -c/etc/wpa_supplicant/wpa_supplicant.conf -d
</code></pre><h2>å¿˜è®°å¯†ç </h2><p>åœ¨ <code>grub</code> å¯åŠ¨çš„æ—¶å€™, ä¸­æ–­è‡ªåŠ¨å¯åŠ¨, çœ‹åˆ°é€‰æ‹©åˆ—è¡¨çš„æ—¶å€™, æŒ‰ <code>a</code>, åˆ é™¤ <code>rhgb quiet</code> ç„¶åè¾“å…¥ <code>1</code> å›è½¦, å³å¯è¿›å…¥å•ç”¨æˆ·æ¨¡å¼. éšåä½¿ç”¨ passwd ä¿®æ”¹å®Œæˆå¯†ç åé‡å¯å°±å¯ä»¥å›åˆ°å¤šç”¨æˆ·æ¨¡å¼äº†.</p><p>å‚è€ƒ <a href="http://wiki.centos.org/TipsAndTricks/ResetRootPassword">ResetRootPassword</a></p><h1>å®‰è£…å¼€å‘ç¯å¢ƒ</h1><h2>Install JDK</h2><p>è€ƒè™‘éœ€è¦å®‰è£…çš„ jdk å‘å¸ƒå•†, é€‰æ‹© openJDK è¿˜æ˜¯ oracle çš„ jdk
å¯å‚è€ƒè¿™é‡Œ<a href="https://launchpad.net/~webupd8team/+archive/java">webupd8</a> æ¥å®‰è£… oracle çš„ jdk.
æˆ–è€…å‚è€ƒ<a href="http://d.stavrovski.net/blog/post/how-to-install-and-setup-oracle-java-jdk-in-centos-6">è¿™ä¸ª</a>å®‰è£…æ­¥éª¤,è¿˜å¯ä»¥å‚è€ƒ<a href="https://wiki.powerfolder.com/display/PFS/Installing+Oracle+Java+on+Linux">è¿™é‡Œ</a></p><pre><code># æŸ¥çœ‹ repo ä¸­æ”¯æŒçš„ jdk ç‰ˆæœ¬, ä¸€èˆ¬ centos çš„repoä¸­åªæœ‰ openjdk
yum search java-1
# ç¡®ä¿ç³»ç»Ÿä¸­æ²¡æœ‰ å·²ç»å®‰è£…
rpm -qa | grep java-
# å¦‚æœæœ‰çš„è¯ åˆ™åˆ é™¤syum remove java-1.6.0-openjdkayn`
</code></pre><p>æˆ‘é€‰æ‹©çš„æ‰‹<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">åŠ¨ä¸‹</a>è½½ oracle çš„ jdk,æ¯•ç«Ÿ oracle çš„ jdk æ›´ç¨³å®šäº›.</p><p>æˆ‘å®‰è£… JDK8 çš„ä¸‹è½½åœ°å€
<a href="http://download.oracle.com/otn-pub/java/jdk/8u5-b13/jdk-8u5-linux-x64.rpm">http://download.oracle.com/otn-pub/java/jdk/8u5-b13/jdk-8u5-linux-x64.rpm</a></p><pre><code class="language-bash">wget --no-check-certificate --no-cookies \
    --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot;\
    &quot;http://download.oracle.com/otn-pub/java/jdk/8u5-b13/jdk-8u5-linux-x64.rpm&quot;
rpm -Uvh jdk-*.rpm
</code></pre><h2>Install nodejs</h2><pre><code class="language-bash">mkdir -p ~/src &amp;&amp; cd $_
wget -e &quot;http_proxy = http://127.0.0.1:8087/&quot;  http://nodejs.org/dist/node-latest.tar.gz
tar zxvf node-latest.tar.gz
./configure
make &amp;&amp; make install
# Already installed npm with nodejs source
</code></pre><h2>Install nginx</h2><pre><code class="language-bash"># add nginx repo
cat &gt; /etc/yum.repos.d/nginx.repo &lt;&lt;WEN
[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/$releasever/$basearch/
gpgcheck=0
enabled=1
WEN
# check
yum repolist
# install
yum install nginx -y
</code></pre><h2>Install php</h2><pre><code class="language-bash">yum groupinstall &#x27;PHP Support&#x27;
</code></pre><h1>å®‰è£…æœåŠ¡</h1><h2>Install vsftpd</h2><pre><code class="language-bash"># ç¡®å®šæœ‰
yum search vsftpd
</code></pre><h2>Install openssh-server</h2><pre><code class="language-bash"># å‚è€ƒ http://www.centos.org/docs/5/html/Deployment_Guide-en-US/s1-openssh-server-config.html
yum install openssh-server -y
# é…ç½®æ–‡ä»¶ä¸º /etc/ssh/sshd_config
# å¯åŠ¨
/sbin/service sshd start
# ä»ä¸»æœºè¿æ¥
# ssh ç”¨æˆ·å@è¯¥linuxæœºå™¨çš„IP
</code></pre><h2>Install tomcat</h2><pre><code class="language-bash">tar -zxvf apache-tomcat*.tar.gz
mv apache-tomcat* /opt/tomcat
# å¯åŠ¨
/opt/tomcat/bin/startup.sh
# é…ç½® iptable, ä½¿å¤–éƒ¨å¯ä»¥è®¿é—®
# æŸ¥çœ‹ç›®å‰çš„ IPTables è®¾ç½®
iptables -nL --linenumber
# ç¡®ä¿æ’å…¥åœ¨ REJECT any å‰é¢, 5 ä¸ºè¡Œå· æ ¹æ®ä¸ªäººçš„æƒ…å†µä¿®æ”¹
iptables -I INPUT 5 -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT -m comment --comment &quot;Tomcat Server port&quot;
service iptables save
</code></pre><h2>Install hadoop</h2><p>å‚è€ƒ<a href="http://tecadmin.net/steps-to-install-hadoop-on-centosrhel-6/">è¿™é‡Œ</a></p><h2>Install apache</h2><p><a href="https://www.centos.org/docs/5/html/Cluster_Administration/s1-apache-inshttpd-CA.html">apache-inshttpd</a></p><pre><code class="language-bash">yum install httpd
# å®Œæˆå éœ€è¦åœ¨ /etc/httpd/conf/httpd.conf ä¸­æ·»åŠ ä¸€å¥
# ServerName localhost
# å¦‚æœæƒ³è¦ä½¿ç”¨ apachectl status å‘½ä»¤ éœ€è¦ elinks å’Œ mod_status
# å…³äºä½¿ç”¨ status å‡ºç°é”™è¯¯çš„æƒ…å†µ å‚è€ƒ
# http://www.mydigitallife.info/request-url-server-status-or-404-page-not-found-apache-error/
</code></pre><p>æƒ³è¦ä½¿ç”¨ apachectl status åœ¨ httpd.conf ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®</p><pre><code class="language-bash">ExtendedStatus on
&lt;IfModule mod_status.c&gt;
    # Allow server status reports generated by mod_status,
    # with the URL of http://servername/server-status
    # Change the &quot;.example.com&quot; to match your domain to enable.
    #
    &lt;Location /server-status&gt;
        SetHandler server-status
        Order deny,allow
        Allow from all
    &lt;/Location&gt;
&lt;/IfModule&gt;
</code></pre><h3>é…ç½® mod_jk</h3><pre><code class="language-bash"># ä½¿ç”¨çš„æ—¶å€™ åªæœ‰ 1.2.40 ç‰ˆæœ¬
# å¯ä»¥æŸ¥çœ‹å…¶ä»–ç‰ˆæœ¬ http://www.apache.org/dist/tomcat/tomcat-connectors/jk/
wget http://www.apache.org/dist/tomcat/tomcat-connectors/jk/tomcat-connectors-1.2.40-src.zip
unzip tomcat-connectors*.zip
cd tomcat-connectors*
cd native
# è¿™é‡Œæœ‰ç‚¹æ‰¯æ·¡çš„æ˜¯ è¿™äº›è„šæœ¬éƒ½æ˜¯dos æ ¼å¼çš„ æ‰€ä»¥éœ€è¦å…ˆ dos2unix
# æ‰€ä»¥æˆ‘ç›´æ¥æ¢äº†ä¸ªç‰ˆæœ¬ ä½¿ç”¨çš„ 1.2.39 çš„, ä»£ç æ ¼æ²¡é—®é¢˜
yum install -y httpd-devel
./configure --with-apxs=/usr/sbin/apxs
make
make install
</code></pre><p>é›†ç¾¤é…ç½®å®Œæˆä¸ªå¯ä»¥é€šè¿‡åˆ·æ–° http://cloud01/manager/status è¿™ä¸ªé¡µé¢, è§‚å¯Ÿ IP address æ¥åˆ¤æ–­æ˜¯å¦æˆåŠŸ.</p><h2>Install MySQL</h2><pre><code class="language-bash">yum -y groupinstall &#x27;MySQL Database server&#x27; &#x27;MySQL Database client&#x27;
yum -y install php-mysql
#/sbin/service mysqld start
#/sbin/service mysqld stop
#/sbin/service mysqld restart
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¶ˆæ¯ä¸­é—´ä»¶ç®€ä»‹ mom-intro]]></title>
        <id>mom-intro</id>
        <link href="https://wener.me/story/mom-intro"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[åŒæ­¥]]></summary>
        <content type="html"><![CDATA[<h2>åŒæ­¥</h2><p>åˆ†å¸ƒå¼å¯¹è±¡æŠ€æœ¯(Distributed Object Technologies - DOT), è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ RPC: åŒæ­¥æ“ä½œ (è°ƒç”¨è¢«é˜»å¡,ç›´åˆ°è¢«è°ƒç”¨è€…è¿”å›).</p><pre><code class="language-sequence">title: ç®€å•çš„è¿œç¨‹è°ƒç”¨
å®¢æˆ·ç«¯-&gt;&gt;æœåŠ¡ç«¯: 1.è¿œç¨‹è°ƒç”¨
Note right of æœåŠ¡ç«¯: 2.æœåŠ¡å™¨å¤„ç†è¯·æ±‚
Note left of å®¢æˆ·ç«¯: å®¢æˆ·ç«¯è¢«é˜»å¡
æœåŠ¡ç«¯--&gt;&gt;å®¢æˆ·ç«¯: 3. è°ƒç”¨è¿”å›
</code></pre><pre><code class="language-sequence">title: å¸¦å›è°ƒçš„è¿œç¨‹è°ƒç”¨
å®¢æˆ·ç«¯-&gt;&gt;æœåŠ¡ç«¯: 1.è¿œç¨‹è°ƒç”¨
Note right of æœåŠ¡ç«¯: 2.æœåŠ¡å™¨å¤„ç†è¯·æ±‚
Note left of å®¢æˆ·ç«¯: å®¢æˆ·ç«¯è¢«é˜»å¡
æœåŠ¡ç«¯-&gt;&gt;å®¢æˆ·ç«¯: 3. å›è°ƒ
å®¢æˆ·ç«¯--&gt;&gt;æœåŠ¡ç«¯: 4. å›è°ƒè¿”å›
æœåŠ¡ç«¯--&gt;&gt;å®¢æˆ·ç«¯: 5. è¿”å›è¿œç¨‹è°ƒç”¨
</code></pre><p>è¯¥ç§æ¨¡å¼å¼•å‘çš„é—®é¢˜:</p><ol><li>å®¢æˆ·ç«¯ä¼šä¸€ç›´è¢«é˜»å¡,ç›´åˆ°æœåŠ¡(å¯¹è±¡æ“ä½œ)è¿”å›(ç´§è€¦åˆ).</li><li>è¿‡åº¦çš„é“¾æ¥(æ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦ä¸€ä¸ªé“¾æ¥æ¥è¿›è¡Œå¤„ç†å’Œç½‘ç»œè®¿é—®ç­‰).</li><li>å¾ˆéš¾å¯¹è°ƒç”¨å¤±è´¥åšå‡ºå“åº”(è°ƒç”¨çš„æœåŠ¡å¯èƒ½æŠ›å‡ºå¼‚å¸¸,å¯èƒ½æœåŠ¡æœªå¯åŠ¨ç­‰...).</li><li>ä¸é€‚ç”¨äºåµŒå¥—è°ƒç”¨(æœåŠ¡å¯¹è±¡è°ƒç”¨å®¢æˆ·ç«¯çš„å¯¹è±¡åˆéœ€è¦å¼•å…¥å¦å¤–ä¸€ä¸ªæœåŠ¡å¯¹è±¡çš„æ“ä½œ).</li></ol><h2>å¼‚æ­¥</h2><p>æ¶ˆæ¯ä¸­é—´ä»¶ (Message Oriented Middleware - MOM)</p><ul><li>å¼‚æ­¥æ“ä½œ(è°ƒç”¨è€…å‘é€ä¸€ä¸ªæ¶ˆæ¯,ç„¶åç»§ç»­å·¥ä½œ,&quot;fire and forget&quot;)</li><li>å­˜å‚¨,è½¬å‘é€šä¿¡</li><li>å‘é€å’Œæ¥æ”¶ä¹‹é—´æ˜¯æ¾è€¦åˆçš„<ol><li>ä¸éœ€è¦åœ¨åŒä¸€æ—¶é—´å­˜æ´»</li><li>å‘é€è€…ä¸éœ€è¦çŸ¥é“æ¥æ”¶è€…çš„å…·ä½“ä½ç½®,åä¹‹äº¦ç„¶.</li></ol></li></ul><pre><code class="language-sequence">å‘é€åº”ç”¨-&gt;å‘é€é˜Ÿåˆ—:éé˜»å¡æ¶ˆæ¯å‘é€æ“ä½œ
å‘é€é˜Ÿåˆ—-&gt;ç½‘ç»œ
ç½‘ç»œ-&gt;æ¥æ”¶é˜Ÿåˆ—
æ¥æ”¶é˜Ÿåˆ—-&gt;æ¥æ”¶åº”ç”¨
</code></pre><p>ç±»æ¯”:</p><p>åŒæ­¥(RPC/DOT) -&gt; ç”µè¯
å¼‚æ­¥(MOM) -&gt; é‚®ä»¶</p><h1>2. æ¶ˆæ¯æ¨¡å‹</h1><ol><li>ç‚¹åˆ°ç‚¹ (P2P - Point to Point) {#ch-2-1}</li></ol><hr/><ul><li>æ¯ä¸ªæ¥æ”¶è€…(åº”ç”¨)ä¸€ä¸ªé˜Ÿåˆ—</li><li>ä¸€å¯¹ä¸€(1 ä¸ªå‘é€è€…,ä¸€ä¸ªæ¥æ”¶è€…)æˆ–è€…å¤šå¯¹ä¸€(å¤šä¸ªå‘é€è€…,ä¸€ä¸ªæ¥æ”¶è€…)çš„æ¶ˆæ¯æœºåˆ¶.</li></ul><ol start="2"><li>å‘å¸ƒ-è®¢é˜… (PubSub - Publish - Subscribe) {#ch-2-2}</li></ol><h1>3. é˜Ÿåˆ—ç±»å‹</h1><ul><li>æ‰€æœ‰çš„æ¶ˆæ¯éƒ½æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§</li><li>æ¶ˆæ¯ä»¥ä»–ä»¬å‘é€çš„é¡ºåºè¿›è¡Œåˆ†å‘</li></ul><pre><code class="language-sequence">Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: å‘é€åº”ç”¨
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¶ˆæ¯ 3
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¶ˆæ¯ 2
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¶ˆæ¯ 1
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¶ˆæ¯é˜Ÿåˆ—
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¶ˆæ¯ 3
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¶ˆæ¯ 2
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¶ˆæ¯ 1
Note over å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—: æ¥æ”¶åº”ç”¨
</code></pre><h2>ä¼˜å…ˆçº§é˜Ÿåˆ—</h2><ul><li>æ¶ˆæ¯ç¼“å­˜åœ¨ FIFO é˜Ÿåˆ—ä¸­,å¹¶ä»¥ä¼˜å…ˆçº§è¿›è¡Œæ’åº</li><li>è¯¥æ’åºä¼šåº”ç”¨åœ¨å·²ç»æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸Š</li></ul><pre><code class="language-sequence">Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: å‘é€åº”ç”¨
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¶ˆæ¯ 3 ä¼˜å…ˆçº§ 1
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¶ˆæ¯ 2 ä¼˜å…ˆçº§ 3
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¶ˆæ¯ 1 ä¼˜å…ˆçº§ 2
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¶ˆæ¯é˜Ÿåˆ— - æ ¹æ®æ¶ˆæ¯çš„ä¼˜å…ˆçº§ä»æ’åº
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¶ˆæ¯ 2 ä¼˜å…ˆçº§ 3
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¶ˆæ¯ 1 ä¼˜å…ˆçº§ 2
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¶ˆæ¯ 3 ä¼˜å…ˆçº§ 1
Note over ä¼˜å…ˆçº§é˜Ÿåˆ—: æ¥æ”¶åº”ç”¨
</code></pre><h2>å…±æœ‰/ç§æœ‰é˜Ÿåˆ—</h2><ul><li>å®šä¹‰ä¸åŒçš„è®¿é—®æƒé™<ol><li>å…±æœ‰é˜Ÿåˆ—: æ‰€æœ‰å‘é€è€…å‡èƒ½å‘é€æ¶ˆæ¯,ä¸éœ€è¦è®¿é—®æ§åˆ¶</li><li>ç§æœ‰é˜Ÿåˆ—: å‘é€è€…å‘é€åˆ°ç§æœ‰é˜Ÿåˆ—éœ€è¦è¿›è¡Œè®¤è¯</li></ol></li></ul><h2>å…¶ä»–ç±»å‹é˜Ÿåˆ—</h2><p>æ—¥å¿—é˜Ÿåˆ—
: æ¶ˆæ¯ç³»ç»Ÿä¼šä¿å­˜ä¸€ä¸ªè¯¥é˜Ÿåˆ—çš„å‰¯æœ¬,è¾¾åˆ°æ—¥å¿—è®°å½•æˆ–ç›‘æ§çš„ç›®çš„</p><p>Dead-letter é˜Ÿåˆ—
: è¯¥é˜Ÿåˆ—ä¼šæŒæœ‰æ‰€æœ‰æ— æ³•åˆ†å‘çš„æ¶ˆæ¯(å› ä¸º TTL è¿‡æ—¶çš„æ¶ˆæ¯æˆ–é˜Ÿåˆ—åœ°å€æ— æ³•è§£æçš„æ¶ˆæ¯).</p><p>æ¡¥æ¥å’Œè¿æ¥å™¨é˜Ÿåˆ—(Bridge/connector queue)
: è¿æ¥ä¸åŒçš„é˜Ÿåˆ—ç³»ç»Ÿ,ä¾‹å¦‚: MSMQ, JMS</p><h1>4. æ¶ˆæ¯ä¸­è½¬(Message broker) - åº”ç”¨é›†æˆæ¨¡å¼</h1><p>Message broker å°†æ¶ˆæ¯åˆ†å‘ç»™æ¥æ”¶è€…</p><h1>å‚è€ƒ</h1><ul><li>åŸæ–‡ <a href="http://www.slideshare.net/PeterREgli/mom-message-oriented-middleware">http://www.slideshare.net/PeterREgli/mom-message-oriented-middleware</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸€è‡´æ€§Hashç®—æ³•]]></title>
        <id>ketama-consistence-hash</id>
        <link href="https://wener.me/story/ketama-consistence-hash"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[è¯¥ç®—æ³•æœ€å¼€å§‹æ˜¯å¼€å‘æ¥æ›¿ä»£memcachedé”®åˆ°æœåŠ¡å™¨çš„æ˜ å°„ç®—æ³•çš„.]]></summary>
        <content type="html"><![CDATA[<p>è¯¥ç®—æ³•æœ€å¼€å§‹æ˜¯å¼€å‘æ¥æ›¿ä»£<code>memcached</code>é”®åˆ°æœåŠ¡å™¨çš„æ˜ å°„ç®—æ³•çš„.</p><p>åœ¨è¿™ä¹‹å‰,å®¢æˆ·ç«¯æ˜ å°„é”®åˆ°æœåŠ¡å™¨çš„æ–¹æ³•ç±»ä¼¼äº:
<code> server = serverlist[hash(key)%serverlist.length];</code>
è¿™å°±æ„å‘³ç€,ä¸ç®¡æˆ‘ä»¬ä»æ± ä¸­å¢åŠ æˆ–åˆ é™¤èŠ‚ç‚¹,éƒ½ä¼šå¯¼è‡´æ‰€æœ‰å·²ç» hash çš„å€¼ä»æ–° hash åˆ°ä¸åŒçš„èŠ‚ç‚¹,è¿™ä¼šå¯¼è‡´æ‰€æœ‰<code>memcached</code>çš„æ‰€æœ‰ç¼“å­˜å¤±æ•ˆ.</p><p>Ketama ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥è§£å†³äº†è¯¥é—®é¢˜:</p><ul><li>ä½¿ç”¨æŒ‡å®šçš„ä¸€ç»„æœåŠ¡(ä¾‹å¦‚: 1.2.3.4:11211, 5.6.7.8:11211, 9.8.7.6:11211)</li><li>å°†æ¯ä¸ªæœåŠ¡çš„å­—ç¬¦ä¸²éƒ½ hash ä¸ºå¤šä¸ª(100-200 ä¸ª)æ— ç¬¦å·æ•´æ•°</li><li>æ¦‚å¿µä¸Š,è¿™äº›æ•°å­—æ˜¯æ”¾ç½®åœ¨ä¸€ä¸ªç¯ä¸Šçš„.(æƒ³è±¡ä¸€ä¸ªæ—¶é’Ÿé‚£æ ·,ä» 0 - 2^32 æ¬¡æ–¹çš„ä¸€ä¸ªç¯)</li><li>æ¯ä¸ªæ•°ç»„éƒ½å…³è”å®ƒ hash ä¹‹å‰çš„é‚£ä¸ªæœåŠ¡å™¨åœ°å€,å› æ­¤,ä¸€ä¸ªæœåŠ¡ä¼šåœ¨ç¯ä¸Šå‡ºç°å¤šæ¬¡.å‡ºç°çš„æ–¹å¼ä¼šä»¥ä»–ä»¬ hash åçš„æ•°å­—æ¥è¡¨ç¤º</li><li>ä¸ºäº†å°†ä¸€ä¸ªé”®æ˜ å°„åˆ°æœåŠ¡å™¨,é¦–å…ˆå°†é”®å€¼ hash ä¸ºä¸€ä¸ªæ— ç¬¦å·æ•´æ•°,ç„¶ååœ¨ç¯ä¸Šæ‰¾åˆ°ä¸‹ä¸€ä¸ªæœ€å¤§çš„æ•°å­—.è¯¥æœåŠ¡ä¼šè¢«é€‰æ‹©æ¥å­˜æ”¾è¯¥é”®å€¼</li><li>å¦‚æœ hash çš„é”®å€¼æ¥è¿‘ 2^32 æ¬¡æ–¹,é‚£ä¹ˆå¯èƒ½åœ¨ç¯ä¸Šæ²¡æœ‰æ¯”è¯¥ hash å€¼å¤§çš„çš„ hash,æ­¤æ—¶è¿”å›ç¯ä¸Šçš„ç¬¬ä¸€ä¸ªæœåŠ¡.</li></ul><p>è¿™æ ·å®ç°ä»¥å,åœ¨è¯¥æœåŠ¡åˆ—è¡¨ä¸Šè¿›è¡Œæ·»åŠ å’Œåˆ é™¤åªä¼šå¯¹ä¸€å°éƒ¨åˆ†çš„é”®å€¼æ˜ å°„äº§ç”Ÿå½±å“,å› æ­¤åªéœ€è¦ä»æ–°æ˜ å°„ä¸€å°éƒ¨åˆ†å€¼.</p><p>æ­¤å¤–,å¦‚æœæƒ³è¦æ§åˆ¶æœåŠ¡å™¨çš„æƒé‡,åˆ™å¯ä»¥é€šè¿‡å¢åŠ è¯¥æœåŠ¡çš„ hash å€¼æ•°é‡æ¥å®ç°.</p><p><em>åŸæ–‡</em></p><p>This was initially written to replace how our memcached clients mapped keys to servers.</p><p>Previously, clients mapped keys-&gt;servers like this:
<code> server = serverlist[hash(key)%serverlist.length];</code></p><p>This meant that whenever we added or removed servers from the pool, everything hashed to different servers, which effectively wiped the entire cache.</p><p>Ketama solves this problem in the following way:</p><ul><li>Take your list of servers (eg: 1.2.3.4:11211, 5.6.7.8:11211, 9.8.7.6:11211)</li><li>Hash each server string to several (100-200) unsigned ints</li><li>Conceptually, these numbers are placed on a circle called the continuum. (imagine a clock face that goes from 0 to 2^32)</li><li>Each number links to the server it was hashed from, so servers appear at several points on the continuum, by each of the numbers they hashed to.</li><li>To map a key-&gt;server, hash your key to a single unsigned int, and find the next biggest number on the continuum. The server linked to that number is the correct server for that key.</li><li>If you hash your key to a value near 2^32 and there are no points on the continuum greater than your hash, return the first server in the continuum.</li></ul><p>If you then add or remove a server from the list, only a small proportion of keys end up mapping to different servers.</p><h2>å‚è€ƒ</h2><ul><li><a href="http://www.audioscrobbler.net/development/ketama/">åŸæ–‡</a></li><li><a href="https://github.com/RJ/ketama/blob/master/java_ketama/SockIOPool.java">å‚è€ƒ Java å®ç°</a></li><li><a href="http://en.wikipedia.org/wiki/Consistent_hashing">ç»´åŸºç™¾ç§‘ Consistent hashing</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ubuntu æ–°æœåŠ¡å™¨é…ç½®]]></title>
        <id>ubuntu-new-server</id>
        <link href="https://wener.me/story/ubuntu-new-server"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[* How I spend my first 5 minutes on a server]]></summary>
        <content type="html"><![CDATA[<pre><code class="language-bash"># ä¿®æ”¹ä¸»æœºå
hostnamectl set-hostname myHostName
# å¦‚æœæƒ³è¦ç›´æ¥ä½¿ç”¨ä¸»æœºå,è¿˜éœ€è¦åœ¨ /etc/hosts é‡Œæ·»åŠ ç›¸å…³è®°å½•
# nano /etc/hostname
# nano /etc/hosts

# ç”Ÿæˆä¸­æ–‡
locale-gen zh_CN.UTF-8
# åŸºæœ¬æ›´æ–°
apt-get update
apt-get upgrade

# å‡ºç° The following packages have been kept back å¯è€ƒè™‘ apt dist-upgrade æˆ– install
# å½“ /etc/apt/sources.list* æœ‰å…¶ä»–ä»“åº“æ—¶ä½¿ç”¨ dist-upgrade ç›¸å¯¹æ²¡é‚£ä¹ˆå®‰å…¨

# ä¿®æ”¹å¯†ç 
passwd


# åˆ›å»ºç”¨äºéƒ¨ç½²çš„ç”¨æˆ·
useradd deploy
mkdir /home/deploy
mkdir /home/deploy/.ssh
chmod 700 /home/deploy/.ssh
# å°†éœ€è¦ä½¿ç”¨è¯¥ç”¨æˆ·çš„å…¬é’¥æ·»åŠ è¿›å»
vim /home/deploy/.ssh/authorized_keys

chmod 400 /home/deploy/.ssh/authorized_keys
chown deploy:deploy /home/deploy -R

# ç¼–è¾‘ sudoers
visudo
# å°†éœ€è¦ sudo çš„ç”¨æˆ·æ·»åŠ è¿›å»
# deploy  ALL=(ALL) ALL

# ä¿®æ”¹ sshd æƒé™
vim /etc/ssh/sshd_config
# PermitRootLogin no # ä¸å…è®¸ç›´æ¥ root ç™»é™†
# PasswordAuthentication no # ä¸å…è®¸å¯†ç ç™»é™†
# AllowUsers deploy@(your-ip) deploy@(another-ip-if-any) # åªå…è®¸æŒ‡å®šåœ°å€çš„äººç™»é™†
# service ssh restart

# é˜²ç«å¢™è®¾ç½®
# DNS 53
# mosh allow 60000:61000/udp æˆ– allow mosh
ufw allow 22
ufw allow 80
ufw allow 443
ufw default deny
ufw enable
</code></pre><ul><li><a href="https://news.ycombinator.com/item?id=5316093">How I spend my first 5 minutes on a server </a></li><li><a href="https://www.upguard.com/blog/10-essential-steps-for-configuring-a-new-server">10 Essential Steps for Configuring a New Server</a></li></ul><h2>Tips</h2><p>å½“æœ‰å¤šå°ä¸»æœºéœ€è¦éƒ¨ç½²çš„æ—¶å€™,å»ºè®®ä½¿ç”¨ sshrc, tmuxrc, è¿™æ ·èƒ½å¿«é€Ÿçš„å°†æ‰€æœ‰çš„é…ç½®éƒ½å¸¦ç»™æœåŠ¡å™¨,èƒ½å¤Ÿå¿«é€Ÿæ–¹ä¾¿çš„å¯¹å¤šå°è¿›è¡Œå®‰è£…éƒ¨ç½².</p><h3>mosh-dev</h3><p>ç”±äº mosh éƒ¨åˆ†é¼ æ ‡ç›¸å…³çš„åŠŸèƒ½éœ€è¦æœ€æ–°ç‰ˆ,æ‰€ä»¥å»ºè®®ç›´æ¥å®‰è£… dev ç‰ˆæœ¬</p><pre><code class="language-bash">apt-get install -y software-properties-common
add-apt-repository ppa:keithw/mosh-dev
apt-get update
apt install -y mosh
</code></pre><h2>fail2ban</h2><pre><code class="language-bash">apt-get install fail2ban
cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
# bantime = 3600 # ban 1 å°æ—¶
# destemail = admin@admin # å‘é€è­¦å‘Šçš„é‚®ç®±åœ°å€
# å°† ssh/ssh-ddos ç­‰æ®µè½ä¸‹çš„ enable è®¾ç½®ä¸º true æ‰“å¼€ç›¸åº”çš„ filter
</code></pre><h2>env</h2><pre><code class="language-bash">apt-get install software-properties-common
# æ·»åŠ  Oracle Java ä»“åº“
add-apt-repository ppa:webupd8team/java#
apt-get update
# å®‰è£… Oracle Java 8 JDK
apt-get install oracle-java8-installer
# å¦‚æœæœ‰å¤šä¸ª Java ç¯å¢ƒå¯è°ƒæ•´é…ç½®
update-alternatives --config java
</code></pre><h2>ipv6</h2><pre><code class="language-bash"># https://jiandanxinli.github.io/2016-08-06.html

# /etc/sysctl.conf
# net.ipv6.conf.all.disable_ipv6=0
# net.ipv6.conf.default.disable_ipv6=0
# net.ipv6.conf.lo.disable_ipv6=0
sysctl -p

# https://www.tunnelbroker.net/
# é€‰æ‹© linux route2, ç„¶åæ‰§è¡Œè„šæœ¬

# æ£€æµ‹ ipv6 æ˜¯å¦å¯ç”¨
# http://ready.chair6.net/?url=wener.me

# å¦‚æœæ“ä½œå¤±è´¥äº†åˆ™åˆ é™¤é€šé“ä»æ¥
ip tun del he-ipv6
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è¿›å‡»çš„ç¨‹åºçŒ¿]]></title>
        <id>attack-on-programmer</id>
        <link href="https://wener.me/story/attack-on-programmer"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[2016 å¹´ä¼šèŠ‚ç›®]]></summary>
        <content type="html"><![CDATA[<p>2016 å¹´ä¼šèŠ‚ç›®</p><ul><li><a href="https://github.com/wenerme/wener/tree/master/story/2017/am2016/%E8%BF%9B%E5%87%BB%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%8C%BF.fountain">è„šæœ¬</a>/<a href="https://github.com/wenerme/wener/tree/master/story/2017/am2016/%E8%BF%9B%E5%87%BB%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%8C%BF.pdf">PDF</a></li><li>èˆå°å‰ç«¯/èˆå°åç«¯</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ubuntu å®¶ç”¨]]></title>
        <id>ubuntu-home</id>
        <link href="https://wener.me/story/ubuntu-home"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[- Ubuntu æ¡Œé¢ç‰ˆ]]></summary>
        <content type="html"><![CDATA[<ul><li>Ubuntu æ¡Œé¢ç‰ˆ</li><li>å®‰è£…è‡³å°‘éœ€è¦ <code>1024*768</code> çš„æ˜¾ç¤ºå™¨</li></ul><pre><code class="language-bash">apt update
apt upgrade
apt dist-upgrade

# æ¡Œé¢ç‰ˆæ²¡æœ‰ sshd
apt install -y openssh-server

############
# brew
############
brew install gcc redis tmux mosh

############
# å®¹å™¨æœåŠ¡é…ç½®
############
# ä½¿ç”¨é˜¿é‡Œæä¾›çš„ä»“åº“è¿›è¡Œå®‰è£…ä¼šéå¸¸å¿«
curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh -
# å®‰è£…å®Œæ¯•åä¸ºå½“å‰ç”¨æˆ·æ·»åŠ æƒé™,éœ€è¦é€€å‡ºé‡æ–°ç™»å½•æ‰èƒ½ç”Ÿæ•ˆ
sudo usermod -aG docker $USER

# å®‰è£…å®Œæˆå»ºè®®é€‰æ‹©ä¸€å®¶å®¹å™¨é•œåƒ,æ¯”å¦‚ https://cr.console.aliyun.com æˆ–è€… daocloud

docker pull gogs/gogs
docker network create --subnet=172.18.1.0/24 home-net

# å‡†å¤‡æ•°æ®ç›®å½•
sudo mkdir /data
sudo chown $USER:$USER /data
cd /data

# ==========
# ç›‘æ§é…ç½®
# ==========
docker pull grafana/grafana
docker pull prom/container-exporter
docker pull prom/prometheus

docker run --net home-net --ip 172.18.1.10 -d --restart always -v /etc/localtime:/etc/localtime:ro \
    -v $PWD/grafana:/var/lib/grafana \
    -v $PWD/grafana.ini:/etc/grafana/grafana.ini \
    --name grafana grafana/grafana

nohup node_exporter 2&gt;node_exporter.log &amp;

docker run -d --net home-net --ip 172.18.1.21 \
    -v /sys/fs/cgroup:/cgroup \
    -v /var/run/docker.sock:/var/run/docker.sock \
    --name container-exporter prom/container-exporter

docker run --net home-net --ip 172.18.1.20 -d --restart always -v /etc/localtime:/etc/localtime:ro \
    -v $PWD/prom:/prometheus \
    -v $PWD/prom.yaml:/etc/prometheus/prometheus.yml \
    --name prom prom/prometheus

# Web æœåŠ¡
# é€‰æ‹©éœ€è¦çš„ Caddy æ’ä»¶ç”¨äºæ„å»ºå®¹å™¨
mkdir -p /tmp/caddy &amp;&amp; cd /tmp/caddy
wget &#x27;https://caddyserver.com/download/build?os=linux&amp;arch=amd64&amp;features=cors%2Cexpires%2Cfilemanager%2Cgit%2Chugo%2Cipfilter%2Cjsonp%2Cjwt%2Clocale%2Cmailout%2Cminify%2Cmultipass%2Cprometheus%2Cratelimit%2Crealip%2Csearch%2Cupload&#x27; -O caddy.tar.gz
tar -zxvf caddy.tar.gz

docker build -t home/caddy -f caddy.Dockerfile .
cd -

docker run --net home-net --ip 172.18.1.30  -d --restart always -v /etc/localtime:/etc/localtime:ro \
    -v $PWD/Caddyfile:/etc/Caddyfile \
    -v $PWD/caddy:/data \
    -v $HOME/.caddy:/root/.caddy \
    -p 80:80 -p 443:443 \
    --name web home/caddy



</code></pre><h3>caddy.Dockerfile</h3><pre><code class="language-Dockerfile">FROM alpine
MAINTAINER wener &lt;wener@wener.me&gt;

COPY caddy /app/caddy

VOLUME     [ &quot;/data&quot; ]
WORKDIR    /data

EXPOSE 2015
EXPOSE 2000
ENTRYPOINT [&quot;/app/caddy&quot;]
CMD [&quot;-conf&quot;,&quot;/etc/Caddyfile&quot;,&quot;-log&quot;,&quot;./internal/log&quot;]
</code></pre><h3>grafana.ini</h3><pre><code class="language-ini">##################### Grafana Configuration Example #####################
#
# Everything has defaults so you only need to uncomment things you want to
# change

# possible values : production, development
; app_mode = production

# instance name, defaults to HOSTNAME environment variable value or hostname if HOSTNAME var is empty
; instance_name = ${HOSTNAME}

#################################### Paths ####################################
[paths]
# Path to where grafana can store temp files, sessions, and the sqlite3 db (if that is used)
#
;data = /var/lib/grafana
#
# Directory where grafana can store logs
#
;logs = /var/log/grafana
#
# Directory where grafana will automatically scan and look for plugins
#
;plugins = /var/lib/grafana/plugins

#
#################################### Server ####################################
[server]
# Protocol (http or https)
;protocol = http

# The ip address to bind to, empty will bind to all interfaces
;http_addr =

# The http port  to use
;http_port = 3000

# The public facing domain name used to access grafana from a browser
domain = d.yikaiye.com

# Redirect to correct domain if host header does not match domain
# Prevents DNS rebinding attacks
;enforce_domain = false

# ä½¿ç”¨ /monitor ä½œä¸ºè·¯å¾„,ä»¥ä¾¿äºåå‘ä»£ç†
;root_url = %(protocol)s://%(domain)s:%(http_port)s/
root_url = /monitor

# Log web requests
;router_logging = false

# the path relative working path
;static_root_path = public

# enable gzip
enable_gzip = true

# https certs &amp; key file
;cert_file =
;cert_key =

#################################### Database ####################################
[database]
# Either &quot;mysql&quot;, &quot;postgres&quot; or &quot;sqlite3&quot;, it&#x27;s your choice
;type = sqlite3
;host = 127.0.0.1:3306
;name = grafana
;user = root
;password =

# For &quot;postgres&quot; only, either &quot;disable&quot;, &quot;require&quot; or &quot;verify-full&quot;
;ssl_mode = disable

# For &quot;sqlite3&quot; only, path relative to data_path setting
;path = grafana.db

#################################### Session ####################################
[session]
# Either &quot;memory&quot;, &quot;file&quot;, &quot;redis&quot;, &quot;mysql&quot;, &quot;postgres&quot;, default is &quot;file&quot;
;provider = file

# Provider config options
# memory: not have any config yet
# file: session dir path, is relative to grafana data_path
# redis: config like redis server e.g. `addr=127.0.0.1:6379,pool_size=100,db=grafana`
# mysql: go-sql-driver/mysql dsn config string, e.g. `user:password@tcp(127.0.0.1:3306)/database_name`
# postgres: user=a password=b host=localhost port=5432 dbname=c sslmode=disable
;provider_config = sessions

# Session cookie name
;cookie_name = grafana_sess

# If you use session in https only, default is false
;cookie_secure = false

# Session life time, default is 86400
;session_life_time = 86400

#################################### Analytics ####################################
[analytics]
# Server reporting, sends usage counters to stats.grafana.org every 24 hours.
# No ip addresses are being tracked, only simple counters to track
# running instances, dashboard and error counts. It is very helpful to us.
# Change this option to false to disable reporting.
;reporting_enabled = true

# Set to false to disable all checks to https://grafana.net
# for new vesions (grafana itself and plugins), check is used
# in some UI views to notify that grafana or plugin update exists
# This option does not cause any auto updates, nor send any information
# only a GET request to http://grafana.net to get latest versions
check_for_updates = true

# Google Analytics universal tracking code, only enabled if you specify an id here
;google_analytics_ua_id =

#################################### Security ####################################
[security]
# default admin user, created on startup
;admin_user = admin

# default admin password, can be changed before first start of grafana,  or in profile settings
;admin_password = admin

# used for signing
;secret_key = SW2YcwTIb9zpOOhoPsMm

# Auto-login remember days
;login_remember_days = 7
;cookie_username = grafana_user
;cookie_remember_name = grafana_remember

# disable gravatar profile images
;disable_gravatar = false

# data source proxy whitelist (ip_or_domain:port separated by spaces)
;data_source_proxy_whitelist =

[snapshots]
# snapshot sharing options
external_enabled = false
;external_snapshot_url = https://snapshots-origin.raintank.io
;external_snapshot_name = Publish to snapshot.raintank.io

#################################### Users ####################################
[users]
# ç¦ç”¨æ³¨å†ŒåŠŸèƒ½
allow_sign_up = false

# ä¸å…è®¸éç®¡ç†å‘˜åˆ›å»ºç»„ç»‡
allow_org_create = false

# Set to true to automatically assign new users to the default organization (id 1)
auto_assign_org = true

# Default role new users will be automatically assigned (if disabled above is set to true)
auto_assign_org_role = Viewer

# Background text for the user field on the login page
login_hint = ç”¨æˆ·å

# Default UI theme (&quot;dark&quot; or &quot;light&quot;)
default_theme = light

#################################### Anonymous Auth ##########################
[auth.anonymous]
# enable anonymous access
enabled = false

# specify organization name that should be used for unauthenticated users
;org_name = Main Org.

# specify role for unauthenticated users
;org_role = Viewer

#################################### Auth Proxy ##########################
[auth.proxy]
;enabled = false
;header_name = X-WEBAUTH-USER
;header_property = username
;auto_sign_up = true

#################################### Basic Auth ##########################
[auth.basic]
;enabled = true

#################################### SMTP / Emailing ##########################
[smtp]
;enabled = false
;host = localhost:25
;user =
;password =
;cert_file =
;key_file =
;skip_verify = false
;from_address = admin@grafana.localhost

[emails]
;welcome_email_on_sign_up = false

#################################### Logging ##########################
[log]
# Either &quot;console&quot;, &quot;file&quot;, &quot;syslog&quot;. Default is console and  file
# Use space to separate multiple modes, e.g. &quot;console file&quot;
;mode = console, file

# Either &quot;trace&quot;, &quot;debug&quot;, &quot;info&quot;, &quot;warn&quot;, &quot;error&quot;, &quot;critical&quot;, default is &quot;info&quot;
;level = info

# For &quot;console&quot; mode only
[log.console]
;level =

# log line format, valid options are text, console and json
;format = console

# For &quot;file&quot; mode only
[log.file]
;level =

# log line format, valid options are text, console and json
;format = text

# This enables automated log rotate(switch of following options), default is true
;log_rotate = true

# Max line number of single file, default is 1000000
;max_lines = 1000000

# Max size shift of single file, default is 28 means 1 &lt;&lt; 28, 256MB
;max_size_shift = 28

# Segment log daily, default is true
;daily_rotate = true

# Expired days of log file(delete after max days), default is 7
;max_days = 7

[log.syslog]
;level =

# log line format, valid options are text, console and json
;format = text

# Syslog network type and address. This can be udp, tcp, or unix. If left blank, the default unix endpoints will be used.
;network =
;address =

# Syslog facility. user, daemon and local0 through local7 are valid.
;facility =

# Syslog tag. By default, the process&#x27; argv[0] is used.
;tag =


#################################### AMQP Event Publisher ##########################
[event_publisher]
;enabled = false
;rabbitmq_url = amqp://localhost/
;exchange = grafana_events

;#################################### Dashboard JSON files ##########################
[dashboards.json]
;enabled = false
;path = /var/lib/grafana/dashboards

#################################### Internal Grafana Metrics ##########################
# Metrics available at HTTP API Url /api/metrics
[metrics]
# Disable / Enable internal metrics
;enabled           = true

# Publish interval
;interval_seconds  = 10

# Send internal metrics to Graphite
; [metrics.graphite]
; address = localhost:2003
; prefix = prod.grafana.%(instance_name)s.

#################################### Internal Grafana Metrics ##########################
# Url used to to import dashboards directly from Grafana.net
[grafana_net]
url = https://grafana.net
</code></pre><h3>prom.yaml</h3><pre><code class="language-yaml">global:
  scrape_interval: 5s
  # Attach these labels to any time series or alerts when communicating with
  # external systems (federation, remote storage, Alertmanager).
  external_labels:
    monitor: &#x27;dev-monitor&#x27;

rule_files:
  - mysql.rules

# A scrape configuration containing exactly one endpoint to scrape:
# Here it&#x27;s Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.
  - job_name: &#x27;prometheus&#x27;

    # Override the global default and scrape targets from this job every 5 seconds.
    scrape_interval: 5s

    static_configs:
      - targets: [&#x27;localhost:9090&#x27;]

  - job_name: container_exporter
    static_configs:
      - targets: [&#x27;172.18.1.21:9104&#x27;]

  - job_name: node_exporter
    static_configs:
      - targets: [&#x27;172.18.1.1:9100&#x27;]

  - job_name: caddy
    static_configs:
      - targets: [&#x27;172.18.1.30:2000&#x27;]
</code></pre><h3>Caddyfile</h3><pre><code>:80 {
  log internal/access.log {
      rotate {
          size 50
          age  14
          keep 10
      }
  }
  prometheus :2000
  root .
  internal ./internal
  filemanager /file {
    show file/
  }
  proxy /monitor 172.18.1.10:3000 {
    without /monitor
    transparent
  }
}
</code></pre><pre><code>
$ sudo vim /etc/udev/rules.d/75-persistent-net-generator.rules

SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, ATTR{address}==&quot;f0:42:1c:85:07:41&quot;, NAME=&quot;eth0&quot;
sudo vim /etc/network/interfaces

</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Google API Design Guide]]></title>
        <id>google-api-design-guide</id>
        <link href="https://wener.me/story/google-api-design-guide"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[Google API Design Guide]]></summary>
        <content type="html"><![CDATA[<h2>Google API Design Guide</h2><ul><li><a href="https://cloud.google.com/apis/design/">API Design Guide</a></li></ul><h3>é¢å‘èµ„æºè®¾è®¡</h3><ul><li>è®¾è®¡æµç¨‹<ul><li>ç¡®å®š APi æä¾›çš„èµ„æºç±»å‹</li><li>ç¡®å®šèµ„æºä¹‹é—´çš„å…³ç³»</li><li>å†³å®šèµ„æºçš„åå­—æ ¼å¼, åŸºäºç±»å‹å’Œå…³ç³»</li><li>å†³å®šèµ„æºçš„æ ¼å¼</li><li>ä¸ºèµ„æºæ·»åŠ æœ€ä½é™åº¦çš„æ–¹æ³•</li></ul></li><li>èµ„æº<ul><li>é›†åˆ</li><li>èµ„æº</li></ul></li><li>æ–¹æ³•</li></ul><h3>èµ„æºåå­—</h3><ul><li>åŸºæœ¬æ¦‚å¿µ<ul><li>èµ„æºæ˜¯è¢«å‘½åçš„å®ä½“</li><li>èµ„æºåå³ä¸ºå…¶æ ‡è¯†ç¬¦</li><li>æ¯ä¸ªèµ„æºå¿…é¡»æœ‰å…¶å”¯ä¸€çš„èµ„æºå</li><li>èµ„æºåç”± èµ„æº ID, çˆ¶èµ„æº ID å’ŒæœåŠ¡å</li><li>gRPC èµ„æºååº”è¯¥ä½¿ç”¨ scheme-less çš„ URI</li><li>é›†åˆä¸ºç‰¹æ®Šçš„èµ„æº, åŒ…å«ä¸€åˆ—ç›¸åŒç±»å‹çš„å­èµ„æº</li><li>é›†åˆèµ„æºçš„ ID ä¸º é›†åˆ ID</li></ul></li><li>å®Œæ•´èµ„æºå<ul><li><code>//library.googleapis.com/shelves/shelf1/books/book2</code></li></ul></li><li>ç›¸å¯¹èµ„æºå<ul><li>ç›¸å¯¹äºæœåŠ¡</li><li><code>shelves/shelf1/books/book2</code></li></ul></li><li>èµ„æº ID<ul><li>èµ„æºåä¸­çš„èµ„æº ID å¯èƒ½ä¼šæœ‰è¶…è¿‡ä¸€ä¸ªçš„ URI segment</li><li>æœåŠ¡åº”è¯¥ä½¿ç”¨ URL å‹å¥½çš„èµ„æº ID</li><li>å¿…é¡»è¦æ˜ç¡®èµ„æº ID æ˜¯ç”±å®¢æˆ·ç«¯æŒ‡å®š,æœåŠ¡æŒ‡å®šæˆ–éƒ½å¯ä»¥<ul><li>ä¾‹å¦‚æ–‡ä»¶åé€šå¸¸ç”±å®¢æˆ·ç«¯æŒ‡å®š</li><li>æœ‰é™ ID é€šå¸¸ç”±æœåŠ¡ç«¯æŒ‡å®š</li></ul></li><li>Collection ID -&gt; <code>files</code></li><li>Resource ID -&gt; <code>/source/py/parser.py</code></li></ul></li><li>é›†åˆ ID<ul><li>å¿…é¡»æ˜¯æœ‰æ•ˆçš„ C/C++ æ ‡è¯†ç¬¦</li><li>å¿…é¡»æ˜¯è´Ÿæ•°çš„ <code>lowerCamel</code> å½¢å¼<ul><li>å¦‚æœæ²¡æœ‰åˆé€‚çš„è´Ÿæ•°å½¢å¼, é‚£ä¹ˆåº”è¯¥ä½¿ç”¨å•æ•°å½¢å¼, ä¾‹å¦‚ <code>evidence</code>,<code>weather</code></li></ul></li><li>å¿…é¡»ä½¿ç”¨æ˜ç¡®ç®€æ´çš„è‹±è¯­è¯æ±‡</li><li>é€šç”¨çš„è¯æ±‡åº”è¯¥é¿å…ä½¿ç”¨æˆ–åŠ é™å®šç¬¦<ul><li><code>values</code> -&gt; <code>rowValues</code></li><li>åº”è¯¥é¿å…ç›´æ¥ä½¿ç”¨çš„è¯æ±‡<ul><li>elements</li><li>entries</li><li>instances</li><li>items</li><li>objects</li><li>resources</li><li>types</li><li>values</li></ul></li></ul></li></ul></li><li>èµ„æºå vs URL<ul><li>åœ¨ REST API ä½¿ç”¨æ—¶, åº”è¯¥è½¬æ¢ä¸ºç›¸åº”çš„ URL æ ¼å¼</li><li>æ·»åŠ ç‰ˆæœ¬å·å’Œ Schema</li><li>èµ„æºå -&gt; <code>//calendar.googleapis.com/users/john smith/events/123</code></li><li>URL -&gt; <code>https://calendar.googleapis.com/v3/users/john%20smith/events/12</code></li></ul></li><li>èµ„æºåä½œä¸ºå­—ç¬¦ä¸²<ul><li>èµ„æºåå¿…é¡»èƒ½è¢«å‘ˆç°ä¸ºå­—ç¬¦ä¸²</li><li>èµ„æºååº”è¯¥èƒ½åƒæ–‡ä»¶åä¸€æ ·è¢«å¤„ç†, ä¸æ”¯æŒç™¾åˆ†å·ç¼–ç </li><li>å¯¹äºèµ„æºå®šä¹‰, ç¬¬ä¸€ä¸ªå­—æ®µåº”è¯¥ä¸ºèµ„æºå, åº”è¯¥ä¸º <code>name</code></li><li>å…¶ä»–åå­—ç›¸å…³çš„å­—æ®µåº”è¯¥æ·»åŠ é™å®šç¬¦é¿å…æ··æ·†, ä¾‹å¦‚ <code>display_name</code>, <code>first_name</code></li><li>èµ„æºåç¦æ­¢åŒ…å«å‰ <code>/</code></li></ul></li><li>ä¸ºä»€ä¹ˆä¸é€‚ç”¨èµ„æº ID æ¥æ ‡è¯†ä¸€ä¸ªèµ„æº<ul><li>ä¾‹å¦‚ä¸ºä»€ä¹ˆä¸ä½¿ç”¨è¯¸å¦‚ <code>(bucket, object)</code> æˆ– <code>(user, album, photo)</code> çš„å½¢å¼</li><li>å¼€å‘è€…å¿…é¡»è¦ç†è§£å¹¶ä¸”è®°ä½è¿™æ ·çš„åŒ¿åå…ƒç»„</li><li>ä¼ é€’å…ƒç»„æ¯”å­—ç¬¦ä¸²ä¸€èˆ¬æ›´åŠ å›°éš¾</li><li>å¾ˆå¤šç³»ç»Ÿä¸èƒ½ç†è§£è¿™æ ·çš„å½¢å¼</li><li>ç‰¹ç‚¹çš„å…ƒç»„é™åˆ¶ API è®¾è®¡çš„çµæ´»æ€§</li></ul></li><li>ä¸ºä»€ä¹ˆä½¿ç”¨ <code>name</code> è€Œä¸ä½¿ç”¨ <code>id</code><ul><li>éµä»èµ„æºåçš„æ¦‚å¿µ</li><li>é€šå¸¸ <code>name</code> çš„å®šä¹‰ä¼šéå¸¸æ··æ·†, ä¿ç•™ <code>name</code> ä½¿å¾—å¼€å‘è€…é€‰æ‹©ä¸€ä¸ªæ›´åˆé€‚çš„åå­—, ä¾‹å¦‚ <code>display_name</code>, <code>title</code></li></ul></li></ul><table><thead><tr><th>API Service Name</th><th>Collection ID</th><th>Resource ID</th><th>Collection ID</th><th>Resource ID</th></tr></thead><tbody><tr><td>//storage.googleapis.com</td><td>/buckets</td><td>/bucket-id</td><td>/objects</td><td>/object-id</td></tr></tbody></table><table><thead><tr><th>API Service Name</th><th>Collection ID</th><th>Resource ID</th><th>Resource ID</th><th>Resource ID</th></tr></thead><tbody><tr><td>//mail.googleapis.com</td><td>/users</td><td>/<a href="mailto:name@example.com">name@example.com</a></td><td>/settings</td><td>/customFrom</td></tr></tbody></table><h3>æ ‡å‡†æ–¹æ³•</h3><table><thead><tr><th>Std.Method</th><th>HTTP Mapping</th><th>HTTP Request Body</th><th>HTTP Response Body</th></tr></thead><tbody><tr><td>List</td><td><code>GET &lt;collection URL&gt;</code></td><td>N/A</td><td>Resource<!-- -->*<!-- --> list</td></tr><tr><td>Get</td><td><code>GET &lt;resource URL&gt;</code></td><td>N/A</td><td>Resource<!-- -->*</td></tr><tr><td>Create</td><td><code>POST &lt;collection URL&gt;</code></td><td>Resource</td><td>Resource<!-- -->*</td></tr><tr><td>Update</td><td><code>PUT or PATCH &lt;resource URL&gt;</code></td><td>Resource</td><td>Resource<!-- -->*</td></tr><tr><td>Delete</td><td><code>DELETE &lt;resource URL&gt;</code></td><td>N/A</td><td>google.protobuf.Empty<!-- -->*<!-- -->*</td></tr></tbody></table><h3>è‡ªå®šä¹‰æ–¹æ³•</h3><ul><li>HTTP æ˜ å°„<ul><li><code>https://service.name/v1/some/resource/name:customVerb</code></li><li>åº”è¯¥ä½¿ç”¨ <code>POST</code> æ–¹æ³•</li><li>å¦‚æœæ˜¯ç±»ä¼¼ List çš„æ–¹æ³•ä¹Ÿè®¸ä½¿ç”¨ <code>GET</code></li><li>ä¸åº”è¯¥ä½¿ç”¨ <code>PATCH</code>, ä¹Ÿè®¸ä¼šä½¿ç”¨å…¶ä»–æ–¹æ³•, ä½†åº”è¯¥éµä» HTTP è¯­ä¹‰</li><li>ä½¿ç”¨ <code>GET</code> æ–¹æ³•, å¿…é¡»è¦æ±‚è¯·æ±‚å¹‚ç­‰, ä¸ä¼šæœ‰å‰¯ä½œç”¨<ul><li>ä¾‹å¦‚è‡ªå®šä¹‰è§†å›¾åº”è¯¥ä½¿ç”¨ <code>GET</code></li></ul></li><li>è¯·æ±‚æ¶ˆæ¯ä¸­çš„èµ„æºååº”è¯¥è¢«æ˜ å°„åˆ°è·¯å¾„ä¸Š</li><li>URL è·¯å¾„å¿…é¡»ä»¥ <code>:customVerb</code> ç»“æŸ</li><li>å¦‚æœå…è®¸è¯·æ±‚ä½“, å¿…é¡»ä½¿ç”¨ <code>body: &quot;*&quot;</code>, åº”è¯¥å°†æ‰€æœ‰å­—æ®µæ˜ å°„åˆ°è¯·æ±‚æ¶ˆæ¯ä¸Š</li><li>å¦‚æœä¸æ¥å—è¯·æ±‚ä½“, ç¦æ­¢ä½¿ç”¨ <code>body</code> è¯­å¥</li><li>è‡ªå®šä¹‰çš„æ–¹æ³•åŠ¨è¯ç¦æ­¢é‡å </li></ul></li></ul><table><thead><tr><th>Method Name</th><th>Custom verb</th><th>HTTP verb</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>Cancel</td><td>:cancel</td><td>POST</td><td>å–æ¶ˆä¸€ä¸ªæœªå®Œæˆçš„æ“ä½œ (æ„å»º,è®¡ç®— ç­‰)</td></tr><tr><td><code>BatchGet&lt;plural noun&gt;</code></td><td>:batchGet</td><td>GET</td><td>æ‰¹é‡è·å–å¤šä¸ªèµ„æº</td></tr><tr><td>Move</td><td>:move</td><td>POST</td><td>å°†èµ„æºä»çˆ¶èŠ‚ç‚¹ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªçˆ¶èŠ‚ç‚¹</td></tr><tr><td>Search</td><td>:search</td><td>GET</td><td>è·å–èµ„æºåˆ—è¡¨, ä½†ä¸åŒäº List è¯­ä¹‰</td></tr><tr><td>Undelete</td><td>:undelete</td><td>POST</td><td>æ¢å¤ä¸€ä¸ªå·²åˆ é™¤çš„èµ„æº. å»ºè®®åš 30 å¤©çš„ä¿ç•™æœŸ</td></tr></tbody></table><h3>æ ‡å‡†å­—æ®µ</h3><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>åŒ…å«ç›¸å¯¹èµ„æºå</td></tr><tr><td>parent</td><td>string</td><td>å¯¹èµ„æºå®šä¹‰å’Œ List/Create è¯·æ±‚, è¯¥å­—æ®µè¡¨ç¤ºç›¸å¯¹çš„çˆ¶èŠ‚ç‚¹èµ„æºå</td></tr><tr><td>create_time</td><td>Timestamp</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>update_time</td><td>Timestamp</td><td>æœ€åä¸€æ¬¡æ›´æ–°æ—¶é—´, åœ¨ create/patch/delete æ—¶æ›´æ–°</td></tr><tr><td>delete_time</td><td>Timestamp</td><td>åˆ é™¤æ—¶é—´, å¦‚æœæ”¯æŒèµ„æºä¿ç•™</td></tr><tr><td>expire_time</td><td>Timestamp</td><td>è¶…æ—¶æ—¶é—´</td></tr><tr><td>start_time</td><td>Timestamp</td><td>å¼€å§‹æ—¶é—´</td></tr><tr><td>end_time</td><td>Timestamp</td><td>ç»“æŸæ—¶é—´ (ä¸ç®¡æ˜¯å¦æˆåŠŸ)</td></tr><tr><td>time_zone</td><td>string</td><td>æ—¶åŒºå. IANA TZ name, ä¾‹å¦‚ &quot;America/Los_Angeles&quot;, <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">æ—¶åŒºåˆ—è¡¨</a></td></tr><tr><td>region_code</td><td>string</td><td>åœ°åŒºçš„ Unicode country/region code (CLDR), ä¾‹å¦‚ &quot;US&quot; and &quot;419&quot;,<a href="http://www.unicode.org/reports/tr35/#unicode_region_subtag">unicode_region_subtag</a></td></tr><tr><td>language_code</td><td>string</td><td>BCP-47 è¯­è¨€ç , ä¾‹å¦‚ &quot;en-US&quot;. <a href="http://www.unicode.org/reports/tr35/#Unicode_locale_identifier">Unicode locale identifier</a></td></tr><tr><td>mime_type</td><td>string</td><td>IANA å‘å¸ƒçš„ MIME ç±»å‹. <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">media-types</a></td></tr><tr><td>display_name</td><td>string</td><td>å®ä½“çš„æ˜¾ç¤ºåå­—</td></tr><tr><td>title</td><td>string</td><td>å®ä½“çš„å®˜æ–¹åå­—, ä¾‹å¦‚å…¬å¸å. ä½œä¸ºæ­£å¼çš„ display_name.</td></tr><tr><td>description</td><td>string</td><td>å®ä½“æè¿°</td></tr><tr><td>filter</td><td>string</td><td>List æ–¹æ³•çš„æ ‡å‡†è¿‡æ»¤å‚æ•°</td></tr><tr><td>query</td><td>string</td><td>ç­‰åŒäº List æ–¹æ³•çš„ filter, ä¸è¿‡ç”¨äº Search</td></tr><tr><td>page_token</td><td>string</td><td>List è¯·æ±‚çš„åˆ†é¡µç¬¦</td></tr><tr><td>page_size</td><td>int32</td><td>List è¯·æ±‚çš„åˆ†é¡µå¤§å°</td></tr><tr><td>total_size</td><td>int32</td><td>æ€»æ•°</td></tr><tr><td>next_page_token</td><td>string</td><td>ä¸‹ä¸€é¡µçš„åˆ†é¡µç¬¦, å¦‚æœä¸ºç©ºåˆ™è¡¨ç¤ºæ²¡æœ‰æ›´å¤šç»“æœ</td></tr><tr><td>order_by</td><td>string</td><td>æŒ‡å®š List è¯·æ±‚çš„æ’åº</td></tr><tr><td>request_id</td><td>string</td><td>ç”¨äºæ£€æµ‹é‡å¤è¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>resume_token</td><td>string</td><td>ç”¨äºæ¢å¤ä¸€ä¸ªæµè¯·æ±‚çš„ä¸é€æ˜æ ‡è¯†ç¬¦</td></tr><tr><td>labels</td><td><code>map&lt;string, string&gt;</code></td><td>èµ„æºæ ‡ç­¾</td></tr><tr><td>deleted</td><td>bool</td><td>å¦‚æœèµ„æºå…è®¸ undelete æ“ä½œ, åˆ™åº”è¯¥æœ‰è¢«åˆ é™¤æ ‡ç¤º</td></tr><tr><td>show_deleted</td><td>bool</td><td>å¦‚æœèµ„æºå…è®¸ undelete æ“ä½œ, ç›¸åº”çš„ List æ“ä½œåº”è¯¥å¯ä»¥æ­»æŒ‡å®šæ˜¾ç¤ºå·²åˆ é™¤çš„èµ„æº</td></tr><tr><td>update_mask</td><td>FieldMask</td><td>ç”¨äº Update å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†æ›´æ–°æ“ä½œ. è¯¥å±ç›¸å¯¹äºèµ„æºè€Œéè¯·æ±‚æ¶ˆæ¯</td></tr><tr><td>validate_only</td><td>bool</td><td>å¦‚æœä¸º true, åˆ™åº”è¯¥åªéªŒè¯è¯¥è¯·æ±‚, è€Œä¸æ‰§è¡Œ</td></tr></tbody></table><h3>é”™è¯¯</h3><ul><li>é”™è¯¯æ¨¡å‹ <a href="https://github.com/googleapis/googleapis/blob/master/google/rpc/status.proto">google.rpc.Status</a></li><li>é”™è¯¯ç  <a href="https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto">google.rpc.Code</a><ul><li>å•ç‹¬çš„æ¥å£åº”è¯¥é¿å…å®šä¹‰é¢å¤–çš„é”™è¯¯ç , å¦‚æœä¸€ä¸ªæ¥å£éœ€è¦å¤„ç†ä¸‰å››ç§é”™è¯¯ç , é‚£ä¹ˆä»£ç å°†å¤§éƒ¨åˆ†éƒ½æ˜¯é”™è¯¯å¤„ç†</li></ul></li><li>é”™è¯¯ä¿¡æ¯<ul><li>ä¸è¦å‡è®¾ç”¨æˆ·éå¸¸äº†è§£ä½ çš„æ¥å£</li><li>ä¸è¦å‡è®¾ç”¨æˆ·çŸ¥é“ä»»ä½•æœåŠ¡çš„å®ç°ç›¸å…³, æˆ–è€…äº†è§£é”™è¯¯çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li><li>å¦‚æœå¯ä»¥, é”™è¯¯ä¿¡æ¯åº”è¯¥èƒ½è¢«ä¸€ä¸ªæŠ€æœ¯äººå‘˜ç†è§£å¹¶ä¸”ä¿®å¤é”™è¯¯</li><li>ä¿æŒé”™è¯¯ä¿¡æ¯ç®€ä»‹, å¦‚æœå¯ä»¥, å¯æä¾›ä¸€ä¸ªé”™è¯¯é“¾æ¥ä»¥ä¾›æé—®æˆ–åé¦ˆ</li></ul></li><li><a href="https://github.com/googleapis/googleapis/blob/master/google/rpc/error_details.proto">google/rpc/error_details.proto</a><ul><li>å®šä¹‰äº†å¸¸ç”¨çš„é”™è¯¯è¯¦æƒ…</li></ul></li></ul><pre><code class="language-protobuf">package google.rpc;

message Status {
  // ç®€å•çš„é”™è¯¯ç , å®é™…çš„é”™è¯¯ç ç”± `google.rpc.Code` å®šä¹‰
  int32 code = 1;

  // é¢å‘å¼€å‘è€…çš„é”™è¯¯ä¿¡æ¯. åº”è¯¥è§£é‡Šé”™è¯¯åŸå› å¹¶æå¯æ“ä½œçš„è§£å†³åŠæ³•
  string message = 2;

  // é™„åŠ çš„é”™è¯¯ä¿¡æ¯, ä¾‹å¦‚é‡è¯•å»¶è¿Ÿæˆ–å¸®åŠ©é“¾æ¥
  repeated google.protobuf.Any details = 3;
}
</code></pre><h3>åç§°è½¬æ¢</h3><ul><li>éµå¾ª ç®€ä»‹, ç›´è§‚, ä¸€è‡´ çš„åŸåˆ™</li><li>äº§å“å<ul><li>äº§å“çš„è¥é”€åç§°</li><li>åº”è¯¥ä¸ æ¥å£, UI, æ–‡æ¡£, TOS, è´¦å•, åˆåŒä¿æŒä¸€è‡´</li><li>å¿…é¡»ä»¥ Google å¼€å¤´, é™¤éç”±å¤šä¸ªäº§å“ä½¿ç”¨, ä¾‹å¦‚ Gmail, Youtube</li><li>åº”è¯¥ç”±äº§å“æˆ–è¥é”€å›¢é˜Ÿå†³å®š</li></ul></li><li>æœåŠ¡å<ul><li>åº”è¯¥æ˜¯ä¸€ä¸ªåˆæ³•çš„ DNS åå­—, å¯ä»¥è¢«è§£æä¸ºä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œåœ°å€<ul><li>è°·æ­Œæ¥å£çš„æœåŠ¡åå‡ä¸º <code>xxx.googleapis.com</code></li><li>ä¾‹å¦‚ <code>calendar.googleapis.com</code></li></ul></li><li>å¦‚æœ API ç”±å¤šä¸ªæœåŠ¡ç»„æˆ, åå­—åº”è¯¥å¸®åŠ©å…¶å‘ç°ç›¸åº”çš„å…¶ä»–æœåŠ¡, ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„å‰ç¼€<ul><li>ä¾‹å¦‚ <code>build.googleapis.com</code> å’Œ <code>buildresults.googleapis.com</code> åŒå±äº Google Build API</li></ul></li></ul></li><li>åŒ…å<ul><li>åœ¨ <code>.proto</code> ä¸­å®šä¹‰çš„åŒ…å, åº”è¯¥å°½é‡ä¸äº§å“å’ŒæœåŠ¡åä¿æŒä½ ä¸€ç›´</li><li>å¦‚æœ API æœ‰ç‰ˆæœ¬, é‚£ä¹ˆåŒ…å¿…é¡»ä»¥ç‰ˆæœ¬å·ä½œä¸ºç»“æŸ</li><li>ä¸ç”±å…·ä½“æœåŠ¡ä½¿ç”¨çš„æŠ½è±¡ API, åº”è¯¥ä½¿ç”¨ä¸äº§å“ä¸€è‡´çš„åŒ…å<ul><li><code>google.watcher.v1</code></li></ul></li><li>Java åŒ…å¿…é¡»ä¸åŒ…åä¸€ç›´, åªåœ¨å…¶å‰é¢åŠ ç›¸åº”å‰ç¼€ (<code>com</code>.<code>net</code> ç­‰)</li></ul></li><li>é›†åˆæ ‡è¯†ç¬¦<ul><li>åº”è¯¥ä½¿ç”¨å¤æ•°å½¢å¼å’Œé©¼å³°å‘½å</li></ul></li><li>æ¥å£å<ul><li>å³ <code>.proto</code> ä¸­çš„ <code>service</code>, é¿å…ä¸æœåŠ¡åå†²çª</li><li>å¯è®¤ä¸ºæœåŠ¡åæ˜¯ä¸€ç»„ API å®ç°çš„åˆé›†, è€Œæ¥å£æ˜¯ API çš„æŠ½è±¡å®šä¹‰</li><li>åº”è¯¥ä½¿ç”¨åªç®¡çš„åå­—, ä¾‹å¦‚ <code>Calendar</code> <code>Blob</code></li><li>ä¸åº”è¯¥ä½¿ç”¨ä¸å·²æœ‰çš„æ¦‚å¿µäº§ç”Ÿå†²çª, ä¾‹å¦‚ <code>File</code></li><li>åœ¨æç«¯æƒ…å†µä¸‹, é¿å…ä¸å…¶ä»– API å†²çª, åº”è¯¥ä½¿ç”¨ä¸€ä¸ªåç¼€(<code>Api</code>,<code>Service</code>)æ¥é¿å…æ­§ä¹‰</li></ul></li><li>æ–¹æ³•å<ul><li>åº”è¯¥ä½¿ç”¨ <code>VerbNoun</code> <code>åŠ¨è¯åå­—</code> çš„æ ¼å¼, å…¶ä¸­çš„æ¯æ¬¡åº”è¯¥ä¸ºèµ„æºç±»å‹</li><li>åŠ¨è¯åº”è¯¥ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/%E7%A5%88%E4%BD%BF%E8%AF%AD%E6%B0%94">ç¥ˆä½¿è¯­æ°”</a>, è€Œä¸æ˜¯ç–‘é—®è¯­æ°”<ul><li>è¡¨è¾¾ç›´æ¥å‘½ä»¤æˆ–è¯·æ±‚</li></ul></li></ul></li><li>æ¶ˆæ¯å<ul><li>åº”è¯¥ä¸æ–¹æ³•åä¸ºå‰ç¼€, æ·»åŠ  <code>Request</code> å’Œ <code>Response</code> ä½œä¸ºåç¼€, é™¤é<ul><li>æ¶ˆæ¯ä¸ºç©º, google.protobuf.Empty</li><li>èµ„æºç±»å‹</li><li>è¡¨ç¤ºä¸€ä¸ªæ“ä½œçš„èµ„æº</li></ul></li></ul></li><li>æšä¸¾å<ul><li>ç±»å‹åå¿…é¡»ä¸º <code>UpperCamelCase</code></li><li>å€¼åå¿…é¡»ä¸º <code>CAPITALIZED_NAMES_WITH_UNDERSCORES</code></li><li>æ¯ä¸ªæšä¸¾å€¼å¿…é¡»ä»¥ <code>;</code> ç»“æŸ</li><li>ç¬¬ä¸€ä¸ªå€¼åº”è¯¥ä¸º <code>ENUM_TYPE_UNSPECIFIED</code>, è¡¨ç¤ºè¯¥å€¼æœªè¢«æŒ‡å®š</li></ul></li><li>å­—æ®µå<ul><li>å­—æ®µåå¿…é¡»ä¸º <code>lower_case_underscore_separated_names</code></li><li>åº”è¯¥é¿å…ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/%E4%BB%8B%E8%AF%8D">ä»‹è¯</a><ul><li><code>reason_for_error</code> -&gt; <code>error_reason</code></li><li><code>cpu_usage_at_time_of_failure</code> -&gt; <code>failure_time_cpu_usage</code></li></ul></li><li>åº”è¯¥é¿å…ä½¿ç”¨åç½®å½¢å®¹è¯ <a href="https://en.wikipedia.org/wiki/Postpositive_adjective">Postpositive adjective</a><ul><li><code>items_collected</code> -&gt; <code>collected_items</code></li><li><code>objects_imported</code> -&gt; <code>imported_objects</code></li></ul></li><li>é‡å¤å­—æ®µåº”è¯¥ä½¿ç”¨å¤æ•°å½¢å¼</li><li>æ—¶é—´ç‚¹å’ŒæŒç»­æ—¶é—´<ul><li>ä½¿ç”¨ <code>google.protobuf.Timestamp</code> å’Œ <code>google.protobuf.Duration</code></li><li>ä»¥ <code>_time</code> æˆ– <code>_duration</code> ä½œä¸ºåç¼€</li><li>å¦‚æœéœ€è¦æ—¶é—´ç›¸å…³çš„åç¼€, å¿…é¡»éµå¾ª <code>xxx_{time|duration|delay|latency}_{seconds|millis|micros|nanos}</code> æ ¼å¼</li><li>å¦‚æœä¸å¾—ä¸ä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼, é‚£ä¹ˆåº”è¯¥ä½¿ç”¨ RFC 3339 æ ¼å¼, ä¾‹å¦‚ <code>2014-07-30T10:43:17Z</code></li></ul></li><li>æ—¥æœŸå’Œä¸€å¤©ä¸­çš„æ—¶é—´<ul><li>åº”è¯¥ä½¿ç”¨ <code>google.type.Date</code> å’Œ <code>google.type.TimeOfDay</code></li><li>åº”è¯¥ä»¥ <code>_date</code> å’Œ <code>_time</code> ä½œä¸ºåç¼€</li><li>å¦‚æœæ—¥æœŸä¸å¾—ä¸ä½¿ç”¨å­—ç¬¦ä¸²å½¢å¼, åº”è¯¥ä½¿ç”¨ ISO 8601 æ—¥æœŸæ ¼å¼ <code>YYYY-MM-DD</code> ä¾‹å¦‚ <code>2014-07-30</code></li><li>å¦‚æœæ—¶é—´ä¸å¾—ä¸ä½¿ç”¨å­—ç¬¦ä¸²å½¢å¼, åº”è¯¥ä½¿ç”¨ ISO 8601 24 å°æ—¶çš„äº‹ä»¶æ ¼å¼, <code>HH:MM:SS[.FFF]</code> ä¾‹å¦‚ <code>14:55:01.672</code></li></ul></li><li>æ•°é‡<ul><li>æ¯”åŒ…å«æµ‹é‡å•ä½<ul><li><code>xxx_{bytes|width_pixels|meters}</code></li></ul></li><li>å¦‚æœæ˜¯é¡¹ç›®çš„æ•°é‡, åº”è¯¥ä»¥ <code>_count</code> ä½œä¸ºåç¼€</li></ul></li><li>List è¿‡æ»¤å­—æ®µåº”è¯¥ä½¿ç”¨ <code>filter</code></li><li>List å“åº”<ul><li>è¿”å›çš„èµ„æºå­—æ®µå¿…é¡»æ˜¯å¤æ•°å½¢å¼</li></ul></li></ul></li><li>åå­—ç¼©å†™<ul><li>åœ¨æ¥å£å®šä¹‰æ—¶åº”è¯¥ä½¿ç”¨å¸¸è§çš„ç¼©å†™, åœ¨æ–‡æ¡£ä¸­åº”è¯¥ä½¿ç”¨æ ‡å‡†æ ¼å¼<ul><li>config (configuration)</li><li>id (identifier)</li><li>spec (specification)</li><li>stats (statistics)</li></ul></li></ul></li></ul><table><thead><tr><th>API Name</th><th>Example</th></tr></thead><tbody><tr><td>äº§å“å</td><td>Google Calendar API</td></tr><tr><td>æœåŠ¡å</td><td>calendar.googleapis.com</td></tr><tr><td>åŒ…å</td><td>google.calendar.v3</td></tr><tr><td>æ¥å£å</td><td>google.calendar.v3.CalendarService</td></tr><tr><td>æºç ç›®å½•</td><td>//google/calendar/v3</td></tr><tr><td>API å</td><td>calendar</td></tr></tbody></table><p><strong>æ–¹æ³•å</strong></p><table><thead><tr><th>Verb</th><th>Noun</th><th>Method name</th><th>Request message</th><th>Response message</th></tr></thead><tbody><tr><td>List</td><td>Book</td><td>ListBooks</td><td>ListBooksRequest</td><td>ListBooksResponse</td></tr><tr><td>Get</td><td>Book</td><td>GetBook</td><td>GetBookRequest</td><td>Book</td></tr><tr><td>Create</td><td>Book</td><td>CreateBook</td><td>CreateBookRequest</td><td>Book</td></tr><tr><td>Update</td><td>Book</td><td>UpdateBook</td><td>UpdateBookRequest</td><td>Book</td></tr><tr><td>Rename</td><td>Book</td><td>RenameBook</td><td>RenameBookRequest</td><td>RenameBookResponse</td></tr><tr><td>Delete</td><td>Book</td><td>DeleteBook</td><td>DeleteBookRequest</td><td>google.protobuf.Empty</td></tr></tbody></table><h3>ç‰ˆæœ¬</h3><ul><li><code>MAJOR.MINOR.PATCH</code><ul><li>MAJOR æ¥å£ä¸å…¼å®¹</li><li>MINOR æ·»åŠ æ–°çš„åŠŸèƒ½</li><li>PATCH é—®é¢˜ä¿®æ­£</li></ul></li></ul><table><thead><tr><th>Version</th><th>Proto Package</th><th>Description</th></tr></thead><tbody><tr><td>v1alpha</td><td>v1alpha1</td><td>The v1 alpha release.</td></tr><tr><td>v1beta1</td><td>v1beta1</td><td>The v1 beta 1 release.</td></tr><tr><td>v1beta2</td><td>v1beta2</td><td>The second beta release of v1.</td></tr><tr><td>v1test</td><td>v1test</td><td>An internal test release with dummy data.</td></tr><tr><td>v1</td><td>v1</td><td>The v1 major version, general availability.</td></tr><tr><td>v1.1beta1</td><td>v1p1beta1</td><td>The first beta release for minor changes to v1.</td></tr><tr><td>v1.1</td><td>v1</td><td>The minor update to v1.1 release.</td></tr><tr><td>v2beta1</td><td>v2beta1</td><td>The v2 beta 1 release.</td></tr><tr><td>v2</td><td>v2</td><td>The v2 major version, general availability.</td></tr></tbody></table>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Redis æµç®€ä»‹]]></title>
        <id>redis-stream-intro</id>
        <link href="https://wener.me/story/redis-stream-intro"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[æ¦‚è¿°]]></summary>
        <content type="html"><![CDATA[<h2>æ¦‚è¿°</h2><p>å¯¹ Redis çš„å°è±¡å¯èƒ½å¾ˆå¤šäººéƒ½è¿˜åªåœç•™åœ¨ 2.8 çš„é˜¶æ®µï¼Œä¸€ä¸ªç»“æ„åŒ–çš„å†…å­˜å­˜å‚¨ï¼ˆå—¯ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼‰ã€‚è™½ç„¶è·ç¦» 4.0 å‘å¸ƒ(2017.7.14)å·²ç»ä¸€å¹´è¿‡å»äº†ï¼Œä½†ç›¸ä¿¡å¾ˆå¤šäººå·²ç»ä¸å†å»å…³å¿ƒ Redis çš„æ–°ç‰¹æ€§äº†ï¼Œå› ä¸ºä» 2.8 åçš„ Redis å·²ç»è¶³å¤Ÿå¥½ç”¨äº†ã€‚ğŸ˜„</p><p>Redis 3.0 æ·»åŠ äº†é›†ç¾¤çš„èƒ½åŠ›ï¼Œ4.0 æ·»åŠ äº†æ¨¡å—åŒ–èƒ½åŠ›ï¼Œ5.0 æ·»åŠ äº†æµç±»å‹ã€‚å¦‚æœè¯´ 3.0 å’Œ 4.0 æ·»åŠ çš„æ–°ç‰¹æ€§å¯¹äºä¸€èˆ¬ç”¨æˆ·æ¥è¯´æ— è¶³è½»é‡ï¼Œé‚£ 5.0 æ–°çš„æµç±»å‹å°±ä¸å¯å¿½è§†å•¦ï¼</p><p>åœ¨æ²¡æœ‰ Stream ç±»å‹ä¹‹å‰ï¼Œå…¶å® Redis ä¹Ÿæ”¯æŒå„ç§ç±»ä¼¼äºæµçš„å¤„ç†æ¨¡å¼ï¼Œä¾‹å¦‚ Fire and forget æ¨¡å¼çš„ Pub/Subï¼Œé˜»å¡é˜Ÿåˆ— BLPOPï¼Œæ—¶é—´åºåˆ— zsort å­˜å‚¨ï¼Œç­‰å„ç§æ–¹å¼éƒ½èƒ½æ¨¡æ‹Ÿç±»ä¼¼çš„åœºæ™¯ï¼Œä½†å´éƒ½è§‰å¾—æœ‰ç‚¹æ¬ ç¼ºï¼Œç»ˆäºï¼Œæµç±»å‹æˆåŠŸçš„è§£å†³äº†ä»¥ä¸Šæ‰€æœ‰é—®é¢˜ï¼Œå¹¶èƒ½æ”¯æŒå…¶ä»–çš„å¸¸è§ä½¿ç”¨åœºæ™¯ã€‚</p><p>è¯´åˆ°æµæ¶ˆæ¯å°±ä¸å¾—ä¸è¯´åˆ° Kafka å•¦ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶åº”è¯¥éƒ½å¬è¯´è¿‡æ¶ˆæ¯ä¸­é—´ä»¶ Kafkaï¼Œè‡³äº RocketMQ æˆ–è€… MetaQ å°±ä¸å†èµ˜è¿°ä»–ä»¬ä¸ Kafka çš„å…³ç³»å•¦ï¼ŒRedis ä½œè€…åœ¨å®ç°æµç±»å‹æ—¶å¤§é‡å‚è€ƒäº† Kafka ä¸­çš„æ¦‚å¿µï¼Œä¾‹å¦‚æ¶ˆè´¹æ¨¡å‹ï¼Œæµæ¶ˆæ¯çš„æ¦‚å¿µã€‚å½“ç„¶æ‰€æœ‰çš„å‚è€ƒåªå±€é™äº Kafka çš„æ–‡æ¡£ï¼Œä¸ Kafka çš„ä»£ç å®ç°æ²¡æœ‰ä»»ä½•å…³ç³»å“¦ã€‚</p><p>å¿ƒåŠ¨ä¸å¦‚å¿ƒåŠ¨ï¼Œé‚£å…ˆä¸€ç¹ä¸ºå¿«å§ã€‚</p><h2>ç¯å¢ƒå‡†å¤‡</h2><p>å¦‚æœä½ æ˜¯ macOs ç”¨æˆ·ï¼Œå¹¶ä¸”å®‰è£…äº† brewï¼ˆå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œé‚£å»ºè®®å…ˆå®‰è£… <code>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code>ï¼‰ï¼Œé‚£ä¹ˆåªéœ€è¦</p><pre><code class="language-bash">brew install redis
</code></pre><p>å³å¯ï¼Œå¦‚æœä½ æ˜¯é macOs ç”¨æˆ·ï¼Œé‚£è¦å˜›è€ƒè™‘æ¢ macï¼Œè¦å˜›ä½¿ç”¨ docker å¯åŠ¨</p><pre><code class="language-bash">docker run --rm -it -p 6379:6379 -v $PWD:/data --name redis redis:alpine
# é¢˜å¤–è¯: ä½¿ç”¨ alpine æ›´å°æ›´çœå¿ƒï¼Œå¼ºçƒˆæ¨èï¼Œæœ‰ä»»ä½•ä½¿ç”¨é—®é¢˜éƒ½å¯ä»¥äº¤æµå“¦ï¼Œè‡³äºæœ‰å¤šå¥½ï¼Œåœ¨è¿™é‡Œæ€•æ˜¯è¯´ä¸å®Œã€‚

# éªŒè¯å®‰è£…çš„ç‰ˆæœ¬
docker exec redis redis-cli info server
# å®¢æˆ·ç«¯é“¾æ¥
docker exec -it redis redis-cli
</code></pre><p>ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œå°±å¼€å§‹å®è·µå§ã€‚æ—¢ç„¶æµæ˜¯æ–°çš„æ•°æ®ç±»å‹ï¼Œé‚£æˆ‘ä»¬å°±å…ˆä»æ”¯æŒçš„æ“ä½œå¼€å§‹å§ã€‚</p><h2>å‘½ä»¤åˆ—è¡¨</h2><p>Stream ç±»å‹ä¸€å…±æ”¯æŒ 13 ä¸ª<a href="https://redis.io/commands#stream">å‘½ä»¤</a>ï¼Œè¿™é‡Œç®€å•åˆ—ä¸¾ä¸€ä¸‹æ”¯æŒçš„å‘½ä»¤ã€‚</p><table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æ¦‚è¿°</th></tr></thead><tbody><tr><td>xinfo</td><td>è·å–æ¶ˆè´¹è€…ï¼Œåˆ†ç»„å’Œæµä¿¡æ¯</td></tr><tr><td>xadd</td><td>æ·»åŠ æ¶ˆæ¯åˆ°æµ</td></tr><tr><td>xtrim</td><td>å°†æµé‡ç½®ä¸ºæŒ‡å®šå¤§å°</td></tr><tr><td>xdel</td><td>é€šè¿‡ ID åˆ é™¤</td></tr><tr><td>xrange</td><td>è¿”å›èŒƒå›´å†…çš„æ¶ˆæ¯ï¼Œç‰¹æ®Šèµ·å§‹ + -</td></tr><tr><td>xrevrange</td><td>ä¸ xrange ç›¸åŒï¼Œä½†è¿”å›é¡ºåºç›¸å</td></tr><tr><td>xlen</td><td>è·å–æµé•¿åº¦</td></tr><tr><td>xread</td><td>ä»æµä¸­æŒ‡å®š id å¼€å§‹è¯»å–æŒ‡å®šé‡æ¶ˆæ¯ï¼Œå¯é€‰æ‹©é˜»å¡è¿”å›</td></tr><tr><td>xgroup</td><td>ç®¡ç†æ¶ˆè´¹ç»„</td></tr><tr><td>xreadgroup</td><td>ä»¥è®¢é˜…ç»„æˆå‘˜çš„èº«ä»½è¯»å–æµæ¶ˆæ¯ - å³è®¢é˜…/æ¶ˆè´¹æ¶ˆæ¯</td></tr><tr><td>xack</td><td>å“åº”æ¶ˆæ¯è¢«æ­£ç¡®å¤„ç†</td></tr><tr><td>xpending</td><td>æŸ¥è¯¢æ­£åœ¨å¤„ç†ä¸­çš„æ¶ˆæ¯ - å°šæœª ACK çš„æ¶ˆæ¯</td></tr><tr><td>xclaim</td><td>è·å–æ­£åœ¨å¤„ç†ä¸­çš„æ¶ˆæ¯</td></tr></tbody></table><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œç®€å•æ¦‚è¿°ä¸€ä¸‹ä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„ç‚¹</p><ol><li>æµæ¶ˆæ¯å†…å®¹æ˜¯å­—å…¸ - å³ KV ç»“æ„</li><li>æ¯ä¸ªæ¶ˆæ¯æœ‰ä¸€ä¸ª ID - 128bit - ç”±æ—¶é—´æˆ³å’Œåºåˆ—å·ç»„æˆ</li><li>æ’å…¥æ¶ˆæ¯æ—¶ä½¿ç”¨ <code>*</code> ä½œä¸º ID åˆ™æ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆ ID</li><li>ID å¿…é¡»é€’å¢</li><li><code>-</code>/<code>+</code> åˆ†åˆ«è¡¨ç¤ºæœ€å°å’Œæœ€å¤§æ¶ˆæ¯ ID</li><li><code>$</code> è¡¨ç¤ºæœ€æ–°çš„æ¶ˆæ¯ä½ç½®ï¼Œåœ¨åˆ›å»ºæ¶ˆè´¹ç»„æ—¶ä½¿ç”¨</li><li><code>&gt;</code> è¡¨ç¤ºæœ€æ–°æ¶ˆè´¹çš„æ¶ˆæ¯ä½ç½®ï¼Œåœ¨æ¶ˆè´¹æ¶ˆæ¯æ—¶ä½¿ç”¨</li></ol><h2>å‘½ä»¤äº¤äº’</h2><pre><code class="language-bash"># å¾€æµä¸­æ·»åŠ æ¶ˆæ¯ - ä¼šè¿”å›æ¶ˆæ¯ ID
# æ‰‹åŠ¨æŒ‡å®š ID
xadd s 1-0 name wener age 18
xadd s 1-1 name wen age 17
# ç”±æœåŠ¡ç«¯ç”Ÿæˆæ¶ˆæ¯ ID
xadd s * name xx age 16
# è¿”å›æ‰€æœ‰æ¶ˆæ¯
xrange s - +
# è¿”å›ç¬¬ä¸€æ¡
xrange s - + count 1
# è¿”å›æœ€åä¸€æ¡
xrevrange s + - count 1
# è¿”å›æ¶ˆæ¯é•¿åº¦
xlen s

# è¯»ç¬¬ä¸€æ¡æ¶ˆæ¯
xread count 1 streams s1 0-0
# è¯»å–ç¬¬äºŒæ¡ - æŒ‡å®šçš„æ¶ˆæ¯ ID æ˜¯ 1-0 ï¼Œä¼šè¿”å›è¿™ä¸ª ID ä¹‹åçš„æ¶ˆæ¯
xread count 1 streams s1 1-0

# æ¨¡æ‹Ÿæ¶ˆæ¯çš„ Roling å¤„ç†
# ------
del s
# åœ¨æ’å…¥æ¶ˆæ¯æ—¶ï¼Œå¯é™åˆ¶æ¶ˆæ¯çš„æœ€å¤§é•¿åº¦ï¼Œç±»ä¼¼äº rolling æ—¥å¿—æ–‡ä»¶çš„é€»è¾‘
# é€»è¾‘ç­‰åŒäºå…ˆ add å† trim
# æ’å…¥æ—¶é™åˆ¶æœ€å¤§é•¿åº¦ 2
xadd s MAXLEN 2 * ts 1
xadd s MAXLEN 2 * ts 2
xadd s MAXLEN 2 * ts 3
xadd s MAXLEN 2 * ts 4
# æµä¸­åªä¼šæœ‰ 3 4 è¿™ä¸¤æ¡æ¶ˆæ¯
xrange s - +

# æ¶ˆè´¹ç»„
# ======
# é‡ç½®æµå†…å®¹
del s
# åˆ›å»ºæ¶ˆè´¹ç»„ g1 å¹¶å°†æ¶ˆè´¹ä½ç½®ç½®ä¸ºæœ€æ–°æ¶ˆæ¯ä½ç½® $
# å› ä¸º s ä¸å­˜åœ¨ï¼ŒæŒ‡å®š MKSTREAM ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç©ºçš„æµ s
xgroup create s g1 $ MKSTREAM
# æ·»åŠ æ–°çš„æ¶ˆæ¯
xadd s 1-1 name zz age 16
# ä¼šè¿”å›æœ€æ–°æ’å…¥çš„æ¶ˆæ¯ï¼Œå½“å‰æ¶ˆè´¹è€…ä¸º c1
xreadgroup group g1 c1 count 1 streams s &gt;
# å½“æ¶ˆæ¯å¤„ç†å®Œæˆåå¯¹æœåŠ¡ç«¯è¿›è¡Œå“åº”
xack s g1 1-1

# æ¨¡æ‹Ÿæ¶ˆæ¯å¤„ç†å¤±è´¥åœºæ™¯
# ------
# æ·»åŠ æ–°çš„æ¶ˆæ¯
xadd s 1-2 name aa age 16
# ç”± c2 æ¶ˆè´¹
xreadgroup group g1 c2 count 1 streams s &gt;
# ä½†åœ¨å¤„ç†è¿‡ç¨‹ä¸­å¼‚å¸¸ï¼Œæœª ACKï¼Œæ­¤æ—¶é€šè¿‡ pending æŸ¥çœ‹ c2 å †ç§¯çš„æ¶ˆæ¯
xpending s g1 - + 1 c2
# c1 æœ‰èƒ½åŠ›å¤„ç†ï¼Œå› æ­¤å¯ä»¥å°† c2 å¤„ç†å¤±è´¥çš„æ¶ˆæ¯æ‹¿è¿‡æ¥å¤„ç†
# retrycount ç”±åº”ç”¨è‡ªå·±ç»´æŠ¤ï¼Œè®°å½•é‡è¯•æ¬¡æ•°
# 500 ä¸ºè¡¨ç¤ºè¯¥æ¶ˆæ¯çš„å¤„ç†æ—¶é—´è¶…è¿‡ 500ms æ‰èƒ½â€œæ‹¿â€è¿‡æ¥
xclaim s g1 c1 500 1-2 retrycount 2
# c1 æˆåŠŸå¤„ç†è¯¥æ¶ˆæ¯
xack s g1 1-2
</code></pre><p>Stream çš„æ“ä½œç›¸å½“ç®€ä»‹ï¼Œèƒ½å®ç°ä»€ä¹ˆæ ·çš„åŠŸèƒ½ä¸»è¦å–å†³äºä¸šåŠ¡çš„è®¾è®¡ã€‚ä½¿ç”¨ cli å®Œæˆäº†åŸºæœ¬çš„æ“ä½œå†æ¥çœ‹çœ‹ Java çš„æ“ä½œå§ã€‚</p><h2>Java äº¤äº’</h2><p><a href="https://github.com/lettuce-io/lettuce-core">lettuce</a> æ˜¯ä¸€ä¸ªåŸºäº Netty çš„å¼‚æ­¥ Redis å®¢æˆ·ç«¯ï¼Œåœ¨æœ€æ–°ç‰ˆä¸­æ”¯æŒäº† Stream çš„æ“ä½œã€‚</p><p><strong>ç”Ÿäº§å’Œæ¶ˆè´¹</strong></p><pre><code class="language-java">public void stream() throws InterruptedException {
    RedisClient client = RedisClient.create(&quot;redis://localhost&quot;);
    StatefulRedisConnection&lt;String, String&gt; connection = client.connect();
    // æµçš„åå­—
    String streamName = &quot;s&quot;;
    // æ¶ˆè´¹ç»„å
    String groupName = &quot;g1&quot;;

    AtomicInteger counter = new AtomicInteger();
    // æ€»æ¶ˆæ¯é‡
    long total = 1000000;
    // å¹¶å‘ç”Ÿäº§
    int producerCount = 2;
    // å¹¶å‘æ¶ˆè´¹
    int consumerCount = 4;
    for (int i = 0; i &lt; producerCount; i++) {
        int id = i;
        CompletableFuture.runAsync(() -&gt; {
            String name = &quot;producer.&quot; + id;
            StatefulRedisConnection&lt;String, String&gt; connect = client.connect();
            while (true) {
                int n = counter.incrementAndGet();
                if (n &gt; total) {
                    return;
                }
                // åŒæ­¥ç”Ÿäº§
                Timer.Context context = metrics.timer(name).time();
                connect
                        .sync()
                        .xadd(streamName, &quot;ts&quot;, String.valueOf(System.currentTimeMillis()), &quot;i&quot;, String.valueOf(n))
                ;
                context.close();
            }
        });
    }

    for (int i = 0; i &lt; consumerCount; i++) {
        StatefulRedisConnection&lt;String, String&gt; connect = client.connect();

        // æ¶ˆè´¹çš„ä¸Šä¸‹æ–‡
        ConsumerContext c = new ConsumerContext();
        c
                .setConnection(connect)
                .setConsumer(Consumer.from(groupName, &quot;c&quot; + i))
                .setStreamName(streamName)
                .setGroupName(groupName)
                .setName(&quot;consumer.&quot; + i)
                .setXReadArgs(XReadArgs.Builder.block(Duration.ofSeconds(5)))
                .setXreadLastOffset(XReadArgs.StreamOffset.lastConsumed(streamName))
        ;
        // å¼‚æ­¥æ¶ˆè´¹
        consume(c);
    }

    Thread.sleep(Duration.ofMinutes(10).toMillis());
}


private CompletionStage&lt;?&gt; consume(ConsumerContext c) {
    Timer.Context context = metrics.timer(c.name).time();
    return c.connection
            .async()
            .xreadgroup(c.consumer, c.xReadArgs, c.xreadLastOffset)
            // æ¶ˆæ¯å¤„ç†
            .thenCompose(v -&gt; {
                context.close();
                if (v.isEmpty()) {
                    metrics.meter(c.name + &quot;.empty&quot;).mark();
                    return CompletableFuture.completedFuture(null);
                }
                StreamMessage&lt;String, String&gt; message = v.get(0);

                // è¾“å‡ºä¸€å®šæ—¥å¿—é‡
                if (ThreadLocalRandom.current().nextDouble() &lt; 0.01) {
                    log.info(&quot;[{}] {}&quot;, c.name, message.getBody());
                }

                // æˆåŠŸå¤„ç†
                return c.connection.async().xack(c.streamName, c.groupName, message.getId());
            })
            // å¼‚å¸¸å¤„ç†
            .exceptionally(e -&gt; {
                metrics.meter(c.name + &quot;.error&quot;).mark();
                return null;
            })
            // å¾ªç¯ - æ²¡æœ‰æ¨å‡ºé€»è¾‘
            .thenCompose((v) -&gt; consume(c));
}


@Data
@Accessors(chain = true)
public static class ConsumerContext {
    String name;
    String streamName;
    String groupName;
    Consumer&lt;String&gt; consumer;

    StatefulRedisConnection&lt;String, String&gt; connection;

    XReadArgs.StreamOffset&lt;String&gt; xreadLastOffset;

    XReadArgs xReadArgs;
}
</code></pre><p><strong>å¤„ç†æœªæˆåŠŸçš„æ¶ˆæ¯</strong></p><p>åŒæ­¥æ“ä½œï¼Œé€»è¾‘ç›¸å¯¹æ¸…æ™°</p><pre><code class="language-java">public void testClaimPendingSingleThreadSync() {
    RedisClient client = RedisClient.create(&quot;redis://localhost&quot;);
    StatefulRedisConnection&lt;String, String&gt; connection = client.connect();
    String streamName = &quot;s&quot;;
    String groupName = &quot;g1&quot;;

    RedisCommands&lt;String, String&gt; sync = connection.sync();
    Consumer&lt;String&gt; consumer = Consumer.from(groupName, &quot;c1&quot;);
    Range&lt;String&gt; fullRange = Range.create(&quot;-&quot;, &quot;+&quot;);

    while (true) {
        try (Timer.Context ignored = metrics.timer(consumer.getName() + &quot;.pending&quot;).time()) {
            PendingResult result = PendingResult.of(sync.xpending(streamName, consumer, fullRange, Limit.from(1)));

            if (!result.hasPending()) {
                break;
            }

            List&lt;StreamMessage&lt;String, String&gt;&gt; list = sync.xclaim(
                    streamName,
                    consumer,
                    new XClaimArgs().minIdleTime(500).retryCount(result.getDeliverCount() + 1),
                    result.getMessageId()
            );
            if (list.isEmpty()) {
                continue;
            }
            StreamMessage&lt;String, String&gt; message = list.get(0);
            if (ThreadLocalRandom.current().nextDouble() &lt; 0.001) {
                log.info(&quot;[{}] {}&quot;, consumer.getName(), message.getBody());
            }
            sync.xack(streamName, groupName, message.getId());
        }
    }
}

/**
 * Pending è¿”å›çš„ç»“æœå¤„ç†
 */
interface PendingResult {
    static PendingResult of(List&lt;Object&gt; v) {
        return () -&gt; v;
    }

    List&lt;Object&gt; getResult();

    default boolean hasPending() {
        List&lt;Object&gt; result = getResult();
        if (result != null &amp;&amp; !result.isEmpty()) {
            List list = (List) result.get(0);
            return !list.isEmpty() &amp;&amp; list.get(0) != null;
        }
        return false;
    }

    default String getMessageId() {
        return String.valueOf(((List) getResult().get(0)).get(0));
    }

    default String getConsumer() {
        return String.valueOf(((List) getResult().get(0)).get(1));
    }

    default long getElapseTime() {
        return ((Number) ((List) getResult().get(0)).get(2)).longValue();
    }

    default long getDeliverCount() {
        return ((Number) ((List) getResult().get(0)).get(3)).longValue();
    }
}

</code></pre><p>æŸæ¬¡çš„æ€§èƒ½ç»Ÿè®¡</p><pre><code>Java CPU 70%
c1.pending
             count = 769903
         mean rate = 3360.66 calls/second
     1-minute rate = 3267.08 calls/second
     5-minute rate = 2855.18 calls/second
    15-minute rate = 2538.15 calls/second
               min = 0.22 milliseconds
               max = 1.80 milliseconds
              mean = 0.30 milliseconds
            stddev = 0.13 milliseconds
            median = 0.26 milliseconds
              75% &lt;= 0.32 milliseconds
              95% &lt;= 0.49 milliseconds
              98% &lt;= 0.65 milliseconds
              99% &lt;= 0.88 milliseconds
            99.9% &lt;= 1.66 milliseconds
</code></pre><p><strong>å¤„ç†æœªæˆåŠŸçš„æ¶ˆæ¯</strong></p><p>å¼‚æ­¥æ“ä½œï¼Œé€»è¾‘ç›¸å¯¹ä¸é‚£ä¹ˆæ¸…æ™°ï½</p><pre><code class="language-java">public void testClaimPendingSingleThreadAsync() throws ExecutionException, InterruptedException {
    RedisClient client = RedisClient.create(&quot;redis://localhost&quot;);
    StatefulRedisConnection&lt;String, String&gt; connection = client.connect();
    String streamName = &quot;s&quot;;
    String groupName = &quot;g1&quot;;

    RedisAsyncCommands&lt;String, String&gt; async = connection.async();
    Consumer&lt;String&gt; consumer = Consumer.from(groupName, &quot;c2&quot;);
    Range&lt;String&gt; fullRange = Range.create(&quot;-&quot;, &quot;+&quot;);

    AtomicReference&lt;Supplier&lt;CompletionStage&lt;?&gt;&gt;&gt; process = new AtomicReference&lt;&gt;();
    AtomicReference&lt;Timer.Context&gt; context = new AtomicReference&lt;&gt;();
    // ä¸€æ¬¡å¤„ç†
    process.set(() -&gt; {
        context.set(metrics.timer(consumer.getName() + &quot;.process&quot;).time());
        return async
                .xpending(streamName, consumer, fullRange, Limit.from(1))
                .thenCompose(v -&gt; {
                    PendingResult result = PendingResult.of(v);
                    if (!result.hasPending()) {
                        throw new RuntimeException(&quot;DONE&quot;);
                    }

                    return async.xclaim(
                            streamName,
                            consumer,
                            new XClaimArgs().minIdleTime(500).retryCount(result.getDeliverCount() + 1),
                            result.getMessageId()
                    );
                })
                .thenCompose(list -&gt; {
                    StreamMessage&lt;String, String&gt; message = list.get(0);
                    if (ThreadLocalRandom.current().nextDouble() &lt; 0.001) {
                        log.info(&quot;[{}] {}&quot;, consumer.getName(), message.getBody());
                    }
                    return async.xack(streamName, groupName, message.getId());
                })
                .thenCompose(v -&gt; {
                    context.get().close();
                    return process.get().get();
                });
    });
    // å¾ªç¯
    process.get()
            .get()
            .whenComplete((v, e) -&gt; {
                if (e != null) {
                    e.printStackTrace();
                }
                log.info(&quot;Complete&quot;);
            })
            .toCompletableFuture()
            .get();
}
</code></pre><p>ä½†æ€§èƒ½ä¼šæ¯”åŒæ­¥æ“ä½œçš„æ€§èƒ½è¦å¥½å‘¢ï¼ŒJava çš„ CPU ä¹Ÿæ¯”åŒæ­¥çš„æ›´ä½</p><pre><code>Java CPU 50%
redis-server CPU 50%
c2.process
            count = 879207
        mean rate = 5145.76 calls/second
    1-minute rate = 5128.23 calls/second
    5-minute rate = 3779.55 calls/second
15-minute rate = 3132.92 calls/second
            min = 0.14 milliseconds
            max = 0.81 milliseconds
            mean = 0.18 milliseconds
        stddev = 0.06 milliseconds
        median = 0.16 milliseconds
            75% &lt;= 0.19 milliseconds
            95% &lt;= 0.29 milliseconds
            98% &lt;= 0.34 milliseconds
            99% &lt;= 0.40 milliseconds
        99.9% &lt;= 0.81 milliseconds
</code></pre><h2>æ€»ç»“</h2><p>å½“ä»€ä¹ˆæ—¶å€™é€‰æ‹© Redis çš„æµå‘¢ï¼Ÿ</p><ol><li>å†…å­˜å­˜å‚¨æ»¡è¶³éœ€æ±‚</li><li>é€Ÿåº¦è¦æ±‚é«˜</li><li>èƒ½æ¥æ”¶ Redis çš„æŒä¹…åŒ–ä¿éšœ - ï¼ˆä¿éšœæ˜¯ä¸ä¸€å®šæŒä¹… ğŸ˜„ï¼‰</li></ol><p>åˆç†çš„åº”ç”¨ä¹Ÿæ˜¯éœ€è¦åˆç†çš„åœºæ™¯ã€‚</p><p>æµæ€»çš„æ¥è¯´è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œè¿˜æœ‰å¾ˆå¤šå¯èƒ½ä½¿ç”¨çš„åœºæ™¯åœ¨è¿™é‡Œä¸åšä¸€ä¸€èµ˜è¿°ï¼Œæµçš„å†…éƒ¨å®ç°ä¹Ÿæ˜¯éå¸¸çš„æœ‰æ„æ€çš„ï¼Œç­‰æœ‰æ—¶é—´å†åšå¦å¤–çš„ä¸€ä¸ªåˆ†äº«ã€‚æ­¤å¤– Redis 4 çš„ Module ä¹Ÿæ˜¯éå¸¸æœ‰é­…åŠ›ï¼Œä¾‹å¦‚ç”šè‡³å¯ä»¥ç”¨ <a href="https://github.com/wenerme/go-rm">Golang</a> æ¥å®ç°æ¨¡å—æ·»åŠ æ–°çš„å‘½ä»¤åŠŸèƒ½ï¼Œå—¯å—¯ï¼Œæœºä¼šå¤šå¤šã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Java 11 JavaFX ç¬¬ä¸€ä¸ªåº”ç”¨]]></title>
        <id>java11-javafx-first-app</id>
        <link href="https://wener.me/story/java11-javafx-first-app"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[æ¦‚è¿°]]></summary>
        <content type="html"><![CDATA[<h2>æ¦‚è¿°</h2><p>Java 11 è‡ª 2018.9.25 å‘å¸ƒä»¥æ¥ï¼Œå·²ç»å¥½å‡ ä¸ªæœˆäº†ï¼Œåœ¨è¿˜æ²¡æ­£å¼ GA ä¹‹å‰éƒ½ä¹ æƒ¯æ€§çš„å» <a href="http://www.java-countdown.xyz/">java-countdown.xyz</a> check å‘å¸ƒå€’è®¡æ—¶ã€‚Java 11 æœ‰æ¯”è¾ƒå¤šçš„æ–°åŠŸèƒ½ï¼Œè€Œå…¶ä¸­æœ€å¸å¼•æˆ‘çš„</p><ul><li>Java 11 æ˜¯ LTS ç‰ˆæœ¬<ul><li>è¿™æ„å‘³ç€ä½“éªŒ Java9 å¸¦æ¥çš„æ¨¡å—ç‰¹æ€§å˜å¾—æ›´æœ‰æ„ä¹‰</li></ul></li><li>JavaFX ä» JDK ä¸­ç§»é™¤ï¼Œä½œä¸ºç‹¬ç«‹æ¨¡å—</li></ul><p>åœ¨ 11 å‘å¸ƒæ—¶ï¼ŒJavaFX ä¹Ÿå‘å¸ƒäº† 11 çš„ GA ç‰ˆæœ¬ã€‚JavaFX æœ¬èº«å¹¶ä¸æ–°å¥‡ï¼Œä½†è‡ª Java9 æ¨¡å—åŒ–åï¼ŒJavaFX å¾—ç›Šäº jlink çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿå°† JavaFX å°è£…ä¸ºç‹¬ç«‹çš„ GUI åº”ç”¨ï¼Œ<strong>ä¸è¦æ±‚å®‰è£… JDK</strong> ã€‚è¿™ä½¿å¾—åœ¨æ¡Œé¢åº”ç”¨å¼€å‘çš„åœºæ™¯ï¼Œé™¤äº† Electronã€Monoã€QT ç­‰è·¨å¹³å°å¼€å‘æ¡†æ¶ï¼ŒJava ä¹Ÿèƒ½ä½œä¸ºå…¶ä¸­çš„ä¸€é¡¹é€‰æ‹©äº†ã€‚åœ¨ Swing æ—¶ä»£ï¼ŒJava çš„æ¡Œé¢åº”ç”¨å¼€å‘ä½“éªŒä¹Ÿä¸å·®ï¼ˆæ›¾ç»åšè¿‡çš„å°æ¸¸æˆ <a href="https://github.com/wenerme/GTetris">wenerme/GTetris</a>ï¼‰ï¼Œä½†ç”±äºç´¯èµ˜çš„ JDK ï¼ˆå¤§çº¦ 150mï¼‰ä½¿å¾—å¼€å‘ä¸€ä¸ªå°åº”ç”¨å˜å¾—ä¸åˆ‡å®é™…ã€‚</p><p>JLink å¯ä»¥å°†é¡¹ç›®ä¾èµ–çš„æ¨¡å—åŠ ä¸ŠåŸºç¡€ VM æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ JDKï¼Œåº”ç”¨çš„ä½“ç§¯èƒ½å¤Ÿå¤§å¤§å‡å°ï¼Œå¦‚æœè¿˜èƒ½å†é…åˆ progardï¼Œé‚£ä½“ç§¯è¿˜èƒ½å†ç¼©å°ä¸€åœˆã€‚</p><h2>Motivation</h2><p>åŸºäºä½“éªŒ Java11 å’Œ JavaFX çš„å‰æï¼ˆæ¯ä¸ª Java ç¨‹åºå‘˜éƒ½ä¼šå†™ç•Œé¢æ˜¯å¸¸è¯†ï¼Ÿï¼‰ï¼Œå°†ç”Ÿæˆ å¥¥æ ¼äººç¾¤æœåŠ¡åŒ–æ¥å£æ–‡æ¡£ çš„ç”Ÿæˆå™¨åšæˆäº†ä¸€ä¸ª GUI å·¥å…·ï¼Œæºç åœ¨ wener.cyw/toolsã€‚</p><p>doc/screenshot-java.png</p><p>doc/screenshot-markdown.png</p><p>å·¥å…·ä¸‹è½½åœ°å€è§é™„ä»¶ - åªæ‰“åŒ…äº† Mac ç‰ˆåº”ç”¨ï¼Œå› ä¸ºæ²¡æœ‰ Windowsã€‚</p><h2>å®‰è£…</h2><p>ä» Java 11 å¼€å§‹ï¼ŒOracle çš„ JDK ä¾¿ä¸å†å»ºè®®ä½¿ç”¨äº†ï¼Œå› æ­¤é¦–é€‰ OpenJDKï¼Œè€Œ OpenJDK çš„äºŒè¿›åˆ¶æä¾›æ–¹ä¹Ÿæœ‰ä¸å°‘ï¼Œåœ¨è¿™é‡Œæ¨èä½¿ç”¨ <a href="https://adoptopenjdk.net/">adoptopenjdk</a>ï¼Œä¸ Oracle ä¸åŒçš„æ˜¯ï¼Œåœ¨è¿™é‡Œä¸‹è½½çš„ JDK éƒ½æ˜¯å‹ç¼©åŒ…ï¼Œæ— é¡»å®‰è£…ï¼Œè§£å‹å°±èƒ½ä½¿ç”¨ï¼Œå½“ç„¶ä¹Ÿä¸ä¼šæœ‰è‡ªåŠ¨æ›´æ–°çš„èƒ½åŠ›ã€‚</p><p><strong><a href="https://adoptopenjdk.net/archive.html?variant=openjdk11&amp;jvmVariant=hotspot">ç‚¹å‡»å‰å¾€ä¸‹è½½</a></strong></p><p>ä¸‹è½½åæˆ‘è§£å‹åˆ°äº† <code>~/jdk</code> ç›®å½•ï¼Œç„¶åå»ºç«‹è½¯è¿æ¥ <code>~/jdk/11</code> æŒ‡å‘åˆ°äº†è¯¥ç‰ˆæœ¬ã€‚</p><h2>å¼€å‘</h2><p>æ€»ç»“ä¸€ä¸‹åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</p><ol><li>é¡¹ç›®æ­å»º - 10%</li><li>åº”ç”¨å¼€å‘ - 20%</li><li>ç”Ÿæˆ JDK - éæ¨¡å—ä¾èµ–è½¬æ¨¡å—ä¾èµ– - 50%</li><li>åº”ç”¨æ‰“åŒ… - 20%</li></ol><h3>é¡¹ç›®æ­å»º</h3><p>æ­å»ºä¸€ä¸ª Java 11 çš„ Maven é¡¹ç›®ä¸æ­å»ºä¸€ä¸ªæ™®é€šçš„é¡¹ç›®åŒºåˆ«å¹¶ä¸å¤§ï¼Œåªæ˜¯ä¼šå¤šä¸€äº›é…ç½®ï¼Œå¹¶ä¸”æ‰€æœ‰çš„ä¾èµ–éƒ½éœ€è¦ä½¿ç”¨æœ€æ–°çš„ã€‚</p><p>çˆ¶ POM çš„ build/plugins é…ç½®è¯´æ˜</p><pre><code class="language-xml">&lt;!-- å¯¹ Java 11 æŒæœ‰åŸºæœ¬çš„å°Šæ•¬ --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.8.0&lt;/version&gt;
    &lt;configuration&gt;
        &lt;release&gt;11&lt;/release&gt;
        &lt;source&gt;11&lt;/source&gt;
        &lt;target&gt;11&lt;/target&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;

&lt;!-- æ‰“åŒ…æ—¶æ‰“åŒ…åˆ° modules ç›®å½• --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.1.0&lt;/version&gt;
    &lt;configuration&gt;
        &lt;outputDirectory&gt;
            ${project.build.directory}/modules
        &lt;/outputDirectory&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
&lt;!-- å°†ä¾èµ–æ‹·è´åˆ° modules ç›®å½• --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.1.1&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;copy-dependencies&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;outputDirectory&gt;
                    ${project.build.directory}/modules
                &lt;/outputDirectory&gt;
                &lt;includeScope&gt;runtime&lt;/includeScope&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;

&lt;!-- å› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰ä¾èµ–éƒ½æ˜¯æ¨¡å—åŒ–çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‡ºç° illegal-access çš„é—®é¢˜ --&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.22.0&lt;/version&gt;
    &lt;configuration&gt;
        &lt;argLine&gt;
            --illegal-access=permit
        &lt;/argLine&gt;
        &lt;forkCount&gt;0&lt;/forkCount&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.22.0&lt;/version&gt;
    &lt;configuration&gt;
        &lt;argLine&gt;
            --illegal-access=permit
        &lt;/argLine&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre><p>åº”ç”¨é¡¹ç›®çš„ build é…ç½®</p><pre><code class="language-xml">&lt;build&gt;
    &lt;!-- å› ä¸ºç”¨åˆ°äº† fxmlï¼Œä¸” fxml æ˜¯æ”¾åœ¨ç±»æ—è¾¹çš„ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨æŒ‡å®šè¯¥ç±»èµ„æº --&gt;
    &lt;resources&gt;
        &lt;resource&gt;
            &lt;directory&gt;src/main/java&lt;/directory&gt;
            &lt;includes&gt;
                &lt;include&gt;**/*.fxml&lt;/include&gt;
            &lt;/includes&gt;
        &lt;/resource&gt;
        &lt;resource&gt;
            &lt;directory&gt;src/main/resources&lt;/directory&gt;
        &lt;/resource&gt;
    &lt;/resources&gt;
    &lt;plugins&gt;
        &lt;!-- ç¡®ä¿ jar ä¸­ç”Ÿæˆæ­£ç¡®çš„ä¿¡æ¯ --&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;1.6.0&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;module-main-class&lt;/id&gt;
                    &lt;phase&gt;package&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;exec&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;configuration&gt;
                        &lt;!-- å› ä¸º PATH ä¸­çš„ jar æ˜¯ Java8ï¼Œæ‰€ä»¥è¿™é‡ŒæŒ‡å®šçš„ç»å¯¹è·¯å¾„ --&gt;
                        &lt;executable&gt;/Users/wener/jdk/11/Contents/Home/bin/jar&lt;/executable&gt;
                        &lt;arguments&gt;
                            &lt;argument&gt;
                                --update
                            &lt;/argument&gt;
                            &lt;argument&gt; --file=${project.build.directory}/modules/${project.build.finalName}.jar
                            &lt;/argument&gt;
                            &lt;!-- å¯åŠ¨ç±» --&gt;
                            &lt;argument&gt; --main-class=me.wener.tools.app.AppMain
                            &lt;/argument&gt;
                            &lt;argument&gt; --module-version=${project.version}
                            &lt;/argument&gt;
                        &lt;/arguments&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre><p>æœ€ç»ˆçš„é…ç½®åœ¨ <code>mvn package</code> åï¼Œä¼šåœ¨ <code>target/modules</code> ç›®å½•ä¸‹çœ‹åˆ°æ‰€æœ‰çš„ jar åŒ…ã€‚è¿™é‡Œçš„ jar åœ¨ç”Ÿæˆ JDK æ—¶ä¼šç”¨åˆ°ã€‚</p><p>åœ¨é¡¹ç›®æ­å»ºå¥½åï¼Œå»ºç«‹å‡ºå¯¹åº”çš„å­æ¨¡å—ï¼Œä¸”åœ¨å­æ¨¡å—ä¸­ <code>src/main/java</code> è®¾ç½®å¥½ <code>module-info.java</code></p><h3>åº”ç”¨å¼€å‘</h3><p>JavaFX çš„å¼€å‘éå¸¸æœ‰æ„æ€ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨ FXMLï¼Œå¼€å‘çš„è¿‡ç¨‹ä½“éªŒä¸ React/Vue/Angular è¿™æ ·çš„å‰ç«¯å¼€å‘ä½“éªŒéå¸¸ç›¸ä¼¼ï¼Œåªéœ€è¦åœ¨ FXML åšå¥½å¸ƒå±€ï¼Œåœ¨ css ä¸­å®šä¹‰å¥½æ ·å¼ï¼Œç„¶åç»‘å®šå¥½äº¤äº’å¤„ç†æ–¹æ³•å³å¯ã€‚</p><p>åº”ç”¨çš„å¯åŠ¨ç±»</p><pre><code class="language-java">public class AppMain extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource(&quot;scene/Main.fxml&quot;));

        Scene scene = new Scene(root, 640, 480);
        stage.setTitle(&quot;@æ–‡è¿© çš„å°å·¥å…·&quot;);
        stage.setScene(scene);
        stage.show();
    }
}
</code></pre><p>å› ä¸ºæ˜¯åŸºäº fxmlï¼Œå¯åŠ¨ç±»åªéœ€è¦å°†è¯¥åœºæ™¯åˆå§‹åŒ–å±•ç¤ºå³å¯ã€‚</p><p>ä¸€ä¸ª fxml çš„åŸºæœ¬æ¡†æ¶</p><pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;?import javafx.scene.control.*?&gt;
&lt;?import javafx.scene.layout.*?&gt;
&lt;?import javafx.stage.Screen?&gt;
&lt;AnchorPane fx:id=&quot;masterPane&quot;
            xmlns=&quot;http://javafx.com/javafx/8.0.121&quot;
            xmlns:fx=&quot;http://javafx.com/fxml/1&quot;
            fx:controller=&quot;me.wener.tools.app.scene.MainScene&quot;&gt;
&lt;/AnchorPane&gt;
</code></pre><p>å…¶ä¸­æ¯”è¾ƒå…³é”®çš„æ˜¯ <code>fx:controller</code> ç»‘å®šäº†æ§åˆ¶ç±» <code>me.wener.tools.app.scene.MainScene</code>ã€‚</p><p>å› æ­¤åœ¨åç»­çš„ <code>action</code> å®šä¹‰ä¸­å¯ç›´æ¥å¼•ç”¨æ§åˆ¶ç±»ä¸Šçš„æ–¹æ³•ï¼Œæˆ–è€…å°†é¡µé¢å…ƒç´ ç›´æ¥å…³è”åˆ°æ§åˆ¶ç±»ã€‚</p><p>ç»‘å®šå…ƒç´ 
<img src="./javafx-binding.png" alt="javafx-binding.png"/></p><p>å…ƒç´ å…³è”
<img src="./javafx-relation.png" alt="javafx-relation.png"/></p><p>Intellij æ¯”è¾ƒæ™ºèƒ½ï¼Œå¯ç›´æ¥åœ¨è¿™ä¸¤ä¸ªåœ°æ–¹äº’ç›¸è·³è½¬ã€‚</p><pre><code class="language-xml">&lt;!-- æŒ‰é’®ç‚¹å‡»å…³è”æ§åˆ¶ç±»ä¸Šçš„æ–¹æ³• doConvert --&gt;
&lt;Button mnemonicParsing=&quot;false&quot; onAction=&quot;#doConvert&quot; text=&quot;ç”Ÿæˆæ–‡æ¡£&quot;/&gt;
</code></pre><h3>ç”Ÿæˆ JDK</h3><p>åœ¨ APP å¼€å‘å®Œæˆåï¼Œå³å¯ä¸ºè¯¥ APP ç”Ÿæˆä¸€ä¸ªå®šåˆ¶çš„ JDKï¼Œè¯¥ JDK åªéœ€è¦åŒ…å« APP æ‰€éœ€ä¾èµ–ï¼Œç”Ÿæˆçš„ JDK å¯é‡å¤ä½¿ç”¨ï¼Œé™¤é APP çš„ä¾èµ–å˜æ›´ã€‚</p><pre><code class="language-bash"># ç¡®ä¿ä¸‹é¢çš„ Java å‘½ä»¤æ˜¯ Java 11 çš„
export PATH=$JAVA_11_HOME/bin:$PATH

# æŸ¥çœ‹æ‰“åŒ…æ‹·è´çš„æ¨¡å—
# å…¶ä¸­ä¼šå‘ç°å¾ˆå¤š automatic çš„æ¨¡å—
java --list-modules -p target/modules/

# æŸ¥çœ‹ä¸»åº”ç”¨ jar çš„ä¾èµ–è¯·æ±‚
jdeps  --module-path target/modules/ target/modules/tools-app-1.0-SNAPSHOT.jar

# ç”Ÿæˆ JDK åˆ°è¯¥ç›®å½• jdk/Contents/Home/jre
# add-modules çš„åˆ—è¡¨æ¥è‡ªäº module-info çš„å®šä¹‰
jlink --strip-debug --compress 2 \
    --no-header-files --no-man-pages \
    --output jdk/Contents/Home/jre \
    -p $PWD/target/modules \
    --add-modules javafx.controls,javafx.fxml,com.google.common,com.github.javaparser.core,com.github.javaparser.symbolsolver.logic,com.github.javaparser.symbolsolver.model,me.wener.tools.core
</code></pre><p>ä½†åœ¨ç”Ÿæˆ JDK æ—¶ä¼šå‘ç°å¼‚å¸¸</p><pre><code>Error: automatic module cannot be used with jlink: com.github.javaparser.symbolsolver.logic from xxx.jar
</code></pre><p>å¼‚å¸¸çš„åŸå› æ˜¯ jlink ä¸æ”¯æŒ automatic çš„æ¨¡å—ï¼Œæ‰€è°“ automatic æ¨¡å—ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰ module-info çš„æ¨¡å—ï¼Œä½†åœ¨ jar çš„ <code>META-INF/MANIFEST.MF</code> ä¸­å®šä¹‰äº† <code>Automatic-Module-Name</code> ä¿¡æ¯ã€‚</p><p>é’ˆå¯¹è¿™ç±» jarï¼Œå”¯ä¸€èƒ½æ¯”è¾ƒå¥½çš„å¤„ç†æ–¹å¼</p><ol><li>ç”Ÿæˆ module-info.java</li><li>è§£åŒ…</li><li>ç¼–è¯‘ module-info.java</li><li>æ›´æ–° jar</li></ol><p>ä¸€ä¸‹ä»¥ javax.inject ä¸ºæ¡ˆä¾‹</p><pre><code class="language-bash">wget http://central.maven.org/maven2/javax/inject/javax.inject/1/javax.inject-1.jar

# æŸ¥çœ‹ä¾èµ–æƒ…å†µï¼Œéæ¨¡å—åŒ–çš„ jar ä¾èµ–å’Œæ¨¡å—åŒ– jar çš„ä¾èµ–ç°å®ä¸åŒ
# è¾“å‡º: javax.inject-1.jar -&gt; java.base
# æ¨¡å—åŒ–çš„ jar è¾“å‡º: javax.inject -&gt; java.base
jdeps javax.inject-1.jar


# ç”Ÿæˆ module-info.java
jdeps --generate-open-module info javax.inject-1.jar
# è§£å‹ jar
unzip javax.inject-1.jar -d classes/
# ç¼–è¯‘ module-info.java
javac -p javax.inject -d classes/ info/javax.inject/module-info.java
# æ›´æ–° jar
jar uf javax.inject-1.jar -C classes/ module-info.class
# å†æ¬¡æŸ¥çœ‹ä¾èµ–
jdeps javax.inject-1.jar
</code></pre><p>å…¶ä¸­ <code>info/javax.inject/module-info.java</code> çš„å†…å®¹ä¸º</p><pre><code>open module javax.inject {
}
</code></pre><p>æ¥ä¸‹æ¥çš„ä¸€æ®µæ—¶é—´ä¾¿æ˜¯å°†æ‰€æœ‰ç”¨åˆ°çš„ä¾èµ–è¿›è¡Œè¿™æ ·çš„è½¬æ¢ï¼Œå…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ <strong>é—´æ¥ä¾èµ–ä¹Ÿéœ€è¦æ¨¡å—å¤„ç†</strong>ã€‚å…¶ä¸­æœ€éš¾å¤„ç†çš„æ˜¯ guavaï¼Œå› ä¸ºéœ€è¦å°† guava æ¨¡å—åŒ–ï¼Œä¹Ÿéœ€è¦å®ƒä¾èµ–çš„æ‰€æœ‰æ¨¡å—éƒ½å­˜åœ¨ã€‚</p><pre><code>open module com.google.common {
    requires j2objc.annotations;
    requires java.logging;
    requires jdk.unsupported;
    requires jsr305;

    requires transitive error.prone.annotations;

}
</code></pre><p>å› æ­¤ä¸ºäº†å°† guava æ¨¡å—åŒ–ï¼Œéœ€è¦ä» maven ä¸Šä¸‹è½½æ‰€æœ‰çš„è¿™äº› jar å¹¶è¿›è¡Œæ¨¡å—åŒ–ã€‚</p><p>å®Œæˆæ‰€æœ‰çš„æ¨¡å—åŒ–åï¼Œå†æ¬¡é€šè¿‡ jlink ç”Ÿæˆ jdk åˆ° <code>jdk/Contents/Home/jre</code>ï¼Œä¹‹æ‰€ä»¥ç”Ÿæˆåˆ°è¿™æ ·çš„ä¸€ä¸ªç›®å½•ï¼Œæ˜¯å› ä¸ºåœ¨åº”ç”¨æ‰“åŒ…æ—¶èƒ½ç¬¦åˆé»˜è®¤çš„ Java ç›®å½•ç»“æ„ã€‚</p><pre><code class="language-bash"># ä½¿ç”¨ç”Ÿæˆçš„ JDK æ¥è¿è¡Œåº”ç”¨
./jdk/Contents/Home/jre/bin/java -Xmx64m --upgrade-module-path target/modules -m me.wener.tools.app

# ç”Ÿæˆçš„ JDK å¤§çº¦ 50m - å¯¹æ­¤å·²ç»éå¸¸æ»¡æ„äº†ï¼ŒElectron ä¸€èˆ¬éƒ½æ˜¯ 100m å·¦å³
du -s jdk/
</code></pre><h3>åº”ç”¨æ‰“åŒ…</h3><p>åº”ç”¨æ‰“åŒ…ä¸»è¦æ˜¯å°†ç°åœ¨å·²ç»èƒ½è¿è¡Œçš„ jdk ç¯å¢ƒæ‰“åŒ…ä¸ºä¸€ä¸ª macOs çš„ appã€‚æ‰“åŒ…å™¨æœ‰ä¸åŒçš„é€‰æ‹©ï¼Œä½†ç”¨ä¸‹æ¥è¿˜æ˜¯ jar2app æ¯”è¾ƒå¥½ç”¨ã€‚å¦‚æœéœ€è¦æ‰“åŒ…å…¶å®ƒå¹³å°åº”ç”¨ï¼Œéœ€è¦é€‰æ‹©å…¶å®ƒå¹³å°çš„æ‰“åŒ…å™¨ã€‚</p><pre><code class="language-bash">git clone https://github.com/Jorl17/jar2app
# jar2app æ˜¯ Python è„šæœ¬ï¼Œå› æ­¤éœ€è¦ Python ç¯å¢ƒ
# æ‰“åŒ…ï¼Œä½¿ç”¨è‡ªå®šä¹‰ jdk target/jdk
./jar2app/jar2app ./target/modules/tools-app-1.0-SNAPSHOT.jar -r target/jdk/ -b me.wener.tools -n WenerTools -j &quot;-Xmx64M --upgrade-module-path $APP_ROOT/Contents/PlugIns/jdk/modules&quot;

# æœ€ç»ˆæ‰“åŒ…åçš„åº”ç”¨çº¦ 50m
# 50M     WenerTools.app
du -s WenerTools.app

# åŒå‡»å¯åŠ¨æˆ–å‘½ä»¤è¡Œå¯åŠ¨
open WenerTools.app
</code></pre><p>ä¸€åˆ‡å¤§åŠŸå‘Šæˆï¼Œä¸€ä¸ª APP å°±æ­¤è¯ç”Ÿäº†ï¼å¦‚æœè¿˜æƒ³è¦æäº¤åˆ° AppStoreï¼Œè¿™ä¸ªè¿‡ç¨‹è¿˜ä¼šéœ€è¦å…¶ä»–çš„ä¸å°‘æ­¥éª¤ï¼Œåœ¨è¿™å°±ä¸è¯¦ç»†è¯´æ˜å•¦ã€‚</p><h2>æ€»ç»“</h2><p>åº”ç”¨å¼€å‘è¿‡ç¨‹ï¼Œæ‰“åŒ…è¿‡ç¨‹éƒ½è¿˜æ˜¯æ¯”è¾ƒæ„‰å¿«çš„ï¼Œæœ€å›°éš¾çš„æ˜¯æ¨¡å—åŒ– jar çš„å¤„ç†ï¼Œå› ä¸ºå¾ˆå¤šæ¨¡å—éƒ½è¿˜æ²¡æœ‰ module-info.javaï¼Œå¯¼è‡´å¤§éƒ¨åˆ†çš„ jar éƒ½å¾—å…ˆå¤„ç†ä¸€éï¼Œä¸è¿‡è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä»¥ç´¯è®¡çš„ï¼Œè¢«å¤„ç†è¿‡çš„ jar å¯ä»¥è¢«é‡å¤åˆ©ç”¨ã€‚å¦‚æœä¸éœ€è¦é…åˆ jlinkï¼Œé‚£ä¹ˆæ˜¯ä¸éœ€è¦å¤„ç†çš„ã€‚</p><p>Java 11 æ„å‘³ç€ Java 9ã€10ã€11 çš„æ‰€æœ‰æ–°ç‰¹æ€§ï¼ŒJavaFX å¼€å‘ä¹Ÿå¼‚å¸¸çš„ç®€å•ï¼Œæ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯å¾ˆçˆ½çš„ï¼</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¦‚ä½•ä»0åˆ°1å®ç°ä¸€é—¨è¯­è¨€]]></title>
        <id>get-started-with-dsl</id>
        <link href="https://wener.me/story/get-started-with-dsl"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[è¯­è¨€å°±æ˜¯ç¨‹åºå‘˜çš„é…’ç²¾/Languages are alcohol to programmerã€‚ğŸº]]></summary>
        <content type="html"><![CDATA[<blockquote><p>è¯­è¨€å°±æ˜¯ç¨‹åºå‘˜çš„é…’ç²¾/Languages are alcohol to programmerã€‚ğŸº
â¤ wener</p></blockquote><h2>DSL</h2><p>DSL å…¨åä¸º Domain-specific Lnaguage/é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œè¯´åˆ° domain-specific ä¼šä¸ä¼šç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ˜¯ DDD å‘¢ï¼ŸDDD ä¸­çš„è¯­è¨€å«åš Ubiquitous Languageï¼Œå³é€šç”¨è¯­è¨€ï¼ŒæŒ‡çš„æ˜¯åœ¨å½“å‰ Domain ä¸‹ä½¿ç”¨ç»Ÿä¸€çš„è‡ªç„¶è¯­è¨€è¿›è¡Œæ²Ÿé€šäº¤æµä¾¿äºä¸Šä¸‹æ–‡çš„ç†è§£å’Œæ²Ÿé€šã€‚DSL çš„ç›®çš„æ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œä¸ºç‰¹å®šé¢†åŸŸå®ç°çš„è¯­è¨€ï¼Œç›®çš„æ˜¯ä¸ºäº†æ›´åŠ é«˜æ•ˆä¾¿æ·çš„è§£å†³ç‰¹å®šé¢†åŸŸçš„é—®é¢˜ã€‚</p><p>DSL æ˜¯é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œä¸ä¹‹ç›¸åçš„è¯­è¨€å«åš General purpose language/é€šç”¨è¯­è¨€ã€‚é€šç”¨è¯­è¨€å‡ä¸ºå›¾çµå®Œå¤‡è¯­è¨€ï¼Œè€Œ DSL åˆ™ä¸å¿…è¦å…·å¤‡è¿™æ ·çš„èƒ½åŠ›ã€‚ä¸€ä¸ªé€šç”¨è¯­è¨€ä¹Ÿæœ‰å…¶ç‰¹å®šçš„åº”ç”¨é¢†åŸŸï¼Œä¾‹å¦‚ ç³»ç»Ÿç¼–ç¨‹ã€Web ç¼–ç¨‹ã€è„šæœ¬ ç­‰ï¼Œæ¥åŒºåˆ«äºå…¶å®ƒè¯­è¨€ï¼Œå› æ­¤æŸç§ç¨‹åº¦ä¸Šæ¥è¯´é€šç”¨è¯­è¨€ä¹Ÿæ˜¯â€œDSLâ€ã€‚</p><p><strong>å¸¸è§çš„ DSL</strong></p><table><thead><tr><th>è¯­è¨€</th><th>é¢†åŸŸ</th></tr></thead><tbody><tr><td>JSON</td><td>æ•°æ®äº¤æ¢</td></tr><tr><td>CSS</td><td>æ ·å¼ç¼–æ’</td></tr><tr><td>SQL</td><td>ç»“æ„æŸ¥è¯¢</td></tr><tr><td>JSX</td><td>ç»“æ„åŒ–ç»„ä»¶</td></tr></tbody></table><p>ä½†æ— è®ºé¢†åŸŸä¸ºä½•ï¼ŒDSL æœ¬è´¨æ˜¯è¯­è¨€ï¼Œæœ‰ç‰¹å®šçš„è¯æ³•ã€è¯­æ³•å’Œä¸Šä¸‹æ–‡é€»è¾‘ã€‚å½“éœ€è¦å®ç°ä¸€ç§ DSL è¯­è¨€æ—¶ï¼Œéœ€è¦è€ƒè™‘</p><ul><li>è¯­è¨€çš„ç›®çš„</li><li>æœŸæœ›çš„è¯­æ³•è¯æ³•</li><li>å¤„ç†é€»è¾‘</li></ul><p>é©±åŠ¨å®ç°ä¸€é—¨è¯­è¨€ï¼Œå¾€å¾€å› ä¸º</p><ul><li>è®¾è®¡ç†å¿µä¸åŒ</li><li>æ›´å®‰å…¨å¯æ§ - é™åˆ¶è¯­è¨€èƒ½åŠ›</li><li>ä¸ºåº”ç”¨æä¾›æ›´åŠ çµæ´»çš„å¤„ç†èƒ½åŠ› - è„šæœ¬</li><li>æ‰©å±•ç°æœ‰è¯­è¨€å¢å¼ºè¡¨è¾¾èƒ½åŠ› - è½¬è¯‘ - JSXã€TS</li><li>åˆ©ç”¨ç°æœ‰çš„è¿è¡Œç¯å¢ƒå®ç°æ›´ç®€æ´é«˜æ•ˆçš„è¯­è¨€ - Kotlinã€Elixir</li><li>èƒ½å¤Ÿæ›´å¿«æ›´å®¹æ˜“çš„è§£å†³/æè¿°ç‰¹å®šé¢†åŸŸé—®é¢˜ - DSL</li></ul><p>ç›®çš„ä¸åŒé©±åŠ¨å®ç°çš„æ–¹å¼ä¹Ÿå„ä¸ç›¸åŒï¼Œæ¯ç§çš„åšæ³•ä¹Ÿä¸å°½ç›¸åŒï¼Œåœ¨è¿™é‡Œä»¥å®ç°ä¸€ä¸ªç®€å•çš„æ•°å­¦è®¡ç®—è¯­è¨€ä½œä¸ºæ¼”ç¤ºã€‚</p><h2>å®ç°ä¸€é—¨è¯­è¨€</h2><ul><li>ç›®çš„: å®ç°ç®€å•çš„æ•°å€¼è®¡ç®—ï¼Œæ”¯æŒåŸºæœ¬çš„ä¸‰è§’å‡½æ•°</li><li>è¯­è¨€
<em> æ•°å­¦æ“ä½œæ”¯æŒ åŠ å‡ä¹˜é™¤
</em> ä¸‰è§’å‡½æ•°æ”¯æŒ sinã€cos <!-- -->*<!-- --> è¿è¡Œæ—¶æ•°å€¼ç±»å‹å‡ä¸ºåŒç²¾åº¦æµ®ç‚¹æ•°</li></ul><p>å½“è¯­è¨€çš„åŸºç¡€ç¡®å®šåï¼Œéœ€è¦å°†è¯­è¨€çš„è¯­æ³•ä»¥æŸç§å½¢å¼è¡¨ç°å‡ºæ¥ï¼Œè¡¨ç°è¯­è¨€è¯­æ³•çš„æ–¹å¼ä¹Ÿæ˜¯ä½¿ç”¨ä¸€é—¨è¯­è¨€(â™»ï¸ğŸ˜„)ã€‚<a href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">EBNF</a> - æ‰©å±•å·´ç§‘æ–¯èŒƒå¼ï¼Œè¯­æ³•è¡¨è¿°å¦‚ä¸‹</p><pre><code>è¡¨è¾¾å¼ = æ“ä½œç¬¦è¡¨è¾¾å¼ | å‡½æ•°è¡¨è¾¾å¼ | æ•°å€¼
æ“ä½œç¬¦è¡¨è¾¾å¼ = è¡¨è¾¾å¼ æ“ä½œç¬¦ è¡¨è¾¾å¼
å‡½æ•°è¡¨è¾¾å¼ = å‡½æ•°å ( è¡¨è¾¾å¼ )
æ“ä½œç¬¦ = + | - | * | /
æ•°å€¼ = ä¸€ä¸ªæˆ–å¤šä¸ª æ•°å­—
æ•°å­— = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
</code></pre><p>è¯­æ³•èƒ½ç”¨é€šç”¨çš„ EBNF è¡¨è¿°å‡ºæ¥ï¼Œåœ¨å„ç§è¯­è¨€é‡Œé¢æœ‰å®ç°ç±»ä¼¼ EBNF è¡¨è¾¾è¯­è¨€è¯­æ³•ç»“æ„çš„åº“ï¼Œåœ¨è¿™é‡Œä½¿ç”¨ <a href="https://pegjs.org">pegjs</a> æ¥è¿›è¡ŒåŸå‹éªŒè¯å’Œå®éªŒã€‚</p><p>åœ¨ pegjs çš„<a href="https://pegjs.org/online">åœ¨çº¿ Demo</a>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»æœ‰ä¸€ä¸ªæ”¯æŒæ•°å­¦è¿ç®—çš„è¯­è¨€ã€‚ç°å°†å·¦ä¾§è¯­æ³•æ›¿æ¢ä¸ºå°†è¦å®ç°çš„è¯­æ³•æè¿°</p><pre><code>è¡¨è¾¾å¼ = åŠ å‡è¡¨è¾¾å¼
åŠ å‡è¡¨è¾¾å¼  = ä¹˜é™¤è¡¨è¾¾å¼ ((&#x27;+&#x27; / &#x27;-&#x27;) ä¹˜é™¤è¡¨è¾¾å¼)*
ä¹˜é™¤è¡¨è¾¾å¼ = å‡½æ•°è¡¨è¾¾å¼ ((&#x27;*&#x27; / &#x27;/&#x27;) å‡½æ•°è¡¨è¾¾å¼)*
å‡½æ•°è¡¨è¾¾å¼ = å‡½æ•°å &#x27;(&#x27; è¡¨è¾¾å¼ &#x27;)&#x27; / æ•°å€¼
æ•°å€¼ = [0-9]+
å‡½æ•°å = [a-z]+
</code></pre><p>:::tip PEG</p><p>ç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°æˆ‘ä»¬è¿™é‡Œå®šä¹‰çš„è¯­æ³•ä¸ EBNF æœ‰ä¸€å®šåŒºåˆ«ï¼Œä¾‹å¦‚å•ç‹¬å®šä¹‰äº† <code>åŠ å‡è¡¨è¾¾å¼</code>,<code>ä¹˜é™¤è¡¨è¾¾å¼</code>ï¼Œå¹¶ä¸”æ˜¯è‡ªé¡¶å‘ä¸‹åµŒå¥—çš„ï¼Œè€Œä¸æ˜¯ EBNF çš„ <code>è¡¨è¾¾å¼ = æ“ä½œç¬¦è¡¨è¾¾å¼ | å‡½æ•°è¡¨è¾¾å¼ | æ•°å€¼</code> ä¸€å±‚ç›´æ¥å±•å¼€ã€‚</p><p>ä¹‹æ‰€ä»¥ä¹¦å†™æˆè¿™æ ·ï¼Œæ˜¯å› ä¸º pegjs æ˜¯ <a href="https://en.wikipedia.org/wiki/Parsing_expression_grammar">PEG</a> ç±»çš„è§£æå™¨ï¼Œä¸èƒ½åšå·¦é€’å½’ã€‚è¯¥ç»†èŠ‚æ¶‰åŠåˆ°å¦‚ä½•å®ç°è¯­è¨€è§£æå’Œè¯­æ³•çš„ä¼˜å…ˆçº§å¤„ç†ï¼Œå°†ä¼šåœ¨é¢å¤–çš„æ–‡ç« ä¸­è¿›è¡Œé˜è¿°è§£é‡Šï¼Œå¹¶è®²è§£å¦‚ä½•å®ç°ä¸€ä¸ªè§£æè¯­è¨€çš„è¯­è¨€ã€‚</p><p>:::</p><p>ç„¶ååœ¨å³ä¸Šè¾“å…¥è¡¨è¾¾å¼ <code>sin(1)*2+3</code>, è§£æå®Œæˆåï¼Œå³ä¸‹è§’å‡ºç°å¦‚ä¸‹ JSON å†…å®¹</p><pre><code class="language-json">[[[[&quot;s&quot;, &quot;i&quot;, &quot;n&quot;], &quot;(&quot;, [[[&quot;1&quot;], []], []], &quot;)&quot;], [[&quot;*&quot;, [&quot;2&quot;]]]], [[&quot;+&quot;, [[&quot;3&quot;], []]]]]
</code></pre><p>è¯¥ JSON æ˜¯ pegjs çš„è¾“å‡ºï¼Œåœ¨æ²¡åšä»»ä½•å¤„ç†çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¯­æ³•æ ‘ã€‚å…¶ä¸­æ¯ä¸€ä¸ªæ•°ç»„å¯¹åº”äº†è¯­æ³•æè¿°ä¸­çš„ä¸€ä¸ªå®šä¹‰ã€‚ä¾‹å¦‚ <code>[ &quot;s&quot;, &quot;i&quot;, &quot;n&quot; ], &quot;(&quot;, [ [ [ &quot;1&quot; ], [] ], [] ], &quot;)&quot;</code> å¯¹åº”è¯­æ³•æ ‘ä¸­çš„ <code>å‡½æ•°å &#x27;(&#x27; è¡¨è¾¾å¼ &#x27;)&#x27;</code>ï¼Œè¡¨ç¤ºå¯¹<code>1</code>æ‰§è¡Œå‡½æ•°<code>sin</code>ã€‚</p><p>ä¸ºäº†æ›´å¥½çš„å±•ç¤ºè¯­æ³•æ ‘ï¼Œæˆ‘ä»¬åœ¨è¯­æ³•æ ‘ä¸­è°ƒæ•´è¿”å›ç»“æœ</p><pre><code>è¡¨è¾¾å¼ = åŠ å‡è¡¨è¾¾å¼
åŠ å‡è¡¨è¾¾å¼  = a:ä¹˜é™¤è¡¨è¾¾å¼ b:(op:(&#x27;+&#x27; / &#x27;-&#x27;) right:ä¹˜é™¤è¡¨è¾¾å¼ {return {type:&#x27;Op&#x27;,op,right}})* {return b.reduce((left,right)=&gt;(right.left=left,right),a)}
ä¹˜é™¤è¡¨è¾¾å¼ = a:å‡½æ•°è¡¨è¾¾å¼ b:(op:(&#x27;*&#x27; / &#x27;/&#x27;) right:å‡½æ•°è¡¨è¾¾å¼ {return {type:&#x27;Op&#x27;,op,right}})* {return b.reduce((left,right)=&gt;(right.left=left,right),a)}
å‡½æ•°è¡¨è¾¾å¼ = name:å‡½æ•°å &#x27;(&#x27; arg:è¡¨è¾¾å¼ &#x27;)&#x27; {return {type:&#x27;Func&#x27;,name,arg}} / æ•°å€¼
æ•°å€¼ = [0-9]+ {return {type:&#x27;Int&#x27;,value:parseInt(text())}}
å‡½æ•°å = [a-z]+ {return {type:&#x27;Name&#x27;,name:text()}}
</code></pre><p>å¯¹åŒæ ·çš„è¡¨è¾¾å¼ <code>sin(1)*2+3</code> æˆ‘ä»¬å¾—åˆ°çš„è¯­æ³•æ ‘ä¸º</p><pre><code class="language-json">{
  &quot;type&quot;: &quot;Op&quot;,
  &quot;op&quot;: &quot;+&quot;,
  &quot;left&quot;: {
    &quot;type&quot;: &quot;Op&quot;,
    &quot;op&quot;: &quot;*&quot;,
    &quot;left&quot;: { &quot;type&quot;: &quot;Func&quot;, &quot;name&quot;: { &quot;type&quot;: &quot;Name&quot;, &quot;name&quot;: &quot;sin&quot; }, &quot;arg&quot;: { &quot;type&quot;: &quot;Int&quot;, &quot;value&quot;: 1 } },
    &quot;right&quot;: { &quot;type&quot;: &quot;Int&quot;, &quot;value&quot;: 2 }
  },
  &quot;right&quot;: { &quot;type&quot;: &quot;Int&quot;, &quot;value&quot;: 3 }
}
</code></pre><p>è¿™æ—¶å€™çœ‹ä¸Šå»æ›´åƒæ˜¯æ ‘çš„ç»“æ„ï¼Œtype ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„ç±»å‹ã€‚</p><ul><li>Func å‡½æ•°è°ƒç”¨èŠ‚ç‚¹ - æœ‰ name å’Œ arg å±æ€§</li><li>Op æ•°å­¦æ“ä½œç¬¦èŠ‚ç‚¹ - æœ‰ opã€leftã€right å±æ€§</li><li>Int æ•°å€¼èŠ‚ç‚¹ - æœ‰ value å±æ€§</li><li>Name åå­—èŠ‚ç‚¹ - æœ‰ name å±æ€§</li></ul><p>è¯­æ³•ç»“æ„è¡¨ç°çš„å†…å®¹ä¸è¡¨è¾¾å¼æœ¬èº«æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼Œå¯è®¤ä¸ºæ˜¯ç¨‹åº/è®¡ç®—æœºç†è§£çš„è¡¨è¾¾å¼ï¼Œæ˜¯æ›´åŠ ç»“æ„åŒ–çš„å†…å®¹ã€‚
è¯­æ³•æ ‘ä¼šæœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ï¼Œå› ä¸ºè¯­æ³•æ ‘ä¸è¡¨è¾¾å¼ç­‰ä»·ï¼Œä¹ŸåŒ…å«äº†å®Œæ•´çš„è®¡ç®—é€»è¾‘å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸éœ€è¦è§£æå™¨è¿›è¡Œè§£æã€‚å¯ç”¨äºç”Ÿæˆæ›´åŠ åº•å±‚çš„è¡¨ç°å½¢å¼ï¼Œä¹Ÿå¯ç”¨äºç›´æ¥æ‰§è¡Œã€‚åœºæ™¯çš„åœºæ™¯åŒ…å«</p><ul><li>ç”Ÿæˆ IR - ä¸­é—´å½¢å¼ï¼Œä¾¿äºè¿›è¡Œæ›´å¤šåç»­å¤„ç† - .Netã€GnuRTLã€LLVM</li><li>ç”Ÿæˆæ±‡ç¼– - ç”Ÿæˆèƒ½ç›´æ¥åœ¨ç›®æ ‡å¹³å°æ‰§è¡Œçš„äºŒè¿›åˆ¶ - x86</li><li>ä»£ç è½¬è¯‘ - åˆ©ç”¨ä¸€å®šçš„è§„åˆ™ç”ŸæˆéåŸå§‹ç±»å‹ä»£ç  - Gwt(Java to Js)ã€java2objc</li><li>ä»£ç ä¼˜åŒ– - è¯­æ³•æ ‘ç»“æ„æ¯”è¾ƒé€šç”¨ï¼Œç¨‹åºä¾¿äºå¤„ç†ï¼Œå¯åˆ©ç”¨å…¬å…±çš„è§„åˆ™è¿›è¡ŒåŒ¹é…åˆ¤æ–­</li><li>ä»£ç ç®€åŒ– - åœ¨ä¸å½±å“è¯­ä¹‰çš„æƒ…å†µä¸‹è°ƒæ•´ä»£ç  - UglifyJsã€ä»£ç æ··æ·† - ç”ŸæˆåŸå§‹ç±»å‹ä»£ç </li><li>ä»£ç åˆ†æ - é™æ€ç±»å‹ã€å®‰å…¨ã€â€œåâ€ä»£ç æ£€æµ‹</li><li>ä»£ç ç´¢å¼• - ä¸€èˆ¬ç”Ÿæˆçš„è¯­æ³•æ ‘èŠ‚ç‚¹éƒ½å¯ä»¥åŒ…å«åŸå§‹ä»£ç ä½ç½®ï¼Œå¯å®ç°åŸºäºæ–¹æ³•æˆ–å¼•ç”¨ç­‰è¿›è¡Œå¿«é€Ÿç´¢å¼• - sourcegraph</li><li>ä»£ç é¢„å¤„ç†</li><li>...</li></ul><p>è¡¨è¾¾å¼è½¬æ¢æˆè¯­æ³•æ ‘ï¼Œå°±å¥½æ¯”ä½¿ç”¨æœºå™¨å­¦ä¹ ä»è‡ªç„¶è¯­è¨€ä¸­æŠ½å–å‡ºæ„å›¾ã€å®ä½“ã€ä¸Šä¸‹æ–‡ç­‰ä¿¡æ¯ï¼Œæ˜¯è®¡ç®—æœºå¯¹ç†è§£â€œäººâ€è¦åšä»€ä¹ˆçš„ç¬¬ä¸€æ­¥ã€‚</p><p>æ—¢ç„¶åŒæ ·çš„è¯­æ³•èƒ½è°ƒæ•´ä¸ºç”Ÿæˆè¯­æ³•æ ‘ï¼Œé‚£ä¹ˆä¹Ÿå°±èƒ½è°ƒæ•´ä¸ºç›´æ¥è®¡ç®—ç»“æœï¼Œå› æ­¤å¾—åˆ°å¦‚ä¸‹å†…å®¹</p><pre><code>è¡¨è¾¾å¼ = åŠ å‡è¡¨è¾¾å¼
åŠ å‡è¡¨è¾¾å¼  = a:ä¹˜é™¤è¡¨è¾¾å¼ b:((&#x27;+&#x27; / &#x27;-&#x27;) ä¹˜é™¤è¡¨è¾¾å¼)* {return b.reduce((r,[o,v])=&gt;o==&#x27;+&#x27;?r+v:r-v,a)}
ä¹˜é™¤è¡¨è¾¾å¼ = a:å‡½æ•°è¡¨è¾¾å¼ b:((&#x27;*&#x27; / &#x27;/&#x27;) å‡½æ•°è¡¨è¾¾å¼)* {return b.reduce((r,[o,v])=&gt;o==&#x27;*&#x27;?r*v:r/v,a)}
å‡½æ•°è¡¨è¾¾å¼ = name:å‡½æ•°å &#x27;(&#x27; arg:è¡¨è¾¾å¼ &#x27;)&#x27; {return Math[name](arg)} / æ•°å€¼
æ•°å€¼ = [0-9]+ {return parseInt(text())}
å‡½æ•°å = [a-z]+ {return text()}
</code></pre><p>è¾“å…¥è¡¨è¾¾å¼ <code>sin(1)*2+3</code>ï¼Œå¾—åˆ°çš„è¾“å‡ºå€¼ä¸º <code>4.6829419696157935</code>ã€‚</p><p>è‡³æ­¤ï¼Œä¸€é—¨ç®€å•çš„è¯­è¨€ä¾¿éªŒè¯å®ç°å®Œæˆäº†ã€‚</p><h2>æ€»ç»“</h2><p>pegjs æ˜¯éå¸¸æ–¹ä¾¿çš„å·¥å…·ï¼Œä½†å®é™…åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨æ—¶ï¼Œè¯­æ³•çš„è§£æå¤„ç†éœ€è¦åœ¨ä¸ªä¸ªè¯­è¨€é‡Œæ‰¾ç±»ä¼¼çš„å®ç°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è§£æä¸è®¡ç®—æ˜¯å¼‚æ„çš„ï¼Œä¾‹å¦‚é€šè¿‡æœåŠ¡ç«¯è§£æå®Œæˆï¼Œä¸‹å‘è¯­æ³•æ ‘åˆ°å®¢æˆ·ç«¯è¿›è¡Œæ‰§è¡Œã€‚è¿™ä¹Ÿä¸æœ€è¿‘ä¸€ä¸ª js æ ‡å‡†è¯·æ±‚çš„ç›®çš„ç±»ä¼¼,<a href="https://github.com/tc39/proposal-binary-ast">tc39/proposal-binary-ast</a> å¸Œæœ›æµè§ˆå™¨èƒ½æ‰§è¡ŒäºŒè¿›åˆ¶çš„è¯­æ³•æ ‘ï¼Œè€Œä¸å†æ˜¯æ¯æ¬¡éƒ½è¿›è¡Œè§£æ jsï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚äºŒè¿›åˆ¶çš„è¯­æ³•æ ‘ä¸æ±‡ç¼–/bytecode å‡ ä¹åªæœ‰ä¸€çº¿ä¹‹éš”ï¼Œç„¶åè¿™ä¹Ÿæ­£æ˜¯<a href="https://webassembly.org/">webassembly</a>çš„ç›®çš„ï¼Œç›´æ¥è®©æµè§ˆå™¨æ‰§è¡Œæ±‡ç¼–ï¼ŒğŸ˜„ã€‚è¯­è¨€ä¸è¿è¡Œç¯å¢ƒæ˜¯å‘¨è€Œå¤å§‹è¿­ä»£çš„ï¼Œå¤šä¹ˆçš„â€œè‡ªç„¶â€ã€‚</p><h2>é™„å½•ï¼šå¸¸ç”¨çš„è¯­æ³•è§£æå™¨</h2><table><thead><tr><th>è§£æå™¨</th><th>ç›®æ ‡è¯­è¨€</th></tr></thead><tbody><tr><td>flex/yacc</td><td>C</td></tr><tr><td>Antlr4</td><td>Javaã€JSã€Pythonã€Switfã€C#ã€C++ã€Go</td></tr><tr><td>JavaCC</td><td>Java</td></tr><tr><td>pegjs</td><td>JavaScript</td></tr></tbody></table><ul><li><a href="https://github.com/antlr/grammars-v4">antlr/grammars-v4</a><ul><li>å…¶ä¸­çš„ <a href="https://github.com/antlr/grammars-v4/blob/master/dart2/Dart2.g4">Dart2</a> ç”±æˆ‘æäº¤</li><li>å‡å¦‚èƒ½å®ç°ä¸€ä¸ªé’ˆå¯¹ Dart2 çš„ JSXï¼Œé‚£ä¹ˆ Flutter çš„å¼€å‘å°†ä¼šæ›´åŠ ç¾å¥½ ğŸ¤©</li></ul></li><li><a href="https://en.wikipedia.org/wiki/Comparison_of_parser_generators">Comparison of parser generators</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å›§ -ã€Šå“ªå’ä¹‹é­”ç«¥é™ä¸–ã€‹è§‚åæ„Ÿ]]></title>
        <id>tt10627720-review</id>
        <link href="https://wener.me/story/tt10627720-review"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[åœ¨æƒ³æ ‡é¢˜çš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸»æ¼”é‡Œæœ‰ å›§ï¼ˆæ£®ç‘Ÿå¤«ï¼‰ï¼Œçªç„¶è§‰å¾—å¥½è´´åˆ‡æ„Ÿå—ï¼Œåœ¨è§‚å½±æ—¶å¤§éƒ¨åˆ†æ˜¯è¿™ä¸ªè¡¨æƒ…ã€‚]]></summary>
        <content type="html"><![CDATA[<p>åœ¨æƒ³æ ‡é¢˜çš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸»æ¼”é‡Œæœ‰ å›§ï¼ˆæ£®ç‘Ÿå¤«ï¼‰ï¼Œçªç„¶è§‰å¾—å¥½è´´åˆ‡æ„Ÿå—ï¼Œåœ¨è§‚å½±æ—¶å¤§éƒ¨åˆ†æ˜¯è¿™ä¸ªè¡¨æƒ…ã€‚</p><p>æœ€è¿‘å€¼å¾—å»ç”µå½±é™¢çœ‹çš„ç”µå½±å¹¶ä¸å¤šï¼Œçœ‹åˆ°å“ªå’è¿‡äº†ä¸¤å‘¨å½±é™¢è¿˜é‚£ä¹ˆçˆ†æ»¡ï¼Œè¯„åˆ†ä¾ç„¶ 8.7ï¼ŒåŸºæœ¬å¯è°“ä¹‹ç¥ä½œå¾…é‡äº†ã€‚åœ¨æ²¡æœ‰äººä¸»åŠ¨å®‰åˆ©ï¼Œåª’ä½“ä¸Šå„ç§å¹çˆ†çš„å‰æä¸‹ï¼Œæ€€ç€æ»¡æ»¡çš„æœŸå¾…é©¶å‘äº†ç”µå½±é™¢ã€‚åç€å¥½ä¸å®¹æ˜“æŠ¢åˆ°çš„ 10:40 çš„6æ’4åº§å¼€å§‹äº†æ¿€åŠ¨çš„è§‚å½±ã€‚</p><p>å½“ä»¥ä¸ºå½±ç‰‡å¼€å§‹æ—¶ï¼Œæ‰å‘ç°è¿˜æ˜¯å½±ä¸šå…¬å¸LOGOï¼Œæ‰å‘ç°è¿˜æ˜¯å½±ä¸šå…¬å¸LOGOï¼Œæ‰å‘ç°è¿˜æ˜¯å½±ä¸šå…¬å¸LOGOã€‚ã€‚ã€‚è¿™ï¼Œæœªå…ä¸šå¤ªé•¿äº†å§ï¼Œè€Œä¸”é™¤äº† COLOROOM çš„ï¼Œå…¶ä»–çš„ä¹Ÿå¤ªå“ªä¸ªå•¥äº†å§ï¼Œç”µå½±è¿™ä¹ˆé«˜å¤§ä¸Šï¼Œå’±å°±ä¸èƒ½å¤šæŠ•å…¥ç‚¹æŠŠè‡ªå·±LOGOç»™åšå¥½ä¹ˆï¼Ÿ</p><p>å¥½å§ï¼Œå½±ç‰‡æ­£å¼å¼€å§‹ã€‚æ‰¿è®¤å»çœ‹è¿™ä¸ªç”µå½±çš„æ—¶å€™åªçŸ¥é“åå­—å«å“ªå’ï¼Œå¹¶æ²¡çœ‹åˆ°å‰¯æ ‡ï¼Œæ‰€ä»¥å¯¹ä¸€å¼€å§‹çš„å±•å¼€ä¸€ä¸‹å­æ²¡ç¼“è¿‡æ¥ã€‚ç¬¬ä¸€æ¬¡çœ‹åˆ°å¤ªä¹™çœŸäººä¸Šåœºï¼Œè§‰å¾—å½¢è±¡è¿˜æ˜¯æ¯”è¾ƒè®¨å–œæ¯”è¾ƒæç¬‘çš„ï¼Œç„¶åå¼€å£å››å·è¯ï¼ˆç®—æ˜¯å§ï¼‰ï¼Ÿä½œä¸ºä¸€ä¸ªå››å·äººï¼Œè§‰å¾—è¿˜æ˜¯è›®æœ‰æ„æ€çš„ã€‚ä½†æ¥ä¸‹æ¥æ°”æ°›å¼€å§‹é€æ¸å‡å›ºï¼Œåœºé¢ä¸€åº¦ååˆ†å°´å°¬ã€‚</p><p>å¤ªä¹™çœŸäººä»ä¸€å¼€å§‹æç¬‘ï¼Œä¸€ç›´æç¬‘åˆ°æœ€åï¼Œä½†æç¬‘æ²¡æœ‰ä»»ä½•é©±åŠ¨ï¼Œçº¯ç²¹æ˜¯å¤©ç„¶çš„å¼±æ™ºï¼Ÿç¬¬ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡ï¼Œç¬¬ä¸‰æ¬¡ï¼Œå°±å¼€å§‹å—ä¸äº†äº†ã€‚å¼€å§‹ä»¥ä¸ºè¿™ä¸ªè§’è‰²åæœŸè‚¯å®šä¼šæœ‰åè½¬ï¼Œä½†çœ‹åˆ°é‚£æœµäº‘çš„å¾·æ€§åï¼Œæ‰å‘ç°æ˜¯æˆ‘æƒ³å¤šäº†ï¼Œè¿™æ•´éƒ¨å‰§å°±è¿™å°¿æ€§ï¼Œåˆ¶ä½œç»„å¾ˆå¥½çš„è¡¨è¾¾äº†â€œä½ ä»¬çˆ±çœ‹ä¸çœ‹â€ï¼Œæˆ‘: æ— è¨€ä»¥å¯¹ğŸ˜¦ã€‚</p><p>å¦‚æœå…¨å±€æ‰€æœ‰äººéƒ½è¿™æ ·çº¯ç²¹æç¬‘ä¹Ÿå°±ç®—äº†ï¼Œä½†å´ååå°±è¦æ­£å„¿å…«ç»ç»™ä½ è®²è®²æ•…äº‹ï¼Œæå¾—ååˆ†éš¾å—ï¼Œçœ‹ç€éƒ½æ˜¯é¸¡çš®ç–™ç˜©ã€‚å“ªå’çš„â€œé­”â€åªæ˜¯ä¸ºé­”è€Œé­”ï¼Œå› ä¸ºæ˜¯é­”ä¸¸ï¼Œæ‰€ä»¥è¦å¾ˆé‡ï¼Œå¾ˆç‹‚å¦„ï¼Œå¾ˆåš£å¼ ï¼Ÿç„¶è€Œå¯¼æ¼”å‘Šè¯‰æˆ‘å¹¶ä¸æ˜¯çš„ï¼Œæ˜¯å› ä¸ºæœ¬æ¥æœ‰å°å¦¹å¦¹è¦å’Œæˆ‘ç©ï¼Œç»“æœåˆ«äººå®¶é•¿ä¸è®©ï¼Œé‚£æˆ‘å°±è¦ææ­»ä»–ä»¬ï¼WTFï¼Ÿè¿™å“ªæ˜¯é­”ä¸¸ï¼Œè¿™å®Œå…¨å°±æ˜¯ç†Šå­©å­çš„å®šä½ï¼Œè€Œä¸”è¿˜æ˜¯å¾ˆè®©äººåŒçƒ¦é‚£ç§ç†Šå­©å­ï¼Œä¸€åº¦æ„Ÿåˆ°æ¶å¿ƒéš¾å—ğŸ¤¢ã€‚å¥¹å¦ˆä¸ä»–ä¹Ÿæ˜¯åŒæ ·çš„é—®é¢˜ï¼Œä¸€å£ä¸çŸ¥é“ä»€ä¹ˆå‘³çš„å£éŸ³ï¼Œå¬çš„ä¸€åº¦å‡ºæˆï¼ˆå¥½åƒä¹Ÿæ²¡å…¥æˆè¿‡ğŸ¤­ï¼‰ã€‚è§‰å¾—æœ€å—ä¸äº†çš„æ˜¯ï¼Œæˆ‘å¾ˆçˆ±ä½ ï¼Œå¾ˆæƒ³é™ªä¼´ä½ ï¼Œä½ åªèƒ½æ´»ä¸‰å¹´ï¼Œå¯æ˜¯æˆ‘è¦å»æ‰“å¦–æ€ªï¼Œé‚£ä½ å°±å“ªè¾¹å‡‰å¿«å“ªè¾¹å‘†ç€å»å§ï¼Ÿï¼Ÿï¼Ÿæ–©å¦–é™¤é­”ä¸ºä»–ç§¯å¾·ï¼Œæ˜¯å¸Œæœ›èƒ½å¤šæ´»ä¸€åˆ†é’Ÿä¹ˆï¼Ÿï¼Ÿï¼Ÿé‚£ä¸ç„¶ï¼Œæ”¾å¼ƒä¸å¨ƒå„¿ç›¸å¤„ï¼Œä½ å¾—åˆ°äº†ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿå½±ç‰‡å¹¶æ²¡æœ‰å¼ºè°ƒå¸Œæœ›å¾—åˆ°è®¤åŒï¼Œå¦‚æœæ˜¯å¸Œæœ›è¢«è®¤åŒï¼Œé‚£åº”è¯¥æ˜¯å¸¦ç€ä¸€è·¯å»æ‰“å¦–æ€ªï¼Œçœ‹åˆ°è¸¢é”®å­çš„æ—¶å€™ä¸€åº¦ä»¥ä¸ºä¼šè¿™æ ·å‘å±•ã€‚</p><p>çœ‹åˆ°é¾™å®«å‡ºåœºåï¼Œåˆå¼€å§‹YYè¿™æ¡æ•…äº‹çº¿ï¼Œæ„Ÿè§‰å¾ˆæœ‰æ„æ€å¾ˆæœ‰æå¤´å‘€ï¼Œåœºæ™¯å¸ƒç½®çš„é‚£ä¹ˆå¥½ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé‚£ä¹ˆæœ‰æ•…äº‹çš„èƒŒæ™¯çº¿ã€‚æç»˜çš„è¿™å¤©åº­ï¼ŒçœŸçš„å¾ˆâ€œå¤©åº­â€ï¼Œæ„Ÿè§‰ä¹Ÿé‡Šæ€€ä¸ºä»€ä¹ˆè¦é€‰æ‹©å¤ªä¹™çœŸï¼Œä¸ºä»€ä¹ˆè¦å½“ç”³å…¬è±¹çš„é¢ç»™å¤ªä¹™çœŸäººå‡èŒğŸ¤£ã€‚</p><p>å½±ç‰‡çš„ä»·å€¼è§‚å’Œä¸æƒ³åšè¿‡å¤šè¯„ä»·ï¼Œå¤ªå¤šäººè®²äº†ï¼Œè¿™æ€æƒ³ï¼Œè¿™æ€åº¦ï¼Œè¿™è¯„è®ºåé¦ˆï¼Œç¬¬ä¸€è”æƒ³åˆ°çš„å°±æ˜¯æˆ˜ç‹¼ã€æµæµªåœ°çƒã€‚ã€‚ã€‚ä¸å¯è¯´</p><p>æœ€åè¿™ç»“å°¾ï¼Œå¼ºè¡Œæ‰“ä¸€æ¶ï¼Œå¼ºè¡Œå¸®ä½ å¿™ï¼Œå¼ºè¡Œé»‘åŒ–ï¼Œå†å¼ºè¡Œæ´—ç™½ï¼Œè¿™ã€‚ã€‚ã€‚çŸ­çŸ­çš„ä¸€äºŒååˆ†é’Ÿå‘ç”Ÿçš„äº‹æƒ…å¤ªå¤šäº†ï¼Œæœ‰ç‚¹æ¥å—çš„ä¸èƒ½ã€‚å¤ªæ™ºéšœï¼Œè®©äººæƒ³åˆ°çš„å¯èƒ½å°±æ˜¯å¤§é±¼æµ·æ£ äº†ï½ï½ğŸ˜‚</p><p>ä»¥ä¸Šåªæ˜¯ä¸ªäººåæ§½ï¼Œéƒ½ç†¬å¤œçœ‹ç”µå½±äº†ï¼Œå†ç†¬å¤œå†™ä¸ªåæ§½å¥½åƒä¹Ÿè¯´å¾—è¿‡å»ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Jackson ä½¿ç”¨æ€»ç»“]]></title>
        <id>jackson-summary</id>
        <link href="https://wener.me/story/jackson-summary"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[åŠ¨æ€ç­–ç•¥]]></summary>
        <content type="html"><![CDATA[<h2>åŠ¨æ€ç­–ç•¥</h2><p>åŠ¨æ€ç­–ç•¥æ¦‚å¿µç›¸å¯¹å®½æ³›ï¼Œåœ¨è¿›å…¥æ­£å¼çš„å†…å®¹ä¹‹å‰å®¹æˆ‘å…ˆæ˜ç¡®é¢˜ç›®ä¸­åŠ¨æ€ç­–ç•¥çš„èŒƒç•´ã€‚</p><p>è¿™é‡Œçš„åŠ¨æ€ç­–ç•¥æŒ‡ï¼Œç°åœ¨ä»¥ A æ–¹å¼æ¥åšæŸä»¶äº‹ï¼Œåœ¨è¿‡ç¨‹ä¸­å¯èƒ½è¢«åˆ‡æ¢ä¸º B æ–¹æ¡ˆï¼Œä½†å¯¹ä¸Šå±‚æ¥è¯´æ˜¯æ— æ„Ÿçš„ã€‚ç­–ç•¥å¯ä»¥æ˜ å°„ä¸ºç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰ï¼Œä¾‹å¦‚</p><p><em>å›¾ç‰‡ç¼ºå¤±</em></p><p>ä¸Šä¸‹æ–‡ä¾èµ–äº†ä¸€ä¸ª IStrategy æ¥å£ï¼Œè€Œ IStrategy æœ‰ä¸¤ç§å®ç°ï¼ŒStrategyAã€StrategyBï¼Œåœ¨è¿è¡Œä¸­å¯èƒ½æ˜¯é€‰æ‹©çš„ A ç­–ç•¥æˆ– B ç­–ç•¥ã€‚å†ä¸€ä¸ªç°å®ä¸€ç‚¹çš„ä¾‹å­</p><p><em>å›¾ç‰‡ç¼ºå¤±</em></p><p>å›¾ä¾‹æè¿°äº†ä¸€ä¸ªå…·ä½“çš„å­˜å‚¨ç­–ç•¥ï¼ŒCachedStrategy æ˜¯å¸¦ç¼“å­˜çš„å­˜å‚¨ç­–ç•¥ï¼Œ cache å’Œ backend å®ç°ç¼“å­˜é€»è¾‘ï¼ŒIStorage æœ¬èº«æ˜¯æŠ½è±¡çš„æ¥å£ï¼Œå› æ­¤ç¼“å­˜é€»è¾‘ä¹Ÿåªéœ€è¦ä¾èµ–æ¥å£è€Œä¸éœ€è¦å…³å¿ƒå…·ä½“å®ç°ã€‚MemoryStorage æ˜¯ä¸€ä¸ªå†…å­˜å­˜å‚¨ï¼Œæ•°æ®å­˜åœ¨å†…å­˜çš„ Map ä¸­ï¼ŒRedisStorage æ˜¯è®¿é—®è¿œç¨‹çš„å­˜å‚¨ã€‚æ‰€æœ‰çš„è¿™äº›ç­–ç•¥ç»†èŠ‚å¯¹ä¸Šå±‚è€Œè¨€éƒ½æ˜¯æ— æ„Ÿçš„ï¼Œæœ€ä¸Šå±‚ä½¿ç”¨çš„ä¾ç„¶æ˜¯ä¸€ä¸ªå­˜å‚¨æ¥å£ã€‚</p><p>è¿™æ ·çš„ç­–ç•¥æ˜¯è¿˜å¯ä»¥å åŠ çš„ï¼Œè¿™æ ·åšç­–ç•¥çš„ç›®çš„æ˜¯ç®€åŒ–äº†å•ä¸ªç­–ç•¥å®ç°çš„å¤æ‚åº¦ï¼Œä¸“æ³¨äºå®ç°ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼Œå¦‚æœä¸ä½¿ç”¨ç­–ç•¥ï¼Œåˆ™éœ€è¦åœ¨ä¸€ä¸ªå®ç°ç±»é‡Œå®ç°è¿‡å¤šçš„é€»è¾‘ï¼Œå½“é¢ä¸´æ–°çš„éœ€æ±‚ï¼Œæ¥å…¥æ–°çš„é€‚é…çš„æ—¶å€™ï¼Œå¯¼è‡´æ”¹åŠ¨ä¼šå¼‚å¸¸å›°éš¾ï¼Œä»¥ä¸‹çš„ä¼ªä»£ç å±•ç¤ºäº†è¿™æ ·çš„åŒºåˆ«</p><p><strong>å•ä¸ªç±»å®ç°</strong></p><pre><code class="language-js">class StorageImpl {
  constructor({ redisUrl, redisPort }) {
    this.cache = {};
    this.redis = new Redis({ url: redisUrl, port: redisPort });
  }
  get(key) {
    if (this.cache[key]) {
      return this.cache[key];
    }
    let val = this.redis.get(key);
    if (val) {
      this.cache[key] = val;
    }
    return val;
  }
  set(key, value) {
    delete this.cache[key];
    this.redis.set(key, value);
  }
}
</code></pre><p><strong>æ¥å£ç­–ç•¥å®ç°</strong></p><pre><code class="language-js">class CachedStorage {
  constructor({ cache, backend }) {
    this.cache = cache;
    this.backend = backend;
  }
  get(key) {
    let val = this.cache.get(key);
    if (!val) {
      val = this.backend.get(key);
      if (val) {
        this.cache.set(key, val);
      }
    }
    return val;
  }
  set(key, val) {
    this.cache.set(key, null);
    this.backend.set(key, val);
  }
}

class MemoryStorage {
  constructor() {
    this.data = {};
  }
  get(key) {
    return this.data[key];
  }
  set(key, val) {
    this.data[key] = val;
  }
}

class RedisStorage {
  constructor({ url, host }) {
    this.redis = new Redis({ url, port });
  }
  get(key) {
    return this.redis.get(key);
  }
  set(key, val) {
    this.redis.set(key, val);
  }
}
</code></pre><p>å½“ä»£ç å’Œç­–ç•¥è¾ƒå°‘çš„æ—¶å€™ï¼Œå¯èƒ½ç›´æ¥å®ç°æ˜¯æ›´ç®€å•çš„ï¼Œä½†å½“ç­–ç•¥é€æ¸å¢å¤šï¼Œä¸šåŠ¡é€»è¾‘è¶ŠåŠ å¤æ‚çš„æ—¶å€™ï¼Œå†™åœ¨å•ä¸ªå®ç°ä¸­æ˜¯éå¸¸éš¾ä»¥ç»´æŠ¤çš„ï¼Œä¸€äº›ç®€å•çš„ä¾‹å­ï¼Œä¾‹å¦‚ åç«¯è®¿é—®éœ€è¦æ”¯æŒæŒ‰ key è¿›è¡Œåˆ†ç‰‡è®¿é—®ï¼Œæ”¯æŒä»å¦å¤–ä¸€ç§å­˜å‚¨åŠ è½½æ•°æ®ã€‚</p><p>ç­–ç•¥å¯ä»¥å¾ˆçµæ´»ï¼Œä¸”ä¸å¯é¢„çŸ¥çš„ï¼Œå› æ­¤éœ€è¦å®ç°è¿™æ ·çš„ç­–ç•¥ç®¡ç†ç›´æ¥ç¡¬ç¼–ç çš„æ–¹å¼æ˜¯ä¸å¯è¡Œçš„ã€‚</p><h2>åŸºäº JSON çš„åŠ¨æ€ç­–ç•¥é…ç½®</h2><p>æ¯ä¸ªç­–ç•¥éƒ½æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¥å£å®ç°ï¼Œä¸€ä¸ªç­–ç•¥çš„å®ç°å¯èƒ½ä¾èµ–å…¶å®ƒç­–ç•¥ï¼Œè¿™æ ·çš„ç»“æ„æ˜¯ä¸€ä¸ªæ ‘å½¢çš„ï¼Œé‚£ä¹ˆé…ç½®ä¹Ÿæ˜¯ä¸€ä¸ªæ ‘å½¢çš„ç»“æ„ï¼Œä¾‹å¦‚</p><pre><code class="language-json">{
  &quot;type&quot;: &quot;cached&quot;,
  &quot;cache&quot;: {
    &quot;type&quot;: &quot;memory&quot;
  },
  &quot;backend&quot;: {
    &quot;type&quot;: &quot;redis&quot;,
    &quot;port&quot;: 6379,
    &quot;host&quot;: &quot;127.0.0.1&quot;
  }
}
</code></pre><p>æ•´ä½“ç»“æ„ä¸ç­–ç•¥çš„ç»„æˆä¸€è‡´ï¼Œä»é…ç½®è§’åº¦æ¥è¯´ï¼Œéå¸¸ç›´è§‚ä¾¿äºç†è§£ã€‚ä½†å®é™…ä½¿ç”¨æ—¶éœ€è¦è¿›è¡Œè§£æå¤„ç†å¹¶æ˜ å°„ä¸ºå…·ä½“çš„ç­–ç•¥å®ç°ã€‚</p><p>åœ¨ç°æœ‰çš„ Java JSON è§£æåº“ä¸­ï¼ŒJackson åŠŸèƒ½æœ€ä¸ºä¸°å¯Œï¼Œè¦å®ç°è¿™æ ·çš„ç­–ç•¥é…ç½®æœ‰ä¸‰ç§æ–¹å¼</p><ol><li>JSON -&gt; é…ç½®å¯¹è±¡ -&gt; å®ç°<ul><li>ä½•æ—¶é€‰ç”¨ï¼šå®ç°å¤æ‚ï¼Œæœ‰è¾ƒå¤šè¿è¡ŒçŠ¶æ€</li><li>éœ€è¦é¢å¤–çš„ä¸€æ¬¡å®ç°æ˜ å°„</li><li>åºåˆ—åŒ–ååºåˆ—åŒ–ç®€å•</li></ul></li><li>JSON -&gt; å®ç°<ul><li>ä½•æ—¶é€‰ç”¨ï¼šå®ç°ç®€å•ï¼Œè¿è¡ŒçŠ¶æ€å¯æ§</li><li>éœ€è¦é¢å¤–æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–</li><li>çŠ¶æ€å­—æ®µéœ€è¦æ³¨æ„ä¸è¦è¢«åºåˆ—åŒ– - <code>@JsonIgnore</code> æˆ– transient</li></ul></li><li>JSON-&gt;æŠ½è±¡é…ç½®å¯¹è±¡-&gt;æŠ½è±¡å®ç°-&gt;å®é™…é…ç½®å¯¹è±¡-&gt;å®é™…å®ç°<ul><li>ä½•æ—¶é€‰ç”¨ï¼šå®ç°å¤æ‚ä¸”æœ‰ç»§æ‰¿å…³ç³»ï¼Œæ¯ä¸€å±‚å®ç°å¤æ‚å¤„ç†ä¸åŒçš„é…ç½®</li><li>éœ€è¦åŸºäºé…ç½®å¯¹è±¡ï¼Œé…ç½®å¯¹è±¡æœ‰ç»§æ‰¿å…³ç³»</li><li>é…ç½®å¯¹è±¡èƒ½æŒæœ‰ä»»æ„é…ç½®å†…å®¹ï¼Œä¸åŒé…ç½®å¯¹è±¡å¯åœ¨ä¸ä¸¢å¤±æ•°æ®çš„å‰æä¸‹äº’ç›¸è½¬æ¢</li></ul></li></ol><h3>é…ç½®è¿‡ç¨‹</h3><p>ä»¥ä¸‹ä»£ç æ¼”ç¤ºäº†ä½¿ç”¨é…ç½®å¯¹è±¡æ¥å®ç°é…ç½®çš„æŠ½è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–</p><pre><code class="language-java">public class ConfigObjectDemo {
    @Test
    public void test() throws IOException {
        ObjectMapper mapper = new ObjectMapper();

        String config = &quot;{\&quot;type\&quot;:\&quot;cached\&quot;,\&quot;cache\&quot;:{\&quot;type\&quot;:\&quot;memory\&quot;},\&quot;backend\&quot;:{\&quot;type\&quot;:\&quot;redis\&quot;,\&quot;port\&quot;:6379,\&quot;host\&quot;:\&quot;127.0.0.1\&quot;}}&quot;;
        StorageConfig storageConfig = mapper.readValue(config, StorageConfig.class);
        // è¾“å‡º CachedStorageConfig(cache=MemoryConfig(), backend=RedisConfig(host=127.0.0.1, port=6379))
        System.out.println(storageConfig);
        // è¾“å‡º {&quot;type&quot;:&quot;cached&quot;,&quot;cache&quot;:{&quot;type&quot;:&quot;memory&quot;},&quot;backend&quot;:{&quot;type&quot;:&quot;redis&quot;,&quot;host&quot;:&quot;127.0.0.1&quot;,&quot;port&quot;:6379}}
        System.out.println(mapper.writeValueAsString(storageConfig));
    }
}

@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, property = &quot;type&quot;)
@JsonSubTypes({
        @JsonSubTypes.Type(value = CachedStorageConfig.class, name = &quot;cached&quot;),
        @JsonSubTypes.Type(value = MemoryConfig.class, name = &quot;memory&quot;),
        @JsonSubTypes.Type(value = RedisConfig.class, name = &quot;redis&quot;)
})
@JsonInclude(JsonInclude.Include.NON_EMPTY)
@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY, getterVisibility = JsonAutoDetect.Visibility.NONE)
interface StorageConfig{ String getType();}

@Data
class CachedStorageConfig implements StorageConfig{
    private StorageConfig cache;private StorageConfig backend;
    @Override public String getType() { return &quot;cached&quot;; }
}
@Data
class MemoryConfig implements StorageConfig{ @Override public String getType() { return &quot;memory&quot;; }}
@Data
class RedisConfig implements StorageConfig{
    private String host; private int port;
    @Override public String getType() { return &quot;redis&quot;; }
}
</code></pre><p>åœ¨è¿™é‡Œçœ‹åˆ°æ¯”è¾ƒå¤æ‚çš„æ³¨è§£æ˜¯ <code>@JsonSubTypes</code>ï¼Œè¯¥æ³¨è§£é…ç½®äº†ç±»å‹ä¸å®é™…å®ç°çš„æ˜ å°„å…³ç³»ï¼Œè€Œ <code>@JsonTypeInfo</code> é…ç½®äº†é‚£ä¸ªå­—æ®µä½œä¸ºç±»å‹ä¿¡æ¯å­—æ®µã€‚é€šè¿‡æ³¨è§£çš„æ–¹å¼é…ç½®ä¸å¤ªçµæ´»ï¼Œå¯èƒ½æœ‰æ—¶å€™ä¼šå¿½ç•¥é…ç½®æˆ–é…ç½®é”™è¯¯ï¼Œä¸”ä¸èƒ½åŠ¨æ€å¢åŠ ã€‚</p><p>è§£å†³é…ç½®æ¯”è¾ƒé—®é¢˜ä¹Ÿæœ‰ä¸¤ç§åŠæ³•ï¼Œç¬¬ä¸€ç§åŠæ³•æ˜¯ä¿ç•™ <code>@JsonTypeInfo</code> æ³¨è§£ï¼Œç„¶åæ‰‹åŠ¨è¿›è¡Œæ˜ å°„å…³ç³»çš„é…ç½®ï¼Œä¾‹å¦‚</p><pre><code class="language-java">ObjectMapper mapper = new ObjectMapper();
mapper.registerSubtypes(new NamedType(CachedStorageConfig.class,&quot;cached&quot;));
mapper.registerSubtypes(new NamedType(MemoryConfig.class,&quot;memory&quot;));
mapper.registerSubtypes(new NamedType(RedisConfig.class,&quot;redis&quot;));
</code></pre><p>ç»“æœä¸é€šè¿‡æ³¨è§£çš„æ–¹å¼é…ç½®æ˜¯ç›¸åŒçš„ï¼Œè¿™æ ·å°±å¯ä»¥åŠ¨æ€é…ç½®äº†ã€‚å¦‚æœè¿ <code>@JsonTypeInfo</code> ä¹Ÿä¸æƒ³è¦ï¼Œå¸Œæœ›é€šè¿‡ä»£ç å®Œå…¨åŠ¨æ€æ·»åŠ ï¼Œè¿™æ ·çš„è¿‡ç¨‹ä¼šæ¯”è¾ƒå¤æ‚ã€‚æœ€ç»ˆçš„ç»“æœç±»ä¼¼äº</p><pre><code class="language-java">// æ³¨å†Œä¸€ä¸ªåŠ¨æ€ç±»å‹ï¼Œä¸”è¯´æ˜å¦‚ä½•è·å–åˆ°ç±»å‹
MyJson.registerDynamicType(StorageConfig.class, StorageConfig::getType);
MyJson.registerDynamicSubtypes(StorageConfig.class, new NamedType(CachedStorageConfig.class, &quot;cached&quot;));
MyJson.registerDynamicSubtypes(StorageConfig.class, new NamedType(MemoryConfig.class, &quot;memory&quot;));
MyJson.registerDynamicSubtypes(StorageConfig.class, new NamedType(RedisConfig.class, &quot;redis&quot;));
</code></pre><p><code>registerDynamicType</code> å’Œ <code>registerDynamicSubtypes</code> çš„å®ç°å¯å‚è€ƒ<a href="https://github.com/wenerme/wava/blob/a216dfe8e92fe4822c9659949fbe862b9419eef4/wava-common/src/main/java/me/wener/wava/util/JSON.java#L114">è¿™é‡Œ</a>ã€‚</p><p>è‡³æ­¤ä¾¿å®Œæˆäº†æ‰€æœ‰çš„åŠ¨æ€é…ç½®ï¼Œååºåˆ—åŒ–ä¸ºé…ç½®å¯¹è±¡å’Œå®ç°æ²¡æœ‰ç‰¹åˆ«å¤§çš„åŒºåˆ«ï¼Œåªéœ€è¦æ§åˆ¶å¥½å­—æ®µå¯è§æ€§å³å¯ã€‚</p><p>ä½¿ç”¨æŠ½è±¡é…ç½®ï¼Œåˆ™éœ€è¦èƒ½å¤Ÿè®°å½•å®Œæ•´çš„ä¿¡æ¯ï¼Œä»æŠ½è±¡é…ç½®è½¬æ¢ä¸ºå®é™…é…ç½®æ—¶ä¸èƒ½ä¸¢é…ç½®å†…å®¹ï¼Œä½¿ç”¨ Jacksonï¼Œå¯ä½¿ç”¨ <code>@JsonAnyGetter</code> å’Œ <code>@JsonAnySetter</code> å®ç°ï¼Œå› ä¸ºæˆ‘ä¼šå®šä¹‰ä¸€ä¸ªç±»ä¼¼å¦‚ä¸‹çš„åŸºç¡€ç±»</p><pre><code class="language-java">public class PropertyObject {
    @JsonIgnore @Setter private Map&lt;String, Object&gt; properties;

    @JsonAnyGetter public Map&lt;String, Object&gt; getProperties() { return properties; }
    @JsonAnySetter
    public Object set(String name, Object value) {
        if (properties == null) { properties = Maps.newHashMap(); }
        return properties.put(name, value);
    }
}
</code></pre><p>å®Œæ•´å®šä¹‰å‚è€ƒ <a href="https://github.com/wenerme/wava/blob/a216dfe8e92fe4822c9659949fbe862b9419eef4/wava-common/src/main/java/me/wener/wava/model/PropertyObject.java">PropertyObject</a>ã€‚</p><p>å¯¹é…ç½®çš„å¤„ç†åˆ™å¯ä»¥ä½¿ç”¨ç±»ä¼¼è´£ä»»é“¾çš„æ–¹å¼ï¼Œå¦‚æœå®ç°å¯¹é…ç½®æ„Ÿå…´è¶£ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºè‡ªå·±æ„Ÿå…´è¶£çš„é…ç½®å¯¹è±¡ï¼Œè¿™æ ·ä¹Ÿä¾¿äºæ·»åŠ æ³¨è§£è¿›è¡Œæ ¡éªŒå’ŒéªŒè¯ã€‚</p><blockquote><p>å®ç°è¿‡ç¨‹</p><p>é…ç½®çš„æ­£ç¡®å¤„ç†å’Œæ ¡éªŒä½¿å¾—å®ç°è¿‡ç¨‹ç›¸å¯¹ç®€å•ï¼Œç›¸å½“äºç¡®å®šäº†ç¨‹åºçš„æ‰€æœ‰å…¥å‚ï¼Œå®ç°ä¾¿ä¸åœ¨æ­¤èµ˜è¿°ã€‚</p></blockquote><h2>ç­–ç•¥æ‰©å±•</h2><p>æ¯ä¸€ç§ç­–ç•¥å®é™…å¯¹åº”çš„éƒ½æ˜¯ä¸€éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆ <code>1+1</code> å’Œ <code>1-1</code> ä¹Ÿæ˜¯å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸¤ç§ç­–ç•¥ï¼Œåœ¨<a href="https://wener.me/story/get-started-with-dsl/">ä» 0 åˆ° 1 å®ç°è‡ªå®šä¹‰è¯­è¨€</a>ä¸­æœ‰æåˆ°ï¼Œè¯­è¨€è¢«è§£æåä¼šç”Ÿæˆè¯­æ³•æ ‘ï¼Œè€Œè¯­æ³•æ ‘ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§æ ‘å½¢çš„ç­–ç•¥é€»è¾‘ã€‚è¡¨è¾¾å¼ä¸­çš„é€šç”¨èŠ‚ç‚¹ä¸€èˆ¬å«åš Expressionï¼Œè€Œæ¯ä¸ª Expression éƒ½å¯ä»¥è®¡ç®—å‡ºæ¥ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼å¯ä»¥éšå«åœ¨å…¶å®ƒçš„ä¸€ä¸ª Expression ä¸­ï¼Œä¾‹å¦‚ 1+1 å¯ä»¥è¡¨ç¤ºä¸º</p><pre><code class="language-json">{
  &quot;type&quot;: &quot;BinaryOperation&quot;,
  &quot;operator&quot;: &quot;ADD&quot;,
  &quot;left&quot;: { &quot;type&quot;: &quot;Literal&quot;, &quot;value&quot;: 1 },
  &quot;right&quot;: { &quot;type&quot;: &quot;Literal&quot;, &quot;value&quot;: 1 }
}
</code></pre><p>è€Œ 1+1+1 åˆ™è¡¨ç¤ºä¸º</p><pre><code class="language-json">{
  &quot;type&quot;: &quot;BinaryOperation&quot;,
  &quot;operator&quot;: &quot;ADD&quot;,
  &quot;left&quot;: { &quot;type&quot;: &quot;Literal&quot;, &quot;value&quot;: 1 },
  &quot;right&quot;: {
    &quot;type&quot;: &quot;BinaryOperation&quot;,
    &quot;operator&quot;: &quot;ADD&quot;,
    &quot;left&quot;: { &quot;type&quot;: &quot;Literal&quot;, &quot;value&quot;: 1 },
    &quot;right&quot;: { &quot;type&quot;: &quot;Literal&quot;, &quot;value&quot;: 1 }
  }
}
</code></pre><p>å…¶åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹‹å‰è®¨è®ºçš„é…ç½®æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚å¾ˆå¤šçš„ä¸šåŠ¡é€»è¾‘æœ¬èº«ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æ¥è¡¨è¿°çš„ï¼Œè€Œä½¿ç”¨è¡¨è¾¾å¼åˆ™èƒ½æ˜¯çš„åœºæ™¯é…ç½®æ›´ä¸ºçµæ´»ã€‚</p><h2>å®é™…åº”ç”¨</h2><p>ä»¥ä¸‹åˆ—ä¸¾åœ¨å®ä¾‹å¼€å‘ä¸­ä½¿ç”¨åˆ°çš„åœºæ™¯ï¼Œä¸‰ç§åœºæ™¯å„ä¸ç›¸åŒã€‚</p><h3>å¥¥æ ¼å­˜å‚¨</h3><p>åœ¨ å¥¥æ ¼äººç¾¤äºŒæ–¹åŒ…å¼€å‘æ€»ç»“ ä¸­æœ‰æåˆ°åº•å±‚å­˜å‚¨çš„å¤æ‚æ€§</p><p><em>å›¾ç‰‡ç¼ºå¤±</em></p><p>è¯¥é…ç½®çš„å®ç°ä¾¿æ˜¯åŸºäºè¿™æ ·çš„é…ç½®é€»è¾‘å®ç°çš„ã€‚åˆ†åˆ«å¯¹åº”æ¥å£</p><ul><li>CrowdStorage</li><li>CrowdStore</li></ul><p>å¦‚æœé›†æˆäº†å¥¥æ ¼äºŒæ–¹åŒ… æ˜¯çœ‹å¾—åˆ°ç›¸åº”å®ç°çš„ã€‚</p><p>ä½¿ç”¨çš„æ˜¯ JSON ç›´æ¥ååºåˆ—åŒ–ä¸ºå®ç°çš„æ–¹å¼ã€‚</p><h3>ä»»åŠ¡è°ƒåº¦</h3><p>å¥¥æ ¼çš„æ¸ é“ç®¡ç†åº•å±‚å®ç°æ˜¯ä¸€å¥—ç›¸å¯¹é€šç”¨çš„ï¼Œåœ¨æ€»ç»“ä¸­æåˆ°å¤šå±‚çº§çš„æ”¯æŒä¾¿æ˜¯é€šè¿‡æŠ½è±¡é…ç½®å®ç°</p><ul><li>ä»»åŠ¡è°ƒåº¦æ”¯æŒ
<em> æ¸ é“æŠ•æ”¾
</em> æ¸ é“æ”¯æŒ - çŸ­ä¿¡ã€å¤–å‘¼ã€é‚®ä»¶/SMTP
<em> æ•°æ®æºæ”¯æŒ - æ¥å£ã€äººç¾¤ã€ODPS
</em> è°ƒåº¦æ”¯æŒ - å•æ¬¡ã€å‘¨æœŸã€æ‰‹åŠ¨</li></ul><p>é…ç½®å¯¹è±¡ç±»å›¾å¦‚ä¸‹</p><p><em>å›¾ç‰‡ç¼ºå¤±</em></p><h3>çŠ¶æ€äººç¾¤è¡¨è¾¾å¼</h3><p>å¥¥æ ¼äºŒæ–¹åŒ…ç°æœ‰è¡¨è¾¾å¼å¤„ç†èƒ½åŠ›ï¼Œä½†åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­è¯¥åŠŸèƒ½ä¼šè¢«å¢å¼ºï¼Œå°†ä¸åœ¨å®¢æˆ·ç«¯è§£æç¼–è¯‘ï¼Œè€Œæ˜¯åœ¨æœåŠ¡ç«¯å¤„ç†åä¸‹å‘è¯­æ³•æ ‘ï¼Œä¸‹å‘çš„è¯­æ³•æ ‘å…¶å®å°±æ˜¯ä¸€ä¸ªç­–ç•¥é…ç½®ï¼Œè¡¨è¾¾å¼çš„ç±»å›¾å¦‚ä¸‹</p><p><em>å›¾ç‰‡ç¼ºå¤±</em></p><h2>æ€»ç»“</h2><p>ç†Ÿç»ƒçš„æŒæ¡å’Œä½¿ç”¨å„ç§åœºæ™¯ä¸‹çš„é…ç½®å¯ä»¥å‡å°‘å¤§é‡çš„ä¸å¿…è¦çš„å¤„ç†é€»è¾‘ï¼Œä¸”èƒ½å‡å°‘ä¸å°‘çš„ BUGï¼Œä¸€äº› Bad Smell ä¾‹å¦‚ <code>JSON.parse(jsonString).get(&quot;someThing&quot;).asLong()</code> æ˜¯åº”è¯¥è¢«é¿å…çš„ï¼Œå› ä¸ºæ²¡æœ‰äººèƒ½çŸ¥é“è¿™æ˜¯åœ¨åšä»€ä¹ˆï¼Œä¹Ÿä¸çŸ¥é“é‡Œé¢éƒ½æœ‰ä»€ä¹ˆï¼Œåƒæ˜¯ä¸€ä¸ªé»‘ç›’ã€‚å¼€å‘æ—¶å¾€å¾€ä¸šåŠ¡é€»è¾‘æ˜¯ç›¸å¯¹ç®€å•çš„ï¼Œä½†æ˜¯ç¡®ä¿æ‹¿åˆ°æ­£ç¡®çš„é…ç½®å¾ˆéš¾ï¼Œé¢å‘å¤±è´¥è®¾è®¡ï¼Œå¼€é—­åŸåˆ™ï¼Œæœ‰é—®é¢˜çš„åœ°æ–¹å¿…ç„¶ä¼šå‡ºé—®é¢˜ï¼Œå¾€å¾€æˆ‘ä»¬ç”¨æ¥æ ¡éªŒæ˜¯å¦æ­£ç¡®çš„ä»£ç æ¯”å®é™…çš„ä»£ç è¿˜è¦å¤šï¼Œå½“é‡åˆ°è¿™æ ·é—®é¢˜çš„æ—¶å€™ï¼Œæ€è€ƒæ˜¯å¦æœ‰æ›´å¥½çš„æ–¹å¼æ¥åšè¿™äº›äº‹æƒ…ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello CGO]]></title>
        <id>hello-cgo</id>
        <link href="https://wener.me/story/hello-cgo"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[Tips]]></summary>
        <content type="html"><![CDATA[<h2>Tips</h2><ul><li><a href="https://gist.github.com/zchee/b9c99695463d8902cd33">ç±»å‹è½¬æ¢</a></li></ul><h2>åˆè¯•</h2><pre><code class="language-bash"># ç”Ÿæˆ libdemo.so libdemo.h
go build -buildmode=c-shared -o libdemo.so ./demo.go
# ç¼–è¯‘ main
go build main.go
./main

# macos - æŸ¥çœ‹å†…å®¹
nm libdemo.so | grep hello -i
# linux
nm libdemo.so
# windows
dumpbin /EXPORTS libdemo.dll

# windows äº¤å‰ç¼–è¯‘ - éœ€è¦å®‰è£… mingw
brew install mingw-w64

# 32 ä½ äº¤å‰ç¼–è¯‘
GOOS=windows GOARCH=386 CGO_ENABLED=1 CC=i686-w64-mingw32-gcc go build -buildmode=c-shared -o libdemo.dll ./demo.go
GOOS=windows GOARCH=386 CGO_ENABLED=1 CC=i686-w64-mingw32-gcc go build main.go

# macos wine ä¸æ”¯æŒ 32 ä½ - mingw ç‰ˆæœ¬ä½ä¸æ”¯æŒ 64 ä½
# mac ä¼šå‡ºç°å¼‚å¸¸ cc1: sorry, unimplemented: 64-bit mode not compiled in
# é€šè¿‡ docker ç¼–è¯‘
docker run --rm -v $HOME/go:/root/go -v $PWD:/host -w /host wener/go:win sh

GOOS=windows GOARCH=amd64 CGO_ENABLED=1 CC=x86_64-w64-mingw32-gcc go build -buildmode=c-shared -o libdemo.dll ./demo.go
GOOS=windows GOARCH=amd64 CGO_ENABLED=1 CC=x86_64-w64-mingw32-gcc go build main.go

# å›åˆ° mac ä½¿ç”¨ wine æ‰§è¡Œ
# wine æ— æ³•åœ¨ macos ä¸Šç¼–è¯‘å®‰è£… - ç³»ç»Ÿç‰ˆæœ¬é—®é¢˜ - éœ€è¦ä½¿ç”¨ cask å®‰è£…
brew cask install wine-stable
wine64 main.exe

# wine 4.0 åˆå§‹åŒ– dll å¤±è´¥
# 0010:fixme:winsock:set_dont_fragment IP_DONTFRAGMENT for IPv4 not supported in this platform
# 0009:err:module:attach_dlls &quot;libdemo.dll&quot; failed to initialize, aborting
# 0009:err:module:attach_dlls Initializing dlls for L&quot;Z:\\Users\\wener\\demo\\main.exe&quot; failed, status c0000005
</code></pre><p><strong>demo.go</strong></p><pre><code class="language-go">package main

import &quot;C&quot;

//export Version
func Version() int32 {
    return 123
}

//export Hello
func Hello(name *C.char) *C.char {
    return C.CString(&quot;Hello &quot;+C.GoString(name)+&quot;!&quot;)
}

func main() {}
</code></pre><p><strong>main.go</strong></p><pre><code class="language-go">package main

import &quot;fmt&quot;

/*
#cgo CFLAGS: -I.
#cgo LDFLAGS: -L. -ldemo
#include &quot;libdemo.h&quot;
*/
import &quot;C&quot;

func main() {
    fmt.Printf(&quot;Int %v String %v\n&quot;,C.Version(), C.GoString(C.Hello(C.CString(&quot;Wener&quot;))))
}
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸€å‘¨ K3S å­¦ä¹ å¿ƒå¾—]]></title>
        <id>k3s-one-week</id>
        <link href="https://wener.me/story/k3s-one-week"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[k3s-one-week]]></summary>
        <content type="html"><![CDATA[<p><img src="./k3s-one-week.png" alt="k3s-one-week"/></p><blockquote><p>K3S is five times eaiser than K8S ğŸ˜Š</p></blockquote><h2>ä¸€ç‚¹ç‚¹å†å²</h2><p>åˆšå¼€å§‹äº†è§£ K8S æ˜¯å¤§çº¦ 1.4 ç‰ˆæœ¬ Beta æ—¶ï¼ˆ2016ï¼‰ï¼Œ<a href="http://kubernetes.io/docs/getting-started-guides/kubeadm/">kubeadm</a> åˆšå¼€å§‹æœ‰ä¸€å®šé›å½¢ï¼ŒK8S æ‰å¼€å§‹åœ¨ä¸€èˆ¬å¤§ä¼—é¢å‰å±•éœ²å¤´è§’ã€‚</p><p>å½“æ—¶çš„ Docker ç¼–æ’å·¥å…·ç®—æ˜¯ç™¾èŠ±é½æ”¾ï¼Œä½†å½“æ—¶å¦‚æœæƒ³è¦ç©å¥½ K8S æ˜¯ç›¸å½“éš¾çš„ï¼Œå› ä¸º K8S è°·æ­Œç‰µå¤´å¼€å‘ï¼Œæ‰€æœ‰é•œåƒéƒ½åœ¨ gcr ä¸Šï¼Œé—¨æ§›å·²ç»ç®—æ¯”è¾ƒé«˜äº†ã€‚è€Œä¸”éƒ¨ç½²ç”¨çš„å·¥å…·ä¹Ÿè¿˜ç›¸å½“ä¸æˆç†Ÿï¼Œæ²¡æœ‰ä¸“ä¸šçš„è¿ç»´éƒ¨ç½²éƒ½å¾ˆéš¾ï¼Œå†µä¸”è¿˜éœ€è¦ä¸“äººç»´æŠ¤ã€‚</p><p>è€Œä»Šå¤©ï¼Œ2020ï¼ŒK8S å·²ç»æœ‰å¾ˆå¤šå‘è¡Œç‰ˆäº†ï¼Œå¤§å¤šç¼–æ’å¹³å°åº•å±‚å¦‚æœä¸æ˜¯åŸºäº K8S é‚£ä¹Ÿæ˜¯æ”¯æŒ K8Sã€‚Rancher 1.0 è½¬å‹åˆ° 2.0 æ—¶æŠ›å¼ƒäº†ä¹‹å‰çš„æ¨¡å¼ï¼Œé€‰æ‹©äº†åŸºäº K8Sï¼ŒRancher å®šä½ä¸ºé›†ç¾¤ç®¡ç†ã€‚</p><p>å› æ­¤ Rancher ä¹‹ä¸‹è¯ç”Ÿäº†å¾ˆå¤šè¾…åŠ©äº K8S å¹³å°çš„å·¥å…·å’Œå‘¨è¾¹ï¼ŒK3S ä¹Ÿç®—æ˜¯æ ¸å¿ƒä¹‹ä¸€ã€‚</p><p>åœ¨è¿™ä¹‹å‰å¯¹äº K8S ä»…é™äºäº†è§£ï¼Œè€Œç°åœ¨åˆ™æ˜¯éœ€è¦è€ƒè™‘ä½¿ç”¨äº†ï¼Œå› æ­¤å¼€å§‹é‡æ–°å­¦ä¹ ã€‚</p><h2>å…³äº K3S</h2><p>K3S å¤§å¤§é™ä½äº† K8S çš„é—¨æ§›ï¼Œä¸»è¦åœ¨äº</p><ul><li>å•æœºå¯å¯åŠ¨</li><li>Docker å¯å¯åŠ¨</li><li>ä¸å†ä¾èµ– etcd</li></ul><p>å¦‚æœç”¨ä¸åˆ°é›†ç¾¤ï¼ŒK3S+Dashboard ç”¨æ¥åšå•æœºçš„ Docker ç•Œé¢éƒ½æ˜¯éå¸¸åˆé€‚çš„ã€‚</p><h2>å­¦ä¹ è¿‡ç¨‹æ€»ç»“</h2><h3>ç†è§£ K3S</h3><p>Kubernates çš„æ ¸å¿ƒæ˜¯ä¾èµ– ETCD ä½œä¸ºæ ¸å¿ƒçŠ¶æ€å­˜å‚¨ï¼Œå°±å¥½æ¯” Hadoop æ ¸å¿ƒä¾èµ– Zookeeper ä¸€æ ·ï¼Œè€Œ K3S ä»¥ Adapter <a href="https://github.com/rancher/kine">kine</a> æ›¿ä»£äº†å¯¹ etcd çš„ä¾èµ–ï¼Œæš´éœ² etcd èƒ½åŠ›ï¼Œä½†åç«¯å­˜å‚¨è¢«é€‚é…åˆ°</p><ul><li>SQLite</li><li>DQLite</li><li>MySQL</li><li>Postgres</li></ul><p>åœ¨éƒ¨ç½²é›†ç¾¤ K3S æ—¶å€™åªè¦é€‰æ‹©çš„å­˜å‚¨æ˜¯ç½‘ç»œæ•°æ®åº“å­˜å‚¨æˆ–è€…å†…åµŒçš„ DQLite å³å¯ã€‚</p><p>K3S æ˜¯å•ç‹¬çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°†æ‰€éœ€çš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½æ‰“åŒ…åˆ°äº†å†…éƒ¨</p><ul><li>k3s server - ä¸»èŠ‚ç‚¹å®ˆæŠ¤è¿›ç¨‹</li><li>k3s agent - ä»èŠ‚ç‚¹å®ˆæŠ¤è¿›ç¨‹</li><li>kubectl - ä¸ k8s çš„äº¤äº’å·¥å…·</li><li>crictl - containerd è°ƒè¯•å·¥å…·</li></ul><p>åœ¨å¯åŠ¨ k3s çš„ server æˆ– agent æ—¶ä¼šé€šè¿‡å®¹å™¨ï¼ˆdocker æˆ–è€… containerdï¼‰å¯åŠ¨ K8S çš„æ ¸å¿ƒæœåŠ¡ï¼ˆä¾‹å¦‚ apiserverï¼‰ã€‚ä½¿å¾—åœ¨éƒ¨ç½² K3S æ—¶å¼‚å¸¸ç®€å•ï¼Œæ‰€æœ‰ä¾èµ–éƒ½åœ¨ä¸€ä¸ªäºŒè¿›åˆ¶ï¼Œä¹Ÿå› ä¸ºè¿™æ ·ï¼Œæ”¯æŒ arm ä¹Ÿåªéœ€è¦å†æ¬¡è¿›è¡Œç¼–è¯‘å•ä¸ªçš„å¯æ‰§è¡Œæ–‡ä»¶å³å¯ï¼ˆå½“ç„¶ä¹Ÿè¦æœ‰å®¹å™¨é•œåƒæ˜¯æ”¯æŒå¯¹åº”æ¶æ„çš„ï¼‰ã€‚</p><p>ä¸ä»…æ˜¯ç®€åŒ–äº†éƒ¨ç½²å’Œé›†ç¾¤ä¸€è‡´æ€§çš„ä¾èµ–ï¼ŒK3S é’ˆå¯¹éƒ¨åˆ†æ ¸å¿ƒæœåŠ¡æœ‰é»˜è®¤é…ç½®ï¼Œå¹¶ä¸”æä¾›äº†éƒ¨åˆ†æ ¸å¿ƒæœåŠ¡çš„å®ç°</p><ul><li>servicelb - <a href="https://github.com/rancher/klipper-lb">rancher/klipper-lb</a><ul><li>æä¾›æœ€ç®€åŒ–çš„ lb å®ç° - é€‰æ‹©å¼€æ”¾ç«¯å£</li></ul></li><li>traefik<ul><li>æä¾› Ingress å’Œ LB</li></ul></li><li><a href="https://github.com/kubernetes-sigs/metrics-server">metric-server</a></li><li>cloud manager - K8S èƒ½è·å–åˆ°èŠ‚ç‚¹ä¿¡æ¯</li><li>corndns</li></ul><p>K3S server/agent ç›¸å½“äºæ˜¯ kubeadm + éƒ¨åˆ†æ§åˆ¶å™¨å®ç°ã€‚</p><h3>éƒ¨ç½² K3S</h3><p>å®˜æ–¹ç»™çš„éƒ¨ç½²å°±ä¸€è¡Œå‘½ä»¤</p><pre><code class="language-bash">curl -sfL https://get.k3s.io | sh -
</code></pre><p>æ‹‰å–è„šæœ¬å¹¶æ‰§è¡Œï¼Œä½†åˆæ¬¡ä½¿ç”¨ï¼Œè¿˜æ˜¯å»ºè®®è‡ªè¡Œæ‰‹åŠ¨éƒ¨ç½²ï¼Œè„šæœ¬ç®€å•æ˜äº†ï¼Œé˜…è¯»åå°±çŸ¥é“<a href="https://wener.me/notes/devops/kubernetes/k3s#getk3sio">åšäº†ä»€ä¹ˆ</a>ã€‚</p><p>å¦‚æœå¯¹äºå¤§æ‰¹é‡éƒ¨ç½²ï¼Œå»ºè®®æå‰ä¸‹è½½ k3s ç„¶åä¸Šä¼ å¯åŠ¨å³å¯ã€‚</p><h3>éƒ¨ç½²é€‰æ‹©</h3><p>K8S æ˜¯åˆ†å¸ƒå¼çš„ å®¹å™¨ ç¼–æ’å·¥å…·ï¼Œæ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯å›´ç»•è¿™ä¸ªæ ¸å¿ƒæ¥å±•å¼€çš„ï¼Œå› ä¸ºåˆ†å¸ƒå¼ï¼Œé‚£ä¹Ÿå¿…ç„¶é¢å¯¹ç€æ‰€æœ‰åˆ†å¸ƒå¼å¹³å°éƒ½ä¼šé¢ä¸´çš„é—®é¢˜ã€‚</p><p>é€šå¸¸çš„å•èŠ‚ç‚¹åº”ç”¨æˆ‘ä»¬è€ƒè™‘çš„æ˜¯</p><ul><li>CPU+å†…å­˜ - è®¡ç®— - åŸºç¡€èµ„æº</li><li>å¸¦å®½ - ç½‘ç»œ</li><li>ç£ç›˜ - å­˜å‚¨</li></ul><p>åœ¨éƒ¨ç½² Kubernates çš„æ—¶å€™æœ€å¼€å§‹ä¹Ÿæ˜¯è€ƒè™‘è¿™äº›é—®é¢˜ï¼ŒK3S çš„å•èŠ‚ç‚¹éƒ¨ç½²èƒ½å¤ŸæŠŠè¿™äº›é—®é¢˜çš„æ€è€ƒæ—¶é—´æ»åï¼Œä½†è¿˜æ˜¯éœ€è¦è§£å†³çš„ã€‚
å¹¶ä¸”éƒ¨ç½²çš„è¿‡ç¨‹å°±æ˜¯å„ç§é€‰æ‹©æƒè¡¡çš„é—®é¢˜ï¼Œå†ç»“åˆè‡ªèº«å®é™…ä½¿ç”¨æƒ…å†µå’Œèµ„æºç¡¬ä»¶æƒ…å†µè¿›è¡Œå†³ç­–ã€‚</p><ul><li>è®¡ç®—èµ„æº - é˜¿é‡Œäº‘ã€ç‰©ç†æœºã€è™šæ‹Ÿæœº</li><li>ç½‘ç»œ - å¦‚ä½•ç»„ç½‘<ul><li>è·¨ç½‘ç»œ</li><li>æ··åˆç½‘ç»œ</li></ul></li><li>å­˜å‚¨</li><li>å®¹å™¨è¿è¡Œç¯å¢ƒ - dockerã€containerd</li><li>cni<ul><li>flannel ç»„ç½‘æ–¹å¼ - wireguardã€host-gwã€vxlan</li><li>calico</li><li>wave</li><li>å…¶ä»–ã€‚ã€‚ã€‚</li></ul></li><li>servicelb - å†…å»ºã€metallb</li><li>ingress - traefik1ï¼ˆé»˜è®¤ï¼‰ã€traefik2ã€nginxã€haproxyã€envoyã€äº‘å¹³å°æä¾›</li><li>K3S å­˜å‚¨åç«¯ - Postgresã€MySQL</li></ul><p>ç›®å‰æœ‰çš„äººå‘˜ã€ç¡¬ä»¶èµ„æºã€å¹³å°ã€å·²æœ‰ç¯å¢ƒ</p><ul><li>äººå‘˜ - 1 ä¸ªäºº - æˆ‘</li><li>ç¡¬ä»¶<ul><li>1 æœåŠ¡å™¨ - 40 æ ¸ 250G</li><li>é˜¿é‡Œäº‘è‹¥å¹²</li><li>è…¾è®¯äº‘è‹¥å¹²</li><li>å°å‹ç‰©ç†æœºè‹¥å¹²</li><li>æ ‘è“æ´¾è‹¥å¹²</li></ul></li><li>å¹³å°<ul><li>AMD64ã€ARM64</li><li>é˜¿é‡Œäº‘ã€è…¾è®¯äº‘</li></ul></li><li>å·²æœ‰<ul><li>Tinc</li></ul></li></ul><p>åšäº†å¦‚ä¸‹çš„è§„åˆ’éƒ¨ç½²</p><ul><li>è®¡ç®—èµ„æº<ul><li>é˜¿é‡Œäº‘ - Bare Metal</li><li>æœåŠ¡å™¨å¼€è™šæ‹Ÿæœº - libvirt+qemu+kvm</li><li>ç‰©ç†æœºçœ‹æƒ…å†µå¼€å§‹è™šæ‹Ÿæœºæˆ–ç›´æ¥ä½¿ç”¨</li><li>æ ‘è“æ´¾ç›´æ¥å®‰è£…</li></ul></li><li>ç½‘ç»œ - flannel-host-gw + tinc + metallb<ul><li>ä¾‹å¦‚ 10.10.0.0/16ã€å…¶ä¸­ 10.10.0.0/18 é¢„ç•™ä¸ºå®¿ä¸»æœºã€10.10.64.0/18 é¢„ç•™ç»™ metallb åˆ†é…</li></ul></li><li>å­˜å‚¨ - zfs+longhorn<ul><li>é€‰å–éƒ¨åˆ†èŠ‚ç‚¹</li></ul></li><li>å®¹å™¨è¿è¡Œç¯å¢ƒ - docker</li><li>servicelb - metallb</li><li>ingress - traefik2<ul><li>é˜¿é‡Œäº‘èŠ‚ç‚¹ä½œä¸ºå¯¹å¤–å…¥å£</li></ul></li><li>K3S å­˜å‚¨åç«¯ - é˜¿é‡Œäº‘ Postgres</li></ul><p>éƒ¨ç½²å®Œæˆååªæ˜¯ç¬¬ä¸€æ­¥ï¼Œå¼€å§‹äº†è§£<a href="https://wener.me/notes/devops/kubernetes/k8s-glossary">å„ç§æ¦‚å¿µ</a>éƒ¨ç½²å„ç§æœåŠ¡é€‚é…å„ç§åœºæ™¯æ‰æ˜¯æ›´é‡è¦çš„ã€‚</p><h2>æ˜¯å¦åº”è¯¥é€‰æ‹© K3S</h2><p>å¦‚æœä½ çŠ¹è±«ä½¿ç”¨ K3S è¿˜æ˜¯ä½¿ç”¨ K8S è¯·æ€è€ƒä»¥ä¸‹é—®é¢˜</p><ul><li>å…¬å¸åœ¨å¹³å°æŠ•å…¥å¤šå°‘ ï¼Ÿ</li><li>æœ‰å¤šå°‘ä¸“äººç»´æŠ¤ ï¼Ÿ<ul><li>K8S å»ºè®®è‡³å°‘ 3-5 äºº</li></ul></li><li>èŠ‚ç‚¹èµ„æºæ€§èƒ½å¦‚ä½• ï¼Ÿ<ul><li>K8S å»ºè®®è‡³å°‘ 8 æ ¸ 32G - å¦åˆ™åŸºç¡€æœåŠ¡å ç”¨èµ„æºä¸èƒ½è¢«å¹³æ‘Š</li></ul></li><li>æ˜¯å¦é€‰æ‹©æ‰˜ç®¡çš„ K8S ï¼Ÿ<ul><li>ä¸å­˜åœ¨ä½¿ç”¨ K3S</li></ul></li><li>æ··åˆäº‘ã€ç§æœ‰äº‘ã€å…¬æœ‰äº‘ ï¼Ÿ</li></ul><p>æˆ–è€…ç”¨æœ€ç®€å•çš„æ–¹å¼åˆ¤æ–­</p><ul><li>èŠ‚ç‚¹æ•° &lt;=50 é€‰æ‹© K3S<ul><li>ä¸€äººå·¥ä½œé‡</li></ul></li><li>50 &lt; èŠ‚ç‚¹æ•° &lt;= 150 é€‰æ‹© K3S æˆ– K8S</li><li>èŠ‚ç‚¹æ•°é‡ &gt; 150 é€‰æ‹© K8S<ul><li>æœ‰è¿™æ ·çš„è§„æ¨¡ï¼Œè¿ç»´å¿…ç„¶æ˜¯ä¸€ä¸ªå›¢é˜Ÿï¼Œå› æ­¤ä¸å­˜åœ¨ K8S å¤æ‚çš„é—®é¢˜</li></ul></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä½ å°±æ˜¯ä½ ]]></title>
        <id>cyw-without-w</id>
        <link href="https://wener.me/story/cyw-without-w"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[YUN]]></summary>
        <content type="html"><![CDATA[<p><img src="./yun-explained.png" alt="YUN"/></p><blockquote><p>CYW æ²¡æœ‰äº† æˆ‘(W) ä¾¿æ˜¯ ä½ (CY)</p><p>-- wener</p></blockquote><p>å¤©æ™´ä¸‹é›¨æ˜¯ä¸ªå¾ˆéš¾è¯´å¾—æ¸…æ¥šçš„ä¸œè¥¿ï¼Œä½†è•´å’Œæ¸©å…¶å®æ˜¯ä¸¤ä¸ªå­—ã€‚</p><p>å¯¹äºç¤¾ä¼šäººçš„ä¸ç†è§£ï¼Œä½ å¯ä»¥è®¤è¯†â€œè•´è—â€ï¼Œå¯ä»¥è®¤è¯†â€œæ¸©æš–â€ï¼Œä½†å½“å•ç‹¬çœ‹åˆ°è•´çš„æ—¶å€™ï¼Œä»–åº”è¯¥è¿˜æ˜¯è¯»ä½œ yÃ¹nã€‚</p><p>å¦ˆå¦ˆè¯´ï¼šâ€œä½ æ¬ æˆ‘çš„å¤ªå¤šï¼â€ï¼ˆä¸å¯å¦è®¤ï¼‰ğŸ¤·â€â™‚ï¸
å¦ˆå¦ˆè¿˜è¯´ï¼šâ€œåâ€˜æ¬ è‚–â€™å¥½äº†â€</p><p>ä½†ä½ è¿˜æ˜¯ä½ ï¼Œä¸åº”è¯¥æºå¸¦æˆ‘ä»¬çš„å½±å­ã€‚</p><p>2020ä¸€ä¸ªä¸€ç‚¹ç‚¹èµ·ä¼åŠ¨è¡çš„æ•°å­—ï¼Œä½†ä½ èƒ½çœ‹åˆ°2100ï¼Œé‚£åº”è¯¥æ˜¯ä¸€ç•ªéå¸¸å€¼å¾—æœŸå¾…çš„æ™¯è±¡ï¼Œæœ‰æ†§æ†¬æ‰ä¼šæœ‰å‰è¿›çš„åŠ¨åŠ›ã€‚
è€Œä½ æ˜¯æˆ‘ä»¬çš„æ†§æ†¬ï¼Œä¸è¿‡æ‰€å¹¸çš„æ˜¯ä½ çš„çˆ¶æ¯è¶³å¤Ÿâ€œå¤§æ¡â€ï¼Œä¸éœ€è¦æœ‰å¿ƒé‡Œå‹åŠ›ï¼ˆç”Ÿæ´»æœ‰å‹åŠ›äº†è¿˜è¯·è‡ªåŠ©ï¼‰ï¼Œä¿æŒç°åœ¨çš„å¼€å¿ƒå¿«ä¹å°±å¥½ã€‚
ä¸è¿‡å…¶å®å¼€å¿ƒå¿«ä¹çš„å¯èƒ½æ˜¯æˆ‘ä»¬ï¼Ÿé‚£è¿™äº›å¹´è¿˜è¯·å¤šå¤šæ‹…å¾…ï¼Œå¤šå¤šåŒ…å®¹ï¼Œå¤šå¤šç†è§£ã€‚</p><p>æˆ‘ä»¬å½¼æ­¤çš„ä¼´éšæ˜¯ç”Ÿå‘½çš„å»¶ç»­ï¼Œè¿™äº›å¹´ä¸”ç®—æ˜¯ä¸ºäº†æ›´å¥½çš„äº†è§£å½¼æ­¤ï¼Œç”Ÿæ´»åœ¨ä¸€èµ·ã€‚</p><p>ä¼´éšçš„æ˜¯çˆ½æœ—çš„ç¬‘å£°ï¼Œè±ªæ”¾çš„å“­å£°ï¼Œå’¿å’¿å‘€å‘€å“¦å“¦çš„å„¿æ˜Ÿè¯­ï¼Ÿ
è¿˜æœ‰ç°åœ¨ä¼šè¯´çš„è¯ï¼Œâ€œå¦ˆå¦ˆâ€ï¼Œâ€œçˆ¸çˆ¸â€ï¼Œâ€œå¥¶å¥¶â€ï¼Œâ€œæ‹¿æ¥â€ï¼Ÿå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼ŸğŸ¤­</p><p>ç»™ä½ çš„æ˜¯æ‰€æœ‰ï¼Œæ¯•ç«Ÿä½ æ˜¯å”¯ä¸€ç•™ä¸‹çš„ã€‚</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¼€æº BI äº§å“æ¯”è¾ƒ]]></title>
        <id>compare-os-bi-tool</id>
        <link href="https://wener.me/story/compare-os-bi-tool"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[æ¯”è¾ƒ Metabaseã€Redashã€Superset è¿™å‡ æ¬¾å¼€æºçš„ BI äº§å“ã€‚]]></summary>
        <content type="html"><![CDATA[<p>æ¯”è¾ƒ Metabaseã€Redashã€Superset è¿™å‡ æ¬¾å¼€æºçš„ BI äº§å“ã€‚</p><table><thead><tr><th>Name</th><th>License</th><th>Stars</th><th>Languages</th><th>Deps</th><th>Github</th></tr></thead><tbody><tr><td>Metabase</td><td>AGPL</td><td><img src="https://img.shields.io/github/stars/metabase/metabase"/></td><td>Clojure</td><td>H2/PostgreSQL</td><td><a href="https://github.com/metabase/metabase">metabase/metabase</a></td></tr><tr><td>Redash</td><td>BSD</td><td><img src="https://img.shields.io/github/stars/getredash/redash"/></td><td>JS</td><td>Redis+DB</td><td><a href="https://github.com/getredash/redash">getredash/redash</a></td></tr><tr><td>Superset</td><td>Apache</td><td><img src="https://img.shields.io/github/stars/apache/superset"/></td><td>Python</td><td>Cache+DB</td><td><a href="https://github.com/apache/superset">apache/superset</a></td></tr></tbody></table><ul><li>metabase<ul><li>ç•Œé¢æ“ä½œå‹å¥½</li><li>åå‘äºäº§å“</li><li>å›¾è¡¨ç±»å‹å°‘</li><li>AGPL</li><li>åµŒå…¥å» Logo æ”¶è´¹ - 300$/æœˆ 3000$/å¹´</li><li>å•†ä¸šç‰ˆ - 10000+ \$/å¹´<ul><li>åµŒå…¥æ—  Logo</li><li>SSO - SAML</li><li>è¡Œçº§æƒé™</li><li>å®¡è®¡å·¥å…·</li></ul></li><li>å¯å•ä¸ª Docker ç›´æ¥å¯åŠ¨ - ä½¿ç”¨ H2 åµŒå…¥å¼æ•°æ®åº“</li><li>ç•Œé¢å¥½çœ‹ - æœ¬åœ°åŒ–å¾ˆå¥½ã€åˆ†äº«å‹å¥½</li></ul></li><li>redash<ul><li>çº¯ SQL</li><li>å›¾è¡¨ä½¿ç”¨ PlotlyJS<ul><li>å¯ä»¥ç†è§£ä¸º Redash åªè´Ÿè´£å¤„ç†æ•°æ®</li></ul></li><li>æ”¯æŒæœ€å¤šçš„æ•°æ®æº/JDBC</li><li>æ²¡æœ‰æœ¬åœ°åŒ–</li></ul></li><li>superset<ul><li>æ”¯æŒæœ€å¤šçš„å›¾è¡¨</li><li>æ—¢å¯ä»¥ SQL åˆå¯ä»¥ UI</li><li>åŠŸèƒ½æœ€å¼º</li><li>æ‰©å®¹æ€§æœ€å¥½ - æ”¯æŒå¤§è§„æ¨¡åˆ†æåœºæ™¯</li><li>ç•Œé¢åè¿ç»´ - éƒ¨åˆ†æœ¬åœ°åŒ–</li><li>èƒ½è‡ªå®šä¹‰ CSS</li><li>é»˜è®¤ <strong>ä¸èƒ½</strong> å…¬å…±åˆ†äº«</li></ul></li></ul><h2>æ•°æ®æºç±»å‹</h2><ul><li>Redash <a href="https://redash.io/help/data-sources/supported-data-sources">Supported Data Sources</a></li><li>Superset <a href="https://superset.incubator.apache.org/#databases">supported database</a><ul><li>DB-API</li><li>SQLAlchemy</li></ul></li></ul><table><thead><tr><th>Data Source</th><th>Redash</th><th>Metabase</th><th>Superset</th></tr></thead><tbody><tr><td>Amazon Athena</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Amazon DynamoDB</td><td>âœ…</td><td></td><td></td></tr><tr><td>Amazon Redshift</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Apache Drill</td><td></td><td></td><td>âœ…</td></tr><tr><td>Apache Hive</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Apache Impala</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Apache Kylin</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Apache Pinot</td><td></td><td></td><td>âœ…</td></tr><tr><td>Apache SparkSQL</td><td></td><td>âœ…</td><td>âœ…</td></tr><tr><td>Axibase Time Series Database</td><td>âœ…</td><td></td><td></td></tr><tr><td>CSV</td><td>âœ…</td><td></td><td></td></tr><tr><td>Cassandra</td><td>âœ…</td><td></td><td></td></tr><tr><td>ClickHouse</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>CockroachDB</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>DB2 by IBM</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Databricks (Apache Spark)</td><td>âœ…</td><td></td><td></td></tr><tr><td>Dremio</td><td></td><td></td><td>âœ…</td></tr><tr><td>Druid</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Elasticsearch</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Exasol</td><td></td><td></td><td>âœ…</td></tr><tr><td>Google Analytics</td><td>âœ…</td><td></td><td></td></tr><tr><td>Google BigQuery</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Google Spreadsheets</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Graphite</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>Greenplum</td><td>âœ…</td><td></td><td>âœ…</td></tr><tr><td>H2</td><td></td><td>âœ…</td><td></td></tr><tr><td>Hana</td><td></td><td></td><td>âœ…</td></tr><tr><td>InfluxDB</td><td>âœ…</td><td></td><td></td></tr><tr><td>JIRA</td><td>âœ…</td><td></td><td></td></tr><tr><td>JSON</td><td>âœ…</td><td></td><td></td></tr><tr><td>MemSQL</td><td>âœ…</td><td></td><td></td></tr><tr><td>Microsoft Azure Data Warehouse / Synapse</td><td>âœ…</td><td></td><td></td></tr><tr><td>Microsoft Azure SQL Database</td><td>âœ…</td><td></td><td></td></tr><tr><td>Microsoft SQL Server</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>MongoDB</td><td>âœ…</td><td>âœ…</td><td></td></tr><tr><td>MySQL</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>OmniSciDB (Formerly MapD)</td><td>âœ…</td><td></td><td></td></tr><tr><td>Oracle</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>PostgreSQL</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Presto</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Prometheus</td><td>âœ…</td><td></td><td></td></tr><tr><td>Python</td><td>âœ…</td><td></td><td></td></tr><tr><td>Qubole</td><td>âœ…</td><td></td><td></td></tr><tr><td>Rockset</td><td>âœ…</td><td></td><td></td></tr><tr><td>SQLite</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Salesforce</td><td>âœ…</td><td></td><td></td></tr><tr><td>ScyllaDB</td><td>âœ…</td><td></td><td></td></tr><tr><td>Shell Scripts</td><td>âœ…</td><td></td><td></td></tr><tr><td>Snowflake</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>TreasureData</td><td>âœ…</td><td></td><td></td></tr><tr><td>Vertica</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Yandex AppMetrrica</td><td>âœ…</td><td></td><td></td></tr><tr><td>Yandex Metrica</td><td>âœ…</td><td></td><td></td></tr></tbody></table><h2>metabase</h2><ul><li>è¯­è¨€<ul><li>Clojure</li><li>React</li></ul></li><li>å‚è€ƒ<ul><li><a href="https://www.metabase.com/docs/latest/operations-guide/running-metabase-on-docker.html">å®‰è£…æ–‡æ¡£</a></li></ul></li></ul><pre><code class="language-bash"># H2
docker run -d -p 3000:3000 \
  -v $PWD/metabase-data:/metabase-data \
  -e &quot;JAVA_TIMEZONE=Asia/Shanghai&quot; \
  -e &quot;MB_DB_FILE=/metabase-data/metabase.db&quot; \
  --name metabase metabase/metabase

# PG
docker run -d -p 3000:3000 \
 -e &quot;MB_DB_TYPE=postgres&quot; \
 -e &quot;MB_DB_DBNAME=metabase&quot; \
 -e &quot;MB_DB_PORT=5432&quot; \
 -e &quot;MB_DB_USER=&lt;username&gt;&quot; \
 -e &quot;MB_DB_PASS=&lt;password&gt;&quot; \
 -e &quot;MB_DB_HOST=my-database-host&quot; \
 --name metabase metabase/metabase
</code></pre><h2>redash</h2><ul><li>è¯­è¨€<ul><li>NodeJS</li><li>Python + Flask + gunicorn + celery</li></ul></li><li>ä¾èµ–<ul><li>PostgreSQL</li><li>Redis</li></ul></li><li>å‚è€ƒ<ul><li><a href="https://redash.io/help/open-source/setup">å®‰è£…æ–‡æ¡£</a></li><li><a href="https://github.com/getredash/setup/blob/master/data/docker-compose.yml">docker-compose.yml</a><ul><li>server - redash/redash</li><li>scheduler</li><li>scheduled_worker</li><li>adhoc_worker</li><li>redis</li><li>postgres</li><li>nginx</li></ul></li><li><a href="https://discuss.redash.io/t/worker-architecture-question/5025">Worker architecture question</a></li></ul></li><li>æ¶æ„<ul><li>çƒ­æŸ¥è¯¢ï¼ˆadhoc query - ç”¨æˆ·å‘èµ·ï¼‰ä½¿ç”¨ æŸ¥è¯¢ Celery é˜Ÿåˆ—</li><li>å‘¨æœŸæŸ¥è¯¢ï¼ˆscheduled_queries - scheduler å‘èµ·ï¼‰ä½¿ç”¨ scheduled é˜Ÿåˆ—</li><li>Celery æ”¯æŒè®¾ç½®é˜Ÿåˆ—çš„ worker æ•°ï¼Œé»˜è®¤å¯åŠ¨ä¼šåˆ†ç¦» adhoc å’Œ scheduled é˜Ÿåˆ—</li><li>ä¼šåˆ‡æ¢åˆ° RQ - Redis Queue</li></ul></li></ul><h3>å¯åŠ¨é…ç½®</h3><ul><li><a href="https://redash.io/help/open-source/admin-guide/env-vars-settings">ç¯å¢ƒå˜é‡é…ç½®</a></li><li>åˆå§‹åŒ–ä½¿ç”¨ python <a href="https://github.com/getredash/redash/blob/master/redash/settings/__init__.py">è„šæœ¬</a></li><li><a href="https://redash.io/help/open-source/admin-guide/how-to-upgrade">å‡çº§</a></li></ul><pre><code class="language-bash"># compose ä¸­ä½¿ç”¨çš„è¯¥ç›®å½•
mkdir /opt/redash
cd /opt/redash

curl -LO https://raw.githubusercontent.com/getredash/setup/master/data/docker-compose.yml
touch env

docker-compose -f docker-compose.yml up
</code></pre><h3>ERROR: relation &quot;queries&quot; does not exist</h3><ul><li>è„šæœ¬ä½äº <code>./setup/docker/create_database.sh</code></li></ul><pre><code class="language-bash">docker-compose run --rm server manage database create_tables
docker-compose run --rm server manage db upgrad
</code></pre><h2>superset</h2><ul><li>è¯­è¨€<ul><li>Python - Flask + Celery</li><li>Typescript</li></ul></li><li>æœºæ„ä¾èµ–<ul><li>å…ƒæ•°æ®å­˜å‚¨ MySQL, Postgres, MariaDB, SQLite</li><li>æ¶ˆæ¯é˜Ÿåˆ— Redis, RabbitMQ, SQS</li><li>ç»“æœå­˜å‚¨ S3, Redis, Memcached</li><li>ç¼“å­˜ Memcached, Redis</li><li>WebServer å’Œ Celery æ˜¯æ— çŠ¶æ€çš„ - æ˜“äºæ‰©å®¹</li></ul></li><li>æ³¨æ„<ul><li>é»˜è®¤ä¸å…è®¸å…¬å…±è®¿é—®ï¼Œéœ€è¦ <a href="https://superset.incubator.apache.org/security.html?highlight=public#public">é…ç½®</a></li></ul></li><li>å‚è€ƒ<ul><li><a href="https://superset.incubator.apache.org/installation.html">å®‰è£…æ–‡æ¡£</a></li><li><a href="https://github.com/apache/incubator-superset/blob/master/docker-compose.yml">docker-compose.yml</a><ul><li>éœ€è¦å…ˆ Build åœ¨å¯åŠ¨</li><li>redis</li><li>db - postgres</li><li>superset</li><li>superset-init - æ„å»º</li><li>superset-node - å‰ç«¯</li><li>superset-worker</li><li>superset-tests-worker</li></ul></li><li><a href="https://github.com/amancevice/docker-superset">amancevice/docker-superset</a> - å• docker å¯åŠ¨ superset<ul><li><a href="https://github.com/amancevice/docker-superset/tree/main/examples">å¯åŠ¨ç¤ºä¾‹</a></li></ul></li><li><a href="https://preset.io/blog/2020-07-02-hello-world/">å¦‚ä½•æ–°å¢æ’ä»¶</a></li><li>K8S Helm éƒ¨ç½² <a href="https://github.com/helm/charts/blob/master/stable/superset">stable/superset</a></li></ul></li></ul><pre><code class="language-bash">mkdir /opt/superset
cd /opt/superset

# SQLite
# ==========
curl -LO https://raw.githubusercontent.com/amancevice/docker-superset/main/examples/sqlite/superset_config.py
curl -LO https://raw.githubusercontent.com/amancevice/docker-superset/main/examples/sqlite/docker-compose.yml

# ä¼šä½¿ç”¨ local volume æŒ‚è½½æ•°æ®
docker-compose up -d
sleep 30
# åˆå§‹åŒ– - åˆ›å»ºè´¦å·å¯†ç ã€åˆå§‹æ•°æ®åº“
docker-compose exec superset superset-demo

# å·²æœ‰ PostgreSQL
# ==========
cat &lt;&lt;YAML &gt; docker-compose.yml
version: &#x27;3&#x27;
services:
  redis:
    image: redis
    restart: always
    volumes:
      - redis:/data
  superset:
    image: amancevice/superset
    restart: always
    depends_on:
      - redis
    environment:
      MAPBOX_API_KEY: ${MAPBOX_API_KEY}
    ports:
      - &quot;8088:8088&quot;
    volumes:
      - ./superset_config.py:/etc/superset/superset_config.py
volumes:
  redis:
YAML
# æ•°æ®åº“é“¾æ¥
# postgresql+psycopg2://superset:superset@postgres:5432/superset
DATABASE_URL=
SECRET_KEY=$(cat /dev/urandom | env LC_CTYPE=C tr -dc &#x27;a-zA-Z0-9&#x27; | head -c 32)

cat &lt;&lt;PY &gt; superset_config.py
import os

MAPBOX_API_KEY = os.getenv(&#x27;MAPBOX_API_KEY&#x27;, &#x27;&#x27;)
CACHE_CONFIG = {
    &#x27;CACHE_TYPE&#x27;: &#x27;redis&#x27;,
    &#x27;CACHE_DEFAULT_TIMEOUT&#x27;: 300,
    &#x27;CACHE_KEY_PREFIX&#x27;: &#x27;superset_&#x27;,
    &#x27;CACHE_REDIS_HOST&#x27;: &#x27;redis&#x27;,
    &#x27;CACHE_REDIS_PORT&#x27;: 6379,
    &#x27;CACHE_REDIS_DB&#x27;: 1,
    &#x27;CACHE_REDIS_URL&#x27;: &#x27;redis://redis:6379/1&#x27;}
SQLALCHEMY_DATABASE_URI = &#x27;${DATABASE_URL}&#x27;
SQLALCHEMY_TRACK_MODIFICATIONS = True
SECRET_KEY = &#x27;${SECRET_KEY}&#x27;
PY
</code></pre><h3>UserWarning: Flask-Caching: CACHE_TYPE is set to null, caching is effectively disabled.</h3>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¾®æœåŠ¡æ‚å¿µ]]></title>
        <id>microservice-thoughts</id>
        <link href="https://wener.me/story/microservice-thoughts"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[å¾®æœåŠ¡å·²ç»æ˜¯ä¸€ä¸ªä¸å†æ–°é²œçš„æ¦‚å¿µï¼Œä½†æˆ‘å´ä¾ç„¶æ¨¡ç³Šä¸æ¸…ã€‚]]></summary>
        <content type="html"><![CDATA[<p><a href="https://wener.me"><img src="https://www.plantuml.com/plantuml/svg/TP51I-D068Rlyok6x3NTiikoM3Mb9csyUF9QYinqFjjWceIPqLfABmL12Zs8UDE3NeKgY8Y2-ckI-ZFCcCOqjSqflFDyxpnyKn6ISCbyYPZJuYHeustSHvxFe2xQ9023-iUwa3qNZ7t7TO7fJT_rkI4vyKH0E7YoWPB1EbPZ0WBZZnwV7Z276zhEhjP0w500nuKoRX49NT93QFQZilZeo6d27baMKeHGNvKPWdHW8uCpOf3Krrr2mJKsmybDTFeqlRqhwrWP9xhQBzEircnJQwItfFpqzImyULY0hRNQVwiKmz_tfNXqEGv7rrjbVHwtRQjQ_Jk7qpnkhi3LlhBgZz5mEdp-KMsNh7yfI_EikO9bT4xuuZuQJyANyuLYzlN5S2QTUuqi9ofFL9TaD3UVSaftHYaPX18RBNoR92k9heRX-oCkuBQKWLWl5hlW0V_T0GqDK0Kyndpv2G00"/></a></p><p>å¾®æœåŠ¡å·²ç»æ˜¯ä¸€ä¸ªä¸å†æ–°é²œçš„æ¦‚å¿µï¼Œä½†æˆ‘å´ä¾ç„¶æ¨¡ç³Šä¸æ¸…ã€‚</p><p>å¾®æœåŠ¡ï¼ŒæŠ›å¼€ å¾® ä¸çœ‹ï¼Œé¦–å…ˆæ˜¯ä¸€ä¸ªé¢å‘æœåŠ¡çš„æ¶æ„ï¼Œå³ SOAã€‚ç³»ç»Ÿæ¨¡å—ï¼Œä¸šåŠ¡é€»è¾‘ä¹‹é—´çš„ç•Œé™æ˜¯æœåŠ¡ï¼ŒæœåŠ¡ä¸º æœåŠ¡å+æ–¹æ³•åï¼Œä¸ CRUD/REST ä¸åŒã€‚æœåŠ¡é‡åœ¨äº¤äº’ï¼ŒCRUD/REST é‡åœ¨æ•°æ®ã€‚</p><p>SOA æ›¾ç»æœ‰ SOAPã€ Java RMIï¼Œç°åœ¨ä¸»æµçš„ gRPC å’Œå¸¸è§çš„ JsonRPCã€‚è¿™äº›å®šä¹‰çš„éƒ½æ˜¯æœåŠ¡äº¤äº’åè®®ï¼Œè€Œå¾®æœåŠ¡æ›´å¤šçš„å…³æ³¨æœåŠ¡çš„ç»„åˆã€åˆ†å¸ƒã€ç¼–æ’ã€å®¹é”™ã€å‘ç°ã€é€šä¿¡ã€è·Ÿè¸ªç­‰ã€‚å› æ­¤ä¼šæƒ³åˆ°è¿™æ ·çš„ä¸€äº›ä¸»é¢˜ï¼š</p><ul><li>æœåŠ¡é€šä¿¡<ul><li>ç‚¹å¯¹ç‚¹ - ç®€å•å¥½ç†è§£ï¼Œæƒ³è¦ç¨³å®šä½¿ç”¨åˆ™ä¼šå¯¼è‡´å®ç°å¤æ‚</li><li>å¹¿æ’­æ€»çº¿ - å®ç°ç®€å•ä½†ä¾èµ–é¢å¤–æœåŠ¡</li><li>ç½‘å…³ - å®ç°ç®€å•ï¼Œæ˜“äºç†è§£ï¼Œé¢å¤–çš„ä¸€æ¬¡è·³è½¬</li></ul></li><li>æœåŠ¡åºåˆ—åŒ–<ul><li>ä¸€ä¸ªå‘å±•äº†å¾ˆä¹…ï¼Œè®¤ä¸ºå·²ç»è¢«è§£å†³çš„é—®é¢˜</li><li>æ›¾ç»åºåˆ—åŒ–ä¸»è¦ä»¥æ€§èƒ½ä½œä¸ºè€ƒè™‘ï¼Œç°ä»Šè®¡ç®—å†—ä½™ï¼Œå‰æœŸé€‰æ‹©æœ€ç®€å•çš„ JSON å·²ç»è¶³å¤Ÿ</li></ul></li><li>æœåŠ¡å‘ç°</li><li>æœåŠ¡å®¹é”™</li></ul><h2>æœåŠ¡é€šä¿¡</h2><p>æœåŠ¡ä¹‹é—´çš„é€šä¿¡å¯ç±»æ¯”ä¸ºç½‘ç»œé€šä¿¡ï¼Œä¸»è¦åˆ†ä¸ºç‚¹å¯¹ç‚¹ï¼Œå¹¿æ’­å’Œç½‘å…³ï¼š</p><ul><li>ç‚¹å¯¹ç‚¹åœºæ™¯<ul><li>å‰åç«¯é€šä¿¡</li><li>æœåŠ¡ç«¯è°ƒç”¨</li></ul></li><li>å¹¿æ’­åœºæ™¯<ul><li>æœåŠ¡å‘ç°</li><li>æœåŠ¡æ€»çº¿</li></ul></li><li>ç½‘å…³åœºæ™¯<ul><li>å‰åç«¯é€šä¿¡</li><li>æœåŠ¡è·¯ç”±</li><li>åè®®é€‚é…</li><li>é‰´æƒ</li></ul></li></ul><p>ä»æœåŠ¡æä¾›æ–¹æ¥è¯´æœåŠ¡çš„é€šä¿¡ä¹Ÿå¯ä»¥åŒºåˆ†ä¸ºä¸»åŠ¨å’Œè¢«åŠ¨ï¼š</p><ul><li>ä¸»åŠ¨<ul><li>ç›‘å¬è¿‡æ»¤ç‰¹å®šæœåŠ¡è¿›è¡Œå¤„ç†<ul><li>ä¾‹å¦‚ ç›‘å¬ Topicï¼Œç»´æŠ¤é“¾æ¥ç¨³å®šæ€§ï¼Œè¿‡æ»¤åªå¤„ç†æœ¬åœ°æä¾›çš„æœåŠ¡</li></ul></li><li>é•¿é“¾æ¥æ³¨å†ŒæœåŠ¡<ul><li>é“¾æ¥æ–­å¼€åˆ™æœåŠ¡åœæ­¢</li></ul></li></ul></li><li>è¢«åŠ¨<ul><li>ç›‘å¬å›ºå®šæ¥å£<ul><li>ä¾‹å¦‚ ç›‘å¬æœ¬åœ° 8080ï¼Œæä¾› JsonRPCï¼Œå¤„ç†ä¸»åŠ¨è¯·æ±‚è¿‡æ¥çš„æœåŠ¡è°ƒç”¨</li></ul></li><li>å¯åŠ¨æ—¶æ³¨å†ŒæœåŠ¡<ul><li>ç”±æ³¨å†Œä¸­å¿ƒæœåŠ¡å®šæœŸæ£€æµ‹æœåŠ¡å­˜æ´»</li></ul></li></ul></li></ul><h3>ç‚¹å¯¹ç‚¹é€šä¿¡</h3><p><strong>HTTP</strong></p><p>ç›®å‰ HTTP åœ¨å¿«é€Ÿå‘å±•ï¼Œæ–°çš„åè®®æé«˜çš„ä¸»è¦æ˜¯æ€§èƒ½å’Œå¯¹é•¿é“¾æ¥æµçš„æ”¯æŒï¼Œå¦‚æœé€‰æ‹©ç®€å•å®ç°æœåŠ¡è°ƒç”¨ï¼ŒHTTP è¯·æ±‚è¶³ä»¥ã€‚</p><p>ä½¿ç”¨ HTTP POST å®ç° å•æ¬¡è¯·æ±‚å“åº”ï¼Œä½¿ç”¨ WebSocket å®ç°æµå¼è¯·æ±‚ã€‚ä½¿ç”¨ HTTP çš„å¥½å¤„æ˜¯èƒ½åˆ©ç”¨ç°æœ‰çš„åŸºç¡€è®¾æ–½ï¼ŒHTTP æ˜¯ç›®å‰æ”¯æŒæœ€ä¸ºå¹¿æ³›çš„åè®®ï¼Œä¹Ÿæ˜¯æœ€å—å…³æ³¨çš„åè®®ã€‚</p><p>ä½†é€‰æ‹© HTTP æ—¶ï¼Œå¦‚æœè‡ªè¡Œå®ç°ï¼Œåˆ™æœ€å¥½é€‰æ‹© HTTP 1ï¼Œé¿å…ä½¿ç”¨ HTTP 2 ç­‰æ–°å¢ç‰¹æ€§ï¼ŒHTTP 2+ èƒ½ä¼ é€’ HTTP 1 çš„æ‰€æœ‰è¯­ä¹‰ï¼Œä¸”æ€§èƒ½å„æ–¹é¢èƒ½å¾—åˆ°å¾ˆå¥½çš„æå‡ï¼Œè¿™æ ·è¶³ä»¥ã€‚å¦‚æœè¦ç‹¬ç«‹ä½¿ç”¨ HTTP åè®®æ–°ç‰¹æ€§ï¼Œä¾‹å¦‚ Trailerï¼Œåˆ™å®ç°ä¼šå˜å¾—è¿‡äºå¤æ‚ã€‚</p><p><strong>é HTTP è¯­ä¹‰</strong></p><p>å½“ä½¿ç”¨é HTTP è¯­ä¹‰è¯­ä¹‰æ—¶ï¼Œå¯èƒ½æ˜¯åŸºäº TCPï¼Œä¹Ÿå¯èƒ½æ˜¯å¯¹ Payload è¿›è¡Œå®šä¹‰ï¼ŒæŠ½è±¡ä¼ è¾“å±‚ï¼Œä½†å¦‚ä»Šæƒ³è¦è·¨è¯­è¨€ï¼Œä½¿ç”¨é HTTP åè®®é˜»ç¢ä¼šéå¸¸å¤§ï¼Œå› æ­¤å®æ„¿é€‰æ‹©å¯¹ Payload åšè‡ªå®šä¹‰ä¹Ÿä¸ä¼šé€‰æ‹©ä¸ä½¿ç”¨ HTTPã€‚</p><h4>ç‚¹å¯¹ç‚¹ç½‘å…³</h4><p>é€šå¸¸ç‚¹å¯¹ç‚¹æ˜¯éœ€è¦ç›´æ¥é€šä¿¡ï¼Œä½†ç°ä»Šæœ‰æä¾› Mesh ç½‘ç»œçš„ç½‘å…³ç»„ä»¶ï¼Œä½¿å¾—åŸæœ¬ä¸äº’é€šçš„ç½‘ç»œæœåŠ¡èƒ½å¤Ÿäº’ç›¸è®¿é—®ã€‚åŒæ—¶ä¹Ÿèƒ½å®ç°å¯¹åº”çš„æœåŠ¡ä¹‹é—´çš„æƒé™ç®¡ç†å’Œç›‘æ§ã€‚</p><p>ä½¿ç”¨ Mesh ç½‘å…³åˆ™å¯ä»¥è®©å®¢æˆ·ç«¯çš„ç½‘ç»œå±‚å®ç°æ›´ä¸ºç®€å•ï¼Œç”±ç½‘å…³å»ç»´æŠ¤æœåŠ¡ç½‘ç»œçš„ç¨³å®šæ€§ï¼Œå¯¹æœåŠ¡ç½‘ç»œçš„å˜åŒ–ä¹Ÿèƒ½æ›´å¿«çš„ååº”ã€‚ä½†æˆæœ¬æ˜¯ç»´æŠ¤é¢å¤–çš„åŸºç¡€è®¾æ–½ç»„ä»¶ï¼Œä¸”æ³¨å†Œä¸­å¿ƒä¸ç½‘å…³æœ‰å¼ºå…³è”å’Œäº¤äº’ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿è¡Œä¸€ä¸ªç½‘å…³ä¹Ÿæ˜¯é¢å¤–çš„èµ„æºæ¶ˆè€—ã€‚</p><h3>å¹¿æ’­é€šä¿¡</h3><p>æœåŠ¡æ€»çº¿æœ¬æ¥æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„è®¾è®¡ï¼Œä½†åœ¨æœåŠ¡åœºæ™¯ä¼šæœ‰æ‰€ä¸åŒã€‚äº‹ä»¶é©±åŠ¨ä¸€èˆ¬æœ‰å›ºå®šçš„ ä¸»é¢˜/Topic ï¼Œåœ¨å®šè®¢é˜…åˆå·²ç»ç¡®å®šäº†éƒ¨åˆ†è¯­ä¹‰ã€‚è€ŒæœåŠ¡æ€»çº¿åˆ™å¯ä»¥ç†è§£ä¸ºåªæœ‰ä¸€ä¸ª Topicï¼Œé€šè¿‡æ¶ˆæ¯çš„å†…å®¹æ¥è¿›è¡Œè¿‡æ»¤è°å¤„ç†è°ä¸éœ€è¦å¤„ç†ã€‚</p><p>æ€»çº¿çš„é€šä¿¡æ¨¡å¼è§£å†³äº†æœåŠ¡ä¹‹é—´ç½‘ç»œéš”ç¦»çš„é˜»ç¢ï¼Œä¸å†éœ€è¦ A æœåŠ¡ ä¸ B æœåŠ¡ ç½‘ç»œäº’é€šï¼Œç½‘ç»œçš„å˜åŒ–ä¹Ÿä¸ä¼šé˜»ç¢æœåŠ¡çš„é€šä¿¡ã€‚ä½†å¦‚æœæ€»çº¿æœ¬èº«å¦‚æœä¸æ”¯æŒä¸€äº› meta ä¿¡æ¯çš„æ¨¡å¼åŒ¹é…ï¼Œåˆ™ä¼šå¯¼è‡´æµé‡è¿‡å¤§ï¼Œå¤„ç†èƒ½åŠ›å—é™ã€‚</p><p>é€‰æ‹©å¹¿æ’­é€šä¿¡ï¼Œåˆ™å¿…ç„¶ä¼šé€‰æ‹©æŸç§å½¢å¼çš„ æ¶ˆæ¯é˜Ÿåˆ—/MQ å®ç°ï¼Œå› æ­¤ä¼šç‰µæ‰¯åˆ°å…¶ä»–çš„åŸºç¡€è®¾æ–½æœåŠ¡ï¼Œä»éƒ¨ç½²è·Ÿè¸ªä¸Šæ¥è¯´ï¼Œè¿™æ˜¯æ‰£åˆ†çš„ã€‚</p><h3>ç½‘å…³é€šä¿¡</h3><p>ç½‘å…³é€šä¿¡ä¸ Mesh ç½‘å…³ä¸åŒï¼ŒMesh çš„ç›®çš„åœ¨äºæ‰“é€šèŠ‚ç‚¹ï¼Œç½‘å…³çš„ç›®çš„åœ¨äºç£¨å¹³/é€‚é…ä¸åŒçš„ç¯å¢ƒæœåŠ¡ï¼Œæä¾›ç›¸åŒçš„èƒ½åŠ›ã€‚</p><p>æ‰€æœ‰çš„è¯·æ±‚é€šè¿‡ç½‘å…³ï¼Œç”±ç½‘å…³è¿›è¡Œè·¯ç”±ï¼Œè¿™æ˜¯å…¸å‹çš„ Nginx åå‘ä»£ç†åœºæ™¯ã€‚å› ä¸ºæ‰€æœ‰è¯·æ±‚éƒ½åŠ äº†ä¸­é—´å±‚ï¼Œå› æ­¤å¾ˆå¤šäº‹æƒ…éƒ½å¯ä»¥åœ¨ä¸­é—´å±‚å®Œæˆï¼š</p><ul><li>è·¯ç”±<ul><li>æœåŠ¡ A -&gt; èŠ‚ç‚¹ B</li></ul></li><li>ç›‘æ§<ul><li>é‡‡é›†æœåŠ¡è¯·æ±‚æŒ‡æ ‡</li></ul></li><li>é‰´æƒ<ul><li>ç”¨æˆ·æ˜¯å¦å…è®¸è®¿é—®æœåŠ¡</li><li>æœåŠ¡ä¹‹é—´æ˜¯å¦å…è®¸é€šä¿¡</li></ul></li><li>é€‚é…<ul><li>å‰ç«¯ JsonRPC -&gt; åç«¯æœåŠ¡ gRPC</li></ul></li><li>è·Ÿè¸ª<ul><li>æ·»åŠ  RequestID</li><li>è®°å½•è¯·æ±‚åˆ° Elastic</li></ul></li><li>é›†æˆæœåŠ¡<ul><li>æœåŠ¡ A -&gt; å¤–éƒ¨æœåŠ¡ B</li></ul></li><li>æœåŠ¡é”™è¯¯ç†”æ–­</li><li>è´Ÿè½½å‡è¡¡</li><li>TLS</li></ul><p>è¯¥æ¨¡å¼ä¸å®é™…æœ€åº•å±‚çš„æœåŠ¡é€šä¿¡æœ‰æœ‰ä¸€ç‚¹åŒºåˆ«ï¼Œä¸»è¦ä½œä¸ºé€‚é…å’Œè€¦åˆå­˜åœ¨ï¼Œå¦‚æœç½‘å…³åŠŸèƒ½è¶Šå¤šåšçš„äº‹æƒ…è¶Šå¤šä¹Ÿè¶Šå®¹æ˜“é€ æˆå•ç‚¹ç“¶é¢ˆã€‚</p><h3>é€šä¿¡ä¸å…¶ä»–ç»„ä»¶çš„å…³è”</h3><p>é€šä¿¡æ˜¯æœåŠ¡çš„æ ¹æœ¬ï¼Œå¯¹äºå¾®æœåŠ¡æ›´æ˜¯å¦‚æ­¤ã€‚é€šä¿¡çš„æ¨¡å¼é—´æ¥æˆ–ç›´æ¥çš„å½±å“å…¶ä»–ç»„ä»¶çš„é€‰æ‹©å’Œè®¾è®¡ã€‚ä½†ä¸åŒçš„é€šä¿¡æ¨¡å¼å¹¶ä¸æ˜¯äº’æ–¥çš„ï¼Œåœ¨å¯¹äºçš„åœºæ™¯é€‰æ‹©å¯¹äºçš„æ–¹å¼æ‰æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p><ul><li>ç‚¹å¯¹ç‚¹<ul><li>ä¼˜åŠ¿<ul><li>æ˜“äºè·Ÿè¸ª</li><li>æ˜“äºç†è§£</li><li>å¯åˆ©ç”¨ç°æœ‰åŸºç¡€è®¾æ–½</li></ul></li><li>æ³¨å†Œæ—¶å€™éœ€è¦æ³¨å†Œæœ¬åœ° IPã€ç«¯å£<ul><li>å¦‚æœæ˜¯è¢«åŠ¨ï¼Œåˆ™è¿˜éœ€è¦ IP å’Œ ç«¯å£èƒ½å¤Ÿè¢«æ³¨å†Œä¸­å¿ƒè®¿é—®ä»¥ç¡®ä¿æœåŠ¡å¥åº·</li><li>å¦‚æœæ˜¯ä¸»åŠ¨ï¼Œåˆ™å¯èƒ½æ³¨å†Œä¸­å¿ƒä¼šæˆä¸ºç“¶é¢ˆ</li></ul></li><li>å—ç½‘ç»œå½±å“è¾ƒå¤§<ul><li>éƒ¨ç½²èŠ‚ç‚¹å˜æ›´å¯èƒ½éœ€è¦ä¸€å®šæ—¶é—´æ‰èƒ½æ›´æ­£ä¸ºæ–°çš„åœ°å€</li><li>å½±å“å› ç´ ä¸»è¦æœ‰ï¼š<ol><li>æ£€æµ‹åˆ°æœåŠ¡ä¸‹çº¿çš„æ—¶é—´</li></ol><ul><li>å¯¹äºè¢«åŠ¨åœºæ™¯åˆ™æ˜¯ å¿ƒè·³é—´éš”<em>å¤±è´¥æ¬¡æ•° - ä¸€èˆ¬ä¸º `15s </em> 3 = 45s` - ä¸è¿›è¡Œä¸»åŠ¨å¹²é¢„çš„æƒ…å†µ</li></ul><ol start="2"><li>å®¢æˆ·ç«¯æ£€æµ‹åˆ°æ–°æœåŠ¡ä¿¡æ¯çš„æ—¶é—´</li></ol></li><li>ä¸ºäº†å‡å°‘ç½‘ç»œå½±å“ï¼Œå¯èƒ½æŠ½è±¡æœåŠ¡ä¸º VIP<ul><li>ä¾‹å¦‚ K8S çš„æœåŠ¡å®šä¹‰ï¼ŒèŠ‚ç‚¹æ³¨å†Œçš„åœ°å€ä½œä¸º endpoingï¼Œå®é™…è¯·æ±‚ service</li><li>å¼•å…¥æ–°çš„åŸºç¡€è®¾æ–½æœåŠ¡</li></ul></li></ul></li><li>é‡å®¢æˆ·ç«¯<ul><li>æƒ³è¦å®ç°ç¨³å®šçš„æœåŠ¡è¯·æ±‚ï¼Œå®¢æˆ·ç«¯è®¾è®¡å®ç°ä¼šå˜å¾—å¤æ‚ï¼Œä¸»è¦æ˜¯æœåŠ¡å‘ç°å’Œå…ƒæ•°æ®å˜æ›´ç›¸å…³ã€‚</li></ul></li><li>å¯ç”¨äº Web ç«¯ - ä½†é€šå¸¸è¿˜æ˜¯ä¼šä½¿ç”¨ API ç½‘å…³è¿›è¡Œæš´éœ²</li></ul></li><li>å¹¿æ’­/æ€»çº¿é€šä¿¡<ul><li>ä¼˜åŠ¿<ul><li>æ¶æ„ç®€å•</li><li>éƒ¨ç½²æ—¶å¯¹ç¯å¢ƒè¦æ±‚æ›´å°</li></ul></li><li>æ³¨å†Œæ—¶å€™åªéœ€è¦æ³¨å†ŒåŸºæœ¬ä¿¡æ¯å³å¯ï¼Œæ¶ˆè´¹ç«¯å’Œæä¾›ç«¯åŸºæœ¬å¯ä»¥å®ç° 0 è€¦åˆ<ul><li>ç‚¹å¯¹ç‚¹éœ€è¦çŸ¥é“æä¾›ç«¯çš„åœ°å€ä¿¡æ¯</li></ul></li><li>å¼ºä¾èµ–é¢å¤–çš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡<ul><li>å®æ—¶å‹æ¶ˆæ¯é˜Ÿåˆ—</li><li>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¸¦æ¥é¢å¤–å»¶æ—¶</li></ul></li><li>æä¾›æœåŠ¡çš„ä¸€ç«¯å¿…é¡»æ˜¯é•¿é“¾æ¥ç›‘å¬æ¶ˆæ¯<ul><li>å› æ­¤ PHP è¿™ç±»çš„ CGI è„šæœ¬è¯­è¨€æ¯”è¾ƒéš¾ä»¥ä½¿ç”¨</li></ul></li></ul></li><li>ç½‘å…³<ul><li>ä¼˜åŠ¿<ul><li>æ•´åˆ</li></ul></li><li>ä¸ä¸€å®šä¸å®é™…æœåŠ¡è°ƒç”¨ç›¸å…³</li><li>ä¸æ³¨å†Œä¸­å¿ƒè€¦åˆ - å—æ³¨å†Œä¸­å¿ƒæ§åˆ¶</li><li>ä¸ç®¡é€‰ç”¨ä½•ç§é€šä¿¡ï¼Œä¸€èˆ¬éƒ½ä¼šå­˜åœ¨ä¸€ä¸ªç½‘å…³</li></ul></li></ul><h2>æœåŠ¡å‘ç°</h2><p>æœåŠ¡å‘ç°é€šå¸¸åªæ˜¯ä¸€ç§è¡Œä¸ºï¼Œä½†å®é™…ä½¿ç”¨çš„åº”è¯¥æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œä¸»è¦èƒ½åŠ›åŒ…æ‹¬ï¼š</p><ul><li>è®°å½•æœåŠ¡èŠ‚ç‚¹ä¿¡æ¯ - é¢å‘æœåŠ¡æä¾›è€…<ul><li>æä¾› A æœåŠ¡èŠ‚ç‚¹çš„ IP æ˜¯å¤šå°‘ï¼Œç«¯å£æ˜¯å¤šå°‘</li></ul></li><li>æä¾›æœåŠ¡èŠ‚ç‚¹å¯¹åº”å…³ç³» - é¢å‘æœåŠ¡æ¶ˆè´¹è€… - å‘ç°<ul><li>è°æä¾› A æœåŠ¡</li></ul></li><li>æœåŠ¡å…ƒæ•°æ®è®°å½• - æœåŠ¡ç®¡ç†<ul><li>A æœåŠ¡æœ‰é‚£äº›ç‰ˆæœ¬ï¼Œæœ‰é‚£äº›æ–¹æ³•ï¼Œå‚æ•°ç±»å‹æ˜¯ä»€ä¹ˆæ ·çš„</li><li>A æœåŠ¡æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„æœåŠ¡</li></ul></li><li>æœåŠ¡å¥åº·çŠ¶æ€ - æœåŠ¡ç»´æŠ¤<ul><li>ä¸»åŠ¨æ£€æŸ¥</li><li>è¢«åŠ¨ä¸ŠæŠ¥</li></ul></li><li>æœåŠ¡å®‰å…¨ - é€šå¸¸éœ€è¦é…åˆç½‘å…³<ul><li>A æœåŠ¡æ˜¯å¦å…è®¸è°ƒç”¨ B æœåŠ¡</li></ul></li></ul><p>æœåŠ¡æ³¨å†Œä¸­å¿ƒé€šå¸¸ä¸æ˜¯ï¼Œè€Œæ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œå…¶ä¸­çš„æœåŠ¡å…ƒä¿¡æ¯ä¹Ÿå¯è¢«åŒæ­¥åˆ° RDBMS ä¾¿äºå¼€å‘äººå‘˜æŸ¥çœ‹å’Œä½¿ç”¨ï¼Œåœºæ™¯ä¾‹å¦‚ï¼š</p><ul><li>æœç´¢æ¥å£</li><li>æŸ¥æ‰¾æ¥å£æ–‡æ¡£</li><li>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</li><li>ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç </li><li>æµ‹è¯•è°ƒç”¨æœåŠ¡</li></ul><h2>æœåŠ¡å®¹é”™</h2><p>æœåŠ¡å®¹é”™åŒ…å«æœåŠ¡å¼‚å¸¸ã€èŠ‚ç‚¹å¼‚å¸¸ã€ç½‘ç»œå¼‚å¸¸ï¼Œä¸åŒçš„å¼‚å¸¸å¯èƒ½é‡‡å–ä¸åŒçš„åº”å¯¹æ–¹å¼ï¼Œæˆ‘ç†è§£çš„å¸¸è§åŠŸèƒ½åŒ…æ‹¬</p><ul><li>é™æµ</li><li>é‡è¯•</li><li>è´Ÿè½½</li></ul><p>å®¹é”™çš„å®ç°é€šå¸¸é…åˆç›‘æ§ï¼Œç½‘å…³ï¼Œæ³¨å†Œä¸­å¿ƒã€‚ç®—æ˜¯ä¼˜åŒ–æœåŠ¡ä½“éªŒçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ä½œä¸ºå»¶ä¼¸æ”¯æŒè€ƒè™‘ã€‚</p><h2>å¾®æœåŠ¡</h2><p>å¾®æœåŠ¡ï¼Œå¾®çš„æ˜¯é™¤äº†æœåŠ¡ä¹‹å¤–çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°çš„æ‰€æœ‰å†…å®¹ã€‚å¾®æœåŠ¡çš„æœŸæœ›æ˜¯è®©å¼€å‘åªå…³å¿ƒä¸šåŠ¡é€»è¾‘çš„ç¼–å†™ï¼Œå¼€å‘å¥½çš„ä¸šåŠ¡é€»è¾‘èƒ½å¤Ÿå¿«é€Ÿç¨³å®šçš„ä¸Šçº¿è¢«ä½¿ç”¨ã€‚</p><p>å¦‚æœä¸åœ¨ä¸€å¥—å®Œå–„çš„ä½“ç³»ä¸‹è°ˆè®ºå¼€å‘å¾®æœåŠ¡éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰ä¸”éš¾ä»¥å®ç°çš„ï¼Œè€Œè¿™å¥—ä½“ç³»çš„æ­å»ºä¸èƒŒé ç°åœ¨çš„ K8S ä¹‹ç±»çš„ä½“ç³»ä¹Ÿæ˜¯éš¾ä»¥æˆå½¢çš„ã€‚</p><h2>æ€»ç»“</h2><p>å°†æœ€è¿‘æ··ä¹±æ€ç»ªè¿›è¡Œæ¢³ç†ï¼Œä¸ä¸€å®šéƒ½æ˜¯æ­£ç¡®ï¼Œä»…ä½œä¸ºå‚è€ƒä¾¿äºç†è§£ï¼Œå¼•å¯¼ä¹‹åçš„é€‰æ‹©å’Œå†³å®šã€‚</p><h2>å‚è€ƒ</h2><ul><li><a href="https://martinfowler.com/articles/microservices.html">https://martinfowler.com/articles/microservices.html</a></li><li><a href="http://www.richardrodger.com/monolithic-nodejs">http://www.richardrodger.com/monolithic-nodejs</a></li><li><a href="https://wener.me/blog/microservice-thoughts">å¾®æœåŠ¡æ‚å¿µ</a><ul><li><a href="https://mp.weixin.qq.com/s/JMTH-mr_jHq5U8qLFmqQjA">å¾®ä¿¡</a></li><li><a href="https://github.com/wenerme/wener/blob/master/story/2020/2020-08-15-microservice-thoughts.md">Markdown</a></li></ul></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[äººç”Ÿç¬¬å››é˜¶æ®µ]]></title>
        <id>stage-four-of-life</id>
        <link href="https://wener.me/story/stage-four-of-life"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[äººç”Ÿé˜¶æ®µ]]></summary>
        <content type="html"><![CDATA[<h2>äººç”Ÿé˜¶æ®µ</h2><p>é²é“å¤«Â·æ–½æ³°çº³çš„äººæ™ºå­¦ç†è®ºï¼Œå®šä¹‰äººçš„å‘å±•æ¯ä¸ƒå¹´ä¸€ä¸ªé˜¶æ®µã€‚</p><blockquote><p>é²é“å¤«Â·æ–½æ³°çº³ - Rudolf Steinerï¼Œ1861 å¹´ 2 æœˆ 27 æ—¥ï¼1925 å¹´ 3 æœˆ 30 æ—¥ï¼Œå¥¥åœ°åˆ©çš„å“²å­¦å®¶ã€æ”¹é©å®¶ã€å»ºç­‘å¸ˆå’Œæ•™è‚²å®¶</p></blockquote><p>ä¸çŸ¥æ›¾å‡ ä½•æ—¶å¬è¯´è¿‡è¿™æ ·ä¸€ä¸ªç†è®ºï¼Œå¬åˆ°çš„å½“å¹´å½“æ—¶ä¾¿æ·±åˆ»çš„è®°å¿†åœ¨äº†è„‘æµ·é‡Œã€‚å¦‚æœä»”ç»†å»æƒ³ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„ç†è®ºï¼Œå¾€å¾€æˆ‘ä»¬ä¹ æƒ¯è¯´äººç”Ÿé˜¶æ¢¯è¿™æ ·çš„è¯è¯­ï¼Œä½†å°‘æœ‰æƒ³è¿‡æˆ‘ä»¬çš„é˜¶æ¢¯æ˜¯ä»€ä¹ˆæ ·çš„ã€‚ä¸ƒå¹´æ˜¯æˆ‘è®¤ä¸ºå¯¹äººç”Ÿé˜¶æ®µå®šä¹‰å¾ˆå¥½çš„é‡Œç¨‹ç¢‘å¼äº‹ä»¶ã€‚</p><p>ä¸ƒå¹´ï¼Œä¸é•¿ä¸çŸ­ã€‚ç¬¬ä¸€ä¸ªä¸ƒå¹´ï¼Œæœ‰äº†è‡ªæˆ‘æ„è¯†ï¼›ç¬¬äºŒä¸ªä¸ƒå¹´ï¼Œæœ‰äº†ç”Ÿæ´»ç”Ÿå­˜æ„è¯†ï¼›ç¬¬ä¸‰ä¸ªä¸ƒå¹´ï¼Œæœ‰äº†æƒ…æ„Ÿæƒ…ç»ªæ„è¯†ï¼›ç¬¬å››ä¸ªä¸ƒå¹´ï¼Œæœ‰äº†è´£ä»»ã€‚</p><h2>ç¬¬å››é˜¶æ®µ</h2><blockquote><p>4 â¨‰ 7 = 28</p></blockquote><p>ç»“æŸäº†ç”Ÿå¦‚è™çš„å°‘å¹´æ—¶ä»£ï¼Œç»“æŸäº†æ— æ‰€ç•æƒ§ï¼Œç»“æŸäº†æ— å¿§æ— è™‘ã€‚</p><p>There are a lot of people that not make it go throught the 28, like my favorite DJ Avicii, sorry for them.</p><p>I know, need a lot courage to live, but only need one step to die. Life never gose easy until the end.</p><p>I don&#x27;t know what&#x27;s next I have to face, but I think I&#x27;m prepared for whatever it is.</p><p>æ¯ä¸€æ¬¡çš„ç»“æŸå½“ç„¶æ˜¯æ–°çš„å¼€å§‹ã€‚</p><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œ28-35ï¼Œä¸ºäººï¼Œå°†è¿æ¥ç”Ÿå‘½åŠ›çš„å·…å³°ï¼Œä¼¼ä¹ä¸€ç›´éƒ½åœ¨ä¸ºæ‰€è‚©è´Ÿè¿›è¡Œå‡†å¤‡ã€‚æœ‰æ‰€æœŸå¾…ï¼Œæ²¿é€”çš„é£æ™¯æˆ–è®¸æ‰æ˜¯æœ€å¤§çš„åŠ¨åŠ›ï¼›æœ‰æ‰€æœŸæœ›ï¼Œçœ‹ç€â€œå¥¹â€çš„å¼€å§‹æˆ–è®¸æ˜¯æ¯å¤©å¿«ä¹çš„æºæ³‰ï¼›æœ‰æ‰€é™ªä¼´ï¼Œä»¥è‡³äºä¸åœ¨å­¤å•ã€‚</p><p>So, I can keep going.</p><p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ–è®¸ä¼šæœ‰å¾ˆå¤šå¯¹ä¸èµ·ã€‚å¯¹ä¸èµ·é‚£äº›ç…§é¡¾é™ªä¼´ä½ çš„äººï¼Œå› ä¸ºä½ å°†æ²¡æœ‰é‚£ä¹ˆå¤šæ—¶é—´ç•™åœ¨ä»–ä»¬èº«è¾¹ï¼›å¯¹ä¸èµ·é‚£äº›æœŸæœ›ç€ä½ å›å®¶çš„äººå„¿ï¼Œå› ä¸ºä¼šæœ‰å¾ˆå¤šä¸ªæ—¥å¤œéƒ½ä¼šè¾œè´Ÿä»–ä»¬çš„ç­‰å¾…ï¼›æˆ–è®¸ï¼Œä¹Ÿä¼šå¯¹ä¸èµ·é‚£ä¸ªæœŸå¾…çš„è‡ªå·±ï¼Œä»Šå¤©çš„æ‰¿è¯ºä¸çŸ¥åœ¨æŸå¤©æ‰èƒ½è¾¾æˆã€‚</p><p>But, I have to keep going.</p><blockquote><p>May the path be with you.</p></blockquote><h2>å‚è€ƒ</h2><ul><li><a href="https://tommonte.com/the-7-year-cycles-of-life/">https://tommonte.com/the-7-year-cycles-of-life/</a><ul><li>The 7-Year Cycles of Life</li></ul></li><li>åŸæ–‡ - <a href="https://wener.me/blog/stage-four-of-life">https://wener.me/blog/stage-four-of-life</a><ul><li>Markdown - <a href="https://github.com/wenerme/wener/blob/master/story/2020/2020-08-16-stage-four-of-life.md">https://github.com/wenerme/wener/blob/master/story/2020/2020-08-16-stage-four-of-life.md</a></li></ul></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Kubernetes vs OpenStack]]></title>
        <id>kubernetes-vs-openstack</id>
        <link href="https://wener.me/story/kubernetes-vs-openstack"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[10å¹´è¶‹åŠ¿]]></summary>
        <content type="html"><![CDATA[<p><img src="./2020-09-28-kubernetes-vs-openstack-10y-trend.jpg" alt="10å¹´è¶‹åŠ¿"/></p><h2>ç®€ä»‹</h2><table><thead><tr><th>vs</th><th>OpenStack</th><th>Kubernetes</th></tr></thead><tbody><tr><td>èµ·æº</td><td>2010 å¹´ NASA+Rackspace</td><td>1.0 2015 å¹´ Google</td></tr><tr><td>å®šä½</td><td>ç§æœ‰äº‘</td><td>å®¹å™¨ç¼–æ’</td></tr><tr><td>ä¸»è¦è°ƒåº¦èµ„æº</td><td>è®¡ç®—/VM<br/>å­˜å‚¨<br/>ç½‘ç»œ</td><td>å®¹å™¨<br/>åŠé…å¥—å‘¨è¾¹èµ„æº<br/>è‡ªå®šä¹‰èµ„æº</td></tr><tr><td>ä¸»è¦ç¼–å†™è¯­è¨€</td><td>Python</td><td>Golang</td></tr></tbody></table><h2>åŒºåˆ«</h2><p>OpenStack ä¸ Kubernetes çš„åŒºåˆ«å°±ç­‰åŒäºè™šæ‹Ÿæœºä¸å®¹å™¨çš„åŒºåˆ«ï¼ŒDocker ä¸ VirtualBox çš„åŒºåˆ«ã€‚</p><h3>OpenStack</h3><p>OpenStack çš„å­˜åœ¨ä¸»è¦è§£å†³åŸºç¡€è®¾æ–½ç®¡ç†ï¼Œé‚£å¹´ä»£ä¹Ÿæ­£å€¼å¤§æ•°æ®å¿«é€Ÿå‘å±•ï¼Œå®¹å™¨è¿˜æ²¡æœ‰å‡ºç°äºå…¬ä¼—è§†é‡ã€‚
OpenStack æä¾›äº†ä¸€æ•´å¥—çš„ç§æœ‰äº‘è§£å†³æ–¹æ¡ˆï¼Œæä¾›æœ€ä¸ºåŸºç¡€çš„è®¾æ–½å±‚äº‘åŒ–ã€‚å› ä¸ºæ˜¯è®¾æ–½å±‚äº‘åŒ–ï¼ŒOpenStack æ˜¯éœ€è¦åœ¨è£¸æœºæœåŠ¡å™¨ä¸Šè¿è¡Œçš„ï¼ŒåŸºç¡€å¹³å°å³éœ€è¦ç›¸å½“çš„èµ„æºã€‚
OpenStack å‡ºç°åå…´èµ·è¿‡ä¸€æ®µæ½®æµï¼Œä¸å°‘ä¼ä¸šå¼€å§‹ç»„å»ºäº‘ï¼Œå¹¶æä¾›æœåŠ¡ï¼Œæˆ‘å°è±¡æ·±åˆ»çš„ä¾¿æ˜¯äº¬ä¸œäº‘ã€‚ä½†åœ¨ 2015 å¹´ Kubernetes 1.0 å‘å¸ƒåï¼Œå¤§é‡ä¼ä¸šå¼€å§‹è¿å‡º OpenStackï¼Œè½¬å‘ Kubernetsã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ OpenStack å‘¢ï¼Ÿ</p><ol><li><strong>æ ¸å¿ƒä¸šåŠ¡æ˜¯æä¾›å…¬æœ‰äº‘</strong></li></ol><ul><li>è™šæ‹Ÿæœº</li><li>è™šæ‹Ÿç½‘ç»œ</li><li>è™šæ‹Ÿå­˜å‚¨</li></ul><ol start="2"><li>æœ‰ OpenStack ä¸“ç”¨æœºæˆ¿</li><li>æœ‰ OpenStack ä¸“å®¶å›¢é˜Ÿ</li><li>æœ‰è¶³å¤Ÿçš„èµ„é‡‘æ”¯ä»˜ OpenStack å’¨è¯¢/æ”¯æŒè´¹ç”¨</li></ol><p>OpenStack åªè´Ÿè´£è§£å†³åŸºç¡€è®¾æ–½çš„ç®¡ç†éš”ç¦»ï¼Œä¸è´Ÿè´£è§£å†³æœåŠ¡éƒ¨ç½²è¿ç»´ï¼Œä¸è´Ÿè´£æ”¯æ’‘ Web è§„æ¨¡çš„åº”ç”¨ã€‚</p><h3>Kubernetes</h3><p>Kubernetes çš„å‡ºç°å’Œå…´èµ·æ˜¯å®¹å™¨å‘å±•åçš„ç»“æœã€‚</p><ul><li>2007 å¹´ cgroups çš„å‡ºç°å®ç°äº†è¿›ç¨‹èµ„æºéš”ç¦» - æ¥æºäº Google</li><li>2008 å¹´ lxc åŸºæœ¬å®ç°äº† Linux çš„ç³»ç»Ÿçº§è™šæ‹ŸåŒ– - åŸºäº cgroups å’Œ å‘½åç©ºé—´</li><li>2013 å¹´ google å¼€æºå¯å†…éƒ¨å®¹å™¨æŠ€æœ¯æ ˆ <a href="https://github.com/google/lmctfy">lmctfy</a> å®ç°äº† Linux ä¸‹åº”ç”¨éš”ç¦»</li><li>2013 å¹´ Docker å‡ºç°åœ¨å…¬ä¼—è§†é‡ - åŸºäº LXC</li><li>2014 å¹´ CoreOS çš„ RTK å‡ºç°ï¼Œæ¨è¿›å®¹å™¨çš„å‘å±•<ul><li>åªæä¾›å®¹å™¨çš„ç³»ç»Ÿï¼Œå°±å¥½æ¯” xen çš„ dom0 åªæä¾›è™šæ‹ŸåŒ–</li></ul></li><li>2015 å¹´ Kubernetes 1.0</li><li>2016 å¹´ Windows æ”¯æŒå®¹å™¨åŒ–æŠ€æœ¯</li></ul><p>åˆ°ä»Šå¤©ï¼ŒKubernetes ä¸åªæ˜¯ç”¨äºè°ƒåº¦å®¹å™¨ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªæ³›ç”¨çš„é›†ç¾¤èµ„æºè°ƒåº¦å¹³å°ã€‚</p><p>Kubernetes ä¹Ÿå¯ä»¥è¢«å®šä¹‰ä¸º IaaSï¼Œå› ä¸ºæä¾›äº†è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œçš„èƒ½åŠ›ï¼Œä½†åˆä¸ä¼ ç»Ÿçš„åŸºç¡€è®¾æ–½ä¸å¤ªç›¸åŒï¼Œæ›´åŠ è½»é‡ä¾¿æ·ã€‚è¿™æ—¶å€™å¦‚ä½•é€‰æ‹©ï¼Œå°±çœ‹éœ€è¦åŸºç¡€è®¾æ–½è¿ç»´å±‚äº¤ä»˜ä»€ä¹ˆæ ·çš„èµ„æºå†…å®¹ã€‚</p><p>Kubernetes çš„å‡ºç°ä½¿å¾—è¿ç»´æ¦‚å¿µæ›´åŠ æ³›åŒ–ï¼ŒDevOps çš„æ¦‚å¿µå…´èµ·ï¼ŒåŸºç¡€è®¾æ–½ä¸å¼€å‘äººå‘˜è·ç¦»å˜å¾—æ›´ä¸ºæ¥è¿‘ã€‚
Kubernetes é™¤äº†æä¾›åŸºç¡€çš„å®¹å™¨éƒ¨ç½²ï¼Œè¿˜æä¾›äº†å®ç°è§„æ¨¡æœåŠ¡éœ€è¦çš„æ‰€æœ‰èµ„æºç±»å‹ï¼Œä¾‹å¦‚ æœåŠ¡ã€Ingressã€é…ç½®ã€å¯†é’¥ ç­‰ç­‰ï¼Œè¿™ä¸€å±‚æ˜¯ OpenStack ä¸å¯èƒ½æ¶‰åŠçš„ã€‚</p><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Kubernetes ï¼Ÿ</p><ol><li>å½“ä¸»æœºä¸æ­¢ä¸€å°ã€åº”ç”¨ä¸åªä¸€ä¸ª</li><li>æ ¸å¿ƒäº¤ä»˜äº§å“æ˜¯æœåŠ¡</li></ol><h2>äº’è¡¥</h2><ul><li>Kubernetes å¯ä»¥é€‰æ‹©è¿è¡Œåœ¨ OpenStack ä¸­</li><li>OpenStack å¯ä»¥é€šè¿‡ LXD å°±è¡Œè°ƒåº¦å®¹å™¨</li><li>Kubernetes å¯ä»¥æä¾›è™šæ‹Ÿæœºçš„ä½“éªŒ<ul><li>å®¹å™¨å®‰è£… SSH</li><li>ä½¿ç”¨ Kubvirt è°ƒåº¦è™šæ‹Ÿæœº</li></ul></li><li>Kubernetes å¯ä»¥æä¾›è™šæ‹Ÿæœºç¨‹åº¦çš„éš”ç¦»</li></ul><h2>éå¸¸è§„å¹³å°</h2><p>OpenStack å’Œ Kubernetes éƒ½æ˜¯é€šç”¨çš„äº‘å¹³å° - é€šç”¨è®¡ç®—ã€é€šç”¨å­˜å‚¨ã€é€šç”¨ç½‘ç»œã€‚
æœ‰äº›æ—¶å€™å¹³å°åœºæ™¯å¹¶ä¸æ˜¯æ³›ç”¨çš„åœºæ™¯ï¼Œä¾‹å¦‚</p><ul><li>ç§æœ‰å­˜å‚¨äº‘</li><li>æµæ•°æ®å¤„ç†å¹³å°</li><li>è¾¹ç¼˜èŠ‚ç‚¹è°ƒåº¦</li><li>å¤§æ•°æ® - è®¡ç®—ã€å­˜å‚¨</li><li>GPU è®¡ç®—</li></ul><p>è¿™æ—¶å€™åˆ™éœ€è¦æŒ‰éœ€é€‰æ‹©å¯¹åº”çš„è°ƒåº¦å¹³å°æˆ–å·¥å…·ã€‚ä¾‹å¦‚ å­˜å‚¨ä½¿ç”¨ Cephï¼Œå¹¶ä¸æ˜¯ä¸€å®šéœ€è¦éƒ¨ç½²åœ¨ Kubernetes ä¹‹ä¸Šï¼Œå¤§æ‰¹é‡çš„è¾¹ç¼˜èŠ‚ç‚¹è°ƒåº¦å¯èƒ½ Nomad ä¼šæ›´åŠ é€‚åˆï¼Œå¤§æ•°æ®å¹³å°å¯èƒ½æœ‰ Hadoop æ›´åŠ é€‚åˆçš„åœºæ™¯ã€‚</p><p>ä½†ä¸å¯å¦è®¤çš„æ˜¯ï¼Œ99% çš„ä¼ä¸šéƒ½æ˜¯å±äºé€šç”¨çš„ä¸€ç±»ï¼Œå› æ­¤ 99% çš„åœºæ™¯é€‰æ‹© Kubernetes å³å¯ã€‚</p><h2>å‚è€ƒ</h2><ul><li><a href="https://yq.aliyun.com/articles/139446">äº¬ä¸œå¦‚ä½•ä» OpenStack è¿ç§»è‡³ Kubernetes</a></li><li><a href="https://www.suse.com/c/the-future-of-openstack/">The future of OpenStack?</a></li><li><a href="https://qr.ae/pNPMWM">What is the future of Openstack?</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Firecracker è¿è¡Œ AlpineLinux]]></title>
        <id>alpine-in-firecracker</id>
        <link href="https://wener.me/story/alpine-in-firecracker"/>
        <updated>2022-03-26T20:52:21.853Z</updated>
        <summary type="html"><![CDATA[Firecracker æ˜¯äºšé©¬é€Š AWS ä¸ºäº†è§£å†³è™šæ‹ŸåŒ–è¿è¡Œ serveless æœåŠ¡å®ç°çš„ VMM/Virtual Machine Monitorï¼Œä½œä¸º QEMU çš„æ›¿ä»£å“ï¼Œä¸“æ³¨äºä¸ºäº‘ä¸Šç¯å¢ƒæä¾›è™šæ‹ŸåŒ–ã€‚]]></summary>
        <content type="html"><![CDATA[<p>Firecracker æ˜¯äºšé©¬é€Š AWS ä¸ºäº†è§£å†³è™šæ‹ŸåŒ–è¿è¡Œ serveless æœåŠ¡å®ç°çš„ VMM/Virtual Machine Monitorï¼Œä½œä¸º QEMU çš„æ›¿ä»£å“ï¼Œä¸“æ³¨äºä¸ºäº‘ä¸Šç¯å¢ƒæä¾›è™šæ‹ŸåŒ–ã€‚</p><p><strong>ä¼˜ç‚¹</strong></p><ul><li>å¯åŠ¨å¿« &lt; 125ms</li><li>å†…å­˜å ç”¨å°‘ &lt; 5mb</li><li>Rust å®ç°</li><li>musl é™æ€é“¾æ¥</li><li>firecracker è‡ªèº«çº¦ <strong>1.6 MB</strong> - <strong>æ— ä¾èµ–</strong></li></ul><p><strong>è®¾è®¡ç›®æ ‡/ç¼ºé™·</strong></p><ul><li>åŸºäº KVM å®ç°<ul><li>åªæœ‰ Linux å¹³å°</li><li>åªèƒ½è¿è¡Œç›¸åŒæ¶æ„</li></ul></li><li>ä¸“æ³¨äºè™šæ‹ŸåŒ–åœºæ™¯<ul><li>æ”¯æŒçš„è™šæ‹Ÿè®¾å¤‡å°‘<ul><li>virtio-net - è™šæ‹ŸåŒ–ç½‘ç»œ</li><li>virtio-block - è™šæ‹ŸåŒ–å—è®¾å¤‡</li><li>virtio-vsock - unix sock</li><li>ä¸²å£ - ttyS0 ç»ˆç«¯ç™»é™†</li><li>æœ€ç®€é”®ç›˜æ§åˆ¶å™¨</li></ul></li><li>æ²¡æœ‰ bios</li><li>é€šè¿‡ vmlinux+initramfs+rootfs å¯åŠ¨</li></ul></li><li>è¦æ±‚ Kernel 4.14+</li></ul><p><strong>ä¸ºä»€ä¹ˆé€‰æ‹© Alpineï¼Ÿ</strong></p><ul><li>æœ€å®¹æ˜“æ„å»º</li><li>æœ€å®¹æ˜“ä½¿ç”¨</li><li>æ„å»º Firecracker èƒ½ä½¿ç”¨çš„ CentOS, Debian, Ubuntu, Fedora çœŸå¤ªéš¾äº† - å¦‚æœæ²¡æŒæ¡å†…éƒ¨å¯åŠ¨æœºåˆ¶ä¸å»ºè®®å°è¯•</li></ul><h2>æ³¨æ„</h2><p>ä¸€äº›æ³¨æ„äº‹é¡¹å†™åœ¨å‰é¢ï¼š</p><p>:::info Firecracker æ³¨æ„ç‚¹</p><ul><li>æ²¡æœ‰ç”µæºç®¡ç†ï¼Œå› æ­¤ä¸æ”¯æŒé‡å¯ï¼Œä¼šç›´æ¥é€€å‡º</li><li>ç³»ç»Ÿå†… poweroff æˆ– halt ä¸ä¼šé€€å‡º - reboot ä¼š</li><li>å¯ä»¥å‘é€ SendCtrlAltDel é€€å‡º</li><li>ä¸æ”¯æŒ QCOW2 æ ¼å¼ï¼Œå¯ä»¥è€ƒè™‘é…åˆ NDB ä½¿ç”¨</li><li>alpine å†…æ ¸éœ€è¦ boot-source.initrd_path =&gt; initramfs-virt</li><li>alpine netboot çš„ initramfs-virt æ²¡æœ‰ ext4</li></ul><p>:::</p><h2>å®‰è£…</h2><p>Firecracker çš„<a href="https://github.com/firecracker-microvm/firecracker/releases">å‘å¸ƒé¡µ</a>å¯ç›´æ¥ä¸‹è½½æ¯ä¸ªç‰ˆæœ¬ã€‚è¿™é‡Œä½¿ç”¨ curl ä¸‹è½½æœ€æ–°ç‰ˆå¹¶å®‰è£…åˆ° <code>/usr/loca/bin</code>ã€‚</p><pre><code class="language-bash"># ä¸‹è½½å®‰è£… firecracker åˆ° /usr/local/bin/firecracker
latest=$(basename $(curl -fsSLI -o /dev/null -w  %{url_effective} https://github.com/firecracker-microvm/firecracker/releases/latest))
sudo curl -L -o /usr/local/bin/firecracker https://github.com/firecracker-microvm/firecracker/releases/download/${latest}/firecracker-${latest}-$(uname -m)
sudo chmod +x /usr/local/bin/firecracker
</code></pre><h2>rootfs</h2><p>å¯åŠ¨ firecracker éœ€è¦ kernel å’Œ rootfsï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™å¯èƒ½å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨å‡†å¤‡ rootfsã€‚è¿™é‡Œä½¿ç”¨ alpinelinuxï¼ŒåŠŸèƒ½å®Œå–„æ„å»ºç®€å•ã€‚</p><p>å› ä¸º alpine éƒ½ä¼šæä¾›åŸºç¡€çš„ rootfsï¼Œè¿™é‡Œç›´æ¥ä¸‹è½½è§£å‹åˆ° ext4 çš„ loopdev ä¸­ã€‚</p><pre><code class="language-bash"># åˆ›å»º root ç›˜
qemu-img create -f raw alpine.rootfs.ext4 1G
# æ ¼å¼åŒ–ä¸º ext4
mkfs.ext4 ./alpine.rootfs.ext4
# æŒ‚è½½åˆ° /tmp/rootfs
mkdir /tmp/rootfs
sudo mount alpine.rootfs.ext4 /tmp/rootfs

# ä¸‹è½½ rootfs
curl -OJ https://mirrors.aliyun.com/alpine/v3.12/releases/x86_64/alpine-minirootfs-3.12.0-x86_64.tar.gz
# å®‰è£…åˆ° /tmp/rootfs
sudo tar zxvf alpine-minirootfs-3.12.0-x86_64.tar.gz -C /tmp/rootfs/
</code></pre><p>åŸºç¡€ rootfs è¿˜ä¸è¶³ä»¥å¯åŠ¨ç³»ç»Ÿï¼Œå› ä¸ºæ— æ³•è¿›è¡Œç³»ç»Ÿ initï¼Œå› æ­¤è¿˜éœ€è¦åœ¨ rootfs ä¸­å®‰è£…å¿…è¦çš„åŒ…å¯åŠ¨å¿…è¦çš„æœåŠ¡ã€‚</p><p>è¿›å…¥ rootfs ä¹‹å‰éœ€è¦ resolv.confï¼ŒåŒ…å«äº† DNS ä¿¡æ¯ã€‚</p><pre><code class="language-bash"># æ‹·è´ dns é…ç½® - æ²¡æœ‰ä¼šæ— æ³•è¿›è¡Œ dns è§£æ
sudo cp /etc/resolv.conf /tmp/rootfs/etc
# å¦‚æœä¸»æœºæ˜¯ alpinelinux å¯ä»¥ä»ä¸»æœºæ‹·è´é…é•œåƒç½®æ–‡ä»¶
# å¦‚æœä¸æ˜¯å»ºè®®è®¾ç½®é•œåƒ
# sudo cp /etc/apk/repositories /tmp/rootfs/etc/apk/repositories

# chroot è¿›å…¥ rootfs å®‰è£…ç¯å¢ƒ
sudo chroot /tmp/rootfs/ /bin/sh
</code></pre><p>æ­¤æ—¶è¿›å…¥äº† rootfsï¼Œå› ä¸ºæ²¡æœ‰æŒ‚è½½ procfsã€sysfs ç­‰ç›®å½•ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªèƒ½å®Œæ•´ä½¿ç”¨çš„ rootfsï¼Œä½†å¯¹äºå®‰è£…åŒ…æ¥è¯´å·²ç»è¶³å¤Ÿã€‚</p><ul><li><a href="https://pkgs.alpinelinux.org/package/v3.12/main/x86_64/alpine-base">alpine-base</a><ul><li>åŸºç¡€ç³»ç»Ÿ</li><li>ä¾èµ–äº† openrcï¼Œlayoutï¼Œbusyboxï¼Œapkï¼Œconf ç­‰åŸºç¡€åŒ…</li></ul></li><li>linux-virt<ul><li>virt å†…æ ¸ - ä¸åŒ…å«å›ºä»¶ï¼ˆ200MB å·¦å³ï¼‰ï¼Œé»˜è®¤ init åŒ…å« virtio ç­‰å†…æ ¸æ¨¡å—</li><li>å®‰è£…åèƒ½è·å–åˆ°å†…æ ¸å’Œ initramfs</li><li>/boot ä¸‹ vmlinuz+initramfs+System.map çº¦ 15MB - å¯åŠ¨æ˜¯ä¸éœ€è¦çš„ï¼Œæ‹¿åˆ°åå¯ä»¥åˆ é™¤</li></ul></li><li>haveged<ul><li>éšæœºç†µæœåŠ¡</li><li>è™šæ‹ŸåŒ–ç¯å¢ƒèƒ½æ›´å¿«å¯åŠ¨ï¼Œå¦åˆ™ç†µåˆå§‹åŒ–å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ</li></ul></li></ul><pre><code class="language-bash">apk add alpine-base linux-virt haveged
# å¼€æœºå¯åŠ¨
rc-update add haveged
# root è´¦å·å¯†ç 
echo root:root | chpasswd
# åŸºç¡€æœåŠ¡
for svc in devfs procfs sysfs; do ln -fs /etc/init.d/$svc /etc/runlevels/boot; done
exit

# firecracker ä½¿ç”¨ ttyS0
ln -s agetty /etc/init.d/agetty.ttyS0
echo ttyS0 &gt; /etc/securetty
rc-update add agetty.ttyS0 default

# ä» rootfs è·å–åˆ° vmlinuz å’Œ initramfs
sudo cp /tmp/rootfs/boot/initramfs-virt initramfs-virt
sudo cp /tmp/rootfs/boot/vmlinuz-virt vmlinuz-virt

# å–æ¶ˆæŒ‚è½½
sudo umount /tmp/rootfs
</code></pre><p>rootfs å‡†å¤‡å®Œæˆã€‚</p><h2>vmlinux+initrd</h2><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ rootfs æ‹¿åˆ°çš„ Linux å†…æ ¸ vmlinuz-virt å’Œåˆå§‹å†…å­˜é•œåƒ initramfs-virt</p><ul><li>vmlinuz-virt<ul><li>å‹ç¼©åçš„ Linux å†…æ ¸ - éœ€è¦è§£å‹å firecracker æ‰èƒ½è¯†åˆ«</li><li>è§£å‹åä¸º ELF æ ¼å¼å¯æ‰§è¡Œæ–‡ä»¶ - ä¸ä¸€èˆ¬ Linux ä¸‹å¯æ‰§è¡Œæ–‡ä»¶ç›¸åŒ</li></ul></li><li>initramfs-virt<ul><li>å‹ç¼©åçš„ cpio æ ¼å¼</li><li>åŒ…å«äº† Linux å†…æ ¸éœ€è¦çš„ virtio å’Œ ext4 ç­‰æ¨¡å—</li><li>åŒ…å«äº† Alpine çš„ init ç³»ç»Ÿ<ul><li>åŠ è½½å†…æ ¸æ¨¡å—</li><li>æ‰¾åˆ°å¹¶æŒ‚è½½ rootfs</li></ul></li></ul></li></ul><p>å› ä¸ºå†…æ ¸æ˜¯å‹ç¼©åçš„ï¼Œå› æ­¤è¿˜éœ€è¦è¿›è¡Œè§£å‹</p><pre><code class="language-bash"># ä¸‹è½½å®‰è£… extract-vmlinux
sudo curl -L -o /usr/local/bin/extract-vmlinux https://raw.githubusercontent.com/torvalds/linux/master/scripts/extract-vmlinux
sudo chmod +x /usr/local/bin/extract-vmlinux
# è§£å‹ vmlinuz-virt
extract-vmlinux vmlinuz-virt &gt; vmlinux-virt
</code></pre><h2>å¯åŠ¨</h2><p>æ‰€æœ‰å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼Œå¾—åˆ°</p><ul><li>alpine.rootfs.ext4 - ç³»ç»Ÿç›˜</li><li>vmlinux-virt - å†…æ ¸</li><li>initramfs-virt - åˆå§‹å†…å­˜é•œåƒ</li></ul><p>firecracker æœ‰ä¸¤ç§å¯åŠ¨æ–¹å¼</p><ol><li>ç›‘å¬ç«¯å£/socket</li></ol><ul><li>é€šè¿‡è°ƒç”¨æ¥å£é…ç½® rootfsã€å†…æ ¸ç­‰</li><li>é…ç½®å®Œæˆåè¯·æ±‚ InstanceStart è¿›è¡Œå¯åŠ¨</li></ul><ol start="2"><li>é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®</li></ol><ul><li>é…ç½®æ–‡ä»¶ç­‰åŒäºæ¥å£è¯·æ±‚</li><li>å‚æ•°å†…å®¹å’Œè·¯å¾„ä¸æ¥å£ä¸€è‡´</li></ul><p>è¿™é‡Œä½¿ç”¨æ–¹æ³• #2ï¼Œå› ä¸ºæ–¹ä¾¿ä¹¦å†™ç¼–è¾‘ç®€å•ã€‚</p><pre><code class="language-bash"># ç”Ÿæˆ alpine.json é…ç½®
cat &lt;&lt;CONF &gt; alpine.json
{
  &quot;boot-source&quot;: {
    &quot;initrd_path&quot;: &quot;initramfs-virt&quot;,
    &quot;kernel_image_path&quot;: &quot;vmlinux-virt&quot;,
    &quot;boot_args&quot;: &quot;console=ttyS0 reboot=k panic=1 pci=off modules=virtio_mmio,ext4 rootfstype=ext4&quot;
  },
  &quot;drives&quot;: [
    {
      &quot;drive_id&quot;: &quot;rootfs&quot;,
      &quot;path_on_host&quot;: &quot;alpine.rootfs.ext4&quot;,
      &quot;is_root_device&quot;: true,
      &quot;is_read_only&quot;: false
    }
  ],
  &quot;machine-config&quot;: {
    &quot;vcpu_count&quot;: 1,
    &quot;mem_size_mib&quot;: 1024,
    &quot;ht_enabled&quot;: false
  }
}
CONF

# é…ç½®å®Œæˆ - å¯åŠ¨
# è¿›å…¥åä½¿ç”¨ root:root ç™»é™†
firecracker --api-sock /tmp/firecracker.socket --config-file alpine.json
</code></pre><h2>åœæ­¢</h2><p>:::caution Firecracker ä¸èƒ½æ­£å¸¸å…³æœº</p><p>firecracker ä¸èƒ½ä½¿ç”¨ poweroff å…³æœºï¼Œå¦‚æœä½¿ç”¨äº† poweroff åˆ™åªèƒ½ kill è¿›ç¨‹æ¥é€€å‡ºã€‚</p><p>:::</p><p>åœ¨ç³»ç»Ÿä¹‹å¤–å¯ä»¥è¯·æ±‚ <code>Ctrl+Alt+Del</code> è¿›è¡Œå…³æœºï¼Œå®è´¨ä¸Šæ˜¯é‡å¯çš„æ•ˆæœï¼Œä½†å› ä¸º firecracker ä¸èƒ½é‡å¯ï¼Œå› æ­¤ init é€€å‡ºåå°±å…³æœºäº†ã€‚</p><pre><code class="language-bash">curl --unix-socket /tmp/firecracker.socket -i \
    -X PUT &quot;http://localhost/actions&quot; \
    -H  &quot;accept: application/json&quot; \
    -H  &quot;Content-Type: application/json&quot; \
    -d &#x27;{&quot;action_type&quot;: &quot;SendCtrlAltDel&quot;}&#x27;
</code></pre><p>ç³»ç»Ÿå†…å¯ä»¥ç›´æ¥ <code>reboot</code> è¿›è¡Œå…³æœºã€‚</p><h2>æ€»ç»“</h2><p>Firecracker ä½¿ç”¨èµ·æ¥è›®æƒŠè‰³ï¼Œèƒ½æˆåŠŸçš„å¿«é€Ÿçš„å¯åŠ¨ç³»ç»Ÿï¼Œå¯åŠ¨é€Ÿåº¦ä¼šæ¯” QEMU å¿«ä¸å°‘ï¼Œå› ä¸ºå°‘äº† biosã€bootloaderã€å†…æ ¸è§£å‹ ç­‰è¿‡ç¨‹ã€‚</p><p>å› ä¸º Firecracker ä¼˜ç¼ºç‚¹éå¸¸æ˜æ˜¾ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹é€‚ç”¨åœºæ™¯ï¼š</p><ul><li>serveless åœºæ™¯ - éœ€è¦å¿«é€Ÿèµ·åœï¼Œå®‰å…¨éš”ç¦»ï¼Œç¯å¢ƒç‹¬ç«‹</li><li>å¤„äºå®‰å…¨è€ƒè™‘è¿›è¡Œå®¹å™¨æ‰§è¡Œç¯å¢ƒéš”ç¦» - ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶</li><li>å°†åº”ç”¨æ‰“åŒ…ä¸ºç³»ç»Ÿè¿›è¡Œåˆ†å‘ï¼Œä½¿ç”¨ firecracker å±è”½ç³»ç»Ÿå·®å¼‚</li></ul><p>ä¸é€‚ç”¨åœºæ™¯ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p><ul><li>å¦‚æœéœ€è¦ä½¿ç”¨ CentOSã€Debianã€Ubuntu ä¹‹ç±»ç³»ç»Ÿï¼Œéå¸¸ä¸å»ºè®®<ul><li>æ„é€ ä¸€ä¸ªå¯ä½¿ç”¨çš„ rootfs å’Œ initramfs éå¸¸éº»çƒ¦</li></ul></li><li>éœ€è¦ç”¨åˆ°çš„è®¾å¤‡ firecracker å¯èƒ½ä¸æ”¯æŒ</li><li>éœ€è¦é€ä¼ è®¾å¤‡åˆ° VM</li></ul><p>Firecracker ç›¸å¯¹è¾ƒæ–°ï¼Œé›†æˆä½¿ç”¨æ–¹é¢è¿˜æœ‰æ‰€æ¬ ç¼ºï¼Œä½†åœ¨ Firecracker æ“…é•¿çš„é¢†åŸŸä½¿ç”¨èµ·æ¥æ˜¯éå¸¸èˆ’æœçš„ã€‚</p><h2>å‚è€ƒ</h2><ul><li><a href="https://gist.github.com/wenerme/97a2f088496bb3e6492ef7e8fe23da8a">boot-alpine-in-firecracker.sh</a> - ä»¥ä¸Šæ‰€æœ‰ä»£ç </li><li><a href="https://github.com/firecracker-microvm/firecracker">firecracker-microvm/firecracker</a> - æ ¸å¿ƒä»“åº“</li><li><a href="https://github.com/firecracker-microvm/firectl">firecracker-microvm/firectl</a> - Golang å®ç°ç”¨äºç®¡ç† firecracker è™šæ‹Ÿæœºçš„è¾…åŠ©å·¥å…·</li><li><a href="https://github.com/firecracker-microvm/firecracker-go-sdk">firecracker-microvm/firecracker-go-sdk</a> - Golang ç›´æ¥æ“ä½œ Firecracker</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Wener's APIs]]></title>
        <id>wener-apis</id>
        <link href="https://wener.me/story/wener-apis"/>
        <updated>2020-01-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dev]]></summary>
        <content type="html"><![CDATA[<h2>Dev</h2><pre><code class="language-bash"># lite dev
MOD_NAME=boot,root,test,dash,geo,client yarn rollup -c rollup.mod.ts --watch
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Java with GraphQL]]></title>
        <id>jraphql</id>
        <link href="https://wener.me/story/jraphql"/>
        <updated>2018-05-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Java with GraphQL]]></summary>
        <content type="html"><![CDATA[<p>Java with GraphQL</p><table><thead><tr><th>Module</th><th>Description</th></tr></thead><tbody><tr><td>jraphql-lang</td><td>GraphQL language representation</td></tr><tr><td>jraphql-runtime</td><td>GraphQL execution engine</td></tr><tr><td>jraphql-parser-antlr</td><td>Parser written in Antlr4 parse to jraphql-lang</td></tr></tbody></table><h2>Get Started</h2><ul><li>Maven <a href="https://search.maven.org/#search%7Cga%7C1%7Cg%3A%22me.wener.jraphql%22">me.wener.jraphql</a></li></ul><pre><code>&lt;dependency&gt;
  &lt;groupId&gt;me.wener.jraphql&lt;/groupId&gt;
  &lt;artifactId&gt;jraphql-runtimer&lt;/artifactId&gt;
  &lt;version&gt;0.0.6&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;me.wener.jraphql&lt;/groupId&gt;
  &lt;artifactId&gt;jraphql-parser-antlr&lt;/artifactId&gt;
  &lt;version&gt;0.0.6&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><h2>Features</h2><h3>Language representation</h3><table><thead><tr><th>Feature</th><th>Description</th></tr></thead><tbody><tr><td><strong>Serializable</strong></td><td>can parse or stringify to or from JSON</td></tr><tr><td><strong>Immutable</strong></td><td>friendly to cache or precompile</td></tr><tr><td><strong>Buildable</strong></td><td>every type has a builder for it generated by lombok.</td></tr><tr><td><strong>Pluggable</strong></td><td>language representation is not related to parser impl</td></tr></tbody></table><h3>Syntax Extension</h3><h4>Add <code>extend by name</code> syntax for object and interface</h4><h4>Weave multi schemas</h4><pre><code class="language-graphql"># common.graphqls
scalar Version

# crm.graphqls
type CrmQuery {
  customer(id:ID!):Customer
  crmVersion: Version!
}
type CrmUser {
  customers: [Customer]
}
extend type Query by CrmQuery
extend type User by CrmUser

# erp.graphqls
type ErpQuery {
  product(id:ID!):Product
}
extend type Query by ErpQuery
</code></pre><h4>Conditional schema</h4><pre><code class="language-graphql"># Only admin can see and use these methods
type AdminMutation {
  changePassword(id:ID,password:String): ChangePasswordPayload
}
extend type Mutation by AdminMutation @Role(role:&quot;admin&quot;)
</code></pre><h4>Allowed directives on directive definition, add DIRECTIVE location</h4><pre><code class="language-graphql">directive @JavaType(type:String) on DIRECTIVE
directive @Auth(value:String) @JavaType(type:&quot;Auth&quot;) on FIELD_DEFINITION;
</code></pre><h4>Allowed schema has optional name</h4><pre><code class="language-graphql">schema Test {
  query: MyQuery
}
</code></pre><h3>Runtime Extension</h3><ol><li>Type implements interface don&#x27;t need to write the fields again.</li></ol><pre><code class="language-graphql">interface Node {
    id: ID!
}

type User implements Node {
    # id: ID! # This is optional
}
</code></pre><ol start="2"><li>Can disable introspection<ul><li><code>new MetaResolver().setDisableIntrospection(true)</code></li></ul></li></ol><h3>Embeddable Schema</h3><p>JraphQL Runtime contain a embedded schema <a href="https://raw.githubusercontent.com/wenerme/jraphql/master/jraphql-runtime/src/main/java/me/wener/jraphql/schema/MetaSchema.java">MetaSchema</a>, generated by <a href="https://raw.githubusercontent.com/wenerme/jraphql/master/jraphql-runtime/src/test/java/me/wener/jraphql/example/EmbededSchema.java">EmbededSchema</a>.   </p><ul><li>Parse Schema</li><li>Serialize to JSON</li><li>Best compress GZip</li><li>Encode use mime base64</li><li>Original JSON 32631 byte -&gt; Encoded Base64 5352 byte</li></ul><h2>Example</h2><h3>StarWar</h3><ul><li><a href="https://raw.githubusercontent.com/wenerme/jraphql/master/jraphql-runtime/src/test/java/me/wener/jraphql/example/StarWarApplication.java">StarWarApplication</a><ul><li>SpringBoot WebFlux based</li><li>start and visite http://localhost:8080</li></ul></li><li><a href="https://raw.githubusercontent.com/wenerme/jraphql/master/jraphql-runtime/src/test/java/me/wener/jraphql/example/StarWarResolverV1.java">StarWarResolver</a><ul><li>resolve the StarWar schema. </li></ul></li></ul><p>Queries you can try</p><pre><code class="language-graphql">mutation addRev {
  createReview(episode: EMPIRE, review: {stars: 4, commentary: &quot;Ok Good&quot;}) {
    stars
    commentary
  }
}

query rev($e:Episode = EMPIRE) {
  hero(episode: $e) {
    id
    name
    appearsIn
  }
  reviews(episode: $e) {
    stars
    commentary
  }
}

query search {
  search(text: &quot;o&quot;) {
    __typename
    ... on Human {
      id
      name
    }
    ... on Droid {
      primaryFunction
    }
    ... on Starship {
      length
    }
  }
}

query baseQuery {
  starship(id: &quot;3000&quot;) {
    id
    name
    length(unit: FOOT)
  }
  character(id: &quot;2000&quot;) {
    id
    ... on Human {
      mass
      starships {
        name
      }
    }
    ... on Droid {
      name
      appearsIn
    }
  }
  human(id: &quot;1003&quot;) {
    friendsConnection(after: &quot;1002&quot;) {
      friends {
        name
      }
      pageInfo {
        hasNextPage
        startCursor
        endCursor
      }
    }
    friends {
      name
    }
  }
}
</code></pre><h2>Work with GoaphQL</h2><p><a href="https://github.com/wenerme/goaphql">GoaphQL</a> can generate code from schema that depends on jrapgql-api, can directly run on jraphql-graphql-java-adapter.  </p><p>The generated code is static type and full featured, everything is an interface.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åˆ†å¸ƒå¼æ¶æ„æ‰‹è®°]]></title>
        <id>learning-dist-arch</id>
        <link href="https://wener.me/story/learning-dist-arch"/>
        <updated>2016-08-25T15:33:00.000Z</updated>
        <summary type="html"><![CDATA[è¿™å‡ å¤©å°è¯•äº†å¾ˆå¤šçš„ \*aaS, æœŸæœ›èƒ½æ‰¾åˆ°åœ¨å½“å‰æ¶æ„ä¸‹é€‚åˆå…¬å¸åç»­å‘å±•çš„ä¸€ä¸ªç³»ç»Ÿæ¶æ„, ç„¶è€Œä¸€è·¯ä¸‹æ¥å‘ç°å¹¶æ²¡é‚£ä¹ˆç®€å•.]]></summary>
        <content type="html"><![CDATA[<p>è¿™å‡ å¤©å°è¯•äº†å¾ˆå¤šçš„ <!-- -->*<!-- -->aaS, æœŸæœ›èƒ½æ‰¾åˆ°åœ¨å½“å‰æ¶æ„ä¸‹é€‚åˆå…¬å¸åç»­å‘å±•çš„ä¸€ä¸ªç³»ç»Ÿæ¶æ„, ç„¶è€Œä¸€è·¯ä¸‹æ¥å‘ç°å¹¶æ²¡é‚£ä¹ˆç®€å•.</p><p>ç”±äºäººå‘˜ç´§ç¼º,è§„æ¨¡æ‰©å±•,è¶Šæ¥è¶Šå¤šçš„åŸºç¡€è®¾æ–½éœ€è¦ç®¡ç†éƒ¨ç½²å’Œæ§åˆ¶,å¹¶ä¸”å…¬å¸æ²¡æœ‰è‡ªå·±çš„è®¾æ–½,ä¸»è¦çš„åŸºç¡€è®¾æ–½æ¥æºäº é˜¿é‡Œäº‘, è¿™ä¹Ÿä¸çŸ¥é“æ˜¯ç¦è¿˜æ˜¯ç¥¸.</p><p><a href="https://en.wikipedia.org/wiki/Kubernetes">Kubernetes</a> ç”¨äºå®¹å™¨é›†ç¾¤è¿›è¡Œç®¡ç†,è®©ç”¨æˆ·å¿½ç•¥åº•å±‚çš„ IaaS, ä½†å¦‚æœæ²¡æœ‰åº•å±‚çš„ IaaS é‚£ä¹ˆ Kubernetes ç”¨èµ·æ¥æ˜¯ä¸¾æ­¥ç»´è‰°çš„.æˆ‘ä»¬æƒ³è¦å®ç°çš„æ˜¯ SaaS, éœ€è¦çš„å¹³å°æ˜¯ PaaS Kubernetes, é‚£ä¹ˆéœ€è¦çš„åŸºç¡€è®¾æ–½ IaaS ç”¨äºè¿è¡Œ Kubernetes çš„å¹³å°å¿…é¡»è¦ä¸ Kubernetes ååˆ†&quot;å‹å¥½&quot;æ‰èƒ½è®©ä½ æ„Ÿè§‰ Kubernetes æ˜¯ä¸€ä¸ªæœ‰ä»·å€¼çš„ç³»ç»Ÿ.è€Œé˜¿é‡Œäº‘å¹¶ä¸åœ¨&quot;å‹å¥½&quot;ä¹‹åˆ—. Kubernetes åŸç”Ÿæ”¯æŒ Azure, GCE, AWS, å¦‚æœå…¬å¸é€‰æ‹©çš„æ˜¯è¿™å…¶ä¸­ä¸€å®¶å¹³å°çš„æœåŠ¡,é‚£ä¹ˆæˆ‘ç›¸ä¿¡ Kubernetes è¿˜æ˜¯å¾ˆå¥½ç”¨çš„,é‚£ç”¨é˜¿é‡Œ+ Kubernetes çš„ä¸ä¾¿åœ¨ä½•å¤„?</p><ul><li>é˜¿é‡Œäº‘å¹¶ç®—ä¸ä¸Šä¸€ä¸ªåˆæ ¼çš„ IaaS, åªæ˜¯æœåŠ¡å™¨ç§Ÿèµå•†</li><li>Kubernetes æ— æ³•å¯¹é˜¿é‡Œäº‘æœåŠ¡å™¨åšä»»ä½•æ§åˆ¶</li><li>é˜¿é‡Œäº‘ç°æœ‰æœåŠ¡æ— æ³•å’Œ Kubernetes æ•´åˆ</li></ul><p>è¿™å°±ä½¿å¾—æœ¬æ¥å¾ˆç®€å•çš„ä¸œè¥¿å˜å¾—å¾ˆéº»çƒ¦äº†,å› ä¸ºå‘ç°å¾ˆå¤šä¸œè¥¿éƒ½å¾—è‡ªå·±åš.æˆ‘çš„ç›®æ ‡æ˜¯æƒ³è¦ä½¿ç”¨åŸºäº Kubernetes çš„ <a href="https://deis.com/workflow">Deis</a>, Kubernetes ç¼ºå°‘ä¸åº•å±‚ IaaS çš„é›†æˆä½¿å¾— Deis å‡ ä¹æ— æ³•ä½¿ç”¨(ä¾‹å¦‚: IP çš„åˆ†é…).è¯šç„¶ Kubernetes å¾ˆå¥½,ç„¶è€Œä¸æˆ‘ä»¬æ— ç¼˜.</p><p>å› ä¸ºæ‰€æœ‰çš„ä¸»æœºéƒ½æ˜¯ Ubuntu çš„,æƒ³è¦å°è¯• juju, é‡åˆ°ä¸ä¸Šè¿°å®Œå…¨ç›¸åŒçš„é—®é¢˜,æ— æ³•ä¸äº‘å¹³å°é›†æˆ.è€Œ MAAS, æ„Ÿè§‰ä¸Šä¸å¤ªæˆç†Ÿ,ä½¿ç”¨èµ·æ¥ä¸å¤ªå‹å¥½æ‰€ä»¥é€‰æ‹©äº†æ”¾å¼ƒ.åˆ°å¤´æ¥ä¼¼ä¹ç®€å•è½»é‡çš„ Docker Swarm æ˜¯å”¯ä¸€çš„é€‰æ‹©.</p><p>è¿è¡Œå¹³å°é€‰å®šäº†,å¯æ˜¯çŠ¶æ€å­˜å‚¨ä¹Ÿæ˜¯ä¸€å¤§é—®é¢˜. Docker Volume é›†æˆçš„ç¬¬ä¸‰æ–¹äº‘å­˜å‚¨åŸºæœ¬æ˜¯ç”¨ä¸ä¸Šçš„(ä¾‹å¦‚: EFS,Azure File Storage),æ¶‰åŠåˆ°å­˜å‚¨çš„ä¾‹å¦‚ Docker Registry, ä»£ç ä»“åº“,ä½†é˜¿é‡Œçš„ OSS ä¼¼ä¹åœ¨è¿™é‡Œä¹Ÿæ˜¯æŒ‡æœ›ä¸ä¸Šçš„,å‰©ä¸‹çš„å”¯ä¸€é€‰æ‹©ä¹Ÿå°±åªèƒ½è‡ªå·±æ­å»ºäº†.Ceph ä¼¼ä¹æ˜¯ä¸äºŒé€‰æ‹©, åªè¦èƒ½æ¥å—åœ¨é˜¿é‡Œä¸Šè´­ä¹°è¶³å¤Ÿå¤šçš„ç¡¬ç›˜å³å¯.</p><p>ä½¿ç”¨ Docker Swarm ç”¨äºéƒ¨ç½²æœåŠ¡å±‚æ˜¯å¾ˆæ–¹ä¾¿çš„,ä½†æ˜¯å¯¹äºä»£ç ä»“åº“æˆ– Docker Registry è¿˜æ˜¯å»ºè®®éƒ¨ç½²äºå•å°æœåŠ¡å™¨ä¸­.ä½¿ç”¨ Overlay è¿›è¡Œç½‘ç»œéš”ç¦»ä»¥å®ç°ä¸åŒçš„ç¯å¢ƒéƒ¨ç½²æœåŠ¡.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Go Redis module]]></title>
        <id>go-rm</id>
        <link href="https://wener.me/story/go-rm"/>
        <updated>2016-08-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Writing Redis Module in Golang.]]></summary>
        <content type="html"><![CDATA[<p>Writing Redis Module in Golang.</p><p>go-rm will let you write redis module in golang.</p><p>Read in | <a href="https://raw.githubusercontent.com/wenerme/go-rm/master/README-zh_CN.md">ä¸­æ–‡</a> | <a href="https://raw.githubusercontent.com/wenerme/go-rm/master/README.md">English</a> | <a href="https://raw.githubusercontent.com/wenerme/go-rm/master/README-es.md">Spanish</a></p><h2>Modules</h2><ul><li><a href="https://github.com/redismodule">redismodule</a><ul><li><a href="https://github.com/redismodule/rxhash">rxhash</a></li></ul></li></ul><h2>Demo</h2><pre><code class="language-bash"># Ensure you installed the newest redis
# for example by using brew you can
# brew reinstall redis --HEAD

# Build redis module
go build -v -buildmode=c-shared github.com/redismodule/rxhash/cmd/rxhash

# Start redis-server and load our module with debug log
redis-server --loadmodule rxhash --loglevel debug
</code></pre><p><strong>Connect to out redis-server</strong></p><pre><code class="language-bash"># Test hgetset
redis-cli hset a a 1
#&gt; (integer) 1
redis-cli hgetset a a 2
#&gt; &quot;1&quot;
redis-cli hget a a
#&gt; &quot;2&quot;
# Return nil if field not exists
redis-cli hgetset a b 2
#&gt; (nil)
redis-cli hgetset a b 3
#&gt; &quot;2&quot;
</code></pre><p>Wow, it works, now you can distribute this redis module to you friends. :P</p><h2>How to write a module</h2><p>Implement a redis module is as easy as you write a cli app in go, this is all you need to implement above command.</p><pre><code class="language-go">package main

import &quot;github.com/wenerme/go-rm/rm&quot;

func main() {
    // In case someone try to run this
    rm.Run()
}

func init() {
    rm.Mod = CreateMyMod()
}
func CreateMyMod() *rm.Module {
    mod := rm.NewMod()
    mod.Name = &quot;hashex&quot;
    mod.Version = 1
    mod.Commands = []rm.Command{CreateCommand_HGETSET()}
    return mod
}
func CreateCommand_HGETSET() rm.Command {
    return rm.Command{
        Usage: &quot;HGETSET key field value&quot;,
        Desc: `Sets the &#x27;field&#x27; in Hash &#x27;key&#x27; to &#x27;value&#x27; and returns the previous value, if any.
Reply: String, the previous value or NULL if &#x27;field&#x27; didn&#x27;t exist. `,
        Name:   &quot;hgetset&quot;,
        Flags:  &quot;write fast deny-oom&quot;,
        FirstKey:1, LastKey:1, KeyStep:1,
        Action: func(cmd rm.CmdContext) int {
            ctx, args := cmd.Ctx, cmd.Args
            if len(cmd.Args) != 4 {
                return ctx.WrongArity()
            }
            ctx.AutoMemory()
            key, ok := openHashKey(ctx, args[1])
            if !ok {
                return rm.ERR
            }
            // get the current value of the hash element
            var val rm.String;
            key.HashGet(rm.HASH_NONE, cmd.Args[2], (*uintptr)(&amp;val))
            // set the element to the new value
            key.HashSet(rm.HASH_NONE, cmd.Args[2], cmd.Args[3])
            if val.IsNull() {
                ctx.ReplyWithNull()
            } else {
                ctx.ReplyWithString(val)
            }
            return rm.OK
        },
    }
}
// open the key and make sure it is indeed a Hash and not empty
func openHashKey(ctx rm.Ctx, k rm.String) (rm.Key, bool) {
    key := ctx.OpenKey(k, rm.READ | rm.WRITE)
    if key.KeyType() != rm.KEYTYPE_EMPTY &amp;&amp; key.KeyType() != rm.KEYTYPE_HASH {
        ctx.ReplyWithError(rm.ERRORMSG_WRONGTYPE)
        return rm.Key(0), false
    }
    return key, true
}
</code></pre><h2>Fantasy</h2><ul><li>A module management module, supplies<ul><li>mod.search<ul><li>Search module from repository(github?)</li><li>Repository structure like this<pre><code>/namespace
    /module-name
        /bin
            /darwin_amd64
                module-name.so
                module-name.sha
            /linux_amd64
        module-name.go     
</code></pre></li></ul></li><li>mod.get<ul><li>Download module to ~/.redismodule</li><li>Because module is write in go, so we can build for almost any platform</li><li>We can use tag/commit to version the binary, so we can download the old version too</li></ul></li><li>mod.install<ul><li>Install downloaded module by calling redis command</li></ul></li><li>...</li></ul></li><li>A cluster management module<ul><li>Easy to create/manage/monitor redis3 cluster</li></ul></li><li>A json data type to demonstration how to add new data type in redis.<ul><li>json.fmt key template</li><li>json.path key path <!-- -->[<!-- -->pretty]</li><li>json.get key <!-- -->[<!-- -->pretty]</li><li>json.set key value<ul><li>this will validate the json format</li></ul></li></ul></li></ul><h2>Pitfall</h2><ul><li>C can not call Go function, so every callback is pre-generated<ul><li>200 commands at most</li><li>5 data type at most</li><li>limits are easy to change, just need a proper max value</li></ul></li><li>Go can not call var_args, function call is pre-generated<ul><li>HashSet/HashGet can accept 20 args at most</li><li>limits are easy to change, just need a proper max value</li></ul></li><li>Don&#x27;t know what happens when unload a golang shared module<ul><li>Single module</li><li>Multi module<ul><li>Is there runtime are shared ?</li></ul></li></ul></li><li>Module write in go can not report it&#x27;s memory usage to redis, max memory limits is useless</li><li>If a module write in go also include a third party write in other language, the memory usage is unknown</li><li>Module can only accept command, seems there is no way to call redis initiative.</li></ul><h2>TODO</h2><ul><li>Find a proper limits for data types and var_args</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Play Titans using shell]]></title>
        <id>/2016/2016-08-06-tap-titans</id>
        <link href="https://wener.me/story/2016/2016-08-06-tap-titans"/>
        <updated>2016-08-06T23:43:00.000Z</updated>
        <summary type="html"><![CDATA[Tap Titans on Play Store]]></summary>
        <content type="html"><![CDATA[<p><a href="https://play.google.com/store/apps/details?id=com.gamehivecorp.taptitans">Tap Titans</a> on Play Store</p><h2>Features</h2><ul><li>Auto upgrade</li><li>Auto spell skill</li><li>Auto start challenge</li><li>Auto close ad dialog</li><li>Verify fast tap (0.03s/tap)</li></ul><blockquote><p><strong>NOTE</strong></p><ul><li>Only tested on Nexus 5, different devices may use different coordinates and event dev.</li><li>Used to plat tiantis long time ago, may not works in current version.Different version may use different color and coordinates</li></ul></blockquote><h2>Requirement</h2><ul><li>ADB</li><li>Image Magic</li><li>Bash</li></ul><h2>Get started</h2><ul><li>Start game</li><li>Get source <a href="https://github.com/wenerme/wener/tree/master/story/2016/tap-titans-play.sh">tap-titans-play.sh</a></li></ul><pre><code class="language-bash">chmod +x play.sh
# Connect through lan, so you don&#x27;t have to use the usb
./play.sh use-tcp
# Push the pre-generated event file
adb push events /mnt/sdcard
# Start playing
./play.sh
</code></pre><h2>How is works ?</h2><h3>Why fast ?</h3><ul><li>Because I don&#x27;t use <code>adb shell input tap</code>, instead use a generated file that represent a tap event, then <code>cat tap &gt; /dev/input/event1</code>.</li><li>Use generated shell run in android.</li></ul><h3>How to detect the screen event ?</h3><p>Use screen capture, then use the image magic to check the color,kind of slowly, but works.</p><h2>More</h2><p>Check the <a href="https://github.com/wenerme/wener/tree/master/story/2016/tap-titans-play.sh">source</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[BBVM - BeBasic Virtual Machine]]></title>
        <id>bbvm</id>
        <link href="https://wener.me/story/bbvm"/>
        <updated>2015-10-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The first VM in my live.]]></summary>
        <content type="html"><![CDATA[<p>The first VM in my live.</p><h1>BBVM - BeBasic Virtual Machine</h1><p><a href="https://travis-ci.org/wenerme/bbvm"><img src="https://travis-ci.org/wenerme/bbvm.svg" alt="Build Status"/></a>
<a href="https://coveralls.io/github/wenerme/bbvm?branch=master"><img src="https://coveralls.io/repos/wenerme/bbvm/badge.svg?branch=master&amp;service=github" alt="Coverage Status"/></a>
<a href="https://github.com/wenerme"><img src="https://img.shields.io/badge/bbvm-%F0%9F%92%97-orange.svg" alt="Build with love"/></a>
<a href="https://github.com/wenerme/bbvm/issues"><img src="https://img.shields.io/github/issues/wenerme/bbvm.svg" alt="GitHub issues"/></a>
<a href="https://raw.githubusercontent.com/wenerme/bbvm/master/LICENSE"><img src="https://img.shields.io/badge/license-Apache%202-blue.svg" alt="GitHub license"/></a>
<a href="https://twitter.com/intent/tweet?text=Wow:&amp;url=https://github.com/wenerme/bbvm/"><img src="https://img.shields.io/twitter/url/https/github.com/wenerme/bbvm.svg?style=social" alt="Twitter"/></a></p><pre><code>; ____________________
; \______   \______   \___  _______
;  |    |  _/|    |  _/\  \/ /     \
;  |    |   \|    |   \ \   /  Y Y  \
;  |______  /|______  /  \_/|__|_|  /
;         \/        \/            \/

JMP CODE
DATA STR CHAR &quot;Hello, BBvm&quot;,0
CODE:

OUT 1, STR
EXIT
</code></pre><pre><code>&gt;Hello, BBvm
</code></pre><hr/><pre><code class="language-bash">go get github.com/wenerme/bbvm/cmd/bb             # Install bb command tool
bb run examples/hello.bbasm                       # Directly run bbasm

bb compile -o hello.bbin -i examples/hello.bbasm  # Compile bbasm to bbin
bb run hello.bbin                                 # Run bbin
hexdump -C hello.bbin

go get github.com/wenerme/bbvm/cmd/bbin           # Bundled bbin
bbin                                              # Should output: Hello BBvm
</code></pre><table><thead><tr><th align="center">ä¸­æ–‡</th><th align="center">English</th></tr></thead><tbody><tr><td align="center"><a href="#BB%E8%99%9A%E6%8B%9F%E6%9C%BA">README</a>/<a href="https://github.com/wenerme/bbvm/wiki/%E4%B8%BB%E9%A1%B5">WIKI</a></td><td align="center"><a href="#bbvm">README</a>/<a href="https://github.com/wenerme/bbvm/wiki/Home">WIKI</a></td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/wenerme/bbvm/master/doc/image/bbvm-monopoly-demo.png" alt="å¤§å¯Œç¿"/></p><h1>BBvm</h1><p>BBvm is a simple easy virtual machine that run bbin compile from bbasm which is a simple assembly too.</p><h2>Features</h2><p>BBvm has a lot built-in system invoke with a default screen enabled device.</p><ul><li>Graphic draw</li><li>Image load</li><li>File read/write</li><li>String op</li></ul><hr/><h1>BBè™šæ‹Ÿæœº</h1><p>BBvm æ˜¯ä¸€ä¸ªç®€å•çš„è™šæ‹Ÿæœº,å…¶æ±‡ç¼–ç ä¸º BBasm.</p><h2>ä¸»è¦åŠŸèƒ½</h2><p>BBvm åŒ…å«äº†å¤§é‡çš„å†…å»ºç³»ç»Ÿè°ƒç”¨,å¹¶ä¸”è¿è¡Œäºä¸€ä¸ªæœ‰å±å¹•çš„è®¾å¤‡ä¸Š.</p><ul><li>å›¾å½¢æ“ä½œ</li><li>å›¾åƒæ“ä½œ</li><li>æ–‡ä»¶æ“ä½œ</li><li>å­—ç¬¦ä¸²æ“ä½œ</li></ul><h2>BBasic</h2><p><a href="http://www.baike.com/wiki/BBASIC">BBasic</a> æ˜¯ä¸€ç§æŒä¸Šå­¦ä¹ æœºçš„ç¼–ç¨‹å¹³å°.BBK BBASIC,ç®€ç§°BB,æœ€æ—©ç”±é€šå®µè™«äº2006å¹´å¼€å‘,æ˜¯ç”±VMBASICç»“åˆQuickBASICå¼€å‘è€Œæˆ.
è¿è¡Œäºæ—©æœŸæ­¥æ­¥é«˜å­¦ä¹ æœºå¹³å°.</p><p>è¯¥é¡¹ç›®ä¸ºåŸæ­¥æ­¥é«˜ BBasic è™šæ‹Ÿæœºçš„ä¸€ä¸ªä»¿ç…§å®ç°.å¹¶åœ¨åŸæ¥çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•.</p><ul><li>åšåˆ°å’Œ BBasic çš„æ±‡ç¼–ç å…¼å®¹</li><li>åšåˆ°å’Œ BBasic çš„äºŒè¿›åˆ¶å…¼å®¹</li><li>å®ç°ç¼–è¯‘ Vasm çš„ç¼–è¯‘å™¨</li><li>å®ç° BB çš„è™šæ‹Ÿæœº,åŒ…æ‹¬å›¾å½¢ç•Œé¢ç­‰æ‰€æœ‰åŠŸèƒ½</li><li>å¯¹ BBAsm è¿›è¡Œæ‰©å±•</li></ul><h1>å‚è€ƒ</h1><ul><li><p>BBAsm è¯­æ³•å‚è€ƒ<a href="https://github.com/wenerme/bbvm/blob/master/doc/grammar/BBAsm.g4">è¿™é‡Œ</a></p></li><li><p>BB è™šæ‹Ÿæœºè§„èŒƒå‚è€ƒ<a href="https://github.com/wenerme/bbvm/wiki/vm-spec">è¿™é‡Œ</a></p></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Guava ç®€ä»‹]]></title>
        <id>guava-intro</id>
        <link href="https://wener.me/story/guava-intro"/>
        <updated>2015-10-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Overviews - Five Ws]]></summary>
        <content type="html"><![CDATA[<h2>Overviews - Five Ws</h2><table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th></tr></thead><tbody><tr><td>æ˜¯ä»€ä¹ˆ</td><td>ä¸€å¥—å¼€æºçš„ Java å…¬å…±ç»„ä»¶</td></tr><tr><td>è°å¼€å‘çš„</td><td>ä¸»è¦ç”± Google å·¥ç¨‹å¸ˆå¼€å‘ç»´æŠ¤</td></tr><tr><td>å“ªé‡Œç”¨</td><td>æ‰€æœ‰ä½¿ç”¨ Java çš„åœ°æ–¹</td></tr><tr><td>ä»€ä¹ˆæ—¶å€™å‡ºç°çš„</td><td>2008 å¹´ä¹æœˆ ç¬¬ä¸€ä¸ª Google Collection ç‰ˆæœ¬å‡ºç°åœ¨ <a href="http://mvnrepository.com/artifact/com.google.collections/google-collections">maven ä»“åº“</a>;<br/>2010 å¹´å››æœˆç¬¬ä¸€ä¸ª Guava ç‰ˆæœ¬å‡ºç°åœ¨<a href="http://mvnrepository.com/artifact/com.google.guava/guava">maven ä»“åº“</a></td></tr><tr><td>ä»€ä¹ˆä½¿ç”¨</td><td>ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ ?</td></tr></tbody></table><h2>Features</h2><blockquote><p><strong>TIPS</strong> å¯å‚è€ƒ<a href="https://code.google.com/p/guava-libraries/wiki/GuavaExplained">GuavaExplained</a>çš„å·¦è¾¹æ .</p></blockquote><ul><li>é›†åˆåˆå§‹åŒ–å·¥å…·å’Œè¾…åŠ©å·¥å…·</li><li>æœ‰é™çš„å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒ</li><li>æä¾›å¸¸ç”¨çš„ç‰¹æ®Šé›†åˆç±»å‹</li><li>æ’åºç»„ä»¶</li><li>äº‹ä»¶æ€»çº¿</li><li>ç¼“å­˜</li><li>å¹¶å‘è¾…åŠ©ç»„ä»¶</li><li>å­—ç¬¦ä¸²å·¥å…·</li><li>åŸå­ç±»å‹å·¥å…·</li><li>IO è¾…åŠ©</li><li>å“ˆå¸Œç»„ä»¶</li><li>åå°„ç»„ä»¶</li><li>æ•°å­¦ç»„ä»¶</li><li>....</li></ul><h2>Who use Guava</h2><ul><li>åœ¨ Maven ä¸­å¤®ä»“åº“å¤§çº¦æœ‰ <a href="http://mvnrepository.com/artifact/com.google.guava/guava">4500</a> ä¸ªé¡¹ç›®ä¾èµ– Guava</li><li><a href="https://code.google.com/p/guava-libraries/wiki/FriendsOfGuava">FriendsOfGuava</a> åˆ—ä¸¾äº†ä¸€äº› Guava å‹å¥½çš„é¡¹ç›®</li><li>å¸¸è§çš„ä½¿ç”¨ Guava çš„é¡¹ç›®
<em> GSON
</em> Guice
<em> Hadoop,HBase,Spark ç­‰ Hadoop ç”Ÿæ€åœˆé¡¹ç›®
</em> Cassandra <!-- -->*<!-- --> ....</li></ul><h2>vs common-lang</h2><ul><li>Maven ä¸­å¤®ä»“åº“å¤§çº¦æœ‰ <a href="http://mvnrepository.com/artifact/commons-lang/commons-lang">3500</a> ä¸ªé¡¹ç›®ä¾èµ– commons-lang</li><li>Maven ä¸­å¤®ä»“åº“å¤§çº¦æœ‰ <a href="http://mvnrepository.com/artifact/org.apache.commons/commons-lang3">2000</a> ä¸ªé¡¹ç›®ä¾èµ– <a href="http://commons.apache.org/proper/commons-lang/">commons-lang3</a></li><li>Maven ä¸­å¤®ä»“åº“å¤§çº¦æœ‰ <a href="http://mvnrepository.com/artifact/com.google.guava/guava">4500</a> ä¸ªé¡¹ç›®ä¾èµ– Guava</li></ul><table><thead><tr><th>-</th><th>ç‰ˆæœ¬</th><th>ç”Ÿäº§æ—¥æœŸ</th><th>å¤§å°</th></tr></thead><tbody><tr><td>Guava</td><td>18.0</td><td>2014.8</td><td>2.2 MB</td></tr><tr><td>commons-lang3</td><td>v3.4</td><td>2015.4</td><td>425 KB</td></tr><tr><td>commons-lang</td><td>v2.6</td><td>2015.4</td><td>278 KB</td></tr></tbody></table><blockquote><p><strong>TIPS</strong>
Guava å¹¶æ²¡æœ‰å°†å„ä¸ªæ¨¡å—åˆ†ç¦»å¼€æ¥,è€Œæ˜¯ä½œä¸ºä¸€ä¸ªå¤§çš„ jar åŒ…,å®˜æ–¹æ¨èçš„æ˜¯,ä½¿ç”¨ ProGuard æ¥å‰”é™¤è‡ªå·±ä¸ä½¿ç”¨çš„å†…å®¹
commons-lang åªæ˜¯ Apache Commons ä¸‹çš„ä¸€å°éƒ¨åˆ†,å…¶ä»–çš„è¿˜æœ‰ commons-io ç­‰</p></blockquote><p>Guava ä¸ Commons-Lang å¹¶ä¸æ˜¯ç›¸äº’å¯¹ç«‹çš„å…³ç³»,è€Œæ˜¯å¯ä»¥ç›¸äº’å¹¶å­˜çš„,å…¶äº¤é›†å¯èƒ½åœ¨é›†åˆå·¥å…·ç»„ä»¶è¾ƒå¤š,è€Œå…¶ä»–æ–¹é¢éƒ½æ˜¯å„æœ‰æ‰€é•¿,å› ä¸ºå¹¶éäºŒé€‰ä¸€çš„é—®é¢˜.</p><h2>Reference</h2><ul><li><a href="https://github.com/google/guava">Guava@Github</a></li><li><a href="https://code.google.com/p/guava-libraries/wiki/GuavaExplained">GuavaExplained</a></li><li><a href="https://github.com/goldmansachs/gs-collections">gs-collections</a> A supplement or replacement for the Java Collections Framework.</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è½¬æˆ˜ Hugo, åšå®¢è¿ç§»ä¹‹è·¯]]></title>
        <id>/2015/2015-09-25-blog-hugo</id>
        <link href="https://wener.me/story/2015/2015-09-25-blog-hugo"/>
        <updated>2015-09-25T09:32:05.000Z</updated>
        <summary type="html"><![CDATA[éƒ½å¿«è¦æŠŠè‡ªå·±æ„ŸåŠ¨, ä»æœ€åˆ(2011å¹´)çš„ Wordpress, åˆ°åæ¥è‡ªå·±å¼€å‘çš„ Tellets , ç°åœ¨åˆåˆ°äº† Hugo.]]></summary>
        <content type="html"><![CDATA[<p>éƒ½å¿«è¦æŠŠè‡ªå·±æ„ŸåŠ¨, ä»æœ€åˆ(2011å¹´)çš„ Wordpress, åˆ°åæ¥è‡ªå·±å¼€å‘çš„ Tellets , ç°åœ¨åˆåˆ°äº† Hugo.</p><p>ä¹‹æ‰€ä»¥æŠ›å¼ƒ Wordpress æ˜¯å› ä¸ºå®ƒå¤ªç¬¨é‡äº†,é‚£äº›å¹´æ˜¯ç§Ÿçš„è™šæ‹Ÿä¸»æœºæ¥æŒ‚åšå®¢,æ¯å¹´ä¹Ÿè¿˜ä¼šæœ‰äº›æŠ•å…¥,ä½†æ˜¯åæ¥å¾ˆå°‘ç»´æŠ¤äº†,ä¾¿ä¸åœ¨æƒ³ç»­è´¹äº†.</p><p>åé¢æƒ³æ‰¾ä¸€ä¸ªè½»ä¾¿çš„èƒ½æ ¹æ®æ–‡ä»¶æ—¶ç”Ÿæˆçš„åšå®¢ç³»ç»Ÿ,æ‰€å¹¸æ‰¾åˆ°äº† Droplet,ä½†å‘ç°å¥½å¤šä¸œè¥¿éƒ½ä¸èƒ½æ»¡è¶³è¦æ±‚,åæ¥æŠŠ Droplet å®Œå…¨é‡å†™æˆäº† Tellts,è‡ªå·±æ·»åŠ çš„æœ€å–œæ¬¢çš„åŠŸèƒ½æ˜¯ç›´æ¥é…ç½® Github çš„æ–‡ç« å¼•ç”¨. Tellets ä¹Ÿæ˜¯ PHP çš„,è€Œä¸”å¿…é¡»è¦æ”¯æŒæ–‡ä»¶æ“ä½œ,ä½†å¾ˆå¤š PHP åº”ç”¨æœåŠ¡å™¨éƒ½ä¸æä¾›æ–‡ä»¶æ“ä½œ(ä¾‹å¦‚: æ–°æµª SEA, å½“åˆçš„äº¬ä¸œäº‘æ“),åæ¥ä¸»æœºåœäº†ä¾¿æ²¡æœ‰å»ç®¡äº†. å†åæ¥æœ‰ç‚¹æƒ³ç”¨ Go é‡å†™ Tellts, ä½†å®åœ¨æ²¡æ—¶é—´,ç„¶ååˆè¿‡äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´.</p><p>åœ¨å·¥ä½œçš„æƒ…å†µä¸‹éœ€è¦äº†è§£ Docker, é¡ºåŠ¿ä¹Ÿå°±åˆ©ç”¨ Docker éƒ¨ç½²äº† Hugo.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šæˆ‘æŠŠæˆ‘çš„çŸœæŒéƒ½ç»™äº†å¥¹ã€‹ï¼šç¬¬ä¸€ç«  - å·®ä¸€æ¯«ç±³çš„ç¼˜åˆ†ï¼Œå—ï¼Ÿ]]></title>
        <id>here-my-love-ch1</id>
        <link href="https://wener.me/story/here-my-love-ch1"/>
        <updated>2014-05-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[æœ‰äº›äººï¼Œåªæ˜¯æ°¸è¿œä¸å¯èƒ½åœ¨ä¸€èµ·]]></summary>
        <content type="html"><![CDATA[<p>æœ‰äº›äººï¼Œåªæ˜¯æ°¸è¿œä¸å¯èƒ½åœ¨ä¸€èµ·
è‡´ é‚£äº›äºº</p><p>æ•…äº‹çš„å¼€å§‹ï¼Œå…ä¸äº†æœ‰ä¸€ä¸ªå¥³å­©ä¸€ä¸ªç”·å­©ï¼Œæ„Ÿæƒ…ä¸éƒ½è¿™æ ·å¼€å§‹çš„ä¹ˆï¼Ÿ</p><p>é‚£æ˜¯ä¸€æ¬¡çº¦ä¼šï¼Œè‡³å°‘ä»–æ˜¯é‚£æ ·çœ‹å¾…çš„ã€‚ä¸€ç”Ÿä¸­çš„ç¬¬ä¸€æ¬¡çº¦ä¼šï¼Œéš¾å…è§‰å¾—æœ‰äº›ç´§å¼ ï¼Œè¿‡äºéš†é‡ã€‚åå¤çš„æ£€æŸ¥äº†å‡ éè‡ªå·±çš„ç€è£…å’Œæ‰“æ‰®åï¼Œå§‹ç»ˆè¿˜æ˜¯è§‰å¾—ç¼ºäº†ç‚¹ä»€ä¹ˆã€‚å…¶å®ä»–ä¹Ÿå°±ä¸€ä¸ªçº¦æ‘¸17 8å²çš„æ™®é€šå°ç”·å­©ï¼Œä¸€ä»¶ä½“æ¤ä¸€æ¡ä¸ƒåˆ†åº“ä¸€å¤´å¯¸æŠŠé•¿çš„é»‘å‘ï¼Œèº«ä¸Šä¹Ÿæ²¡æœ‰ä»€ä¹ˆå…¶å®ƒè¡Œå¤´ï¼Œç®—å¾—ä¸Šæ˜¯è½»è£…ä¸Šé˜µäº†ã€‚ä»–ä¹Ÿå®å±æ— å¥ˆï¼Œæ²¡æœ‰å¥½çš„å®¶åº­æ¡ä»¶ï¼Œè‡ªå·±èº«è¾¹ä¹Ÿæ²¡äººè¾…å¯¼æ‰“æ‰®ï¼Œåªè¦è‡ªå·±çœ‹èµ·æ¥è¿‡å¾—å»å°±ç®—æ»¡åˆ†äº†ã€‚åªæ˜¯è¿™æ¬¡ä¸åŒï¼Œç¬¬ä¸€æ¬¡éš¾å…ï¼Œä¸ï¼Œæ˜¯å¿…é¡»å¾—åº„é‡ç‚¹ï¼Œè‡ªå·±çš„æ»¡åˆ†éƒ½ä¸å¥½æ„æ€æ‹¿å‡ºå»è§äººã€‚å…¶å®ä»–ä¹Ÿä¸æ˜¯ç¬¬ä¸€æ¬¡è§åˆ°å¥¹äº†ï¼Œä½œä¸ºåŒç­åŒå­¦ï¼Œç”šè‡³å·®ä¸€æ¯«ç±³çš„åŒæ¡Œã€‚ä»–æ€»è§‰å¾—é‚£æ¬¡æˆ–è®¸ä¼šæ˜¯ä»–ç»ˆç”Ÿçš„é—æ†¾ï¼Œåœ¨å®‰æ’åº§ä½çš„æ—¶å€™ï¼Œæœ¬æ¥ä»–ä»¬ä¸¤æ˜¯æ²¡æœ‰é åœ¨ä¸€èµ·çš„ï¼Œåæ¥å› è€å¸ˆè§‰å¾—ç­ä¸Šç”·å¥³åŒå­¦çš„åº§ä½åæ ‡ä¸ç¬¦åˆæŸç§æ•°å­¦ä¸Šçš„åæ ‡åˆ†å¸ƒï¼Œå°±ç¨å¾®è°ƒæ•´äº†ä¸€ä¸‹åº§ä½ï¼Œçœ‹ç€çœ‹ç€ï¼Œå‘ç°ä¸€ä¸å°å¿ƒè€å¸ˆä¸ºäº†ä»–æŠŠå¥¹è°ƒæˆè‡ªå·±çš„åŒæ¡Œï¼Œä¸è¿‡æ˜¯éš”ç€ä¸€æ¡èµ°åˆ°é‚£ç§ã€‚ä»–æ‰ä¸ç®¡èµ°é“ä¸èµ°é“ä»€ä¹ˆçš„ï¼Œè·ç¦»ä»æ¥ä¸æ˜¯é—®é¢˜ï¼Œæ¢ä¸€ä¸ªè§’åº¦æƒ³æƒ³ï¼Œè¿™ä¹Ÿç®—å¾—ä¸Šæ˜¯å½¼æ­¤çš„åŒæ¡Œäº†ã€‚ä½†æ˜¯åœ¨è¿™ä½åŒæ¡Œè¿˜æ²¡ç¼“è¿‡ç¥æ¥çš„æ—¶å€™ï¼ŒåŒæ¡Œå‰é¢çš„å·¦è¾¹çš„ä¸Šè¾¹çš„å³è¾¹å’Œä»–çš„åŒæ¡Œå¯¹è°ƒäº†ä¸€ä¸‹ï¼Œé¡ºä¾¿ä¹ŸæŠŠä»–ç»™è°ƒäº†ä¸Šå»ã€‚å”‰ï¼Œå·®ä¸€æ¯«ç±³çš„åŒæ¡Œã€‚ä»–ä¹ æƒ¯æ€§çš„æŠŠé—æ†¾çš„äº‹æƒ…è¯´æˆæ˜¯å·®ä¸€æ¯«ç±³çš„ï¼Œå› ä¸ºé‚£æ ·è®©ä»–æ„Ÿè§‰å…¶å®å½“åˆè¿˜æ˜¯è·ç¦»å¾ˆè¿‘å¾ˆè¿‘å¯ä»¥æŠ“ä½ä»–çš„ï¼Œåªæ˜¯å·®ä¸€æ¯«ç±³è®©å®ƒæºœèµ°äº†ã€‚ä¸€æ¯«ç±³çš„åŒæ¡Œä»–è¿˜æ˜¯å¤©å¤©å¯ä»¥è§åˆ°çš„ï¼Œå› ä¸ºä¸åªæ˜¯ä¸€ä¸ªç­çš„ï¼Œé‚£æ¬¡è°ƒæ•´åº§ä½è™½ç„¶é—æ†¾ï¼Œä¸‡å¹¸çš„æ˜¯å’Œä»–ä¸€ç»„ï¼Œå¹¶ä¸”å¥¹è¿˜å½“ä¸Šäº†ç»„é•¿ã€‚è¿™æ ·æ¥è§¦å°±æ›´å¤šäº†ã€‚å› ä¸ºå¥¹å½“ä¸Šäº†ç»„é•¿ï¼Œä»–ä¹Ÿå˜å¾—æ´»æ³¼äº†ä¸å°‘ï¼Œå› ä¸ºæ€»æ˜¯ç…ç€çœ‹æœ‰æ²¡æœ‰å“ªç¯‡è¯¾æ–‡æ˜¯éœ€è¦èƒŒè¯µçš„ï¼Œè¿™æ ·åˆå¤šäº†ä¸€æ¬¡æœºä¼šä¸€ä¸ªç†ç”±äº†ï¼</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å­¦ç”Ÿè€ƒå‹¤ç³»ç»Ÿ]]></title>
        <id>student-checking-sys</id>
        <link href="https://wener.me/story/student-checking-sys"/>
        <updated>2013-12-27T04:24:19.000Z</updated>
        <summary type="html"><![CDATA[åˆ«äººä½œä¸šå•¥çš„~~,ä¸è¿‡è¿˜æ˜¯å­¦åˆ°äº†ä¸€äº›æŠ€å·§]]></summary>
        <content type="html"><![CDATA[<p>åˆ«äººä½œä¸šå•¥çš„~~,ä¸è¿‡è¿˜æ˜¯å­¦åˆ°äº†<a href="#%E4%B8%80%E4%BA%9B%E6%8A%80%E5%B7%A7">ä¸€äº›æŠ€å·§</a></p><p>å°šä¸”è¿˜æœ‰ä¸€äº›é—®é¢˜æ²¡è§£å†³çš„</p><ul><li>ä½œä¸ºé˜´å½±çš„çª—å£,ä¸èƒ½è®¾ç½® <code>ShowInTaskBar = false</code>,
è®¾ç½®åä¼šæ¶ˆå¤±,è¿™ä¸ªç›¸å¯¹æ¯”è¾ƒéº»çƒ¦,æ²¡å¤„ç†</li><li>ç”»é˜´å½±çš„å‡½æ•°è¿˜ä¸æ˜¯å¾ˆå®Œå–„,åªèƒ½æ˜¯ç±»ä¼¼çš„é˜´å½±</li></ul><h2>æˆªå›¾</h2><p><img src="https://raw.github.com/wenerme/blog/master/%E9%82%A3%E4%BA%9B%E5%B0%8F%E4%B8%9C%E8%A5%BF/%E8%80%83%E5%8B%A4%E7%B3%BB%E7%BB%9F/screenshot.png" alt="ç™»å½•é¡µé¢" title="ç™»å½•é¡µé¢"/></p><p><img src="https://raw.github.com/wenerme/blog/master/%E9%82%A3%E4%BA%9B%E5%B0%8F%E4%B8%9C%E8%A5%BF/%E8%80%83%E5%8B%A4%E7%B3%BB%E7%BB%9F/screenshot-main.png" alt="æŸ¥è¯¢,æ“ä½œé¡µé¢" title="æŸ¥è¯¢,æ“ä½œé¡µé¢"/></p><h1>ä¸€äº›æŠ€å·§</h1><h2>è®©çª—å£å¯æ‹–åŠ¨</h2><p>æ˜¯é‡å†™çš„WndProc,è€Œä¸æ˜¯ä¼ ç»Ÿçš„é¼ æ ‡äº‹ä»¶</p><pre><code class="language-C#">
// Let Windows drag this form for us
protected override void WndProc(ref Message m)
{
    if (m.Msg == 0x0084 /*WM_NCHITTEST*/)
    {
        m.Result = (IntPtr)2;   // HTCLIENT
        return;
    }
    base.WndProc(ref m);
}

</code></pre><p>ä¼ ç»Ÿç‰ˆæœ¬</p><pre><code class="language-C#">// In form load

var lastPoint = new Point();
var _isDraging = false;
MouseDown += (sender, e) =&gt;
{
    _isDraging = true;
    lastPoint = e.Location;
};
MouseMove += (sender, e) =&gt;
{
    if (! _isDraging)
        return;

    int ox = e.X - lastPoint.X;
    int oy = e.Y - lastPoint.Y;
    Location = new Point(Location.X + ox, Location.Y + oy);
};
MouseUp += (sender, e) =&gt; { _isDraging = false; };

</code></pre><h2>å®ç°ç±»ä¼¼çš„çª—ä½“é˜´å½±</h2><p>æ˜¯ä½¿ç”¨çš„ä¸€ä¸ªç±» <code>Dropshadow</code>.</p><p>æœ€å¼€å§‹ä»<a href="http://stackoverflow.com/questions/8793445/windows-7-style-dropshadow-in-borderless-form">è¿™é‡Œ</a>
çœ‹åˆ°èƒ½å®ç°é˜´å½±çš„æ–¹æ³•,åæ¥æœ‰æŸ¥æ‰¾äº†å¾ˆå¤šä¸œè¥¿,ä¿®æ”¹æˆäº†
æˆ‘è‡ªå·±çš„ <code>Dropshadow</code> ç‰ˆæœ¬.è°ƒç”¨æ–¹æ³•</p><pre><code class="language-C#">var f = new Dropshadow(this)
{
    BorderRadius = 40,
    ShadowColor = Color.Blue
};

f.RefreshShadow();
</code></pre><h2>åœ¨ DataGridView ä¸­ä½¿ç”¨ DateTimePicker</h2><p>è¿™ä¸ªå¿˜è®°äº†å…·ä½“æ˜¯åœ¨å“ªé‡Œæ‰¾çš„äº†,ä½¿ç”¨ <code>CalendarColumn</code>
å’Œ <code>CalendarCell</code> å³å¯.åœ¨è®¾è®¡æ—¶å¯ä»¥ç›´æ¥é€‰æ‹©.</p><h2>åœ†è§’è¾¹æ¡†</h2><pre><code class="language-C#">[DllImport(&quot;Gdi32.dll&quot;, EntryPoint = &quot;CreateRoundRectRgn&quot;)]
public static extern IntPtr CreateRoundRectRgn
    (
    int nLeftRect, // x-coordinate of upper-left corner
    int nTopRect, // y-coordinate of upper-left corner
    int nRightRect, // x-coordinate of lower-right corner
    int nBottomRect, // y-coordinate of lower-right corner
    int nWidthEllipse, // height of ellipse
    int nHeightEllipse // width of ellipse
    );

// in form load
Region = Region.FromHrgn(Win32.CreateRoundRectRgn(0, 0, Width, Height, 20, 20));

</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[çºªå¿µé‚£äº›åœ¨ BBK çš„æ—¶å…‰]]></title>
        <id>bbk-memory</id>
        <link href="https://wener.me/story/bbk-memory"/>
        <updated>2013-12-15T02:48:00.000Z</updated>
        <summary type="html"><![CDATA[- 2010-09-02 æˆ‘çš„ç¬¬ä¸€æ¡ä¸»é¢˜å¸–]]></summary>
        <content type="html"><![CDATA[<ul><li>2010-09-02 æˆ‘çš„ç¬¬ä¸€æ¡ä¸»é¢˜å¸–</li><li>2007-09-07 æˆ‘çš„ç¬¬ä¸€æ¡å›å¤å¸–</li><li>2007-08-26 æ³¨å†Œåˆ° <a href="http://club.eebbk.com/">http://club.eebbk.com/</a></li></ul><p>åˆšå¼€å§‹çš„æ—¶å€™æˆ‘çš„ ID è¿˜æ˜¯ <code>a3160586</code>,
åæ¥ æ›²æ›² å¥‰çŒ®äº†ä»–çš„ G å¸ç»™æˆ‘æ”¹äº†ä¸ªåå«<code>å°æ–‡å„¿</code>äº†,æœ¬æ¥æ˜¯æƒ³å«<code>æ–‡å„¿</code>çš„
,å¯æƒœå·²ç»è¢«æ³¨å†Œäº†,å¯æƒœå‘€.</p><p>é‚£äº›æ—¶å€™,ç››è¡Œçš„è¿˜æ˜¯ 9688, å†™çš„è¿˜æ˜¯ BBasic å’Œ basm, ç”¨çš„è¿˜æ˜¯ npp.</p><p>é‚£äº›æ—¶å€™,è¿˜æ›¾å½“è¿‡ç‰ˆä¸»,æ€€æ£ç€ä¸€ä¸ªæ¢¦æƒ³,è¯´è¿‡ä¸€äº›è±ªè¯­.</p><p>é‚£äº›æ—¶å€™,æ­£å€¼é«˜ä¸‰ä¸‹æœŸ,å¤©å¤©ç†¬å¤œå†™ä¸œè¥¿,å³ä¾¿é€ƒè¯¾,è€å¸ˆä¹Ÿä¸ä¼šç®¡.</p><p>é‚£äº›æ—¶å€™,è¿˜èƒ½æœ‰ç¤¼ç‰©,è¿˜åœ¨è¿½æ±‚ç²¾å,è¿˜æƒ³æŒ¯å…´ç¼–ç¨‹åŒº(ç°åœ¨åˆå¹¶åˆ°æ ¡å¤–åŒºäº†).</p><p>é‚£äº›æ—¶å€™,æœ‰æ›²æ›²,å¼Ÿå¼Ÿ,red,ç°æœº,ä»™å‰‘ ç­‰ç­‰..........</p><p>é‚£äº›æ—¶å€™,çœŸçš„å¾ˆå¿«ä¹,è™½ç„¶æˆ‘æ‡‚å¾—çœŸçš„ä¸å¤š,ä½†æˆ‘åªéœ€è¦æŒæ¡å¥½ä¸€æ ·å°±å¥½.</p><p>é‚£äº›æ—¶å€™,è¿‡å»äº†,ä¸ä¼šå†å›æ¥,ä¹Ÿä¸éœ€è¦å†å›æ¥.</p><p>ç°åœ¨é¢å¯¹çš„æ˜¯æ›´å¤šçš„çŸ¥è¯†å’ŒæŠ€æœ¯,æœ‰æ—¶å€™æ€»æ˜¯è¿˜æƒ³é‡æ‹¾ä»¥å‰çš„ä¸œè¥¿,
å‘ç°çœŸçš„å¾ˆéš¾äº†.é‚£äº›ä¸œè¥¿æˆ–å¤šæˆ–å°‘å·²ç»è¿‡æ—¶äº†,ä½†æ˜¯åœ¨æˆé•¿çš„è¿‡ç¨‹ä¸­æ›¾
æ‰®æ¼”è¿‡ååˆ†é‡è¦çš„è§’è‰².</p><p>é‚£ä¹ˆå¤šå¹´è¿‡å»äº†,BBK ä¹Ÿæ²¡å¼€æ”¾è¿‡ä»€ä¹ˆ(æˆ–è®¸æˆ‘ä¸çŸ¥é“),
ç¤¾åŒºæ„Ÿè§‰ä¸Šä¹Ÿè¶Šæ¥è¶Šå°äº†å§,çœŸçš„ä¸å–œæ¬¢è¿™æ ·,è™½ç„¶ç°åœ¨è®ºå›æ›´æ¼‚äº®äº†,
ç•Œé¢æ›´å¥½äº†,äº§å“æ›´æ–°äº†,ä½†æ˜¯å¸å¼•åŠ›å´è¶Šæ¥è¶Šå°äº†.æ²¡æœ‰è‡ªå·±èƒ½ç”¨åŠ›çš„åœ°æ–¹,
å³ä¾¿æ˜¯å†å¿ è¯šçš„ç”¨æˆ·,ä¹Ÿæ— èƒ½ä¸ºåŠ›,æ°¸è¿œå½¢æˆä¸äº†åƒå¼€æºçš„é‚£ç§ç¤¾åŒºæ•ˆåº”.</p><p>ä¸€ä¸ªäº§å“çš„è¿›åŒ–æ›´å¤šçš„æ˜¯å—åˆ°ç¤¾åŒºå’Œç”¨æˆ·çš„å½±å“,åªç«‹è¶³äºå•†ä¸šå’Œè‡ªå·±çš„åˆ©ç›Š,
è¿™æ ·åšçš„äº§å“æ°¸è¿œéƒ½æ˜¯è‡ªå·±çš„,ç”¨æˆ·åˆæœ‰ä»€ä¹ˆå‘è¨€æƒå‘¢?æœ€åä¹Ÿåªèƒ½æ˜¯äººèµ°èŒ¶å‡‰äº†.
ä¸€æ‰¹äººèµ°äº†,å¦ä¸€æ‰¹ä¸æ˜æ‰€ä»¥çš„äººåˆè¿›æ¥,ç„¶ååˆç¦»å¼€.</p><p>æ‰€ä»¥ç¦»å¼€äº†,å‰©ä¸‹çš„æˆ–è®¸éƒ½æ˜¯ä½ ä»¬çš„ä¸–ç•Œ.</p><p>è¿™é‡ŒåŒ…å«äº†æˆ‘å½“åˆåœ¨ bbk è®ºå›å‘è¡¨çš„éƒ¨åˆ†å†…å®¹,</p><ul><li><a href="https://wener.me/story/bbk-bbimg-js">js è§£æ lib å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨</a></li><li><a href="https://wener.me/story/bbk-libs">å››ä¸ªå‡½æ•°å’Œ bb ç¼–è¾‘å™¨</a></li><li><a href="https://wener.me/story/bbk-quick-screenshot">BB æ€¥é€Ÿæˆªå›¾</a></li><li><a href="https://wener.me/story/bbk-bda-calc">è¿˜åŸçš„ Bda è®¡ç®—å™¨</a></li><li><a href="https://wener.me/story/bbk-game-prisoner-dilemma">å›šå¾’å›°å¢ƒ</a></li><li><a href="https://wener.me/story/bbk-first-game">å¹³ç”Ÿç¬¬ä¸€ä¸ªæ¸¸æˆ - è¶£å‘³æ‹¼å›¾</a></li></ul><p>æ²¡æœ‰è½¬å­˜çš„å†…å®¹,ä¸‹é¢ä¼šåˆ—ä¸¾ä¸€äº›.</p><blockquote><p>ä»¥ä¸‹é“¾æ¥å‡ 404</p></blockquote><ul><li><a href="http://club.eebbk.com/bbkbbs/showtopic/250018/1">DLX&amp;LIB&amp;RLB&amp;BMP æ–‡ä»¶æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œæ·±å…¥ç ”ç©¶ ï¼Œé™„å¸¦æ–‡ä»¶è¯»å–æ¨¡æ¿ï¼Œæºç ï¼Œå¤§å¯Œç¿ç´ æå’Œä¸€äº› dlx å¯¼å‡ºçš„ç»“æœ</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/250082/1">ç”¨æˆ·è¯å…¸æ•°æ®ç»“æ„ï¼Œæ¨¡æ¿å’Œ lcc æ–‡ä»¶æ¨¡æ¿ï¼Œå¯ç›´æ¥è¯»å†™æ•°æ®</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/249402/1">åç‰‡æ–‡ä»¶ï¼ˆLCCï¼‰ç»“æ„ï¼Œç”Ÿæˆè‡ªå·±çš„åç‰‡</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/246851/1">å¼ºå¤§å‡½æ•° åˆ¶ä½œ bb çš„åŠ¨æ€é“¾æ¥åº“(dll)ï¼Œå®ç°æ•°æ®åº“,ç”¨æ±‡ç¼–çš„</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/245477/1">è¿™æ ·åš ARPG(åŠ¨ä½œç±»è§’è‰²æ‰®æ¼”æ¸¸æˆ)</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/244376/1">p ç±»å‡½æ•°åº“çš„å®é™…è¿ç”¨ï¼Œç”±æµ…å…¥æ·±ï¼Œæ·±å…¥æµ…å‡ºçš„å®ä¾‹è®²è§£</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/245464/1">BB å­¦ä¹ å¿…å¤‡æ‰‹å†Œ</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/243308/1">ç‰©ç†çš„ç®€å•è¿ç”¨ã€ŠPLAYBALLã€‹ï¼ˆç©è›‹ï¼‰</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/243000/1">è´å¡å°”æ›²çº¿è¿ç”¨ï¼Œ8 ä¸ªå®ä¾‹ã€‚</a></li><li><a href="http://club.eebbk.com/bbkbbs/showtopic/243168/1">äºŒæ¬¡è´å¡å°”æ›²çº¿è¾…åŠ©çš„å·¥å…·ï¼Œè®©ä½ è®¡ç®—ç‚¹çš„ä½ç½®ï¼Œå¯è§†åŒ–ã€‚exe æ ¼å¼</a></li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è½¯ä»¶è®¾è®¡å¸ˆè€ƒè¯•ç¬”è®°]]></title>
        <id>rk-software-designer</id>
        <link href="https://wener.me/story/rk-software-designer"/>
        <updated>2013-11-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[è€ƒè¯•è½¯è€ƒçš„æ—¶å€™,æ•´ç†çš„ä¸€äº›ç¬”è®°]]></summary>
        <content type="html"><![CDATA[<blockquote><p>è€ƒè¯•è½¯è€ƒçš„æ—¶å€™,æ•´ç†çš„ä¸€äº›ç¬”è®°</p></blockquote><h1>å†…å®¹</h1><h2>ç³»ç»Ÿå¼€å‘å’Œè¿è¡Œ</h2><h3>è½¯ä»¶ç”Ÿå­˜å‘¨æœŸ</h3><p>å¯è¡Œæ€§åˆ†æ, é¡¹ç›®å¼€å‘è®¡åˆ’, éœ€æ±‚åˆ†æ, è®¾è®¡(æ¦‚è¦è®¾è®¡å’Œè¯¦ç»†è®¾è®¡), ç¼–ç , æµ‹è¯•, ç»´æŠ¤</p><h3>è½¯ä»¶å¼€å‘æ¨¡å‹</h3><p>ç€‘å¸ƒæ¨¡å‹
: æä¾›äº†æœ‰æ•ˆçš„ç®¡ç†æ¨¡å¼, æ–‡æ¡£é©±åŠ¨
: ä¸»è¦ç”¨äºç»“æ„åŒ–çš„è½¯ä»¶å¼€å‘
: ç¼ºä¹çµæ´»æ€§, æ— æ³•é€šè¿‡å¼€å‘æ´»åŠ¨æ¥æ˜ç¡®éœ€æ±‚</p><p>æ¼”åŒ–æ¨¡å‹
: æ„å»ºåŸå‹
: å¯¹è½¯ä»¶éœ€æ±‚ç¼ºä¹å‡†ç¡®è®¤è¯†</p><p>èºæ—‹æ¨¡å‹
: ç»¼åˆäº†ç€‘å¸ƒæ¨¡å‹å’Œæ¼”åŒ–æ¨¡å‹çš„ä¼˜ç‚¹
: å¢åŠ äº†é£é™©åˆ†æ
: é€‚åˆå¤§å‹å¤æ‚ç³»ç»Ÿ</p><p>å–·æ³‰æ¨¡å‹
: <em>é¢å‘å¯¹è±¡å¼€å‘è¿‡ç¨‹</em>
: å…·æœ‰è¿­ä»£å’Œæ— é—´éš™ç‰¹æ€§</p><p>Væ¨¡å‹
: å¼ºè°ƒè½¯ä»¶å¼€å‘çš„åä½œå’Œé€Ÿåº¦
: å®ç°å’ŒéªŒè¯ç»“åˆ
: ä¿è¯è´¨é‡ç¼©çŸ­å‘¨æœŸ</p><h3>è½¯ä»¶å¼€å‘æ–¹æ³•</h3><h4>ç»“æ„åŒ–æ–¹æ³•</h4><p>ç”±ç»“æ„åŒ–åˆ†æ,ç»“æ„åŒ–è®¾è®¡,ç»“æ„åŒ–ç¨‹åºè®¾è®¡æ„æˆ
æ˜¯ä¸€ç§é¢å‘<strong>æ•°æ®æµ</strong>çš„å¼€å‘æ–¹æ³•.
ä½¿ç”¨DFDå›¾æ¥å»ºç«‹ç³»ç»Ÿçš„åŠŸèƒ½æ¨¡å‹.
æŒ‡å¯¼æ€æƒ³æ˜¯ è‡ªé¡¶å‘ä¸‹,é€å±‚åˆ†è§£.åŸºæœ¬åŸåˆ™æ˜¯åŠŸèƒ½çš„åˆ†è§£ä¸æŠ½è±¡.
é€‚ç”¨äºæ•°æ®å¤„ç†é¢†åŸŸ,ä¸é€‚åˆè§£å†³å¤§è§„æ¨¡çš„,ç‰¹åˆ«å¤æ‚çš„é¡¹ç›®,ä¸”éš¾ä»¥é€‚åº”éœ€æ±‚çš„å˜åŒ–</p><h4>Jackson æ–¹æ³•</h4><p>æ˜¯ä¸€ç§é¢å‘<strong>æ•°æ®æµ</strong>çš„å¼€å‘æ–¹æ³•.
JSP(Jaskon Structure Programming) æ–¹æ³• ä»¥æ•°æ®ç»“æ„ä¸ºé©±åŠ¨,é€‚åˆäºå°è§„æ¨¡é¡¹ç›®.
JSD æ˜¯ JSP çš„æ‰©å…….</p><h4>åŸå‹åŒ–æ–¹æ³•</h4><p>å¼€å‘åŸå‹,å¾æ±‚æ„è§,ä¿®æ”¹åŸå‹.
é€‚ç”¨äºç”¨æˆ·éœ€æ±‚ä¸æ¸…,ä¸šåŠ¡ä¸ç¡®å®š,éœ€æ±‚ç»å¸¸å˜åŒ–çš„æƒ…å†µ.ä¹Ÿå¯ç”¨äºä¸å¤æ‚çš„å°è§„æ¨¡é¡¹ç›®.</p><h4>é¢å‘å¯¹è±¡å¼€å‘æ–¹æ³•</h4><p>åŒ…æ‹¬é¢å‘å¯¹è±¡åˆ†æ,é¢å‘å¯¹è±¡è®¾è®¡å’Œé¢å‘å¯¹è±¡å®ç°.</p><p>é¢å‘å¯¹è±¡å¼€å‘æ–¹æ³•: Booch,Coad,OMT.
UML æ˜¯é¢å‘å¯¹è±¡æ ‡å‡†å»ºæ¨¡è¯­è¨€.</p><h3>é£é™©åˆ†æ</h3><p>åŒ…æ‹¬ é£é™©è¯†åˆ«, é£é™©é¢„æµ‹, é£é™©è¯„ä¼°, é£é™©æ§åˆ¶</p><p>é£é™©è¯†åˆ«
: å»ºç«‹é£é™©æ¡ç›®æ£€æŸ¥è¡¨</p><p>é£é™©é¢„æµ‹
: é£é™©å‘ç”Ÿçš„å¯èƒ½æ€§æˆ–æ¦‚ç‡,é£é™©å‘ç”Ÿæ‰€äº§ç”Ÿçš„åæœ</p><p>é£é™©è¯„ä¼°
: $(r_i,l_i,x_i)$,rä¸ºé£é™©,lä¸ºæ¦‚ç‡,xä¸ºå½±å“
: å»ºç«‹å‚ç…§</p><p>é£é™©æ§åˆ¶
: é£é™©é¿å…,é£é™©ç›‘æ§, é£é™©ç®¡ç†åŠæ„å¤–äº‹ä»¶è®¡åˆ’</p><h3>è¿›åº¦ç®¡ç†</h3><h4>Gantt å›¾</h4><p>å¯ä»¥åæ˜ å¹¶è¡Œå…³ç³»
ä¸èƒ½åæ˜ ä¾èµ–å…³ç³»,éš¾ä»¥ç¡®å®šé¡¹ç›®çš„å…³é”®æ‰€åœ¨,ä¸èƒ½åæ˜ è®¡åˆ’ä¸­æœ‰æ½œåŠ›éƒ¨åˆ†</p><h4>PERT å›¾</h4><p>å¯ä»¥åæ˜ ä¾èµ–å…³ç³»,ç¡®å®šå…³é”®,åæ˜ æ½œåŠ›
ä¸èƒ½åæ˜ å¹¶è¡Œ</p><p>å…³é”®è·¯å¾„æ˜¯æ¾å¼›æ—¶é—´ä¸º 0 çš„ä»»åŠ¡å®Œæˆè¿‡ç¨‹æ‰€ç»å†çš„è·¯å¾„.æ²¡æœ‰æ¾å¼›æ—¶é—´åˆ™æ˜¯è€—æ—¶æœ€é•¿è·¯å¾„.</p><h3>è½¯ä»¶é…ç½®ç®¡ç†</h3><p>æ ‡è¯†å˜æ›´,æ§åˆ¶å˜æ›´,ç¡®ä¿å˜æ›´,ç‰ˆæœ¬æ§åˆ¶</p><h3>è½¯ä»¶è¿‡ç¨‹ç®¡ç†</h3><p>è½¯ä»¶è¿‡ç¨‹èƒ½åŠ›è¯„ä¼°çš„æ„ä¹‰
: æ˜¯æ”¹è¿›è½¯ä»¶è¿‡ç¨‹å’Œé™ä½è½¯ä»¶é£é™©çš„éœ€è¦</p><h3>è½¯ä»¶èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹ / CMM</h3><p>åˆå§‹çº§
: æ— åºçš„,æ··ä¹±çš„,å¯¹è¿‡ç¨‹æ²¡æœ‰å®šä¹‰,æˆåŠŸå–å†³äºä¸ªäºº</p><p>å¯é‡å¤çº§
: æœ‰åŸºæœ¬çš„é¡¹ç›®ç®¡ç†è¿‡ç¨‹æ¥è·Ÿè¸ªè´¹ç”¨,è¿›åº¦,åŠŸèƒ½ç‰¹æ€§.æœ‰è¿‡ç¨‹çºªå¾‹,èƒ½é‡å¤æ—©å…ˆç±»ä¼¼çš„æˆåŠŸ</p><p>å·²å®šä¹‰çº§
: å°†è½¯ä»¶ç®¡ç†å’Œå·¥ç¨‹çš„è¿‡ç¨‹æ–‡æ¡£åŒ–,æ ‡å‡†åŒ–,ç»¼åˆæˆè¯¥ç»„ç»‡çš„æ ‡å‡†è½¯ä»¶è¿‡ç¨‹.é¡¹ç›®ä½¿ç”¨ç»æ‰¹å‡†,è£å‰ªçš„æ ‡å‡†è½¯ä»¶è¿‡ç¨‹æ¥å¼€å‘å’Œç»´æŠ¤è½¯ä»¶.</p><p>å·²ç®¡ç†çº§
: æ”¶é›†å¯¹è½¯ä»¶è¿‡ç¨‹å’Œäº§å“è´¨é‡çš„è¯¦ç»†åº¦é‡,å¯¹è½¯ä»¶è¿‡ç¨‹å’Œäº§å“éƒ½æœ‰å®šé‡çš„ç†è§£å’Œæ§åˆ¶</p><p>ä¼˜åŒ–çº§
: è¿‡ç¨‹çš„é‡åŒ–åé¦ˆå’Œå…ˆè¿›çš„æ–°æ€æƒ³,æ–°æŠ€æœ¯ä¿ƒä½¿è¿‡ç¨‹ä¸æ–­æ”¹è¿›.</p><h3>ç»Ÿä¸€è¿‡ç¨‹</h3><p>ç»Ÿä¸€è¿‡ç¨‹(UP)æ¨¡å‹æ˜¯ä¸€ç§ &quot;ç”¨ä¾‹å’Œé£é™©é©±åŠ¨,ä»¥æ„æ¶ä¸ºä¸­å¿ƒ,è¿­ä»£å¹¶ä¸”å¢é‡&quot;çš„å¼€å‘è¿‡ç¨‹.</p><p>åˆ†ä¸ºäº”ä¸ªé˜¶æ®µ:</p><table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td>åˆå§‹é˜¶æ®µ</td><td>ç”Ÿå‘½å‘¨æœŸç›®æ ‡</td></tr><tr><td>ç²¾åŒ–é˜¶æ®µ</td><td>ç”Ÿå‘½å‘¨æœŸæ„æ¶</td></tr><tr><td>æ„å»ºé˜¶æ®µ</td><td>åˆå§‹è¿ä½œåŠŸèƒ½(Beta ç‰ˆäº§å“)</td></tr><tr><td>ç§»äº¤é˜¶æ®µ</td><td>äº§å“å‘å¸ƒ</td></tr></tbody></table><h4>RUP</h4><p>RUP(Rational Unified Process) æ˜¯ UP çš„å•†ä¸šæ‰©å±•.</p><p>è§’è‰²
: æè¿°ä¸ªäººæˆ–å°ç»„çš„è¡Œä¸ºèŒè´£</p><p>æ´»åŠ¨
: æœ‰æ˜ç¡®ç›®çš„çš„å·¥ä½œå•å…ƒ</p><p>å·¥ä»¶
: æ˜¯æ´»åŠ¨ç”Ÿæˆ,åˆ›å»ºæˆ–ä¿®æ”¹çš„ä¸€æ®µä¿¡æ¯.</p><h3>æ•æ·æ–¹æ³•</h3><p>æ˜¯ &quot;å°½å¯èƒ½æ—©çš„,æŒç»­çš„å¯¹æœ‰ä»·å€¼çš„è½¯ä»¶çš„äº¤ä»˜&quot;ä½¿å®¢æˆ·æ»¡æ„</p><p>å…¸å‹æ–¹æ³•: æé™ç¼–ç¨‹,æ°´æ™¶æ³•,å¹¶åˆ—å¾æ±‚æ³•,è‡ªé€‚åº”è½¯ä»¶å¼€å‘</p><h4>æé™ç¼–ç¨‹</h4><p>4ä¸ªä»·å€¼è§‚
: æ²Ÿé€š,ç®€å•æ€§,åé¦ˆå’Œå‹‡æ°”</p><p>5ä¸ªåŸåˆ™
: å¿«é€Ÿåé¦ˆ, ç®€å•æ€§å‡è®¾, é€æ­¥ä¿®æ”¹, æå€¡æ›´æ”¹å’Œä¼˜è´¨å·¥ä½œ</p><p>12ä¸ªæœ€ä½³å®è·µ
: è®¡åˆ’æ¸¸æˆ,å°å‹å‘å¸ƒ,éšå–», ç®€å•è®¾è®¡, æµ‹è¯•å…ˆè¡Œ, é‡æ„, ç»“å¯¹ç¼–ç¨‹, é›†ä½“ä»£ç æ‰€æœ‰åˆ¶,
æŒç»­é›†æˆ, æ¯å‘¨å·¥ä½œ40ä¸ªå°æ—¶,ç°åœºå®¢æˆ·å’Œç¼–ç æ ‡å‡†.</p><h3>è½¯ä»¶è´¨é‡ç‰¹æ€§</h3><p>ISO/IEC 9126 è½¯ä»¶è´¨é‡æ¨¡å‹ç”±ä¸‰ä¸ªå±‚æ¬¡æ„æˆ: è´¨é‡ç‰¹æ€§,è´¨é‡å­ç‰¹æ€§, åº¦é‡æŒ‡æ ‡</p><ul><li>åŠŸèƒ½æ€§<ul><li>é€‚åˆæ€§</li><li>å‡†ç¡®æ€§</li><li>äº’ç”¨æ€§</li><li>ä¾ä»æ€§</li><li>å®‰å…¨æ€§</li></ul></li><li>å¯é æ€§<ul><li>æˆç†Ÿæ€§</li><li>å®¹é”™æ€§</li><li>æ˜“æ¢å¤æ€§</li></ul></li><li>æ˜“ç”¨æ€§<ul><li>æ˜“ç†è§£æ€§</li><li>æ˜“å­¦æ€§</li><li>æ˜“æ“ä½œæ€§</li></ul></li><li>æ•ˆç‡<ul><li>æ—¶é—´ç‰¹æ€§</li><li>èµ„æºç‰¹æ€§</li></ul></li><li>å¯ç»´æŠ¤æ€§<ul><li>æ˜“åˆ†ææ€§</li><li>æ˜“ä¿®æ”¹æ€§</li><li>ç¨³å®šæ€§</li><li>æ˜“æµ‹è¯•æ€§</li></ul></li><li>å¯ç§»æ¤æ€§<ul><li>é€‚åº”æ€§</li><li>æ˜“å®‰è£…æ€§</li><li>ä¸€è‡´æ€§</li><li>æ˜“æ›¿æ¢æ€§</li></ul></li></ul><h4>è½¯ä»¶è´¨é‡ä¿è¯</h4><p>åŒ…æ‹¬7ä¸ªä¸»è¦æ´»åŠ¨ç›¸å…³çš„å„ç§ä»»åŠ¡:</p><ul><li>åº”ç”¨æŠ€æœ¯æ–¹æ³•</li><li>è¿›è¡Œæ­£å¼çš„æŠ€æœ¯è¯„å®¡</li><li>æµ‹è¯•è½¯ä»¶</li><li>æ ‡å‡†çš„å®æ–½</li><li>æ§åˆ¶å˜æ›´</li><li>åº¦é‡</li><li>è®°å½•ä¿å­˜å’ŒæŠ¥å‘Š</li></ul><h3>ä»£ç å¤æ‚æ€§</h3><ul><li>ä»£ç è¡Œåº¦é‡æ³•</li><li>McCabe åº¦é‡æ³•
åˆç§°ä¸ºç¯åº¦é‡æ³•,è®¤ä¸ºå¤æ‚æ€§ä¸»è¦å–å†³äºæ§åˆ¶å¤æ‚æ€§.</li></ul><h3>ç³»ç»Ÿè®¾è®¡çš„åŸºæœ¬åŸç†</h3><p>æŠ½è±¡, æ¨¡å—åŒ–, ä¿¡æ¯éšè”½, æ¨¡å—ç‹¬ç«‹</p><h3>è½¯ä»¶æµ‹è¯•ç­–ç•¥</h3><p>å•å…ƒæµ‹è¯•
: ä¹Ÿç§°ä¸ºæ¨¡å—æµ‹è¯•.
: ç‰¹å¾: æ¨¡å—ç»“æ„,å±€éƒ¨æ•°æ®ç»“æ„, é‡è¦çš„æ‰§è¡Œè·¯å¾„,å‡ºé”™å¤„ç†,è¾¹ç•Œæ¡ä»¶</p><p>ç»„è£…æµ‹è¯•
: ä¹Ÿç§°ä¸ºé›†æˆæµ‹è¯•
: æ–¹æ³•:
1.åˆ†åˆ«æµ‹è¯•å„æ¨¡å—,åœ¨ç»„è£…èµ·æ¥æ•´ä½“æµ‹è¯•,å³éå¢é‡æµ‹è¯•.
2.æ¨¡å—ç»„åˆåˆ°å·²æµ‹è¯•å¥½çš„æ¨¡å—ä¸­,å®Œæˆåç»„åˆä¸‹ä¸€ä¸ªæ¨¡å—,å³å¢é‡æµ‹è¯•</p><p>ç¡®è®¤æµ‹è¯•
: ç¡®è®¤åŠŸèƒ½å’Œæ€§èƒ½æ˜¯å¦å’Œç”¨æˆ·è¦æ±‚çš„ä¸€æ ·.
: å…ˆè¿›è¡Œæœ‰æ•ˆæ€§æµ‹è¯•åŠè½¯ä»¶é…ç½®å®¡æŸ¥,ç„¶åè¿›è¡ŒéªŒæ”¶æµ‹è¯•å’Œå®‰è£…æµ‹è¯•,å®Œæˆåäº¤ä»˜ç»™ç”¨æˆ·</p><p>ç³»ç»Ÿæµ‹è¯•
: å°†è½¯ä»¶æ”¾å…¥åˆ°å®é™…ç¯å¢ƒä¸­,è¿›è¡Œå„ç§ç»„è£…æµ‹è¯•å’Œç¡®è®¤æµ‹è¯•.
: å¸¸è§çš„ç³»ç»Ÿæµ‹è¯• æ¢å¤æµ‹è¯•,å®‰å…¨æ€§æµ‹è¯•,å¼ºåº¦æµ‹è¯•, æ€§èƒ½æµ‹è¯•,å®‰è£…æµ‹è¯•,å¯é æ€§æµ‹è¯•</p><h3>æµ‹è¯•æ–¹æ³•</h3><p>åˆ†ä¸ºé™æ€æµ‹è¯•å’ŒåŠ¨æ€æµ‹è¯•</p><p>é™æ€æµ‹è¯•åˆ†ä¸º äººå·¥æ£€æµ‹å’Œè®¡ç®—æœºè¾…åŠ©é™æ€åˆ†æ</p><p>åŠ¨æ€æµ‹è¯•åˆ†ä¸º é»‘ç›’æµ‹è¯•å’Œç™½ç›’æµ‹è¯•</p><h4>é»‘ç›’æµ‹è¯•ç”¨ä¾‹</h4><p>ä¹Ÿç§°ä¸ºåŠŸèƒ½æµ‹è¯•.ä¸è€ƒè™‘å†…éƒ¨ç»“æ„å’Œç‰¹æ€§çš„æƒ…å†µä¸‹è¿›è¡Œå¤–éƒ¨ç‰¹æ€§æµ‹è¯•.</p><p>å¸¸ç”¨çš„æµ‹è¯•æŠ€æœ¯:</p><ul><li>ç­‰ä»·ç±»åˆ’åˆ†</li><li>è¾¹ç•Œå€¼åˆ†æ</li><li>é”™è¯¯æ¨æ–­</li><li>å› æœå›¾</li></ul><h4>ç™½ç›’æµ‹è¯•ç”¨ä¾‹</h4><p>ä¹Ÿç§°ä¸ºç»“æ„æµ‹è¯•</p><p>æµ‹è¯•æ–¹æ³•:</p><ul><li>é€»è¾‘è¦†ç›–</li><li>å¾ªç¯è¦†ç›–</li><li>åŸºæœ¬è·¯å¾„æµ‹è¯•</li></ul><h3>è°ƒè¯•</h3><p>å¸¸ç”¨çš„è°ƒè¯•æ–¹æ³•: è¯•æ¢æ³•,å›æº¯æ³•, å¯¹åˆ†æŸ¥æ‰¾æ³•,å½’çº³æ³•,æ¼”ç»æ³•</p><h3>ç³»ç»Ÿæ–‡æ¡£</h3><table><thead><tr><th>äººå‘˜</th><th>æ–‡æ¡£</th></tr></thead><tbody><tr><td>ç”¨æˆ·-ç³»ç»Ÿåˆ†æäººå‘˜ è§„åˆ’åˆ†æ</td><td>å¯è¡Œæ€§ç ”ç©¶æŠ¥å‘Š,æ€»ä½“è§„åˆ’æŠ¥å‘Š,ç³»ç»Ÿå¼€å‘åˆåŒ,ç³»ç»Ÿæ–¹æ¡ˆè¯´æ˜ä¹¦</td></tr><tr><td>ç³»ç»Ÿå¼€å‘äººå‘˜-é¡¹ç›®ç®¡ç†äººå‘˜</td><td>ç³»ç»Ÿå¼€å‘è®¡åˆ’,ç³»ç»Ÿå¼€å‘æœˆæŠ¥,ç³»ç»Ÿå¼€å‘æ€»ç»“</td></tr><tr><td>ç³»ç»Ÿæµ‹è¯•äººå‘˜-ç³»ç»Ÿå¼€å‘äººå‘˜</td><td>ç³»ç»Ÿæ–¹æ¡ˆè¯´æ˜ä¹¦,ç³»ç»Ÿå¼€å‘åˆåŒ,ç³»ç»Ÿè®¾è®¡è¯´æ˜ä¹¦,æµ‹è¯•è®¡åˆ’</td></tr><tr><td>ç³»ç»Ÿå¼€å‘äººå‘˜-ç”¨æˆ· è¿è¡ŒæœŸé—´</td><td>ç”¨æˆ·é€šè¿‡å¼€å‘äººå‘˜æ’°å†™çš„æ–‡æ¡£è¿è¡Œç³»ç»Ÿ</td></tr><tr><td>ç³»ç»Ÿå¼€å‘äººå‘˜-ç³»ç»Ÿç»´æŠ¤äººå‘˜</td><td>ç³»ç»Ÿè®¾è®¡è¯´æ˜ä¹¦,ç³»ç»Ÿå¼€å‘æ€»ç»“æŠ¥å‘Š</td></tr><tr><td>ç”¨æˆ·-ç»´æŠ¤äººå‘˜ è¿è¡Œç»´æŠ¤æœŸé—´</td><td>ç”¨æˆ·è®°è½½è¿è¡Œé—®é¢˜,å½¢æˆè¿è¡ŒæŠ¥å‘Šå’Œä¿®æ”¹å»ºè®®.ç»´æŠ¤äººå‘˜ä¾æ¬¡è¿›è¡Œç»´æŠ¤</td></tr></tbody></table><h3>ç³»ç»Ÿç»´æŠ¤</h3><p>å¯ç»´æŠ¤æ€§
: ç»´æŠ¤äººå‘˜ç†è§£,æ”¹æ­£,æ”¹åŠ¨å’Œæ”¹è¿›è¿™ä¸ªè½¯ä»¶çš„éš¾æ˜“åº¦.</p><p>ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§æŒ‡æ ‡
: å¯ç†è§£æ€§,å¯æµ‹è¯•æ€§,å¯ä¿®æ”¹æ€§</p><p>ç»´æŠ¤ä¸æ–‡æ¡£
: æ–‡æ¡£æ˜¯è½¯ä»¶å¯ç»´æŠ¤æ€§çš„å†³å®šå› ç´ .åˆ†ä¸ºç”¨æˆ·æ–‡æ¡£å’Œç³»ç»Ÿæ–‡æ¡£</p><h4>ç³»ç»Ÿç»´æŠ¤çš„å†…å®¹åŠç±»å‹</h4><p>ç»´æŠ¤çš„è´¹ç”¨æ˜¯ç”Ÿå­˜å‘¨æœŸå…¨éƒ¨è´¹ç”¨çš„ 60% ~ 80%</p><ul><li>ç¡¬ä»¶ç»´æŠ¤</li><li>è½¯ä»¶ç»´æŠ¤</li><li>æ•°æ®ç»´æŠ¤</li></ul><p>è½¯ä»¶ç»´æŠ¤çš„åˆ†ç±»</p><ul><li>æ­£ç¡®æ€§/æ”¹æ­£æ€§ ç»´æŠ¤. 17%~21%
äº¤ä»˜å,è¿è¡Œæ—¶,è¯Šæ–­å’Œæ”¹æ­£é”™è¯¯</li><li>é€‚åº”æ€§ç»´æŠ¤. 18%~25%</li><li>å®Œå–„æ€§ç»´æŠ¤. 50%~60%
æ‰©å……åŠŸèƒ½å’Œæ”¹å–„æ€§èƒ½.</li><li>é¢„é˜²æ€§ç»´æŠ¤. 4%
æ”¹è¿›ä»¥é€‚åº”æœªæ¥çš„è½¯ç¡¬ä»¶ç¯å¢ƒ,å¢åŠ æ–°çš„åŠŸèƒ½,ä½¿å…¶ä¸è¢«æ·˜æ±°.</li></ul><h1>ç®—æ³•</h1><p>åŸç 
: +0=00000000
: -0=10000000</p><p>åç 
: +0=00000000
: -0=11111111</p><p>è¡¥ç 
: +0=-0=00000000</p><p>ç§»ç 
: =$n^{ n-1 }+X\quad X ä¸ºçº¯æ•´æ•°,ä¸” (-2^{ n-1 }\le\quad X\quad&lt;\quad 2^{n-1})$
: =$1+X \quad Xä¸ºçº¯å°æ•°,ä¸”(-1 \le X &lt; 1)$
: ç§»ç ä¸»è¦ç”¨äºè¡¨ç¤ºæµ®ç‚¹æ•°çš„é˜¶ç , åœ¨æµ®ç‚¹æ•°è¿ç®—ä¸­æœ‰ä¼˜åŠ¿.</p><p>æµ®ç‚¹æ•°
: è¡¨ç¤º $N=M \cdot R^{E}$
: M å°¾æ•° R åŸºæ•° E é˜¶ç 
: IEEE754 è¡¨ç¤º $(-1)^{S}2^{E}(b<em>0b_1\cdots b</em>{P-1})$</p><h2>cacheæ€§èƒ½åˆ†æ</h2><p>$$
t_a\quad = \quad Ht_c + (1 - H ) t_m
$$</p><p>$$
r=t_m/t_a
$$</p><p>H ä¸º cache å‘½ä¸­ç‡,
$t_c $ä¸ºcache å­˜å–æ—¶é—´,
$t_m$ä¸ºä¸»å­˜è®¿é—®æ—¶é—´,
$t_a$ cacheç­‰æ•ˆè®¿é—®æ—¶é—´,
r ä¸ºä½¿ç”¨ cache æé«˜çš„é€Ÿåº¦å€æ•°</p><h2>ç£ç›˜å®¹é‡</h2><p>$$
éæ ¼å¼åŒ–å®¹é‡ = é¢æ•° \times (ç£é“æ•°/é¢)\times å†…åœ†å‘¨é•¿\times æœ€å¤§ä½å¯†åº¦
$$</p><p>$$
æ ¼å¼åŒ–å®¹é‡ = é¢æ•° \times (ç£é“æ•°/é¢)\times (æ‰‡åŒºæ•°\times é“)\times (å­—èŠ‚æ•°/æ‰‡åŒº)
$$</p><hr/><p>ååç‡</p><hr/><h2>å¯é æ€§</h2><p>$$
R(t) = e^{-\lambda t}
$$</p><p>$\lambda$ å¤±æ•ˆç‡
t æ—¶é—´
R(t) tè¿™æ®µæ—¶é—´èƒ½æ­£å¸¸è¿è¡Œçš„æ¦‚ç‡</p><p>$$
MTBF= 1/\lambda
$$</p><p>$$
A = \frac{MTBF}{MTBF + MTRF}
$$</p><p>MTBF å¹³å‡æ— æ•…éšœæ—¶é—´
MTRF å¹³å‡æ•…éšœä¿®å¤æ—¶é—´</p><h2>å¯é æ€§æ¨¡å‹</h2><p>ä¸²è”ç³»ç»Ÿ
: $R=R_1R_2\cdots R_N$
: $\lambda = \lambda_1 + \lambda_2 + \cdots +\lambda_N$</p><p>å¹¶è”ç³»ç»Ÿ
: $R = 1 - (1-R<em>1)\times(1-R_2)\times\cdots\times(1-R_N)$
: $\mu =\frac { 1 }{ \frac { 1 }{ \lambda  } \sum </em>{ j=1 }^{ N }{ \frac{1}{j} }  } $</p><p>Næ¨¡å†—ä½™ç³»ç»Ÿ
: $ R=\sum _{ i=n+1 }^{ N } \begin{pmatrix} j  <!-- -->\<!-- --> N  \end{pmatrix} \times R_0^j(1-R_0)^{N-1} $</p><h2>è®¡ç®—æœºæ€§èƒ½</h2><p>$$
T = \sum_{i=1}^{n} \times (\omega_i \times t_i)
$$</p><p>T ç­‰æ•ˆæŒ‡ä»¤æ—¶é—´
i æŸç±»æŒ‡ä»¤
n æŒ‡ä»¤ç§ç±»æ•°
$\omega_i$ æŒ‡ä»¤iåœ¨ç¨‹åºä¸­å çš„æ¯”ä¾‹
$t_i$ æŒ‡ä»¤i æ‰§è¡Œæ—¶é—´</p><h2>McCabe åº¦é‡æ³•</h2><p>$$
V(G) = m - n + 2p
$$</p><p>V(G) ä¸ºæœ‰å‘å›¾ G ä¸­çš„ç¯è·¯æ•°
m ä¸ºå›¾ G ä¸­å¼§çš„ä¸ªæ•°
n ä¸ºèŠ‚ç‚¹ä¸ªæ•°
p ä¸º G ä¸­çš„å¼ºè¿é€šåˆ†é‡ä¸ªæ•°</p><h2>å®Œå…¨äºŒå‰æ ‘å¶å­èŠ‚ç‚¹æ•°é‡</h2><p>é™¤æœ€å¤–å±‚,å…¶ä½™å±‚ä¸Šçš„èŠ‚ç‚¹æ•°ç›®éƒ½è¾¾åˆ°æœ€å¤§å€¼,è€Œç¬¬ h å±‚ä¸Šçš„èŠ‚ç‚¹é›†ä¸­å­˜æ”¾åœ¨å·¦ä¾§æ ‘</p><pre><code>n0 åº¦ä¸º0çš„èŠ‚ç‚¹æ•°
n1 åº¦ä¸º1çš„èŠ‚ç‚¹æ•°
n2 åº¦ä¸º2çš„èŠ‚ç‚¹æ•°

n0 = n2 + 1
n = n0 + n1 + n2
n0 = (n+1)/2 æˆ– n0 = n/2
</code></pre><h2>Misc</h2><p>$$
å¹³å‡ä½œä¸šå‘¨è½¬æ—¶é—´ = (\sum<em>{i=1}^{n}{\sum</em>{j=1}^{i}} t_j)/n
$$</p><p>n ä¸ºä½œä¸šçš„æ•°é‡
ti ä¸ºä½œä¸š i çš„æ—¶é—´</p><hr/><p>$$
ASL/å¹³å‡æŸ¥æ‰¾é•¿åº¦ = \sum<em>{i=1}^nP_iC_i
$$
n è®°å½•ä¸ªæ•°
Pi å¯¹è¡¨ä¸­ç¬¬ i ä¸ªè®°å½•è¿›è¡ŒæŸ¥æ‰¾çš„æ¦‚ç‡ ä¸” $\sum</em>{i=1}^nP_i = 1$</p><hr/><hr/><pre><code>èŠ¯ç‰‡æ•° = æ€»å®¹é‡/èŠ¯ç‰‡å®¹é‡
åœ°å€çº¿æ•° = ç‰‡é€‰åœ°å€æ•° + ç‰‡å†…åœ°å€æ•° = log(èŠ¯ç‰‡æ•°) + log(èŠ¯ç‰‡å®¹é‡)
æ³¨æ„: åœ°å€æ˜¯æŒ‰å­—èŠ‚ç¼–å€çš„


</code></pre><h1>Cheat Sheet</h1><h2>è€¦åˆç±»å‹</h2><table><thead><tr><th>è€¦åˆç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>éç›´æ¥è€¦åˆ</td><td>ä¸¤ä¸ªæ¨¡å—ä¹‹é—´æ²¡æœ‰ç›´æ¥å…³ç³»</td></tr><tr><td>æ•°æ®è€¦åˆ</td><td>å½¼æ­¤ä¹‹é—´é€šè¿‡æ•°æ®å‚æ•°æ¥äº¤æ¢è¾“å…¥,è¾“å‡ºä¿¡æ¯</td></tr><tr><td>æ ‡è®°è€¦åˆ</td><td>ä¸€ç»„æ¨¡å—é€šè¿‡å‚æ•°è¡¨ä¼ é€’è®°å½•ä¿¡æ¯</td></tr><tr><td>æ§åˆ¶è€¦åˆ</td><td>ä¸€ä¸ªæ¨¡å—é€šè¿‡ä¼ é€å¼€å…³,æ ‡å¿—,åå­—ç­‰æ§åˆ¶ä¿¡æ¯,æ˜æ˜¾åœ°æ§åˆ¶é€‰æ‹©äº†ä¸€ä¸ªæ¨¡å—çš„åŠŸèƒ½</td></tr><tr><td>å¤–éƒ¨è€¦åˆ</td><td>ä¸€ç»„æ¨¡å—éƒ½è®¿é—®åŒä¸€å…¨å±€ç®€å•å˜é‡è€Œä¸æ˜¯åŒä¸€å…¨å±€æ•°æ®ç»“æ„,<br/>è€Œä¸”ä¸æ˜¯é€šè¿‡å‚æ•°è¡¨ä¼ é€’è¯¥å…¨å±€å˜é‡çš„ä¿¡æ¯</td></tr><tr><td>å…¬å…±è€¦åˆ</td><td>éƒ½è®¿é—®åŒä¸€å…¬å…±æ•°æ®ç¯å¢ƒ</td></tr><tr><td>å†…å®¹è€¦åˆ</td><td>ä¸€ä¸ªæ¨¡å—ç›´æ¥è®¿é—®å¦ä¸€ä¸ªæ¨¡å—çš„å†…éƒ¨æ•°æ®<br/>ä¸€ä¸ªæ¨¡å—ä¸é€šè¿‡æ­£å¸¸å…¥å£è½¬åˆ°å¦ä¸€ä¸ªæ¨¡å—å†…éƒ¨<br/>ä¸¤ä¸ªæ¨¡å—æœ‰ä¸€éƒ¨åˆ†ç¨‹åºä»£ç é‡å <br/>ä¸€ä¸ªæ¨¡å—æœ‰å¤šä¸ªå…¥å£</td></tr></tbody></table><h2>UML</h2><table><thead><tr><th>åŸŸ</th><th>è§†å›¾</th><th>å›¾</th><th>ä¸»è¦æ¦‚å¿µ</th></tr></thead><tbody><tr><td>ç»“æ„</td><td>é™æ€è§†å›¾</td><td>ç±»å›¾</td><td>ç±»,å…³è”,æ³›åŒ–ä¾èµ–å…³ç³»,å®ç°,æ¥å£</td></tr><tr><td></td><td>ç”¨ä¾‹è§†å›¾</td><td>ç”¨ä¾‹å›¾</td><td>ç”¨ä¾‹,å‚ä¸è€…,å…³è”,æ‰©å±•,åŒ…æ‹¬,ç”¨ä¾‹æ³›åŒ–</td></tr><tr><td></td><td>å®ç°è§†å›¾</td><td>æ„ä»¶å›¾</td><td>æ„ä»¶,æ¥å£,ä¾èµ–å…³ç³»,å®ç°</td></tr><tr><td></td><td>éƒ¨ç½²è§†å›¾</td><td>éƒ¨ç½²å›¾</td><td>èŠ‚ç‚¹,æ„ä»¶,ä¾èµ–å…³ç³»,å®ç°</td></tr><tr><td>åŠ¨æ€</td><td>çŠ¶æ€æœºè§†å›¾</td><td>çŠ¶æ€æœºå›¾</td><td>çŠ¶æ€,äº‹ä»¶,è½¬æ¢,åŠ¨ä½œ</td></tr><tr><td></td><td>æ´»åŠ¨è§†å›¾</td><td>æ´»åŠ¨å›¾</td><td>çŠ¶æ€,æ´»åŠ¨,å®Œæˆè½¬æ¢,åˆ†å‰,ç»“åˆ</td></tr><tr><td></td><td>äº¤äº’è§†å›¾</td><td>é¡ºåºå›¾</td><td>äº¤äº’,å¯¹è±¡,æ¶ˆæ¯,æ¿€æ´»</td></tr><tr><td></td><td></td><td>åä½œå›¾</td><td>åä½œ,äº¤äº’,å†™ä½œè§’è‰².æ¶ˆæ¯</td></tr><tr><td>æ¨¡å‹ç®¡ç†</td><td>æ¨¡å‹ç®¡ç†è§†å›¾</td><td>ç±»å›¾</td><td>åŒ…,å­ç³»ç»Ÿ,æ¨¡å‹</td></tr><tr><td>å¯æ‰©å±•æ€§,æ‰€æœ‰</td><td>æ‰€æœ‰</td><td>çº¦æŸ,æ„é€ æ€§,æ ‡è®°å€¼</td><td></td></tr></tbody></table><p>ä¾èµ–
: ä¸¤ä¸ªäº‹ç‰©ä¹‹é—´çš„è¯­ä¹‰å…³ç³»,ä¸€ä¸ªäº‹ç‰©çš„å˜åŒ–ä¼šå½±å“å¦ä¸€ä¸ª</p><p>å…³è”
: ä¸€ç§ç»“æ„å…³ç³», æè¿°äº†ä¸€ç»„é“¾å¼å¯¹è±¡ä¹‹é—´çš„è¿æ¥.</p><p>èšé›†
: æ˜¯ä¸€ç§ç‰¹æ®Šçš„å…³è”,æè¿°äº†æ•´ä½“å’Œéƒ¨åˆ†ä¹‹é—´çš„ç»“æ„å…³ç³».</p><p>æ³›åŒ–
: æ˜¯ä¸€ç§ ç‰¹æ®Š/ä¸€èˆ¬ å…³ç³»</p><p>å®ç°
: æ˜¯ç±»å…ƒä¹‹é—´çš„è¯­ä¹‰å…³ç³»</p><p>åŒ…å«
: æŠŠå‡ ä¸ªç”¨ä¾‹çš„å…¬å…±æ­¥éª¤åˆ†ç¦»æˆä¸€ä¸ªå•ç‹¬çš„è¢«åŒ…å«ç”¨ä¾‹.</p><p>æ‰©å±•
: æŠŠæ–°è¡Œä¸ºæ’å…¥åˆ°å·²æœ‰çš„ç”¨ä¾‹ä¸­çš„æ–¹æ³•.</p><p>è¾¹ç•Œç±»
: æè¿°çš„æ˜¯ç³»ç»Ÿå¤–éƒ¨ç¯å¢ƒå’Œç³»ç»Ÿå†…éƒ¨çš„äº¤äº’,å·¥ä½œåœ¨å¤–éƒ¨ç¯å¢ƒå’Œç³»ç»Ÿä¹‹é—´,è¾¹ç•Œå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªçª—å£.</p><p>å®ä½“ç±»
: å­˜å‚¨å’Œç®¡ç†ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯,å¯ä»¥æœ‰è¡Œä¸º,ä½†å¿…é¡»å’Œä»–æ‰€è¡¨ç¤ºçš„å¯¹è±¡å¯†åˆ‡ç›¸å…³
: å®ä½“ç±»æ˜¯ç‹¬ç«‹äºç³»ç»Ÿå¤–éƒ¨ç¯å¢ƒçš„</p><p>æ§åˆ¶ç±»
: ä¸»è¦æè¿°ç‰¹ç‚¹çš„ UseCase çš„æ§åˆ¶è¡Œä¸º,ä¸ç‰¹å®šçš„ UseCase, å®ç°å¯†åˆ‡ç›¸å…³
: å¯ä»¥æœ‰æ•ˆçš„é™ä½è¾¹ç•Œç±»å’Œå®ä½“ç±»çš„è€¦åˆ, ä½¿ç³»ç»Ÿå¯¹äºå¤–éƒ¨ç¯å¢ƒçš„å˜åŒ–,èƒ½æ›´å¥½é€‚åº”.</p><h2>å“ˆå¤«æ›¼æ ‘çš„å®šä¹‰</h2><p>å“ˆå¤«æ›¼æ ‘åˆç§°æœ€ä¼˜äºŒå‰æ ‘, æ˜¯ä¸€ç§å¸¦æƒè·¯å¾„é•¿åº¦æœ€çŸ­çš„äºŒå‰æ ‘.</p><p>å¸¦æƒè·¯å¾„é•¿åº¦ = æƒå€¼ * è¯¥èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„é•¿åº¦</p><h2>FTR æŒ‡å¯¼åŸåˆ™</h2><ol><li>è½¯ä»¶è¯„å®¡æ˜¯è¯„å®¡è½¯ä»¶äº§å“,ä¸è¦æ¶‰åŠå¯¹è½¯ä»¶ç”Ÿäº§è€…èƒ½åŠ›çš„è¯„ä»·</li><li>è¯„å®¡å‰è¦åˆ¶å®šä¸¥æ ¼çš„è¯„å®¡è®¡åˆ’,å¹¶ä¸¥æ ¼éµå®ˆé¢„è®¡çš„æ—¥ç¨‹å®‰æ’</li><li>å¯¹è¯„å®¡ä¸­å‡ºç°çš„é—®é¢˜è¦è®°å½•åœ¨æ¡ˆ,ä¸è¦è¿‡å¤šçš„è®¨è®ºè§£å†³é—®é¢˜,æŠŠé—®é¢˜è§£å†³ç•™ç»™ç”Ÿäº§è€…</li><li>è¦é™åˆ¶å‚ä¸äººæ•°,å¹¶è¦æ±‚å‚åŠ è¯„å®¡çš„äººå‘˜åœ¨è¯„å®¡ä¼šä¹‹å‰ä»”ç»†é˜…è¯»æ–‡æ¡£,åšå¥½å……åˆ†å‡†å¤‡</li></ol><h2>æ•°æ®åº“èŒƒå¼</h2><p>1NF
: æ¯ä¸€ä¸ªåˆ†é‡æ˜¯ä¸å¯å†åˆ†çš„æ•°æ®é¡¹
: é—®é¢˜</p><pre><code>1. å†—ä½™åº¦å¤§
2. å¼•èµ·ä¿®æ”¹æ“ä½œä¸ä¸€è‡´
3. æ’å…¥å¼‚å¸¸
4. åˆ é™¤å¼‚å¸¸
</code></pre><p>2NF
: æ¯ä¸€ä¸ªéä¸»å±æ€§å®Œå…¨ä¾èµ–äºç 
: å³ æ¶ˆé™¤äº†éä¸»å±æ€§å¯¹ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–</p><p>3NF
: æ¶ˆé™¤éä¸»å±æ€§å¯¹ç çš„ä¼ é€’å‡½æ•°ä¾èµ–</p><p>BCNF
: æ¶ˆé™¤ä¸»å±æ€§å¯¹ç çš„éƒ¨åˆ†å’Œä¼ é€’å‡½æ•°ä¾èµ–
: å³:
: æ‰€æœ‰éä¸»å±æ€§å¯¹æ¯ä¸€ä¸ªç éƒ½æ˜¯å®Œå…¨ä¾èµ–
: æ‰€æœ‰éä¸»å±æ€§å¯¹æ¯ä¸€ä¸ªä¸åŒ…å«å®ƒçš„ç ,ä¹Ÿæ˜¯å®Œå…¨å‡½æ•°ä¾èµ–
: æ²¡æœ‰ä»»ä½•å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºéç çš„ä»»ä½•ä¸€ç»„å±æ€§</p><p>ACID/Atomicity, Consistency, Isolation, Durability
: äº‹åŠ¡çš„ç‰¹æ€§: åŸå­æ€§ ä¸€è‡´æ€§ éš”ç¦»æ€§ æŒä¹…æ€§</p><p>åˆ†è§£åº”å…·æœ‰çš„ç‰¹æ€§
: åˆ†è§£å…·æœ‰æ— æŸè¿æ¥æ€§
: åˆ†è§£è¦ä¿æŒå‡½æ•°ä¾èµ–
: åˆ†è§£æ—¢è¦æœ‰æ— æŸè¿æ¥æ€§,åˆè¦ä¿æŒå‡½æ•°ä¾èµ–</p><blockquote><p>è®¾ $R(U)$ æ˜¯ä¸€ä¸ªå±æ€§é›† $U$ ä¸Šçš„å…³ç³»æ¨¡å¼, $X$ å’Œ $Y$ æ˜¯ $U$ çš„å­é›†.</p></blockquote><p>å‡½æ•°ä¾èµ–
: è‹¥å¯¹ $R(U)$ çš„ä»»æ„å¯èƒ½å…³ç³» $r$
: $r$ ä¸­ä¸å­˜åœ¨ä¸¤ä¸ªæˆ–ä»¥ä¸Šå…ƒç»„åœ¨ $X$ ä¸Šçš„å±æ€§ç›¸ç­‰ è€Œåœ¨ $Y$ ä¸Šä¸ç­‰
: åˆ™ç§° $X$ å‡½æ•°å†³å®š $Y$ æˆ– $Y$ å‡½æ•°ä¾èµ–äº $X$, è®°åš $X \rightarrow Y$</p><blockquote><p>å¦‚æœ $X \rightarrow Y$</p></blockquote><p>éå¹³å‡¡å‡½æ•°ä¾èµ–
: ä¸”$X \not\subset Y$</p><p>å¹³å‡¡å‡½æ•°ä¾èµ–
: ä¸”$X \subset Y$</p><p>å®Œå…¨å‡½æ•°ä¾èµ–
: $\forall X&#x27; \subsetneq X$,éƒ½æœ‰ $X \not\rightarrow Y$
: è®°åš $X \xrightarrow{\quad _f \quad } Y$</p><p>éƒ¨åˆ†å‡½æ•°ä¾èµ–
: $\exists  X&#x27; \subsetneq X$,æœ‰ $X \not\rightarrow Y$
: è®°åš $X \xrightarrow{\quad _p \quad } Y$</p><h2>æ•°æ®åº“çš„é”®</h2><p>å€™é€‰é”®/Candidate Key
: å…³ç³»ä¸­èƒ½å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªå…ƒç»„çš„æŸä¸€å±æ€§æˆ–å±æ€§ç»„</p><p>ä¸»ç /Primary Key
: å¦‚æœå…³ç³»ä¸­æœ‰å¤šä¸ªå€™é€‰ç ,åˆ™é€‰å®šä¸€ä¸ªä½œä¸ºä¸»ç </p><p>ä¸»å±æ€§/Primary Attribute
: åœ¨å€™é€‰ç ä¸­çš„å±æ€§</p><p>å¤–ç /Foreign Key
: å±æ€§æ˜¯å…¶ä»–å…³ç³»çš„ç </p><p>å…¨ç /All-Key
: å…³ç³»ä¸­æ‰€æœ‰å±æ€§ç»„æ˜¯è¯¥å…³ç³»çš„å€™é€‰ç </p><p>è¶…é”®/Super Key
: èƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†</p><h2>è®¾è®¡æ¨¡å¼ æ¦‚æ‹¬</h2><p>æ¡¥æ¥æ¨¡å¼/Bridge
: å°†æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦», ä½¿ä»–ä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–
: å¯¹ä¸€ä¸ªæŠ½è±¡çš„å®ç°éƒ¨åˆ†çš„ä¿®æ”¹åº”è¯¥å¯¹ä½¿ç”¨å®ƒä¸äº§ç”Ÿå½±å“</p><p>ä¸­ä»‹æ¨¡å¼/Mediator
: å¯ä»¥ä½¿å„ä¸ªå¯¹è±¡é—´çš„è€¦åˆæ¾æ•£,åªéœ€å…³å¿ƒå’ŒMediatorçš„å…³ç³»
: ä½¿å¤šå¯¹å¤šçš„å…³ç³»å˜æˆäº†ä¸€å¯¹å¤šçš„å…³ç³»,é™ä½ç³»ç»Ÿçš„å¤æ‚æ€§,æé«˜å¯ä¿®æ”¹æ€§å’Œæ‰©å±•æ€§</p><h2>OOA çš„æ­¥éª¤</h2><ol><li>åˆ†æé—®é¢˜åŸŸ,å»ºç«‹ç”¨ä¾‹æ¨¡å‹</li><li>å‘ç°å’Œå®šä¹‰å¯¹è±¡å’Œç±»</li><li>è¯†åˆ«å¯¹è±¡çš„å†…éƒ¨ç‰¹å¾</li><li>è¯†åˆ«å¯¹è±¡çš„å¤–éƒ¨ç‰¹å¾</li><li>è¯†åˆ«å¯¹è±¡ä¹‹é—´çš„äº¤äº’</li></ol><p>5ä¸ªæ´»åŠ¨
: è®¤å®šå¯¹è±¡,ç»„ç»‡å¯¹è±¡,æè¿°å¯¹è±¡é—´çš„ç›¸äº’ä½œç”¨,å®šä¹‰å¯¹è±¡çš„æ“ä½œ,å®šä¹‰å¯¹è±¡çš„å†…éƒ¨ä¿¡æ¯</p><h2>OMT æ¦‚è¿°</h2><p>OMT/Object Modeling Technique/ å¯¹è±¡å»ºæ¨¡æŠ€æœ¯
: ä¸‰ç§æ¨¡å‹: å¯¹è±¡æ¨¡å‹, åŠ¨æ€æ¨¡å‹, åŠŸèƒ½æ¨¡å‹
: å››ä¸ªæ­¥éª¤: åˆ†æ, ç³»ç»Ÿè®¾è®¡, å¯¹è±¡è®¾è®¡å’Œå®ç°</p><p>å¯¹è±¡æ¨¡å‹
: æè¿°ç³»ç»Ÿå¯¹è±¡çš„ é™æ€ç»“æ„,å¯¹è±¡ä¹‹é—´çš„å…³ç³»,å¯¹è±¡çš„å±æ€§,æ“ä½œ
: è¡¨ç¤ºé™æ€çš„,ç»“æ„ä¸Šçš„,ç³»ç»Ÿçš„ <em>æ•°æ®</em> ç‰¹å¾</p><p>åŠ¨æ€æ¨¡å‹
: æè¿°ä¸æ—¶é—´å’Œæ“ä½œé¡ºåºæœ‰å…³çš„ç³»ç»Ÿç‰¹å¾----æ¿€å‘äº‹ä»¶,äº‹ä»¶åºåˆ—,ç¡®å®šäº‹ä»¶å…ˆåå…³ç³»
ä»¥åŠäº‹ä»¶å’ŒçŠ¶æ€çš„ç»„ç»‡
: è¡¨ç¤ºç¬æ—¶çš„,è¡Œä¸ºä¸Šçš„, ç³»ç»Ÿçš„ <em>æ§åˆ¶</em> ç‰¹å¾</p><p>åŠŸèƒ½æ¨¡å‹
: æè¿°ä¸å€¼çš„å˜æ¢æœ‰å…³çš„ç³»ç»Ÿç‰¹å¾----åŠŸèƒ½,æ˜ å°„,çº¦æŸå’Œå‡½æ•°ä¾èµ–
: ä½¿ç”¨æ•°æ®æµå›¾æ¥è¡¨ç¤º</p><h2>æ’åºç®—æ³•çš„é€‚ç”¨æ€§</h2><ul><li>å¾…æ’åºçš„è®°å½•æ•°æ® n è¾ƒå°æ—¶, å¯é‡‡ç”¨æ’å…¥æ’åºå’Œé€‰æ‹©æ’åº</li><li>å¾…æ’åºåŸºæœ¬æœ‰åº, é€‰æ‹©ç›´æ¥æ’å…¥æ’åºæˆ–å†’æ³¡æ’åº</li><li>å½“ n å¾ˆå¤§ä¸”å…³é”®å­—ä½æ•°å°‘,é€‰æ‹©é“¾å¼åŸºæ•°æ’åº</li><li>å½“ n å¾ˆå¤§, åˆ™é‡‡ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)çš„æ’åºæ–¹æ³•----å¿«é€Ÿæ’åº,å †æ’åº,å½’å¹¶æ’åº</li></ul><h2>æ’åºç®—æ³•çš„åˆ†ç±»</h2><table><thead><tr><th>åˆ†ç±»</th><th>åŒ…å«</th></tr></thead><tbody><tr><td>äº¤æ¢æ’åº</td><td>å†’æ³¡æ’åº å¿«é€Ÿæ’åº</td></tr><tr><td>æ’å…¥æ’åº</td><td>æ’å…¥æ’åº å¸Œå°”æ’åº äºŒå‰æŸ¥æ‰¾æ ‘æ’åº</td></tr><tr><td>é€‰æ‹©æ’åº</td><td>é€‰æ‹©æ’åº å †æ’åº</td></tr><tr><td>å½’å¹¶æ’åº</td><td>å½’å¹¶æ’åº</td></tr><tr><td>åˆ†å¸ƒæ’åº</td><td>åŸºæ•°æ’åº</td></tr></tbody></table><h2>è®¾è®¡æ¨¡å¼åˆ†ç±»</h2><table><thead><tr><th>åˆ†ç±»</th><th>åŒ…å«</th></tr></thead><tbody><tr><td>åˆ›å»º</td><td>æŠ½è±¡å·¥å‚ æ„é€ å™¨ å·¥å‚æ–¹æ³• åŸå‹ å•ä¾‹æ¨¡å¼</td></tr><tr><td>ç»“æ„</td><td>é€‚é…å™¨ æ¡¥æ¥ ç»„åˆ è£…é¥° å¤–è§‚ äº«å…ƒ ä»£ç†</td></tr><tr><td>è¡Œä¸º</td><td>èŒè´£é“¾ å‘½ä»¤ ç¿»è¯‘å™¨ è¿­ä»£å™¨ ä»²è£å™¨(Mediator) å›å¿†(Memento) è§‚å¯Ÿè€… çŠ¶æ€æœº ç­–ç•¥ æ¨¡æ¿æ–¹æ³• å‚è§‚è€…(Visitor)</td></tr></tbody></table><h2>ä¹”å§†æ–¯åŸºæ–‡æ³•ç±»å‹</h2><table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>0å‹</td><td>ç›¸å½“äºå›¾çµæœº,ä»»ä½• 0å‹ è¯­è¨€éƒ½æ˜¯é€’å½’å¯æšä¸¾çš„</td></tr><tr><td>1å‹</td><td>ä¸Šä¸‹æ–‡æœ‰å…³æ–‡æ³•,ç›¸å½“äºçº¿å½¢ç•Œé™è‡ªåŠ¨æœº,å¯¹éç»ˆç»“ç¬¦æ›¿æ¢æ—¶ä¸è€ƒè™‘ä¸Šä¸‹æ–‡,ä¸å…è®¸æ›¿æ¢ä¸ºç©ºä¸²</td></tr><tr><td>2å‹</td><td>ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•, ç›¸å½“äºéç¡®å®šçš„ä¸‹æ¨è‡ªåŠ¨æœº</td></tr><tr><td>3å‹</td><td>å³çº¿æ€§æ–‡æ³•,ç­‰ä»·äºæ­£è§„å¼, ä¹Ÿç§°ä¸ºæ­£è§„æ–‡æ³•</td></tr></tbody></table><p>æ–‡æ³•æè¿°è¯­è¨€çš„èƒ½
: 0å‹æ–‡æ³•æœ€å¼º 3å‹æœ€å¼±</p><p>3å‹æ–‡æ³•å¿…æ˜¯2å‹æ–‡æ³•</p><h2>Tips</h2><pre><code>æ­£è§„å¼åªèƒ½è¡¨ç¤ºç»™å®šç»“æ„çš„å›ºå®šæ¬¡æ•°çš„é‡å¤æˆ–è€…æ²¡æœ‰æŒ‡å®šæ¬¡æ•°çš„é‡å¤
å¯¹äºæ¯ä¸ªéç¡®å®šçš„æœ‰é™è‡ªåŠ¨æœº,éƒ½æœ‰ä¸€ä¸ªä¸å…¶ç­‰ä»·çš„æ­£è§„å¼
ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•å¯ä»¥è¡¨ç¤ºæ¬¡æ•°ä¸å›ºå®šçš„é‡å¤


</code></pre><p>ä¸­æ–­å“åº”æœ‰ä¸¤ç§æ–¹å¼
: ç²¾ç¡®æ–­ç‚¹æ³• å’Œ ä¸ç²¾ç¡®æ–­ç‚¹æ³•</p><p>ç²¾ç¡®æ–­ç‚¹æ³•
: ç«‹å³å“åº”ä¸­æ–­
: ä¸å½±å“ä¸­æ–­ååº”æ—¶é—´,å½±å“ç¨‹åºçš„æ­£ç¡®æ‰§è¡Œ</p><p>ä¸ç²¾ç¡®æ–­ç‚¹æ³•
: æµæ°´çº¿ä¸­æŒ‡ä»¤æ‰§è¡Œå®Œåå†å“åº”ä¸­æ–­
: å½±å“ä¸­æ–­ååº”æ—¶é—´,å½±å“ç¨‹åºçš„æ­£ç¡®æ‰§è¡Œ</p><p>å¹¿ä¹‰è¡¨
: ç”±é›¶ä¸ªæˆ–å¤šä¸ªå•å…ƒç´ æˆ–å­è¡¨ç»„æˆçš„æœ‰é™åºåˆ—
: é•¿åº¦å€¼å…ƒç´ ä¸ªæ•°,æ·±åº¦æŒ‡å±•å¼€åæ‰€å«æ‹¬å·çš„æœ€å¤§å±‚æ•°
: éç©ºå¹¿ä¹‰è¡¨è¡¨å°¾å¿…å®šæ˜¯ä¸€ä¸ªè¡¨</p><p>CCIR/æ— çº¿ç”µå’¨è¯¢å§”å‘˜ä¼š
: åˆ¶å®šäº†å¹¿æ’­çº§è´¨é‡æ•°å­—ç”µè§†ç¼–ç æ ‡å‡†, CCIR601</p><p>ç®—æ³•çš„ç‰¹å¾
: æœ‰ç©·æ€§: åœ¨æœ‰ç©·æ­¥å’Œæœ‰é™æ—¶é—´å†…å®Œæˆ
: ç¡®å®šæ€§: æ— äºŒä¹‰,å”¯ä¸€çš„æ‰§è¡Œè·¯å¾„,åŒæ ·æµ‹è¾“å…¥äº§ç”ŸåŒæ ·çš„è¾“å‡º
: å¯æ‰§è¡Œæ€§: ç®—æ³•ä¸­æè¿°çš„æ“ä½œæ˜¯é€šè¿‡å·²ç»å®ç°çš„åŸºæœ¬æ“ä½œé€šè¿‡æœ‰é™æ¬¡æ‰§è¡Œå®ç°çš„
: æ­£ç¡®æ€§: æ»¡è¶³å…·ä½“éœ€æ±‚
: å¯è¯»æ€§
: å¥å£®æ€§: èƒ½å¤„ç†é”™è¯¯æ•°æ®
: æ•ˆç‡ä¸ä½å­˜å‚¨éœ€æ±‚</p><p>SIMD ä¸­
: I æ˜¯æŒ‡æŒ‡ä»¤æµ D æ˜¯æŒ‡æ•°æ®æµ</p><p>ä¸‰ç±»å¸¸ç”¨çš„ç©ºé—²å—ç®¡ç†æ–¹æ³•
: ä½å›¾å‘é‡æ³•, ç©ºé—²å—é“¾è¡¨é“¾æ¥æ³• å’Œ ç´¢å¼•æ³•</p><p>æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶</p><ul><li>äº’æ–¥æ¡ä»¶</li><li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</li><li>ä¸å‰¥å¤ºæ¡ä»¶</li><li>ç¯è·¯ç­‰å¾…æ¡ä»¶</li></ul><h2>æ ‡å‡†</h2><table><thead><tr><th>æ ‡å‡†å</th><th>æè¿°</th></tr></thead><tbody><tr><td><a href="http://en.wikipedia.org/wiki/ISO/IEC_9126">ISO/IEC 9126</a></td><td>Software engineering â€” Product quality/è½¯ä»¶å·¥ç¨‹ è´¨é‡ç®¡ç†</td></tr><tr><td>ISO/TC 176</td><td>Quality management and quality assurance</td></tr><tr><td>GB904-91</td><td>å•†å“æ¡ç ç»“æ„</td></tr><tr><td>GB7590-87</td><td>ç¬¬å››è¾…åŠ©é›†</td></tr></tbody></table><table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td>å›½é™…æ ‡å‡†</td><td>ISO,IEC</td></tr><tr><td>è¡Œä¸šæ ‡å‡†</td><td>IEEE</td></tr><tr><td>åŒºåŸŸæ ‡å‡†</td><td>CEN(æ¬§æ´²æ ‡å‡†åŒ–å§”å‘˜ä¼š)</td></tr><tr><td>å·²å…¬å¸ƒçš„è¡Œä¸šä»£å·</td><td>QJ(èˆªå¤©), SJ(ç”µå­), JB(æœºæ¢°), JR(é‡‘èç³»ç»Ÿ)</td></tr><tr><td>ä¼ä¸šæ ‡å‡†çš„ç¼–å·</td><td>è¡Œä¸šæ ‡å‡†ä»£å·+<!-- -->[/T]<!-- -->+æ ‡å‡†å‘å¸ƒé¡ºåºå·(5ä½)+/+æ ‡å‡†å‘å¸ƒå¹´ä»£å·(4ä½)</td></tr></tbody></table><h2>æ’åºç®—æ³•æ—¶é—´å¤æ‚åº¦</h2><table><thead><tr><th>æ’åºæ–¹æ³•</th><th align="center">æœ€ä¼˜æ—¶é—´å¤æ‚åº¦</th><th align="center">å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th align="center">æœ€å·®æ—¶é—´å¤æ‚åº¦</th><th align="center">æœ€å·®ç©ºé—´</th><th>è¾…åŠ©</th><th>ç¨³å®š</th></tr></thead><tbody><tr><td>æ’å…¥æ’åº</td><td align="center">O(n)</td><td align="center">O(n<sup>2</sup>)</td><td align="center">O(n<sup>2</sup>)</td><td align="center">O(n)</td><td>O(1)</td><td>Yes</td></tr><tr><td>é€‰æ‹©æ’åº</td><td align="center">-</td><td align="center">O(n<sup>2</sup>)</td><td align="center">-</td><td align="center">O(n)</td><td>~</td><td>No</td></tr><tr><td>å†’æ³¡æ’åº</td><td align="center">O(n)</td><td align="center">O(n<sup>2</sup>)</td><td align="center">O(n<sup>2</sup>)</td><td align="center">O(n)</td><td>~</td><td>Yes</td></tr><tr><td>å¸Œå°”æ’åº</td><td align="center">-</td><td align="center">O(nlog<sup>2</sup>n)</td><td align="center">-</td><td align="center">O(n)</td><td>~</td><td>No</td></tr><tr><td>å¿«é€Ÿæ’åº</td><td align="center">O(nlogn)</td><td align="center">O(nlogn)</td><td align="center">O(n<sup>2</sup>)</td><td align="center">-</td><td>O(nlogn)</td><td>No</td></tr><tr><td>å †æ’åº</td><td align="center">-</td><td align="center">O(nlogn)</td><td align="center">-</td><td align="center">O(n)</td><td>O(1)</td><td>Yes</td></tr><tr><td>å½’å¹¶æ’åº</td><td align="center">(wiki:O(n))</td><td align="center">O(nlogn)</td><td align="center">-</td><td align="center">O(n)</td><td>O(n)</td><td>Yes</td></tr><tr><td>åŸºæ•°æ’åº</td><td align="center">-</td><td align="center">O(d(n+rd))</td><td align="center">-</td><td align="center">-</td><td>O(rd)</td><td>Yes</td></tr><tr><td>åŸºæ•°æ’åº<sup>1</sup></td><td align="center">-</td><td align="center">O(kN)</td><td align="center">-</td><td align="center">O(k+N)</td><td></td><td></td></tr><tr><td>äºŒå‰æŸ¥æ‰¾æ ‘</td><td align="center">-</td><td align="center">O(logn)</td><td align="center">-</td><td align="center">O(n)</td><td></td><td></td></tr></tbody></table><p>æ³¨
: 1 : æŒ‡ç»´åŸºä¸Šçš„ç»“æœ
: ~  : å’Œä¸Šä¸€ä¸ªå€¼ç›¸åŒ</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Regex é€Ÿè®°]]></title>
        <id>regex-note</id>
        <link href="https://wener.me/story/regex-note"/>
        <updated>2013-10-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[éœ€è¦æ³¨æ„çš„æ˜¯, ç”±äºæ­£åˆ™åœ¨ä¸åŒçš„æµæ´¾ä¸­è¡¨ç¤ºæœ‰æ‰€ä¸åŒ,åªèƒ½æ•´ç†ä¸€äº›å‡ ä¹é›·åŒçš„.]]></summary>
        <content type="html"><![CDATA[<blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯, ç”±äºæ­£åˆ™åœ¨ä¸åŒçš„æµæ´¾ä¸­è¡¨ç¤ºæœ‰æ‰€ä¸åŒ,åªèƒ½æ•´ç†ä¸€äº›å‡ ä¹é›·åŒçš„.
ä¸åŒæµæ´¾ä¹‹é—´çš„å·®å¼‚,å¾ˆå¤šåœ¨æ˜¯å¦éœ€è¦è½¬ä¹‰ä¸Š,ä¾‹å¦‚ åœ¨æœ‰äº›æµæ´¾é‡Œ <code>()</code> è¦å†™æˆ <code>\(\)</code>
è¿™é‡Œæ•´ç†çš„ä¸»è¦æ˜¯ PCRE æµæ´¾çš„æ­£åˆ™è¯­æ³•</p></blockquote><h2>å­—ç¬¦è¡¨ç¤º</h2><p>å­—ç¬¦ç¼©è¿›è¡¨ç¤º
: <code>\n,\t,\a,\b,\e,\f,\r,\v</code></p><p>å…«è¿›åˆ¶è½¬ä¹‰
: <code>\num</code></p><p>åå…­è¿›åˆ¶è½¬ä¹‰/Unicode è½¬ä¹‰
: <code>\xnum,\x{num},\unum,\Unum</code></p><p>æ§åˆ¶å­—ç¬¦
: <code>\cchar</code></p><h2>å­—ç¬¦åŠç›¸å…³ç»“æ„</h2><p>æ™®é€šå­—ç¬¦ç»„
: <code>[a-z].[^a-z]</code></p><p>å‡ ä¹èƒ½åŒ¹é…ä»»ä½•å­—ç¬¦çš„å…ƒå­—ç¬¦
: <code>.</code></p><p>å•ä¸ªå­—èŠ‚
: &#x27;\C&#x27;</p><p>Unicode ç»„åˆå­—ç¬¦åºåˆ—
: <code>\X</code></p><p>å­—ç¬¦ç»„ç®€è®°(å¤§å†™ä¸ºæ’é™¤)
: <code>\w,\W,\s,\S,\d,\D</code></p><p>Unicode å±æ€§åŒºåŸŸå’Œåˆ†ç±»
: <code>\p{prop},\P{prop}</code></p><p>POSIX &quot;å­—ç¬¦ç»„&quot;æ–¹æ‹¬å·è¡¨ç¤º
: <code>[[:alpha:]]</code></p><p>POSIX &quot;Collating åºåˆ—&quot; æ–¹æ‹¬å·è¡¨ç¤º
: <code>[[.span.-11.]]</code></p><p>POSIX &quot;å­—ç¬¦ç­‰ä»·ç±»&quot; æ–¹æ‹¬å·è¡¨ç¤º
: <code>[[=n=]]</code></p><h2>é”šç‚¹åŠå…¶ä»– &quot;é›¶é•¿åº¦æ–­è¨€&quot;</h2><p>è¡Œ/å­—ç¬¦ä¸²èµ·ç‚¹
: <code>^, \A</code></p><p>è¡Œ/å­—ç¬¦ä¸²ç»ˆç‚¹
: &#x27;$. \Z, \z&#x27;</p><p>æœ¬æ¬¡åŒ¹é…çš„å¼€å§‹ä½ç½®/ä¸Šæ¬¡åŒ¹é…çš„ç»“æŸä½ç½®
: <code>\G</code></p><p>å•è¯åˆ†ç•Œç¬¦
: <code>\b,\B,\&lt;,\&gt;</code></p><p>é¡ºåºç¯è§†
: <code>(?=...), (?!...)</code></p><p>é€†åºç¯è§†
: <code>(?&lt;=...),(?&lt;!...)</code></p><h2>æ³¨é‡Šå’Œæ¨¡å¼ä¿®é¥°è¯</h2><p>æ¨¡å¼ä¿®é¥°è¯
: <code>(?modifier),(-?modifier)</code>
: eg:<code>(?i)...(?-i)</code></p><p>æ¨¡å¼ä½œç”¨èŒƒå›´
: <code>(?modifier:...)</code>
: eg:<code>(?i:....)</code></p><p>æ³¨é‡Š
: <code>(?#...),#...</code></p><p>æ–‡æœ¬èŒƒå›´
: <code>\Q,\E</code></p><h2>åˆ†ç»„,æ•è·,æ¡ä»¶åˆ¤æ–­å’Œæ§åˆ¶</h2><p>æ•è·/åˆ†ç»„
: <code>(...),\1,\2</code></p><p>ä»…ç”¨äºåˆ†ç»„
: <code>(?:...)</code></p><p>å‘½åæ•è·
: <code>(?&lt;name&gt;...)</code></p><p>å›ºåŒ–åˆ†ç»„
: <code>(?&gt;...)</code></p><p>å¤šé€‰
: <code>...|...|...</code></p><p>æ¡ä»¶åˆ¤æ–­
: <code>(?if then|else)</code></p><p>åŒ¹é…ä¼˜å…ˆé‡è¯
: <code>*,+,?,{m,n}</code></p><p>å¿½ç•¥ä¼˜å…ˆé‡è¯
: <code>*?,+?,??,{m,n}?</code></p><p>å æœ‰ä¼˜å…ˆé‡è¯
: <code>*?,++,?+,{m,n}+</code></p><h2>å‘½åå­—ç¬¦ç»„</h2><p>å…³äºè¿™äº›å­—ç¬¦ç»„çš„å‘½å,å¯ä»¥å‚è€ƒ<a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/ctype.h.html">susv-ctype</a>.éœ€è¦æ³¨æ„çš„æ˜¯,åœ¨ unicode é‡Œ,è¿™äº›å­—ç¬¦ç»„çš„å®šä¹‰è¦æ ¹æ® unicode çš„å®šä¹‰æ¥åˆ¤æ–­.ä¼šåŒ…å«é¢å¤–çš„åŒä¹‰çš„å­—ç¬¦.</p><table><thead><tr><th align="right">ç»„</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="right">[:alnum:]</td><td align="left"></td></tr><tr><td align="right">[:alpha:]</td><td align="left">å­—æ¯</td></tr><tr><td align="right">[:blank:]</td><td align="left">ç©ºç™½</td></tr><tr><td align="right">[:cntrl:]</td><td align="left">æ§åˆ¶ç¬¦</td></tr><tr><td align="right">[:digit:]</td><td align="left"></td></tr><tr><td align="right">[:graph:]</td><td align="left">å¯æ˜¾ç¤º</td></tr><tr><td align="right">[:lower:]</td><td align="left">å°å†™</td></tr><tr><td align="right">[:upper:]</td><td align="left">å¤§å†™</td></tr><tr><td align="right">[:space:]</td><td align="left">åŒ…æ‹¬ <!-- -->[:blank:]<!-- -->, æ¢è¡Œ, å›è½¦åŠå…¶ä»–</td></tr></tbody></table><h2>æµ‹è¯•å¼•æ“ç±»å‹</h2><p><code>nfa|nfa.not</code> åŒ¹é… <code>nfa.not</code></p><table><thead><tr><th>åŒ¹é…ç»“æœ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>nfa</td><td>ä¼ ç»Ÿ NFA</td></tr><tr><td>nfa.not</td><td>POSIX / DFA</td></tr></tbody></table><p>DFA ä¸æ”¯æŒæ•è·å‹æ‹¬å·å’Œå›æº¯</p><p><code>x(.+)+x</code> åŒ¹é… <code>=xx============================================================</code></p><table><thead><tr><th>åŒ¹é…ç»“æœ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ—¶é—´é•¿</td><td>NFA</td></tr><tr><td>æ—¶é—´çŸ­</td><td>DFA, ä½†ä¹Ÿæœ‰å¯èƒ½æ˜¯æ··åˆçš„æˆ–ä¼˜åŒ–çš„</td></tr></tbody></table><table><thead><tr><th>å¼•æ“</th><th>å·¥å…·</th></tr></thead><tbody><tr><td>DFA</td><td>awk, egrep, flex, lex, MySQL, Procmail</td></tr><tr><td>Tranditional NFA</td><td>GNU Emacs, Java, grep, less, more, .NET, PCRE, Perl, PHP, Python, Vi, Ruby, sed</td></tr><tr><td>POSIX NFA</td><td>mawk, Mortricekern System;s utiles, GNU Emacs</td></tr><tr><td>DFA/NFA</td><td>GNU awk, GNU grep, Tcl</td></tr></tbody></table><h2>åŒ¹é…åŸºç¡€</h2><p>è§„åˆ™ 1
: ä¼˜å…ˆé€‰æ‹©æœ€å·¦ç«¯çš„åŒ¹é…ç»“æœ</p><p>è§„åˆ™ 2
: æ ‡å‡†é‡è¯æ˜¯åŒ¹é…ä¼˜å…ˆçš„</p><p>NFA
: è¡¨è¾¾å¼ä¸»å¯¼</p><p>DFA
: æ–‡æœ¬ä¸»å¯¼,ä¸å…³å¿ƒè¡¨è¾¾å¼çš„å½¢å¼
: å³ <code>x*=x?x?...=(x(x(x...)?)?)?</code></p><p>åŒ¹é…ä¼˜å…ˆé‡è¯å’Œå¿½ç•¥ä¼˜å…ˆé‡è¯æ§åˆ¶,å¯¹å›æº¯çŠ¶æ€é€‰æ‹©,æ˜¯è·³è¿‡è¿˜æ˜¯è¿›è¡Œ.</p><p>ç¯è§†æ¨¡æ‹Ÿå›ºåŒ–åˆ†ç»„
: <code>(?&gt;...) =&gt; (?=(...))\1</code></p><p>å¤šé€‰ç»“æ„å³éåŒ¹é…ä¼˜å…ˆ,ä¹Ÿéå¿½ç•¥ä¼˜å…ˆ,è€Œæ˜¯é¡ºåºä¼˜å…ˆ
: eg: <code>(to|tow) =~ &quot;tow&quot; = &quot;to&quot;</code></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç®€å•çš„æ–‡å­—æ°”æ³¡æ¡† for Swing]]></title>
        <id>java-siwng-textbubble</id>
        <link href="https://wener.me/story/java-siwng-textbubble"/>
        <updated>2013-10-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[TextBubbleBorderDemo screenschot]]></summary>
        <content type="html"><![CDATA[<p><img src="https://git.oschina.net/wenerme/wener/raw/master/screenshot/TextBubbleBorderDemo.png" alt="TextBubbleBorderDemo screenschot" title="TextBubbleBorderDemo"/></p><p><a href="http://resources.wener.me/java/TextBubbleBorderDemo.java">ä»£ç ä¸‹è½½</a></p><p><a href="http://resources.wener.me/java/TextBubbleBorderDemo.jar">ç¨‹åºä¸‹è½½</a></p><p><a href="http://resources.wener.me/java/TextBubbleBorderDemo.jnlp">è¿è¡Œç¨‹åº</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ•°æ®åº“åŸç† for NCRE 4]]></title>
        <id>ncre-4-database-note</id>
        <link href="https://wener.me/story/ncre-4-database-note"/>
        <updated>2013-09-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[è®°å½•è‡ª å…¨å›½é«˜ç­‰æ•™è‚²åˆ¶å®šæ•™æ æ•°æ®åº“åŸç†]]></summary>
        <content type="html"><![CDATA[<blockquote><p>è®°å½•è‡ª <strong>å…¨å›½é«˜ç­‰æ•™è‚²åˆ¶å®šæ•™æ æ•°æ®åº“åŸç†</strong>
å’Œ éƒ¨åˆ†è‡ªå·±çš„æ•´ç†</p></blockquote><hr/><h2>1. æ•°æ®åº“ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ</h2><h3>1.2 æ•°æ®æè¿°</h3><h4>1.2.1 æ¦‚å¿µè®¾è®¡ä¸­çš„æ•°æ®æè¿°</h4><p>å®ä½“(Entity):
: å®¢è§‚å­˜åœ¨,å¯ä»¥ç›¸äº’åŒºåˆ«çš„äº‹ç‰©æˆä¸ºå®ä½“</p><p>å®ä½“é›†(Entity Set)
: æ€§è´¨ç›¸åŒçš„åŒç±»å®ä½“çš„é›†åˆ</p><p>å±æ€§(Attribute)
: å®ä½“çš„ç‰¹æ€§ç§°ä¸ºå±æ€§</p><p>å®ä½“æ ‡è¯†ç¬¦(Indentify)
: èƒ½å”¯ä¸€æ ‡è¯†å®ä½“çš„å±æ€§æˆ–å±æ€§é›†</p><h4>1.2.2 é€»è¾‘è®¾è®¡ä¸­çš„æ•°æ®æè¿°</h4><p>è®°å½•(Record)
: å­—æ®µçš„æœ‰åºé›†åˆ</p><p>å­—æ®µ(Field)
: æ ‡è®°å®ä½“å±æ€§çš„å‘½åå•ä½ç§°ä¸ºå­—æ®µæˆ–æ•°æ®é¡¹</p><p>æ–‡ä»¶(File)
: åŒä¸€ç±»è®°å½•çš„é›†åˆ</p><p>å…³é”®ç (Key)
: èƒ½å”¯ä¸€ä¾¿æ˜¯æ–‡ä»¶ä¸­æŸä¸ªè®°å½•çš„å­—æ®µæˆ–å­—æ®µé›†</p><h4>æœ¯è¯­çš„å¯¹åº”å…³ç³»</h4><table><thead><tr><th>æ¦‚å¿µè®¾è®¡</th><th>é€»è¾‘è®¾è®¡</th></tr></thead><tbody><tr><td>å®ä½“</td><td>è®°å½•</td></tr><tr><td>å±æ€§</td><td>å­—æ®µ</td></tr><tr><td>å®ä½“é›†</td><td>æ–‡ä»¶</td></tr><tr><td>å®ä½“æ ‡è¯†ç¬¦</td><td>å…³é”®ç </td></tr></tbody></table><h4>1.2.4 æ•°æ®è”ç³»çš„æè¿°</h4><p>è”ç³» (Relationship)
: å®ä½“ä¹‹é—´çš„ç›¸äº’å…³ç³»,ä¸ä¸€ä¸ªè”ç³»ç›¸å…³çš„å®ä½“ä¸ªæ•°ç§°ä¸ºè”ç³»çš„å…ƒæ•°</p><p>è”ç³»çš„ç±»å‹
: ä¸€å¯¹ä¸€,ä¸€å¯¹å¤š,å¤šå¯¹å¤š 1:1, 1:N, N:M</p><h3>1.3 æ•°æ®çš„æŠ½è±¡çº§åˆ«</h3><h4>1.3.1 æ•°æ®æŠ½è±¡è¿‡ç¨‹</h4><p>æ¨¡å‹(Model)
: å¯¹ç°å®ä¸–ç•Œçš„æŠ½è±¡</p><p>æ•°æ®æ¨¡å‹(Date Model)
: æ•°æ®åº“çš„ç»“æ„å’Œè¯­ä¹‰,å¯¹ç°å®ä¸–ç•Œçš„æ•°æ®è¿›è¡ŒæŠ½è±¡</p><p>: &gt; <strong><a href="http://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B">wiki-æ•°æ®æ¨¡å‹</a></strong> æ•°æ®æ¨¡å‹æ˜¯å®šä¹‰æ•°æ®å¦‚ä½•è¾“å…¥å’Œä¸è¾“å‡ºçš„ä¸€ç§æ¨¡å‹ã€‚
å…¶ä¸»è¦ä½œç”¨æ˜¯ä¸ºä¿¡æ¯ç³»ç»Ÿæä¾›æ•°æ®çš„å®šä¹‰å’Œæ ¼å¼ã€‚æ•°æ®æ¨¡å‹æ˜¯æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒå’ŒåŸºç¡€ï¼Œ
ç°æœ‰çš„æ•°æ®åº“ç³»ç»Ÿéƒ½æ˜¯åŸºäºæŸç§æ•°æ®æ¨¡å‹è€Œå»ºç«‹èµ·æ¥çš„ã€‚</p><h4>1.3.2 æ¦‚å¿µæ¨¡å‹</h4><ol><li>è¡¨è¾¾æ•°æ®çš„æ•´ä½“é€»è¾‘ç»“æ„ï¼Œæ˜¯ç³»ç»Ÿç”¨æˆ·å¯¹æ•´ä¸ªåº”ç”¨é¡¹ç›®è®¾è®¡çš„æ•°æ®çš„å…¨é¢æè¿°</li><li>ä»ç”¨æˆ·çš„è§‚ç‚¹å‡ºå‘ï¼Œå¯¹æ•°æ®å»ºæ¨¡</li><li>ç‹¬ç«‹äºç¡¬ä»¶å’Œè½¯ä»¶</li><li>æ˜¯æ•°æ®åº“è®¾è®¡äººå‘˜ä¸ç”¨æˆ·ä¹‹é—´è¿›è¡Œäº¤æµçš„å·¥å…·</li></ol><h4>1.3.3 é€»è¾‘æ¨¡å‹</h4><ol><li>è¡¨è¾¾äº†DBçš„æ•´ä½“é€»è¾‘ç»“æ„,è®¾è®¡äººå‘˜å¯¹æ•´ä¸ªåº”ç”¨é¡¹ç›®æ•°æ®åº“çš„å…¨é¢æè¿°</li><li>ä»æ•°æ®åº“çš„å®ç°è§‚ç‚¹å‡ºå‘,å¯¹æ•°æ®å»ºæ¨¡</li><li>ç‹¬ç«‹äºç¡¬ä»¶,ä¾èµ–äºè½¯ä»¶</li><li>æ•°æ®åº“è®¾è®¡äººå‘˜ä¸åº”ç”¨ç¨‹åºå‘˜ä¹‹é—´è¿›è¡Œäº¤æµçš„å·¥å…·<blockquote><p>é€»è¾‘æ¨¡å‹çš„ç±»å‹: å±‚æ¬¡,ç½‘çŠ¶,å…³ç³»</p></blockquote></li></ol><h4>1.3.4 å¤–éƒ¨æ¨¡å‹</h4><ol><li>æ˜¯é€»è¾‘æ¨¡å‹çš„å­é›†</li><li>ç‹¬ç«‹äºç¡¬ä»¶,ä¾èµ–äºè½¯ä»¶</li><li>ååº”ç”¨æˆ·ä½¿ç”¨æ•°æ®åº“çš„è§‚ç‚¹</li></ol><h5>å¤–éƒ¨æ¨¡å‹çš„ä¼˜ç‚¹</h5><ol><li>ç®€åŒ–ç”¨æˆ·çš„è§‚ç‚¹</li><li>æœ‰åŠ©äºæ•°æ®çš„å®‰å…¨æ€§ä¿æŠ¤</li><li>å¤–éƒ¨æ¨¡å‹æ˜¯å¯¹æ¦‚å¿µæ¨¡å‹çš„æ”¯æŒ</li></ol><h4>1.3.5 å†…éƒ¨æ¨¡å‹</h4><p>å†…éƒ¨æ¨¡å‹ä¹Ÿå«åšç‰©ç†æ¨¡å‹,æ˜¯æ•°æ®åº“æœ€åº•å±‚çš„æŠ½è±¡,å®ƒæè¿°æ•°æ®åœ¨ç£ç›˜æˆ–ç£å¸¦ä¸Šçš„å­˜å‚¨æ–¹å¼,å­˜å–è®¾å¤‡å’Œå­˜å–æ–¹æ³•</p><blockquote><p>ç°ä»Šçš„å†…éƒ¨ç»†èŠ‚å¤§å¤šç”±æ“ä½œç³»ç»Ÿå®ç°</p></blockquote><h4>1.3.6 ä¸‰å±‚æ¨¡å‹å’Œä¸¤çº§æ˜ è±¡</h4><ul><li>ä¸‰å±‚æ¨¡å‹å³ä¸Šè¿°çš„: å¤–éƒ¨,é€»è¾‘,å†…éƒ¨</li><li>ä¸¤å±‚æ˜ è±¡ä¸º: å†…éƒ¨ &lt;-&gt; é€»è¾‘, é€»è¾‘ &lt;-&gt; å†…éƒ¨</li><li>ä¼˜ç‚¹: å¢å¼ºäº†ç‹¬ç«‹æ€§,ä¸åŒæ¨¡å¼å±‚æ¬¡ä¹‹é—´çš„æ“ä½œç”±æ˜ å°„å®Œæˆ</li></ul><h3>1.4 æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)</h3><h4>1.4.1 DBMSçš„å·¥ä½œæ¨¡å¼</h4><p>æ•°æ®åº“æ“ä½œç³»ç»Ÿ(DBMS)
: æ˜¯æŒ‡æ•°æ®åº“ç³»ç»Ÿä¸­å¯¹æ•°æ®è¿›è¡Œç®¡ç†çš„è½¯ä»¶ç³»ç»Ÿã€‚å®ƒæ˜¯æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†.å¯¹DBçš„ä¸€åˆ‡æ“ä½œ,
åŒ…æ‹¬å®šä¹‰,æŸ¥è¯¢,æ›´æ–°åŠå„ç§æ§åˆ¶,éƒ½æ˜¯é€šè¿‡DBMSè¿›è¡Œçš„.</p><h5>DBMSçš„å·¥ä½œæ¨¡å¼</h5><ol><li>æ¥å—åº”ç”¨ç¨‹åºçš„æ•°æ®è¯·æ±‚å’Œå¤„ç†è¯·æ±‚</li><li>å°†ç”¨æˆ·çš„æ•°æ®è¯·æ±‚(é«˜çº§æŒ‡ä»¤)è½¬æ¢(ç¼–è¯‘)æˆå¤æ‚çš„æœºå™¨ç (ä½çº§æŒ‡ä»¤)</li><li>å®ç°å¯¹æ•°æ®åº“çš„æ“ä½œ</li><li>ä»å¯¹æ•°æ®åº“çš„æ“ä½œä¸­æ¥å—æŸ¥è¯¢ç»“æœ</li><li>å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œå¤„ç†(æ ¼å¼è½¬æ¢)</li><li>å°†å¤„ç†ç»“æœè¿”å›ç»™ç”¨æˆ·</li></ol><h5>DBMSçš„ä¸»è¦åŠŸèƒ½</h5><ol><li>å®šä¹‰(DDL)</li><li>æ“çºµ(DML)</li><li>æ•°æ®åº“çš„ä¿æŠ¤åŠŸèƒ½<ol><li>æ•°æ®åº“çš„æ¢å¤</li><li>å¹¶å‘æ§åˆ¶</li><li>å®Œæ•´æ€§æ§åˆ¶</li><li>å®‰å…¨æ€§æ§åˆ¶</li></ol></li><li>æ•°æ®åº“çš„ç»´æŠ¤åŠŸèƒ½
åŒ…æ‹¬æ•°æ®çš„è½½å…¥,è½¬æ¢,è½¬å‚¨,æ•°æ®åº“çš„æ”¹ç»„ä»¥åŠæ€§èƒ½ç›‘æ§ç­‰</li><li>æ•°æ®å­—å…¸
æ•°æ®åº“ç³»ç»Ÿä¸­å­˜æ”¾ä¸‰çº§ç»“æ„å®šä¹‰çš„æ•°æ®åº“æˆä¸ºæ•°æ®å­—å…¸(DD)</li></ol><blockquote></blockquote><h3>1.5 æ•°æ®åº“ç³»ç»Ÿ(DBS)</h3><h4>1.5.1 DBSçš„ç»„æˆ</h4><p>DBS æ˜¯é‡‡ç”¨äº†æ•°æ®åº“æŠ€æœ¯çš„è®¡ç®—æœºç³»ç»Ÿ.å®ƒæ˜¯æ•°æ®åº“,ç¡¬ä»¶,è½¯ä»¶å’Œæ•°æ®åº“ç®¡ç†å‘˜çš„é›†åˆä½“.</p><p>æ•°æ®åº“(DB)
: æ˜¯å„é¡¹åº”ç”¨æœ‰å…³çš„å…¨éƒ¨æ•°æ®çš„é›†åˆ.åˆ†ä¸ºä¸¤ç±»,ä¸€ç±»æ˜¯åº”ç”¨æ•°æ®çš„é›†åˆ,æˆä¸ºç‰©ç†æ•°æ®åº“,
æ˜¯æ•°æ®åº“çš„ä¸»é¢˜;å¦ä¸€ç±»æ˜¯å„çº§æ•°æ®ç»“æ„çš„æè¿°,ç§°ä¸ºæè¿°æ•°æ®åº“,ç”±DDç³»ç»Ÿç®¡ç†.</p><h5>æ•°æ®åº“ç®¡ç†å‘˜(DBA)</h5><p>DBAéœ€è¦å…·å¤‡çš„ç´ è´¨</p><ul><li>ç†Ÿæ‚‰ä¼ä¸šå…¨éƒ¨æ•°æ®çš„æ€§è´¨å’Œç”¨é€”</li><li>å¯¹æ‰€æœ‰ç”¨æˆ·çš„éœ€æ±‚æœ‰</li></ul><h4>1.5.2 DBSçš„å…¨å±€ç»“æ„</h4><p>å¸¸è§ä¹¦ä¸Šçš„å›¾ 1.21</p><h4>1.5.3 DBSçš„ç¬‘æ„</h4><ol><li>çµæ´»æ€§</li><li>ç®€æ˜“æ€§</li><li>é¢å‘ç”¨æˆ·</li><li>æœ‰æ•ˆçš„æ•°æ®æ§åˆ¶</li><li>åŠ å¿«åº”ç”¨ç³»ç»Ÿçš„å¼€å‘é€Ÿåº¦</li><li>ç»´æŠ¤æ–¹ä¾¿</li><li>æ ‡å‡†åŒ–</li></ol><hr/><h2>2. æ•°æ®åº“è®¾è®¡å’Œ ER æ¨¡å‹</h2><h3>2.1 æ•°æ®åº“ç³»ç»Ÿç”Ÿå­˜æœŸ</h3><p>æ•°æ®åº“ç”Ÿå­˜æœŸä¸€èˆ¬åˆ†ä¸ºä¸ƒä¸ªé˜¶æ®µ: è§„åˆ’,éœ€æ±‚åˆ†æ,æ¦‚å¿µè®¾è®¡,é€»è¾‘è®¾è®¡,å®ç°,è¿è¡Œç»´æŠ¤</p><h4>2.1.1 è§„åˆ’é˜¶æ®µ</h4><p>å¯¹äºæ•°æ®åº“ç³»ç»Ÿ,ç‰¹åˆ«æ˜¯å¤§å‹æ•°æ®åº“ç³»ç»Ÿæˆ–å¤§å‹ä¿¡æ¯ç³»ç»Ÿä¸­çš„æ•°æ®åº“ç¾¤,è§„åˆ’é˜¶æ®µæ˜¯ååˆ†å¿…è¦çš„.
è§„åˆ’çš„å¥½åå°†ç›´æ¥å½±å“åˆ°æ•´ä¸ªç³»ç»Ÿçš„æˆåŠŸä¸å¦,å¯¹åº”ç”¨å•ä½çš„ä¿¡æ¯åŒ–è¿›ç¨‹å°†äº§ç”Ÿæ·±è¿œå½±å“.</p><p>è§„åˆ’é˜¶æ®µçš„å…·ä½“æ­¥éª¤:</p><ol><li><p>ç³»ç»Ÿè°ƒæŸ¥
å¯¹åº”ç”¨å•ä½åšå…¨é¢çš„è°ƒæŸ¥.å‘ç°å…¶å­˜åœ¨çš„ä¸»è¦é—®é¢˜,å¹¶ç”»å‡ºç»„ç»‡å±‚æ¬¡å›¾,ä»¥äº†è§£ä¼ä¸šçš„ç»„ç»‡ç»“æ„</p></li><li><p>å¯è¡Œæ€§åˆ†æ
ä»æŠ€æœ¯,ç»æµ,æ•ˆç›Š,æ³•å¾‹ç­‰è¯¸æ–¹é¢å¯¹å»ºç«‹æ•°æ®åº“çš„å¯è¡Œæ€§è¿›è¡Œåˆ†æ,ç„¶åå†™å‡ºå¯è¡Œæ€§åˆ†ææŠ¥å‘Š;ç»„ç»‡ä¸“å®¶è¿›è¡Œè®¨è®ºå…¶å¯è¡Œæ€§</p></li><li><p>ç¡®å®šæ•°æ®åº“ç³»ç»Ÿçš„æ€»ç›®æ ‡, å¹¶å¯¹åº”ç”¨å•ä½çš„å·¥ä½œæµç¨‹è¿›è¡Œä¼˜åŒ–å’Œåˆ¶å®šé¡¹ç›®å¼€å‘è®¡åˆ’.
åœ¨å¾—åˆ°å†³ç­–éƒ¨é—¨æ‰¹å‡†å,å°±æ­£å¼è¿›å…¥æ•°æ®åº“ç³»ç»Ÿçš„å¼€å‘å·¥ä½œ</p></li></ol><h4>2.1.2 éœ€æ±‚åˆ†æé˜¶æ®µ</h4><p>è¿™ä¸€é˜¶æ®µæ˜¯è®¡ç®—æœºäººå‘˜(ç³»ç»Ÿåˆ†æå‘˜)å’Œç”¨æˆ·åŒæ–¹å…±åŒæ”¶é›†æ•°æ®åº“æ‰€éœ€çš„ä¿¡æ¯å†…å®¹å’Œç”¨æˆ·å¯¹å¤„ç†çš„éœ€æ±‚,
å¹¶ä»¥éœ€æ±‚è¯´æ˜ä¹¦çš„å½¢å¼ç¡®å®šä¸‹æ¥,ä½œä¸ºä»¥åå¼€ç³»ç»Ÿå¼€å‘çš„æŒ‡å—å’Œç³»ç»ŸéªŒè¯çš„ä¾æ®</p><p>éœ€æ±‚åˆ†æé˜¶æ®µçš„å…·ä½“æ­¥éª¤:</p><ol><li>åˆ†æç”¨æˆ·æ´»åŠ¨,äº§ç”Ÿä¸šåŠ¡æµç¨‹å›¾</li><li>ç¡®å®šç³»ç»ŸèŒƒå›´,äº§ç”Ÿç³»ç»Ÿå…³ç³»å›¾</li><li>åˆ†æç”¨æˆ·æ´»åŠ¨æ¶‰åŠçš„æ•°æ®,äº§ç”Ÿæ•°æ®æµå›¾(DFD)</li><li>åˆ†æç³»ç»Ÿæ•°æ®,äº§ç”Ÿæ•°æ®å­—å…¸</li></ol><blockquote><p>æ•°æ®å­—å…¸ä¸­é€šå¸¸åŒ…æ‹¬æ•°æ®é¡¹,æ•°æ®ç»“æ„,æ•°æ®æµ,æ•°æ®å­˜å‚¨å’Œå¤„ç†5ä¸ªéƒ¨åˆ†</p></blockquote><h4>2.1.3 æ¦‚å¿µè®¾è®¡é˜¶æ®µ</h4><p>æ¦‚å¿µè®¾è®¡çš„ç›®æ ‡æ˜¯äº§ç”Ÿååº”ç”¨æˆ·å•ä½ä¿¡æ¯éœ€æ±‚çš„æ•°æ®æ¦‚å¿µç»“æ„,å³æ¦‚å¿µç»“æ„,æ¦‚å¿µæ¨¡å‹ç‹¬ç«‹äºè®¡
ç®—æœºç¡¬ä»¶ç»“æ„,ç‹¬ç«‹äºæ”¯æŒæ•°æ®çš„DBMS.</p><p>æ¦‚å¿µè®¾è®¡çš„ä¸»è¦æ­¥éª¤:</p><ol><li><p>è¿›è¡Œæ•°æ®æŠ½è±¡,è®¾è®¡å±€éƒ¨æ¦‚å¿µæ¨¡å‹</p><blockquote><p>è®¾è®¡æ¦‚å¿µç»“æ„æ—¶,å¸¸ç”¨çš„æ•°æ®æŠ½è±¡æ–¹æ³•æ˜¯&quot;èšé›†&quot;å’Œ&quot;æ¦‚æ‹¬&quot;</p></blockquote></li><li><p>å°†å±€éƒ¨æ¦‚å¿µç»¼åˆæˆå…¨å±€æ¦‚å¿µæ¨¡å‹</p></li><li><p>è¯„å®¡
ç¡®è®¤å…¨å±€ç»“æ„æ˜¯å¦å®Œæ•´,å„ç§åˆ’åˆ†æ˜¯å¦åˆç†,æ˜¯å¦å­˜åœ¨ä¸ä¸€è‡´æ€§,å„ç§æ–‡æ¡£æ˜¯å¦é½å…¨</p></li></ol><h4>2.1.4 é€»è¾‘è®¾è®¡é˜¶æ®µ</h4><p>æ¦‚å¿µè®¾è®¡çš„ç»“æœæ˜¯å¾—åˆ°ä¸€ä¸ªä¸DBMSæ— å…³çš„æ¦‚å¿µæ¨¡å‹.è€Œé€»è¾‘è®¾è®¡çš„ç›®çš„æ˜¯æŠŠæ¦‚å¿µè®¾è®¡é˜¶æ®µè®¾è®¡å¥½çš„
æ¦‚å¿µæ¨¡å‹è½¬æ¢æˆå…·ä½“çš„é€»è¾‘æ¨¡å‹.</p><p>é€»è¾‘è®¾è®¡çš„ä¸»è¦æ­¥éª¤:</p><ol><li>æŠŠæ¦‚å¿µæ¨¡å‹è½¬æ¢æˆé€»è¾‘æ¨¡å‹
ERæ¨¡å‹è½¬æ¢æˆå…³ç³»æ¨¡å‹</li><li>è®¾è®¡å¤–æ¨¡å‹</li><li>è®¾è®¡åº”ç”¨ç¨‹åºä¸æ•°æ®åº“çš„æ¥å£</li><li>è¯„ä»·æ¨¡å‹</li><li>ä¿®æ­£æ¨¡å‹</li></ol><h4>2.1.5 ç‰©ç†è®¾è®¡é˜¶æ®µ</h4><p>å…·ä½“æ­¥éª¤:</p><ol><li>å­˜å‚¨è®°å½•ç»“æ„è®¾è®¡</li><li>ç¡®å®šæ•°æ®å­˜æ”¾ä½ç½®</li><li>å­˜å–æ–¹æ³•çš„è®¾è®¡</li><li>å®Œæ•´æ€§å’Œå®‰å…¨æ€§è€ƒè™‘</li><li>ç¨‹åºè®¾è®¡</li></ol><h4>2.1.6 æ•°æ®åº“çš„å®ç°</h4><p>ä¸»è¦åŒ…æ‹¬</p><ol><li>ç”¨DDLå®šä¹‰æ•°æ®åº“ç»“æ„</li><li>æ•°æ®è£…è½½/ç»„ç»‡æ•°æ®å…¥åº“
å…·ä½“æ­¥éª¤: ç­›é€‰æ•°æ®, è¾“å…¥æ•°æ®, è½¬æ¢æ•°æ®æ ¼å¼, æ ¡éªŒæ•°æ®, ç»¼åˆæ•°æ®</li><li>ç¼–åˆ¶ä¸è°ƒè¯•åº”ç”¨ç¨‹åº
è¯¥æ­¥éª¤ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®è¿›è¡Œè°ƒè¯•</li><li>æ•°æ®åº“è¯•è¿è¡Œ
åŠŸèƒ½è°ƒè¯•,æ€§èƒ½æµ‹è¯•</li></ol><h4>2.1.7 æ•°æ®åº“çš„è¿è¡Œä¸ç»´æŠ¤</h4><p>åœ¨æ•°æ®åº“è¿è¡Œé˜¶æ®µ,å¯¹æ•°æ®åº“ç»å¸¸æ€§çš„ç»´æŠ¤å·¥ä½œä¸»è¦ç”±DBAå®Œæˆ,å®ƒåŒ…æ‹¬ä»¥ä¸‹å†…å®¹:</p><ol><li>æ•°æ®åº“çš„è½¬å‚¨å’Œæ¢å¤</li><li>æ•°æ®åº“å®‰å…¨æ€§,å®Œæ•´æ€§æ§åˆ¶</li><li>æ•°æ®åº“æ€§èƒ½çš„ç›‘ç£,åˆ†æå’Œæ”¹è¿›</li><li>æ•°æ®åº“çš„é‡ç»„ç»‡å’Œé‡æ„é€ </li></ol><hr/><h2>3. å…³ç³»æ¨¡å¼è®¾è®¡ç†è®º</h2><p>å…³ç³»æ¨¡å¼è®¾è®¡ç†è®ºä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢çš„å†…å®¹: æ•°æ®ä¾èµ–,èŒƒå¼å’Œæ¨¡å¼è®¾è®¡æ–¹æ³•</p><h3>3.1 å…³ç³»æ¨¡å¼çš„è®¾è®¡å‡†åˆ™</h3><h4>3.1.1 å…³ç³»æ¨¡å¼çš„å†—ä½™å’Œå¼‚å¸¸é—®é¢˜</h4><p> <strong>åˆ†è§£</strong>æ˜¯è§£å†³å†—ä½™çš„ä¸»è¦æ–¹æ³•,ä¹Ÿæ˜¯è§„èŒƒåŒ–çš„ä¸€æ¡åŸåˆ™:&quot;å…³ç³»æ¨¡å¼æœ‰å†—ä½™,å°±åˆ†è§£å®ƒ&quot;</p><h4>3.1.2 å…³ç³»æ¨¡å¼çš„éå½¢å¼åŒ–è®¾è®¡å‡†åˆ™</h4><p>å‡†åˆ™ 3.1
: <small>å…³ç³»æ¨¡å¼çš„è®¾è®¡å°½å¯èƒ½</small>åªåŒ…å«æœ‰ç›´æ¥è”ç³»çš„å±æ€§,ä¸è¦åŒ…å«æœ‰é—´æ¥è”ç³»çš„å±æ€§.
ä¹Ÿå°±æ˜¯,æ¯ä¸ªå…³ç³»å…³ç³»æ¨¡å¼åº”åªå¯¹åº”äºä¸€ä¸ªå®ä½“ç±»å‹æˆ–ä¸€ä¸ªè”ç³»ç±»å‹.</p><p>å‡†åˆ™ 3.2
: <small>å…³ç³»æ¨¡å¼çš„è®¾è®¡å°½å¯èƒ½ä½¿å¾—ç›¸åº”å…³ç³»ä¸­</small>ä¸å‡ºç°æ’å…¥,åˆ é™¤å’Œä¿®æ”¹ç­‰æ“ä½œå¼‚å¸¸ç°è±¡.
å¦‚æœå‡ºç°ä»»ä½•å¼‚å¸¸,åˆ™è¦æ¸…æ¥šçš„åŠ ä»¥è¯´æ˜,å¹¶ç¡®ä¿æ›´æ–°æ•°æ®åº“çš„ç¨‹åºæ­£ç¡®æ“ä½œ.</p><p>å‡†åˆ™ 3.3
: <small>å…³ç³»æ¨¡å¼çš„è®¾è®¡å°½å¯èƒ½ä½¿å¾—ç›¸åº”å…³ç³»ä¸­</small>é¿å…æ”¾ç½®ç»å¸¸ä¸ºç©ºçš„å±æ€§.</p><p>å‡†åˆ™ 3.4
: <small>å…³ç³»æ¨¡å¼çš„è®¾è®¡åº”å°½å¯èƒ½ä½¿å¾—</small>å…³ç³»çš„ç­‰å€¼è¿æ¥åœ¨ä¸»é”®å’Œå¤–é”®çš„å±æ€§ä¸Šè¿›è¡Œ,
å¹¶ä¸”ä¿è¯è¿æ¥ä»¥åä¸ä¼šäº§ç”Ÿé¢å¤–çš„å…ƒç»„.</p><pre><code>&gt; å¦‚æœä¸¤ä¸ªè¿æ¥åŒ¹é…çš„ä¸æ˜¯å¤–é”®æˆ–ä¸»é”®,é‚£ä¹ˆè¿™ç§è¿æ¥å¾ˆå¯èƒ½ä¼šäº§ç”Ÿé¢å¤–å…ƒç»„
</code></pre><h3>3.2 å‡½æ•°ä¾èµ–</h3><h4>3.2.1 å‡½æ•°ä¾èµ–çš„å®šä¹‰</h4><p>å®šä¹‰ 3.1
: è®¾æœ‰å…³ç³»æ¨¡å¼ R(U), X å’Œ Y æ˜¯å±æ€§é›† U çš„å­é›†,
<strong>å‡½æ•°ä¾èµ–(FUnctional Dependency, ç®€è®°ä¸º FD)</strong>
æ˜¯å½¢æˆ $x\rightarrow y$ çš„ä¸€ä¸ªå‘½é¢˜, åªè¦ræ˜¯Rçš„å½“å‰å…³ç³»,
å¯¹rä¸­ä»»æ„ä¸¤ä¸ªå…ƒç»„ t å’Œ s,éƒ½æœ‰ t<!-- -->[X]<!-- --> = s<!-- -->[X]<!-- --> è•´å« t<!-- -->[Y]<!-- --> = s<!-- -->[Y]<!-- -->,
é‚£ä¹ˆç§° $FD\quad x\rightarrow y$ åœ¨å…³ç³»æ¨¡å¼ R(U)ä¸­æˆç«‹.</p><p>è¿™é‡Œ t<!-- -->[X]<!-- --> è¡¨ç¤ºå…ƒç»„ t åœ¨å±æ€§é›† X ä¸Šçš„å€¼,å…¶ä½™ç±»åŒ. $X \rightarrow Y$ è¯»ä½œ X å‡½æ•°å†³å®š Y,
æˆ– Y å‡½æ•°ä¾èµ–äº X. FD æ˜¯å¯¹å…³ç³»æ¨¡å¼ R çš„ä¸€åˆ‡å¯èƒ½çš„å…³ç³» r å®šä¹‰çš„. å¯¹äºå½“å‰å…³ç³» r çš„ä»»æ„ä¸¤ä¸ªå…ƒç»„,
å¦‚æœ X ç›¸åŒ,åˆ™è¦æ±‚ Y å€¼ä¹Ÿç›¸åŒ.å³æœ‰ä¸€ä¸ª X å€¼å°±æœ‰ä¸€ä¸ª Y å€¼ä¸ä¹‹å¯¹åº”, æˆ–è€…è¯´ Y å€¼ç”± X å€¼å†³å®š.
å› è€Œè¿™ç§ä¾èµ–ç§°ä¸ºå‡½æ•°ä¾èµ–.</p><p>å½“å…³ç³»æ¨¡å¼ä¸Šå­˜åœ¨å‡½æ•°ä¾èµ–æ—¶,å¯¹å…¶å…³ç³»ä¸­çš„å€¼å°†æœ‰ä¸¥æ ¼çš„é™åˆ¶.</p><p>å®šä¹‰ 3.2
: å¦‚æœ $X \rightarrow Y$ å’Œ $Y \rightarrow X$ åŒæ—¶æˆç«‹,åˆ™å¯è®°ä¸º $X \leftrightarrow Y$.
ä¹Ÿå°±æ˜¯åœ¨å…³ç³»ä¸­, X å€¼å’Œ Y å€¼å…·æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³».</p><h4>3.2.2 FD çš„é€»è¾‘è•´å«</h4><p>å®šä¹‰ 3.3
: è®¾ F æ˜¯åœ¨å…³ç³»æ¨¡å¼ R ä¸Šæˆç«‹çš„å‡½æ•°ä¾èµ–çš„é›†åˆ, $X \rightarrow Y$ æ˜¯ä¸€ä¸ªå‡½æ•°ä¾èµ–.
å¦‚æœå¯¹äº R çš„æ¯ä¸ªæ»¡è¶³ F çš„å…³ç³» r ä¹Ÿæ»¡è¶³ $X \rightarrow Y$, é‚£ä¹ˆ F é€»è¾‘è•´å«
$X \rightarrow Y$,è®°ä¸º $F \models X\rightarrow Y$.</p><p>å®šä¹‰ 3.4
: è®¾ F æ˜¯å‡½æ•°ä¾èµ–é›†, è¢« F é€»è¾‘è•´å«çš„å‡½æ•°ä¾èµ–å…¨ä½“æ„æˆçš„é›†åˆ,ç§°ä¸ºå‡½æ•°ä¾èµ–é›† F çš„
<strong>é—­åŒ…(Closure)</strong>, è®°ä¸º${ F }^{ + }$ . å³
$$
{ F }^{ + }=<!-- -->{<!-- --> \quad X\rightarrow Y\quad |\quad F \models X\rightarrow Y\quad <!-- -->}<!-- -->
$$</p><h4>3.2.3 FD çš„æ¨ç†è§„åˆ™</h4><p>è®¾ U æ˜¯å…³ç³»æ¨¡å¼ R çš„å±æ€§é›†. F æ˜¯ R ä¸Šæˆç«‹çš„åªæ¶‰åŠåˆ° U ä¸­èˆ’å¿ƒçš„å‡½æ•°ä¾èµ–é›†. FD çš„æ¨ç†è§„åˆ™æœ‰ä»¥ä¸‹ä¸‰æ¡:</p><p>è‡ªåæ€§(Reflexivity)
: A1
: è‹¥ $Y \subseteq X \subseteq U$, åˆ™ $X \rightarrow Y$ åœ¨ R ä¸Šæˆç«‹.</p><p>å¢å¹¿æ€§(Augmentation)
: A2
: è‹¥ $X \rightarrow Y$åœ¨ R ä¸Šæˆç«‹,ä¸” $Z \subseteq U$, åˆ™ $XZ \rightarrow YZ$åœ¨ R ä¸Šæˆç«‹.</p><p>ä¼ é€’æ€§(Transitivity)
: A3
: è‹¥ $X \rightarrow Y$ å’Œ $Y \rightarrow Z$ åœ¨ R ä¸Šæˆç«‹,
åˆ™ $X \rightarrow Z$åœ¨ R ä¸Šæˆç«‹.</p><p>å®šç† 3.1
: FD æ¨ç†è§„åˆ™ A1, A2 å’Œ A3. ä¹Ÿå°±æ˜¯, å¦‚æœ $X \rightarrow Y$
æ˜¯ä» F ç”¨æ¨ç†è§„åˆ™å¯¼å‡º, é‚£ä¹ˆ $X \rightarrow Y$åœ¨$F^+$ä¸­</p><p><strong>å®šç† 3.2</strong> FD çš„å…¶ä»–äº”æ¡æ¨ç†è§„åˆ™</p><p>åˆå¹¶æ€§(Union)
: A4
: $ <!-- -->{<!-- --> X \rightarrow Y, Y \rightarrow Z <!-- -->}<!-- --> \models X \rightarrow YZ$</p><p>åˆ†è§£æ€§(Decomposition)
: A5
: $<!-- -->{<!-- --> X \rightarrow Y, Z \subseteq Y <!-- -->}<!-- --> \models X \rightarrow Z$</p><p>ä¼ªä¼ é€’æ€§
: A6
: $ <!-- -->{<!-- --> X \rightarrow Y, WY \rightarrow Z <!-- -->}<!-- --> \models WX \rightarrow Z$</p><p>å¤åˆæ€§(Composition)
: A7
: $<!-- -->{<!-- --> X \rightarrow Y, W \rightarrow Z <!-- -->}<!-- --> \models XW \rightarrow YZ$</p><p>é€šç”¨ä¸€è‡´æ€§å®šç†(Genernal Unification Theorem)
: $<!-- -->{<!-- --> X \rightarrow Y, W \rightarrow Z <!-- -->}<!-- --> \models X \cup (W - Y) \rightarrow YZ$</p><p>å®šä¹‰ 3.5
: å¯¹äº $FD X \rightarrow Y$, å¦‚æœ $Y \subseteq X$, é‚£ä¹ˆç§° $X \rightarrow Y$
æ˜¯ä¸€ä¸ª <strong>å¹³å‡¡çš„ FD</strong>, å¦åˆ™ç§°ä¸º <strong>éå¹³å‡¡çš„ FD</strong></p><p>æ­£å¦‚åç§°æ‰€ç¤º,å¹³å‡¡çš„ FD å¹¶æ²¡æœ‰å®é™…æ„ä¹‰,æ ¹æ®è§„åˆ™ A1 å°±å¯ä»¥é€€å‡º. äººä»¬æ„Ÿå…´è¶£çš„æ˜¯éå¹³å‡¡çš„ FD.
åªæœ‰éå¹³å‡¡çš„ FD æ‰å’Œ <em>çœŸæ­£çš„</em> å®Œæ•´æ€§çº¦æŸæ¡ä»¶ç›¸å…³.</p><p>ä»è§„åˆ™ A4 å’Œ A5. ç«‹å³å¯å¾—åˆ°ä¸‹é¢çš„å®šç†</p><p>å®šç† 3.3
: å¦‚æœ $A_1 \cdots A_n$ æ˜¯å…³ç³»æ¨¡å¼ R çš„å±æ€§é›†, é‚£ä¹ˆ $X \rightarrow A_1 \cdots A_n$
æˆç«‹çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ $X \rightarrow A_i (i = 1, \cdots, n)$ æˆç«‹</p><h4>3.2.4 FD å’Œå…³é”®ç çš„è”ç³»</h4><p>å‡½æ•°ä¾èµ–æ˜¯å…³é”®ç æ¦‚å¿µçš„æ¨å¹¿.</p><p>å®šä¹‰ 3.6
: è®¾å…³ç³»æ¨¡å¼ R çš„å±æ€§é›†æ˜¯ U, X æ˜¯ U çš„ä¸€ä¸ªå­é›†.å¦‚æœ $X \rightarrow U$ åœ¨ R ä¸Šæˆç«‹,
é‚£ä¹ˆç§° X æ˜¯ R çš„ä¸€ä¸ªè¶…é”®. å¦‚æœ $X \rightarrow U$å­ R ä¸Šæˆç«‹,ä½†å¯¹äº X çš„ä»»ä¸€çœŸå­é›†
$X_1$ éƒ½æœ‰ $X_1 \rightarrow U$ ä¸æˆç«‹,é‚£ä¹ˆç§° X æ˜¯ R ä¸Šçš„ä¸€ä¸ªå€™é€‰é”®(æ²¡æœ‰å¤šä½™å±æ€§).</p><p>ä¸€èˆ¬é”®éƒ½æ˜¯æŒ‡å€™é€‰é”®.</p><h4>3.2.5 å±æ€§é›†çš„é—­åŒ…</h4><p>å®šä¹‰ 3.7
: è®¾ F æ˜¯å±æ€§é›† U ä¸Šçš„ FD é›†, X æ˜¯ U çš„å­é›†. é‚£ä¹ˆ(ç›¸å¯¹äº F)å±æ€§é›† X çš„é—­åŒ…ç”¨ $X^+$
è¡¨ç¤º, å®ƒæ˜¯ä¸€ä¸ªä» F é›†ä½¿ç”¨ FD æ¨ç†è§„åˆ™æ¨å‡ºçš„æ»¡è¶³æ‰€æœ‰ $X \rightarrow A$çš„å±æ€§Açš„é›†åˆ:
$$
X^+ = <!-- -->{<!-- -->\quad å±æ€§ A \quad |\quad  F \models X \rightarrow A \quad <!-- -->}<!-- -->
$$</p><p>ä»å±æ€§é›†é—­åŒ…çš„å®šä¹‰,ç«‹å³å¯å¾—å‡ºä¸‹é¢çš„å®šç†</p><p>å®šç† 3.4
: $X \rightarrow Y$ èƒ½ç”¨ FD æ¨ç†è§„åˆ™æ¨å‡ºçš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ $Y \subseteq X^+$</p><p>ç®—æ³• 3.1
: æ±‚å±æ€§é›† X ç›¸å¯¹äº FD é›† F çš„é—­åŒ… $X^+$
: è®¾å±æ€§é›† X çš„é—­åŒ…ä¸º $X^+$, å…¶è®¡ç®—ç®—æ³•å¦‚ä¸‹:
$$
\qquad X^+ = X; \qquad<!-- -->\<!-- -->
do  <!-- -->{<!-- --> \qquad\qquad\qquad\qquad <!-- -->\<!-- -->
oldX^+ := X^+; <!-- -->\<!-- -->
\qquad\qquad\qquad\qquad
for\quad {FD}\quad Y \rightarrow Z\quad in\quad F\quad do <!-- -->\<!-- -->
\qquad\qquad\qquad\qquad\qquad\qquad
if\quad Y \subseteq X^+ then\quad X^+ := X^+\cup Z; <!-- -->\<!-- -->
<!-- -->}<!-- --> while(X^+ != oldX^+);
$$</p><h4>3.2.6 FD é›†çš„æœ€å°ä¾èµ–é›†</h4><p>å®šä¹‰ 3.8
: å¦‚æœå…³ç³»æ¨¡å¼ R(U) ä¸Šçš„ä¸¤ä¸ªå‡½æ•°ä¾èµ–é›† F å’Œ G, æœ‰ $F^+ = G^+ $,åˆ™ç§° F å’Œ G
æ˜¯ç­‰ä»·çš„å‡½æ•°ä¾èµ–é›†</p><p>F å’Œ G ç­‰ä»·,æ„å‘³ç€ F ä¸­æ¯ä¸€ä¸ª FD éƒ½å¯ä»¥ä» G æ¨å¯¼å‡ºæ¥, å¹¶ä¸” G ä¸­æ¯ä¸€ä¸ª FDä¹Ÿéƒ½å¯ä»¥ä»Fæ¨å¯¼å‡ºæ¥</p><p>å‡½æ•°ä¾èµ–é›† F ä¸­çš„ FD å¾ˆå¤š,æˆ‘ä»¬åº”è¯¥ä» F ä¸­å»æ‰å¹³å‡¡çš„ FD, æ— å…³çš„ FD, FD ä¸­æ— å…³çš„å±æ€§,
ä»¥æ±‚å¾—ä¸ F ç­‰ä»·çš„æœ€å°ä¾èµ–é›† G.</p><p><strong>å®šä¹‰ 3.9</strong>
å¦‚æœå‡½æ•°ä¾èµ–é›† G æ»¡è¶³ä¸‹åˆ—ä¸‰ä¸ªæ¡ä»¶,åˆ™ç§° G æ˜¯æœ€å°ä¾èµ–é›†</p><ol><li>G ä¸­æ¯ä¸ª FD çš„å³è¾¹éƒ½æ˜¯å•å±æ€§</li><li>G ä¸­æ²¡æœ‰å†—ä½™çš„ F, å³ G ä¸­ä¸å­˜åœ¨è¿™æ ·çš„å‡½æ•°ä¾èµ– $X \rightarrow Y$,
ä½¿å¾— $G - <!-- -->{<!-- --> X \rightarrow Y <!-- -->}<!-- -->$ ä¸ G ç­‰ä»·</li><li>G ä¸­æ¯ä¸ª FD çš„å·¦è¾¹æ²¡æœ‰å†—ä½™çš„å±æ€§, å³ G ä¸­ä¸å­˜åœ¨è¿™æ ·çš„å‡½æ•°ä¾èµ– $X \rightarrow Y$,
X æœ‰çœŸå­é›† W ä½¿å¾— $G - <!-- -->{<!-- -->X \rightarrow Y <!-- -->}<!-- --> \cup <!-- -->{<!-- --> W \rightarrow Y <!-- -->}<!-- -->$
ä¸ G ç­‰ä»·.</li></ol><blockquote><p>æ˜¾ç„¶, æ¯ä¸ªå‡½æ•°ä¾èµ–é›†è‡³å°‘å­˜åœ¨ä¸€ä¸ªç­‰ä»·çš„æœ€å°ä¾èµ–é›†,ä½†å¹¶ä¸ä¸€å®šå”¯ä¸€</p></blockquote><p><strong>ç®—æ³• 3.2</strong>
: è®¡ç®—å‡½æ•°ä¾èµ–é›† F çš„æœ€å°ä¾èµ–é›† G</p><pre><code>1. æ ¹æ®æ¨ç†è§„åˆ™çš„åˆ†è§£ç‰¹æ€§(A5),å¾—åˆ°ä¸€ä¸ªä¸ F ç­‰ä»·çš„ FD é›† G,
Gä¸­æ¯ä¸ªFDçš„å·¦å³å‡ä¸ºå•å±æ€§
2. åœ¨ G çš„æ¯ä¸ª FD ä¸­æ¶ˆé™¤å·¦è¾¹å†—ä½™çš„å±æ€§
3. åœ¨ G ä¸­æ¶ˆé™¤å†—ä½™çš„ FD
</code></pre><h3>3.3 å…³ç³»æ¨¡å¼çš„åˆ†è§£ç‰¹æ€§</h3><h4>3.3.1 å…³ç³»æ¨¡å¼çš„åˆ†è§£</h4><p>å®šä¹‰ 3.10
: è®¾æœ‰å…³ç³»æ¨¡å¼ R(U), å±æ€§é›†ä¸º U, è€Œ $R_1,\cdots,R_k$éƒ½æ˜¯ U çš„å­é›†,
å¹¶ä¸”æœ‰$R_1 \cup R_2 \cup \cdots \cup R_k = U$. å…³ç³»æ¨¡å¼ $R_1,\cdots,R_k$
çš„é›†åˆç”¨ $\rho$ è¡¨ç¤º, $\rho = <!-- -->{<!-- --> R_1,\cdots,R_k <!-- -->}<!-- -->$. ç”¨$\rho$ä»£æ›¿ R çš„è¿‡ç¨‹
ç§°ä¸ºå…³ç³»æ¨¡å¼çš„åˆ†è§£.è¿™é‡Œ$\rho$ç§°ä¸º R çš„ä¸€ä¸ªåˆ†è§£.ä¹Ÿç§°ä¸º<strong>æ•°æ®åº“æ¨¡å¼</strong>.</p><h4>3.3.2 æ— æŸåˆ†è§£</h4><p>å®šä¹‰ 3.11
: åœ¨æ³›å…³ç³»æ¨¡å¼ R åˆ†è§£é™ˆæ•°æ®åº“æ¨¡å¼ $\rho = R_1,\cdots,R_k$æ—¶,
æ³›å…³ç³» r åœ¨ $\rho$ çš„æ¯ä¸€æ¨¡å¼ $R_i (1 \le i \le n)$ä¸ŠæŠ•å½±å
å†è¿æ¥èµ·æ¥,æ¯”åŸæ¥rä¸­å¤šå‡ºæ¥çš„å…ƒç»„,ç§°ä¸º <strong>å¯„ç”Ÿå…ƒç»„(Spurious Tuple)</strong>.</p><p>å®šä¹‰ 3.12
: è®¾ R æ˜¯ä¸€ä¸ªå…³ç³»æ¨¡å¼, F æ˜¯ R ä¸Šçš„ä¸€ä¸ª FD é›†. R åˆ†è§£æˆæ•°æ®åº“æ¨¡å¼
$\rho = R<em>1,\cdots,R_k$.å¦‚æœå¯¹ R ä¸­æ»¡è¶³ F çš„æ¯ä¸€ä¸ªå…³ç³» r, éƒ½æœ‰
$$
r \quad=
\quad\pi</em>{R<em>2}\quad(r)
\quad\rhd\lhd \quad \pi</em>(R<em>2)(r)
\quad\rhd\lhd \quad \cdots \pi</em>(R_k)(r)
$$</p><p>é‚£ä¹ˆç§°åˆ†è§£ $\rho$ ç›¸å¯¹äº F æ˜¯<strong>æ— æŸè¿æ¥åˆ†è§£(Lossless Join Decomposition)</strong>,
ç®€ç§°ä¸º <em>æ— æŸåˆ†è§£</em>,å¦åˆ™ç§°ä¸º <strong>æŸå¤±åˆ†è§£(Lossy Decomposition)</strong></p><p><em>æŸ</em>æ˜¯æŒ‡ä¿¡æ¯çš„ä¸¢å¤±,è€Œä¸æ˜¯å…ƒç»„çš„ä¸¢å¤±.å¦‚æœä¸€ä¸ªåˆ†è§£ä¸å…·æœ‰<em>æ— æŸ</em>æ€§è´¨,
é‚£ä¹ˆæ³›å…³ç³»åœ¨æŠ•å½±è¿æ¥ä»¥åå°±å¯èƒ½äº§ç”Ÿå¯„ç”Ÿå…ƒç»„.å¯„ç”Ÿå…ƒç»„è¡¨ç¤ºçš„æ˜¯é”™è¯¯ä¿¡æ¯.</p><p>å…¶ä¸­ç¬¦å· $\pi<em>{R_i}(r)$ è¡¨ç¤ºå…³ç³» r åœ¨æ¨¡å¼ $R_i$å±æ€§ä¸Šçš„æŠ•å½±.
r çš„æŠ•å½±è¿æ¥è¡¨è¾¾å¼ $\pi</em>{R<em>1}(r) \quad \rhd\lhd \quad \cdots \pi</em>{R<em>k}(r)$
ç”¨ç¬¦å·$m</em>{\rho}(r)$è¡¨ç¤º, å³
$$
m<em>{\rho}(r) = \overset {k}{\underset { i=1 }{ \rhd \lhd }}\pi</em>{R_i}(r)
$$</p><p>éœ€è¦æ³¨æ„çš„æ˜¯,ä¸Šè¿°å®šä¹‰æœ‰ä¸€ä¸ªå…ˆå†³æ¡ä»¶,å³ r æ˜¯ R çš„ä¸€ä¸ªå…³ç³». ä¹Ÿå°±æ˜¯å…ˆå­˜åœ¨ r(æ³›å…³ç³»)
çš„æƒ…å†µä¸‹,å†å»è°ˆè®ºåˆ†è§£,è¿™æ˜¯å…³ç³»æ•°æ®åº“ç†è®ºä¸­è‘—åçš„<strong>æ³›å…³ç³»å‡è®¾(Universal Relation Assumption)</strong></p><p>å®šä¹‰ 3.13
: åœ¨æ— æ³›å…³ç³»å‡è®¾æ—¶,å¯¹ä¸¤ä¸ªå…³ç³»è¿›è¡Œè‡ªç„¶è¿æ¥ä¸­è¢«ä¸¢å¤±çš„å…ƒç»„ç§°ä¸ºæ‚¬æŒ‚å…ƒç»„.</p><blockquote><p>æ‚¬æŒ‚å…ƒç»„æ˜¯é€ æˆä¸¤ä¸ªå…³ç³»ä¸å­˜åœ¨æ³›å…³ç³»çš„åŸå› .</p></blockquote><h4>3.3.3 æ¨¡å¼åˆ†è§£çš„ä¼˜ç¼ºç‚¹</h4><p>ä¼˜ç‚¹:</p><ol><li>æ¨¡å¼åˆ†è§£èƒ½æ¶ˆé™¤æ•°æ®å†—ä½™å’Œæ“ä½œå¼‚å¸¸ç°è±¡</li><li>åœ¨åˆ†è§£äº†çš„æ•°æ®åº“ä¸­å¯ä»¥å­˜å‚¨æ‚¬æŒ‚å…ƒç»„,å­˜å‚¨æ³›å…³ç³»ä¸­æ— æ³•å­˜å‚¨çš„ä¿¡æ¯</li></ol><p>ç¼ºç‚¹:</p><ol><li>åˆ†è§£ä»¥å,æ£€ç´¢æ“ä½œéœ€è¦åšç¬›å¡å°”ç§¯æˆ–è¿æ¥æ“ä½œ,è¿™å°†ä»˜å‡ºæ—¶é—´ä»£ä»·</li><li>åœ¨æœ‰æ³›å…³ç³»å‡è®¾æ—¶,å¯¹æ•°æ®åº“ä¸­å…³ç³»è¿›è¡Œè‡ªç„¶è¿æ¥æ—¶,å¯èƒ½äº§ç”Ÿå¯„ç”Ÿå…ƒç»„,
å³æŸå¤±äº†ä¿¡æ¯.åœ¨æ— æ³›å…³ç³»å‡è®¾æ—¶,ç”±äºæ•°æ®åº“å¯èƒ½å­˜åœ¨æ‚¬æŒ‚å…ƒç»„,å°±æœ‰å¯èƒ½
ä¸å­˜åœ¨æ³›å…³ç³»</li></ol><h4>3.3.4 æ— æŸåˆ†è§£çš„æµ‹è¯•æ–¹æ³•</h4><p>ç•¥</p><h4>3.3.5 ä¿æŒ FD çš„åˆ†è§£</h4><p>åˆ†è§£çš„å¦ä¸€ä¸ªç‰¹æ€§æ˜¯åœ¨åˆ†è§£çš„è¿‡ç¨‹ä¸­èƒ½å¦ä¿æŒå‡½æ•°ä¾èµ–é›†,å¦‚æœä¸èƒ½ä¿æŒ FD, é‚£ä¹ˆæ•°æ®çš„
å¯“æ„å°±ä¼šå‡ºç°æ··ä¹±.</p><p>å®šä¹‰ 3.14
: è®¾ F æ˜¯å±æ€§é›† U ä¸Šçš„ FD é›†, Z æ˜¯ U çš„å­é›†, F åœ¨ Z ä¸Šçš„æŠ•å½±ç”¨$\pi_Z(F)$
è¡¨ç¤º,å®šä¹‰ä¸º
$$
\pi_Z(F) = <!-- -->{<!-- -->\quad
X \rightarrow Y | X \rightarrow Y \in F^+, ä¸” XY \subseteq Z
\quad <!-- -->}<!-- -->
$$</p><p>å®šä¹‰ 3.15
: è®¾ $\rho = <!-- -->{<!-- --> R<em>i, \cdots, R_k<!-- -->}<!-- -->$ æ˜¯ R çš„ä¸€ä¸ªåˆ†è§£, F æ˜¯R ä¸Šçš„ FD é›†, å¦‚æœæœ‰
$\overset {k}{\underset { i=1 }{ \cup }}\pi</em>{R_i}(F) \models F$,
é‚£ä¹ˆç§°åˆ†è§£ $\rho$ ä¿æŒå‡½æ•°ä¾èµ–é›† F.</p><h3>3.4 èŒƒå¼</h3><p>å…³ç³»æ¨¡å¼çš„å¥½ä¸å,ç”¨ä»€ä¹ˆæ ‡å‡†æ¥è¡¡é‡? è¿™ä¸ªæ ‡å‡†å°±æ˜¯æ¨¡å¼çš„<strong>èŒƒå¼(Normal Forms, ç®€è®°ä¸º FN)</strong>.</p><h4>3.4.1 ç¬¬ä¸€èŒƒå¼(1NF)</h4><p>å®šä¹‰ 3.16
: å¦‚æœå…³ç³»æ¨¡å¼ R çš„æ¯ä¸ªå…³ç³» r çš„å±æ€§å€¼éƒ½æ˜¯ä¸å¯åˆ†çš„åŸå­å€¼,é‚£ä¹ˆç§° R æ˜¯
<strong>ç¬¬ä¸€èŒƒå¼(First Normal Forms, ç®€è®°ä¸º 1NF)</strong>çš„æ¨¡å¼.</p><p>æ»¡è¶³ 1NF çš„å…³ç³»ç§°ä¸ºè§„èŒƒåŒ–çš„å…³ç³»,å¦åˆ™ç§°ä¸ºéè§„èŒƒåŒ–çš„å…³ç³».å…³ç³»æ•°æ®åº“ç ”ç©¶çš„å…³ç³»éƒ½æ˜¯è§„
èŒƒåŒ–çš„å…³ç³».</p><h4>3.4.2 ç¬¬äºŒèŒƒå¼(2NF)</h4><p>å®šä¹‰ 3.17
: å¯¹äº $FD\quad W\rightarrow A$,å¦‚æœå­˜åœ¨ $X \subset W$ æœ‰ $X \rightarrow A$
æˆç«‹, é‚£ä¹ˆç§° $W \rightarrow A$ æ˜¯å±€éƒ¨ä¾èµ–(A å±€éƒ¨ä¾èµ–äº W);å¦åˆ™ç§°$W\rightarrow A$
æ˜¯å®Œå…¨ä¾èµ–.</p><p>å®Œå…¨ä¾èµ–ä¹Ÿç§°ä¸º<strong>å·¦éƒ¨ä¸å¯çº¦ä¾èµ–</strong>.</p><p>å®šä¹‰ 3.18
: å¦‚æœ A æ˜¯å…³ç³»æ¨¡å¼ R çš„å€™é€‰é”®çš„å±æ€§,é‚£ä¹ˆç§° A æ˜¯ R çš„ä¸»å±æ€§; å¦åˆ™ç§° A æ˜¯ R çš„éä¸»å±æ€§</p><p>å®šä¹‰ 3.19
: å¦‚æœå…³ç³»æ¨¡å¼ R æ˜¯ 1NF, ä¸”æ¯ä¸ªéä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºå€™é€‰é”®,é‚£ä¹ˆç§° R æ˜¯ç¬¬äºŒèŒƒå¼(2NF)çš„
æ¨¡å¼.å¦‚æœæ•°æ®åº“æ¨¡å¼ä¸­æ¯ä¸ªå…³ç³»æ¨¡å¼éƒ½æ˜¯ 2NF,åˆ™ç§°æ•°æ®åº“æ¨¡å¼ä¸º 2NF çš„æ•°æ®åº“æ¨¡å¼.</p><blockquote><p>ä¸æ»¡è¶³ 2NFçš„å…³ç³»æ¨¡å¼ä¸­å¿…å®šå­˜åœ¨æœ‰éä¸»å±æ€§å¯¹å…³é”®ç çš„å±€éƒ¨ä¾èµ–.</p></blockquote><h4>3.4.3 ç¬¬ä¸‰èŒƒå¼(3NF)</h4><p>å®šä¹‰ 3.20
: å¦‚æœ $X \rightarrow Y , Y \rightarrow A, ä¸” Y \nrightarrow X å’Œ A \notin Y
,é‚£ä¹ˆç§° X \rightarrow A $æ˜¯ä¼ é€’ä¾èµ–(A ä¼ é€’ä¾èµ–äº X).</p><p>å®šä¹‰ 3.21
: å¦‚æœå…³ç³»æ¨¡å¼ R æ˜¯ 1NF, ä¸”æ¯ä¸ªéä¸»å±æ€§éƒ½ä¸ä¼ é€’ä¾èµ–äº R çš„å€™é€‰é”®,é‚£ä¹ˆç§° R æ˜¯ç¬¬ä¸‰èŒƒå¼
(3NF)çš„æ¨¡å¼.å¦‚æœæ•°æ®åº“æ¨¡å¼ä¸­æ¯ä¸ªå…³ç³»æ¨¡å¼éƒ½æ˜¯ 3NF,åˆ™ç§°å…¶ä¸º 3NF çš„æ•°æ®åº“æ¨¡å¼.</p><p>å®šä¹‰ 3.22
: è®¾ F æ˜¯å…³ç³»æ¨¡å¼ R çš„ FD é›†, å¦‚æœå¯¹ F ä¸­æ¯ä¸ªéå¹³å‡¡çš„ $FD\quad X\rightarrow Y$,
éƒ½æœ‰Xæ˜¯Rçš„è¶…é”®,æˆ–è€… Y çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯ä¸»å±æ€§, é‚£ä¹ˆç§° R æ˜¯3NF çš„æ¨¡å¼.</p><p>å®šç† 3.5
: å¦‚æœ R æ˜¯ 3NF æ¨¡å¼,é‚£ä¹ˆ R ä¹Ÿæ˜¯2NF æ¨¡å¼.</p><p>å±€éƒ¨ä¾èµ–å’Œä¼ é€’ä¾èµ–æ˜¯æ¨¡å¼äº§ç”Ÿå†—ä½™å’Œå¼‚å¸¸çš„ä¸¤ä¸ªé‡è¦åŸå› . ç”±äº 3NF æ¨¡å¼ä¸­ä¸å­˜åœ¨éä¸»å±æ€§
å¯¹å€™é€‰é”®çš„å±€éƒ¨ä¾èµ–å’Œä¼ é€’ä¾èµ–,å› æ­¤æ¶ˆé™¤äº†å¾ˆå¤§ä¸€éƒ¨åˆ†å­˜å‚¨å¼‚å¸¸.
å°† 1NF, 2NF è½¬æ¢ä¸º 3NF çš„è¿‡ç¨‹ç§°ä¸º å…³ç³»çš„è§„èŒƒåŒ–å¤„ç†.</p><h4>3.4.4 BCNF(Boyoce-Codd NF)</h4><p>å®šä¹‰ 3.33
: å¦‚æœå…³ç³»æ¨¡å¼ R æ˜¯ 1NF, ä¸”æ¯ä¸ªå±æ€§éƒ½ä¸ä¼ é€’ä¾èµ–äº R çš„å€™é€‰é”®,é‚£ä¹ˆç§° R æ˜¯ BCNF æ¨¡å¼.
å¦‚æœæ•°æ®åº“ä¸­çš„æ‰€æœ‰å…³ç³»æ¨¡å¼éƒ½æ˜¯ BCNF, åˆ™ç§°ä¸º BCNF çš„æ•°æ®åº“æ¨¡å¼.</p><p>å®šä¹‰ 3.34
: è®¾ F è®¾è®¡å…³ç³»æ¨¡å¼ R çš„FD é›†, å¦‚æœå¯¹ F ä¸­æ¯ä¸ªéå¹³å‡¡$FD \quad X \rightarrow Y$
éƒ½æœ‰ X æ˜¯ R çš„è¶…é”®,é‚£ä¹ˆç§° R æ˜¯ BCNF æ¨¡å¼.</p><p>è¿™ä¸ªå®šä¹‰è¡¨æ˜,å¦‚æœéå¹³å‡¡çš„ $FD\quad X\rightarrow Y$ä¸­ X ä¸åŒ…å«è¶…é”®,é‚£ä¹ˆ Y å¿…å®š
ä¼ é€’ä¾èµ–äºå€™é€‰é”®, å› æ­¤ R ä¸æ˜¯ BCNF æ¨¡å¼.</p><p>å®šç†
: 3.6 å¦‚æœ R æ˜¯ BCNF æ¨¡å¼,é‚£ä¹ˆ R ä¹Ÿæ˜¯ 3NF æ¨¡å¼</p><h3>3.5 å¤šå€¼ä¾èµ–å’Œç¬¬å››èŒƒå¼</h3><p>ç•¥</p><hr/><h2>Appendix.A ER æ¨¡å‹</h2><h3>1. ER æ¨¡å‹çš„åŸºæœ¬å…ƒç´ </h3><h4>1.1. å®ä½“</h4><p>å®ä½“(Entity)
: æ˜¯ä¸€ä¸ªæ•°æ®å¯¹è±¡,æŒ‡åº”ç”¨ä¸­å¯ä»¥åŒºåˆ«çš„å®¢è§‚å­˜åœ¨çš„äº‹ç‰©</p><p>å®ä½“é›†(Entity Set)
: æ˜¯æŒ‡åŒä¸€ç±»</p><p>å®ä½“ç±»å‹(Entity Type)
: æ˜¯å¯¹å®ä½“é›†ä¸­å®ä½“çš„å®šä¹‰</p><h4>1.2. è”ç³»</h4><p>è”ç³»(Relationship)
: è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå®ä½“ä¹‹é—´çš„å…³è”å…³ç³»</p><p>è”ç³»é›†(Relationship Set)
: æ˜¯æŒ‡åŒä¸€ç±»è”ç³»æ„æˆçš„é›†åˆ</p><p>è”ç³»ç±»å‹(Relationship Type)
: æ˜¯å¯¹è”ç³»é›†ä¸­è”ç³»çš„å®šä¹‰</p><h4>1.3 å±æ€§</h4><p>å®ä½“çš„æŸä¸€ç‰¹æ€§ç§°ä¸ºå±æ€§(Attribute).åœ¨ä¸€ä¸ªå®ä½“ä¸­,èƒ½å¤Ÿå”¯ä¸€æ ‡è¯†å®ä½“çš„å±æ€§æˆ–å±æ€§
é›†ç§°ä¸º&quot;å®ä½“æ ‡è¯†ç¬¦&quot;.</p><h3>2. å±æ€§çš„åˆ†ç±»</h3><h4>2.1 ç®€å•å±æ€§å’Œå¤åˆå±æ€§</h4><p>ç®€å•å±æ€§(Simple Attribute)
: ç®€å•å±æ€§æ˜¯ä¸å¯å†åˆ†å‰²çš„å±æ€§.ä¾‹å¦‚: å¹´é¾„,æ€§åˆ«</p><p>å¤åˆå±æ€§(Composite Attribute)
: å¤åˆå±æ€§æ˜¯å¯ä»¥å†åˆ†è§£ä¸ºå…¶ä»–å±æ€§çš„å±æ€§.ä¾‹å¦‚: åœ°å€å¯åˆ†ä¸ºçœ,å¸‚,åŒº,è¡—é“ç­‰å­å±æ€§</p><h4>2.2 å•å€¼å±æ€§å’Œå¤šå€¼å±æ€§</h4><p>å•å€¼å±æ€§(Single-Valued Attribute)
: æ˜¯æŒ‡åŒä¸€ä¸ªå®ä½“çš„å±æ€§åªèƒ½å–ä¸€ä¸ªå€¼.ä¾‹å¦‚: å¹´é¾„,æ€§åˆ«</p><p>å¤šå€¼å±æ€§(Mulyi-Valued Attribute)
: å®ä½“å±æ€§å¯å–å¤šä¸ªå€¼.ä¾‹å¦‚: ä¸€ä¸ªæ–‡ç« çš„æ ‡ç­¾,å¯èƒ½ä¼šæœ‰å¤šä¸ªæ ‡ç­¾</p><h5>åˆ†è§£å¤šå€¼å±æ€§çš„æ–¹æ³•</h5><ol><li>å°†åŸæ¥çš„å¤šå€¼å±æ€§ç”¨å‡ ä¸ªæ–°çš„å•å€¼å±æ€§è¡¨ç¤º</li><li>å°†å¤šå€¼å±æ€§ç”¨ä¸€ä¸ªæ–°çš„å®ä½“ç±»å‹è¡¨ç¤º</li></ol><h4>2.3 å­˜å‚¨å±æ€§å’Œæ´¾ç”Ÿå±æ€§</h4><p>æ´¾ç”Ÿå±æ€§(Derived Attribute)
: ä¸¤ä¸ª(æˆ–ä¸¤ä¸ªä»¥ä¸Š)å±æ€§æ˜¯ç›¸å…³çš„.å¯ä»¥ä»å…¶ä»–å±æ€§æ¨å¯¼è¯¥å±æ€§çš„å€¼</p><pre><code>&gt; æ´¾ç”Ÿå±æ€§çš„å€¼ä¸å¿…å­˜å‚¨åœ¨æ•°æ®åº“å†…
</code></pre><p>å­˜å‚¨å±æ€§(Stored Attribute)
: åä¹‹,é™¤äº†èƒ½æ¨å¯¼å‡ºå€¼çš„æ´¾ç”Ÿå±æ€§,å…¶ä»–éƒ½æ˜¯å­˜å‚¨å±æ€§.</p><h4>2.4 å¯ç©ºå±æ€§</h4><p>å¯ç©ºå±æ€§(Null Value)
: å½“å®ä½“åœ¨æŸä¸ªå±æ€§ä¸Šæ²¡æœ‰å€¼æ—¶,å¯ä»¥ä½¿ç”¨ç©ºå€¼(Null Value)çš„å±æ€§
: ä¾‹å¦‚: é…å¶,å½“æœªå©šæ˜¯è¯¥å€¼æ— æ„ä¹‰,å³å¯ä¸ºç©º,ä½†ä¹Ÿå¯ä»¥ç†è§£ä¸ºå·²å©šä½†é…å¶æœªçŸ¥,æˆ–å°šä¸çŸ¥æ˜¯å¦å©š
: å¦.åœ¨æ•°æ®åº“ä¸­,ç©ºå€¼æ˜¯å¾ˆéš¾å¤„ç†çš„ä¸€ç§å€¼.</p><h3>3. è”ç³»çš„è®¾è®¡</h3><h4>3.1 è”ç³»çš„å…ƒæ•°</h4><p>å…ƒæ•°/åº¦æ•°(Degree)
: ä¸€ä¸ªè”ç³»æ¶‰åŠåˆ°çš„å®ä½“é›†çš„ä¸ªæ•°
: ç®€å•çš„å¯ç§°ä¹‹ä¸º ä¸€å…ƒè”ç³»,äºŒå…ƒè”ç³»,ä¸‰å…ƒè”ç³»</p><h4>3.2 è”ç³»ç±»å‹çš„çº¦æŸ</h4><h5>3.2.1 åŸºæ•°çº¦æŸ</h5><p>æ˜ å°„åŸºæ•°(Mapping Cardinalities)
: å®ä½“é›† E1 å’Œ E2 ä¹‹é—´æœ‰äºŒå…ƒè”ç³»,åˆ™å‚ä¸ä¸€ä¸ªè”ç³»ä¸­çš„å®ä½“æ•°ç›®æˆä¸ºæ˜ å°„åŸºæ•°
: å¯¹äºäºŒå…ƒè”ç³»ç±»å‹,å¯èƒ½çš„æ˜ å°„åŸºæ•°æœ‰ 1:1, 1:N, N:M,</p><h5>3.2.2 å‚ä¸çº¦æŸ</h5><p>å®Œå…¨å‚ä¸
: å¦‚æœå®ä½“é›† E ä¸­çš„å†…é˜å®ä½“éƒ½å‚ä¸è”ç³»é›† R çš„è‡³å°‘ä¸€ä¸ªè”ç³»ä¸­,åˆ™ç§°å®ä½“é›† E å®Œå…¨å‚ä¸ è”ç³»é›† R</p><h4>3.3 ERæ¨¡å‹çš„æ“ä½œ</h4><p>ER æ¨¡å‹çš„æ“ä½œåŒ…æ‹¬å®ä½“ç±»å‹,è”ç³»ç±»å‹å’Œå±æ€§çš„åˆ†è£‚,åˆå¹¶,å¢åˆ  ç­‰</p><blockquote><p>åˆ†è£‚æ–¹å¼æœ‰æ°´å¹³åˆ†è£‚å’Œå‚ç›´åˆ†è£‚ä¸¤ç§
åˆå¹¶æ˜¯åˆ†è£‚çš„é€†æ“ä½œè¿‡ç¨‹,åˆå¹¶çš„è”ç³»ç±»å‹å¿…é¡»æ˜¯å®šä¹‰åœ¨ç›¸åŒçš„å®ä½“ç±»å‹ç»„åˆä¸­</p></blockquote><h4>3.4 é‡‡ç”¨ERæ¨¡å‹çš„æ•°æ®åº“æ¦‚å¿µè®¾è®¡æ­¥éª¤</h4><p>é‡‡ç”¨ ER æ¨¡å‹è¿›è¡Œæ•°æ®åº“çš„æ¦‚å¿µè®¾è®¡,å¯ä»¥åˆ†æˆä¸‰æ­¥è¿›è¡Œ: è®¾è®¡å±€éƒ¨ ER æ¨¡å‹,ç„¶åæŠŠå„å±€éƒ¨ ER æ¨¡å‹ç»¼åˆæˆä¸€ä¸ªå…¨å±€ ER æ¨¡å‹,æœ€åå¯¹å…¨å±€ ER æ¨¡å‹è¿›è¡Œä¼˜åŒ–,å¾—åˆ°æœ€ç»ˆçš„ ER æ¨¡å‹,å³æ¦‚å¿µæ¨¡å‹.</p><h5>3.4.1 è®¾è®¡å±€éƒ¨ ER æ¨¡å‹</h5><ol><li><p>ç¡®å®šå±€éƒ¨ç»“æ„èŒƒå›´
ä¸€ä¸ªæ•°æ®ç»“æ„æ˜¯ä¸ºå¤šä¸ªä¸åŒç”¨æˆ·æœåŠ¡çš„.å„ä¸ªç”¨æˆ·ä½¿ç”¨æ•°æ®çš„æ–¹æ³•ä¸åŒ,éœ€æ±‚ä¸åŒ.å›ºå…ˆä¸ºå„ç§ç”¨æˆ·ç¡®å®šå±€éƒ¨çš„ä½¿ç”¨æ–¹æ³•,å¹¶ä»¥ ER æ¨¡å‹æ¥è¡¨ç¤º.
éœ€è¦è€ƒè™‘çš„å› ç´ </p><pre><code>1. èŒƒå›´åˆ’åˆ†è¦è‡ªç„¶,æ˜“äºç®¡ç†
2. èŒƒå›´ä¹‹é—´çš„ç•Œé¢è¦æ¸…æ™°,ç›¸äº’å½±å“è¦å°
3. èŒƒå›´çš„å¤§å°è¦é€‚åº¦
</code></pre></li><li><p>å®šä¹‰å®ä½“
æ¯ä¸€ä¸ªå±€éƒ¨ç»“æ„éƒ½åŒ…å«ä¸€äº›å®ä½“ç±»å‹,å®ä½“å®šä¹‰çš„ä»»åŠ¡å°±æ˜¯ä»ä¿¡æ¯éœ€æ±‚å’Œå±€éƒ¨èŒƒå›´å®šä¹‰å‡ºå‘,ç¡®å®šæ¯ä¸€ä¸ªå®ä½“ç±»å‹çš„å±æ€§å’Œé”®.
åˆ’åˆ†çš„ä¾æ®é€šå¸¸æœ‰:</p><ol><li>é‡‡ç”¨äººä»¬ä¹ æƒ¯çš„åˆ’åˆ†</li><li>é¿å…å†—ä½™</li><li>ä¾æ®ç”¨æˆ·çš„ä¿¡æ¯å¤„ç†éœ€æ±‚</li></ol></li><li><p>å®šä¹‰è”ç³»</p></li><li><p>åˆ†é…å±æ€§
åˆ†é…å±æ€§åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤: ä¸€æ˜¯ç¡®å®šå±æ€§,äºŒæ˜¯æŠŠå±æ€§åˆ†é…åˆ°
ç¡®å®šå±æ€§çš„åŸåˆ™:</p><ol><li>å±æ€§åº”è¯¥æ˜¯ä¸å¯å†åˆ†è§£çš„å¯“æ„èŒƒå›´.ä¸å¯åˆ†è§£æ˜¯ä¸ºäº†ä½¿æ¨¡å‹ç»“æ„ç®€å•åŒ–,ä¸å‡ºç°åµŒå¥—ç»“æ„.</li><li>å®ä½“ä¸å±æ€§ä¹‹é—´çš„å…³ç³»åªèƒ½æ˜¯ 1:N çš„</li><li>ä¸åŒå®ä½“ç±»å‹çš„å±æ€§ä¹‹é—´åº”æ— ç›´æ¥å…³ç³»</li></ol></li></ol><h5>3.4.2 è®¾è®¡å…¨å±€ ER æ¨¡å‹</h5><ol><li><p>ç¡®å®šå…¬å…±å®ä½“ç±»å‹
ä¸€èˆ¬æŠŠåŒåå®ä½“ç±»å‹ä½œä¸ºå…¬å…±å®ä½“ç±»å‹çš„ä¸€ç±»å€™é€‰,æŠŠå…·æœ‰ç›¸åŒé”®çš„å®ä½“ç±»å‹ä½œä¸ºå…¬å…±å®ä½“ç±»å‹çš„å¦ä¸€ç±»å€™é€‰.</p></li><li><p>åˆå¹¶å±€éƒ¨ ER æ¨¡å‹
åˆå¹¶åŸåˆ™: é¦–å…ˆè¿›è¡Œä¸¤ä¸¤åˆå¹¶; å…ˆåˆå¹¶é‚£äº›ç°å®ä¸–ç•Œä¸­æœ‰è”ç³»çš„å±€éƒ¨ç»“æ„;åˆå¹¶ä»å…¬å…±å®ä½“ç±»å‹å¼€å§‹,æœ€ååŠ å…¥ç‹¬ç«‹çš„å±€éƒ¨ç»“æ„.
è¿›è¡ŒäºŒå…ƒåˆå¹¶æ˜¯ä¸ºäº†å‡å°‘åˆå¹¶å·¥ä½œçš„å¤æ‚æ€§.åä¸¤é¡¹åˆ™æ˜¯ä¸ºäº†ä½¿åˆå¹¶ç»“æœçš„è§„æ¨¡å°½å¯èƒ½å°.</p></li><li><p>æ¶ˆé™¤å†²çª</p><ul><li>å±æ€§å†²çª</li><li>ç»“æ„å†²çª</li><li>å‘½åå†²çª</li></ul></li></ol><h5>3.4.3 å…¨å±€ ER æ¨¡å‹çš„ä¼˜åŒ–</h5><p>ä¸€ä¸ªå¥½çš„å…¨å±€ ER æ¨¡å‹,é™¤èƒ½å‡†ç¡®,å…¨é¢åœ°åæ˜ ç”¨æˆ·åŠŸèƒ½éœ€æ±‚å¤–,è¿˜åº”æ»¡è¶³ä¸‹åˆ—æ¡ä»¶(ä¼˜åŒ–ç›®æ ‡):</p><ol><li>å®ä½“ç±»å‹çš„ä¸ªæ•°å°½å¯èƒ½å°‘</li><li>å®ä½“ç±»å‹æ‰€å«å±æ€§ä¸ªæ•°å°½å¯èƒ½å°‘</li><li>å®ä½“ç±»å‹é—´è”ç³»æ— å†—ä½™</li></ol><p>ä¼˜åŒ–è§„åˆ™:</p><ol><li>åˆå¹¶å®ä½“ç±»å‹
å¯ä»¥æŠŠ 1:1 è”ç³»çš„ä¸¤ä¸ªå®ä½“ç±»å‹åˆå¹¶</li><li>æ¶ˆé™¤å†—ä½™å±æ€§</li><li>æ¶ˆé™¤å†—ä½™è”ç³»</li></ol><h3>4. ER æ¨¡å‹åˆ°å…³ç³»æ¨¡å‹çš„è½¬æ¢</h3><h4>4.1 ER å›¾è½¬æ¢æˆå…³ç³»æ¨¡å¼é›†çš„ç®—æ³•</h4><ol><li><p>å®ä½“ç±»å‹çš„è½¬æ¢</p><pre><code>å®ä½“ | å…³ç³»æ¨¡å¼
</code></pre><p>:---:|:------:
å®ä½“ | å…³ç³»æ¨¡å¼
å®ä½“å±æ€§ | å…³ç³»æ¨¡å¼å±æ€§
å®ä½“æ ‡è¯†ç¬¦ | å…³ç³»æ¨¡å¼çš„é”®</p></li><li><p>è”ç³»ç±»å‹çš„è½¬æ¢</p><ol><li><p>äºŒå…ƒè”ç³»çš„è½¬æ¢</p><ol><li>1:1 åœ¨ä»»æ„ä¸€ä¸ªå…³ç³»æ¨¡å¼ä¸­åŠ å…¥å¦ä¸€ä¸ªå…³ç³»æ¨¡å¼çš„é”®ä½œä¸ºå¤–é”®</li><li>1:N åœ¨Nç«¯å®ä½“è½¬æ¢æˆçš„å…³ç³»æ¨¡å¼ä¸­åŠ å…¥1ç«¯å…³ç³»æ¨¡å¼çš„é”®ä½œä¸ºå¤–é”®</li><li>N:M å°†è”ç³»ç±»å‹è½¬æ¢ä¸ºå…³ç³»æ¨¡å¼,å°†ä¸¤æ®µçš„é”®ä½œä¸ºå¤–é”®åŠ å…¥åˆ°è¯¥å…³ç³»æ¨¡å¼,
å¹¶å°†è”ç³»ç±»å‹çš„å±æ€§åŠ å…¥åˆ°è¯¥æ¨¡å¼ä¸­,è€Œé”®ä¸ºä¸¤æ®µå®ä½“é”®çš„ç»„åˆ</li></ol></li><li><p>ä¸€å…ƒè”ç³»çš„è½¬æ¢
å’ŒäºŒå…ƒè½¬æ¢ç±»ä¼¼</p></li><li><p>ä¸‰å…ƒè”ç³»ç±»å‹çš„è½¬æ¢</p><ol><li>1:1:1 åœ¨ä»»æ„ä¸€ä¸ªå…³ç³»æ¨¡å¼ä¸­åŠ å…¥å¦å¤–ä¸¤ä¸ªçš„é”®ä½œä¸ºå¤–é”®,åŠ å…¥è”ç³»ç±»å‹çš„å±æ€§</li><li>1:1:N åŒä¸Š,å°†é”®åŠ å…¥åˆ° N ç«¯å®ä½“è½¬æ¢æˆçš„å…³ç³»æ¨¡å‹ä¸­</li><li>1:M:N å°†è”ç³»ç±»å‹è½¬æ¢ä¸ºå…³ç³»æ¨¡å‹,å°† N ç«¯å’Œ M ç«¯çš„é”®ä½œä¸ºå¤–é”®å’Œè”ç³»ç±»å‹çš„
å±æ€§åŠ å…¥åˆ°è¯¥å…³ç³»æ¨¡å‹ä¸­, é”®ä¸º N ç«¯å’Œ M ç«¯å®ä½“é”®ç»„åˆ</li><li>M:N:P åŒä¸Š,å°†ä¸‰ç«¯çš„é”®(ä½œä¸ºå¤–é”®)å’Œè”ç³»å±æ€§åŠ å…¥åˆ°è¯¥å…³ç³»æ¨¡å‹,
é”®ä¸ºä¸‰ç«¯å®ä½“é”®çš„ç»„åˆ</li></ol></li></ol></li></ol><h4>4.2 é‡‡ç”¨ ER æ¨¡å‹çš„é€»è¾‘è®¾è®¡æ­¥éª¤</h4><ol><li><p>å¯¼å‡ºåˆå§‹å…³ç³»æ¨¡å¼é›†
å³æŠŠæ¦‚å¿µè®¾è®¡çš„ç»“æœ(å…¨å±€ ER æ¨¡å‹)è½¬æ¢ä¸ºåˆå§‹å…³ç³»æ¨¡å¼é›†</p></li><li><p>è§„èŒƒåŒ–å¤„ç†
è§„èŒƒåŒ–çš„ç›®çš„æ˜¯å‡å°‘ä¹ƒè‡³æ¶ˆé™¤å…³ç³»æ¨¡å¼ä¸­å­˜åœ¨çš„å„ç§å¼‚å¸¸,æ”¹å–„å®Œæ•´æ€§,ä¸€è‡´æ€§å’Œå­˜å‚¨æ•ˆç‡</p></li><li><p>æ¨¡å¼è¯„ä»·
ä¸»è¦åŒ…æ‹¬åŠŸèƒ½å’Œæ€§èƒ½ä¸¤æ–¹é¢</p></li><li><p>æ¨¡å¼ä¿®æ­£</p></li><li><p>è®¾è®¡å­æ¨¡å¼(å¤–éƒ¨æ¨¡å¼
)</p></li></ol><h3>5.å¢å¼ºçš„ ER æ¨¡å‹</h3><p>ä¸ºäº†æ›´å‡†ç¡®çš„æ¨¡æ‹Ÿç°å®ä¸–ç•Œ,éœ€è¦æ‰©å±•åŸºæœ¬ ER æ¨¡å‹çš„æ¦‚å¿µ,ä»è€Œäº§ç”Ÿäº†å¢å¼ºçš„ ER æ¨¡å‹(Enhanced-ER model, ç®€ç§° EER)</p><h4>5.1 å¼±å®ä½“ä¸å¼ºå®ä½“</h4><p>è‹¥å®ä½“
: ä¸€ä¸ªå®ä½“çš„å­˜åœ¨å¿…é¡»ä¾èµ–äºå…¶ä»–å®ä½“</p><blockquote><p>è‹¥å®ä½“å‚ä¸è”ç³»æ—¶æ˜¯å®Œå…¨å‚ä¸,å¼ºå®ä½“ä¸å¼±å®ä½“çš„è”ç³»åªèƒ½æ˜¯ 1:Næˆ–N:M</p></blockquote><p>å¼ºå®ä½“
: å¯ä¸å¿…ä¾èµ–äºå…¶ä»–å®ä½“</p><h4>5.2 å­ç±»å®ä½“ä¸è¶…ç±»å®ä½“</h4><p>å•è¾ƒä½å±‚ä¸Šå®ä½“ç±»å‹è¡¨åˆ°äº†ä¸ä¹‹è”ç³»çš„è¾ƒé«˜å±‚ä¸Šçš„å®ä½“ç±»å‹çš„ç‰¹æ®Šæƒ…å†µæ—¶,å°±ç§°è¾ƒé«˜å±‚ä¸Šå®ä½“ç±»å‹ä¸º<strong>è¶…ç±»å‹(Supertype)</strong>,è¾ƒä½å±‚ä¸Šå®ä½“ç±»å‹ä¸ºå­<strong>ç±»å‹(Subtype)</strong></p><p>åœ¨æ•°æ®åº“è®¾è®¡ä¸­,å­ç±»åˆ°è¶…ç±»çš„æŠ½è±¡åŒ–è¿‡ç¨‹ç§°ä¸º<strong>æ¦‚åŒ–</strong>,åˆ™æ˜¯è‡ªåº•å‘ä¸Šçš„æ¦‚å¿µ<strong>ç»¼åˆ(Synthesis)</strong>;ä»è¶…ç±»å…·åŒ–åˆ°ä¹‹ç±»çš„è¿‡ç¨‹ç§°ä¸º<strong>ç‰¹åŒ–</strong>,åˆ™æ˜¯è‡ªé¡¶å‘ä¸‹çš„æ¦‚å¿µ<strong>å‘æŒ¥(Refinement)</strong>.</p><p>ä¹‹ç±»ä¸è¶…ç±»æœ‰ä¸¤ä¸ªç‰¹ç‚¹:</p><ol><li>ä¹‹ç±»ä¸è¶…ç±»ä¹‹é—´å…·æœ‰ç»§æ‰¿æ€§ç‰¹ç‚¹</li><li>è¿™ç§ç»§æ‰¿æ€§æ˜¯é€šè¿‡ä¹‹ç±»å®ä½“å’Œè¶…ç±»å®ä½“å…·æœ‰ç›¸åŒçš„å®ä½“æ ‡è¯†ç¬¦å®ç°çš„</li></ol><p>æ­¤å¤–,æœ‰ä¸¤ç§çº¦æŸé€‚ç”¨äºç‰¹åŒ–è¿‡ç¨‹.</p><p>ä¸ç›¸äº¤çº¦æŸ(Disjointness Constraint)
: çº¦æŸä¹‹ç±»ç‰¹åŒ–æ˜¯æ˜¯å¦ç›¸äº¤,åˆ†ä¸ºä¸ç›¸äº¤å’Œé‡å ä¸¤ç§æƒ…å†µ</p><p>ä¸ç›¸äº¤(Disjoint)
: çº¦æŸè§„å®šäº†åœ¨ç‰¹åŒ–è¿‡ç¨‹ä¸­,ä¹‹ç±»å¿…é¡»æ˜¯ä¸æƒ³äº¤çš„.</p><p>é‡å (Overlap)
: åœ¨ç‰¹åŒ–è¿‡ç¨‹ä¸­,å­ç±»å¯ä»¥ç›¸äº¤</p><p>å®Œå¤‡æ€§çº¦æŸ(Complete Constraint):
: åˆ†ç±»æ•´ä½“ç‰¹åŒ–å’Œéƒ¨åˆ†ç‰¹åŒ–</p><p>æ•´ä½“ç‰¹åŒ–(Total Specialization)
: çº¦æŸæŒ‡å®šè¶…ç±»ä¸­çš„æ¯ä¸ªå®ä½“å¿…é¡»æ˜¯ç‰¹åŒ–ä¸­çš„æŸä¸ªå­ç±»çš„ä¸€ä¸ªæˆå‘˜</p><p>éƒ¨åˆ†ç‰¹åŒ–(Partial Specialization)
: è¶…ç±»ä¸­çš„å®ä½“å¯ä»¥ä¸å±äºä»»ä½•ä¸€ä¸ªå­ç±»</p><p>åœ¨ ER å›¾ä¸­,æ‰€æœ‰çš„å­ç±»å’Œè¶…ç±»ç»„æˆäº†<strong>å±‚æ¬¡(Hierarchy)</strong>æˆ– <strong>æ ¼(Lattice)</strong>çš„ç»“æ„</p><h3>6. ERæ¨¡å‹çš„åŸºæœ¬è¡¨ç¤º</h3><table><thead><tr><th align="center">å®šä¹‰</th><th align="center">è¡¨ç¤º</th></tr></thead><tbody><tr><td align="center">å®ä½“</td><td align="center">çŸ©å½¢</td></tr><tr><td align="center">è”ç³»</td><td align="center">è±å½¢</td></tr><tr><td align="center">å±æ€§</td><td align="center">æ¤­åœ†</td></tr><tr><td align="center">å¤šå€¼å±æ€§</td><td align="center">åŒçº¿æ¤­åœ†</td></tr><tr><td align="center">æ´¾ç”Ÿå±æ€§</td><td align="center">è™šçº¿æ¤­åœ†</td></tr><tr><td align="center">å®ä½“æ ‡è¯†ç¬¦</td><td align="center">ä¸‹åˆ’çº¿</td></tr><tr><td align="center">å®ä½“ä¸å±æ€§</td><td align="center">ç›´çº¿è¿æ¥</td></tr><tr><td align="center">è”ç³»ä¸å±æ€§</td><td align="center">ç›´çº¿è¿æ¥</td></tr><tr><td align="center">è”ç³»çš„åŸºæ•°çº¦æŸ</td><td align="center">åœ¨è¿çº¿ä¸Šä»¥(m,n)çš„å½¢å¼è¡¨é¢</td></tr><tr><td align="center">è”ç³»çš„å®Œå…¨å‚ä¸</td><td align="center">ç”¨åŒçº¿è¿æ¥</td></tr><tr><td align="center">è”ç³»çš„ç±»å‹</td><td align="center">åœ¨ç›´çº¿ä¸¤ç«¯æŒ‡æ˜(1:1,1:N,N:M)</td></tr><tr><td align="center">å¼±å®ä½“</td><td align="center">åŒçº¿çŸ©å½¢æ¡†</td></tr><tr><td align="center">ä¸ç›¸äº¤</td><td align="center">å°åœ†åœˆé‡Œä¸º <strong>d</strong></td></tr><tr><td align="center">é‡å </td><td align="center">å°åœ†åœˆé‡Œä¸º <strong>o</strong></td></tr><tr><td align="center">æ•´ä½“ç‰¹åŒ–</td><td align="center">è¶…ç±»å®ä½“ä¸åœ†åœˆä¹‹é—´ç”¨<strong>åŒçº¿æ¡</strong>è¿æ¥</td></tr><tr><td align="center">éƒ¨åˆ†ç‰¹åŒ–</td><td align="center">è¶…ç±»å®ä½“ä¸åœ†åœˆä¹‹é—´ç”¨<strong>å•çº¿æ¡</strong>è¿æ¥</td></tr></tbody></table><hr/><h2>Appendix.B å…³ç³»æ¨¡å‹</h2><h3>1. å…³ç³»æ¨¡å‹çš„åŸºæœ¬æœ¯è¯­</h3><p>å…³ç³»æ¨¡å‹(Relation Model)
: ç”¨äºŒç»´è¡¨æ ¼è¡¨ç¤ºå®ä½“é›†,ç”¨å…³é”®ç è¡¨ç¤ºå®ä½“ä¹‹é—´è”ç³»çš„æ•°æ®æ¨¡å‹ç§°ä¸ºå…³ç³»æ¨¡å‹.</p><p>åœ¨å…³ç³»æ¨¡å‹ä¸­,å­—æ®µç§°ä¸ºå±æ€§,å­—æ®µå€¼ç§°ä¸ºå±æ€§å€¼,è®°å½•ç±»å‹ç§°ä¸ºå…³ç³»æ¨¡å¼,è®°å½•ç§°ä¸º
<strong>å…ƒç»„(Tuple)</strong>,å…ƒç»„çš„é›†åˆç§°ä¸º<strong>å…³ç³»(Relation)</strong> æˆ– <strong>å®ä¾‹(Instance)</strong>.</p><p>åœ¨å…³ç³»ä¸­å±æ€§çš„ä¸ªæ•°ç§°ä¸º<strong>å…ƒæ•°(Arity)</strong>, å…ƒç´ ä¸ªæ•°ç§°ä¸º <strong>åŸºæ•°(Cardinality)</strong></p><p><strong>å…³é”®ç (Key,ç®€ç§°é”®)</strong>ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ç»„æˆ,ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§:</p><p>è¶…é”®(Super Key)
: åœ¨å…³ç³»ä¸­èƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®</p><p>å€™é€‰é”®(Candidate Key)
: ä¸å«æœ‰å¤šä½™å±æ€§çš„è¶…é”®ç§°ä¸ºå€™é€‰é”®</p><p>ä¸»é”®(Primary Key)
: ç”¨æˆ·é€‰ä½œå…ƒç»„æ ‡è¯†çš„å€™é€‰é”®ç§°ä¸ºä¸»é”®</p><p>å¤–é”®(Foreign Key)
: å¦‚æœæ¨¡å¼Rä¸­,å±æ€§Kæ˜¯å…¶ä»–æ¨¡å¼çš„ä¸»é”®,é‚£ä¹ˆKåœ¨æ¨¡å¼Rä¸­ç§°ä¸ºå¤–é”®</p><p>å…³ç³»ä¸­æ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå–å€¼èŒƒå›´,ç§°ä¸ºå±æ€§çš„<strong>å€¼åŸŸ(Domain)</strong>.å±æ€§Açš„å–å€¼èŒƒå›´ç”¨ DOM(A) è¡¨ç¤º.æ¯ä¸€ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ªå€¼åŸŸ,ä¸åŒçš„å±æ€§å¯å¯¹åº”äºåŒä¸€å€¼åŸŸ.</p><h3>2. å…³ç³»çš„å®šä¹‰å’Œæ€§è´¨</h3><p>å…³ç³»æ˜¯ä¸€ä¸ªå±æ€§æ•°ç›®ç›¸åŒçš„å…ƒç»„çš„é›†åˆ.</p><p>å¦‚æœä¸€ä¸ªå…³ç³»çš„å…ƒç»„æ•°ç›®æ˜¯æ— é™çš„,åˆ™ç§°ä¸º<strong>æ— é™å…³ç³»</strong>,å¦åˆ™ç§°ä¸º<strong>æœ‰é™å…³ç³»</strong>.ç”±äºè®¡ç®—æœºå­˜å‚¨ç³»ç»Ÿé™åˆ¶,åªé™äºç ”ç©¶æœ‰é™å…³ç³».</p><p>åœ¨å…³ç³»æ¨¡å‹ä¸­,å¯¹å…³ç³»æœ‰ä¸‹åˆ—è§„èŒƒæ€§é™åˆ¶:</p><ol><li>å…³ç³»ä¸­æ¯ä¸€ä¸ªå±æ€§å€¼éƒ½æ˜¯ä¸å¯åˆ†è§£çš„</li><li>å…³ç³»ä¸­ä¸å…è®¸å‡ºç°é‡å¤å…ƒç»„</li><li>ç”±äºå…³ç³»æ˜¯ä¸€ä¸ªé›†åˆ,å› æ­¤ä¸è€ƒè™‘å…ƒç»„é—´çš„é¡ºåº,å³æ²¡æœ‰è¡Œåº</li><li>å…ƒç»„ä¸­çš„å±æ€§åœ¨ç†è®ºä¸Šä¹Ÿæ˜¯æ— åºçš„,ä½†ä½¿ç”¨æ—¶æŒ‰ä¹ æƒ¯è€ƒè™‘åˆ—çš„é¡ºåº</li></ol><h3>3. ä¸‰ç±»å®Œæ•´æ€§è§„åˆ™</h3><ol><li><p>å®ä½“å®Œæ•´æ€§è§„åˆ™(Entity Integrity Rule)
è¿™æ¡è§„åˆ™è¦æ±‚å…³ç³»ä¸­å…ƒç»„åœ¨ç»„æˆä¸»é”®çš„å±æ€§ä¸Šä¸èƒ½æœ‰ç©ºå€¼.</p></li><li><p>å‚ç…§å®Œæ•´æ€§è§„åˆ™(Reference Integrity Rule)
å³ä¸å…è®¸å¼•ç”¨ä¸å­˜åœ¨çš„å®ä½“.
è¿™ç‚¹è§„åˆ™æœ‰ä»¥ä¸‹å˜é€š:</p><ol><li>å¤–é”®å’Œç›¸åº”çš„ä¸»é”®å¯ä»¥ä¸åŒå,åªè¦å®šä¹‰åœ¨ç›¸åŒçš„å€¼åŸŸä¸Šå³å¯</li><li>å¤–é”®å¯ä»¥æ˜¯å¼•ç”¨åŒä¸€ç»„å…³ç³»æ¨¡å¼, æ­¤æ—¶è¡¨ç¤ºäº†åŒä¸€ä¸ªå…³ç³»ä¸­ä¸åŒå…ƒç»„ä¹‹é—´çš„è”ç³»</li><li>å¤–é”®å€¼æ˜¯å¦å…è®¸ç©º,åº”è§†å…·ä½“æƒ…å†µè€Œå®š</li></ol></li><li><p>ç”¨æˆ·å®šä¹‰çš„å®Œæ•´æ€§è§„åˆ™</p></li></ol><h2>Appendix.X é¢å¤–çš„ç¬”è®°</h2><h3>åè¯å®šä¹‰</h3><p>å®Œå…¨éå¹³å‡¡å‡½æ•°ä¾èµ–
: ä»…å½“å…¶å³è¾¹é›†åˆçš„å±æ€§éƒ½ä¸åœ¨å·¦è¾¹çš„é›†åˆä¸­æ—¶æˆç«‹</p><p>å®Œå…¨è¿˜åŸæ¨¡å‹
: æ”¯æŒå››ç§å¤‡ä»½æ¨¡å¼, 1.å®Œå…¨å¤‡ä»½, 2.å·®å¼‚å¤‡ä»½, 3.äº‹åŠ¡æ—¥å¿—å¤‡ä»½, 4.æ–‡ä»¶ç»„å¤‡ä»½</p><p>é”çš„ç±»å‹
: äº’æ–¥é”,å…±äº«é”</p><p>åˆ†ç±»
: åˆ†ç±»çš„ç›®çš„æ˜¯å­¦ä¼šä¸€ä¸ªåˆ†ç±»å‡½æ•°æˆ–åˆ†ç±»é­”å¿ƒ,è¯¥æ¨¡å‹èƒ½æŠŠæ•°æ®åº“ä¸­çš„æ•°æ®é¡¹æ˜ å°„åˆ°ç»™å®š
ç±»åˆ«ä¸­çš„æŸä¸€ä¸ª.</p><p>èšç±»
: èšç±»æ˜¯æŠŠä¸€ç»„ä¸ªä½“æŒ‰ç…§ç›¸ä¼¼æ€§å½’æˆè‹¥å¹²ç±»åˆ«,ç›®çš„æ˜¯ä½¿å±äºåŒä¸€ç±»åˆ«çš„ä¸ªä½“ä¹‹é—´è·ç¦»å°½
å¯èƒ½å°,è€Œä¸åŒç±»åˆ«ä¸Šä¸ªä½“é—´è·ç¦»å°½å¯èƒ½å¤§.</p><p>æ•°æ®åº“æ¢å¤é¡ºåº
: é¦–å…ˆæ¢å¤å®Œå…¨å¤‡ä»½,å…¶æ¬¡æ¢å¤å·®å¼‚å¤‡ä»½,ç„¶åæ¢å¤æ—¥å¿—å¤‡ä»½</p><p>åŠŸèƒ½éœ€æ±‚
: æ˜¯è¯¦ç»†æè¿°æ€»ä½“ç»“æ„åŠåŠŸèƒ½,ç³»ç»Ÿè¦†ç›–çš„åŠŸèƒ½èŒƒ,å„åŠŸèƒ½å­ç³»ç»Ÿçš„åˆ’åˆ†,åŠŸèƒ½æè¿°åŠ
å­ç³»ç»Ÿä¹‹é—´çš„å…³ç³»ç­‰</p><p>ä¿¡æ¯éœ€æ±‚/æ•°æ®éœ€æ±‚
: æ˜¯å®Œæ•´æè¿°ç³»ç»Ÿæ‰€æ¶‰åŠçš„ä¿¡æ¯èŒƒå›´, æ•°æ®çš„å±æ€§ç‰¹å¾,æ•°æ®ä¹‹é—´çš„å…³ç³»å’Œçº¦æŸ.</p><p>æ€§èƒ½éœ€æ±‚
: æè¿°å¯¹ç³»ç»Ÿçš„æ€§èƒ½è¦æ±‚,åŒ…æ‹¬å“åº”æ—¶é—´,å­˜å‚¨å®¹é‡,ç³»ç»Ÿé€‚åº”æ€§,æ•°æ®åº“å®‰å…¨æ€§,
ä¸€è‡´æ€§å’Œå¯é æ€§.</p><p>å…ƒæ•°æ®
: æ˜¯æè¿°æ•°æ®å±æ€§çš„ä¿¡æ¯,ç”¨æ¥æ”¯æŒå¦‚æŒ‡ç¤ºå­˜å‚¨ä½ç½®,å†å²æ•°æ®,èµ„æºæŸ¥æ‰¾,æ–‡ä»¶è®°å½•ç­‰åŠŸèƒ½.
å…ƒæ•°æ®ç®—æ˜¯ä¸€ç§ç”µå­å¼ç›®å½•,ä¸ºäº†è¾¾åˆ°ç¼–åˆ¶ç›®å½•çš„ç›®çš„,å¿…é¡»æè¿°å¹¶æ”¶è—æ•°æ®çš„å†…å®¹
æˆ–ç‰¹è‰²,è¿›è€Œè¾¾åˆ°ååŠ©æ•°æ®æ£€ç´¢çš„ç›®çš„.</p><p>éœ€æ±‚åˆ†æ
: æ˜¯æŒ‡å¯¹å³å°†è¦å¼€å‘çš„ç³»ç»Ÿè¦åšä»€ä¹ˆä»¥åŠå®Œæˆä»€ä¹ˆåŠŸèƒ½çš„å…¨é¢æè¿°,å®ƒå…³æ³¨çš„æ˜¯è¿™ä¸ªç³»ç»Ÿ     å¿…é¡»è¦åšä»€ä¹ˆ.</p><p><strong>æ—¥å¸¸ç»´æŠ¤çš„ç›¸å…³å·¥ä½œ</strong></p><ol><li>æ•°æ®åº“çš„å¤‡ä»½å’Œæ¢å¤</li><li>å®Œæ•´æ€§ç»´æŠ¤</li><li>å®‰å…¨æ€§ç»´æŠ¤</li><li>å­˜å‚¨ç©ºé—´ç®¡ç†</li><li>å†°æ³•æ§åˆ¶åŠæ­»é”å¤„ç†</li></ol><p>å¯ä¸²è¡ŒåŒ–è°ƒåº¦
: å¯¹nä¸ªäº‹åŠ¡ç»„æˆçš„äº‹åŠ¡é›† $TS=<!-- -->{<!-- -->\quad T_1,T_2,\cdots, T_k,\cdots,T_n\quad<!-- -->}<!-- -->$,
å¦‚æœå¹¶å‘è°ƒåº¦ S ç­‰ä»·äºæŸä¸€åœ¨ TS ä¸Šçš„ä¸²è¡Œè°ƒåº¦,é‚£ä¹ˆ S ç§°ä¸ºå¯ä¸²è¡ŒåŒ–è°ƒåº¦,
å¦åˆ™ S æ˜¯ä¸å¯ä¸²è¡ŒåŒ–è°ƒåº¦.</p><p>å†²çªä¸²è¡ŒåŒ–
: å¦‚æœå®šä¹‰æ—©äº‹åŠ¡é›† TS ä¸Šçš„å¹¶å‘è°ƒåº¦ S å†²çªç­‰ä»·äºäº‹åŠ¡é›† TS ä¸Šçš„æŸä¸ªä¸²è¡Œè°ƒåº¦ S&#x27;,
åˆ™ç§° S æ˜¯å†²çªå¯ä¸²è¡Œçš„.å†²çªå¯ä¸²è¡Œçš„å¹¶å‘è°ƒåº¦çš„æ‰§è¡Œç»“æœä¸ä¸²è¡Œè°ƒåº¦ä¸€è‡´,æ˜¯æ­£ç¡®çš„,
åŒæ—¶åˆå…·æœ‰è¾ƒé«˜çš„æ‰§è¡Œæ•ˆç‡.</p><p>è§¦å‘å™¨
: é€šå¸¸ç”¨äºä¿è¯ä¸šåŠ¡è§„åˆ™å’Œæ•°æ®å®Œæ•´æ€§, å…¶ä¸»è¦ä¼˜ç‚¹æ˜¯ç”¨æˆ·å¯ä»¥ç”¨ç¼–ç¨‹çš„æ–¹æ³•æ¥å®ç°å¤æ‚çš„
å¤„ç†é€»è¾‘å’Œä¸šåŠ¡è§„åˆ™,å¢å¼ºäº†æ•°æ®å®Œæ•´æ€§çº¦æŸçš„åŠŸèƒ½.</p><p>æŠ€æœ¯å¯è¡Œæ€§
: æ˜¯æ ¹æ®ç”¨æˆ·æå‡ºçš„ç³»ç»ŸåŠŸèƒ½,æ€§èƒ½åŠå®ç°ç³»ç»Ÿçš„å„é¡¹çº¦æŸæ¡ä»¶,å¯¹ç³»ç»Ÿè½¯ä»¶,ç³»ç»Ÿç¡¬ä»¶,æŠ€æœ¯
æ–¹æ¡ˆä½œå‡ºè¯„ä¼°å’Œé€‰æ‹©å»ºè®®,å®ƒå±äºè§„åˆ’ä¸åˆ†æé˜¶æ®µçš„å¯è¡Œæ€§åˆ†æ.</p><p>æ•°æ®åº“åº”ç”¨ç³»ç»Ÿçš„éœ€æ±‚
: æ•°æ®éœ€æ±‚åˆ†æ, æ•°æ®å¤„ç†éœ€æ±‚åˆ†æ, ä¸šåŠ¡éœ€æ±‚åˆ†æä»¥åŠåœ¨æ€§èƒ½, å­˜å‚¨, å®‰å…¨, å¤‡ä»½å’Œæ¢å¤
ç­‰æ–¹é¢çš„è¦æ±‚. æ•°æ®æ“ä½œç›¸åº”æ—¶é—´, ç³»ç»Ÿååé‡, æœ€å¤§å¹¶å‘ç”¨æˆ·æ•°éƒ½æ˜¯æ€§èƒ½éœ€æ±‚åˆ†æçš„
é‡è¦æŒ‡æ ‡.</p><p>æ•°æ®åº“æ¦‚å¿µè®¾è®¡é˜¶æ®µçš„å·¥ä½œç›®æ ‡</p><ol><li>å®šä¹‰å’Œæè¿°åº”ç”¨é¢†åŸŸè®¾è®¡çš„æ•°æ®èŒƒå›´</li><li>è·å–åº”ç”¨é¢†åŸŸæˆ–é—®é¢˜åŸŸçš„ä¿¡æ¯æ¨¡å‹</li><li>æè¿°æ¸…æ¥šæ•°æ®çš„å±æ€§ç‰¹å¾</li><li>æè¿°æ¸…æ¥šæ•°æ®ä¹‹é—´çš„å…³ç³»</li><li>å®šä¹‰å’Œæè¿°æ•°æ®çš„çº¦æŸ</li><li>è¯´æ˜æ•°æ®çš„å®‰å…¨æ€§è¦æ±‚</li><li>æ”¯æŒç”¨æˆ·çš„å„ç§æ•°æ®å¤„ç†éœ€æ±‚</li><li>ä¿è¯ä¿¡æ¯æ¨¡å‹æ–¹ä¾¿åœ°è½¬æ¢æˆæ•°æ®åº“çš„é€»è¾‘ç»“æ„(æ•°æ®åº“æ¨¡å¼),åŒæ—¶ä¹Ÿä¾¿äºç”¨æˆ·ç†è§£.</li></ol><p>æ•°æ®ä»“åº“çš„å®šä¹‰
: æ˜¯ä¸€ä¸ªé¢å‘ä¸»é¢˜çš„,é›†æˆçš„,éæ˜“å¤±çš„,ä¸”éšæ—¶é—´å˜åŒ–çš„æ•°æ®é›†åˆ,ç”¨æ¥æ”¯æŒç®¡ç†äººå‘˜çš„å†³ç­–</p><p>æ•°æ®ä»“åº“çš„ç‰¹æ€§
: ä¸»é¢˜ä¸é¢å‘ä¸»é¢˜,é›†æˆ,ä¸å¯æ›´æ–°,éšæ—¶é—´å˜åŒ–.</p><p>èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•
: å¯¹æ•°æ®æ–‡ä»¶å’Œå®ƒçš„ä¸€ä¸ªç‰¹å®šçš„ç´¢å¼•æ–‡ä»¶,å¦‚æœæ•°æ®æ–‡ä»¶ä¸­æ•°æ®è®°å½•çš„æ’åˆ—é¡ºåºä¸ç´¢å¼•æ–‡ä»¶ä¸­
ç´¢å¼•é¡¹çš„æ’åˆ—é¡ºåºä¸€è‡´,æˆ–è€…è¯´,ç´¢å¼•æ–‡ä»¶æŒ‰å…¶æŸ¥æ‰¾ç æŒ‡å®šçš„é¡ºåºä¸æ•°æ®æ–‡ä»¶ä¸­æ•°æ®è®°å½•
é¡ºåºä¸€è‡´,åˆ™è¯¥ç´¢å¼•æ–‡ä»¶ç§°ä¸ºèšé›†ç´¢å¼•,å¦åˆ™æˆä¸ºéèšé›†ç´¢å¼•.</p><p>ç¨ å¯†ç´¢å¼•å’Œç¨€ç–ç´¢å¼•
: å¦‚æœæ•°æ®æ–‡ä»¶çš„æ¯ä¸ªæŸ¥æ‰¾ç å€¼åœ¨ç´¢å¼•æ–‡ä»¶ä¸­éƒ½å¯¹åº”ä¸€ä¸ªæ‰€ä»¥è®°å½•,åˆ™è¯¥ç´¢å¼•ç§°ä¸ºç¨ å¯†ç´¢å¼•.
å¦‚æœåªæ˜¯ä¸€éƒ¨åˆ†æŸ¥æ‰¾ç å¯¹åº”ä¸€ä¸ªç´¢å¼•è®°å½•,åˆ™è¯¥ç´¢å¼•ç ç§°ä¸ºç¨€ç–ç´¢å¼•.</p><p>ä¸»ç´¢å¼•å’Œè¾…ç´¢å¼•
: åœ¨æ•°æ®æ–‡ä»¶åŒ…å«çš„å±æ€§é›†ä¸Šå»ºç«‹çš„ç´¢å¼•ç§°ä¸ºä¸»ç´¢å¼•.åœ¨æ•°æ®æ–‡ä»¶çš„éä¸»å±æ€§ä¸Šå»ºç«‹çš„ç´¢å¼•
ç§°ä¸ºè¾…ç´¢å¼•.</p><p>è½¯ä»¶æ€»ä½“è®¾è®¡çš„ä¾æ®åŒ…æ‹¬ éœ€æ±‚åˆ†æé˜¶æ®µå¾—åˆ°çš„æ•°æ®æµå›¾, äº‹åŠ¡æè¿°å’Œä¸šåŠ¡è§„åˆ™ç­‰éœ€æ±‚åˆ†æç»“æœ.
æ€»ä½“è®¾è®¡å¾—åˆ°çš„ç³»ç»Ÿæ€»ä½“ç»“æ„å’Œåˆ†å±‚æ¨¡å—ç»“æ„å¯ä»¥ç”¨æ¨¡å—ç»“æ„å›¾è¡¨ç¤º,æ¨¡å—ç»“æ„å›¾ä¸»è¦å…³å¿ƒæ¨¡å—
çš„å¤–éƒ¨ç‰¹æ€§,å³ä¸Šä¸‹çº§æ¨¡å—ä»¥åŠåŒçº§æ¨¡å—é—´çš„æ•°æ®ä¼ é€’å’Œç”µæ³³å…³ç³»,ä¸å†…éƒ¨å¤„ç†æµç¨‹æ— å…³.</p><p>æ•°æ®æ¨¡å‹
: æ•°æ®æ¨¡å‹æ˜¯æ•°æ®åº“ç³»ç»Ÿçš„å½¢å¼æ¡†æ¶,æ˜¯ç”¨æ¥æè¿°æ•°æ®çš„ä¸€ç»„æ¦‚å¿µå’Œå®šä¹‰.å®ƒæ˜¯åŒ…æ‹¬æè¿°æ•°æ®,æ•°æ®
è”ç³»,æ•°æ®æ“ä½œ,æ•°æ®è¯­ä¹‰ä»¥åŠæ•°æ®ä¸€è‡´æ€§çš„æ¦‚å¿µå·¥å…·,æ˜¯æ•°æ®åº“ç³»ç»Ÿçš„æ ¸å¿ƒå’ŒåŸºç¡€.æŒ‰ç…§æ•°æ®
æ¨¡å‹åœ¨æ•°æ®å»ºæ¨¡å’Œæ•°æ®ç®¡ç†ä¸­çš„ä¸åŒä½œç”¨,å¯ä»¥å°†å…¶åˆ†ä¸ºæ¦‚å¿µæ•°æ®æ¨¡å‹,æ•°æ®ç»“æ„æ¨¡å‹å’Œç‰©ç†æ•°
æ®æ¨¡å‹.æ¦‚å¿µæ•°æ®æ¨¡å‹ç®€ç§°æ¦‚å¿µæ¨¡å‹,æ˜¯æŒ‰ç”¨æˆ·çš„è§‚ç‚¹å¯¹æ•°æ®å’Œä¿¡æ¯è¿›è¡Œå»ºæ¨¡,æ˜¯ç°å®ä¸–ç•Œåˆ°
ä¿¡æ¯ä¸–ç•Œçš„ç¬¬ä¸€å±‚æŠ½è±¡.æ•°æ®ç»“æ„æ¨¡å‹ä¹Ÿç§°ä¸ºè¡¨ç¤ºå‹æˆ–å®ç°å‹çš„æ•°æ®æ¨¡å‹,æ˜¯æœºå™¨ä¸–ç•Œä¸­ä¸å…·ä½“
DBMS ç›¸å…³çš„æ•°æ®æ¨¡å‹.ç‰©ç†æ•°æ®æ¨¡å‹å±äºåº•å±‚æ•°æ®æ¨¡å‹,é€šè¿‡è¯¸å¦‚è®°å½•æ ¼å¼,è®°å½•é¡ºåºå’Œå­˜å–è·¯
å¾„ç­‰è¡¨ç¤ºä¿¡æ¯,æè¿°æ•°æ®åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­çš„å®é™…å­˜å‚¨æ–¹å¼/æ¦‚å¿µæ¨¡å¼æ˜¯å¯¹æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„
é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°,æ˜¯æ‰€æœ‰ç”¨æˆ·çš„å…¬å…±æ•°æ®è§†å›¾,ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªæ¨¡å¼.</p><p>æ•°æ®åº“åº”ç”¨ç³»ç»ŸåŒ…æ‹¬æ¦‚å¿µè®¾è®¡,é€»è¾‘è®¾è®¡,ç‰©ç†è®¾è®¡ä¸‰ä¸ªæ­¥éª¤.æ¯ä¸ªæ­¥éª¤æŒ‰ç…§æ•°æ®ç»„ç»‡ä¸å­˜å‚¨,æ•°æ®
è®¿é—®ä¸å¤„ç†,åº”ç”¨è®¾è®¡ç­‰å‡ ä¸ªæ–¹é¢è¿›è¡Œ.åœ¨æ¦‚å¿µè®¾è®¡é˜¶æ®µ,é‡‡ç”¨è‡ªä¸‹è€Œä¸Šçš„ E-R è®¾è®¡.
å°†å…³ç³»æ¨¡å¼è½¬æ¢ä¸ºå…·ä½“ DBMS å¹³å°æ”¯æŒçš„å…³ç³»è¡¨æ˜¯æ•°æ®åº“ç‰©ç†è®¾è®¡é˜¶æ®µçš„å·¥ä½œ.è®¾è®¡è§†å›¾å’Œå…³ç³»
æ¨¡å¼çš„å®Œæ•´æ€§çº¦æŸæ˜¯æ•°æ®é€»è¾‘è®¾è®¡é˜¶æ®µçš„å·¥ä½œ.</p><p>OLTP ä¸­çš„æ•°æ®ä¸€èˆ¬æŒ‰é¢å‘åº”ç”¨çš„æ–¹å¼ç»„ç»‡,æ•°æ®ä»“åº“ç³»ç»Ÿä¸­çš„æ•°æ®ä¸€èˆ¬æŒ‰é¢å‘åˆ†æä¸»é¢˜çš„æ–¹å¼ç»„ç»‡.</p><h4>æ—¥å¿—æ–‡ä»¶çš„ä½œç”¨</h4><ol><li>ç”¨äºäº‹åŠ¡æ•…éšœæ¢å¤å’Œç³»ç»Ÿæ•…éšœæ¢å¤</li><li>åŠ¨æ€è½¬å‚¨ä¸­å¿…é¡»å»ºç«‹æ—¥å¿—æ–‡ä»¶</li><li>é™æ€è½¬å‚¨ä¸­ä¹Ÿå¯ä»¥å»ºç«‹æ—¥å¿—æ–‡ä»¶</li></ol><p>ä¸ºä¿è¯æ•°æ®åº“æ˜¯å¯æ¢å¤çš„,å¿…é¡»éµå¾ªä¸¤æ¡è§„åˆ™</p><ol><li>ç™»è®°çš„æ¬¡åºä¸¥æ ¼æŒ‰å¹¶è¡Œäº‹åŠ¡æ‰§è¡Œçš„æ—¶é—´æ¬¡åº</li><li>å¿…é¡»å…ˆå†™å…¥æ—¥å¿—æ–‡ä»¶,åå†™å…¥æ•°æ®åº“.</li></ol><h4>äººæœºç•Œé¢è®¾è®¡åŸåˆ™</h4><ol><li>ç”¨æˆ·åº”å½“æ„Ÿè§‰ç³»ç»Ÿçš„è¿è¡Œå§‹ç»ˆåœ¨è‡ªå·±çš„æ§åˆ¶ä¹‹ä¸‹,ä¿æŒç”¨æˆ·ä¸äººæœºç•Œé¢çš„åŒå‘äº¤æµ</li><li>å½“ç³»ç»Ÿå‘ç”Ÿé”™è¯¯æˆ–ç¨‹åºè¿è¡Œæ—¶é—´è¾ƒé•¿æ—¶,ç”¨æˆ·ç•Œé¢åº”è¯¥æä¾›æœ‰æ„ä¹‰çš„åé¦ˆä¿¡æ¯,å¹¶æœ‰ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„
å¸®åŠ©ç³»ç»Ÿ</li><li>ç”¨æˆ·ç•Œé¢èƒ½å®¹å¿ç”¨æˆ·åœ¨æ“ä½œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„å„ç§æ“ä½œé”™è¯¯,å¹¶èƒ½æ–¹ä¾¿çš„ä»é”™è¯¯ä¸­æ¢å¤,ä¿è¯ç³»ç»Ÿä¸å—
ç”¨æˆ·é”™è¯¯æ“ä½œçš„å½±å“</li><li>ç•Œé¢éµå¾ªä¸€å®šçš„æ ‡å‡†å’Œå¸¸è§„</li><li>ç•Œé¢åº”é‡‡å–çµæ´»å¤šæ ·çš„æ•°æ®è¾“å…¥æ–¹å¼,å°½é‡å‡å°‘ç”¨æˆ·çš„è¾“å…¥è´Ÿæ‹….</li></ol><h4>æ€§èƒ½éœ€æ±‚åˆ†æ</h4><ol><li>æ•°æ®æ“ä½œå“åº”æ—¶é—´,æˆ–æ•°æ®è®¿é—®å“åº”æ—¶é—´
æŒ‡ç”¨æˆ·å‘æ•°æ®åº“ç³»ç»Ÿæäº¤æ•°æ®æ“ä½œè¯·æ±‚åˆ°æ“ä½œè¿”å›ç”¨æˆ·çš„æ—¶é—´.</li><li>ç³»ç»Ÿååé‡
ç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…å¯ä»¥å®Œæˆçš„æ•°æ®åº“äº‹åŠ¡æˆ–æ•°æ®æŸ¥è¯¢çš„æ•°é‡.
ååé‡å¯ä»¥è¡¨ç¤ºä¸º æ¯ç§’äº‹åŠ¡æ•°(TPS).</li><li>å…è®¸å¹¶å‘è®¿é—®çš„æœ€å¤§ç”¨æˆ·æ•°
åœ¨ä¿è¯å•ä¸ªç”¨æˆ·æŸ¥è¯¢å“åº”æ—¶é—´çš„å‰æä¸‹,ç³»ç»Ÿæœ€å¤šå…è®¸å¤šå°‘ç”¨æˆ·åŒæ—¶è®¿é—®æ•°æ®åº“.</li><li>TPS ä»£ä»·å€¼
ç”¨äºè¡¡é‡ç³»ç»Ÿæ€§ä»·æ¯”çš„æŒ‡æ ‡.</li></ol><h4>è§†å›¾çš„ä½œç”¨</h4><ol><li>ç®€åŒ–æ•°æ®æŸ¥è¯¢è¯­å¥</li><li>ä½¿ç”¨æˆ·èƒ½ä»å¤šè§’åº¦çœ‹å¾…åŒä¸€æ•°æ®</li><li>æé«˜æ•°æ®çš„å®‰å…¨æ€§</li><li>æä¾›äº†ä¸€å®šç¨‹åº¦çš„é€»è¾‘ç‹¬ç«‹æ€§</li></ol><h4>ç»“æ„åŒ–åˆ†æåŠå»ºæ¨¡æ–¹æ³•çš„ä¸»è¦ä¼˜ç‚¹</h4><ol><li>ä¸è¿‡æ—©é™·å…¥å…·ä½“çš„ç»†èŠ‚</li><li>ä»æ•´ä½“æˆ–å®è§‚å…¥æ‰‹åˆ†æé—®é¢˜</li><li>é€šè¿‡å›¾å½¢åŒ–çš„æ¨¡å‹å¯¹è±¡ç›´è§‚çš„è¡¨ç¤ºç³»ç»Ÿè¦åšä»€ä¹ˆ,å®Œæˆä»€ä¹ˆåŠŸèƒ½</li><li>å›¾å½¢åŒ–å»ºæ¨¡æ–¹æ³•æ–¹ä¾¿ç³»ç»Ÿåˆ†æå‘˜ç†è§£å’Œæè¿°ç³»ç»Ÿ</li><li>æ¨¡å‹å¯¹è±¡ä¸æ¶‰åŠå¤ªå¤šæŠ€æœ¯æœ¯è¯­,ä¾¿äºç”¨æˆ·ç†è§£æ¨¡å‹</li></ol><h4>UML</h4><p>æ¯ä¸€ç§ UML çš„è§†å›¾éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå›¾ç»„æˆçš„, UML æä¾›äº†9ç§ä¸åŒçš„å›¾,åˆ†ä¸ºä¸¤ç±».</p><ol><li>é™æ€å›¾
ç”¨ä¾‹å›¾, ç±»å›¾, å¯¹è±¡å›¾, ç»„ä»¶å›¾, éƒ¨ç½²å›¾</li><li>åŠ¨æ€å›¾
é¡ºåºå›¾, äº¤äº’å›¾, çŠ¶æ€å›¾, å’Œ æ´»åŠ¨å›¾</li></ol><p>å¯ä»¥æ ¹æ®ä¸åŒçš„è§†å›¾åº”ç”¨è¿›è¡Œåˆ†ç±»:</p><ol><li>ç”¨ä¾‹è§†å›¾: ç”¨ä¾‹å›¾</li><li>ç»“æ„è§†å›¾: ç±»å›¾, å¯¹è±¡å›¾</li><li>è¡Œä¸ºè§†å›¾: é¡ºåºå›¾, äº¤äº’å›¾, çŠ¶æ€å›¾, æ´»åŠ¨å›¾</li><li>å®ç°è§†å›¾: ç»„ä»¶å›¾</li><li>ç¯å¢ƒè§†å›¾: éƒ¨ç½²å›¾</li></ol><h4>åˆ†å¸ƒå¼æ•°æ®åº“</h4><p>ç›®çš„æ˜¯: æœ¬åœ°è‡ªæ²», éé›†ä¸­å¼ç®¡ç†,é«˜å¯ç”¨æ€§,ä½ç½®ç‹¬ç«‹æ€§,åˆ†å¸ƒå¼æŸ¥è¯¢å¤„ç†,åˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†ç­‰.</p><ol><li><p>åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿæ¦‚å¿µ
æ˜¯ç‰©ç†ä¸Šåˆ†æ•£,é€»è¾‘ä¸Šç»Ÿä¸€çš„æ•°æ®åº“ç³»ç»Ÿ.</p></li><li><p>åˆ†å¸ƒå¼æ•°æ®çš„æ¦‚å¿µ
åˆ†å¸ƒå¼æ•°æ®åº“åˆ™æ˜¯åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿä¸­ä¸ªåœºåœ°ä¸Šæ•°æ®åº“çš„é€»è¾‘åˆ.</p></li><li><p>åˆ†å¸ƒå¼æ•°æ®åº“çš„ç»“æ„</p><ul><li>å…±äº«å†…å­˜ç»“æ„</li><li>å…±äº«ç£ç›˜ç»“æ„</li><li>æ— å…±äº«ç»“æ„
æœ€å¥½çš„å¹¶è¡Œç»“æ„</li><li>æ¬¡ç»“æ„
ä»¥ä¸Šä½“ç³»ç»“æ„çš„ç»“åˆ.</li></ul></li></ol><h4>åˆ†å¸ƒå¼æ•°æ®åº“çš„åˆ†å¸ƒç­–ç•¥</h4><p>æ•°æ®åˆ†ç‰‡
: å¯¹æŸä¸€ä¸ªå…³ç³»è¿›è¡Œåˆ†ç‰‡æ˜¯å°†å…³ç³»åˆ’åˆ†ä¸ºå¤šä¸ªç‰‡æ®µ, è¿™äº›ç‰‡æ®µä¸­åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯å¯ä»¥ä½¿å…³ç³»é‡æ„.</p><p>æ•°æ®åˆ†ç‰‡æœ‰å››ç§åŸºæœ¬æ–¹æ³•:</p><ol><li>æ°´å¹³åˆ†ç‰‡
åœ¨å…³ç³»ä¸­ä»è¡Œçš„è§’åº¦(å…ƒç»„)ä¾æ®ä¸€å®šæ¡ä»¶åˆ’åˆ†ä¸ºä¸åŒçš„ç‰‡æ®µ,å…³ç³»ä¸­çš„æ¯ä¸€è¡Œå¿…é¡»è‡³å°‘å±äº
ä¸€ä¸ªç‰‡æ®µ,ä»¥ä¾¿åœ¨éœ€è¦æ—¶å¯ä»¥é‡æ„å…³ç³»</li><li>å‚ç›´åˆ†ç‰‡
åœ¨å…³ç³»ä¸­ä»åˆ—çš„è§’åº¦(å±æ€§)ä¾æ®ä¸€å®šçš„æ¡ä»¶åˆ†ä¸ºä¸åŒçš„ç‰‡æ®µ,å„ç‰‡æ®µä¸­åº”è¯¥åŒ…å«å…³ç³»çš„ä¸»ç 
å±æ€§,ä¸€è¾¹é€šè¿‡è¿æ¥æ–¹æ³•æ¢å¤å…³ç³».</li><li>å¯¼å‡ºåˆ†ç‰‡
æ˜¯å¯¼å‡ºæ°´å¹³åˆ†ç‰‡,åˆ†ç‰‡çš„ä¾æ®ä¸æ˜¯æœ¬å…³ç³»çš„æ¡ä»¶,è€Œæ˜¯å…¶ä»–å…³ç³»å±æ€§çš„æ¡ä»¶.</li><li>æ··åˆåˆ†ç‰‡
ä»¥ä¸Šä¸‰ç§æ–¹æ³•çš„æ··åˆ</li></ol><h4>èŒƒå¼çš„ç®€è¿°</h4><ul><li>ç¬¬ä¸€èŒƒå¼
æŒ‡å…³ç³»å¿…é¡»æ»¡è¶³æ¯ä¸€ä¸ªå±æ€§å€¼éƒ½æ˜¯ä¸å¯åˆ†è§£çš„æ•°æ®é¡¹</li><li>ç¬¬äºŒèŒƒå¼
åœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Š,ä½¿å…³ç³»ä¸­çš„æ¯ä¸€ä¸ªå±æ€§å¿…é¡»åªä¾èµ–ä¸»ç (éä¸»å±æ€§å®Œå…¨ä¾èµ–äºå€™é€‰é”®)</li><li>ç¬¬ä¸‰èŒƒå¼
åœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Š,æ¯ä¸€ä¸ªéä¸»å±æ€§å¿…é¡»åªä¾èµ–äºä¸»ç 
(éä¸»å±æ€§éƒ½ä¸ä¼ é€’ä¾èµ–äºå€™é€‰é”®)</li></ul><p>ä¸€èˆ¬å…³ç³»æ¨¡å¼è§„èŒƒåŒ–å·¥ä½œä»…åšåˆ° 3NF å°±å¯ä»¥æŠŠå…³ç³»ä¸­ä¸åˆç†çš„å±æ€§åŸºæœ¬æ¶ˆé™¤.</p><h3>å…³äºæ€§èƒ½/ä¼˜åŒ–</h3><ul><li>å°†è¡¨çš„æ•°æ®å’Œç´¢å¼•æ”¾ç½®åœ¨åŒä¸€ç£ç›˜ä¸Šä¸åˆ©äºæé«˜ç³»ç»ŸæŸ¥è¯¢çš„æ•ˆç‡</li><li>ç‰©ç†è®¾è®¡çš„ç›®æ ‡æ˜¯å¾—åˆ°å­˜å‚¨ç©ºé—´å ç”¨å°‘,æ•°æ®è®¿é—®æ•ˆç‡é«˜å’Œç»´æŠ¤ä»£ä»·ä½çš„æ•°æ®åº“ç‰©ç†æ¨¡å¼.
è®¾è®¡ä¸€ä¸ªå¥½çš„ç´¢å¼•å’Œç´¢å¼•å­—æ®µ,å¯ä»¥æé«˜æ•°æ®æŸ¥è¯¢çš„é€Ÿåº¦å’Œæ•ˆç‡.</li><li>å°½å¯èƒ½å…ˆæ‰§è¡ŒæŸ¥è¯¢æ¡ä»¶,æŠŠè¡¨è¿æ¥æ”¾åˆ°æœ€åæ‰§è¡Œ</li><li>å¯ä»¥ä½¿ç”¨ FIFS æ¥é¿å…æ´»é”çš„äº§ç”Ÿ</li><li>ä½¿ç”¨å†…è¿æ¥æ›¿ä»£å·¦å³è¿æ¥</li></ul><h4>æŸ¥è¯¢ä¼˜åŒ–</h4><ol><li>åˆç†ä½¿ç”¨ç´¢å¼•</li><li>é¿å…æˆ–ç®€åŒ–æ’åº</li><li>æ¶ˆé™¤å¯¹å¤§å‹è¡¨è¿›è¡Œæ•°æ®çš„é¡ºåºå­˜å–</li><li>é¿å…ç›¸å…³å­æŸ¥è¯¢</li><li>é¿å…å›°éš¾çš„æ­£åˆ™è¡¨è¾¾å¼</li><li>ä½¿ç”¨ä¸´æ—¶è¡¨åŠ é€ŸæŸ¥è¯¢</li><li>ç”¨æ’åºæ¥å–ä»£éé¡ºåºç£ç›˜å­˜å–</li><li>ä¸å……åˆ†çš„è¿æ¥æ¡ä»¶(é¿å…å·¦å³è¿æ¥)</li><li>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹</li><li>ä¸è¦éšæ„ä½¿ç”¨æ¸¸æ ‡</li><li>ä½¿ç”¨äº‹åŠ¡å¤„ç†</li></ol><h3>åˆ†ç±»/æ–¹æ³•</h3><h4>SQL Server 2000 æ•°æ®åº“å¤‡ä»½æ–¹å¼</h4><ol><li>å…ˆåˆ›å»ºå¤‡ä»½è®¾å¤‡,ç„¶åå°†æ•°æ®åº“å¤‡ä»½åˆ°å¤‡ä»½è®¾å¤‡ä¸Š(è¿™ç§è®¾å¤‡ç§°ä¸ºæ°¸ä¹…å¤‡ä»½è®¾å¤‡)</li><li>ç›´æ¥å°†æ•°æ®åº“å¤‡ä»½åˆ°ç‰©ç†æ–‡ä»¶ä¸Š(è¿™ç§è®¾å¤‡ç§°ä¸ºä¸´æ—¶å¤‡ä»½è®¾å¤‡)</li></ol><p>åœ¨æ‰§è¡Œå¤‡ä»½è¿‡ç¨‹ä¸­, å¯ä»¥åŒæ—¶å‘å¤šä¸ªå¤‡ä»½è®¾å¤‡å†™å¤‡ä»½å†…å®¹,ä¹Ÿç§°ä¸ºå¹¶è¡Œå¤‡ä»½.</p><h4>æ­»é”çš„é¢„é˜²æ–¹æ³•</h4><ol><li>ä¸€æ¬¡åŠ é”
è¦æ±‚æ¯ä¸ªäº‹åŠ¡åœ¨å¼€å§‹æ‰§è¡Œæ—¶å¿…é¡»å°†éœ€è¦è®¿é—®çš„æ•°æ®é¡¹å…¨éƒ¨æ·é”,å¦åˆ™ä¸å…è®¸æ‰§è¡Œä¸‹å»,
ä¹Ÿå°±æ˜¯è¦æ±‚äº‹åŠ¡å¿…é¡»èƒ½ä¸€æ¬¡æ€§çš„è·å¾—å¯¹éœ€è¦è®¿é—®çš„å…¨éƒ¨æ•°æ®é¡¹çš„è®¿é—®æƒ.</li><li>é¡ºåºåŠ é”
è¯¥æ–¹æ³•å¯¹æ•°æ®åº“ä¸­äº‹åŠ¡è®¿é—®çš„æ‰€æœ‰æ•°æ®é¡¹è§„å®šä¸€ä¸ªåŠ é”é¡ºåº,æ¯ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­
å¿…é¡»æŒ‰æ­¤é¡ºåºå¯¹æ‰€éœ€æ•°æ®é¡¹åŠ é”.</li></ol><h4>æ•°æ®åº“ç®¡ç†å‘˜æ‰§è¡Œçš„å·¥ä½œ</h4><ol><li>æ•°æ®åº“çš„è½¬å‚¨å’Œæ¢å¤</li><li>æ•°æ®åº“çš„å®‰å…¨å’Œå®Œæ•´æ€§æ§åˆ¶</li><li>æ•°æ®åº“çš„æ€§èƒ½ç›‘æ§å’Œåˆ†æ</li><li>æ•°æ®åº“çš„é‡ç»„å’Œé‡æ„</li></ol><h4>ç³»ç»Ÿæ•…éšœ/è½¯æ•…éšœ çš„å¤„ç†æ–¹æ³•</h4><p>å¯¹äºæœªå®Œæˆçš„äº‹åŠ¡,å¯èƒ½å·²ç»å†™å…¥æ•°æ®åº“çš„å†…å®¹,å›æ»šæ‰€æœ‰æœªå®Œæˆçš„äº‹åŠ¡å†™å…¥çš„ç»“æœ,ä»¥ä¿è¯
æ•°æ®åº“ä¸­æ•°æ®çš„ä¸€è‡´æ€§.
å¯¹äºå·²å®Œæˆçš„äº‹åŠ¡å¯èƒ½éƒ¨åˆ†æˆ–å…¨éƒ¨ç•™åœ¨ç¼“å†²åŒºçš„ç»“æœ,éœ€è¦é‡åšæ‰€æœ‰å·²æäº¤çš„äº‹åŠ¡,ä»¥å°†æ•°æ®
åº“æ¢å¤åˆ°ä¸€è‡´çŠ¶æ€
å³,æ’¤é”€(Undo)æ‰€æœ‰æœªæäº¤çš„äº‹åŠ¡,é‡åš(Redo)æ‰€æœ‰å·²æäº¤çš„äº‹åŠ¡.</p><h4>æ•°æ®ä»“åº“ä¸­æ•°æ®çš„ç»´æŠ¤ç­–ç•¥</h4><ul><li>å®æ—¶ç»´æŠ¤</li><li>å»¶æ—¶ç»´æŠ¤
æŸ¥è¯¢æ—¶è§¦å‘ç»´æŠ¤,å‡å°‘äº†å¯¹æ•°æ®æºçš„æ›´æ–°æ—¶é—´,ä½†è§†å›¾æŸ¥è¯¢æ—¶é—´è¾ƒé•¿.</li><li>å¿«ç…§ç»´æŠ¤
å®šæœŸå¯¹æ•°æ®åº“è¿›è¡Œç»´æŠ¤,ç»´æŠ¤æ“ä½œçš„è§¦å‘æ¡ä»¶æ˜¯æ—¶é—´.</li></ul><h4>æ•°æ®åº“ç‰©ç†è®¾è®¡æ­¥éª¤</h4><ol><li>æ•°æ®åº“é€»è¾‘æ¨¡å¼è°ƒæ•´</li><li>æ–‡ä»¶ç»„ç»‡ä¸å­˜å–è®¾è®¡</li><li>æ•°æ®åˆ†å¸ƒè®¾è®¡</li><li>å®‰å…¨æ¨¡å¼è®¾è®¡</li><li>ç¡®å®šç³»ç»Ÿé…ç½®</li><li>ç‰©ç†æ¨¡å¼è¯„ä¼°</li></ol><h4>DBAS æ€»ä½“è®¾è®¡</h4><ol><li>ç¡®å®š DBAS ä½“ç³»ç»“æ„</li><li>ç³»ç»Ÿç¡¬ä»¶å¹³å°å’Œæ“ä½œç³»ç»Ÿ,æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç­‰ç³»ç»Ÿè½¯ä»¶çš„é€‰å‹å’Œé…ç½®</li><li>åº”ç”¨è½¯ä»¶ç»“æ„è®¾è®¡</li><li>å¯¹éœ€æ±‚åˆ†æé˜¶æ®µè¯†åˆ«å‡ºçš„ä¸šåŠ¡è§„åˆ™è¿›è¡Œåˆæ­¥è®¾è®¡,ç»†åŒ–ä¸šåŠ¡è§„åˆ™æµç¨‹,åˆ†ææ‰€å¤„ç†çš„ä¸šåŠ¡æ•°æ®
å’Œå¤„ç†æ–¹å¼,æ˜ç¡®é‡‡ç”¨çš„å…³é”®æŠ€æœ¯å’Œç®—æ³•ç­‰.</li><li>å¯¹ç³»ç»Ÿé‡‡ç”¨çš„å…³é”®æŠ€æœ¯è¿›è¡Œæ–¹æ¡ˆé€‰å‹å’Œåˆæ­¥è®¾è®¡.</li></ol><h4>RAID åˆ†çº§</h4><table><thead><tr><th>RAIDç­‰çº§</th><th>n</th><th>æœ€å°å®¹é”™ç¡¬ç›˜æ•°</th><th>å¯ç”¨å®¹é‡</th><th>æ€§èƒ½</th><th>å®‰å…¨æ€§</th><th>ç›®çš„</th><th>åº”ç”¨äº§ä¸š</th></tr></thead><tbody><tr><td>JBOD</td><td>â‰§1</td><td>0</td><td>n</td><td>ä¸å˜</td><td>æ— (åŒRAID 0)</td><td>è¿½æ±‚æœ€å¤§å®¹é‡</td><td></td></tr><tr><td>0</td><td>â‰§2</td><td>0</td><td>n</td><td>æœ€é«˜</td><td>ä¸€ä¸ªç¡¬ç›˜å¼‚å¸¸ï¼Œå…¨éƒ¨ç¡¬ç›˜å³è·Ÿç€å¼‚å¸¸</td><td>è¿½æ±‚æœ€å¤§å®¹é‡ã€é€Ÿåº¦</td><td>3Däº§ä¸šå®æ—¶æ¸²æŸ“ã€è§†é¢‘å‰ªæ¥é«˜é€Ÿç¼“å­˜ç”¨é€”</td></tr><tr><td>1</td><td>â‰§2</td><td>æ€»æ•°çš„ä¸€åŠ</td><td>æ€»å®¹é‡çš„ä¸€åŠ</td><td>ç¨æœ‰æå‡</td><td>æœ€é«˜</td><td>è¿½æ±‚æœ€å¤§å®‰å…¨æ€§</td><td>ä¸ªäººã€ä¼ä¸šå¤‡ä»½</td></tr><tr><td>5</td><td>â‰§3</td><td>1</td><td>n-1</td><td>é«˜</td><td>é«˜</td><td>è¿½æ±‚æœ€å¤§å®¹é‡ã€æœ€å°é¢„ç®—</td><td>ä¸ªäººã€ä¼ä¸šå¤‡ä»½</td></tr><tr><td>6</td><td>â‰§4</td><td>2</td><td>n-2</td><td>æ¯”RAID 5ç¨æ…¢</td><td>å®‰å…¨æ€§è¾ƒRAID 5é«˜</td><td>åŒRAID 5ï¼Œä½†è¾ƒå®‰å…¨</td><td>ä¸ªäººã€ä¼ä¸šå¤‡ä»½</td></tr><tr><td>10</td><td>â‰§4</td><td>æ€»æ•°çš„ä¸€åŠ</td><td>æ€»å®¹é‡çš„ä¸€åŠ</td><td>é«˜</td><td>å®‰å…¨æ€§æœ€é«˜</td><td>ç»¼åˆRAID 0/1ä¼˜ç‚¹ï¼Œç†è®ºé€Ÿåº¦è¾ƒå¿«</td><td>å¤§å‹æ•°æ®åº“ã€æœåŠ¡å™¨</td></tr></tbody></table>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸ªäººä½œå“å±•ç¤ºé¡µé¢]]></title>
        <id>personal-project-page</id>
        <link href="https://wener.me/story/personal-project-page"/>
        <updated>2013-08-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä¸ªäººä½œå“å±•ç¤ºæˆªå›¾]]></summary>
        <content type="html"><![CDATA[<p><img src="https://git.oschina.net/wenerme/wener/raw/master/screenshot/%E6%88%91%E7%9A%84%E4%B8%AA%E4%BA%BA%E4%BD%9C%E5%93%81%E7%BD%91%E7%AB%99.png" alt="ä¸ªäººä½œå“å±•ç¤ºæˆªå›¾" title="ä¸ªäººä½œå“å±•ç¤º"/></p><p>ä¸€ä¸ªç®€ç®€å•å•å¹²å¹²å‡€å‡€çš„ä½œå“å±•ç¤ºé¡µé¢</p><h2>ç‰¹æ€§</h2><ul><li>æ•°æ®å‡ä½¿ç”¨yamlç¼–å†™,æ˜“äºä¿®æ”¹æ·»åŠ </li><li>æ•°æ®é©±åŠ¨,ä¿®æ”¹ç®€å•</li><li>ä¸ªäººæ¯”è¾ƒå–œæ¬¢è¿™æ ·çš„ç•Œé¢,æ·¡é›…</li></ul><p>è¿˜æœ‰ä»€ä¹ˆè¦è¯´çš„å‘¢? æ©~ä»¥åå¦‚æœæœ‰äº†æ–°çš„ä½œå“åº”è¯¥éƒ½ä¼šå°½é‡æ›´æ–°åœ¨å“ªé‡Œå§.</p><p>;-)</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¿„ç½—æ–¯æ–¹å—]]></title>
        <id>gtetris</id>
        <link href="https://wener.me/story/gtetris"/>
        <updated>2013-08-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä¿„ç½—æ–¯æ–¹å—/GTetris]]></summary>
        <content type="html"><![CDATA[<h1>ä¿„ç½—æ–¯æ–¹å—/GTetris</h1><p>ç®€å•çš„ä¿„ç½—æ–¯æ–¹å—, java swing å®ç°</p><ul><li><a href="https://github.com/WenerLove/GTetris">é¡¹ç›®åœ°å€</a></li><li><a href="http://resources.wener.me/java/GTetris.jar">ç¨‹åºä¸‹è½½</a></li><li><a href="http://resources.wener.me/java/GTetris.jnlp">è¿è¡Œç¨‹åº</a></li><li><a href="https://github.com/WenerLove/GTetris/archive/master.zip">æºä»£ç æ‰“åŒ…ä¸‹è½½</a></li></ul><h2>æˆªå›¾/Screenshot</h2><p><img src="https://raw.github.com/WenerLove/GTetris/master/screenshot-main.png" alt="GTetris screenschot" title="GTetris"/></p><p><img src="https://raw.github.com/WenerLove/GTetris/master/screenshot.png" alt="GTetris screenschot" title="GTetris"/></p><h2>æ¸¸æˆç‰¹è‰²/Features</h2><ul><li>å¯æ“æ§,å½“å‰æœ€å¤šå¯ä¸‰ä¸ªç©å®¶åŒæ—¶æ“ä½œ</li><li>å¯ä¿å­˜</li></ul><h2>æŒ‰é”®/Shortcuts</h2><p>Esc: æš‚åœ</p><p>1: ä¿å­˜</p><p>2: åŠ è½½</p><p>4: åŠ å…¥ç©å®¶</p><p>ç¬¬ä¸€ä¸ªç©å®¶
w,a,s,d</p><p>ç¬¬äºŒä¸ªç©å®¶
i,j,k,l</p><p>ç¬¬ä¸‰ä¸ªç©å®¶
ä¸Šä¸‹å·¦å³</p><h2>Thanks</h2><p>å­—ä½“ <a href="http://www.dafont.com/christian-munk.d3941?fpp=50&amp;text=Wener">Slice</a></p><p>å­—ä½“ <a href="http://www.dafont.com/font-comment.php?file=visitor&amp;fpp=50&amp;text=Wener">Visitor</a></p><p><a href="http://projectlombok.org">lombok</a></p><p><a href="http://commons.apache.org/proper/commons-io/">commons-io</a></p><h2>TODO</h2><ul><li>æ·»åŠ å£°éŸ³</li><li>å®ç°æ’­æ”¾åŠŸèƒ½</li></ul><h2>ä½œè€…/Author</h2><p>ä½œè€…: <a href="http://wener.me">wener</a></p><p>å¾®åš: <a href="http://weibo.com/u/2705020605">@å°å°æ–‡å°å°çˆ±</a></p><p>åšå®¢: <a href="http://blog.wener.me">http://blog.wener.me</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è´ªåƒè›‡-æ§åˆ¶å°ç‰ˆ]]></title>
        <id>greedy_snake</id>
        <link href="https://wener.me/story/greedy_snake"/>
        <updated>2013-05-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[è´ªåƒè›‡ v1.0]]></summary>
        <content type="html"><![CDATA[<h1>è´ªåƒè›‡ v1.0</h1><h2>ä½œè€…:</h2><p>Author: <em>Wener</em></p><p>E-mail: <em>wenermail(at)gmail.com</em></p><p>Site: <a href="http://blog.wener.me">Blog.wener.me</a></p><p><img src="https://raw.github.com/WenerLove/greedy_snake/master/screenshot.png" alt="è´ªåƒè›‡" title="è´ªåƒè›‡ v1.0"/></p><h2>æè¿°:</h2><ul><li>ä¸€ä¸ªwindows åœ¨æ§åˆ¶å°ä¸‹çš„å°æ¸¸æˆ</li></ul><h2>æŒ‰é”®:</h2><ul><li>ä¸Š-ä¸‹-å·¦-å³ æ§åˆ¶æ–¹å‘/èœå•é€‰æ‹©</li><li><kbd>ESC</kbd>       é€€å‡ºæ¸¸æˆ</li><li><kbd>R</kbd>         é‡æ–°å¼€å§‹</li><li><kbd>S</kbd>         æ¸¸æˆä¿å­˜</li><li><kbd>L</kbd>         æ¸¸æˆè¯»å–</li><li><kbd>SPACE</kbd>     æš‚åœ</li><li><kbd>M</kbd>         å£°éŸ³å¼€å…³åˆ‡æ¢</li></ul><h2>èƒœåˆ©æ¡ä»¶:</h2><ul><li>å½“è›‡çš„é•¿åº¦è¾¾åˆ°<!-- -->[ 30 ]<!-- -->æ—¶å³è·å¾—æ¸¸æˆèƒœåˆ©</li></ul><h2><em>Tips</em>:</h2><ul><li>æŒ‰é”®å¦‚æœå’Œè›‡å¤´çš„æ–¹å‘ä¸€æ ·,å¯åŠ é€Ÿ</li><li>ä½¿ç”¨çš„æˆ‘è‡ªå·±å†™çš„conlibåº“</li><li>ç©çš„æ„‰å¿«!</li></ul>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[VB.NET å¯¹å¯¹ç¢°æ¸¸æˆ]]></title>
        <id>vb-pong-game</id>
        <link href="https://wener.me/story/vb-pong-game"/>
        <updated>2012-02-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[ä½œè€…:Wener]]></summary>
        <content type="html"><![CDATA[<p>ä½œè€…:<a href="http://blog.wener.me">Wener</a></p><p>ç‰ˆæœ¬:1.0</p><p>å¹³å°:.Net 4.0</p><p>VS:2010</p><p><a href="http://download.csdn.net/detail/a3160586/4178509">ç‚¹æ­¤</a>ä¸‹è½½</p><p><img src="https://git.oschina.net/wenerme/wener/raw/master/screenshot/%E5%AF%B9%E5%AF%B9%E7%A2%B0%E6%B8%B8%E6%88%8F.jpg" alt="å¯¹å¯¹ç¢°æ¸¸æˆæˆªå±" title="å¯¹å¯¹ç¢°æ¸¸æˆ"/></p><h2>ç®€ä»‹</h2><p>è¿™ä¸ªæ¸¸æˆç±»ä¼¼äºè¿è¿çœ‹,ç‚¹å‡»ä¸­é—´èœå•ä¸Šçš„å¼€å§‹æŒ‰é’®,å¼€å§‹æ¸¸æˆ.
æ¸¸æˆåœ¨å¼€å§‹å,çƒçš„æ•°é‡é€æ¸å¢åŠ ,é€Ÿåº¦é€æ¸åŠ å¿«,ç§ç±»é€æ¸å¢å¤š.</p><p>åœ¨çƒçš„æœ€å¤§é‡è¾¾åˆ°100æ—¶ä¸å†å¢åŠ .æ•°é‡åœ¨é¢æ¿ä¸Šæœ‰æ˜¾ç¤º.</p><p>æ•°é‡:(å½“å‰æ•°é‡)/(æœ€å¤§é‡)</p><p>åœ¨æ€»é‡è¾¾åˆ°100æ—¶,å¼€å§‹å€’è®¡æ—¶,120ç§’.åœ¨å€’è®¡æ—¶å†…æŠŠæ‰€æœ‰çš„çƒéƒ½</p><p>æ¶ˆæ‰,ä¾¿èƒœåˆ©,å¦åˆ™å¤±è´¥.</p><p>æ“ä½œè¯´æ˜
: æ¯ä¸ªæ³¡æ³¡éƒ½å¯ä»¥æŠ›æ‰”,å½“å‰é€‰ä¸­çš„çƒä¸Šä¼šæœ‰ä¸€ä¸ªé»‘åœˆ.</p><h3>æ¨¡å¼è¯´æ˜</h3><p>é‡åŠ›æ¨¡å¼
: æ¨¡æ‹Ÿå‡ºé‡åŠ›æ•ˆæœ,ä½¿å°çƒè‡ªåŠ¨å¾€ä¸‹æ‰.</p><p>èƒŒæ™¯å¯é€‰
: å½“æ‰“å¼€çš„æ—¶å€™,èƒ½å¤Ÿç‚¹å‡»åˆ°èƒŒæ™¯åçš„å†…å®¹.</p><p>æ¬¢ä¹æ¨¡å¼
: åœ¨è¯¥æ¨¡å¼ä¸‹,å½“ä¸¤ä¸ªç›¸åŒçš„çƒç¢°æ’æ—¶,è‡ªåŠ¨æ¶ˆå¤±.</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æˆ‘çš„ç¬¬ä¸€ä¸ªVB.Netç¨‹åº]]></title>
        <id>first-vb-prog</id>
        <link href="https://wener.me/story/first-vb-prog"/>
        <updated>2012-02-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[æˆ‘å­¦VB.Netçš„ç¬¬ä¸€ä¸ªç¨‹åºã€‚åŒ…å«äº†VBåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¯¹æˆ‘æ¥è¯´å…·æœ‰ç›¸å½“çš„çºªå¿µæ„ä¹‰ã€‚]]></summary>
        <content type="html"><![CDATA[<p>æˆ‘å­¦VB.Netçš„ç¬¬ä¸€ä¸ªç¨‹åºã€‚åŒ…å«äº†VBåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¯¹æˆ‘æ¥è¯´å…·æœ‰ç›¸å½“çš„çºªå¿µæ„ä¹‰ã€‚</p><p><img src="https://git.oschina.net/wenerme/wener/raw/master/screenshot/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAVB.Net%E7%A8%8B%E5%BA%8F-%E7%95%8C%E9%9D%A2.png" alt="WinForm" title="WinForm"/></p><p>ç¨‹åºä¸ªä¸ªç»„ä»¶ä¸Šæœ‰tooltipï¼Œé¼ æ ‡æŒªä¸Šå»å°±çŸ¥é“ä»€ä¹ˆæ„æ€äº†ã€‚è§‰å¾—è¿˜æ˜¯æŒºæœ‰è¶£çš„ã€‚</p><p><a href="http://download.csdn.net/detail/a3160586/5972007">ç¨‹åºå’Œä»£ç ä¸‹è½½</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¦‚è¿° getopt.h çš„ä½¿ç”¨]]></title>
        <id>getopt-h-tips</id>
        <link href="https://wener.me/story/getopt-h-tips"/>
        <updated>2012-02-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[æ¦‚è¿°]]></summary>
        <content type="html"><![CDATA[<h2>æ¦‚è¿°</h2><p>cè¯­è¨€æ§åˆ¶å°ç¼–ç¨‹æ—¶ï¼Œç»å¸¸éƒ½è¦æ¥å—å‘½ä»¤è¡Œä¼ é€’æ¥çš„é€‰é¡¹ï¼Œè€Œgetoptæ˜¯ä¸“é—¨ç”¨æ¥è§£æå‘½ä»¤è¡Œé€‰é¡¹çš„ä¸€å¥—å‡½æ•°ã€‚</p><p>ç®€å•çš„è¯´ä¸€ä¸‹getoptï¼Œå¥¹å·²ç»æœ‰ç›¸å½“é•¿çš„å†å²äº†ï¼Œæ—©æœŸæ˜¯åœ¨Unixä¸­ä½¿ç”¨ï¼Œç°åœ¨å·²ç»ç§»æ¤åˆ°äº†ä¸ªä¸ªä¸åŒçš„è¯­è¨€ï¼ˆShell,Java,Php,.NET...ï¼‰ï¼Œä¸ºæ¥å—å‘½ä»¤è¡Œé€‰é¡¹æä¾›äº†å¾ˆå¤§çš„ä¾¿åˆ©ã€‚åŒæ—¶ä¹ŸæŒ‡å®šäº†ä¸€å¥—ä¼ é€’é€‰é¡¹å’Œå‚æ•°çš„æ ‡å‡†ã€‚</p><h2>å‚æ•°ä¼ é€’æ ‡å‡†</h2><p>å¦‚ä»Šçš„é€‰é¡¹æœ‰ä¸¤ç§æ¨¡å¼ï¼ŒçŸ­é€‰é¡¹å’Œé•¿é€‰é¡¹ï¼Œé€‰é¡¹åˆåˆ†ä¸ºå¸¦å‚æ•°å’Œä¸å¸¦å‚æ•°ã€‚</p><p>æ¯”å¦‚ï¼š</p><p>gcc -V æ˜¯çŸ­é€‰é¡¹ï¼Œä¸”ä¸å¸¦å‚æ•°</p><p>gcc --version æ˜¯é•¿é€‰é¡¹ï¼Œä¸å¸¦å‚æ•°ã€‚ä¸gcc -Vç›¸åŒ</p><p>gcc -o exc æ˜¯çŸ­é€‰é¡¹ å¸¦å‚æ•°ï¼Œä¸gcc --output excç›¸åŒ</p><p>è€Œå¤šä¸ªçŸ­é€‰é¡¹å¯ç›´æ¥è¿æ¥ï¼Œä¾‹å¦‚gcc -so FILE ä¸ gcc -s -o FILEç›¸åŒ</p><p>çŸ­é€‰é¡¹çš„å‚æ•°å¯ç›´æ¥ç´§æ¥åœ¨å…¶å,ä¾‹å¦‚gcc -oFILE = gcc -oFILE</p><p>é•¿é€‰é¡¹çš„å‚æ•°å¯ä»¥ä»¥ç©ºæ ¼åˆ†éš”æˆ–è€…=åˆ†éš”ï¼Œä¾‹å¦‚ gcc --output FILE = gcc --output=FILE</p><h1>å®ç°</h1> getoptä¸­çš„å†…å®¹ï¼š <p>å…·ä½“è®²è§£åœ¨å®ä¾‹ä¸­ã€‚</p><pre><code class="language-c">/* å·²å®šä¹‰çš„å˜é‡ */

int opterr
int optopt
int optind
char *optarg

/* å·²å®šä¹‰çš„å‡½æ•° */
/*  */
int getopt (int argc, char **argv, const char *options)
int getopt_long (int argc, char *const *argv, const char *shortopts, const struct option *longopts, int *indexptr)

int getopt_long_only (int argc, char *const *argv, const char *shortopts, const struct option *longopts, int *indexptr)

/* æ•°æ®ç±»å‹ */
struct option&lt;/code&gt;

å®ä¾‹1.å®ç°çŸ­å‚æ•°

&lt;code lang=&quot;c[lines]&quot;&gt;
#include &lt;ctype .h&gt;
#include &lt;stdio .h&gt;
#include &lt;stdlib .h&gt;
/* getoptæ—¶å¿…é¡»åŒ…å« unistdå¤´æ–‡ä»¶ */
#include &lt;unistd .h&gt;

int main (int argc, char **argv)
{
    int index;
    int c;

    opterr = 0;
 /* getopt ç”¨æ¥è§£æçŸ­é€‰é¡¹ï¼Œç¬¬ä¸€äºŒä¸ªå‚æ•°åŸºæœ¬éƒ½æ˜¯ç›¸åŒçš„ */
 /* ç¬¬ä¸‰ä¸ªé€‰é¡¹ä¼ å…¥èƒ½æ¥å—çš„å‚æ•°,&#x27;:&#x27;ä»£è¡¨éœ€è¦å€¼ &#x27;::&#x27;ä»£è¡¨å€¼ä¸ºå¯é€‰*/
 /* å¦‚æœä¼ å…¥äº†å€¼ï¼Œå…¶å€¼ä¿å­˜åœ¨optargå½“ä¸­ï¼Œå½“å…¶å€¼ä¸ºå¿…é¡»æ˜¯ï¼Œè‹¥æ²¡æœ‰ä¼ å…¥å€¼åˆ™ä¼šæŠ¥é”™ ç¼ºå°‘å€¼ */
 /* getoptè¿”å›åŒ¹é…çš„é€‰é¡¹&amp;nbsp;ä¾‹å¦‚a/b/c */
 /* æœªåŒ¹é…å€¼æ—¶è¿”å›ï¼Ÿ è§£æå®Œæ—¶ï¼Œä¼šè¿”å›-1 è·³å‡º */
    while ((c = getopt (argc, argv, &quot;abc:&quot;)) != -1)
        switch (c)
        {
        case &#x27;a&#x27;:
            printf(&quot;æ£€æµ‹åˆ°-aé€‰é¡¹\n&quot;);
            break;
        case &#x27;b&#x27;:
            printf(&quot;æ£€æµ‹åˆ°-bé€‰é¡¹\n&quot;);
            break;
        case &#x27;c&#x27;:
            printf(&quot;æ£€æµ‹åˆ°-cé€‰é¡¹ï¼Œå…¶å‚æ•°ä¸ºï¼š%s\n&quot;, optarg);
            break;
        /* ç”¨æ¥æ£€æµ‹å…¶ä»–æ„å¤–çš„å€¼ */
        case &#x27;?&#x27;:
         /* optoptä¸ºåœ¨æ²¡æœ‰åŒ¹é…ä»»ä½•é€‰é¡¹æ—¶ï¼Œä¿å­˜çš„é€‰é¡¹å€¼ */
         /* ä¾‹å¦‚-nï¼Œæ²¡æœ‰ä¸ä¸Šé¢åŒ¹é…ï¼Œåˆ™æ­¤æ—¶optopt=c */
            if (optopt == &#x27;c&#x27;)
                fprintf (stderr, &quot;é€‰é¡¹ -%c éœ€è¦ä¸€ä¸ªå‚æ•°.\n&quot;, optopt);
            else if (isprint (optopt))
                fprintf (stderr, &quot;`-%c&#x27;æœªå®šä¹‰\n&quot;, optopt);
            else
                fprintf (stderr,
                         &quot; `\\x%x&#x27; æœªå®šä¹‰\n&quot;,
                         optopt);
            return 1;
        default:
            abort ();
        }
 /*
 æœ€åæ£€æµ‹å‘½ä»¤è¡Œç»™çš„é€‰é¡¹æ˜¯å¦å·²ç»è§£æå®Œ
  optindæ˜¯å½“å‰è§£æåˆ°é€‰é¡¹çš„ç´¢å¼•
  åˆ¤æ–­ä¾æ®æ˜¯å¦‚æœè§£æçš„ä¸ªæ•°å°äºargcï¼Œé‚£ä¹ˆå°±æ˜¯æ²¡æœ‰è§£æå®Œ
 */
    for (index = optind; index &lt; argc; index++)
        printf (&quot;æœªå®šä¹‰çš„å‚æ•°ï¼š %s\n&quot;, argv[index]);
    return 0;
}
</code></pre><p>å®ä¾‹2.å®ç°é•¿é€‰é¡¹</p><pre><code class="language-c">#include &lt;stdio .h&gt;
#include &lt;stdlib .h&gt;
/* ä½¿ç”¨getopt_longæ—¶ä¸éœ€è¦unistd*/
#include &lt;getopt .h&gt;

/* ç”¨æ¥ä½œä¸ºä¸€ä¸ªæ ‡å¿—çš„å€¼. */
static int verbose_flag;

int
main (argc, argv)
int argc;
char **argv;
{
    int c;

    while (1)
    {
     /*
 ç»“æ„è¯´æ˜
  struct option {
 const char *name; //åŒ¹é…çš„é•¿é€‰é¡¹å
 int  has_arg; //æŒ‡å®šå‚æ•°é€‰é¡¹no_argument required_argument optional_argument
  &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;// æ— å€¼ å€¼å¿…é¡» å€¼å¯é€‰
 int *flag; //æ ‡å¿—ä½,æ•°æ®ç±»å‹ä¸º int*
 int val; //å€¼ï¼Œæ ‡å¿—ä½ä¸ä¸º0æ—¶ï¼Œå¦‚æœè¯¥é€‰é¡¹æŒ‡å®šï¼Œé‚£ä¹ˆflag=val æ­¤æ—¶valä¸å¯ä½œä¸ºcaseå€¼
 //å¦åˆ™valå¯ä»¥ä½œä¸ºçŸ­é€‰é¡¹ ä¹Ÿå°±ç›¸å½“äºcase
 };
 */
        static struct option long_options[] =
        {
            /* å¦‚æœæŒ‡å®šäº†-verbose é‚£ä¹ˆverbose_flag = 1*/
            {&quot;verbose&quot;, no_argument,       &amp;verbose_flag, 1},
            /* å¦‚æœæŒ‡å®šäº†-brief é‚£ä¹ˆverbose_flag = 0*/
            {&quot;brief&quot;,   no_argument,       &amp;verbose_flag, 0},
            /* --add = -a ä¸å¸¦å‚æ•°*/
            {&quot;add&quot;,     no_argument,       0, &#x27;a&#x27;},
            {&quot;append&quot;,  no_argument,       0, &#x27;b&#x27;},
            /* --delete=XX = -dXX å¸¦å‚æ•°*/
            {&quot;delete&quot;,  required_argument, 0, &#x27;d&#x27;},
            {&quot;create&quot;,  required_argument, 0, &#x27;c&#x27;},
            {&quot;file&quot;,    required_argument, 0, &#x27;f&#x27;},
            /* å¾ˆæ˜æ˜¾5438ä¸å¯èƒ½ç”¨ä¸€ä¸ªANSCIè¡¨ç¤ºå‡ºæ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯ä»¥ç›´æ¥ç”¨caseå°±å¯ä»¥*/
            {&quot;a_very_long_arg&quot;,    no_argument, 0, 5438},
            /* æœ€åä¸ºç©ºå€¼ï¼Œæ¥æ ‡è¯†ç»“æŸ */
            {0, 0, 0, 0}
        };
        /* å› ä¸ºæ²¡æœ‰äº†optindï¼Œé‚£ä¹ˆå°±è¦ç”¨ä¸€ä¸ªå€¼æ¥å­˜å‚¨å½“å‰ç´¢å¼• */
        int option_index = 0;

 /* å‰ä¸‰ä¸ªå‚æ•°ä¸getoptç›¸åŒï¼Œç¬¬å››ä¸ªä¸ºoptionï¼Œç¬¬äº”ä¸ªä¸ºå­˜ç´¢å¼•intçš„æŒ‡é’ˆ*/
        c = getopt_long (argc, argv, &quot;abc:d:f:&quot;,
                         long_options, &amp;option_index);

        /* å½“è§£æå®Œè¿”å›-1 è·³å‡ºå¾ªç¯ */
        if (c == -1)
            break;

        switch (c)
        {
        case 0:
            /* å½“ flagä¸ä¸º0æ—¶ï¼Œé‡åˆ°é‚£äº›é€‰é¡¹ getopt_longè¿”å›0*/
            if (long_options[option_index].flag != 0)
                break;
            printf (&quot;é€‰é¡¹ %s&quot;, long_options[option_index].name);
            if (optarg)
                printf (&quot; å€¼ %s&quot;, optarg);
            printf (&quot;\n&quot;);
            break;

        case &#x27;a&#x27;:
            puts (&quot;é€‰é¡¹ -a\n&quot;);
            break;

        case &#x27;b&#x27;:
            puts (&quot;é€‰é¡¹ -b\n&quot;);
            break;
        //é•¿é€‰é¡¹
        case 5438:
            puts (&quot;é€‰é¡¹ --a_very_long_arg\n&quot;);
            break;
            break;
        case &#x27;c&#x27;:
            printf (&quot;é€‰é¡¹ -c å€¼ä¸º `%s&#x27;\n&quot;, optarg);
            break;

        case &#x27;d&#x27;:
            printf (&quot;é€‰é¡¹ -d å€¼ä¸º `%s&#x27;\n&quot;, optarg);
            break;

        case &#x27;f&#x27;:
            printf (&quot;é€‰é¡¹ -f å€¼ä¸º `%s&#x27;\n&quot;, optarg);
            break;

        case &#x27;?&#x27;:
            /* getopt_long ä¼šè‡ªåŠ¨è¾“å‡ºé”™è¯¯ï¼Œä¸åƒgetoptéœ€è¦è‡ªå·±æ£€æµ‹ */
            break;

        default:
            abort ();
        }
    }

    /* æ£€æµ‹æ˜¯å¦è®¾ç½®äº†æ ‡å¿—ä½ */
    if (verbose_flag)
        puts (&quot;verbose æ ‡å¿—å·²è¢«è®¾ç½®&quot;);

    /* è¾“å…¥æœªè§£æå®Œçš„é€‰é¡¹. */
    if (optind &lt; argc)
    {
        printf (&quot;æ— æ•ˆé€‰é¡¹ï¼š &quot;);
        while (optind &lt; argc)
            printf (&quot;%s &quot;, argv[optind++]);
        putchar (&#x27;\n&#x27;);
    }

    exit (0);
}
</code></pre><p>å®ä¾‹3.<strong>getopt_long_only</strong></p><p>è¿™ä¸ªå‡½æ•°çš„å‚æ•°å’Œgetopt_longç›¸åŒï¼Œåªæ˜¯æ¥å—é•¿å‚æ•°æ—¶ï¼Œå¯ä»¥åªç”¨ä¸€ä¸ª&#x27;-&#x27;æ¥æ›¿ä»£&#x27;--&#x27;ã€‚å½“-xxæ²¡æœ‰æ£€æµ‹åˆ°xxçš„é•¿å‚æ•°æ—¶ä¼šæ£€æµ‹-xçŸ­å‚æ•°ã€‚</p><p>åŒæ—¶&#x27;--&#x27;ä¹Ÿèƒ½å¤Ÿä½¿ç”¨,ä¹Ÿå°±æ˜¯è¯´-xx=--xx</p><h1>ç»“å°¾</h1> ä¸å¾—ä¸è¯´ï¼Œgetoptæ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„å·¥å…·ï¼Œå¯¹äºç¼–ç¨‹èƒ½æä¾›å¾ˆå¤šçš„ä¾¿åˆ©ã€‚gnuä¹Ÿæœ‰å¼€æºçš„å®ç°åœ¨gnulibå’Œlibcä¸­ã€‚ <p>å‚è€ƒï¼š</p><p>GNU Libcæ‰‹å†Œï¼š<a href="http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt"><a href="http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt">http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt</a></a></p><p>Getoptè‹±æ–‡ç»´åŸºé¡µé¢ï¼š<a href="http://en.wikipedia.org/wiki/Getopt"><a href="http://en.wikipedia.org/wiki/Getopt">http://en.wikipedia.org/wiki/Getopt</a></a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¢¦å¹»è¥¿æ¸¸ç‰ˆä¸ªäººç®€ä»‹ PPT]]></title>
        <id>fwj-resume</id>
        <link href="https://wener.me/story/fwj-resume"/>
        <updated>2011-12-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[æ¢¦å¹»è¥¿æ¸¸ç‰ˆä¸ªäººç®€ä»‹-ä¸­å¾—ä¸€ä¸ªPPTç³»ç»Ÿ]]></summary>
        <content type="html"><![CDATA[<p><img src="https://git.oschina.net/wenerme/wener/raw/master/screenshot/%E6%A2%A6%E5%B9%BB%E8%A5%BF%E6%B8%B8%E7%89%88%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B-%E4%B8%AD%E5%BE%97%E4%B8%80%E4%B8%AAPPT%E7%B3%BB%E7%BB%9F.jpg" alt="æ¢¦å¹»è¥¿æ¸¸ç‰ˆä¸ªäººç®€ä»‹-ä¸­å¾—ä¸€ä¸ªPPTç³»ç»Ÿ"/></p><p><img src="https://git.oschina.net/wenerme/wener/raw/master/screenshot/%E6%A2%A6%E5%B9%BB%E8%A5%BF%E6%B8%B8%E7%89%88%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B-%E6%8C%87%E5%AF%BC.jpg" alt="æ¢¦å¹»è¥¿æ¸¸ç‰ˆä¸ªäººç®€ä»‹-ä¸­å¾—ä¸€ä¸ªPPTç³»ç»Ÿ"/></p><p>ä¸‹è½½(zip)ï¼š<a href="http://download.csdn.net/detail/a3160586/6706453">æ¢¦å¹»è¥¿æ¸¸ç‰ˆä¸ªäººç®€å†</a></p><p>è€å¸ˆå«åšçš„ä½œä¸šï¼Œä¸€æ—¶å¿ƒè¡€æ¥æ½®å°±åšäº†ä¸ªè¿™ä¸ªã€‚æœ€åæ„Ÿè§‰è¿˜ä¸é”™ã€‚</p><p>ä»¥å‰è¿˜ä»æœªåšè¿‡pptï¼Œåšäº†è¿™ä¸ªä¹‹åï¼Œè§‰å¾—pptè¿˜æ˜¯è›®å¼ºå¤§çš„ã€‚ä¸è¿‡å°±æ˜¯å¾ˆç¹çï¼Œç‰¹åˆ«æ˜¯åœ¨è‡ªå®šä¹‰åŠ¨ç”»å¤šäº†ä¹‹åï¼Œå›¾å±‚å¯¹è±¡å¤šäº†ä¹‹åï¼Œç®¡ç†èµ·æ¥å¾ˆéº»çƒ¦ã€‚wpsä¹Ÿæœ‰äº›ä¸ç»™åŠ›ï¼Œæœ¬æ¥æ˜¯å¥½å¥½åœ°2012çš„ï¼Œä¸å¾—ä¸åˆè¿˜å›äº†2010ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™è¿˜ä¼šå¾ˆå¡ã€‚</p><p>ms officeè¿˜ä¸é”™ï¼Œå¾ˆé¡ºç•…ï¼Œä¸è¿‡è¿™ä¸ªæ˜¯ç”¨wpsåšçš„ï¼Œæ²¡æœ‰å¤–éƒ¨æ–‡ä»¶çš„ä¾èµ–ã€‚ä½†æ˜¯å¯¹office 2007å¥½åƒçœ‹ä¸åˆ°èƒŒæ™¯ï¼Œæˆ‘åœ¨2003ä¸Šèƒ½çœ‹åˆ°èƒŒæ™¯ã€‚è¿™ç‚¹å¾ˆæ— å¥ˆã€‚</p><p>åœ¨åšè‡ªå®šä¹‰åŠ¨ä½œçš„æ—¶å€™ã€‚è¿˜æ˜¯æœ‰äº›æŠ€å·§çš„ï¼Œæ¯”å¦‚è¯´ä¸€æ¬¡åŠ å…¥å¤šä¸ªæ–‡ä»¶ï¼Œé€‰æ‹©å¤šä¸ªæ–‡ä»¶æ·»åŠ åŒæ ·çš„åŠ¨ä½œç„¶åç¾¤ä½“ç§»åŠ¨ã€‚è¿™ä¸ªæ–‡ä»¶æœ¬æ¥è¿˜å¯ä»¥åŠ å…¥å£°éŸ³çš„ï¼Œä½†æ˜¯æ²¡æœ‰å»æ‰¾å£°éŸ³æ–‡ä»¶åœ¨å“ªé‡Œã€‚</p><p>è¦æ˜¯å–œæ¬¢ï¼Œå¯ä»»æ„ä¿®æ”¹å“¦ã€‚</p><p>ä¸‹è½½(zip)ï¼š<a href="http://download.csdn.net/detail/a3160586/6706453">æ¢¦å¹»è¥¿æ¸¸ç‰ˆä¸ªäººç®€å†</a></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šéé—å¤±ã€‹]]></title>
        <id>not-lost</id>
        <link href="https://wener.me/story/not-lost"/>
        <updated>2011-11-16T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<pre><code>æˆ‘ä¸æ˜¯ä½ çš„ä»€ä¹ˆ

åªæ˜¯å› ä¸ºä½ æˆ‘é—å¤±äº†å¾ˆå¤š

æ‰¾ä¸å›æ¥çš„æ˜¯å†ä¹Ÿæ— æ³•å¾—åˆ°çš„

ç•™ä¸‹çš„ æ°¸æ’çš„ é—å¤±çš„

çš„ä½ 

å³ä¾¿æ˜¯åœ¨æ¢¦ä¸­ä¹ŸæŠ“ä¸ä½ä¸€ç¼•å‘ä¸

ä½ åªæ˜¯èµ°äº†ï¼Œåªæ˜¯ä¸å†å›æ¥
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šæˆ‘æŠŠæˆ‘çš„çŸœæŒéƒ½ç»™äº†å¥¹ã€‹ï¼šåº]]></title>
        <id>here-my-love-prolog</id>
        <link href="https://wener.me/story/here-my-love-prolog"/>
        <updated>2011-11-16T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<pre><code>ç”Ÿæ´»ä¸­ï¼Œæ€»æœ‰é‚£ä¹ˆä¸ªå¥¹ï¼Œé™ªä½ åº¦è¿‡å›°éš¾ï¼Œé™ªä½ å¼€æ€€å¤§ç¬‘ï¼Œé™ªä½ ç•…è°ˆç†æƒ³ï¼Œé™ªä½ èµ°è¿‡ä¸€æ®µè·¯ï¼Œé™ªä½ å”±è¿‡ä¸€é¦–æ­Œï¼Œé™ªä½ åšè¿‡ä¸€ä¸ªæ¢¦ã€‚æ¢¦ä¸­æœ‰ä½ æœ‰å¥¹è¿˜æœ‰æ¢¦ã€‚ä¹Ÿæ€»æœ‰é‚£ä¹ˆä¸ªå¥¹ï¼Œè®©ä½ è‡ªä¿¡ï¼Œè®©ä½ å¿«ä¹ï¼Œè®©ä½ ä¼¤ç—›ï¼Œè®©ä½ å¿ƒç¢ï¼Œè®©ä½ æµæ³ªï¼Œç–²æƒ«ï¼Œæ†”æ‚´ï¼Œå¿ƒçµæ²¡æœ‰é˜²å¤‡â€¦â€¦åˆ°æœ€åæ‰å‘ç°ï¼Œåªæ˜¯è®©ä½ åœ¨æ”¹å˜ã€‚
ç”Ÿæ´»ä¸­ï¼Œæ€»ä¼šæœ‰é‚£ä¹ˆå¤šå¾—æƒ…çˆ±ã€‚å¥¹ä»¬ç»™çš„æˆ–ç»™ä¸äº†çš„ï¼Œæˆ‘èƒ½åšçš„æˆ–åšä¸äº†çš„æ€»æ˜¯å¤ªå¤šã€‚åƒæ˜¯æˆ´åœ¨é£ŸæŒ‡çš„æˆ’æœŸå¾…çˆ±å´ä¸èƒ½çˆ±ï¼Œå«ç¾è‰èˆ¬ä¸å®¹æŸ“æŒ‡çš„ç¾ä¸½ã€‚å°±è®©æˆ‘é™é™åœ°ç­‰ï¼Œé™é™åœ°çœ‹ã€‚

    ç”Ÿæ´»ä¸­ï¼Œæ€»ä¼šæœ‰å¤ªå¤šçš„äººï¼Œå¤ªå¤šçš„äº‹ï¼Œå¤ªå¤šçš„æ‚²æ¬¢ç¦»åˆã€‚æ²¡æœ‰æ°¸æ’ï¼Œæˆ–è®¸è¿æ˜å¤©ä¹Ÿæ²¡æœ‰ï¼Œä¸€ç›´éƒ½æ´»åœ¨ä»Šå¤©ï¼Œä½†æ˜¯åœ¨æƒ³ç€æ˜å¤©ï¼Œç”šè‡³è¿˜å¿µå¿µä¸å¿˜æ˜¨å¤©ã€‚å½“å“­æ³£ç€è¯´è‡ªå·±å­¤å•ï¼Œå´çœ‹ä¸è§èº«è¾¹é™ªä¼´çš„äººã€‚
    æœ‰æ—¶å€™ç›®å…‰å¤ªçŸ­ï¼Œçœ‹ä¸è§æ•´ç‰‡å¤©ç©ºï¼Œç”šè‡³çœ‹ä¸è§æˆ‘ï¼Œçœ‹ä¸è§è‡ªå·±ã€‚
    æ¢¦è¿˜æ˜¯åœ¨å»¶ç»­ç€ï¼Œåªæ˜¯â€œæœ‰äº›äº‹ä½ ç°åœ¨ä¸å¿…é—®ï¼Œæœ‰äº›äººä½ æ°¸è¿œä¸å¿…ç­‰â€ã€‚
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€Šæˆ‘æŠŠæˆ‘çš„çŸœæŒéƒ½ç»™äº†å¥¹ã€‹ï¼šç¯‡å¤– ã€Œé£çš„æ•…äº‹ã€]]></title>
        <id>here-my-love-wind-story</id>
        <link href="https://wener.me/story/here-my-love-wind-story"/>
        <updated>2011-11-16T00:00:00.000Z</updated>
        <content type="html"><![CDATA[<pre><code>æˆ‘å–œæ¬¢åœ¨èµ·é£çš„æ—¶å€™æƒ³ä½ ï¼Œé£èƒ½æŠŠæˆ‘çš„æ€å¿µå¸¦åˆ°è¿œæ–¹ã€‚

æˆ‘å–œæ¬¢åœ¨å¾®é£ä¸­å“­æ³£ï¼Œé£ä¼šæ‚„ç„¶çš„å¸®æˆ‘æ‹­å»çœ¼æ³ª
æˆ‘å–œæ¬¢æŠŠçˆ±æ”¾åœ¨é£ä¸­ï¼Œé£æŠŠçˆ±å¸¦ç»™æˆ‘æ€å¿µçš„ä½ ã€‚
é£ä»ä¸åœç•™ï¼Œä»–è­¦æˆ’è‡ªå·±ä¸èƒ½å¤Ÿå»çœ·æ‹ã€‚
é£è¯´ï¼Œå¦‚æœå¥¹å–œæ¬¢æˆ‘ï¼Œé‚£å¥¹ä¸€å®šè¿˜ä¼šæ¥åˆ°è¿™é‡Œã€‚
ä½ æ°¸è¿œåœ¨é£çš„å¿ƒé‡Œï¼Œæˆ–è®¸ä½ æœªæ›¾å¬è¿‡ä»–çš„å‘¼å£°ï¼Œä½†ä»–å´ä¸€ç›´é™ªä¼´ç€ä½ ã€‚
å› ä¸º
ä½ ä¸çŸ¥é“çš„æ˜¯ï¼Œä»–æ˜¯çœŸçš„å–œæ¬¢ä½ 
ä½ ä¸çŸ¥é“çš„æ˜¯ï¼Œä»–æƒ³ä½ å´ä¸èƒ½å‘Šè¯‰ä½ 
ä½ ä¸çŸ¥é“çš„æ˜¯ï¼Œä»–æ€»ä¼šåœ¨å¤œé‡Œçœ‹æœ›ä½ 
ä½ ä¸çŸ¥é“çš„æ˜¯ï¼Œä»–åœ¨æ¯ä¸ªå¿§ä¼¤çš„é›¨å­£é‡Œéƒ½å’Œä½ åœ¨ä¸€èµ·
ä»–ä¸èˆå¾—ç¦»å»
ä»–æ‹¨æ’©ç€ä½ çš„å‘ä¸ï¼Œå€¾è§†ä»–æš®æ‹çš„å®¹é¢œ
å¬é‚£é…’çªå™è¿°ç€çš„æ•…äº‹
çœ‹é‚£çœ¼çœ¸å‡è§†ç€çš„é£æ™¯
æ„Ÿå—é‚£çº¤ç»†æŒ‡å°–è½»è§¦çš„èŠ±
ä½†å´ä¸‹èµ·äº†é›¨æ¥
ä»–å‘¼å•¸ç€è¿‡æ¥ï¼Œä»–æƒ³æŠ±ç€ä½ ï¼Œä¸ºä½ æŠµæŒ¡é‚£åˆºéª¨çš„é›¨ã€‚
é›¨æ·‹æ¹¿äº†ä½ èº«ï¼Œå´åˆºç—›äº†ä»–çš„å¿ƒ
æœ€å
ä½ èµ°äº†ï¼Œä¸æ›¾å›æœ›
åªæ˜¯é£ä¾ç„¶åœç•™
æˆ‘æ¼«æ­¥åœ¨é›¨åçš„è·¯ï¼Œé‚£æ»´é›¨æ‹¨å¼„ç€æ¹–é¢
å¬ç€é£ç»™æˆ‘è®²è¿°ç€ä»–çš„æ•…äº‹
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[jsè§£ælibå›¾ç‰‡æ–‡ä»¶åˆ—è¡¨]]></title>
        <id>bbk-bbimg-js</id>
        <link href="https://wener.me/story/bbk-bbimg-js"/>
        <updated>2011-09-15T21:51:00.000Z</updated>
        <summary type="html"><![CDATA[åŸå¸–é“¾æ¥]]></summary>
        <content type="html"><![CDATA[<p>åŸå¸–<strong><a href="http://club.eebbk.com/bbkbbs/showtopic/269578/1">é“¾æ¥</a></strong></p><p>ä»£ç å…¨éƒ¨ä¸ºçº¯åŸåˆ›ï¼Œç±»é‚£äº›ä¹Ÿéƒ½æ˜¯è‡ªå·±å†™çš„.
uiå†™çš„å¾ˆå·®ï¼Œè§‰å¾—éšä¾¿ã€‚
éœ€è¦æŠŠæ‰“å¼€çš„æ–‡ä»¶æ”¾åœ¨srcæ–‡ä»¶å¤¹ä¸‹ï¼
è¯·ç”¨éieå†…æ ¸æ‰“å¼€ï¼Œå› ä¸ºéœ€è¦canvasæ ‡ç­¾çš„æ”¯æŒï¼Œä¹Ÿæ²¡æœ‰å¯¹ieè¿›è¡Œå…¼å®¹</p><p>åœ¨ç½‘é¡µä¸­æ‰“å¼€BBImg.htmlå°±okäº†ï¼
å¿…é¡»è¦æ±‚æœ‰æœåŠ¡å™¨,ä¹Ÿå°±æ˜¯é“¾æ¥çš„å½¢å¼å¿…é¡»æ˜¯ <code>http://</code>xxxx,è€Œä¸æ˜¯<code>file://</code>.
å› ä¸ºä½¿ç”¨ä¸ªajax.</p><p>ä½œè€…ï¼šå°æ–‡å„¿</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å››ä¸ªå‡½æ•°å’Œbbç¼–è¾‘å™¨]]></title>
        <id>bbk-libs</id>
        <link href="https://wener.me/story/bbk-libs"/>
        <updated>2011-04-24T01:34:00.000Z</updated>
        <summary type="html"><![CDATA[Libå›¾ç‰‡é€‰æ‹©]]></summary>
        <content type="html"><![CDATA[<p><img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/%E5%9B%9B%E4%B8%AA%E5%87%BD%E6%95%B0/Lib%E5%9B%BE%E7%89%87%E9%80%89%E6%8B%A9.gif" alt="Libå›¾ç‰‡é€‰æ‹©"/>
<img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/%E5%9B%9B%E4%B8%AA%E5%87%BD%E6%95%B0/%E8%8F%9C%E5%8D%95%E5%BC%8F%E9%80%89%E6%8B%A9.jpg" alt="èœå•å¼é€‰æ‹©"/>
<img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/%E5%9B%9B%E4%B8%AA%E5%87%BD%E6%95%B0/%E9%A1%B5%E9%9D%A2%E8%B0%83%E6%95%B4-%E5%9B%BE%E7%89%87%E7%BC%96%E8%BE%91.gif" alt="å›¾ç‰‡è°ƒæ•´å‡½æ•°"/></p><p>åŸå¸–<strong><a href="http://club.eebbk.com/bbkbbs/showtopic/257169/1">é“¾æ¥</a></strong></p><pre><code>&#x27;//=========ShowPic_Alpha==========//
&#x27;//=========å¸¦Alphaæ˜¾ç¤ºå›¾ç‰‡==========//
&#x27;ä½œè€… Wener
&#x27;è®ºå›Id a3160586 (club.eebbk.com   ç¼–ç¨‹åŒº)
&#x27;QQ 514403150

è¯´æ˜:
showpic_alpha( srcPage, srcPic, alPic, DisX, DisY, Wid, Hgt, srcX, srcY, showMODE)
ç›¸æ¯”showpicå‡½æ•°ï¼Œåªå¤šäº†ä¸€ä¸ªalPicå‚æ•° å…¶ä»–éƒ½æ˜¯ä¸€æ ·çš„
è¿™ä¸ªæ˜¯alphaçš„é€šé“å›¾ ç”±äºbbçš„æ˜¾ç¤ºé¢œè‰²æ•°ç›®æœ‰é™ï¼Œä¸ä¼šåœ¨ç”µè„‘ä¸Šçœ‹èµ·æ¥ä¸€æ ·å¹³æ»‘çš„

&#x27;//=========LibSel==========//
&#x27;//=========Libå›¾ç‰‡é€‰æ‹©å‡½æ•°==========//
&#x27;ä½œè€… Wener
&#x27;è®ºå›Id a3160586 (club.eebbk.com   ç¼–ç¨‹åŒº)
&#x27;QQ 514403150

è¯´æ˜ï¼šè¿™ä¸ªå‡½æ•°å°±æ˜¯é€‰æ‹©Libä¸­çš„æŸä¸€å¼ å›¾ç‰‡ï¼Œç„¶åè¿”å›å›¾ç‰‡å¥æŸ„
è¿™ä¸ªå‡½æ•°å…·æœ‰æ¯”è¾ƒå¥½çš„UIï¼Œç”¨èµ·æ¥æ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒå¥½çš„
è¿™ä¸ªå‡½æ•°è¦ä¾èµ–äºgetLibCount ï¼Œ getInput è¿™ä¸¤ä¸ªå‡½æ•°
LibSel( Lib_Name$)
è¿™ä¸ªå‡½æ•°åªéœ€è¦LIBæ–‡ä»¶åè¿™ä¸ªå‚æ•°



&#x27;//=========Selector==========//
&#x27;//=========èœå•å¼é€‰æ‹©==========//
&#x27;ä½œè€… Wener
&#x27;è®ºå›Id a3160586 (club.eebbk.com   ç¼–ç¨‹åŒº)
&#x27;QQ 514403150

è¯´æ˜ï¼šè¿™ä¸ªå‡½æ•°å°±åƒæ‰‹æœºçš„èœå•é‚£ç§æ ·ï¼Œå°±æ˜¯é€‰æ‹©çš„
Selector_Str$è¿™ä¸ªä¸ºä¸€ä¸ªæ•°ç»„ï¼Œè°ƒç”¨å‰è¯·ä¸ºå…¶èµ‹å€¼å­—ç¬¦ä¸²
Selector_StrCount æ˜¯æ€»çš„é€‰é¡¹ä¸ªæ•°
è°ƒç”¨ Selector( MustChoiceOne)
MustChoiceOneå‚æ•°æ˜¯æ˜¯å¦å¿…é¡»é€‰æ‹©ä¸€ä¸ª 1 ä¸ºæ˜¯ ä¹Ÿå°±æ˜¯æ˜¯è¯´ä¸èƒ½é€€å‡º
MustChoiceOneä¸º0çš„æ—¶å€™  é€€å‡ºè¿”å›1 ç¡®è®¤è¿”å›é€‰é¡¹åœ¨Selector_Strä¸­çš„ä½ç½®
ä¹Ÿå°±æ˜¯Selector_Str$( i)
å…·ä½“è¯·çœ‹ eg.Selector.bas

&#x27;//=========PageAdjust==========//
&#x27;//=========é¡µé¢è°ƒæ•´å‡½æ•°==========//
&#x27;ä½œè€… Wener
&#x27;è®ºå›Id a3160586 (club.eebbk.com   ç¼–ç¨‹åŒº)
&#x27;QQ 514403150

è¯´æ˜ï¼šè¿™ä¸ªå‡½æ•°å°±åƒphotoshopçš„ä¸€äº›åŠŸèƒ½æ ·
å¹³è¡¡é¢œè‰²ï¼Œè°ƒæ•´rbgé€šé“ï¼Œè°ƒæ•´æ˜æš—ï¼Œä½¿é¡µé¢é»‘ç™½åŒ–
å¯é•œåƒï¼Œæ—‹è½¬180Â°å›¾åƒç­‰ï¼Œæ›´å¤šè¯·åœ¨ä½¿ç”¨çš„æ—¶å€™å‘ç°å§
è¿™ä¸ªå‡½æ•°ç”Ÿæˆçš„binæ–‡ä»¶è¾ƒå¤§ï¼Œ300å¤škï¼Œå› ä¸ºæœ‰ç•™äº†å¤§éƒ¨åˆ†ç©ºç™½


é¢å¤–è¯´æ˜ï¼š
é™¤äº†PageAdjustå¤–ï¼Œå…¶ä»–ä¸‰ä¸ªå‡½æ•°éƒ½éœ€è¦SYS_Fe$ è¿™ä¸ªå…¨å±€å˜é‡
è¿™ä¸ªæ„Ÿè§‰è¿™ä¸ªæ˜¯åº”è¯¥éƒ½è¦æœ‰çš„ä¸€ä¸ªå˜é‡ï¼Œæ‰€ä»¥å°±éƒ½æ”¾åœ¨äº†å…¨å±€
IF GetEnv!() = Env_SIM Then
    SYS_Fe$ = &quot;.rlb&quot;
Else
    SYS_Fe$ = &quot;.lib&quot;
End IF
ä¹Ÿå°±æ˜¯åˆ¤æ–­ä¸­è½½å…¥ä»€ä¹ˆæ ¼å¼çš„
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[BBæ€¥é€Ÿæˆªå›¾]]></title>
        <id>bbk-quick-screenshot</id>
        <link href="https://wener.me/story/bbk-quick-screenshot"/>
        <updated>2011-03-22T01:56:00.000Z</updated>
        <summary type="html"><![CDATA[è¿è¡Œæˆªå›¾]]></summary>
        <content type="html"><![CDATA[<p><img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/BB%E6%80%A5%E9%80%9F%E6%88%AA%E5%9B%BE/%E6%88%AA%E5%9B%BE.gif" alt="è¿è¡Œæˆªå›¾"/></p><p>åŸå¸–<a href="http://club.eebbk.com/bbkbbs/showtopic/255787/1">é“¾æ¥</a></p><pre><code>&#x27;//=========æˆªå›¾ç±»å‡½æ•°v1.0==========//
&#x27;ä½œè€… Wener
&#x27;è®ºå›Id a3160586 (club.eebbk.com   ç¼–ç¨‹åŒº)
&#x27;QQ 514403150
&#x27;date: 1:56 AM 2011-3-22
ç‰¹è‰²ï¼š
æˆªå›¾å‡½æ•°æå…¶çš„å¿«  1.5s &gt; å¹³å‡
å¯ä¿å­˜ä¸ºlibå’Œbmp
supperå¯ç”±ç”¨æˆ·è‡ªç”±é€‰æ‹©è®¾ç½®ï¼Œå¸¦æœ‰è¾ƒå¥½çš„ui
æºä»£ç å…¬å¼€ï¼Œå¯ä»»æ„ä½¿ç”¨åˆ°ä½ ä»¬è‡ªå·±çš„ä½œå“ä¸­

ä½¿ç”¨è¯·ä¿ç•™åŸä½œè€…ä¿¡æ¯ï¼Œè°¢è°¢ ^o^
ï¼›==========================================
å‡½æ•°è¯´æ˜ï¼š
æˆªå›¾ç±»å‡½æ•°ï¼Œæ•…åæ€è®®ã€‚
å…±æœ‰ä¸‰ä¸ªå‡½æ•°
é»˜è®¤å…¨å±æˆªå›¾
ScreenPrint_ALL( ScrP_p_page, ScrP_p_BMP_FileName$)
ScrP_p_page æˆªå›¾é¡µé¢
ScrP_p_BMP_FileName$ ä¿å­˜ä¸ºçš„bmpæ–‡ä»¶åã€‚è‹¥ä¿ä¸ºlibåˆ™å‚æ•°ä¸º &quot;&quot; ç©ºå­—ç¬¦
çŸ©å½¢æ¡†æˆªå›¾
ScreenPrint_Rect( ScrP_p_PAGE, ScrP_p_x, ScrP_p_y, ScrP_p_Wid, ScrP_p_Hgt, ScrP_p_BMP_FileName$)
ä¸¤ä¸ªå‚æ•°åŒä¸Š
ScrP_p_x, ScrP_p_y æˆªå›¾èµ·ç‚¹
ScrP_p_Wid, ScrP_p_Hgt æˆªå›¾å®½é«˜
ç”¨æˆ·è‡ªå®šä¹‰è£å‰ªæˆªå›¾
ScreenPrint_Supper( ScrP_p_page)
ScrP_p_page æˆªå›¾é¡µé¢

ï¼›==========================================
è¯¦ç»†è¯´æ˜ï¼š
æ­¤ç±»å‡½æ•°éƒ½éœ€è¦ä¸€ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œå¯åœ¨constä¸­è‡ªå®šä¹‰
const ScreenPrint_Use_File_ID = ï¼Ÿï¼Ÿ


ScreenPrint_ALLå’ŒScreenPrint_Rectå‡½æ•°è¦æ±‚è¾ƒä½ï¼Œä»£ç ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œå› æ­¤è‹¥è¦æ±‚ä¸é«˜ï¼Œåˆ™å¯ä»¥ä»…ä»…ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°å°±å¯ä»¥äº†

ScreenPrint_Supperè¦æ±‚è¾ƒé«˜ï¼Œå¸¦uiï¼Œå…±éœ€è¦4ä¸ªé¡µé¢å¥æŸ„ï¼Œuiç•Œé¢æ˜¯è‡ªåŠ¨åˆ¤åˆ«ä½¿ç”¨ç¯å¢ƒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´è‡ªåŠ¨é€‰æ‹©è¯»å–libæˆ–è€…æ˜¯rlbã€‚
supperå‡½æ•°ä¸­åŒ…å«äº†å¤§é‡è®¡ç®—ï¼Œéš¾ä»¥é¿å…çš„æœ‰ç‚¹ç‚¹å¡ï¼Œåœ¨æ·¡å‡ºçš„æ—¶å€™æœ‰ç‚¹å¡ã€‚

å‹ç¼©åŒ…ä¸­çš„ PT_res.lib å’Œ PT_res.rlb éƒ½æ˜¯æµ‹è¯•æ—¶ä½¿ç”¨çš„ ï¼Œä¸Super_example.bas æœ‰å…³

æºä»£ç ä¸­çš„å˜é‡å‘½åæœ‰äº›æœ‰ç‚¹æ··ä¹±ã€‚
æœ‰ Scrp_ï¼ˆscreenPrintï¼‰å¼€å¤´çš„,æœ‰screenPrint_å¼€å¤´çš„ï¼Œæœ‰screenCaptureå¼€å¤´çš„ ä¸‰ä¸ªå‡½æ•°.basè¿™ä¸ªæ–‡ä»¶ä¸­å·²ç»ä¿®æ­£
å…¶å®æˆ‘é‚£æ ·å‘½åä¹Ÿæ˜¯ä¸ºäº†åœ¨åŒºåˆ«æ±‡ç¼–å’Œbb  bbä¸­æ˜¯scrp æ±‡ç¼–ä¸­æ˜¯ screenPrint.  screenCaptureåªæœ‰ä¸¤æ¬¡

åœ¨ä½¿ç”¨çš„æ—¶å€™è¯·å°†ScreenPrint.libä¸€èµ·å¤åˆ¶ï¼Œè¿™ä¸ªæ–‡ä»¶åªæ˜¯ä¸ªç©ºæ–‡ä»¶ï¼Œåªæ˜¯ä¸ºäº†ä¸ºlibçš„å­˜å‚¨â€œå åœ°ç›˜â€ï¼Œå­˜æ”¾ç´¢å¼•ã€‚è½¬æ¢ä¸ºlibçš„ç»“æœéƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å½“ä¸­ã€‚
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è¿˜åŸçš„Bdaè®¡ç®—å™¨]]></title>
        <id>bbk-bda-calc</id>
        <link href="https://wener.me/story/bbk-bda-calc"/>
        <updated>2011-03-11T13:44:00.000Z</updated>
        <summary type="html"><![CDATA[é»‘è‰²ä¸»é¢˜æˆªå›¾]]></summary>
        <content type="html"><![CDATA[<p><img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/%E8%AE%A1%E7%AE%97%E5%99%A8/Cal.gif" alt="é»‘è‰²ä¸»é¢˜æˆªå›¾"/>
<img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/%E8%AE%A1%E7%AE%97%E5%99%A8/B_Cal.gif" alt="è“è‰²ä¸»é¢˜æˆªå›¾"/></p><p>åŸå¸–<a href="http://club.eebbk.com/bbkbbs/showtopic/255060/1">é“¾æ¥</a></p><pre><code>åˆšå¼€å§‹çœ‹åˆ°å›¾ç‰‡çš„æ—¶å€™ä¼šä¸ä¼šè§‰å¾—æ˜¯Bdaå‘¢ï¼Ÿ

 &#x27;//////////////////////////
&#x27;////////è¿˜åŸdeè®¡ç®—å™¨//////
&#x27;////////ä½œè€…id:a3160586///
&#x27;////////ä½œè€…:Wener////////
&#x27;////////=================/
&#x27;////////æ¬¢è¿è®¿é—®//////////
&#x27;////////club.eebbk.com////
&#x27;//////////////////////////

å›¾ç‰‡éƒ½æ˜¯ç”¨çš„å’Œå°æœºä¸Šä¸€æ ·çš„å›¾ç‰‡
å±•ç¤ºçš„æ•ˆæœä¹Ÿå’Œå°æœºä¸ŠåŸºæœ¬ç›¸åŒï¼Œå¥½åƒåªæ˜¯æ²¡æœ‰å‡ºæ¥errorçš„æƒ…å†µ
è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹ç¼ºç‚¹ï¼Œå°±æ˜¯å¤„ç†å°æ•°çš„æ—¶å€™ä¸æ˜¯å¾ˆæœ‰åŠ›ï¼Œæœ‰æ—¶ä¼šå‡ºç°è¯¯å·®

ä½ å¯ä»¥ç›´æ¥æŠŠå…¨éƒ¨ä»£ç å¤åˆ¶åˆ°è‡ªå·±çš„ä»£ç ä¸­è¿›è¡Œè°ƒç”¨ Cal_Calculator( the)
theä¸ºå‡çš„æ—¶å€™æ˜¯é»‘è‰²ä¸»é¢˜ï¼Œä¸ºçœŸçš„æ—¶å€™æ˜¯è“è‰²ä¸»é¢˜
å˜é‡çš„å‘½åéƒ½æ˜¯ç”¨Cal_å¼€å¤´çš„ï¼Œåªæœ‰å‡ ä¸ªå…¬ç”¨çš„å‡½æ•°æ‰æ²¡é‚£æ ·å¤„ç†

declare function str2float!( str2float_p_fstr$) æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºæµ®ç‚¹æ•°
declare function float2str$( float2str_p_flo!) æŠŠæµ®ç‚¹æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²  è¿™é‡Œæœ‰æ—¶å€™ä¼šäº§ç”Ÿè¯¯å·®
declare function ShowFloat( ShowFloat_p_hPage, ShowFloat_p_hImg, ShowFloat_p_x, ShowFloat_p_y, ShowFloat_p_Float$) ç”¨å›¾ç‰‡æ¥æ˜¾ç¤ºæµ®ç‚¹æ•°çš„å­—ç¬¦ä¸²

è¿™å‡ ä¸ªå‡½æ•°æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå¯ä»¥ä»»æ„è°ƒç”¨ï¼Œä½†æ˜¯è¿™ä¸ªè®¡ç®—å™¨å¿…é¡»ä¾èµ–è¿™ä¸‰ä¸ªå‡½æ•°

è°¢è°¢å¤§å®¶å‚è€ƒå­¦ä¹ ~
æœ‰æ„å­¦ä¹ çš„å¯ä»¥çœ‹çœ‹ä¸‹é¢

åŸå…ˆæˆ‘åœ¨æƒ³ç€å†™è¿™ä¸ªçš„æ—¶å€™ï¼Œæƒ³çš„æ˜¯å¤šä¹ˆçš„ç®€å•~~~å½“åšèµ·æ¥çš„æ—¶å€™æ‰å‘ç°ï¼ŒåŸæ¥~ä¸åªæ˜¯æƒ³çš„é‚£ä¹ˆç®€å•~
instrï¼Œåœ¨ç”µè„‘ä¸Šï¼Œæ²¡æŸ¥æ‰¾åˆ°çš„æ—¶å€™æ˜¯è¿”å›0çš„ï¼Œè€Œåœ¨æœ€æ–°çš„bdaä¸Šæ˜¯è¿”å›-1
æ‰€ä»¥ è¿˜æ˜¯ç”¨ &lt; 1 æˆ–è€… &gt; 0 æ¥åˆ¤æ–­æ˜¯å¦æŸ¥æ‰¾åˆ°è¦æ–¹ä¾¿äº›
æˆ‘ä¸çŸ¥é“å°æœºä¸Šçš„leftèƒ½ç”¨ä¸ï¼Œæ‰€ä»¥å…¨éƒ¨æ˜¯ç”¨midä»£æ›¿çš„

s! = 0.0202
print s! * 100000
ä½ çŒœç»“æœæ˜¯å¤šå°‘~ï¼Ÿ


2019.999878
è¿™å°±æ˜¯æˆ‘ä¹‹æ‰€ä»¥ä¸èƒ½ä¿è¯ç²¾ç¡®çš„åŸå› ï¼Œåœ¨ç¨‹åºä¸­æˆ‘ç•¥åŠ å¤„ç†è¿‡äº†ï¼Œä½†æ˜¯è¿˜æ˜¯å…ä¸äº†æœ‰å‡ºé”™æƒ…å†µçš„
ç‰¹åˆ«æ˜¯å¤„ç†å¾ˆå¤šå°æ•°çš„æ—¶å€™ã€‚ã€‚ã€‚ã€‚
è¦æ˜¯å‡ºé”™äº†ä¹Ÿåªèƒ½æŒ‰cå–æ¶ˆäº†ä»æ¥~

åœ¨å¤„ç†é”®ç›˜æŒ‰é”®çš„æ—¶å€™ï¼Œè§‰å¾—æˆ‘çš„é‚£ä¸ªæƒ³æ³•æ˜¯ å¾ˆä¸é”™çš„ï¼Œå¤§å®¶å¯ä»¥å€Ÿé‰´å€Ÿé‰´ï¼Œå°±æ˜¯~~~~~~
çœ‹ä»£ç å§ï¼Œå˜¿å˜¿  ä¿è¯è¶…è¶Šå‰äººï¼Œæ­£åœ¨åšçš„imeä¹Ÿæ˜¯ç”¨çš„è¿™æ ·çš„æ€è·¯ã€‚ç”³è¯·ä¸ªä¸“åˆ©å“¦

è¿™é‡Œå¯¹çƒ­è¡·äºæ±‡ç¼–çš„äººè¯´å‡ å¥è¯ï¼Œå…¶å®æœºå™¨å¹¶æ²¡æœ‰ä½ ä»¬æƒ³çš„é‚£ä¹ˆä¸å ª~
æˆ‘è§‰å¾—é€Ÿåº¦å¯¹æˆ‘æ¥è¯´è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œç‰¹åˆ«æ˜¯æˆ‘åœ¨å±å¹•ä¸Šä¹±æŒ‰çš„æ—¶å€™ï¼Œå› ä¸ºå¤ªå¿«ï¼Œå¯¼è‡´å¾ˆå¤šé”®è¿˜æ²¡æ¢å¤çš„æ—¶å€™éƒ½åˆæŒ‰ä¸‹äº†ï¼Œæ¢å¤æ˜¯40mså»¶æ—¶çš„ï¼Œå¯æƒ³ï¼Œå…¶å®é€Ÿåº¦è¿˜æ˜¯å¤Ÿäº†å•Š~
æ±‡ç¼–ä½œä¸ºè¾…åŠ©ï¼Œæ˜¯æœ€ä½³çš„é€‰æ‹©ï¼Œæˆ‘å°±æ˜¯è¿™æ ·ç”¨çš„ï¼ŒæŠŠä¸€äº›è¦é‡å¤ç”¨åˆ°çš„å­è¿‡ç¨‹æ”¾å¼€ï¼Œç”¨callæ¥è°ƒç”¨çš„ï¼Œè¿™æ ·å¯çœ‹æ€§è¦é«˜ä¸€ç‚¹ç‚¹~æœ¬æ¥è¿‡ç¨‹ä¹Ÿä¸é•¿ï¼Œæ²¡å¿…è¦ç”¨ä¸€ä¸ªå‡½æ•°ã€‚

å¥½äº†å°±åˆ°è¿™é‡Œå§

é¢„çŸ¥æ›´å¤šï¼Œè¯·çœ‹ä»£ç 
æœ¬äººqqï¼š514403150
æ¬¢è¿è®¨è®ºäº¤æµ
^.^
</code></pre>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å›šå¾’å›°å¢ƒ]]></title>
        <id>bbk-game-prisoner-dilemma</id>
        <link href="https://wener.me/story/bbk-game-prisoner-dilemma"/>
        <updated>2011-03-05T21:31:00.000Z</updated>
        <summary type="html"><![CDATA[æ¸¸æˆæˆªå›¾]]></summary>
        <content type="html"><![CDATA[<p><img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/%E5%9B%9A%E5%BE%92%E5%9B%B0%E5%A2%83/QT.gif" alt="æ¸¸æˆæˆªå›¾" title="è¿è¡Œæ•ˆæœ"/></p><p>åŸå¸–<strong><a href="http://club.eebbk.com/bbkbbs/showtopic/254672/1">è¿æ¥</a></strong></p><p>æ­¤æ¸¸æˆç”±è‘—åçš„å¿ƒç†æµ‹è¯•â€œå›šå¾’å›°å¢ƒâ€å¯å‘åˆ¶ä½œã€‚</p><p>æ¸¸æˆè§„åˆ™æå…¶ç®€å•ã€‚
åˆå§‹åˆ†æ•°ä¸º0åˆ†ï¼Œç”±ç©å®¶ä¸æ–‡ï¼ˆç”µè„‘ï¼‰å¯¹æˆ˜</p><p>å¾—åˆ†è§„åˆ™ï¼š</p><ul><li>åŒæ–¹éƒ½åˆä½œ å„å¾—3åˆ†</li><li>åŒæ–¹éƒ½èƒŒå› å„å¾—1åˆ†</li><li>ä¸€æ–¹åˆä½œä¸€æ–¹èƒŒå› èƒŒå›çš„5åˆ† åˆä½œçš„0åˆ†</li></ul><p>æ¸¸æˆæ§åˆ¶ï¼š</p><ul><li>ç‚¹å‡»å±€æ¬¡ä¸Šé™è®¾ç½®æ¬¡æ•°ï¼Œæ¸¸æˆæ—¶å¯ä»¥è®¾ç½®</li><li>ç‚¹å‡»å¸®åŠ©æŸ¥çœ‹å¸®åŠ©</li><li>ç‚¹å‡»å…³äºæŸ¥çœ‹å…³äº</li><li>ç‚¹å‡»å¼€å§‹å³å¼€å§‹æ¸¸æˆ</li><li>å½“æ¸¸æˆä¸­æ—¶ç‚¹å‡»å¼€å§‹æ¸¸æˆå°†ä¼šè¯¢é—®æ˜¯å¦é‡æ–°å¼€å§‹æ¸¸æˆ</li></ul><p>åŸæœ¬çš„æ¸¸æˆå›¾ç‰‡æ˜¯æ›´å¥½çœ‹çš„ï¼ˆåœ¨ç”µè„‘ä¸Šï¼‰ï¼Œä½†æ˜¯ä¸ºäº†åœ¨æœºå™¨ä¸Šçœ‹èµ·æ¥èƒ½çœ‹ï¼Œå°±éƒ½è°ƒæš—äº†ã€‚</p><p>ä½œè€…
: Wener</p><p>è®ºå›Id
: å°æ–‡å„¿</p><p>æ¬¢è¿è®¿é—®  club.eebbk.com</p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¹³ç”Ÿç¬¬ä¸€ä¸ªæ¸¸æˆ - è¶£å‘³æ‹¼å›¾]]></title>
        <id>bbk-first-game</id>
        <link href="https://wener.me/story/bbk-first-game"/>
        <updated>2011-02-04T02:21:00.000Z</updated>
        <summary type="html"><![CDATA[åŸå¸–å­é“¾æ¥]]></summary>
        <content type="html"><![CDATA[<p>åŸå¸–å­<a href="http://club.eebbk.com/bbkbbs/showtopic/252670/1">é“¾æ¥</a></p><p><img src="https://github.com/wenerme/wener/raw/master/story/%E6%88%91%E9%82%A3%E4%BA%9B%E6%AD%A5%E6%AD%A5%E9%AB%98%E7%9A%84%E6%95%85%E4%BA%8B/%E8%B6%A3%E5%91%B3%E6%8B%BC%E5%9B%BE/%E8%B6%A3%E5%91%B3%E6%8B%BC%E5%9B%BE.gif" alt="æ¸¸æˆæˆªå›¾" title="è¿è¡Œæ•ˆæœ"/></p><p>ç©æ³•å’Œæ‰‹æœºä¸Šçš„é‚£ç§æ‹¼å›¾ç›¸å·®æ— å‡ </p><p>ä¸åŒçš„æ˜¯ï¼šæ¯æ¬¡çš„ç¼ºå°‘ä½ç½®æ˜¯éšæœºçš„ï¼Œä¸åƒæ‰‹æœºä¸Šçš„é‚£ä¹ˆæ­»æ¿</p><p>å¯è‡ªå®šä¹‰å…³å¡ï¼Œè‡ªå·±ä¿®æ”¹æ¸¸æˆè„šæœ¬ï¼Œåˆ¶ä½œç‰¹å®šå…³å¡ã€‚
è¯¦ç»†çš„è¯·çœ‹æˆ‘åœ¨è®ºå›çš„å‘å¸–</p><p>æ¸¸æˆæ§åˆ¶ï¼š</p><ul><li>åœ¨ä¸»èœå•æ—¶ å½“æ²¡æœ‰å­˜æ¡£æ—¶ä¸ä¼šç»§ç»­æ¸¸æˆ</li><li>åœ¨ä¸»èœå•æ—¶ï¼Œé€€å‡ºé”®æ˜¯é€€å‡º</li><li>åœ¨æ¸¸æˆä¸­æ—¶ é€€å‡ºé”®ï¼ˆå·¦è½¯ä»¶ï¼‰æ˜¯è¿”å›ä¸Šä¸€æ­¥</li><li>ç‚¹å‡»ç¼©ç•¥å›¾ç§‘æŸ¥çœ‹å…¨å›¾</li><li>é”®ç›˜å’Œå±å¹•è§¦æ‘¸æ§åˆ¶ç§»åŠ¨</li><li>æ¸¸æˆæ—¶å³ä¸‹è§’æœ‰ä¸ªèœå•æ¡ï¼Œç‚¹å‡»å³å±•å¼€ æœ‰é€€å‡ºå’Œä¿å­˜é€‰é¡¹</li></ul><p>ä½œè€…
: Wener</p><p>è®ºå›Id
: å°æ–‡å„¿</p><p>æ¬¢è¿è®¿é—®  club.eebbk.com</p><h2>å¦‚ä½•åˆ¶ä½œå…³å¡</h2><p>å­˜æ”¾å›¾ç‰‡çš„æ–‡ä»¶æ˜¯ PT_res.lib</p><p><img src="http://upload.eebbk.net/UploadFile/2011-2/2011242274888328.jpg" alt="å‘½åæ ¼å¼"/>
ä»¥â€œ_sâ€ç»“å°¾çš„éƒ½æ˜¯ç¼©ç•¥å›¾ï¼Œä¹Ÿå°±æ˜¯ç¬¬ 2nå¼ æ˜¯æ‹¼å›¾çš„å›¾ï¼Œè€Œ ç¬¬2n+1å¼ æ˜¯ç¬¬2né•¿çš„ç¼©ç•¥å›¾</p><p>å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p><p>å…³äºä¸€äº›ç‰¹æ®Šè®¾ç½®,åœ¨å‡½æ•° specialGate é‡Œé¢,æ¯”å¦‚åƒè¿™æ ·çš„å›¾</p><p><img src="http://upload.eebbk.net/UploadFile/2011-2/2011242305561677.jpg" alt="ç‰¹æ®Šè®¾ç½®ç±»å‹"/></p><p>æˆ‘éœ€è¦è§„å®šç”¨æˆ·ç¼ºå¤±çš„çš„æ˜¯å“ªä¸€å—æ‰èƒ½ç©çš„æ­£å¸¸ï¼Œæ‰€ä»¥åªéœ€è¦è¿™æ ·è®¾ç½®ï¼š</p><pre><code>if G_User_Gate = 6 then
    specialGate_var = 8
end if
</code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå…³å¡æ˜¯ç¬¬å…­å…³ï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾é‚£ä¸€å…³ï¼Œé‚£ä¹ˆæˆ‘æƒ³ç”¨æˆ·ç¼ºå¤±çš„æ˜¯ç¬¬8å—
æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå°å›¾ç‰‡æ˜¯ä»0å¼€å§‹çš„ï¼Œç¬¬8å—ä¹Ÿå°±æ˜¯æœ€å³ä¸‹è§’çš„é‚£ä¸€å—ã€‚</p><p>å¦‚æœæˆ‘æƒ³ç¬¬3å…³ç©å®¶ç¼ºå¤±çš„æ˜¯ç¬¬ 4å— é‚£ä¸ªä»£ç å°±æ˜¯</p><pre><code>if G_User_Gate = 3 then
    specialGate_var = 4
end if
</code></pre><p>å½“ç„¶æ˜¯å¯ä»¥å†™å¾ˆå¤šä¸ªè¿™æ ·çš„ã€‚</p><p>å¦‚æœæ˜¯å°ç”·ç”Ÿï¼Œå…¶å®å¯ä»¥æœ‰æ„çš„å¼„ç‚¹ä»€ä¹ˆç¤ºçˆ±çš„ã€‚ã€‚ã€‚ã€‚ä¸è¯´äº†</p><h2>ç»“å°¾</h2><p>è¿™ä¸ªæ¸¸æˆè¿˜ä¸æ˜¯å¾ˆå®Œç¾çš„ï¼Œå‚¨å­˜è¿˜ä¸å¤Ÿå®Œç¾ï¼Œç»“æ„è¿˜ä¸å¤Ÿå®Œç¾ï¼Œè¿‡å…³çš„åŠ¨ç”»æ²¡å†™è¿˜æœ‰äº›é—æ¼çš„åœ°æ–¹ã€‚
ä½†æ˜¯è‡³å°‘èƒ½ç©çš„ï¼Œè€Œä¸”ç•Œé¢è¿˜æ˜¯ pretty good çš„ã€‚å¾ˆå¤šåœ°æ–¹éƒ½æ˜¯ç”¨çš„ç¼“åŠ¨ï¼Œæœ¬æ¥å›¾ç‰‡çš„ç§»åŠ¨è¿˜æ˜¯æƒ³ç”¨ç¼“åŠ¨çš„ï¼Œä½†æ˜¯æˆ‘è§‰å¾—é‚£æ˜¯æ²¡äº‹æ‰¾äº‹~~</p><p>è¦æ˜¯è¿˜æœ‰å•¥éœ€æ±‚å¯ä»¥å°½é‡æå‡ºï¼Œä¿®æ”¹å°±æ˜¯äº†</p>]]></content>
    </entry>
</feed>