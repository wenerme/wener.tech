<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live & Life Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live & Life Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live & Life" href="/opensearch.xml"><title data-react-helmet="true">OpenVox VoxStack 网关分析 | Wener Live &amp; Life</title><meta data-react-helmet="true" property="og:title" content="OpenVox VoxStack 网关分析 | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="OpenVox 模拟网关分析"><meta data-react-helmet="true" property="og:description" content="OpenVox 模拟网关分析"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.f53ced8f.css">
<link rel="preload" href="/styles.d8725d4d.js" as="script">
<link rel="preload" href="/runtime~main.35644e2d.js" as="script">
<link rel="preload" href="/main.c18264be.js" as="script">
<link rel="preload" href="/1.05b166f5.js" as="script">
<link rel="preload" href="/2.bc343130.js" as="script">
<link rel="preload" href="/3.7534f379.js" as="script">
<link rel="preload" href="/ccc49370.21d8fed5.js" as="script">
<link rel="preload" href="/65eaf7fb.b699ca7f.js" as="script">
<link rel="preload" href="/88eeac37.074890cd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Wener</strong></a><a class="navbar__item navbar__link" href="/notes/java/java">笔记</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">工具</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Wener</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/java">笔记</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/story">故事</a></li><li class="menu__list-item"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/tool/network/ip-lookup">工具</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/how-i-build-my-site">我的站点是如何构建的？！</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/macos-wechat-backup">macOS 微信备份原理</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/agi-vs-ami-vs-ari">如何选择 Asterisk 接口</a></li><li class="sidebarItem_2T0D"><a aria-current="page" class="sidebarItemLink_v5H9 sidebarItemLinkActive_1anX" href="/story/openvox-gw-inside">OpenVox VoxStack 网关分析</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/story/fix-init-script">记录一次修复 init 脚本的经历</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">OpenVox VoxStack 网关分析</h1><div class="margin-vert--md"><time datetime="2021-03-25T00:00:00.000Z" class="blogPostDate_Ta7i">March 25, 2021  · 12 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"></div></div></header><section class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="openvox-模拟网关分析"></a>OpenVox 模拟网关分析<a class="hash-link" href="#openvox-模拟网关分析" title="Direct link to heading">#</a></h1><p>因为淘到一个二手 OpenVox 语音网关，就好奇&quot;里面&quot;长什么样。</p><p>Let&#x27;s find out.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="vs-agu-e2m0800"></a>VS-AGU-E2M0800<a class="hash-link" href="#vs-agu-e2m0800" title="Direct link to heading">#</a></h2><ul><li>VS - VoxStack 系列 - 模块化，热插拔</li><li>AGU - Analog Gateway - 模拟网关</li><li>软件 1.1.10</li><li>硬件 1.0.0</li></ul><p>一张卡两个模块</p><ul><li>E2M8HJ9DJ68P - VS 模块<ul><li>M83241G13 - Freescale Semiconductor - NXP<ul><li>Telecom Interface ICs C1K-LS102M 450MHz</li><li>IC C1K 450MHZ VOIP 448BGA</li></ul></li></ul></li><li>FXS-420 v1.2 - FS42HJ1KK4UY5<ul><li>S13215-FM</li></ul></li><li>FXO-400 v1.4 - FXODHJO2XT6L<ul><li>3019-FT 1718FF L0L4</li><li>Si3050-FT 1708EM F1Q5</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="web-管理界面"></a>Web 管理界面<a class="hash-link" href="#web-管理界面" title="Direct link to heading">#</a></h2><p>界面类似于官方演示 http://admin:<a href="mailto:admin@demo.openvox.cn" target="_blank" rel="noopener noreferrer">admin@demo.openvox.cn</a>:65327</p><p>通过开启 ssh, 账号名设置为 super 可获取到 root 权限，默认 SSH 端口 12345。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="硬件"></a>硬件<a class="hash-link" href="#硬件" title="Direct link to heading">#</a></h2><blockquote><p>未开箱，不一定准确。</p></blockquote><table><thead><tr><th>-</th><th>规格</th></tr></thead><tbody><tr><td>内存</td><td>120MB</td></tr><tr><td>CPU</td><td>ARMv6-compatible processor rev 5 (v6l)</td></tr></tbody></table><p><strong>Comcerto 1000 M83263G</strong></p><ul><li>ARM1136 - 2 Core, 650MHz</li><li>敏迅科技/Mindspeed Technologies 芯片</li><li>Mindspeed 主要提供 VoIP 领域解决方案 - DSP, LTE, Transcede</li><li>VoIP, Security Engine, PCIe 2, RGMII 2</li><li>SDRAM 16/32 bit DDR2-800/667/533</li><li>L1 缓存 2x(64K D$/64K I$)</li><li>VoIP 能力<ul><li>Field hardened voice features</li><li>World class acoustic echo cancellation technology</li><li>Narrow and wideband codecs</li><li>G.711, G.729, G.722, G.723.1, iLBC, T.38, G.729.1, G.722.2, AMR, AMR Wideband</li><li>Enhanced echo canceller, CID-I/II, VAD/CNG, AGC</li><li>3-Way conferencing</li></ul></li><li>TDM/PCM interface for glue-less VoIP support</li><li>2009 年</li></ul><p><strong>/proc/cpuinfo</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Processor   : ARMv6-compatible processor rev 5 (v6l)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">BogoMIPS    : 648.80</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Features    : swp half thumb fastmult edsp java</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CPU implementer : 0x41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CPU architecture: 6TEJ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CPU variant : 0x1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CPU part    : 0xb36</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CPU revision    : 5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Hardware    : Comcerto 1000 (EVM)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Revision    : 0000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Serial      : 0000000000000000</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="系统环境"></a>系统环境<a class="hash-link" href="#系统环境" title="Direct link to heading">#</a></h2><blockquote><p>底层基于 OpenWrt</p></blockquote><table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td>uname -a</td><td>Linux General 2.6.33.5 #4 Tue Aug 29 20:38:01 CST 2017 armv6l unknown</td></tr><tr><td>Busybox</td><td>1.4.2</td></tr><tr><td>Asterisk</td><td>1.8.20.0 / 1.8.X 发布于 2010-10-21 EOL 2015-10-21</td></tr><tr><td>dahdi</td><td>2.6.0</td></tr><tr><td>dcra</td><td>0.1.0</td></tr></tbody></table><blockquote><p>Busybox applet</p><p>[, [[, arping, ash, awk, awx, basename, bunzip2, bzcat, cat, chgrp, chmod, chown, chroot, clear, cp, crond, crontab, cut, date, df, dirname, dmesg, du, echo, egrep, env, expr, false, fgrep, find, free, getty, grep, gunzip, gzip, halt, head, hostid, hostname, httpd, id, ifconfig, init, insmod, ipkg, kill, killall, killall5, klogd, length, less, ln, lock, logger, login, logread, ls, lsmod, md5sum, mdev, mesg, mkdir, mkfifo, mknod, mktemp, mount, mv, nc, netmsg, netstat, nice, nslookup, passwd, pidof, ping, ping6, pivot_root, poweroff, printf, ps, pwd, rdate, reboot, renice, reset, rm, rmdir, rmmod, route, sed, seq, sh, sleep, sort, strings, stty, switch_root, sync, sysctl, syslogd, tail, tar, tee, telnet, test, time, top, touch, tr, traceroute, true, tty, udhcpc, umount, uname, uniq, uptime, vconfig, vi, watchdog, wc, wget, which, xargs, yes, zcat</p></blockquote><p><strong>cmdline</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">init=/etc/preinit ubi.mtd=4,2048 ubi.block=0,0 root=/dev/ubiblk0_0 ro rootfstype=squashfs hwaddress=eth0,a0:98:05:0e:04:8e hwaddress=eth2,00:03:7F:0B:00:01 console=ttyS0,115200 mtdparts=comcertonand:256k(uboot),128k(env),128K(param),4M(kernel),20M(root),4M(ekernel),20M(eroot),16M(config),-(system) partno=M83263G fppmode=1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>内核模块</strong></p><table><thead><tr><th>Module</th><th>Size</th><th>Used by</th></tr></thead><tbody><tr><td>wctdmc1k</td><td>30096</td><td>16</td></tr><tr><td>dcra</td><td>8524</td><td>1 wctdmc1k</td></tr><tr><td>dahdi</td><td>185948</td><td>17 wctdmc1k</td></tr><tr><td>krtpd</td><td>148520</td><td>0</td></tr><tr><td>csmencaps</td><td>14740</td><td>2</td></tr><tr><td>led_key</td><td>2500</td><td>4</td></tr></tbody></table><ul><li>dahdi<ul><li>wctdmc1k - OpenVox 模拟信号处理模块<ul><li>WCTDMC1K 设备驱动 - Mindspeed 开发的芯片驱动</li></ul></li><li>dcra - opvx_dcra - Access Dahdi Channel Registers through procfs</li></ul></li><li>csmencaps - 应该是 FX 处理相关模块</li><li>led_key - 应该是驱动面板 led 的</li><li>krtpd - Kernel RTP proxy for Asterisk - openvox 开发<ul><li>类似功能开源 <a href="https://github.com/sipwise/rtpengine" target="_blank" rel="noopener noreferrer">sipwise/rtpengine</a></li></ul></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">filename:       /lib/modules/2.6.33.5/dcra.ko</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">license:        GPL v2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">alias:          opvx_dcra</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">description:    Access Dahdi Channel Registers through procfs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">parmtype:       maxchan:int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">parmtype:       debug:int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">depends:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">vermagic:       2.6.33.5 mod_unload ARMv6</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>主要用户进程</strong></p><table><thead><tr><th>proc</th><th>desc</th></tr></thead><tbody><tr><td>/bin/php /my_tools/keeper</td><td></td></tr><tr><td>/bin/php /my_tools/logfile_monitor</td><td></td></tr><tr><td>/my_tools/checkasteriskstat</td><td></td></tr><tr><td>/my_tools/ntpclient</td><td>时间同步</td></tr><tr><td>/my_tools/resetkey</td><td></td></tr><tr><td>/my_tools/sys_restore</td><td></td></tr><tr><td>/my_tools/watchdog</td><td></td></tr><tr><td>/usr/sbin/crond</td><td>定时任务</td></tr><tr><td>/webservice/service</td><td></td></tr><tr><td>asterisk -g</td><td>asterisk 主进程</td></tr><tr><td>dropbear -p 12345</td><td>SSH 守护进程</td></tr><tr><td>lighttpd -f /etc/lighttpd.conf -m /usr/lib/lighttpd</td><td>Web 服务</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="系统目录"></a>系统目录<a class="hash-link" href="#系统目录" title="Direct link to heading">#</a></h3><ul><li>/www -&gt; /tmp/web/www</li><li>/tmp/web/www - cgi-bin css images index.html js lang - 管理应用</li><li>/data/<ul><li>info/</li><li>log/<ul><li>cdr.db - SQLite 通话记录</li><li>sys-log - 系统日志</li><li>update.txt - 更新日志</li></ul></li><li>sms/</li></ul></li><li>/my_tools/ - 系统工具</li><li>/webservice/service - 服务</li><li>/version<ul><li>version - 系统版本</li><li>build_time - 构建时间</li><li>cfg_ver_list - 配置版本 - 内容 <code>1.1.10</code></li><li>def_cfg.tar.gz - asterisk 配置备份</li><li>openvpn.sample_configs.tar.gz</li><li>sip_bendpoints.sample_configs.tar.gz</li></ul></li></ul><p><strong>系统挂载</strong></p><table><thead><tr><th>dev</th><th>size</th><th>path</th><th>fstype</th></tr></thead><tbody><tr><td>/dev/ubiblk0_0</td><td>16.1M</td><td>/</td><td>rootfs, squashfs</td></tr><tr><td>none</td><td>57.5M</td><td>/tmp</td><td>tmpfs</td></tr><tr><td>tmpfs</td><td>512.0k</td><td>/dev</td><td>tmpfs</td></tr><tr><td>/dev/mtdblock7</td><td>16.0M</td><td>/etc/asterisk</td><td>jffs2</td></tr><tr><td>/dev/mtdblock8</td><td>63.5M</td><td>/data</td><td>jffs2</td></tr></tbody></table><p><strong>mtd 分区</strong></p><table><thead><tr><th>mtd</th><th>fs</th><th>range</th><th>name</th><th>size</th><th>mount</th></tr></thead><tbody><tr><td>mtd0</td><td></td><td>0x000000000000-0x000000040000</td><td>uboot</td><td>256k</td><td></td></tr><tr><td>mtd1</td><td></td><td>0x000000040000-0x000000060000</td><td>env</td><td>128k</td><td></td></tr><tr><td>mtd2</td><td></td><td>0x000000060000-0x000000080000</td><td>param</td><td>128K</td><td></td></tr><tr><td>mtd3</td><td></td><td>0x000000080000-0x000000480000</td><td>kernel</td><td>4M</td><td></td></tr><tr><td>mtd4</td><td>ubi0</td><td>0x000000480000-0x000001880000</td><td>root</td><td>20MB</td><td>/</td></tr><tr><td>mtd5</td><td></td><td>0x000001880000-0x000001c80000</td><td>ekernel</td><td>4M</td><td></td></tr><tr><td>mtd6</td><td></td><td>0x000001c80000-0x000003080000</td><td>eroot</td><td>20M</td><td></td></tr><tr><td>mtd7</td><td>jffs2</td><td>0x000003080000-0x000004080000</td><td>config</td><td>16M</td><td>/etc/asterisk</td></tr><tr><td>mtd8</td><td>jffs2</td><td>0x000004080000-0x000008000000</td><td>system</td><td>63.5MB</td><td>/data</td></tr></tbody></table><p><strong>v1.1.23</strong></p><p>版本变化底层系统和软件均无变化，变化的主要是 php 代码和部分配置。</p><table><thead><tr><th>-</th><th>-</th></tr></thead><tbody><tr><td>uname -a</td><td>Linux General 2.6.33.5 #23 Mon Oct 14 17:12:50 CST 2019 armv6l unknown</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="安装包"></a>安装包<a class="hash-link" href="#安装包" title="Direct link to heading">#</a></h3><blockquote><p>ipkg list</p></blockquote><table><thead><tr><th>pkg</th><th>ver</th></tr></thead><tbody><tr><td>base-files-comcerto1000</td><td>14-unknown</td></tr><tr><td>busybox</td><td>1.4.2-1</td></tr><tr><td>cmm</td><td>7.00-5</td></tr><tr><td>cyclesoak</td><td>none-1</td></tr><tr><td>dropbear</td><td>0.49-1</td></tr><tr><td>ethtool</td><td>3-0</td></tr><tr><td>hotplug2</td><td>0.9-1</td></tr><tr><td>ip</td><td>2.6.23-1</td></tr><tr><td>kernel</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-csme</td><td>2.6.33.5+2.14.0-comcerto1000-1</td></tr><tr><td>kmod-fci</td><td>2.6.33.5+7.00-comcerto1000-1</td></tr><tr><td>kmod-fpp-csme</td><td>2.6.33.5+2.14.0-comcerto1000-1</td></tr><tr><td>kmod-fpp-driver</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-ipt-conntrack</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-ipt-core</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-matisse</td><td>1.00-0</td></tr><tr><td>kmod-nf-conntrack-netlink</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>kmod-nfnetlink</td><td>2.6.33.5-comcerto1000-1</td></tr><tr><td>ldd</td><td>14</td></tr><tr><td>libc</td><td>2.7-14</td></tr><tr><td>libcli</td><td>1.9.3-1</td></tr><tr><td>libgcc</td><td>4.1.2-14</td></tr><tr><td>libgdbm</td><td>1.8.3-0</td></tr><tr><td>libgmp</td><td>4.2.1-1</td></tr><tr><td>libiptc</td><td>1.4.7-1</td></tr><tr><td>libncurses</td><td>5.2-8</td></tr><tr><td>libnfconntrack</td><td>0.0.100</td></tr><tr><td>libnfnetlink</td><td>1.0.0</td></tr><tr><td>libopenssl</td><td>0.9.8q-1</td></tr><tr><td>libpcap</td><td>1.1.1-2</td></tr><tr><td>libpopt</td><td>1.7-4</td></tr><tr><td>libpthread</td><td>2.7-14</td></tr><tr><td>librt</td><td>2.7-14</td></tr><tr><td>libstdcpp</td><td>4.1.2-14</td></tr><tr><td>libxtables</td><td>1.4.7-1</td></tr><tr><td>msp-firmware</td><td>2.6.33.5+3.00.11-comcerto1000-1</td></tr><tr><td>mtd</td><td>5</td></tr><tr><td>ntpclient</td><td>2003_194-2</td></tr><tr><td>openssl-util</td><td>0.9.8q-1</td></tr><tr><td>ppp</td><td>2.4.3-7</td></tr><tr><td>ppp-mod-pppoe</td><td>2.4.3-7</td></tr><tr><td>rp-pppoe-client</td><td>3.8-1</td></tr><tr><td>udevtrigger</td><td>106-1</td></tr><tr><td>vapi</td><td>2.14.0</td></tr><tr><td>zlib</td><td>1.2.3-3</td></tr></tbody></table><p><strong>/etc/ipkg.conf</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/ipkg.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">src snapshots http://openwrt.org/downloads/snapshots/$S/packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dest root /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dest ram /tmp</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="系统工具my_tools"></a>系统工具/my_tools<a class="hash-link" href="#系统工具my_tools" title="Direct link to heading">#</a></h3><table><thead><tr><th>name</th><th>type</th><th>desc</th></tr></thead><tbody><tr><td>add_syslog</td><td>shell</td><td>log 到 syslog</td></tr><tr><td>addkey_client.sh</td><td>shell</td><td></td></tr><tr><td>addkey_server.sh</td><td>shell</td><td></td></tr><tr><td>astmanproxy</td><td></td><td>Asterisk Manager Proxy</td></tr><tr><td>checkAsteriskProc.sh</td><td>shell</td><td>检测并启动 dahdi 和 asterisk</td></tr><tr><td>checkCapture.sh</td><td>shell</td><td>dahdi 停止 dump 给定 chanid</td></tr><tr><td>checkStartFinish.sh</td><td>shell</td><td>sleep 1000s 重启</td></tr><tr><td>checkasteriskstat</td><td></td><td></td></tr><tr><td>cluster_mode</td><td>php</td><td>配置集群模式 - master, slave, standalone</td></tr><tr><td>cluster_slave</td><td></td><td>slave 应用</td></tr><tr><td>cpuusage</td><td></td><td>CPU 使用情况 - 类似 vmstat</td></tr><tr><td>eth_server.conf</td><td></td><td></td></tr><tr><td>fetch</td><td></td><td>解密固件</td></tr><tr><td>get_backport</td><td></td><td></td></tr><tr><td>gwping</td><td></td><td>eth ping 客户端</td></tr><tr><td>gwpingd</td><td></td><td>eth_server - eth_server.conf 为配置文件</td></tr><tr><td>if_monitor</td><td></td><td></td></tr><tr><td>keeper</td><td></td><td>保持进程存在 - 类似 supervisor</td></tr><tr><td>krtpd_cli</td><td></td><td></td></tr><tr><td>led_key.ko</td><td>内核模块</td><td></td></tr><tr><td>logfile_monitor</td><td>php</td><td>日志监控</td></tr><tr><td>lstast</td><td></td><td></td></tr><tr><td>net_tool</td><td></td><td>获取网卡信息</td></tr><tr><td>ntpclient</td><td></td><td>NTP 客户端</td></tr><tr><td>play_all_led</td><td></td><td>所有 LED 亮</td></tr><tr><td>process_cdr</td><td></td><td>CDR 处理</td></tr><tr><td>readDeviceID</td><td></td><td></td></tr><tr><td>resetkey</td><td></td><td></td></tr><tr><td>restore_cfg_file</td><td></td><td>恢复 asterisk 配置文件</td></tr><tr><td>safe_append_to_file</td><td></td><td></td></tr><tr><td>safe_reboot</td><td>shell</td><td>reboot</td></tr><tr><td>set_busytone.sh</td><td>shell</td><td>fxomon.conf busytone 设置</td></tr><tr><td>set_config</td><td></td><td>配置文件操作</td></tr><tr><td>set_default</td><td></td><td></td></tr><tr><td>set_registers.sh</td><td>shell</td><td>注册 dcra</td></tr><tr><td>sys_restore</td><td></td><td></td></tr><tr><td>unpack.sh</td><td>shell</td><td>用于解压固件 - unzip, md5 checmsum, 解密, unzip</td></tr><tr><td>watchdog</td><td></td><td></td></tr><tr><td>web_language_init</td><td>php</td><td>初始化 web 的语言</td></tr></tbody></table><ul><li>astmanproxy<ul><li><a href="https://github.com/davetroy/astmanproxy" target="_blank" rel="noopener noreferrer">davetroy/astmanproxy</a></li></ul></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固件解密 - 类似 fetch</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl enc -aes-256-cbc -d -in firmware.img -pass pass:O7r8yGv0cdlNM4lQ -out firmware.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 获取配置</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/my_tools/set_config /etc/asterisk/gw/web_server.conf get option_value general port </span><span class="token number" style="color:rgb(247, 140, 108)">2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="固件"></a>固件<a class="hash-link" href="#固件" title="Direct link to heading">#</a></h2><p>官网提供固件下载 <a href="https://www.openvox.cn/pub/firmwares" target="_blank" rel="noopener noreferrer">https://www.openvox.cn/pub/firmwares</a> , Web 界面支持上传或在线更新。</p><p>固件更新上传逻辑位于 /www/cgi-bin/php/system-tools.php 。
固件准备好后通过 /my_tools/unpack.sh 解压升级。</p><p><strong>固件格式</strong></p><ul><li>AnalogGateway-current.bin -&gt; tar.gz<ul><li>firmware/AnalogGateway-1.1.20.img.md5</li><li>firmware/AnalogGateway-1.1.20.img - openssl enc&#x27;d data with salted password</li></ul></li><li>AnalogGateway-1.1.20.img - 解密 -&gt; tar.gz<ul><li>AnalogGateway.img - 应该为系统镜像</li><li>key - AnalogGateway.img 的 md5 checksum</li><li>u-boot.bin - bootloader</li><li>upgrade.sh - 升级脚本</li></ul></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 下载</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -O https://www.openvox.cn/pub/firmwares/Analog%20Gateway/AnalogGateway-current.bin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固件为 tar.gz</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> zxvf AnalogGateway-current.bin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> firmware</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 固件经过 openssl 加密 - 解密后为 tar.tz</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl enc -aes-256-cbc -d -in AnalogGateway-*.img -pass pass:O7r8yGv0cdlNM4lQ -out AnalogGateway.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 解压获取实际内容</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> firmware</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> zxvf AnalogGateway.tar.gz -C firmware</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>固件升级</strong></p><p>固件升级使用 openvox 内置的自定义工具 /usr/bin/auto_update，主要涉及操作 mtd。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># -i 1 - 使用 ubiblk</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">auto_update -i </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># -b 升级 ubook</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">auto_update -b u-boot.bin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># -f 更新文件， -u 升级系统</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">auto_update -u -f AnalogGateway.img</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="集群模式"></a>集群模式<a class="hash-link" href="#集群模式" title="Direct link to heading">#</a></h2><p>运行模式通过 /my_tools/cluster_mode 配置。</p><p><strong>slave extension</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ini codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include sip_general.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include sip_endpoints.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include sip_slave.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_macro.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_slave.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_dialmatchingrules.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># ext = slave_password+index</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[fxs-&lt;ext&gt;-&lt;master_ip&gt;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; #00,1,playback(Ext_number)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; #00,n,agi(getsipbinding.sh)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; #00,n,Wait(1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; #00,n,Hangup()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; s,1,Dial(SIP/$sip_extension-$slave_masterip)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; s,n,Hangup()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; *1*2*3*4,1,agi(factoryreset.sh)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; *1*2*3*4,n,Hangup()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; **,1,playback(IP_address)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; **,n,agi(geteth0ip.sh)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[sip-$sip_extension]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; _X.,1,GotoIf($[&quot;${SIP_HEADER(X-Best-Codec)}&quot; = &quot;&quot;]?dial)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; _X.,n,Set(SIP_CODEC=${SIP_HEADER(X-Best-Codec)})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; _X.,n(dial),Dial(dahdi/${i}r1/${EXTEN},$DIALTIMEOUT)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exten =&gt; _X.,n,Hangup()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>master extension</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ini codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include sip_general.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include sip_endpoints.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include sip_master.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_macro.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_fxs.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_master.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_internal.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_routing.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">;#include extensions_sipdef.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include extensions_dialmatchingrules.conf</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="vs_usb-400"></a>VS_USB-400<a class="hash-link" href="#vs_usb-400" title="Direct link to heading">#</a></h2><ul><li>无线网关</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="系统环境-1"></a>系统环境<a class="hash-link" href="#系统环境-1" title="Direct link to heading">#</a></h3><ul><li>软件版本 2.1.22</li><li>硬件版本 1.0</li><li>一个主控，多个模块，模块不带 CPU</li><li>无线模块为 高通 Gobi 无线宽带芯片技术 - GobiNet - USB 驱动</li><li>通道 STM32, 底板 MCU STM8</li><li>该版本包含 frpc - 允许 openvox cloud 建立链接 - 映射了 ssh 和 web</li></ul><blockquote><p>该版本最大的区别是模块不在是独立系统。</p></blockquote><table><thead><tr><th>HW</th><th>Desc</th></tr></thead><tbody><tr><td>CPU</td><td>Intel(R) Atom(TM) CPU Z3735G @ 1.33GHz</td></tr><tr><td>Memory</td><td>1 G</td></tr><tr><td>Disk</td><td>16 G Flash</td></tr></tbody></table><table><thead><tr><th>SW</th><th>Desc</th></tr></thead><tbody><tr><td>Debian</td><td>8</td></tr><tr><td>uname -a</td><td>Linux Wireless-Gateway 4.19.81 #7 SMP Thu Feb 13 08:24:02 CST 2020 i686 i386</td></tr><tr><td>Busybox</td><td>v1.22.1</td></tr><tr><td>Asterisk</td><td>1.8.20.0</td></tr><tr><td>/proc/cmdline</td><td>BOOT_IMAGE=/vmlinuz ro root=LABEL=kernel1 intel_pstate=disable quiet console=ttyS0,115200n8</td></tr></tbody></table><p><strong>/proc/mtrr</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">reg00: base=0x0ffd00000 ( 4093MB), size=    4MB, count=1: write-protect</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">reg01: base=0x000000000 (    0MB), size= 1024MB, count=1: write-back</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">reg02: base=0x03e000000 (  992MB), size=   32MB, count=1: uncachable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">reg03: base=0x03d000000 (  976MB), size=   16MB, count=1: uncachable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">reg04: base=0x03ce00000 (  974MB), size=    2MB, count=1: uncachable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">reg05: base=0x03c800000 (  968MB), size=    4MB, count=1: uncachable</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>/proc/mounts</strong></p><table><thead><tr><th>dev</th><th>size</th><th>path</th><th>fs</th></tr></thead><tbody><tr><td>/dev/mmcblk0p6</td><td>487.9M</td><td>/etc/cfg</td><td>ext4</td></tr><tr><td>/dev/mmcblk0p7</td><td>487.9M</td><td>/data</td><td>ext4</td></tr><tr><td>/dev/mmcblk0p2</td><td>92.8M</td><td>/boot</td><td>ext4</td></tr><tr><td>/dev/mmcblk0p4</td><td>28.9M</td><td>/gateway</td><td>squashfs</td></tr></tbody></table><p><strong>modules</strong></p><ul><li>GobiNet - 驱动无线模块</li><li>usb_wwan</li><li>cdc_acm</li><li>ch341</li><li>usbserial - 依赖 USB 串口</li><li>cdc_ether</li><li>usbnet</li><li>r8152</li><li>snd_pcm</li><li>snd_timer</li><li>i2c_hid</li><li>i2c_algo_bit</li><li>soundcore</li><li>sdhci_acpi</li><li>button</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="系统目录-1"></a>系统目录<a class="hash-link" href="#系统目录-1" title="Direct link to heading">#</a></h3><ul><li>/my_tools -&gt; /gateway/my_tools</li><li>/sound -&gt; /gateway/sound</li><li>/webservice -&gt; /gateway/webservice</li><li>/version -&gt; /gateway/version</li><li>/www -&gt; /gateway/www</li><li>/conf</li><li>/data<ul><li>log/<ul><li>cdr.db</li><li>smsinbox.db</li><li>smsoutbox.db</li></ul></li></ul></li><li>/etc<ul><li>cfg/ - Asteris 配置 - 独立挂载 - 可备份<ul><li>gw/ - 网关配置<ul><li>n2n/ - 2 层 Mesh 组网</li><li>sim840w.conf - SIM 模块配置 - AT 命令之类</li><li>sim6320.conf - SIM 模块配置</li><li>uc15.conf - SIM 模块配置 - UC15</li><li>sms.conf - 短信配置</li></ul></li><li>cloud/ - 应该是 openvox 云平台之类的 - <a href="https://cloud.openvox.com.cn/" target="_blank" rel="noopener noreferrer">https://cloud.openvox.com.cn/</a><ul><li>cloud.conf</li><li>frpc.ini - openvox 访问 ssh 和 web 的后门</li></ul></li></ul></li><li>udev/rules.d/<ul><li>gobinet.rules - GobiNet 映射 - <code>/sys/class/net/gobinet*</code></li><li>internet.rules - 模块内部 usbnet 映射 - 会 symlink 到 <code>/dev/opvx/</code></li></ul></li></ul></li><li>/tmp<ul><li>hw_info.cfg - 硬件配置 - 由于生成 asterisk gw_gsm.conf 和 extra-channels.conf 配置</li></ul></li><li>/usr/sbin/cloudMain</li><li>/usr/sbin/cloudExternal</li><li>/usr/sbin/cloudNat</li><li>/gateway - 完整网关系统 - 独立挂载<ul><li>www/ - PHP 网站</li><li>my_tools/ - 工具集</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="asterisk"></a>Asterisk<a class="hash-link" href="#asterisk" title="Direct link to heading">#</a></h2><blockquote><p>不管什么版本的网关，Asterisk 的版本似乎都没有变过 - 1.8.20.0</p></blockquote><table><thead><tr><th>mod</th><th>desc</th></tr></thead><tbody><tr><td>chan_extra</td><td>GSM/CDMA Telephony Driver FOR Asterisk</td></tr></tbody></table><ul><li>chan_extra<ul><li>OpenVox 开发的无线模块 - GSM, CDMA 和新的 LTE 均使用该模块</li><li>opvxg4xx 驱动提供支持</li><li>配置文件 extra-channels.conf, chan_extra.conf</li><li>GSM, CDMA 基于 DAHDi</li><li>4G LTE 基于 GobiNet 内核驱动</li><li>驱动下载 <a href="https://www.openvox.cn/pub/misc/GSM/" target="_blank" rel="noopener noreferrer">https://www.openvox.cn/pub/misc/GSM/</a></li></ul></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">modprobe opvxg4xx</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Asterisk 命令</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">gsm show spans</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/story/tags/嵌入式">嵌入式</a><a class="margin-horiz--sm" href="/story/tags/系统">系统</a><a class="margin-horiz--sm" href="/story/tags/vo-ip">VoIP</a></div></footer></article><div><a href="https://github.com/wenerme/wener/edit/master/story/2021/2021-03-25-openvox-gw-inside.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/story/agi-vs-ami-vs-ari"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« 如何选择 Asterisk 接口</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/story/fix-init-script"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">记录一次修复 init 脚本的经历 »</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#vs-agu-e2m0800" class="table-of-contents__link">VS-AGU-E2M0800</a></li><li><a href="#web-管理界面" class="table-of-contents__link">Web 管理界面</a></li><li><a href="#硬件" class="table-of-contents__link">硬件</a></li><li><a href="#系统环境" class="table-of-contents__link">系统环境</a><ul><li><a href="#系统目录" class="table-of-contents__link">系统目录</a></li><li><a href="#安装包" class="table-of-contents__link">安装包</a></li><li><a href="#系统工具my_tools" class="table-of-contents__link">系统工具/my_tools</a></li></ul></li><li><a href="#固件" class="table-of-contents__link">固件</a></li><li><a href="#集群模式" class="table-of-contents__link">集群模式</a></li><li><a href="#vs_usb-400" class="table-of-contents__link">VS_USB-400</a><ul><li><a href="#系统环境-1" class="table-of-contents__link">系统环境</a></li><li><a href="#系统目录-1" class="table-of-contents__link">系统目录</a></li></ul></li><li><a href="#asterisk" class="table-of-contents__link">Asterisk</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">笔记</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Projects</h4><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Wener Site" src="/img/wener-logo.svg"></div><div class="footer__copyright">Copyright © 1992-2021 Wener - 构建时间 2021-07-07 01:36</div></div></div></footer></div>
<script src="/styles.d8725d4d.js"></script>
<script src="/runtime~main.35644e2d.js"></script>
<script src="/main.c18264be.js"></script>
<script src="/1.05b166f5.js"></script>
<script src="/2.bc343130.js"></script>
<script src="/3.7534f379.js"></script>
<script src="/ccc49370.21d8fed5.js"></script>
<script src="/65eaf7fb.b699ca7f.js"></script>
<script src="/88eeac37.074890cd.js"></script>
</body>
</html>