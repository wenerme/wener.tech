(window.webpackJsonp=window.webpackJsonp||[]).push([[623],{1151:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g}));var a=n(0),r=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},E=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),m=u(n),E=a,g=m["".concat(i,".").concat(E)]||m[E]||b[E]||l;return n?r.a.createElement(g,o(o({ref:t},s),{},{components:n})):r.a.createElement(g,o({ref:t},s))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=E;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}E.displayName="MDXCreateElement"},697:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var a=n(3),r=n(8),l=(n(0),n(1151)),i={title:"macOS \u5fae\u4fe1\u5907\u4efd\u539f\u7406",slug:"macos-wechat-backup",tags:["macOS","WeChat"]},o={permalink:"/story/macos-wechat-backup",editUrl:"https://github.com/wenerme/wener/edit/master/story/2021/2021-06-27-macos-wechat-backup.md",source:"@site/story/2021/2021-06-27-macos-wechat-backup.md",description:"iPhone7 32G \u7528\u4e86\u51e0\u5e74\u540e\uff0c\u5fae\u4fe1\u5360\u4e86 10G\uff0c\u5982\u679c\u80fd\u628a\u5fae\u4fe1\u5907\u4efd\u540e\u6e05\u9664\uff0c\u8fd8\u80fd\u518d\u6218\u4e24\u5e74\uff01",date:"2021-06-27T00:00:00.000Z",tags:[{label:"macOS",permalink:"/story/tags/mac-os"},{label:"WeChat",permalink:"/story/tags/we-chat"}],title:"macOS \u5fae\u4fe1\u5907\u4efd\u539f\u7406",readingTime:5.745,truncated:!0,prevItem:{title:"\u6211\u7684\u7ad9\u70b9\u662f\u5982\u4f55\u6784\u5efa\u7684\uff1f\uff01",permalink:"/story/how-i-build-my-site"},nextItem:{title:"\u5982\u4f55\u9009\u62e9 Asterisk \u63a5\u53e3",permalink:"/story/agi-vs-ami-vs-ari"}},c=[{value:"WCDB_Contact.sqlite",id:"wcdb_contactsqlite",children:[]},{value:"MM.sqlite",id:"mmsqlite",children:[]},{value:"<code>message_%d.sqlite</code>",id:"message_dsqlite",children:[]}],s={toc:c};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"iPhone7 32G \u7528\u4e86\u51e0\u5e74\u540e\uff0c\u5fae\u4fe1\u5360\u4e86 10G\uff0c\u5982\u679c\u80fd\u628a\u5fae\u4fe1\u5907\u4efd\u540e\u6e05\u9664\uff0c\u8fd8\u80fd\u518d\u6218\u4e24\u5e74\uff01"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u5fae\u4fe1\u81ea\u8eab\u652f\u6301\u5907\u4efd\uff0c\u4f46\u5907\u4efd\u540e\u662f\u52a0\u5bc6\u7684\uff0c\u65e0\u6cd5\u8bbf\u95ee\u3002"),Object(l.b)("li",{parentName:"ul"},"\u5fae\u4fe1\u5360\u7528\u7a7a\u95f4\u7684\u4e3b\u8981\u662f\u56fe\u7247\u548c\u89c6\u9891"),Object(l.b)("li",{parentName:"ul"},"\u5fae\u4fe1\u6e05\u7406\u4e0d\u4f1a\u6e05\u9664\u6587\u672c",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"\u6587\u672c\u6d88\u606f\u76f8\u5bf9\u5c11"),Object(l.b)("li",{parentName:"ul"},"\u60f3\u8981\u6e05\u9664\u6587\u672c\u6d88\u606f\u53ef\u4ee5\u5378\u8f7d\u91cd\u88c5")))),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u901a\u8fc7 macOS \u5907\u4efd iPhone \u7cfb\u7edf - \u5907\u4efd\u65f6\u4e0d\u8981\u52a0\u5bc6",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"\u5907\u4efd\u540e\u4f4d\u4e8e ",Object(l.b)("inlineCode",{parentName:"li"},"$HOME/Library/Application Support/MobileSync/Backup/")))),Object(l.b)("li",{parentName:"ul"},"\u5907\u4efd\u540e\u7684\u6570\u636e",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Manifest.{mbdb,db} - mac \u5907\u4efd\u6587\u4ef6\u6e05\u5355",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Files - \u6587\u4ef6\u6e05\u5355",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"fileID TEXT PRIMARY KEY, domain TEXT, relativePath TEXT, flags INTEGER, file BLOB"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"fileID - \u4e3a \u5907\u4efd\u6620\u5c04\u540e\u7684\u6587\u4ef6"),Object(l.b)("li",{parentName:"ul"},"domain - \u5e94\u7528"),Object(l.b)("li",{parentName:"ul"},"relativePath - \u5e94\u7528\u76f8\u5bf9\u8def\u5f84"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"select relativePath from Files where domain = 'AppDomain-com.tencent.xin' limit 10"),";",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"\u5fae\u4fe1\u76f8\u5173\u6587\u4ef6"))))),Object(l.b)("li",{parentName:"ul"},"Properties",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"key TEXT PRIMARY KEY, value BLOB")))),Object(l.b)("li",{parentName:"ul"},".mbdb - \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u9700\u8981\u81ea\u5b9a\u4e49\u89e3\u7801\u903b\u8f91"),Object(l.b)("li",{parentName:"ul"},".db - sqlite3 - \u65b0\u7248\u4e00\u822c\u662f sqlite3")))))),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-sql"},"-- \u5173\u5fc3\u7684\u6587\u4ef6\nselect fileID,relativePath from Files\nwhere domain = 'AppDomain-com.tencent.xin' and\n(\n  relativePath like '%/MM.sqlite'\n  or relativePath like '%/WCDB_Contact.sqlite'\n  or relativePath like '%/message_%.sqlite'\n);\n\n-- \u6240\u6709 DB \u76ee\u5f55\u4e0b\u5185\u5bb9\nselect fileID,relativePath from Files\nwhere domain = 'AppDomain-com.tencent.xin' and relativePath like 'Documents/%/DB/%';\n\n-- \u6587\u4ef6\u6570\u91cf\nselect count(*) from Files\nwhere domain = 'AppDomain-com.tencent.xin';\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u5907\u4efd\u540e\u5305\u542b\u5fae\u4fe1\u6570\u636e",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"message_%d.sqlite")," - \u804a\u5929\u5bf9\u8bdd",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"ChatExt2_ID"),Object(l.b)("li",{parentName:"ul"},"Chat_ID"),Object(l.b)("li",{parentName:"ul"},"Hello_ID"))),Object(l.b)("li",{parentName:"ul"},"WCDB_Contact.sqlite - \u8054\u7cfb\u4eba",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Friend - \u597d\u53cb"),Object(l.b)("li",{parentName:"ul"},"MassSendContact"),Object(l.b)("li",{parentName:"ul"},"QQContact - QQ \u8054\u7cfb\u4eba"))),Object(l.b)("li",{parentName:"ul"},"MM",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"BottleContactTable4"),Object(l.b)("li",{parentName:"ul"},"BottleTable4"),Object(l.b)("li",{parentName:"ul"},"ChatExt2_ID"),Object(l.b)("li",{parentName:"ul"},"Chat_ID"),Object(l.b)("li",{parentName:"ul"},"Emoticon1"),Object(l.b)("li",{parentName:"ul"},"EmoticonPackage05"),Object(l.b)("li",{parentName:"ul"},"EmoticonUpload_1"),Object(l.b)("li",{parentName:"ul"},"Friend"),Object(l.b)("li",{parentName:"ul"},"Friend_Ext"),Object(l.b)("li",{parentName:"ul"},"MassSendContactTable"),Object(l.b)("li",{parentName:"ul"},"MessageBizExtTable"),Object(l.b)("li",{parentName:"ul"},"QQContact"),Object(l.b)("li",{parentName:"ul"},"RevokeMsgTable"),Object(l.b)("li",{parentName:"ul"},"friend_meta")))))),Object(l.b)("h1",{id:"\u9644\u5f55"},"\u9644\u5f55"),Object(l.b)("h2",{id:"wcdb_contactsqlite"},"WCDB_Contact.sqlite"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-sql"},"-- WCDB_Contact\nCREATE TABLE Friend\n(\n    userName               text primary key on conflict replace,\n    type                   integer default 0,\n    certificationFlag      integer default 0,\n    imgStatus              integer default 0,\n    encodeUserName         text,\n    dbContactLocal         blob,\n    dbContactOther         blob,\n    dbContactRemark        blob,\n    dbContactHeadImage     blob,\n    dbContactProfile       blob,\n    dbContactSocial        blob,\n    dbContactChatRoom      blob,\n    dbContactBrand         blob,\n    _packed_DBContactTable blob\n);\nCREATE TABLE MassSendContact\n(\n    UsrName    text not null primary key on conflict replace,\n    Detail     text,\n    ConIntRes1 integer default 0,\n    ConIntRes2 integer default 0,\n    ConStrRes1 text,\n    ConStrRes2 text\n);\nCREATE TABLE QQContact\n(\n    UsrName           text not null primary key on conflict replace,\n    Uin               integer default 0,\n    Type              integer default 0,\n    Sex               integer default 0,\n    Age               integer default 0,\n    ImgKey            integer default 0,\n    ExtKey            integer default 0,\n    ImgKeyLast        integer default 0,\n    ExtKeyLast        integer default 0,\n    CreateTime        integer default 0,\n    ConIntRes1        integer default 0,\n    ConIntRes2        integer default 0,\n    ConIntRes3        integer default 0,\n    NickName          text,\n    Email             text,\n    Mobile            text,\n    Address           text,\n    Sign              text,\n    birthday          text,\n    FullPY            text,\n    ShortPY           text,\n    Img               text,\n    ConRemark         text,\n    ConRemark_PYShort text,\n    ConRemark_PYFull  text,\n    ConStrRes1        text,\n    ConStrRes2        text,\n    ConStrRes3        text\n);\n")),Object(l.b)("h2",{id:"mmsqlite"},"MM.sqlite"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Friend\n(\n    TableVer     integer default 1,\n    UsrName      text not null primary key on conflict replace,\n    NickName     text,\n    Uin          integer default 0,\n    Email        text,\n    Mobile       text,\n    Sex          integer default 0,\n    FullPY       text,\n    ShortPY      blob,\n    Img          text,\n    Type         integer default 0,\n    LastChatTime integer default 0,\n    Draft        text\n);\nCREATE TABLE Friend_Ext\n(\n    UsrName           text not null primary key on conflict replace,\n    ConType           integer default 0,\n    ConRemark         text,\n    ConRemark_PYShort text,\n    ConRemark_PYFull  text,\n    ConQQMBlog        text,\n    ConSMBlog         text,\n    ConChatRoomMem    text,\n    ConIntRes1        integer default 0,\n    ConIntRes2        integer default 0,\n    ConIntRes3        integer default 0,\n    ConStrRes1        text,\n    ConStrRes2        text,\n    ConStrRes3        text\n);\nCREATE TABLE friend_meta\n(\n    username   text primary key on conflict replace,\n    lastUpdate integer,\n    intCon1    integer,\n    intCon2    integer,\n    intCon3    integer,\n    strCon1    text,\n    strCon2    text,\n    strCon3    text\n);\nCREATE TABLE QQContact\n(\n    UsrName           text not null primary key on conflict replace,\n    Uin               integer default 0,\n    Type              integer default 0,\n    Sex               integer default 0,\n    Age               integer default 0,\n    ImgKey            integer default 0,\n    ExtKey            integer default 0,\n    ImgKeyLast        integer default 0,\n    ExtKeyLast        integer default 0,\n    CreateTime        integer default 0,\n    ConIntRes1        integer default 0,\n    ConIntRes2        integer default 0,\n    ConIntRes3        integer default 0,\n    NickName          text,\n    Email             text,\n    Mobile            text,\n    Address           text,\n    Sign              text,\n    birthday          text,\n    FullPY            text,\n    ShortPY           text,\n    Img               text,\n    ConRemark         text,\n    ConRemark_PYShort text,\n    ConRemark_PYFull  text,\n    ConStrRes1        text,\n    ConStrRes2        text,\n    ConStrRes3        text\n);\nCREATE TABLE RevokeMsgTable\n(\n    MSG_REVOKE_COL_SVRID   bigint  default 0 primary key,\n    MSG_REVOKE_COL_CONTENT text,\n    MSG_REVOKE_COL_INTRES1 integer default 0,\n    MSG_REVOKE_COL_INTRES2 bigint  default 0,\n    MSG_REVOKE_COL_INTRES3 bigint  default 0,\n    MSG_REVOKE_COL_STRRES1 text,\n    MSG_REVOKE_COL_STRRES2 text,\n    MSG_REVOKE_COL_STRRES3 text,\n    _packed_RevokeMessage  blob\n);\nCREATE TABLE Emoticon1\n(\n    MD5        text,\n    Message    text,\n    Type       integer default 0,\n    CreateTime integer default 0,\n    Len        integer default 0,\n    Status     integer default 0,\n    Catalog    text,\n    CatelogID  integer default 0,\n    Draft      text,\n    ConIntRes1 integer default 0,\n    ConIntRes2 integer default 0,\n    ConIntRes3 integer default 0,\n    ConStrRes1 text,\n    ConStrRes2 text,\n    ConStrRes3 text\n);\nCREATE TABLE EmoticonUpload_1\n(\n    UsrName    text,\n    MesLocalID text,\n    MD5        text,\n    Type       integer default 0,\n    Message    text,\n    CreateTime integer default 0,\n    SendTime   integer default 0,\n    Offset     integer default 0,\n    Len        integer default 0,\n    Status     integer default 0,\n    Catalog    text,\n    CatelogID  integer default 0,\n    Draft      text,\n    ConIntRes1 integer default 0,\n    ConIntRes2 integer default 0,\n    ConIntRes3 integer default 0,\n    ConStrRes1 text,\n    ConStrRes2 text,\n    ConStrRes3 text\n);\nCREATE TABLE BottleTable4\n(\n    BottleLocalID        integer primary key autoincrement,\n    BottleSvrID          integer default 0,\n    BottleEncryptUsrName text,\n    BottleID             text,\n    BottleExt            text\n);\nCREATE TABLE sqlite_sequence\n(\n    name,\n    seq\n);\nCREATE TABLE BottleContactTable4\n(\n    BottleContactUsrName     text not null primary key on conflict replace,\n    BottleContactNickName    text,\n    BottleContactSex         integer default 0,\n    BottleContactImgStatus   text,\n    BottleContactHDImgStatus text,\n    BottleContactProvince    text,\n    BottleContactCity        text,\n    BottleContactSign        text,\n    BottleContactImgKey      integer default 0,\n    BottleContactImgKeyLast  integer default 0,\n    BottleContactExtKey      integer default 0,\n    BottleContactExtKeyLast  integer default 0,\n    BottleContactINTRES1     integer default 0,\n    BottleContactINTRES2     integer default 0,\n    BottleContactINTRES3     integer default 0,\n    BottleContactTEXTRES1    text,\n    BottleContactTEXTRES2    text,\n    BottleContactTEXTRES3    text\n);\nCREATE TABLE MassSendContactTable\n(\n    UsrName    text not null primary key on conflict replace,\n    Detail     text,\n    ConIntRes1 integer default 0,\n    ConIntRes2 integer default 0,\n    ConStrRes1 text,\n    ConStrRes2 text\n);\nCREATE TABLE MessageBizExtTable\n(\n    chatUsername            text,\n    msgLocalId              integer,\n    msgType                 integer,\n    msgInnerType            integer,\n    bizId                   text,\n    msgExtColInt1           integer,\n    msgExtColInt2           integer,\n    msgExtColString1        text,\n    msgExtColString2        text,\n    _packed_DBMessageBizExt blob\n);\nCREATE TABLE EmoticonPackage05\n(\n    EmoticonPackageId          text not null primary key on conflict replace,\n    EmoticonPackageName        text,\n    EmoticonPackageIconUrl     text,\n    EmoticonPackagePannelUrl   text,\n    EmoticonPackagePStatus     integer default 0,\n    EmoticonPackageDLStatus    integer default 0,\n    EmoticonPackageInstallTime integer default 0,\n    EmoticonPackageRemoveTime  integer default 0,\n    ConIntRes1                 integer default 0,\n    ConIntRes2                 integer default 0,\n    ConIntRes3                 integer default 0,\n    ConStrRes1                 text,\n    ConStrRes2                 text,\n    ConStrRes3                 text\n);\nCREATE TABLE Chat\n(\n    TableVer   integer default 1,\n    MesLocalID integer primary key autoincrement,\n    MesSvrID   bigint  default 0,\n    CreateTime integer default 0,\n    Message    text,\n    Status     integer default 0,\n    ImgStatus  integer default 0,\n    Type       integer,\n    Des        integer\n);\nCREATE TABLE ChatExt2\n(\n    MesLocalID  integer primary key,\n    msgFlag     integer default 0,\n    ConIntRes2  integer default 0,\n    ConIntRes3  integer default 0,\n    MsgSource   text,\n    MsgIdentify text,\n    ConStrRes1  text,\n    ConStrRes2  text,\n    ConStrRes3  text,\n    ConIntRes1  integer default 0\n);\n")),Object(l.b)("h2",{id:"message_dsqlite"},Object(l.b)("inlineCode",{parentName:"h2"},"message_%d.sqlite")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE Chat_ID\n(\n    CreateTime INTEGER DEFAULT 0,\n    Des        INTEGER,\n    ImgStatus  INTEGER DEFAULT 0,\n    MesLocalID INTEGER PRIMARY KEY AUTOINCREMENT,\n    Message    TEXT,\n    MesSvrID   INTEGER DEFAULT 0,\n    Status     INTEGER DEFAULT 0,\n    TableVer   INTEGER DEFAULT 1,\n    Type       INTEGER\n);\nCREATE TABLE ChatExt2_ID\n(\n    ConIntRes1  INTEGER DEFAULT 0,\n    ConIntRes2  INTEGER DEFAULT 0,\n    ConIntRes3  INTEGER DEFAULT 0,\n    ConStrRes1  TEXT,\n    ConStrRes2  TEXT,\n    ConStrRes3  TEXT,\n    MesLocalID  INTEGER PRIMARY KEY,\n    msgFlag     INTEGER DEFAULT 0,\n    MsgIdentify TEXT,\n    MsgSource   TEXT\n);\nCREATE TABLE Hello_ID\n(\n    ConIntRes1 INTEGER DEFAULT 0,\n    ConIntRes2 INTEGER DEFAULT 0,\n    ConIntRes3 INTEGER DEFAULT 0,\n    ConStrRes1 TEXT,\n    ConStrRes2 TEXT,\n    ConStrRes3 TEXT,\n    CreateTime INTEGER DEFAULT 0,\n    Des        INTEGER,\n    ImgStatus  INTEGER DEFAULT 0,\n    MesLocalID INTEGER PRIMARY KEY AUTOINCREMENT,\n    Message    TEXT,\n    MesSvrID   INTEGER DEFAULT 0,\n    OpCode     INTEGER DEFAULT 0,\n    Status     INTEGER DEFAULT 0,\n    TableVer   INTEGER DEFAULT 1,\n    Type       INTEGER,\n    UsrName    TEXT\n);\n")))}u.isMDXComponent=!0}}]);