<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-service/forge/gitlab/gitlab-config">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">GitLab配置 | Wener Live &amp; Life</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wener.me/notes/service/forge/gitlab/config"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GitLab配置 | Wener Live &amp; Life"><meta data-rh="true" name="description" content="* 组建"><meta data-rh="true" property="og:description" content="* 组建"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wener.me/notes/service/forge/gitlab/config"><link data-rh="true" rel="alternate" href="https://wener.me/notes/service/forge/gitlab/config" hreflang="en"><link data-rh="true" rel="alternate" href="https://wener.me/notes/service/forge/gitlab/config" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://37P8DMWBKF-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.1c5a76d0.css">
<link rel="preload" href="/assets/js/runtime~main.954d1753.js" as="script">
<link rel="preload" href="/assets/js/main.bff4f121.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_GBuj" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_QM0D themedImage--light_s8Fn"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_QM0D themedImage--dark_Yfiw"></div><b class="navbar__title text--truncate">Wener</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_QEvt"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_VZCd colorModeToggle_s_tJ"><button class="clean-btn toggleButton_ubpP toggleButtonDisabled_Okf9" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Koy5"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_vW2_"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_FlUR"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Ewau docsWrapper_woa9"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_T0sX" type="button"></button><div class="docPage_e5SA"><aside class="theme-doc-sidebar-container docSidebarContainer_u9sz"><div class="sidebar_yFJp"><nav class="menu thin-scrollbar menu__KhU"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes">笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/algorithm">算法</a><button aria-label="Toggle the collapsible sidebar category &#x27;算法&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/blockchain">区块链</a><button aria-label="Toggle the collapsible sidebar category &#x27;区块链&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/courses">课程</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/culture">文化</a><button aria-label="Toggle the collapsible sidebar category &#x27;文化&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/db">数据库</a><button aria-label="Toggle the collapsible sidebar category &#x27;数据库&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/design">设计</a><button aria-label="Toggle the collapsible sidebar category &#x27;设计&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/dev">开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/economics">经济学</a><button aria-label="Toggle the collapsible sidebar category &#x27;经济学&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/elastic/elasticsearch-v2">elastic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/electrical/glossary">electrical</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/embedded/awesome">embedded</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/evolve">自我成长</a><button aria-label="Toggle the collapsible sidebar category &#x27;自我成长&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/game">游戏</a><button aria-label="Toggle the collapsible sidebar category &#x27;游戏&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/hardware">硬件</a><button aria-label="Toggle the collapsible sidebar category &#x27;硬件&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/healthcare">健康</a><button aria-label="Toggle the collapsible sidebar category &#x27;健康&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/howto/network/dns-prevent-spoofing">howto</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/java">Java</a><button aria-label="Toggle the collapsible sidebar category &#x27;Java&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/languages">语言</a><button aria-label="Toggle the collapsible sidebar category &#x27;语言&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/mgmt">管理</a><button aria-label="Toggle the collapsible sidebar category &#x27;管理&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/network/application/cache-control">network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/ops">运维</a><button aria-label="Toggle the collapsible sidebar category &#x27;运维&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/os">操作系统</a><button aria-label="Toggle the collapsible sidebar category &#x27;操作系统&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/philosophy/faq">philosophy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/photography">摄影</a><button aria-label="Toggle the collapsible sidebar category &#x27;摄影&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/platform">平台</a><button aria-label="Toggle the collapsible sidebar category &#x27;平台&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/queue">Queue</a><button aria-label="Toggle the collapsible sidebar category &#x27;Queue&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/reference/cook/glossary">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/security">安全</a><button aria-label="Toggle the collapsible sidebar category &#x27;安全&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/notes/service">服务</a><button aria-label="Toggle the collapsible sidebar category &#x27;服务&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/analytics/awesome">analytics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/api/awesome">api</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/auth">Auth</a><button aria-label="Toggle the collapsible sidebar category &#x27;Auth&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/baas">Backend as a Service</a><button aria-label="Toggle the collapsible sidebar category &#x27;Backend as a Service&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/bi/apache-superset">bi</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/cms">CMS 概览</a><button aria-label="Toggle the collapsible sidebar category &#x27;CMS 概览&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/cn">CN</a><button aria-label="Toggle the collapsible sidebar category &#x27;CN&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/collaboration">协同软件</a><button aria-label="Toggle the collapsible sidebar category &#x27;协同软件&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/crm/awesome">crm</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/data">数据</a><button aria-label="Toggle the collapsible sidebar category &#x27;数据&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/dev/backstage">dev</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/dns">DNS Service</a><button aria-label="Toggle the collapsible sidebar category &#x27;DNS Service&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/download">下载器</a><button aria-label="Toggle the collapsible sidebar category &#x27;下载器&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/e-commerce">E-Commerce</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/email">EMail</a><button aria-label="Toggle the collapsible sidebar category &#x27;EMail&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/file/filebrowser">file</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/notes/service/forge">Forge</a><button aria-label="Toggle the collapsible sidebar category &#x27;Forge&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/athens">athens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/copilot">Copilot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/awesome">Forge Awesome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/forge/git">Git</a><button aria-label="Toggle the collapsible sidebar category &#x27;Git&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitea">Gitea</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/github-action">Github Action</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/github-faq">Github FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/github">Github</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/notes/service/forge/gitlab">Gitlab</a><button aria-label="Toggle the collapsible sidebar category &#x27;Gitlab&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/ci-cookbook">Gitlab CI 技巧</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/ci-yml">gitlab-ci.yml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/cicd">GitaLab持续集成持续交付</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/service/forge/gitlab/config">GitLab配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/faq">Gitlab FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/k8s">GitLab K8S 集成</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/repo">Gitlab Repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/runner">Gitlab Runner</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/sast">Gitlab SAST</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/goproxy">goproxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/nexus">Nexus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/onedev">onedev</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/repository-awesome">Awesome Repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/verdaccio">Verdaccio</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/forum/awesome">forum</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/im">即时通讯</a><button aria-label="Toggle the collapsible sidebar category &#x27;即时通讯&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/media/anime4k">media</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/network">网络服务</a><button aria-label="Toggle the collapsible sidebar category &#x27;网络服务&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/notion">Notion</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/observability">可观察性</a><button aria-label="Toggle the collapsible sidebar category &#x27;可观察性&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/office">办公套件</a><button aria-label="Toggle the collapsible sidebar category &#x27;办公套件&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/printing/awesome">printing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/realtime/awesome">realtime</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/selfhost">SelfHost</a><button aria-label="Toggle the collapsible sidebar category &#x27;SelfHost&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/awesome">Service Awesome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/storage/ceph">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/telecom/device">telecom</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/torrent">Torrent</a><button aria-label="Toggle the collapsible sidebar category &#x27;Torrent&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/service/workflow">Workflow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workflow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/service/xaas/awesome">xaas</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/tool">工具</a><button aria-label="Toggle the collapsible sidebar category &#x27;工具&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/voip">VoIP</a><button aria-label="Toggle the collapsible sidebar category &#x27;VoIP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/web">Web</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_jgTA"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_tDu3"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_jz8z"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_CixA"><div class="docItemContainer_zckq"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_FBYY" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_jnrL"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/service"><span itemprop="name">服务</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/service/forge"><span itemprop="name">Forge</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/service/forge/gitlab"><span itemprop="name">Gitlab</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">GitLab配置</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_MiWk theme-doc-toc-mobile tocMobile_dcUs"><button type="button" class="clean-btn tocCollapsibleButton_Bqtn">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Gitlab 配置</h1><ul><li>组建<ul><li>gitaly - 提供 RPC 操作 Git 仓库的服务</li></ul></li><li><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/files/gitlab-config-template/gitlab.rb.template" target="_blank" rel="noopener noreferrer">gitlab.rb.template</a><ul><li>ruby 配置文件</li><li>位于 <code>/etc/gitlab/gitlab.rb</code></li><li>修改后操作 <code>gitlab-ctl reconfigure</code> 可让服务器不重启的情况下从新配置</li></ul></li><li><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/gitlab.yml.md" target="_blank" rel="noopener noreferrer">gitlab.yml</a> - <a href="https://gitlab.com/gitlab-org/gitlab/blob/master/config/gitlab.yml.example" target="_blank" rel="noopener noreferrer">gitlab.yml.example</a><ul><li>yaml 格式的配置文件</li><li>会映射为 ruby 配置</li><li>配置后会生成 <code>/var/opt/gitlab/gitlab-rails/etc/gitlab.yml</code></li></ul></li><li><a href="https://docs.gitlab.com/omnibus/settings/configuration.html" target="_blank" rel="noopener noreferrer">配置</a></li></ul><div class="language-rb codeBlockContainer_eErV theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_UzAP"><pre tabindex="0" class="prism-code language-rb codeBlock_CYhB thin-scrollbar"><code class="codeBlockLines__AHC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 可以引入外部配置文件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from_file &quot;/home/admin/external_gitlab.rb&quot;</span><br></span></code></pre><div class="buttonGroup_tnuT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_tmcC" aria-hidden="true"><svg class="copyButtonIcon_Azkd" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_pt5v" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_KJCY" id="基础配置">基础配置<a class="hash-link" href="#基础配置" title="Direct link to heading">​</a></h2><ul><li>如果想要开启 Git over SSH - 那么只能是将域名解析指向 Gitlab<ul><li>或者单独转发单个端口</li><li>做不到外部反向代理+SSH - 因为 SSH 没有域名概念 - 也不适合将整个外部的 22 都指向 Gitlab</li></ul></li><li>注意<ul><li>配置了 external_url 后，如果为 https 则只监听 https - <a href="https://gitlab.com/gitlab-org/omnibus-gitlab/issues/1891" target="_blank" rel="noopener noreferrer">#1891</a> - 同时监听 80 和 443</li></ul></li></ul><div class="language-rb codeBlockContainer_eErV theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_UzAP"><pre tabindex="0" class="prism-code language-rb codeBlock_CYhB thin-scrollbar"><code class="codeBlockLines__AHC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 用于 SSH 的主机名</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_ssh_host&#x27;] = &#x27;ssh.host_example.com&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;time_zone&#x27;] = &#x27;UTC&#x27;</span><br></span></code></pre><div class="buttonGroup_tnuT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_tmcC" aria-hidden="true"><svg class="copyButtonIcon_Azkd" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_pt5v" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_KJCY" id="授权配置">授权配置<a class="hash-link" href="#授权配置" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_KJCY" id="ldap">LDAP<a class="hash-link" href="#ldap" title="Direct link to heading">​</a></h3><ul><li>由于 Git 需要密码 - 想要中心化管理密码只能使用 LDAP</li><li>LDAP 可以禁止登陆 - 例如 只允许 OpenID 登陆</li><li><a href="https://docs.gitlab.com/ee/administration/auth/ldap.html" target="_blank" rel="noopener noreferrer">LDAP集成</a> <ul><li>CE 版本只支持作为登陆</li><li>EE 支持同步账号和分组</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_KJCY" id="openid-connect">OpenID Connect<a class="hash-link" href="#openid-connect" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_KJCY" id="pages-配置">Pages 配置<a class="hash-link" href="#pages-配置" title="Direct link to heading">​</a></h2><ul><li>注意<ul><li>不能用 gitlab 的二级域名</li><li>只能通过域名访问</li><li>默认存储目录 <code>/var/opt/gitlab/gitlab-rails/shared/pages</code></li><li>如果使用自定义域名，则可能需要开启反向端口</li></ul></li><li><a href="https://docs.gitlab.com/ee/administration/pages" target="_blank" rel="noopener noreferrer">Pages 管理</a></li></ul><div class="language-rb codeBlockContainer_eErV theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_UzAP"><pre tabindex="0" class="prism-code language-rb codeBlock_CYhB thin-scrollbar"><code class="codeBlockLines__AHC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 启用 Pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 访问地址</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 例如项目 wener/app 则地址为 wener.pages.wener.me/app 可以测试访问</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># curl -H &#x27;Host: wener.pages.wener.me&#x27;  gitlab.wener.me/app</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果配置为 http 需要配置证书或者会自动从 let&#x27;s encrypt 获取</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_external_url &#x27;http://pages.wener.me&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果配置为 https 没有配置 cert 则会使用域名拼 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 例如  &quot;/etc/gitlab/ssl/example.io.crt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果想要 https 但是又没有证书，可以考虑配置为主域名证书，然后在外面反向代理的时候忽略验证</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果没有 cert 会一直失败 cannot load certificate &quot;/etc/gitlab/ssl/pages.example.io.crt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_nginx[&#x27;redirect_http_to_https&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_nginx[&#x27;ssl_certificate&#x27;] = &quot;/etc/gitlab/ssl/gitlab.example.com.crt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_nginx[&#x27;ssl_certificate_key&#x27;] = &quot;/etc/gitlab/ssl/gitlab.example.com.key&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 查看状态的路径</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;status_uri&#x27;] = &quot;/@status&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 避免 bind mount - 在 docker 里默认没有权限</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 会 mount 在 /var/opt/gitlab/gitlab-pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;inplace_chroot&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 存储路径</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 默认 /var/opt/gitlab/gitlab-rails/shared/pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_path&#x27;] = &quot;/mnt/storage/pages&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># pages 监听的端口</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 默认是 localhost:8090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 例如项目 wener/app 可以通过如下方式访问 - 注意协议是 HTTP 和配置的外部 URL 有关</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># curl -H &#x27;Host: wener.pages.wener.me&#x27;  localhost:8090/app</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;listen_proxy&#x27;] = &quot;localhost:8090&quot;</span><br></span></code></pre><div class="buttonGroup_tnuT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_tmcC" aria-hidden="true"><svg class="copyButtonIcon_Azkd" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_pt5v" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_KJCY" id="gitlabrb">gitlab.rb<a class="hash-link" href="#gitlabrb" title="Direct link to heading">​</a></h2><div class="language-rb codeBlockContainer_eErV theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_UzAP"><pre tabindex="0" class="prism-code language-rb codeBlock_CYhB thin-scrollbar"><code class="codeBlockLines__AHC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Email Settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_enabled&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_from&#x27;] = &#x27;example@example.com&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_display_name&#x27;] = &#x27;Example&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_reply_to&#x27;] = &#x27;noreply@example.com&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_subject_suffix&#x27;] = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab user privileges</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_default_can_create_group&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># default true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_username_changing_enabled&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 反向代理地址</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;trusted_proxies&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 监控白名单</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;monitoring_whitelist&#x27;] = [&#x27;127.0.0.0/8&#x27;, &#x27;::1/128&#x27;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Email account username</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **With third party providers, this is usually the full email address.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **With self-hosted email servers, this is usually the user part of the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   email address.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_email&#x27;] = &quot;gitlab-incoming@gmail.com&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_password&#x27;] = &quot;[REDACTED]&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### IMAP Settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_host&#x27;] = &quot;imap.gmail.com&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_port&#x27;] = 993</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_ssl&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_start_tls&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Incoming Mailbox Settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! The mailbox where incoming mail will end up. Usually &quot;inbox&quot;.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_mailbox_name&#x27;] = &quot;inbox&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! The IDLE command timeout.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_idle_timeout&#x27;] = 60</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Git LFS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;lfs_object_store_connection&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;provider&#x27; =&gt; &#x27;AWS&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;region&#x27; =&gt; &#x27;eu-west-1&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_access_key_id&#x27; =&gt; &#x27;AWS_ACCESS_KEY_ID&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_secret_access_key&#x27; =&gt; &#x27;AWS_SECRET_ACCESS_KEY&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # # The below options configure an S3 compatible host instead of AWS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;aws_signature_version&#x27; =&gt; 4, # For creation of signed URLs. Set to 2 if provider does not support v4.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;endpoint&#x27; =&gt; &#x27;https://s3.amazonaws.com&#x27;, # default: nil - Useful for S3 compliant services such as DigitalOcean Spaces</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;host&#x27; =&gt; &#x27;s3.amazonaws.com&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;path_style&#x27; =&gt; false # Use &#x27;host/bucket_name/object&#x27; instead of &#x27;bucket_name.host/object&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab uploads</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/ee/administration/uploads.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;uploads_object_store_connection&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;provider&#x27; =&gt; &#x27;AWS&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;region&#x27; =&gt; &#x27;eu-west-1&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_access_key_id&#x27; =&gt; &#x27;AWS_ACCESS_KEY_ID&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_secret_access_key&#x27; =&gt; &#x27;AWS_SECRET_ACCESS_KEY&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # # The below options configure an S3 compatible host instead of AWS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;host&#x27; =&gt; &#x27;s3.amazonaws.com&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;aws_signature_version&#x27; =&gt; 4, # For creation of signed URLs. Set to 2 if provider does not support v4.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;endpoint&#x27; =&gt; &#x27;https://s3.amazonaws.com&#x27;, # default: nil - Useful for S3 compliant services such as DigitalOcean Spaces</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;path_style&#x27; =&gt; false # Use &#x27;host/bucket_name/object&#x27; instead of &#x27;bucket_name.host/object&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;mattermost_host&#x27;] = &quot;https://mattermost.example.com&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### LDAP Settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/ldap.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Be careful not to break the indentation in the ldap_servers block. It is</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!   in yaml format and the spaces must be retained. Using tabs will not work.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;ldap_enabled&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **remember to close this block with &#x27;EOS&#x27; below**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;ldap_servers&#x27;] = YAML.load &lt;&lt;-&#x27;EOS&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   main: # &#x27;main&#x27; is the GitLab &#x27;provider ID&#x27; of this LDAP server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     label: &#x27;LDAP&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     host: &#x27;_your_ldap_server&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     port: 389</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     uid: &#x27;sAMAccountName&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     bind_dn: &#x27;_the_full_dn_of_the_user_you_will_bind_with&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     password: &#x27;_the_password_of_the_bind_user&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     encryption: &#x27;plain&#x27; # &quot;start_tls&quot; or &quot;simple_tls&quot; or &quot;plain&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     verify_certificates: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     smartcard_auth: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     active_directory: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     allow_username_or_email_login: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     lowercase_usernames: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     block_auto_created_users: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     base: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     user_filter: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     ## EE only</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     group_base: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     admin_group: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     sync_ssh_keys: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   secondary: # &#x27;secondary&#x27; is the GitLab &#x27;provider ID&#x27; of second LDAP server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     label: &#x27;LDAP&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     host: &#x27;_your_ldap_server&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     port: 389</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     uid: &#x27;sAMAccountName&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     bind_dn: &#x27;_the_full_dn_of_the_user_you_will_bind_with&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     password: &#x27;_the_password_of_the_bind_user&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     encryption: &#x27;plain&#x27; # &quot;start_tls&quot; or &quot;simple_tls&quot; or &quot;plain&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     verify_certificates: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     smartcard_auth: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     active_directory: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     allow_username_or_email_login: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     lowercase_usernames: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     block_auto_created_users: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     base: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     user_filter: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     ## EE only</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     group_base: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     admin_group: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     sync_ssh_keys: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># EOS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Backup Settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/backups.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;manage_backup_path&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_path&#x27;] = &quot;/var/opt/gitlab/backups&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! The duration in seconds to keep backups before they are allowed to be deleted</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_keep_time&#x27;] = 604800</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_upload_connection&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;provider&#x27; =&gt; &#x27;AWS&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;region&#x27; =&gt; &#x27;eu-west-1&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;aws_access_key_id&#x27; =&gt; &#x27;AKIAKIAKI&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;aws_secret_access_key&#x27; =&gt; &#x27;secret123&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_upload_remote_directory&#x27;] = &#x27;my.s3.bucket&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_multipart_chunk_size&#x27;] = 104857600</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Extra customization</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;extra_google_analytics_id&#x27;] = &#x27;_your_tracking_id&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;extra_piwik_url&#x27;] = &#x27;_your_piwik_url&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;extra_piwik_site_id&#x27;] = &#x27;_your_piwik_site_id&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/environment-variables.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;env&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;BUNDLE_GEMFILE&#x27; =&gt; &quot;/opt/gitlab/embedded/service/gitlab-rails/Gemfile&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;PATH&#x27; =&gt; &quot;/opt/gitlab/bin:/opt/gitlab/embedded/bin:/bin:/usr/bin&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Change the initial default admin password and shared runner registration tokens.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **Only applicable on initial setup, changing these settings after database</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   is created and seeded won&#x27;t yield any change.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;initial_root_password&#x27;] = &quot;password&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;initial_shared_runners_registration_token&#x27;] = &quot;token&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab database settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/database.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Only needed if you use an external database.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_adapter&#x27;] = &quot;postgresql&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_encoding&#x27;] = &quot;unicode&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_collation&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_database&#x27;] = &quot;gitlabhq_production&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_pool&#x27;] = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_username&#x27;] = &quot;gitlab&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_password&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_host&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_port&#x27;] = 5432</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_socket&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_sslmode&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_sslcompression&#x27;] = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_sslrootcert&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_prepared_statements&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_statements_limit&#x27;] = 1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab Redis settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Connect to your own Redis instance</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/redis.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Redis TCP connection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_host&#x27;] = &quot;127.0.0.1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_port&#x27;] = 6379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_ssl&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_password&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_database&#x27;] = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_enable_client&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Redis local UNIX socket (will be disabled if TCP method is used)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_socket&#x27;] = &quot;/var/opt/gitlab/redis/redis.socket&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab email server settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/smtp.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Use smtp instead of sendmail/postfix.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_address&#x27;] = &quot;smtp.server&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_port&#x27;] = 465</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_user_name&#x27;] = &quot;smtp user&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_password&#x27;] = &quot;smtp password&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_domain&#x27;] = &quot;example.com&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_authentication&#x27;] = &quot;login&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_enable_starttls_auto&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_tls&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Can be: &#x27;none&#x27;, &#x27;peer&#x27;, &#x27;client_once&#x27;, &#x27;fail_if_no_peer_cert&#x27;**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: http://api.rubyonrails.org/classes/ActionMailer/Base.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;smtp_openssl_verify_mode&#x27;] = &#x27;none&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;smtp_ca_path&#x27;] = &quot;/etc/ssl/certs&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;smtp_ca_file&#x27;] = &quot;/etc/ssl/certs/ca-certificates.crt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Container Registry settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/ce/administration/container_registry.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># registry_external_url &#x27;https://registry.gitlab.example.com&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Settings used by GitLab application</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_enabled&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_host&#x27;] = &quot;registry.gitlab.example.com&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_port&#x27;] = &quot;5005&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_path&#x27;] = &quot;/var/opt/gitlab/gitlab-rails/shared/registry&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Error Reporting and Logging with Sentry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_enabled&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_dsn&#x27;] = &#x27;https://&lt;key&gt;@sentry.io/&lt;project&gt;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_clientside_dsn&#x27;] = &#x27;https://&lt;key&gt;@sentry.io/&lt;project&gt;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_environment&#x27;] = &#x27;production&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Workhorse</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://gitlab.com/gitlab-org/gitlab-workhorse/blob/master/README.md</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;ha&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;listen_network&#x27;] = &quot;unix&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;listen_umask&#x27;] = 000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;listen_addr&#x27;] = &quot;/var/opt/gitlab/gitlab-workhorse/socket&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;auth_backend&#x27;] = &quot;http://localhost:8080&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab PostgreSQL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Changing any of these settings requires a restart of postgresql.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! By default, reconfigure reloads postgresql if it is running. If you</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! change any of these settings, be sure to run `gitlab-ctl restart postgresql`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! after reconfigure in order for the changes to take effect.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;listen_address&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;port&#x27;] = 5432</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;data_dir&#x27;] = &quot;/var/opt/gitlab/postgresql/data&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **recommend value is 1/4 of total RAM, up to 14GB.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shared_buffers&#x27;] = &quot;256MB&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Advanced settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ha&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/postgresql&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/postgresql&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;username&#x27;] = &quot;gitlab-psql&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;group&#x27;] = &quot;gitlab-psql&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! `SQL_USER_PASSWORD_HASH` can be generated using the command `gitlab-ctl pg-password-md5 gitlab`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_user_password&#x27;] = &#x27;SQL_USER_PASSWORD_HASH&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;uid&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;gid&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shell&#x27;] = &quot;/bin/sh&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;home&#x27;] = &quot;/var/opt/gitlab/postgresql&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;user_path&#x27;] = &quot;/opt/gitlab/embedded/bin:/opt/gitlab/bin:$PATH&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_user&#x27;] = &quot;gitlab&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_connections&#x27;] = 200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;md5_auth_cidr_addresses&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;trust_auth_cidr_addresses&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;wal_buffers&#x27;] = &quot;-1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_max_workers&#x27;] = &quot;3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_freeze_max_age&#x27;] = &quot;200000000&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_statement&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;track_activity_query_size&#x27;] = &quot;1024&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shared_preload_libraries&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;dynamic_shared_memory_type&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;hot_standby&#x27;] = &quot;off&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### SSL settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># See https://www.postgresql.org/docs/9.6/static/runtime-config-connection.html#GUC-SSL-CERT-FILE for more details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl&#x27;] = &#x27;on&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_ciphers&#x27;] = &#x27;HIGH:MEDIUM:+3DES:!aNULL:!SSLv3:!TLSv1&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_cert_file&#x27;] = &#x27;server.crt&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_key_file&#x27;] = &#x27;server.key&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_ca_file&#x27;] = &#x27;/opt/gitlab/embedded/ssl/certs/cacert.pem&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_crl_file&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Replication settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Note, some replication settings do not require a full restart. They are documented below.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;wal_level&#x27;] = &quot;hot_standby&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_wal_senders&#x27;] = 5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_replication_slots&#x27;] = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_locks_per_transaction&#x27;] = 128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Backup/Archive settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;archive_mode&#x27;] = &quot;off&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Changing any of these settings only requires a reload of postgresql. You do not need to</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! restart postgresql if you change any of these and run reconfigure.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;work_mem&#x27;] = &quot;16MB&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;maintenance_work_mem&#x27;] = &quot;16MB&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_segments&#x27;] = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_timeout&#x27;] = &quot;5min&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_completion_target&#x27;] = 0.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;effective_io_concurrency&#x27;] = 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_warning&#x27;] = &quot;30s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;effective_cache_size&#x27;] = &quot;1MB&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shmmax&#x27;] =  17179869184 # or 4294967295</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shmall&#x27;] =  4194304 # or 1048575</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum&#x27;] = &quot;on&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_autovacuum_min_duration&#x27;] = &quot;-1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_naptime&#x27;] = &quot;1min&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_threshold&#x27;] = &quot;50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_analyze_threshold&#x27;] = &quot;50&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_scale_factor&#x27;] = &quot;0.02&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_analyze_scale_factor&#x27;] = &quot;0.01&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_cost_delay&#x27;] = &quot;20ms&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_cost_limit&#x27;] = &quot;-1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;statement_timeout&#x27;] = &quot;60000&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;idle_in_transaction_session_timeout&#x27;] = &quot;60000&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_line_prefix&#x27;] = &quot;%a&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_worker_processes&#x27;] = 8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_parallel_workers_per_gather&#x27;] = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_lock_waits&#x27;] = 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;deadlock_timeout&#x27;] = &#x27;5s&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;track_io_timing&#x27;] = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;default_statistics_target&#x27;] = 1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Available in PostgreSQL 9.6 and later</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;min_wal_size&#x27;] = 80MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_wal_size&#x27;] = 1GB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Backup/Archive settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;archive_command&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;archive_timeout&#x27;] = &quot;0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Replication settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_replication_user&#x27;] = &quot;gitlab_replicator&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_replication_password&#x27;] = &quot;md5 hash of postgresql password&quot; # You can generate with `gitlab-ctl pg-password-md5 &lt;dbuser&gt;`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;wal_keep_segments&#x27;] = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_standby_archive_delay&#x27;] = &quot;30s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_standby_streaming_delay&#x27;] = &quot;30s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;synchronous_commit&#x27;] = on</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;synchronous_standby_names&#x27;] = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;hot_standby_feedback&#x27;] = &#x27;off&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;random_page_cost&#x27;] = 2.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_temp_files&#x27;] = -1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_checkpoints&#x27;] = &#x27;off&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># To add custom entries to pg_hba.conf use the following</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;custom_pg_hba_entries&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   APPLICATION: [ # APPLICATION should identify what the settings are used for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       type: example,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       database: example,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       user: example,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       cidr: example,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       method: example,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       option: example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># See https://www.postgresql.org/docs/9.6/static/auth-pg-hba-conf.html for an explanation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># of the values</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Can be disabled if you are using your own Redis instance.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/redis.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;ha&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;hz&#x27;] = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/redis&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/redis&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;username&#x27;] = &quot;gitlab-redis&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;group&#x27;] = &quot;gitlab-redis&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxclients&#x27;] = &quot;10000&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxmemory&#x27;] = &quot;0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxmemory_policy&#x27;] = &quot;noeviction&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxmemory_samples&#x27;] = &quot;5&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;tcp_backlog&#x27;] = 511</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;tcp_timeout&#x27;] = &quot;60&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;tcp_keepalive&#x27;] = &quot;300&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;uid&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;gid&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Disable or obfuscate unnecessary redis command names</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Uncomment and edit this block to add or remove entries.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### See https://docs.gitlab.com/omnibus/settings/redis.html#renamed-commands</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### for detailed usage</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;rename_commands&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;KEYS&#x27;: &#x27;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **To enable only Redis service in this machine, uncomment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!   one of the lines below (choose master or slave instance types).**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/redis.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!       https://docs.gitlab.com/ce/administration/high_availability/redis.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis_master_role[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis_slave_role[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Redis TCP support (will disable UNIX socket transport)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;bind&#x27;] = &#x27;0.0.0.0&#x27; # or specify an IP to bind to a single one</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;port&#x27;] = 6379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;password&#x27;] = &#x27;redis-password-goes-here&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Redis Sentinel support</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **You need a master slave Redis replication to be able to do failover**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Please read the documentation before enabling it to understand the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!   caveats:**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/ce/administration/high_availability/redis.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Replication support</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Slave Redis instance</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master&#x27;] = false # by default this is true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Slave and Sentinel shared configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **Both need to point to the master Redis instance to get replication and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   heartbeat monitoring**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_name&#x27;] = &#x27;gitlab-redis&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_ip&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_port&#x27;] = 6379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Support to run redis slaves in a Docker or NAT environment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! Docs: https://redis.io/topics/replication#configuring-replication-in-docker-and-nat</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;announce_ip&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;announce_port&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **Master password should have the same value defined in</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   redis[&#x27;password&#x27;] to enable the instance to transition to/from</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   master/slave in a failover event.**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_password&#x27;] = &#x27;redis-password-goes-here&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! Increase these values when your slaves can&#x27;t catch up with master</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;client_output_buffer_limit_normal&#x27;] = &#x27;0 0 0&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;client_output_buffer_limit_slave&#x27;] = &#x27;256mb 64mb 60&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;client_output_buffer_limit_pubsub&#x27;] = &#x27;32mb 8mb 60&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#####! Redis snapshotting frequency</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#####! Set to [] to disable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#####! Set to [&#x27;&#x27;] to clear previously set values</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;save&#x27;] = [ &#x27;900 1&#x27;, &#x27;300 10&#x27;, &#x27;60 10000&#x27; ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Web server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#using-a-non-bundled-web-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! When bundled nginx is disabled we need to add the external webserver user to</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! the GitLab webserver group.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;external_users&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;username&#x27;] = &#x27;gitlab-www&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;group&#x27;] = &#x27;gitlab-www&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;uid&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;gid&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;shell&#x27;] = &#x27;/bin/false&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;home&#x27;] = &#x27;/var/opt/gitlab/nginx&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab NGINX</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;client_max_body_size&#x27;] = &#x27;250m&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;redirect_http_to_https&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;redirect_http_to_https_port&#x27;] = 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Most root CA&#x27;s are included by default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_client_certificate&#x27;] = &quot;/etc/gitlab/ssl/ca.crt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! enable/disable 2-way SSL client authentication</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_verify_client&#x27;] = &quot;off&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! if ssl_verify_client on, verification depth in the client certificates chain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_verify_depth&#x27;] = &quot;1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_certificate&#x27;] = &quot;/etc/gitlab/ssl/#{node[&#x27;fqdn&#x27;]}.crt&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_certificate_key&#x27;] = &quot;/etc/gitlab/ssl/#{node[&#x27;fqdn&#x27;]}.key&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_ciphers&#x27;] = &quot;ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_prefer_server_ciphers&#x27;] = &quot;on&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Recommended by: https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##!                   https://cipherli.st/**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_protocols&#x27;] = &quot;TLSv1.2 TLSv1.3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Recommended in: https://nginx.org/en/docs/http/ngx_http_ssl_module.html**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_session_cache&#x27;] = &quot;builtin:1000  shared:SSL:10m&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Default according to https://nginx.org/en/docs/http/ngx_http_ssl_module.html**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_session_timeout&#x27;] = &quot;5m&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_dhparam&#x27;] = nil # Path to dhparams.pem, eg. /etc/gitlab/ssl/dhparams.pem</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;listen_addresses&#x27;] = [&#x27;*&#x27;, &#x27;[::]&#x27;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Defaults to forcing web browsers to always communicate using only HTTPS**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#setting-http-strict-transport-security</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;hsts_max_age&#x27;] = 31536000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;hsts_include_subdomains&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Defaults to stripping path information when making cross-origin requests</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;referrer_policy&#x27;] = &#x27;strict-origin-when-cross-origin&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Docs: http://nginx.org/en/docs/http/ngx_http_gzip_module.html**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_enabled&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Override only if you use a reverse proxy**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#setting-the-nginx-listen-port</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;listen_port&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Override only if your reverse proxy internally communicates over HTTP**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#supporting-proxied-ssl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;listen_https&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;custom_gitlab_server_config&#x27;] = &quot;location ^~ /foo-namespace/bar-project/raw/ {\n deny all;\n}\n&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;custom_nginx_config&#x27;] = &quot;include /etc/nginx/conf.d/example.conf;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_read_timeout&#x27;] = 3600</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_connect_timeout&#x27;] = 300</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_set_headers&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;Host&quot; =&gt; &quot;$http_host_with_default&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Real-IP&quot; =&gt; &quot;$remote_addr&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Forwarded-For&quot; =&gt; &quot;$proxy_add_x_forwarded_for&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Forwarded-Proto&quot; =&gt; &quot;https&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Forwarded-Ssl&quot; =&gt; &quot;on&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;Upgrade&quot; =&gt; &quot;$http_upgrade&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;Connection&quot; =&gt; &quot;$connection_upgrade&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_cache_path&#x27;] = &#x27;proxy_cache keys_zone=gitlab:10m max_size=1g levels=1:2&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_cache&#x27;] = &#x27;gitlab&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;http2_enabled&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;real_ip_trusted_addresses&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;real_ip_header&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;real_ip_recursive&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;custom_error_pages&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;404&#x27; =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     &#x27;title&#x27; =&gt; &#x27;Example title&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     &#x27;header&#x27; =&gt; &#x27;Example header&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     &#x27;message&#x27; =&gt; &#x27;Example message&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Advanced settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/nginx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/nginx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;worker_processes&#x27;] = 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;worker_connections&#x27;] = 10240</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;log_format&#x27;] = &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; $status $body_bytes_sent &quot;$http_referer&quot; &quot;$http_user_agent&quot;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;sendfile&#x27;] = &#x27;on&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;tcp_nopush&#x27;] = &#x27;on&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;tcp_nodelay&#x27;] = &#x27;on&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip&#x27;] = &quot;on&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_http_version&#x27;] = &quot;1.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_comp_level&#x27;] = &quot;2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_proxied&#x27;] = &quot;any&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_types&#x27;] = [ &quot;text/plain&quot;, &quot;text/css&quot;, &quot;application/x-javascript&quot;, &quot;text/xml&quot;, &quot;application/xml&quot;, &quot;application/xml+rss&quot;, &quot;text/javascript&quot;, &quot;application/json&quot; ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;keepalive_timeout&#x27;] = 65</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;cache_max_size&#x27;] = &#x27;5000m&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;server_names_hash_bucket_size&#x27;] = 64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! These paths have proxy_request_buffering disabled</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;request_buffering_off_path_regex&#x27;] = &quot;\.git/git-receive-pack$|\.git/info/refs?service=git-receive-pack$|\.git/gitlab-lfs/objects|\.git/info/lfs/objects/batch$&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Nginx status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;status&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;enable&quot; =&gt; true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;listen_addresses&quot; =&gt; [&quot;127.0.0.1&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;fqdn&quot; =&gt; &quot;dev.example.com&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;port&quot; =&gt; 9999,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;vts_enable&quot; =&gt; true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;options&quot; =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;stub_status&quot; =&gt; &quot;on&quot;, # Turn on stats</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;server_tokens&quot; =&gt; &quot;off&quot;, # Don&#x27;t show the version of NGINX</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;access_log&quot; =&gt; &quot;off&quot;, # Disable logs for stats</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;allow&quot; =&gt; &quot;127.0.0.1&quot;, # Only allow access from localhost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;deny&quot; =&gt; &quot;all&quot; # Deny access to anyone else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Logging</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/logs.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_size&#x27;] = 200 * 1024 * 1024 # rotate after 200 MB of log data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_num&#x27;] = 30 # keep 30 rotated log files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_timeout&#x27;] = 24 * 60 * 60 # rotate after 24 hours</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_filter&#x27;] = &quot;gzip&quot; # compress logs with gzip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_udp&#x27;] = nil # transmit log messages via UDP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_prefix&#x27;] = nil # custom prefix for log messages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_frequency&#x27;] = &quot;daily&quot; # rotate logs daily</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_maxsize&#x27;] = nil # rotate logs when they grow bigger than size bytes even before the specified time interval (daily, weekly, monthly, or yearly)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_size&#x27;] = nil # do not rotate by size by default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_rotate&#x27;] = 30 # keep 30 rotated logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_compress&#x27;] = &quot;compress&quot; # see &#x27;man logrotate&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_method&#x27;] = &quot;copytruncate&quot; # see &#x27;man logrotate&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_postrotate&#x27;] = nil # no postrotate command by default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_dateformat&#x27;] = nil # use date extensions for rotated files rather than numbers e.g. a value of &quot;-%Y-%m-%d&quot; would give rotated files like production.log-2016-03-09.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### UDP log forwarding</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: http://docs.gitlab.com/omnibus/settings/logs.html#udp-log-forwarding</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! remote host to ship log messages to via UDP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;udp_log_shipping_host&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! override the hostname used when logs are shipped via UDP,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##  by default the system hostname will be used.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;udp_log_shipping_hostname&#x27;] = nil</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! remote port to ship log messages to via UDP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;udp_log_shipping_port&#x27;] = 514</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Logrotate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/logs.html#logrotate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! You can disable built in logrotate feature.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logrotate[&#x27;enable&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Users and groups accounts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Disable management of users and groups accounts.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Set only if creating accounts manually**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/configuration.html#disable-user-and-group-account-management</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># manage_accounts[&#x27;enable&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Storage directories</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Disable managing storage directories</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/configuration.html#disable-storage-directories-management</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Set only if the select directories are created manually**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># manage_storage_directories[&#x27;enable&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># manage_storage_directories[&#x27;manage_etc&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Runtime directory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com//omnibus/settings/configuration.html#configuring-runtime-directory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># runtime_dir &#x27;/run&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Git</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Advanced setting for configuring git system settings for omnibus-gitlab</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! internal git</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! For multiple options under one header use array of comma separated values,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! eg.:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! { &quot;receive&quot; =&gt; [&quot;fsckObjects = true&quot;], &quot;alias&quot; =&gt; [&quot;st = status&quot;, &quot;co = checkout&quot;] }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># omnibus_gitconfig[&#x27;system&#x27;] = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;pack&quot; =&gt; [&quot;threads = 1&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;receive&quot; =&gt; [&quot;fsckObjects = true&quot;, &quot;advertisePushOptions = true&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;repack&quot; =&gt; [&quot;writeBitmaps = true&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;transfer&quot; =&gt; [&quot;hideRefs=^refs/tmp/&quot;, &quot;hideRefs=^refs/keep-around/&quot;, &quot;hideRefs=^refs/remotes/&quot;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/ce/pages/administration.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Define to enable GitLab Pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># pages_external_url &quot;http://pages.example.com/&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;enable&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to expose GitLab Pages on external IP address, serving the HTTP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;external_http&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to expose GitLab Pages on external IP address, serving the HTTPS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;external_https&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to use the default list of cipher suites</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;insecure_ciphers&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to enable health check endpoint on GitLab Pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;status_uri&#x27;] = &quot;/@status&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Tune the maximum number of concurrent connections GitLab Pages will handle.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! This should be in the range 1 - 10000, defaulting to 5000.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;max_connections&#x27;] = 5000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to use JSON structured logging in GitLab Pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;log_format&#x27;] = &quot;json&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure verbose logging for GitLab Pages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;log_verbose&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Error Reporting and Logging with Sentry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;sentry_enabled&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;sentry_dsn&#x27;] = &#x27;https://&lt;key&gt;@sentry.io/&lt;project&gt;&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;sentry_environment&#x27;] = &#x27;production&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Listen for requests forwarded by reverse proxy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;listen_proxy&#x27;] = &quot;localhost:8090&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure GitLab Pages to use an HTTP Proxy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;http_proxy&#x27;] = &quot;http://example:8080&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;redirect_http&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;use_http2&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/gitlab-pages&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/gitlab-pages&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;artifacts_server&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;artifacts_server_url&#x27;] = nil # Defaults to external_url + &#x27;/api/v4&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;artifacts_server_timeout&#x27;] = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Environments that do not support bind-mounting should set this parameter to</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! true. This is incompatible with the artifacts server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;inplace_chroot&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Prometheus metrics for Pages docs: https://gitlab.com/gitlab-org/gitlab-pages/#enable-prometheus-metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;metrics_address&#x27;] = &quot;:9235&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Specifies the minimum SSL/TLS version (&quot;ssl3&quot;, &quot;tls1.0&quot;, &quot;tls1.1&quot; or &quot;tls1.2&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;tls_min_version&#x27;] = &quot;ssl3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Specifies the maximum SSL/TLS version (&quot;ssl3&quot;, &quot;tls1.0&quot;, &quot;tls1.1&quot; or &quot;tls1.2&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;tls_max_version&#x27;] = &quot;tls1.2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure the pages admin API</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_secret_token&#x27;] = &#x27;custom secret&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_https_listener&#x27;] = &#x27;0.0.0.0:5678&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_https_cert&#x27;] = &#x27;/etc/gitlab/pages-admin.crt&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_https_key&#x27;] = &#x27;/etc/gitlab/pages-admin.key&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Client side configuration for gitlab-pages admin API, in case pages runs on a different host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_admin_address&#x27;] = &#x27;pages.gitlab.example.com:5678&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_admin_certificate&#x27;] = &#x27;/etc/gitlab/pages-admin.crt&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Pages access control</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;access_control&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;gitlab_id&#x27;] = nil # Automatically generated if not present</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;gitlab_secret&#x27;] = nil # Generated if not present</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;auth_redirect_uri&#x27;] = nil # Defaults to projects subdomain of pages_external_url and + &#x27;/auth&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;gitlab_server&#x27;] = nil # Defaults to external_url</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;auth_secret&#x27;] = nil # Generated if not present</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Define custom gitlab-pages HTTP headers for the whole instance</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;headers&#x27;] = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Pages NGINX</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># All the settings defined in the &quot;GitLab Nginx&quot; section are also available in</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># this &quot;GitLab Pages NGINX&quot; section, using the key `pages_nginx`.  However,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># those settings should be explicitly set. That is, settings given as</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># `nginx[&#x27;some_setting&#x27;]` WILL NOT be automatically replicated as</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># `pages_nginx[&#x27;some_setting&#x27;]` and should be set separately.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Below you can find settings that are exclusive to &quot;GitLab Pages NGINX&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># pages_nginx[&#x27;enable&#x27;] = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_path&#x27;] = &quot;/var/opt/gitlab/gitlab-rails/shared/pages&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab CI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/ce/ci/quick_start/README.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_ci[&#x27;gitlab_ci_all_broken_builds&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_ci[&#x27;gitlab_ci_add_pusher&#x27;] = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_ci[&#x27;builds_directory&#x27;] = &#x27;/var/opt/gitlab/gitlab-ci/builds&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tnuT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_tmcC" aria-hidden="true"><svg class="copyButtonIcon_Azkd" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_pt5v" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/../notes/service/forge/gitlab/gitlab-config.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_BDD2" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_qlge"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-04-29T09:09:33.000Z">Apr 29, 2021</time></b> by <b>wener</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes/service/forge/gitlab/cicd"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GitaLab持续集成持续交付</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes/service/forge/gitlab/faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Gitlab FAQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pluA thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#基础配置" class="table-of-contents__link toc-highlight">基础配置</a></li><li><a href="#授权配置" class="table-of-contents__link toc-highlight">授权配置</a><ul><li><a href="#ldap" class="table-of-contents__link toc-highlight">LDAP</a></li><li><a href="#openid-connect" class="table-of-contents__link toc-highlight">OpenID Connect</a></li></ul></li><li><a href="#pages-配置" class="table-of-contents__link toc-highlight">Pages 配置</a></li><li><a href="#gitlabrb" class="table-of-contents__link toc-highlight">gitlab.rb</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/notes/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              -
              <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
              <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
              </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_QEvt"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_QM0D themedImage--light_s8Fn footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_QM0D themedImage--dark_Yfiw footer__logo"></div><div class="footer__copyright">Copyright © 1992-2022 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2022-11-26 18:38</div></div></div></footer></div>
<script src="/assets/js/runtime~main.954d1753.js"></script>
<script src="/assets/js/main.bff4f121.js"></script>
</body>
</html>