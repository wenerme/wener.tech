<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"><title data-react-helmet="true">GitLab配置 | Wener Live &amp; Life</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/service/forge/gitlab/gitlab-config"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="GitLab配置 | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="* 组建"><meta data-react-helmet="true" property="og:description" content="* 组建"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wener.me/notes/service/forge/gitlab/gitlab-config"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/service/forge/gitlab/gitlab-config" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/service/forge/gitlab/gitlab-config" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1f8f45d9.css">
<link rel="preload" href="/assets/js/runtime~main.d9a0a08e.js" as="script">
<link rel="preload" href="/assets/js/main.a026923d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Wener</b></a><a class="navbar__item navbar__link" href="/notes/note">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">工具</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">自我成长</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Java</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Web</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">语言</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AlpineLinux</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Docker</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">虚拟化</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">操作系统</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VoIP</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">开发</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">DevOps</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">数据库</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">消息队列</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">安全</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">服务</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/service-awesome">Service Awesome</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Auth</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">内容管理</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">客户关系管理</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Office</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">文件</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">存储</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">网络</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">电信</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">DNS</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">仓库</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Forge</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/forge">Forge</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Gitlab</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-ci-cookbook">Gitlab CI 技巧</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-ci-yml">gitlab-ci.yml</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-cicd">GitaLab持续集成持续交付</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/service/forge/gitlab/gitlab-config">GitLab配置</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-faq">Gitlab FAQ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-k8s">GitLab K8S 集成</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-repo">Gitlab Repository</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-runner">Gitlab Runner</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitlab/gitlab-sast">Gitlab SAST</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/git/git">Git</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/git/git-awesome">Git Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/git/git-branch">Git Branch</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/git/git-branch-faq">Git Branch FAQ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/git/git-faq">Git FAQ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/git/git-hook">Git Hook</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/git/gitflow">gitflow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/gitea">Gitea</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/github">Github</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/forge/github-faq">Github FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">CN</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">数据</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/analytics/analytics-awesome">Analytics Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/analytics/matomo">Matomo</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/baas/appwrite">AppWrite</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/baas/baas-awesome">BaaS Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/baas/README">Backend as a Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/bi/apache-superset">Apache Superset</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/bi/bi-awesome">BI Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/bi/bi-faq">BI FAQ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/bi/cubejs">CubeJS</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/bi/cubejs-conf">CubeJS 配置</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/bi/cubejs-schema">CubeJS Schema</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/bi/cubejs-store">cubestore</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/download/aria2">aria2</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/download/transmission">transmission</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/download/youtube-dl">youtube-dl</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/e-commerce/e-commerce">E-Commerce</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/email/email">邮件</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/email/email-awesome">EMail Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/email/james">Apache James</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/im/im-awesome">IM Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/im/irc/irc">IRC</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/im/zulip">zulip</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/low-code/low-code-awesome">Low Code Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/avif">AVIF</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/butteraugli">butteraugli</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/ffmpeg">ffmpeg</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/ffmpeg-faq">FFMpeg FAQ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/jellyfin">Jellyfin</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/jpeg-xl">JPEG XL</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/m3u8">M3U8</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/media-awesome">Media Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/media-faq">Media FAQ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/minidlna">MiniDLNA</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/mpv">mpv</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/media/vips">vips</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/p2p/p2p-awesome">P2P Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/p2p/torrent-awesome">Torrent Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/printing/printing-awesome">Printing Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/realtime/realtime-awesome">RealTime Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/resource/resource-awesome">资源站</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/selfhost/bitwarden">bitwarden</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/selfhost/photoprism">PhotoPrism</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/selfhost/selfhost-awesome">Selfhost Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/selfhost/stash">stash</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/torrent/glossary">Torrent 词汇</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/workflow/cadence">Cadence</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/workflow/flogo">flogo</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/workflow/n8n">n8n</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/workflow/workflow">Workflow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/workflow/workflow-awesome">Workflow Awesome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/service/workflow/workflow-faq">Workflow FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">运维</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">指南</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">硬件</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">算法</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">健康</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">参考</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">工具</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Gitlab 配置</h1></header><ul><li>组建<ul><li>gitaly - 提供 RPC 操作 Git 仓库的服务</li></ul></li><li><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/files/gitlab-config-template/gitlab.rb.template" target="_blank" rel="noopener noreferrer">gitlab.rb.template</a><ul><li>ruby 配置文件</li><li>位于 <code>/etc/gitlab/gitlab.rb</code></li><li>修改后操作 <code>gitlab-ctl reconfigure</code> 可让服务器不重启的情况下从新配置</li></ul></li><li><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/gitlab.yml.md" target="_blank" rel="noopener noreferrer">gitlab.yml</a> - <a href="https://gitlab.com/gitlab-org/gitlab/blob/master/config/gitlab.yml.example" target="_blank" rel="noopener noreferrer">gitlab.yml.example</a><ul><li>yaml 格式的配置文件</li><li>会映射为 ruby 配置</li><li>配置后会生成 <code>/var/opt/gitlab/gitlab-rails/etc/gitlab.yml</code></li></ul></li><li><a href="https://docs.gitlab.com/omnibus/settings/configuration.html" target="_blank" rel="noopener noreferrer">配置</a></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rb"><pre tabindex="0" class="prism-code language-rb codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 可以引入外部配置文件</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from_file &quot;/home/admin/external_gitlab.rb&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="基础配置"></a>基础配置<a class="hash-link" href="#基础配置" title="Direct link to heading">#</a></h2><ul><li>如果想要开启 Git over SSH - 那么只能是将域名解析指向 Gitlab<ul><li>或者单独转发单个端口</li><li>做不到外部反向代理+SSH - 因为 SSH 没有域名概念 - 也不适合将整个外部的 22 都指向 Gitlab</li></ul></li><li>注意<ul><li>配置了 external_url 后，如果为 https 则只监听 https - <a href="https://gitlab.com/gitlab-org/omnibus-gitlab/issues/1891" target="_blank" rel="noopener noreferrer">#1891</a> - 同时监听 80 和 443</li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rb"><pre tabindex="0" class="prism-code language-rb codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 用于 SSH 的主机名</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_ssh_host&#x27;] = &#x27;ssh.host_example.com&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;time_zone&#x27;] = &#x27;UTC&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="授权配置"></a>授权配置<a class="hash-link" href="#授权配置" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ldap"></a>LDAP<a class="hash-link" href="#ldap" title="Direct link to heading">#</a></h3><ul><li>由于 Git 需要密码 - 想要中心化管理密码只能使用 LDAP</li><li>LDAP 可以禁止登陆 - 例如 只允许 OpenID 登陆</li><li><a href="https://docs.gitlab.com/ee/administration/auth/ldap.html" target="_blank" rel="noopener noreferrer">LDAP集成</a> <ul><li>CE 版本只支持作为登陆</li><li>EE 支持同步账号和分组</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="openid-connect"></a>OpenID Connect<a class="hash-link" href="#openid-connect" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pages-配置"></a>Pages 配置<a class="hash-link" href="#pages-配置" title="Direct link to heading">#</a></h2><ul><li>注意<ul><li>不能用 gitlab 的二级域名</li><li>只能通过域名访问</li><li>默认存储目录 <code>/var/opt/gitlab/gitlab-rails/shared/pages</code></li><li>如果使用自定义域名，则可能需要开启反向端口</li></ul></li><li><a href="https://docs.gitlab.com/ee/administration/pages" target="_blank" rel="noopener noreferrer">Pages 管理</a></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rb"><pre tabindex="0" class="prism-code language-rb codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 启用 Pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 访问地址</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 例如项目 wener/app 则地址为 wener.pages.wener.me/app 可以测试访问</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># curl -H &#x27;Host: wener.pages.wener.me&#x27;  gitlab.wener.me/app</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果配置为 http 需要配置证书或者会自动从 let&#x27;s encrypt 获取</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_external_url &#x27;http://pages.wener.me&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果配置为 https 没有配置 cert 则会使用域名拼 </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 例如  &quot;/etc/gitlab/ssl/example.io.crt&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果想要 https 但是又没有证书，可以考虑配置为主域名证书，然后在外面反向代理的时候忽略验证</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 如果没有 cert 会一直失败 cannot load certificate &quot;/etc/gitlab/ssl/pages.example.io.crt&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_nginx[&#x27;redirect_http_to_https&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_nginx[&#x27;ssl_certificate&#x27;] = &quot;/etc/gitlab/ssl/gitlab.example.com.crt&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pages_nginx[&#x27;ssl_certificate_key&#x27;] = &quot;/etc/gitlab/ssl/gitlab.example.com.key&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 查看状态的路径</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;status_uri&#x27;] = &quot;/@status&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 避免 bind mount - 在 docker 里默认没有权限</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 会 mount 在 /var/opt/gitlab/gitlab-pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;inplace_chroot&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 存储路径</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 默认 /var/opt/gitlab/gitlab-rails/shared/pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_path&#x27;] = &quot;/mnt/storage/pages&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># pages 监听的端口</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 默认是 localhost:8090</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 例如项目 wener/app 可以通过如下方式访问 - 注意协议是 HTTP 和配置的外部 URL 有关</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># curl -H &#x27;Host: wener.pages.wener.me&#x27;  localhost:8090/app</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_pages[&#x27;listen_proxy&#x27;] = &quot;localhost:8090&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="gitlabrb"></a>gitlab.rb<a class="hash-link" href="#gitlabrb" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rb"><pre tabindex="0" class="prism-code language-rb codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Email Settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_enabled&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_from&#x27;] = &#x27;example@example.com&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_display_name&#x27;] = &#x27;Example&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_reply_to&#x27;] = &#x27;noreply@example.com&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_email_subject_suffix&#x27;] = &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab user privileges</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_default_can_create_group&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># default true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;gitlab_username_changing_enabled&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 反向代理地址</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;trusted_proxies&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 监控白名单</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;monitoring_whitelist&#x27;] = [&#x27;127.0.0.0/8&#x27;, &#x27;::1/128&#x27;]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Email account username</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **With third party providers, this is usually the full email address.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **With self-hosted email servers, this is usually the user part of the</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   email address.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_email&#x27;] = &quot;gitlab-incoming@gmail.com&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_password&#x27;] = &quot;[REDACTED]&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### IMAP Settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_host&#x27;] = &quot;imap.gmail.com&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_port&#x27;] = 993</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_ssl&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_start_tls&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Incoming Mailbox Settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! The mailbox where incoming mail will end up. Usually &quot;inbox&quot;.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_mailbox_name&#x27;] = &quot;inbox&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! The IDLE command timeout.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;incoming_email_idle_timeout&#x27;] = 60</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Git LFS</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;lfs_object_store_connection&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;provider&#x27; =&gt; &#x27;AWS&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;region&#x27; =&gt; &#x27;eu-west-1&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_access_key_id&#x27; =&gt; &#x27;AWS_ACCESS_KEY_ID&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_secret_access_key&#x27; =&gt; &#x27;AWS_SECRET_ACCESS_KEY&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # # The below options configure an S3 compatible host instead of AWS</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;aws_signature_version&#x27; =&gt; 4, # For creation of signed URLs. Set to 2 if provider does not support v4.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;endpoint&#x27; =&gt; &#x27;https://s3.amazonaws.com&#x27;, # default: nil - Useful for S3 compliant services such as DigitalOcean Spaces</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;host&#x27; =&gt; &#x27;s3.amazonaws.com&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;path_style&#x27; =&gt; false # Use &#x27;host/bucket_name/object&#x27; instead of &#x27;bucket_name.host/object&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab uploads</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/ee/administration/uploads.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;uploads_object_store_connection&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;provider&#x27; =&gt; &#x27;AWS&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;region&#x27; =&gt; &#x27;eu-west-1&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_access_key_id&#x27; =&gt; &#x27;AWS_ACCESS_KEY_ID&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;aws_secret_access_key&#x27; =&gt; &#x27;AWS_SECRET_ACCESS_KEY&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # # The below options configure an S3 compatible host instead of AWS</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;host&#x27; =&gt; &#x27;s3.amazonaws.com&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;aws_signature_version&#x27; =&gt; 4, # For creation of signed URLs. Set to 2 if provider does not support v4.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;endpoint&#x27; =&gt; &#x27;https://s3.amazonaws.com&#x27;, # default: nil - Useful for S3 compliant services such as DigitalOcean Spaces</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # &#x27;path_style&#x27; =&gt; false # Use &#x27;host/bucket_name/object&#x27; instead of &#x27;bucket_name.host/object&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;mattermost_host&#x27;] = &quot;https://mattermost.example.com&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### LDAP Settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/ldap.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Be careful not to break the indentation in the ldap_servers block. It is</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!   in yaml format and the spaces must be retained. Using tabs will not work.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;ldap_enabled&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **remember to close this block with &#x27;EOS&#x27; below**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;ldap_servers&#x27;] = YAML.load &lt;&lt;-&#x27;EOS&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   main: # &#x27;main&#x27; is the GitLab &#x27;provider ID&#x27; of this LDAP server</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     label: &#x27;LDAP&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     host: &#x27;_your_ldap_server&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     port: 389</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     uid: &#x27;sAMAccountName&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     bind_dn: &#x27;_the_full_dn_of_the_user_you_will_bind_with&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     password: &#x27;_the_password_of_the_bind_user&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     encryption: &#x27;plain&#x27; # &quot;start_tls&quot; or &quot;simple_tls&quot; or &quot;plain&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     verify_certificates: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     smartcard_auth: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     active_directory: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     allow_username_or_email_login: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     lowercase_usernames: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     block_auto_created_users: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     base: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     user_filter: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     ## EE only</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     group_base: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     admin_group: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     sync_ssh_keys: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   secondary: # &#x27;secondary&#x27; is the GitLab &#x27;provider ID&#x27; of second LDAP server</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     label: &#x27;LDAP&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     host: &#x27;_your_ldap_server&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     port: 389</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     uid: &#x27;sAMAccountName&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     bind_dn: &#x27;_the_full_dn_of_the_user_you_will_bind_with&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     password: &#x27;_the_password_of_the_bind_user&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     encryption: &#x27;plain&#x27; # &quot;start_tls&quot; or &quot;simple_tls&quot; or &quot;plain&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     verify_certificates: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     smartcard_auth: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     active_directory: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     allow_username_or_email_login: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     lowercase_usernames: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     block_auto_created_users: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     base: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     user_filter: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     ## EE only</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     group_base: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     admin_group: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     sync_ssh_keys: false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># EOS</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Backup Settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/backups.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;manage_backup_path&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_path&#x27;] = &quot;/var/opt/gitlab/backups&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! The duration in seconds to keep backups before they are allowed to be deleted</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_keep_time&#x27;] = 604800</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_upload_connection&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;provider&#x27; =&gt; &#x27;AWS&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;region&#x27; =&gt; &#x27;eu-west-1&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;aws_access_key_id&#x27; =&gt; &#x27;AKIAKIAKI&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;aws_secret_access_key&#x27; =&gt; &#x27;secret123&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_upload_remote_directory&#x27;] = &#x27;my.s3.bucket&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;backup_multipart_chunk_size&#x27;] = 104857600</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Extra customization</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;extra_google_analytics_id&#x27;] = &#x27;_your_tracking_id&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;extra_piwik_url&#x27;] = &#x27;_your_piwik_url&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;extra_piwik_site_id&#x27;] = &#x27;_your_piwik_site_id&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/environment-variables.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;env&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;BUNDLE_GEMFILE&#x27; =&gt; &quot;/opt/gitlab/embedded/service/gitlab-rails/Gemfile&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;PATH&#x27; =&gt; &quot;/opt/gitlab/bin:/opt/gitlab/embedded/bin:/bin:/usr/bin&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Change the initial default admin password and shared runner registration tokens.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **Only applicable on initial setup, changing these settings after database</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   is created and seeded won&#x27;t yield any change.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;initial_root_password&#x27;] = &quot;password&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;initial_shared_runners_registration_token&#x27;] = &quot;token&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab database settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/database.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Only needed if you use an external database.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_adapter&#x27;] = &quot;postgresql&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_encoding&#x27;] = &quot;unicode&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_collation&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_database&#x27;] = &quot;gitlabhq_production&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_pool&#x27;] = 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_username&#x27;] = &quot;gitlab&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_password&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_host&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_port&#x27;] = 5432</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_socket&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_sslmode&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_sslcompression&#x27;] = 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_sslrootcert&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_prepared_statements&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;db_statements_limit&#x27;] = 1000</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab Redis settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Connect to your own Redis instance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/redis.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Redis TCP connection</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_host&#x27;] = &quot;127.0.0.1&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_port&#x27;] = 6379</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_ssl&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_password&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_database&#x27;] = 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_enable_client&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Redis local UNIX socket (will be disabled if TCP method is used)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;redis_socket&#x27;] = &quot;/var/opt/gitlab/redis/redis.socket&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### GitLab email server settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/smtp.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Use smtp instead of sendmail/postfix.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_address&#x27;] = &quot;smtp.server&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_port&#x27;] = 465</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_user_name&#x27;] = &quot;smtp user&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_password&#x27;] = &quot;smtp password&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_domain&#x27;] = &quot;example.com&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_authentication&#x27;] = &quot;login&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_enable_starttls_auto&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;smtp_tls&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Can be: &#x27;none&#x27;, &#x27;peer&#x27;, &#x27;client_once&#x27;, &#x27;fail_if_no_peer_cert&#x27;**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: http://api.rubyonrails.org/classes/ActionMailer/Base.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;smtp_openssl_verify_mode&#x27;] = &#x27;none&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;smtp_ca_path&#x27;] = &quot;/etc/ssl/certs&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;smtp_ca_file&#x27;] = &quot;/etc/ssl/certs/ca-certificates.crt&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Container Registry settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/ce/administration/container_registry.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># registry_external_url &#x27;https://registry.gitlab.example.com&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Settings used by GitLab application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_enabled&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_host&#x27;] = &quot;registry.gitlab.example.com&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_port&#x27;] = &quot;5005&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitlab_rails[&#x27;registry_path&#x27;] = &quot;/var/opt/gitlab/gitlab-rails/shared/registry&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Error Reporting and Logging with Sentry</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_enabled&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_dsn&#x27;] = &#x27;https://&lt;key&gt;@sentry.io/&lt;project&gt;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_clientside_dsn&#x27;] = &#x27;https://&lt;key&gt;@sentry.io/&lt;project&gt;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;sentry_environment&#x27;] = &#x27;production&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Workhorse</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://gitlab.com/gitlab-org/gitlab-workhorse/blob/master/README.md</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;ha&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;listen_network&#x27;] = &quot;unix&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;listen_umask&#x27;] = 000</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;listen_addr&#x27;] = &quot;/var/opt/gitlab/gitlab-workhorse/socket&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_workhorse[&#x27;auth_backend&#x27;] = &quot;http://localhost:8080&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab PostgreSQL</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Changing any of these settings requires a restart of postgresql.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! By default, reconfigure reloads postgresql if it is running. If you</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! change any of these settings, be sure to run `gitlab-ctl restart postgresql`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! after reconfigure in order for the changes to take effect.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;listen_address&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;port&#x27;] = 5432</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;data_dir&#x27;] = &quot;/var/opt/gitlab/postgresql/data&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **recommend value is 1/4 of total RAM, up to 14GB.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shared_buffers&#x27;] = &quot;256MB&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Advanced settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ha&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/postgresql&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/postgresql&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;username&#x27;] = &quot;gitlab-psql&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;group&#x27;] = &quot;gitlab-psql&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! `SQL_USER_PASSWORD_HASH` can be generated using the command `gitlab-ctl pg-password-md5 gitlab`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_user_password&#x27;] = &#x27;SQL_USER_PASSWORD_HASH&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;uid&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;gid&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shell&#x27;] = &quot;/bin/sh&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;home&#x27;] = &quot;/var/opt/gitlab/postgresql&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;user_path&#x27;] = &quot;/opt/gitlab/embedded/bin:/opt/gitlab/bin:$PATH&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_user&#x27;] = &quot;gitlab&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_connections&#x27;] = 200</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;md5_auth_cidr_addresses&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;trust_auth_cidr_addresses&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;wal_buffers&#x27;] = &quot;-1&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_max_workers&#x27;] = &quot;3&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_freeze_max_age&#x27;] = &quot;200000000&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_statement&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;track_activity_query_size&#x27;] = &quot;1024&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shared_preload_libraries&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;dynamic_shared_memory_type&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;hot_standby&#x27;] = &quot;off&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### SSL settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># See https://www.postgresql.org/docs/9.6/static/runtime-config-connection.html#GUC-SSL-CERT-FILE for more details</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl&#x27;] = &#x27;on&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_ciphers&#x27;] = &#x27;HIGH:MEDIUM:+3DES:!aNULL:!SSLv3:!TLSv1&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_cert_file&#x27;] = &#x27;server.crt&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_key_file&#x27;] = &#x27;server.key&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_ca_file&#x27;] = &#x27;/opt/gitlab/embedded/ssl/certs/cacert.pem&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;ssl_crl_file&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Replication settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Note, some replication settings do not require a full restart. They are documented below.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;wal_level&#x27;] = &quot;hot_standby&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_wal_senders&#x27;] = 5</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_replication_slots&#x27;] = 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_locks_per_transaction&#x27;] = 128</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Backup/Archive settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;archive_mode&#x27;] = &quot;off&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Changing any of these settings only requires a reload of postgresql. You do not need to</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! restart postgresql if you change any of these and run reconfigure.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;work_mem&#x27;] = &quot;16MB&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;maintenance_work_mem&#x27;] = &quot;16MB&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_segments&#x27;] = 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_timeout&#x27;] = &quot;5min&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_completion_target&#x27;] = 0.9</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;effective_io_concurrency&#x27;] = 1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;checkpoint_warning&#x27;] = &quot;30s&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;effective_cache_size&#x27;] = &quot;1MB&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shmmax&#x27;] =  17179869184 # or 4294967295</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;shmall&#x27;] =  4194304 # or 1048575</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum&#x27;] = &quot;on&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_autovacuum_min_duration&#x27;] = &quot;-1&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_naptime&#x27;] = &quot;1min&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_threshold&#x27;] = &quot;50&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_analyze_threshold&#x27;] = &quot;50&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_scale_factor&#x27;] = &quot;0.02&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_analyze_scale_factor&#x27;] = &quot;0.01&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_cost_delay&#x27;] = &quot;20ms&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;autovacuum_vacuum_cost_limit&#x27;] = &quot;-1&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;statement_timeout&#x27;] = &quot;60000&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;idle_in_transaction_session_timeout&#x27;] = &quot;60000&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_line_prefix&#x27;] = &quot;%a&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_worker_processes&#x27;] = 8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_parallel_workers_per_gather&#x27;] = 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_lock_waits&#x27;] = 1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;deadlock_timeout&#x27;] = &#x27;5s&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;track_io_timing&#x27;] = 0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;default_statistics_target&#x27;] = 1000</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Available in PostgreSQL 9.6 and later</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;min_wal_size&#x27;] = 80MB</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_wal_size&#x27;] = 1GB</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Backup/Archive settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;archive_command&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;archive_timeout&#x27;] = &quot;0&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Replication settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_replication_user&#x27;] = &quot;gitlab_replicator&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;sql_replication_password&#x27;] = &quot;md5 hash of postgresql password&quot; # You can generate with `gitlab-ctl pg-password-md5 &lt;dbuser&gt;`</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;wal_keep_segments&#x27;] = 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_standby_archive_delay&#x27;] = &quot;30s&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;max_standby_streaming_delay&#x27;] = &quot;30s&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;synchronous_commit&#x27;] = on</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;synchronous_standby_names&#x27;] = &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;hot_standby_feedback&#x27;] = &#x27;off&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;random_page_cost&#x27;] = 2.0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_temp_files&#x27;] = -1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;log_checkpoints&#x27;] = &#x27;off&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># To add custom entries to pg_hba.conf use the following</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># postgresql[&#x27;custom_pg_hba_entries&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   APPLICATION: [ # APPLICATION should identify what the settings are used for</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       type: example,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       database: example,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       user: example,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       cidr: example,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       method: example,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#       option: example</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># See https://www.postgresql.org/docs/9.6/static/auth-pg-hba-conf.html for an explanation</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># of the values</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Redis</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Can be disabled if you are using your own Redis instance.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/redis.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;ha&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;hz&#x27;] = 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/redis&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/redis&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;username&#x27;] = &quot;gitlab-redis&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;group&#x27;] = &quot;gitlab-redis&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxclients&#x27;] = &quot;10000&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxmemory&#x27;] = &quot;0&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxmemory_policy&#x27;] = &quot;noeviction&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;maxmemory_samples&#x27;] = &quot;5&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;tcp_backlog&#x27;] = 511</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;tcp_timeout&#x27;] = &quot;60&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;tcp_keepalive&#x27;] = &quot;300&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;uid&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;gid&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Disable or obfuscate unnecessary redis command names</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Uncomment and edit this block to add or remove entries.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### See https://docs.gitlab.com/omnibus/settings/redis.html#renamed-commands</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### for detailed usage</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###  </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;rename_commands&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;KEYS&#x27;: &#x27;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **To enable only Redis service in this machine, uncomment</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!   one of the lines below (choose master or slave instance types).**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/omnibus/settings/redis.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!       https://docs.gitlab.com/ce/administration/high_availability/redis.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis_master_role[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis_slave_role[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Redis TCP support (will disable UNIX socket transport)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;bind&#x27;] = &#x27;0.0.0.0&#x27; # or specify an IP to bind to a single one</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;port&#x27;] = 6379</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;password&#x27;] = &#x27;redis-password-goes-here&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Redis Sentinel support</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **You need a master slave Redis replication to be able to do failover**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! **Please read the documentation before enabling it to understand the</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###!   caveats:**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">###! Docs: https://docs.gitlab.com/ce/administration/high_availability/redis.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Replication support</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Slave Redis instance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master&#x27;] = false # by default this is true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Slave and Sentinel shared configuration</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **Both need to point to the master Redis instance to get replication and</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   heartbeat monitoring**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_name&#x27;] = &#x27;gitlab-redis&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_ip&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_port&#x27;] = 6379</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#### Support to run redis slaves in a Docker or NAT environment</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! Docs: https://redis.io/topics/replication#configuring-replication-in-docker-and-nat</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;announce_ip&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;announce_port&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! **Master password should have the same value defined in</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   redis[&#x27;password&#x27;] to enable the instance to transition to/from</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####!   master/slave in a failover event.**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;master_password&#x27;] = &#x27;redis-password-goes-here&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">####! Increase these values when your slaves can&#x27;t catch up with master</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;client_output_buffer_limit_normal&#x27;] = &#x27;0 0 0&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;client_output_buffer_limit_slave&#x27;] = &#x27;256mb 64mb 60&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;client_output_buffer_limit_pubsub&#x27;] = &#x27;32mb 8mb 60&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#####! Redis snapshotting frequency</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#####! Set to [] to disable</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#####! Set to [&#x27;&#x27;] to clear previously set values</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># redis[&#x27;save&#x27;] = [ &#x27;900 1&#x27;, &#x27;300 10&#x27;, &#x27;60 10000&#x27; ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Web server</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#using-a-non-bundled-web-server</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! When bundled nginx is disabled we need to add the external webserver user to</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! the GitLab webserver group.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;external_users&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;username&#x27;] = &#x27;gitlab-www&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;group&#x27;] = &#x27;gitlab-www&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;uid&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;gid&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;shell&#x27;] = &#x27;/bin/false&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># web_server[&#x27;home&#x27;] = &#x27;/var/opt/gitlab/nginx&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab NGINX</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;client_max_body_size&#x27;] = &#x27;250m&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;redirect_http_to_https&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;redirect_http_to_https_port&#x27;] = 80</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Most root CA&#x27;s are included by default</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_client_certificate&#x27;] = &quot;/etc/gitlab/ssl/ca.crt&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! enable/disable 2-way SSL client authentication</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_verify_client&#x27;] = &quot;off&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! if ssl_verify_client on, verification depth in the client certificates chain</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_verify_depth&#x27;] = &quot;1&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_certificate&#x27;] = &quot;/etc/gitlab/ssl/#{node[&#x27;fqdn&#x27;]}.crt&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_certificate_key&#x27;] = &quot;/etc/gitlab/ssl/#{node[&#x27;fqdn&#x27;]}.key&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_ciphers&#x27;] = &quot;ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_prefer_server_ciphers&#x27;] = &quot;on&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Recommended by: https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##!                   https://cipherli.st/**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_protocols&#x27;] = &quot;TLSv1.2 TLSv1.3&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Recommended in: https://nginx.org/en/docs/http/ngx_http_ssl_module.html**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_session_cache&#x27;] = &quot;builtin:1000  shared:SSL:10m&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Default according to https://nginx.org/en/docs/http/ngx_http_ssl_module.html**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_session_timeout&#x27;] = &quot;5m&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;ssl_dhparam&#x27;] = nil # Path to dhparams.pem, eg. /etc/gitlab/ssl/dhparams.pem</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;listen_addresses&#x27;] = [&#x27;*&#x27;, &#x27;[::]&#x27;]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Defaults to forcing web browsers to always communicate using only HTTPS**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#setting-http-strict-transport-security</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;hsts_max_age&#x27;] = 31536000</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;hsts_include_subdomains&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Defaults to stripping path information when making cross-origin requests</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;referrer_policy&#x27;] = &#x27;strict-origin-when-cross-origin&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Docs: http://nginx.org/en/docs/http/ngx_http_gzip_module.html**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_enabled&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Override only if you use a reverse proxy**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#setting-the-nginx-listen-port</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;listen_port&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Override only if your reverse proxy internally communicates over HTTP**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/nginx.html#supporting-proxied-ssl</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;listen_https&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;custom_gitlab_server_config&#x27;] = &quot;location ^~ /foo-namespace/bar-project/raw/ {\n deny all;\n}\n&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;custom_nginx_config&#x27;] = &quot;include /etc/nginx/conf.d/example.conf;&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_read_timeout&#x27;] = 3600</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_connect_timeout&#x27;] = 300</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_set_headers&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;Host&quot; =&gt; &quot;$http_host_with_default&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Real-IP&quot; =&gt; &quot;$remote_addr&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Forwarded-For&quot; =&gt; &quot;$proxy_add_x_forwarded_for&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Forwarded-Proto&quot; =&gt; &quot;https&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;X-Forwarded-Ssl&quot; =&gt; &quot;on&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;Upgrade&quot; =&gt; &quot;$http_upgrade&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;Connection&quot; =&gt; &quot;$connection_upgrade&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_cache_path&#x27;] = &#x27;proxy_cache keys_zone=gitlab:10m max_size=1g levels=1:2&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;proxy_cache&#x27;] = &#x27;gitlab&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;http2_enabled&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;real_ip_trusted_addresses&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;real_ip_header&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;real_ip_recursive&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;custom_error_pages&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   &#x27;404&#x27; =&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     &#x27;title&#x27; =&gt; &#x27;Example title&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     &#x27;header&#x27; =&gt; &#x27;Example header&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#     &#x27;message&#x27; =&gt; &#x27;Example message&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#   }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Advanced settings</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/nginx&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/nginx&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;worker_processes&#x27;] = 4</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;worker_connections&#x27;] = 10240</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;log_format&#x27;] = &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; $status $body_bytes_sent &quot;$http_referer&quot; &quot;$http_user_agent&quot;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;sendfile&#x27;] = &#x27;on&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;tcp_nopush&#x27;] = &#x27;on&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;tcp_nodelay&#x27;] = &#x27;on&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip&#x27;] = &quot;on&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_http_version&#x27;] = &quot;1.0&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_comp_level&#x27;] = &quot;2&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_proxied&#x27;] = &quot;any&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;gzip_types&#x27;] = [ &quot;text/plain&quot;, &quot;text/css&quot;, &quot;application/x-javascript&quot;, &quot;text/xml&quot;, &quot;application/xml&quot;, &quot;application/xml+rss&quot;, &quot;text/javascript&quot;, &quot;application/json&quot; ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;keepalive_timeout&#x27;] = 65</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;cache_max_size&#x27;] = &#x27;5000m&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;server_names_hash_bucket_size&#x27;] = 64</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! These paths have proxy_request_buffering disabled</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;request_buffering_off_path_regex&#x27;] = &quot;\.git/git-receive-pack$|\.git/info/refs?service=git-receive-pack$|\.git/gitlab-lfs/objects|\.git/info/lfs/objects/batch$&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### Nginx status</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># nginx[&#x27;status&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;enable&quot; =&gt; true,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;listen_addresses&quot; =&gt; [&quot;127.0.0.1&quot;],</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;fqdn&quot; =&gt; &quot;dev.example.com&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;port&quot; =&gt; 9999,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;vts_enable&quot; =&gt; true,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;options&quot; =&gt; {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;stub_status&quot; =&gt; &quot;on&quot;, # Turn on stats</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;server_tokens&quot; =&gt; &quot;off&quot;, # Don&#x27;t show the version of NGINX</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;access_log&quot; =&gt; &quot;off&quot;, # Disable logs for stats</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;allow&quot; =&gt; &quot;127.0.0.1&quot;, # Only allow access from localhost</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    &quot;deny&quot; =&gt; &quot;all&quot; # Deny access to anyone else</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Logging</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/logs.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_size&#x27;] = 200 * 1024 * 1024 # rotate after 200 MB of log data</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_num&#x27;] = 30 # keep 30 rotated log files</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_timeout&#x27;] = 24 * 60 * 60 # rotate after 24 hours</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_filter&#x27;] = &quot;gzip&quot; # compress logs with gzip</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_udp&#x27;] = nil # transmit log messages via UDP</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;svlogd_prefix&#x27;] = nil # custom prefix for log messages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_frequency&#x27;] = &quot;daily&quot; # rotate logs daily</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_maxsize&#x27;] = nil # rotate logs when they grow bigger than size bytes even before the specified time interval (daily, weekly, monthly, or yearly)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_size&#x27;] = nil # do not rotate by size by default</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_rotate&#x27;] = 30 # keep 30 rotated logs</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_compress&#x27;] = &quot;compress&quot; # see &#x27;man logrotate&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_method&#x27;] = &quot;copytruncate&quot; # see &#x27;man logrotate&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_postrotate&#x27;] = nil # no postrotate command by default</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;logrotate_dateformat&#x27;] = nil # use date extensions for rotated files rather than numbers e.g. a value of &quot;-%Y-%m-%d&quot; would give rotated files like production.log-2016-03-09.gz</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### UDP log forwarding</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: http://docs.gitlab.com/omnibus/settings/logs.html#udp-log-forwarding</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! remote host to ship log messages to via UDP</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;udp_log_shipping_host&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! override the hostname used when logs are shipped via UDP,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##  by default the system hostname will be used.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;udp_log_shipping_hostname&#x27;] = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! remote port to ship log messages to via UDP</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logging[&#x27;udp_log_shipping_port&#x27;] = 514</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Logrotate</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/logs.html#logrotate</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! You can disable built in logrotate feature.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># logrotate[&#x27;enable&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Users and groups accounts</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Disable management of users and groups accounts.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Set only if creating accounts manually**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/configuration.html#disable-user-and-group-account-management</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># manage_accounts[&#x27;enable&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Storage directories</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Disable managing storage directories</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/omnibus/settings/configuration.html#disable-storage-directories-management</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! **Set only if the select directories are created manually**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># manage_storage_directories[&#x27;enable&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># manage_storage_directories[&#x27;manage_etc&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Runtime directory</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com//omnibus/settings/configuration.html#configuring-runtime-directory</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># runtime_dir &#x27;/run&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## Git</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Advanced setting for configuring git system settings for omnibus-gitlab</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! internal git</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! For multiple options under one header use array of comma separated values,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! eg.:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! { &quot;receive&quot; =&gt; [&quot;fsckObjects = true&quot;], &quot;alias&quot; =&gt; [&quot;st = status&quot;, &quot;co = checkout&quot;] }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># omnibus_gitconfig[&#x27;system&#x27;] = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;pack&quot; =&gt; [&quot;threads = 1&quot;],</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;receive&quot; =&gt; [&quot;fsckObjects = true&quot;, &quot;advertisePushOptions = true&quot;],</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;repack&quot; =&gt; [&quot;writeBitmaps = true&quot;],</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#  &quot;transfer&quot; =&gt; [&quot;hideRefs=^refs/tmp/&quot;, &quot;hideRefs=^refs/keep-around/&quot;, &quot;hideRefs=^refs/remotes/&quot;],</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/ce/pages/administration.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Define to enable GitLab Pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># pages_external_url &quot;http://pages.example.com/&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;enable&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to expose GitLab Pages on external IP address, serving the HTTP</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;external_http&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to expose GitLab Pages on external IP address, serving the HTTPS</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;external_https&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to use the default list of cipher suites</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;insecure_ciphers&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to enable health check endpoint on GitLab Pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;status_uri&#x27;] = &quot;/@status&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Tune the maximum number of concurrent connections GitLab Pages will handle.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! This should be in the range 1 - 10000, defaulting to 5000.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;max_connections&#x27;] = 5000</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure to use JSON structured logging in GitLab Pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;log_format&#x27;] = &quot;json&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure verbose logging for GitLab Pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;log_verbose&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Error Reporting and Logging with Sentry</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;sentry_enabled&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;sentry_dsn&#x27;] = &#x27;https://&lt;key&gt;@sentry.io/&lt;project&gt;&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;sentry_environment&#x27;] = &#x27;production&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Listen for requests forwarded by reverse proxy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;listen_proxy&#x27;] = &quot;localhost:8090&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure GitLab Pages to use an HTTP Proxy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;http_proxy&#x27;] = &quot;http://example:8080&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;redirect_http&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;use_http2&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;dir&#x27;] = &quot;/var/opt/gitlab/gitlab-pages&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;log_directory&#x27;] = &quot;/var/log/gitlab/gitlab-pages&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;artifacts_server&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;artifacts_server_url&#x27;] = nil # Defaults to external_url + &#x27;/api/v4&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;artifacts_server_timeout&#x27;] = 10</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Environments that do not support bind-mounting should set this parameter to</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! true. This is incompatible with the artifacts server</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;inplace_chroot&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Prometheus metrics for Pages docs: https://gitlab.com/gitlab-org/gitlab-pages/#enable-prometheus-metrics</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;metrics_address&#x27;] = &quot;:9235&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Specifies the minimum SSL/TLS version (&quot;ssl3&quot;, &quot;tls1.0&quot;, &quot;tls1.1&quot; or &quot;tls1.2&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;tls_min_version&#x27;] = &quot;ssl3&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Specifies the maximum SSL/TLS version (&quot;ssl3&quot;, &quot;tls1.0&quot;, &quot;tls1.1&quot; or &quot;tls1.2&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;tls_max_version&#x27;] = &quot;tls1.2&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Configure the pages admin API</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_secret_token&#x27;] = &#x27;custom secret&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_https_listener&#x27;] = &#x27;0.0.0.0:5678&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_https_cert&#x27;] = &#x27;/etc/gitlab/pages-admin.crt&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;admin_https_key&#x27;] = &#x27;/etc/gitlab/pages-admin.key&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Client side configuration for gitlab-pages admin API, in case pages runs on a different host</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_admin_address&#x27;] = &#x27;pages.gitlab.example.com:5678&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_admin_certificate&#x27;] = &#x27;/etc/gitlab/pages-admin.crt&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Pages access control</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;access_control&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;gitlab_id&#x27;] = nil # Automatically generated if not present</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;gitlab_secret&#x27;] = nil # Generated if not present</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;auth_redirect_uri&#x27;] = nil # Defaults to projects subdomain of pages_external_url and + &#x27;/auth&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;gitlab_server&#x27;] = nil # Defaults to external_url</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;auth_secret&#x27;] = nil # Generated if not present</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Define custom gitlab-pages HTTP headers for the whole instance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_pages[&#x27;headers&#x27;] = []</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab Pages NGINX</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># All the settings defined in the &quot;GitLab Nginx&quot; section are also available in</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># this &quot;GitLab Pages NGINX&quot; section, using the key `pages_nginx`.  However,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># those settings should be explicitly set. That is, settings given as</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># `nginx[&#x27;some_setting&#x27;]` WILL NOT be automatically replicated as</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># `pages_nginx[&#x27;some_setting&#x27;]` and should be set separately.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Below you can find settings that are exclusive to &quot;GitLab Pages NGINX&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># pages_nginx[&#x27;enable&#x27;] = false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_rails[&#x27;pages_path&#x27;] = &quot;/var/opt/gitlab/gitlab-rails/shared/pages&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## GitLab CI</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##! Docs: https://docs.gitlab.com/ce/ci/quick_start/README.html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">################################################################################</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_ci[&#x27;gitlab_ci_all_broken_builds&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_ci[&#x27;gitlab_ci_add_pusher&#x27;] = true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># gitlab_ci[&#x27;builds_directory&#x27;] = &#x27;/var/opt/gitlab/gitlab-ci/builds&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/service/forge/gitlab/gitlab-config.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/notes/service/forge/gitlab/gitlab-cicd"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« GitaLab持续集成持续交付</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/notes/service/forge/gitlab/gitlab-faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Gitlab FAQ »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#基础配置" class="table-of-contents__link">基础配置</a></li><li><a href="#授权配置" class="table-of-contents__link">授权配置</a><ul><li><a href="#ldap" class="table-of-contents__link">LDAP</a></li><li><a href="#openid-connect" class="table-of-contents__link">OpenID Connect</a></li></ul></li><li><a href="#pages-配置" class="table-of-contents__link">Pages 配置</a></li><li><a href="#gitlabrb" class="table-of-contents__link">gitlab.rb</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright © 1992-2021 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2021-11-21 14:50</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d9a0a08e.js"></script>
<script src="/assets/js/main.a026923d.js"></script>
</body>
</html>