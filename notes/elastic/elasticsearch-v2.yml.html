<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-elastic/elasticsearch-v2.yml">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"><title data-rh="true">elasticsearch.yml v2.x | Wener Live &amp; Life</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wener.me/notes/elastic/elasticsearch-v2.yml"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="elasticsearch.yml v2.x | Wener Live &amp; Life"><meta data-rh="true" name="description" content="elasticsearch.yml"><meta data-rh="true" property="og:description" content="elasticsearch.yml"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wener.me/notes/elastic/elasticsearch-v2.yml"><link data-rh="true" rel="alternate" href="https://wener.me/notes/elastic/elasticsearch-v2.yml" hreflang="en"><link data-rh="true" rel="alternate" href="https://wener.me/notes/elastic/elasticsearch-v2.yml" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://37P8DMWBKF-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a5b87add.css">
<link rel="preload" href="/assets/js/runtime~main.07b4d16f.js" as="script">
<link rel="preload" href="/assets/js/main.92dfd685.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_WawS">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--light_HlbN"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--dark__4Lo"></div><b class="navbar__title text--truncate">Wener</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_N_jk colorModeToggle_wwB5"><button class="clean-btn toggleButton_gcuK toggleButtonDisabled_AJhd" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Eiwc"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_a3UO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_Ymm7"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_uXRe docsWrapper_AGYY"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_aXSw" type="button"></button><div class="docPage_Q_rn"><aside class="theme-doc-sidebar-container docSidebarContainer_GlFK"><div class="sidebar_ogDj"><nav class="menu thin-scrollbar menu_fqy9"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes">笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/algorithm">算法</a><button aria-label="Toggle the collapsible sidebar category &#x27;算法&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/blockchain">区块链</a><button aria-label="Toggle the collapsible sidebar category &#x27;区块链&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/culture/anime/anime-awesome">culture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/db">数据库</a><button aria-label="Toggle the collapsible sidebar category &#x27;数据库&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/design/ip">design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/dev/build/bazel">dev</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/economics">经济学</a><button aria-label="Toggle the collapsible sidebar category &#x27;经济学&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/notes/elastic/elasticsearch-v2">elastic</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/elastic/elasticsearch-v2">Elasticsearch v2.x</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/elastic/elasticsearch-v2.yml">elasticsearch.yml v2.x</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/electrical/multimeter">electrical</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/embedded/embedded-awesome">embedded</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/evolve">自我成长</a><button aria-label="Toggle the collapsible sidebar category &#x27;自我成长&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/game/mhr">game</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/hardware/arm">hardware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/healthcare">健康</a><button aria-label="Toggle the collapsible sidebar category &#x27;健康&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/howto/network/dns-prevent-spoofing">howto</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/java">Java</a><button aria-label="Toggle the collapsible sidebar category &#x27;Java&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/languages">语言</a><button aria-label="Toggle the collapsible sidebar category &#x27;语言&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/mgmt/pm-awesome">mgmt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/network/application/dns">network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/ops/admin/augeas">ops</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/os/alpine">os</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/photography/camera-awesome">photography</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/platform">平台</a><button aria-label="Toggle the collapsible sidebar category &#x27;平台&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/queue">Queue</a><button aria-label="Toggle the collapsible sidebar category &#x27;Queue&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/reference/cook/glossary">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/security/acme-awesome">security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/service/analytics/analytics-awesome">service</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/tool">工具</a><button aria-label="Toggle the collapsible sidebar category &#x27;工具&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/voip">VoIP</a><button aria-label="Toggle the collapsible sidebar category &#x27;VoIP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/web">Web</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_BKoE"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_EYvA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_RaEK"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nrhp"><div class="docItemContainer_EkVX"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_GKCt" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OL5o"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">elastic</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">elasticsearch.yml v2.x</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_oqr9 theme-doc-toc-mobile tocMobile_5aMT"><button type="button" class="clean-btn tocCollapsibleButton_CjyO">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>elasticsearch.yml v2.x</h1></header><h2 id="elasticsearchyml">elasticsearch.yml</h2><ul><li>配置文件中可通过 <code>${...}</code> 来引用环境变量,例如:</li></ul><pre><code class="language-yml">node.rack: ${RACK_ENV_VAR}
</code></pre><ul><li>所有的配置项都可通过启动参数指定,例如 <code>./bin/elasticsearch -Dpath.conf=my-config</code> 修改配置路径</li></ul><h2 id="2x-配置文件及说明">2.x 配置文件及说明</h2><pre><code class="language-yml"># ==================================================
# 集群配置
# ==================================================
cluster:
  # 用于标示自动发现的集群明. 如果同时启动了多个集群会通过该标示符来区分
  name: friends


# ==================================================
# 节点配置
# ==================================================
node:
  # 节点名如果不配置在启动时会自动生成.
  name: joey
  # 标识该节点是否能成为主节点.
  master: true
  # 标识该节点是否存储数据
  data: true
  # 可为节点配置任意额外的属性,用于在选择分区时进行标识,例如:
  rack: abc
  # 默认情况下在单个安装目录(数据目录)可启动多个节点,可通过该配置来禁止
  max_local_storage_nodes: 1

# ==================================================
# 索引配置
# ==================================================
# 参考
# http://elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules.html
# http://elasticsearch.org/guide/en/elasticsearch/reference/current/indices-create-index.html
index:
  # 默认分片数, 不能被修改, 可在创建索引时指定
  number_of_shards: 5
  # 默认副本数, 可运行时修改
  number_of_replicas: 1
  # 默认使用 lz4, best_compression 会使用 DEFLATE
  codec: best_compression
  # 自动扩展分片,当冗余节点足够的时候,自动增加副本数量,默认为 false, 可配置 0-5,3-all这样的范围值
  auto_expand_replicas: 0-5
  # 索引刷新间隔, 刷新后才能被搜索,可使用 -1 禁用
  refresh_interval: 1s
  # 返回的最大结果数量, 影响 from+size
  max_result_window: 10000
  blocks:
    # 设置为 true 使索引和索引元数据只读
    read_only: false
    read: True
    write: True
    metadata: True
  requests:
    # 当一个搜索请求对一个或多个索引执行时,每个需要查询的分片都会执行该请求然后返回本地结果到调度节点,最终合并一个全局的结果集.
    # 分片级别的请求缓存和用于缓存每个分片的本地计算结果. 这可以使常用(复杂)的查询立即得到返回结果.
    # 请求缓存非常适用于日志存储, 因为只有最近的索引数据会被更新,旧的索引数据可从缓存直接返回.
    # 目前只能缓存 size=0 的搜索请求,因此不会缓存 `hits`,但会缓存 `hots.total` 聚合和建议
    # 查询中使用了 `now` 的不能被缓存
    #
    # 对于未缓存的搜索也能保证近实时
    # 缓存会在分片刷新时自动失效,但只有实际被改变的数据才会失效.
    # 即保证缓存请求查询结果和未缓存请求是相同的.
    # 刷新间隔越久, 缓存的有效时间越久.
    # 缓存使用 LRU 规则
    # 可手动使缓存失效
    #   curl -XPOST &#x27;localhost:9200/kimchy,elasticsearch/_cache/clear?request_cache=true&#x27;
    #
    # 缓存的 KEY 为请求的 JSON
    # 查看缓存使用统计
    # curl &#x27;localhost:9200/_stats/request_cache?pretty&amp;human&#x27;
    # curl &#x27;localhost:9200/_nodes/stats/indices/request_cache?pretty&amp;human&#x27;
    # https://www.elastic.co/guide/en/elasticsearch/reference/current/shard-request-cache.html
    cache:
      enable: true
      # 堆中最大缓存量
      size: 1%
    # https://www.elastic.co/guide/en/elasticsearch/reference/current/recovery.html



indices:
  # 字段数据缓存主要在对字段排序和聚合计算的时候使用.
  # 在基于字段文档进行访问时,为了提高访问速度回将所有字段值都加载到内存.
  # 构建字段数据缓存是相当昂贵的,因此建议配置足够的内存来缓存该数据.
  # https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-fielddata.html
  # curl -XGET &#x27;http://localhost:9200/_stats/fielddata/?fields=field1,field2&amp;pretty&#x27;
  fielddata:
    cache:
      # #调优# 该值可为百分比或具体的值,例如 12GB
      size: 30%
  # 查询缓存负责缓存查询的结果值.
  # 每个节点都有自己的查询缓存,供所有分片共享.
  # 缓存采用 LRU 规则
  # 只会缓存在过滤上下文中的查询
  # 该配置为静态配置,需要在每个数据节点配置
  queries:
    cache:
      size: 10%
  memory:
    # 索引缓冲会用于存储新索引的文档. 当满了过后, 缓冲中的文档会被写到磁盘段中. 每个节点的每个分片都有自己的缓冲.
    # 该配置为静态配置,需要在每个数据节点配置
    # 可配置百分比或具体的值
    # https://www.elastic.co/guide/en/elasticsearch/reference/current/indexing-buffer.html
    index_buffer_size: 10%
    min_index_buffer_size: 48mb
    # 默认为无限
    max_index_buffer_size: 50%
    # 为每个分片设置一个用于索引缓冲的最小缓存值
    min_shard_index_buffer_size: 4mb
  # 恢复相关设置
  # https://www.elastic.co/guide/en/elasticsearch/reference/current/query-cache.html
  recovery:
    # 恢复分片的并发流数
    concurrent_streams: 3
    # 每个节点允许的小文件(&lt;5mb)恢复流
    concurrent_small_file_streams: 2
    file_chunk_size: 512kb
    translog_ops: 1000
    translog_size: 512kb
    compress: true
    # 恢复时的数据限流
    max_bytes_per_sec: 100mb
  # 有 ttl 的文档会有专门的线程来操作
  # https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-ttl.html
  ttl:
    # 删除进程的运行间隔
    interval: 60s
    # 删除为批量操作,通过该配置来控制批处理量
    bulk_size: 10000


# ==================================================
# 路径配置
# ==================================================

path:
  # 配置路径, 包含 logging.yml 和 elasticsearch.yml, 通常通过命令行参数指定
  conf: config
  # 该节点存储索引数据的目录, 可配置多个
  # path.data: data1,data2
  data: data
  # 日志路径
  logs: logs
  # 插件路径
  plugins: plugins

# ==================================================
# 插件配置
# ==================================================
# 如果这里安装的插件未安装,则该节点不会启动
plugin.mandatory: mapper-attachments,lang-groovy

# ==================================================
# 内存配置
# ==================================================
# 内存锁,避免内存交换,提升性能,但占用的内存不能被别的进程使用
bootstrap.mlockall: true
# 确保 ES_MIN_MEM 和 ES_MAX_MEM 环境变量都是同样的值, 并确保服务器有足够的内存.
# 同时还需要确保 Elasticsearch 能够操作内存锁, `ulimit -l unlimited`

# ==================================================
# 网络和 HTTP
# ==================================================
network:
  # 绑定的主机地址
  bind_host: 0.0.0.0
  # 其他节点用来与该节点交互的地址.如果不配置则会自行判断.需要指定为真实 IP 地址
  publish_host: 192.168.0.1
  # 同时指定 bind_host, publish_host
  host: 0.0.0.0

# 传输模块负责集群内节点之间的通讯.所有的传输本质上都是一部的,因此不会有线程阻塞等待响应.
# 参考
#   https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-transport.html
transport:
    # 基于 TCP 实现的传输模块
    tcp:
      # 节点之间通信端口
      port: 9300-9400
      # 集群中其他节点与该节点通讯时使用的端口.当在防火墙或者代理后面的时候很有用.
      # 如果不设置与 port 值相同
      publish_port: 9300-9400
      # 绑定传输端口的主机地址
      # 默认 network.bind_host
      bind_host: 0.0.0.0
      # 集群中其他节点与该节点通讯时使用的主机地址
      # 默认 transport.host 或 network.publish_host
      publish_host: 0.0.0.0
      # 同时设置 transport.bind_host 和 transport.publish_host
      # 默认 network.host
      host: 0.0.0.0
      connect_timeout: 30s
      # 节点之间通信是否启用压缩 LZF
      compress: false
      # 定期发送 PING 保证链接存活
      ping_schedule: 5s
# HTTP 模块用于通过 HTTP 暴露 Elasticsearch 的 API
# HTTP 均为异步,没有线程会被等待响应阻塞,解决了 C10K 问题
# 尽量使用 HTTP keep-alive, 不要使用 HTTP chunking
# 参考
#     https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-http.html
http:
  # 监听的 HTTP 端口
  port: 9200-9300
  # 客户端应该连接的节点
  # 默认 http.port 的实际值
  publish_port: 9200-9300
  # 绑定 HTTP 端口的主机地址
  # 默认 network.bind_host
  bind_host: 0.0.0.0
  # 客户端应该连接的主机地址
  publish_host: 0.0.0.0
  # 同时设置 bind_host 和 publish_host
  host: 0.0.0.0
  # 允许的最大内容长度
  # 如果大于 Integer.MAX_VALUE 会被重置为 100mb
  max_content_length: 100mb
  # URL 最大长度
  max_initial_line_length: 4kb
  max_header_size: 8kb
  # 是否在支持压缩的时候使用压缩
  compression: false
  # 压缩级别
  compression_level: 6
  # 是否禁用 HTTP
  enabled: false
  cors:
    # 是否启用跨域资源共享
    enabled: false
    allow-origin: *
    # 默认 1728000 = 20 天
    max-age: 1728000
    allow-methods: OPTIONS, HEAD, GET, POST, PUT, DELETE
    allow-headers: X-Requested-With, Content-Type, Content-Length
    allow-credentials: false
  # 是否在响应中显示具体的错误堆栈
  # 如果设置为 false, 当请求带了 error_trace 参数也会返回错误信息
  detailed_errors:
    enabled: true
  pipelining: true
  pipelining:
    # HTTP 链接关闭前堆积在内存中的最大事件数量
    max_events: 10000


# ==================================================
# 网关
# ==================================================
# 网关用于持久化集群状态,即便集群重启状态也不会丢失.所有对状态的变更(例如 添加索引)都会存储到网关.当集群启动时会从网关读取状态.
# 参考
#   http://elasticsearch.org/guide/en/elasticsearch/reference/current/modules-gateway.html
# 这些设置只有在整个集群全部重启后才会生效
gateway:
  # 集群类型
  type: local
  # 当节点里有指定节点数量后开始恢复
  recover_after_nodes: 1
  recover_after_master_nodes: 1
  recover_after_data_nodes: 1
  # 当达到指定时间后开始恢复
  recover_after_time: 10m
  # 集群中应有节点数量,当数量达到并且满足 recover_after_time, 立即开始恢复
  expected_nodes: 0
  expected_master_nodes: 0
  expected_data_nodes: 0

action:
  # 是否允许自动创建索引
  auto_create_index: true
  # 禁止关闭所有索引
  disable_close_all_indices: true
  # 禁止删除所有索引
  disable_delete_all_indices: true
  # 禁止关停该节点
  disable_shutdown: true

# ==================================================
# 恢复控制
# ==================================================
# 参考
#   https://www.elastic.co/guide/en/elasticsearch/reference/current/shards-allocation.html
#   https://www.elastic.co/guide/en/elasticsearch/reference/current/disk-allocator.html

cluster:
  routing:
    allocation:
      # all 允许对所有分片类型进行分片申请
      # primaries 只允许主分片的分片申请
      # new_primaries 只允许新增索引的主分片分片申请
      # none 不允许分片申请
      enable: all
      # 当初始恢复时的并发恢复数量
      node_initial_primaries_recoveries: 2
      # 当添加,删除或均衡负载时的并发恢复数量
      node_concurrent_recoveries: 4
      same_shard:
        # 是否允许在同一个主机申请分片
        host: false
    rebalance:
      # 可选值 all, primaries, new_primaries, none
      enable: all
      # 配置允许什么样的负载均衡
      # always 允许所有的负载均衡
      # indices_primaries_active 只有当所有主分片都存在时
      # indices_all_active 只有当所有主分片和分片副本在集群中都存在时.
      allow_rebalance: indices_all_active
      # 整个集群中允许同时进行负载均衡的数量
      cluster_concurrent_rebalance: 2
    balance:
      # 在一个节点上允许申请分片的权重因子. 增加该值,会使集群中节点上的分片数量趋于相等.
      shard: 0.45
      # 索引分片选择一个节点的权重因子. 增加该值,会使每个节点上每个索引分片的数量趋于相等.
      index: 0.55
      # 应执行的操作最小优化值. 增加该值, 会使集群趋向于不均衡分片.
      threshold: 1.0
    disk:
      # 选择分配时是否考虑磁盘情况
      threshold_enabled: true
      watermark:
        # Controls the low watermark for disk usage.
        # 当磁盘使用量达到 85% 时便不会再在该节点申请到分片.
        # 也可将该值设置为具体的量,例如 500mb, 表示当磁盘剩余空间小于该值后便不能再该节点申请到分片.
        low: 85%
        # Controls the high watermark.
        # 当磁盘使用量达到 90% 时,便会开始讲该节点上的分片迁移到其他节点.
        high: 90%
      # 在计算节点磁盘使用量的时候将正在迁移的分片考虑在内.因此在估算磁盘使用量的时候可能不准确.
      include_relocations: true
    update:
      # 检查集群中每个节点磁盘状态的间隔
      interval: 30s
    # 分片感知 https://www.elastic.co/guide/en/elasticsearch/reference/current/allocation-awareness.html
    # 分片过滤 https://www.elastic.co/guide/en/elasticsearch/reference/current/allocation-filtering.html
    awareness:
      # 这里的属性是指节点的自定义属性
      attributes: rack_id
      force.zone.values: zone1,zone2
# 只有当副本数量满足该配置时,主分片才会开始恢复,可选值为
#   quorum 默认,quorum-1 或 half, full, full -1, 或固定数字
index:
  recovery:
    initial_shards: quorum

# ==================================================
# 线程池
# ==================================================
# 每个节点中都有多个线程池, 大多的线程池还有一个关联的请求队列, 使得请求可以等待处理而不是被抛弃.
# 线程数量可在运行时修改
# 参考
#   https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.html

threadpool:
    # 常规操作线程池, 例如 后台的节点发现, type: cached
    generic:
    # 用于索引和删除操作的线程池
    index:
      size: N
      queue_size: 200
    # 用搜索和 count 操作的线程池.
    search:
      size: (N * 3) / 2 + 1
      queue_size: 1000
    # 推荐操作.
    suggest:
      size: N
      queue_size: 1000
    # 获取操作
    get:
      size: N
      queue_size: 1000
    # 批量操作
    bulk:
      size: N
      queue_size: 50
    percolate:
      size: N
      queue_size: 1000
    # 备份和恢复操作
    snapshot:
      keep_alive: 5m
      size: min(5, N/2)
    warmer:
      keep_alive: 5m
      size: min(5, N/2)
    refresh:
      keep_alive: 5m
      size: min(10, N/2)
    listener:
      size: min(10, N/2)



# ==================================================
# 自动发现
# ==================================================
# 参考
#   http://elasticsearch.org/guide/en/elasticsearch/reference/current/modules-discovery-zen.html
discovery:
  zen:
    # 进行主节点选举时的最少参与选举的节点数
    minimum_master_nodes: 1
    ping:
      # 自动发现时等待节点响应时间
      timeout: 3s
      multicast:
        # 是否使用广播发现
        enabled: true
      unicast:
        # 单播发现其他节点的地址
        hosts: [&quot;host1&quot;, &quot;host2:port&quot;]

# ==================================================
# 慢日志
# ==================================================
# 分片级别的查询和获取限流日志
index:
  search:
    slowlog:
      threshold:
        query:
          # 为时间达到 10s 的查询记录 warn 日志
          warn: 10s
          info: 5s
          debug: 2s
          trace: 500ms

        fetch:
          warn: 1s
          info: 800ms
          debug: 500ms
          trace: 200ms

        index:
          # 为时间达到 10s 的索引记录 warn 日志
          warn: 10s
          info: 5s
          debug: 2s
          trace: 500ms

# ==================================================
# GC 日志
# ==================================================
monitor:
  jvm:
    gc:
      ParNew:
        warn: 1000ms
        info: 700ms
        debug: 400ms

      ConcurrentMarkSweep:
        warn: 10s
        info: 5s
        debug: 2s

# ==================================================
# 脚本配置
# ==================================================
# 参考
#   https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting.html
script.inline: sandbox
script.indexed: sandbox
script.file: true
script.update: false
script.mapping: false
script.auto_reload_enabled: true

script.engine.groovy.file.aggs: true
script.engine.groovy.file.mapping: true
script.engine.groovy.file.search: true
script.engine.groovy.file.update: true
script.engine.groovy.file.plugin: true
script.engine.groovy.indexed.aggs: true
script.engine.groovy.indexed.mapping: false
script.engine.groovy.indexed.search: true
script.engine.groovy.indexed.update: false
script.engine.groovy.indexed.plugin: false
script.engine.groovy.inline.aggs: true
script.engine.groovy.inline.mapping: false
script.engine.groovy.inline.search: false
script.engine.groovy.inline.update: false
script.engine.groovy.inline.plugin: false
</code></pre><h3 id="参考">参考</h3><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html">配置说明</a></li><li><a href="https://gist.github.com/zsprackett/8546403">一份 ES 配置</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/elastic/elasticsearch-v2.yml.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_icZ1" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_IDPb"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes/elastic/elasticsearch-v2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Elasticsearch v2.x</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes/electrical/multimeter"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">multimeter</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Rbtr thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#elasticsearchyml" class="table-of-contents__link toc-highlight">elasticsearch.yml</a></li><li><a href="#2x-配置文件及说明" class="table-of-contents__link toc-highlight">2.x 配置文件及说明</a><ul><li><a href="#参考" class="table-of-contents__link toc-highlight">参考</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/notes/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--light_HlbN footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--dark__4Lo footer__logo"></div><div class="footer__copyright">Copyright © 1992-2022 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2022-09-22 04:38</div></div></div></footer></div>
<script src="/assets/js/runtime~main.07b4d16f.js"></script>
<script src="/assets/js/main.92dfd685.js"></script>
</body>
</html>