<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml"><title data-react-helmet="true">Spring Boot | Wener Live &amp; Life</title><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/java/spring/boot"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Spring Boot | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="Tips"><meta data-react-helmet="true" property="og:description" content="Tips"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wener.me/notes/java/spring/boot"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/java/spring/boot" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/java/spring/boot" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.82b257c7.css">
<link rel="preload" href="/assets/js/runtime~main.bc2e10c4.js" as="script">
<link rel="preload" href="/assets/js/main.40af30c0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Wener</b></a><a class="navbar__item navbar__link" href="/notes/java/java">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">工具</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">自我成长</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Java</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/java">Java</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">版本</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Spring</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/spring">Spring</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/notes/java/spring/boot">Spring Boot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/cloud">Spring Cloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/data">Spring Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/data-rest">Spring Data REST</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/releases">发布历史</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/security">Spring Security</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/security-oauth2">Spring Security OAuth2</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Library</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/apache/kylin">Apache Kylin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/apache/wicket">Apache Wicket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/gradle">Gradle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/hot-qa">热门问题</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/maven">Maven</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spec/servlet">Servlet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Web</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">语言</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AlpineLinux</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Docker</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">虚拟化</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">操作系统</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VoIP</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">开发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">DevOps</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">数据库</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">消息队列</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">安全</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">服务</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">运维</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">指南</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">硬件</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">算法</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">健康</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">参考</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">工具</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Spring Boot</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tips"></a>Tips<a class="hash-link" href="#tips" title="Direct link to heading">#</a></h2><ul><li>方便查看每个版本的依赖版本<ul><li><a href="http://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-parent/2.0.0.RELEASE" target="_blank" rel="noopener noreferrer">org.springframework.boot/spring-boot-starter-parent</a></li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装命令行工具</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew tap pivotal/tap</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> springboot</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装 Spring Cloud 扩展</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># https://cloud.spring.io/spring-cloud-cli/</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> org.springframework.cloud:spring-cloud-cli:1.3.2.RELEASE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 如果想用加密的功能还需要安装 jce</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="参考"></a>参考<a class="hash-link" href="#参考" title="Direct link to heading">#</a></h2><ul><li><a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/" target="_blank" rel="noopener noreferrer">最新文档</a></li><li><a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener noreferrer">所有的配置属性</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="使用-jetty-而不使用-tomcat"></a>使用 Jetty 而不使用 Tomcat<a class="hash-link" href="#使用-jetty-而不使用-tomcat" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">exclusions</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">exclusion</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">spring-boot-starter-tomcat</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">exclusion</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">exclusions</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">spring-boot-starter-jetty</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常量"></a>常量<a class="hash-link" href="#常量" title="Direct link to heading">#</a></h2><ul><li>org.springframework.http.HttpHeaders</li><li>org.springframework.http.HttpStatus</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="重要的处理接口"></a>重要的处理接口<a class="hash-link" href="#重要的处理接口" title="Direct link to heading">#</a></h2><ul><li>org.springframework.util.PathMatcher
路径的匹配格式,比如 cors 配置</li><li>org.springframework.boot.logging.LoggingSystem<ul><li>用于控制日志级别</li><li>运行时会暴露 logger endpoint, 可查看和修改日志级别<ul><li>org.springframework.boot.actuate.endpoint.LoggersEndpoint</li></ul></li><li>日志级别<ul><li>TRACE, DEBUG, INFO, WARN, ERROR, FATAL, OFF</li></ul></li><li>日志属性分为 configuredLevel 和 effectiveLevel<ul><li>修改时使用 configuredLevel</li></ul></li><li>Spring Boot 自带了较多的 Logback 配置<ul><li>org.springframework.boot.logging.logback</li></ul></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="配置"></a>配置<a class="hash-link" href="#配置" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="主要配置对象"></a>主要配置对象<a class="hash-link" href="#主要配置对象" title="Direct link to heading">#</a></h3><p>配置对象都通过 Adapter/Configurer 的类进行配置, 只是对内部配置进行修改而不是直接替换.</p><ul><li>org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter</li><li>org.springframework.security.config.annotation.authentication.configurers.GlobalAuthenticationConfigurerAdapter</li><li>org.springframework.data.rest.webmvc.config.RepositoryRestConfigurerAdapter</li><li>org.springframework.security.config.annotation.SecurityConfigurerAdapter</li><li>org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter</li><li>org.springframework.scheduling.annotation.AsyncConfigurer</li><li>org.springframework.cache.annotation.CachingConfigurer</li><li>org.springframework.web.servlet.config.annotation.ContentNegotiationConfigurer</li><li>org.springframework.security.config.annotation.web.configurers.HeadersConfigurer</li><li>org.springframework.boot.autoconfigure.security.oauth2.resource.JwtAccessTokenConverterConfigurer</li><li>org.springframework.web.servlet.config.annotation.PathMatchConfigurer</li><li>org.springframework.security.config.annotation.web.configurers.RequestCacheConfigurer</li><li>org.springframework.transaction.annotation.TransactionManagementConfigurer</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="配置属性加载顺序"></a>配置属性加载顺序<a class="hash-link" href="#配置属性加载顺序" title="Direct link to heading">#</a></h3><ol start="0"><li>命令行参数</li><li>环境变量 <code>SPRING_APPLICATION_JSON</code> 指定的 JSON 配置或系统属性</li><li>JNDI 属性 <code>java:comp/env</code></li><li>Java 系统属性 (System.getProperties())</li><li>操作系统环境变量</li><li><code>RandomValuePropertySource</code> 为 <code>random.*</code> 设置随机属性值</li><li>Jar 包外基于 profile 的应用属性 (application-{profile}.properties 或 YAML)</li><li>Jar 包内基于 profile 的应用属性 (application-{profile}.properties 或 YAML)</li><li>Jar 包外的应用属性配置 (application.properties 或 YAML)</li><li>Jar 包内的应用属性配置 (application.properties 或 YAML)</li><li><code>@Configuration</code> 类上的 <code>@PropertySource</code></li><li>默认属性 (通过 SpringApplication.setDefaultProperties 指定)</li></ol><p><strong>示例</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SPRING_APPLICATION_JSON</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{&quot;foo&quot;:{&quot;bar&quot;:&quot;spam&quot;}}&#x27;</span><span class="token plain"> java -jar myapp.jar</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java -Dspring.application.json</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{&quot;foo&quot;:&quot;bar&quot;}&#x27;</span><span class="token plain"> -jar myapp.jar</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java -jar myapp.jar --spring.application.json</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{&quot;foo&quot;:&quot;bar&quot;}&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="查找属性文件的顺序"></a>查找属性文件的顺序<a class="hash-link" href="#查找属性文件的顺序" title="Direct link to heading">#</a></h3><ol start="0"><li>当前目录下的 <code>/config</code> 子目录</li><li>当前目录</li><li>类路径下的 <code>/config</code> 包</li><li>类路径根</li></ol><p><strong>修改</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 修改配置文件名</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java -jar myproject.jar --spring.config.name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">myproject</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 修改配置文件目录</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">java -jar myproject.jar --spring.config.location</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">classpath:/default.properties,classpath:/override.properties</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 通过环境变量修改文件名</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SPRING_CONFIG_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">myproject java -jar myproject.jar</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可同时加载多个配置名</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># --spring.config.name=server-app,env</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可在启动时激活相应配置</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># --spring.profiles.active=local</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可修改配置的搜索路径</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># --spring.profiles.location=file:./conf</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 修改默认 Profile</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># --spring.profiles.default=test</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可直接传递 JSON 参数</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># --spring.application.json={&quot;redis.port&quot;:6379}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>注意</strong>:</p><ul><li>使用 Profile 时, include 的优先级会比当前配置的优先级高,因此在使用时建议避免使用 include 来包含默认配置.</li><li>指定多个 profile 时后面的会覆盖前面的</li></ul></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="特殊配置说明"></a>特殊配置说明<a class="hash-link" href="#特殊配置说明" title="Direct link to heading">#</a></h3><ul><li>DevTool 会尝试查找 HOME 下的 <code>.spring-boot-devtools.properties</code> 配置文件</li><li><code>spring.main</code> 下的参数会应用到 <code>SpringApplication</code> 上,因此可以在配置文件中配置 <code>spring.main.web_environment: false</code> 这样的参数</li><li>Spring 启动时的处理类为 <code>org.springframework.boot.context.config.ConfigFileApplicationListener</code><ul><li>负责加载给定的配置 <code>spring.config.name</code>,<code>spring.profiles.active</code>,<code>spring.profiles.location</code></li><li>负责将 <code>spring.main</code> 上的属性绑定到 <code>SpringApplication</code> 上</li></ul></li><li>可启用日志,记录所有尝试加载的配置文件名</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;logger name=&quot;org.springframework.boot.context.config.ConfigFileApplicationListener&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        level=&quot;TRACE&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        additivity=&quot;false&quot;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;appender-ref ref=&quot;FILE&quot;/&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/logger&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="属性文件可使用占位符"></a>属性文件可使用占位符<a class="hash-link" href="#属性文件可使用占位符" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">app.name=MyApp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">app.description=${app.name:Default Name} is a Spring Boot application</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="单个-yaml-可指定多个-profile"></a>单个 YAML 可指定多个 profile<a class="hash-link" href="#单个-yaml-可指定多个-profile" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 192.168.1.100</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">profiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> development</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 127.0.0.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">---</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">profiles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> production</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 192.168.1.120</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="配置注解"></a>配置注解<a class="hash-link" href="#配置注解" title="Direct link to heading">#</a></h3><p>默认会开启 <code>@EnableConfigurationProperties</code> 注解配置, 有 <code>@ConfigurationProperties</code> 注解会自动使用 <code>Environment</code> 进行初始化.也可以直接通过 <code>@EnableConfigurationProperties</code> 来注册配置对象</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="绑定属性名"></a>绑定属性名<a class="hash-link" href="#绑定属性名" title="Direct link to heading">#</a></h3><p>进行绑定的属性名相对宽容</p><table><thead><tr><th>属性名格式</th><th>说明</th></tr></thead><tbody><tr><td>person.firstName</td><td>标准驼峰语法</td></tr><tr><td>person.first-name</td><td>横线分隔, 推荐在 .properties 和 .yml 中使用</td></tr><tr><td>PERSON_FIRST_NAME</td><td>大写格式, 推荐在系统变量使用</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="日志配置"></a>日志配置<a class="hash-link" href="#日志配置" title="Direct link to heading">#</a></h3><table><thead><tr><th>Spring Environment</th><th>System Property</th><th>Comments</th></tr></thead><tbody><tr><td>logging.exception-conversion-word</td><td>LOG_EXCEPTION_CONVERSION_WORD</td><td>The conversion word that’s used when logging exceptions.</td></tr><tr><td>logging.file</td><td>LOG_FILE</td><td>如果定义了会作为默认日志配置</td></tr><tr><td>logging.path</td><td>LOG_PATH</td><td></td></tr><tr><td>logging.pattern.console</td><td>CONSOLE_LOG_PATTERN</td><td>控制台(stdout)输出的日志格式(不支持 JDK logger)</td></tr><tr><td>logging.pattern.file</td><td>FILE_LOG_PATTERN</td><td>输出到文件的日志格式</td></tr><tr><td>logging.pattern.level</td><td>LOG_LEVEL_PATTERN</td><td>输出日志等级的格式(默认 %5p)(logging.pattern.level 支持直 Logback)</td></tr><tr><td>PID</td><td>PID</td><td></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常用配置"></a>常用配置<a class="hash-link" href="#常用配置" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 日志配置</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">logging.level.root</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> INFO</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">logging.level.org.springframework.web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> DEBUG</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">logging.level.org.hibernate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ERROR</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 启用 h2 控制台</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spring.h2.console.enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 修改控制台路径,默认 /h2-console</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spring.h2.console.path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /h2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">console</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 修改 Jackson 时间格式,设置正确的时区非常重要,否则会导致序列化的时间有时差</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">jackson</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">date-format</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> yyyy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">MM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">dd HH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">mm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">ss</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">locale</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> zh_CN</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">time-zone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> GMT+8</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tips-1"></a>Tips<a class="hash-link" href="#tips-1" title="Direct link to heading">#</a></h3><ul><li>可自定义数据类型转换 <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-conversion" target="_blank" rel="noopener noreferrer">Properties conversion</a></li><li>可使用 <code>javax.validation</code> 对配置的属性进行校验</li><li>可通过 <code>spring-boot-actuator</code> 模块在 <code>/configprops</code> 查看属性配置</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="actuator"></a>Actuator<a class="hash-link" href="#actuator" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常用终端"></a>常用终端<a class="hash-link" href="#常用终端" title="Direct link to heading">#</a></h3><table><thead><tr><th>ID</th><th>描述</th><th>默认敏感</th></tr></thead><tbody><tr><td>actuator</td><td>提供基于超媒体的发现页,需要 Spring HATEOAS.</td><td>true</td></tr><tr><td>autoconfig</td><td>显示自动配置的汇报,显示所有自动配置的候选和为什么没有被使用</td><td>true</td></tr><tr><td>beans</td><td>显示程序中的 beans 列表</td><td>true</td></tr><tr><td>configprops</td><td>显示所有 <code>@ConfigurationProperties</code></td><td>true</td></tr><tr><td>docs</td><td>显示文档,包括请求和相应的例子,需要 <code>spring-boot-actuator-docs</code></td><td>false</td></tr><tr><td>dump</td><td>执行线程转储</td><td>true</td></tr><tr><td>env</td><td>暴露 <code>ConfigurableEnvironment</code> 的属性</td><td>true</td></tr><tr><td>flyway</td><td>显示 Flyway 数据库的迁移状态</td><td>true</td></tr><tr><td>health</td><td>显示应用的监控信息,授权后请求返回详细信息</td><td>false</td></tr><tr><td>info</td><td>显示任何信息</td><td></td></tr><tr><td>liquibase</td><td>显示 liquibase 数据库迁移状态</td><td>true</td></tr><tr><td>logfile</td><td>返回 logfile 中的内容(如果设置了 logging.file 或 logging.path 属性).需要 MVC 支持.支持 HTTP 头的范围请求.</td><td>true</td></tr><tr><td>metrics</td><td>显示当前应用的 metrices 信息</td><td>true</td></tr><tr><td>mappings</td><td>显示所有 <code>@RequestMapping</code> 路径</td><td>true</td></tr><tr><td>shutdown</td><td>停止应用(默认未开启)</td><td>true</td></tr><tr><td>trace</td><td>显示跟踪信息(默认只显示前几个 HTTP 请求)</td><td>true</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="配置-1"></a>配置<a class="hash-link" href="#配置-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 修改一个终端的敏感值</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.beans.id=springbeans</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.beans.sensitive=false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 控制是否启用终端</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.enabled=false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.info.enabled=true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.shutdown.enabled=true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 控制是否启用敏感</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.sensitive=true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.info.sensitive=false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 控制 CORS</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">endpoints.cors.allowed-origins</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//example.com</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">endpoints.cors.allowed-methods</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> GET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">POST</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 控制是否启用监控检查</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">management.health.defaults.enabled=false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 控制路径和端口地址</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">management.context-path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /manage</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">management.port=8081</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">management.address=127.0.0.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 定制化通过 info 终端暴露的信息</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">info.app.name=MyService</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">info.app.description=My awesome service</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">info.app.version=1.0.0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 通过 Maven 自动展开属性</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># spring boot parent 使用 git 插件提供了 git.properties 文件</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">project.artifactId=myproject</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">project.name=Demo</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">project.version=X.X.X.X</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">project.description=Demo project for info endpoint</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">info.build.artifact=@project.artifactId@</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">info.build.name=@project.name@</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">info.build.description=@project.description@</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">info.build.version=@project.version@</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 控制访问管理台需要的角色</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">management.security.role=SUPERUSER</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 为单独的终端指定路径</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">.path</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 禁用 HTTP 终端</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">management.port=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 修改 MBean 名字</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endpoints.jmx.domain=myapp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">endpoints.jmx.unique-names</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="remote-shell"></a>Remote shell<a class="hash-link" href="#remote-shell" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">spring-boot-starter-remote-shell</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>默认端口为 2000</li><li>命令扫描路径为</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">classpath*:/commands/**</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">classpath*:/crash/commands/**</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>可通过 <code>shell.command-path-patterns</code> 来修改命令路径</li><li>继承自 <code>org.crsh.plugin.CRaSHPlugin</code> 的 Bean 会自动注册</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="配置-2"></a>配置<a class="hash-link" href="#配置-2" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">shell.auth.simple.user.name</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">shell.auth.simple.user.password</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="metrics"></a>Metrics<a class="hash-link" href="#metrics" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="监控信息"></a>监控信息<a class="hash-link" href="#监控信息" title="Direct link to heading">#</a></h3><p><strong>系统监控</strong></p><table><thead><tr><th>键</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td>mem</td><td>总内存</td><td>KB</td></tr><tr><td>mem.free</td><td>空闲内存</td><td>KB</td></tr><tr><td>processors</td><td>进程数</td><td></td></tr><tr><td>uptime</td><td>系统运行时间  ms</td><td></td></tr><tr><td>instance.uptime</td><td>程序运行时间</td><td>ms</td></tr><tr><td>systemload.average</td><td>系统平均负载</td><td></td></tr><tr><td>heap<br>heap.committed<br>heap.init<br>heap.used</td><td>堆信息</td><td>KB</td></tr><tr><td>threads<br>thread.peak<br>thread.daemon</td><td>线程信息</td><td></td></tr><tr><td>classes<br>classes.loaded<br>classes.unloaded</td><td>类加载信息</td><td></td></tr><tr><td>gc.xxx.count<br>gc.xxx.time</td><td>垃圾回收信息</td><td></td></tr></tbody></table><p><strong>数据源监控</strong></p><table><thead><tr><th>键</th><th>描述</th></tr></thead><tbody><tr><td>datasource.xxx.active</td><td>激活链接数</td></tr><tr><td>datasource.xxx.usage</td><td>当前线程池的使用情况</td></tr></tbody></table><ul><li><code>datasource.primary</code> 表示 <code>@Primary</code> 的数据源</li><li>如果一个数据源 bean 的名字是以 DataSource 结尾的,那么 metric 里只会显示之前的,例如 <code>myDataSource</code> 显示为 <code>datasource.my</code></li><li>否则都是用 bean 名作为 metric 名</li><li>可通过注册 <code>DataSourcePublicMetrics</code> 来修改部分默认配置.</li><li>默认情况下会显示所有支持的元数据,可通过 <code>DataSourcePoolMetadataProvider</code> Bean 添加额外的. 请查看<code>DataSourcePoolMetadataProvidersConfiguration</code>.</li></ul><p><strong>缓存监控</strong></p><table><thead><tr><th>键</th><th>描述</th></tr></thead><tbody><tr><td>cache.xxx.size</td><td>缓存大小</td></tr><tr><td>cache.xxx.hit.ratio</td><td>命中率</td></tr><tr><td>cache.xxx.miss.ratio</td><td>未命中率</td></tr></tbody></table><p><strong>TOMCAT SESSION</strong></p><ul><li>httpsessions.active</li><li>httpsessions.max</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="自定义"></a>自定义<a class="hash-link" href="#自定义" title="Direct link to heading">#</a></h3><p>可通过注入 CounterService 或 GaugeService 来提供应用监控, 虽然任何字符串都可以作为名字,但建议参考 <a href="http://matt.aimonetti.net/posts/2013/06/26/practical-guide-to-graphite-monitoring/" target="_blank" rel="noopener noreferrer">该指南</a>.</p><p>可通过注册 <code>PublicMetrics</code> 来做通过计算得出的统计.可通过 <code>MetricsEndpoint</code> 来定制处理方式.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="输出监控信息"></a>输出监控信息<a class="hash-link" href="#输出监控信息" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.metrics.export</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .send-latest</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .delay-millis</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .includes</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .excludes</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 也可为每个 bean 设置</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.metrics.export.triggers.&lt;name&gt;.*</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="输出到-redis"></a>输出到 Redis<a class="hash-link" href="#输出到-redis" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Bean</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ExportMetricWriter</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MetricWriter metricWriter(MetricExportProperties export) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return new RedisMetricRepository(connectionFactory,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      export.getRedis().getPrefix(), export.getRedis().getKey());</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.metrics.export.redis.prefix: metrics.mysystem.${spring.application.name:application}.${random.value:0000}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.metrics.export.redis.key: keys.metrics.mysystem</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="输出到-statd"></a>输出到 statd<a class="hash-link" href="#输出到-statd" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Value(&quot;${spring.application.name:application}.${random.value:0000}&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private String prefix = &quot;metrics&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Bean</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ExportMetricWriter</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MetricWriter metricWriter() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return new StatsdMetricWriter(prefix, &quot;localhost&quot;, &quot;8125&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="导出到-jmx"></a>导出到 JMX<a class="hash-link" href="#导出到-jmx" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Bean</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ExportMetricWriter</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MetricWriter metricWriter(MBeanExporter exporter) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return new JmxMetricWriter(exporter);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="获取-xmlmapper"></a>获取 XmlMapper<a class="hash-link" href="#获取-xmlmapper" title="Direct link to heading">#</a></h3><p><a href="http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html" target="_blank" rel="noopener noreferrer">http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">com.fasterxml.jackson.dataformat</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">jackson-dataformat-xml</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Autowired</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void init(MappingJackson2XmlHttpMessageConverter xmlConverter){</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    XmlMapper mapper = (XmlMapper) xmlConverter.getObjectMapper();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="获取请求体文本"></a>获取请求体文本<a class="hash-link" href="#获取请求体文本" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@RequestMapping(path = &quot;/echo&quot;, method = RequestMethod.POST)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public Object echo(HttpServletRequest request) throws IOException {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  String content = CharStreams.toString(new InputStreamReader(request.getInputStream()));</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return content;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="去除错误白板页"></a>去除错误白板页<a class="hash-link" href="#去除错误白板页" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@RestController</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class IndexController implements ErrorController{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private static final String PATH = &quot;/error&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private final ErrorAttributes errorAttributes;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 也可以自己处理错误</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Autowired</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public IndexController(ErrorAttributes errorAttributes) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Assert.notNull(errorAttributes, &quot;ErrorAttributes must not be null&quot;);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      this.errorAttributes = errorAttributes;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @RequestMapping(value = PATH)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String error() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return &quot;Error handling&quot;;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public String getErrorPath() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return PATH;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 默认的错误控制器为 ErrorMvcAutoConfiguration#basicErrorController</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="创建自定义的自动配置"></a>创建自定义的自动配置<a class="hash-link" href="#创建自定义的自动配置" title="Direct link to heading">#</a></h2><ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-auto-configuration.html" target="_blank" rel="noopener noreferrer">46. Creating Your Own Auto-configuration</a></li><li><code>META-INF/spring.factories</code></li><li><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=</code><ul><li>逗号分隔</li></ul></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/java/spring/spring-boot.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/notes/java/spring/spring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Spring</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/notes/java/spring/cloud"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Spring Cloud »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tips" class="table-of-contents__link">Tips</a></li><li><a href="#参考" class="table-of-contents__link">参考</a></li><li><a href="#使用-jetty-而不使用-tomcat" class="table-of-contents__link">使用 Jetty 而不使用 Tomcat</a></li><li><a href="#常量" class="table-of-contents__link">常量</a></li><li><a href="#重要的处理接口" class="table-of-contents__link">重要的处理接口</a></li><li><a href="#配置" class="table-of-contents__link">配置</a><ul><li><a href="#主要配置对象" class="table-of-contents__link">主要配置对象</a></li><li><a href="#配置属性加载顺序" class="table-of-contents__link">配置属性加载顺序</a></li><li><a href="#查找属性文件的顺序" class="table-of-contents__link">查找属性文件的顺序</a></li><li><a href="#特殊配置说明" class="table-of-contents__link">特殊配置说明</a></li><li><a href="#属性文件可使用占位符" class="table-of-contents__link">属性文件可使用占位符</a></li><li><a href="#单个-yaml-可指定多个-profile" class="table-of-contents__link">单个 YAML 可指定多个 profile</a></li><li><a href="#配置注解" class="table-of-contents__link">配置注解</a></li><li><a href="#绑定属性名" class="table-of-contents__link">绑定属性名</a></li><li><a href="#日志配置" class="table-of-contents__link">日志配置</a></li><li><a href="#常用配置" class="table-of-contents__link">常用配置</a></li><li><a href="#tips-1" class="table-of-contents__link">Tips</a></li></ul></li><li><a href="#actuator" class="table-of-contents__link">Actuator</a><ul><li><a href="#常用终端" class="table-of-contents__link">常用终端</a></li><li><a href="#配置-1" class="table-of-contents__link">配置</a></li></ul></li><li><a href="#remote-shell" class="table-of-contents__link">Remote shell</a><ul><li><a href="#配置-2" class="table-of-contents__link">配置</a></li></ul></li><li><a href="#metrics" class="table-of-contents__link">Metrics</a><ul><li><a href="#监控信息" class="table-of-contents__link">监控信息</a></li><li><a href="#自定义" class="table-of-contents__link">自定义</a></li><li><a href="#输出监控信息" class="table-of-contents__link">输出监控信息</a></li><li><a href="#获取-xmlmapper" class="table-of-contents__link">获取 XmlMapper</a></li><li><a href="#获取请求体文本" class="table-of-contents__link">获取请求体文本</a></li><li><a href="#去除错误白板页" class="table-of-contents__link">去除错误白板页</a></li></ul></li><li><a href="#创建自定义的自动配置" class="table-of-contents__link">创建自定义的自动配置</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright © 1992-2021 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2021-08-11 01:42</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bc2e10c4.js"></script>
<script src="/assets/js/main.40af30c0.js"></script>
</body>
</html>