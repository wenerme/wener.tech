<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"><title data-react-helmet="true">Spring Security | Wener Live &amp; Life</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/java/spring/security"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Spring Security | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="Tips"><meta data-react-helmet="true" property="og:description" content="Tips"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wener.me/notes/java/spring/security"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/java/spring/security" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/java/spring/security" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1f8f45d9.css">
<link rel="preload" href="/assets/js/runtime~main.77714c4d.js" as="script">
<link rel="preload" href="/assets/js/main.78d9fd76.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Wener</b></a><a class="navbar__item navbar__link" href="/notes/note">ç¬”è®°</a><a class="navbar__item navbar__link" href="/story">æ•…äº‹</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">æŒ‡å—</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">å·¥å…·</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">è‡ªæˆ‘æˆé•¿</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Java</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/java">Java</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/java-awesome">Java</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ç‰ˆæœ¬</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Spring</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/spring">Spring</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/boot">Spring Boot</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/cloud">Spring Cloud</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/data">Spring Data</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/data-rest">Spring Data REST</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/releases">å‘å¸ƒå†å²</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/java/spring/security">Spring Security</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spring/security-oauth2">Spring Security OAuth2</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Library</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/apache/kylin">Apache Kylin</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/apache/wicket">Apache Wicket</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/gradle">Gradle</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/hot-qa">çƒ­é—¨é—®é¢˜</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/maven">Maven</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/notes/java/spec/servlet">Servlet</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Web</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">è¯­è¨€</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AlpineLinux</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Docker</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">è™šæ‹ŸåŒ–</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æ“ä½œç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VoIP</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å¼€å‘</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">DevOps</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æ•°æ®åº“</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æ¶ˆæ¯é˜Ÿåˆ—</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å®‰å…¨</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æœåŠ¡</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">è¿ç»´</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æŒ‡å—</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ç¡¬ä»¶</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ç®—æ³•</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å¥åº·</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å‚è€ƒ</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å·¥å…·</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spring Security</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="tips"></a>Tips<a class="hash-link" href="#tips" title="Direct link to heading">#</a></h2><p><a href="http://www.baeldung.com/spring-security-login" target="_blank" rel="noopener noreferrer">http://www.baeldung.com/spring-security-login</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="notes"></a>Notes<a class="hash-link" href="#notes" title="Direct link to heading">#</a></h2><ul><li><code>@EnableGlobalMethodSecurity</code><ul><li>æ ‡è¯†è¢«æ³¨è§£çš„ç±»å¯ä»¥ç”¨äºé…ç½® <code>AuthenticationManagerBuilder</code>, å³å¯ä»¥æ³¨å…¥è¯¥é…ç½®å¯¹è±¡</li><li>è¯¥æ³¨è§£å¯ä»¥ä½œä¸ºå…ƒæ³¨è§£ä½¿ç”¨, å› æ­¤ <code>@EnableWebSecurity</code> å’Œ <code>@EnableWebMvcSecurity</code> éƒ½æœ‰è¿™æ ·çš„åŠŸèƒ½</li><li><code>AuthenticationConfiguration</code></li></ul></li><li><code>@EnableWebSecurity</code><ul><li>å¦‚æœæœ‰ mvc ç¯å¢ƒ, ä¼šå¯ç”¨ <code>WebMvcSecurityConfiguration</code> é…ç½®</li><li><code>WebMvcSecurityConfiguration</code><ul><li>æ·»åŠ äº† <code>@AuthenticationPrincipal</code> æ–¹æ³•å‚æ•°æ³¨è§£çš„å¤„ç†</li><li>æ·»åŠ äº† <code>CsrfToken</code> å‚æ•°æ³¨å…¥</li></ul></li><li><code>WebSecurityConfiguration</code><ul><li>ä½¿ç”¨ <code>WebSecurity</code> æ¥æ„å»ºä¸€ä¸ª <code>Filter</code> (springSecurityFilterChain)</li><li><code>WebSecurity</code><ul><li>æ ¸å¿ƒé…ç½®ä¸Šä¸‹æ–‡</li></ul></li><li><code>WebSecurityConfigurer</code><ul><li>ä» <code>AutowiredWebSecurityConfigurersIgnoreParents</code> å–å¾—</li><li>ç»§æ‰¿è‡ª <code>SecurityConfigurer</code><ul><li>é…ç½®ç»“æœä¸º <code>Filter</code></li><li>æœªæ·»åŠ ä»»ä½•å…¶ä»–çš„æ–¹æ³•</li></ul></li></ul></li></ul></li></ul></li><li><code>@EnableWebMvcSecurity</code><ul><li>å·²å¼ƒç”¨, ä½¿ç”¨ <code>@EnableWebSecurity</code></li></ul></li><li><code>@EnableGlobalMethodSecurity</code><ul><li><code>GlobalMethodSecuritySelector</code><ul><li>æ ¹æ®æ³¨è§£ä¸Šå¯ç”¨çš„åŠŸèƒ½æ¥å¯¼å…¥é…ç½®</li></ul></li><li><code>GlobalMethodSecurityConfiguration</code><ul><li><code>MethodInterceptor</code><ul><li>ä½¿ç”¨é…ç½®é¡¹æ„å»ºçš„æ–¹æ³•æ‹¦æˆª (methodSecurityInterceptor)</li><li><code>AccessDecisionManager</code><ul><li>é»˜è®¤ä¸º <code>AffirmativeBased</code></li><li><code>PreInvocationAuthorizationAdviceVoter</code><ul><li>å®ç° <code>@PreFilter</code> å’Œ <code>@PreAuthorize</code></li><li>å®é™…ä¸Šè¯¥ç±»å‹çš„åˆ¤æ–­ä¸éœ€è¦ä½œä¸ºåŸºäºæŠ•ç¥¨çš„åˆ¤æ–­, å› ä¸ºå·²ç»èƒ½ä»ä¿¡æ¯ä¸­æ‹¿åˆ°ç»“æœ, ä¸è¿‡ä¸ºäº†å¯è¯»æ€§æ‰ä»¥åŸºäºæŠ•ç¥¨çš„ç³»ç»Ÿæ¥å®ç°</li></ul></li><li><code>RoleVoter</code></li><li><code>AuthenticatedVoter</code></li></ul></li><li><code>AfterInvocationManager</code><ul><li>å¦‚æœæ²¡æœ‰å¼€å¯å‰åå¤„ç†(prePost), é‚£ä¹ˆä¸ä¼šæœ‰è¯¥å®ç°</li><li>è¯¥æ¥å£ä¸»è¦ç”¨äºå®ç°åå¤„ç†</li><li>é»˜è®¤ä¸º <code>AfterInvocationProviderManager</code><ul><li>å®é™…å†³ç­–ç”± <code>AfterInvocationProvider</code> å¤„ç†</li><li><code>PostInvocationAdviceProvider</code><ul><li><code>PostInvocationAuthorizationAdvice</code><ul><li><code>ExpressionBasedPostInvocationAdvice</code><ul><li><code>PostInvocationExpressionAttribute</code></li><li>å®ç° <code>@PostFilter</code> å’Œ <code>@PostAuthorize</code> çš„å¤„ç†</li></ul></li></ul></li></ul></li></ul></li></ul></li><li><code>MethodSecurityMetadataSource</code><ul><li>ä¸€ä¸ª <code>SecurityMetadataSource</code> çš„å®ç°</li><li>ç”¨äºç”Ÿæˆä¸åŒè®¿é—®å†³ç­– <code>AccessDecisionManager</code> éœ€è¦çš„ <code>ConfigAttribute</code></li></ul></li><li><code>RunAsManager</code><ul><li>å¤„ç† <code>@RunAs</code></li><li>é»˜è®¤æ²¡æœ‰å®ç°</li><li>æ‰§è¡Œæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æˆæƒå¯¹è±¡</li></ul></li></ul></li></ul></li><li><code>Jsr250MetadataSourceConfiguration</code><ul><li><code>@DenyAll</code>, <code>@PermitAll</code>, <code>@RolesAllowed</code></li></ul></li></ul></li><li><code>SecurityConfigurer</code><ul><li>åŸºç¡€çš„å®‰å…¨é…ç½®é…ç½®æ¥å£</li><li>æ ¸å¿ƒçš„é…ç½®é…ç½®å†…å®¹å‡ç»§æ‰¿è‡ªè¯¥æ¥å£</li><li>åˆ†ä¸ºé…ç½®ç»“æœå’Œé…ç½®ä¸Šä¸‹æ–‡</li><li><code>SecurityBuilder</code><ul><li>é…ç½®ä¸Šä¸‹æ–‡çš„åŸºç¡€æ¥å£</li><li>æœ€ç»ˆç”±è¯¥æ¥å£æä¾›çš„æ–¹æ³•é…ç½®å‡ºç»“æœé…ç½®å¯¹è±¡</li><li>ä¸»è¦å®ç°<ul><li><code>WebSecurity</code></li><li><code>HttpSecurityBuilder</code><ul><li><code>HttpSecurity</code></li><li>ç»“æœç±»å‹ä¸º <code>DefaultSecurityFilterChain</code></li><li>é»˜è®¤çš„ Filter é“¾é¡ºåº<ul><li><code>ChannelProcessingFilter</code><ul><li>ä¸»è¦ç”¨äºåˆ¤æ–­æ˜¯å¦æ˜¯ä» <code>https</code> ç«¯å£æ¥çš„è¯·æ±‚</li><li>æ„å»º <code>FilterInvocation</code></li><li>æ‹¿åˆ°ç›¸åº”çš„å®‰å…¨é…ç½®å±æ€§ <code>ConfigAttribute</code></li><li>æœ€ç»ˆäº¤ç”± <code>ChannelDecisionManager</code> åˆ¤æ–­</li></ul></li><li><code>ConcurrentSessionFilter</code><ul><li>é»˜è®¤çš„ Filter é“¾ä¸­æœ‰ä¸‰ä¸ª <code>ConcurrentSessionFilter</code></li><li>ä¸»è¦ç”¨äºå¤„ç†å¹¶å‘ä¼šè¯</li><li>ä¸»è¦åšä¸¤ä»¶äº‹<ol><li>è°ƒç”¨ <code>SessionRegistry#refreshLastRequest(String)</code></li></ol><ul><li>ä¿è¯ä¼šè¯çš„ä¸Šæ¬¡æ›´æ–°æ—¶é—´æ˜¯æ­£ç¡®çš„</li></ul><ol start="2"><li>ä» <code>SessionRegistry</code> æ‹¿ <code>SessionInformation</code>, å¹¶åˆ¤æ–­æ˜¯å¦è¿‡æœŸ</li></ol><ul><li>å¦‚æœè¿‡æœŸäº†åˆ™æ‰§è¡Œé€€å‡ºç™»å½•é€»è¾‘</li></ul></li></ul></li><li><code>SecurityContextPersistenceFilter</code><ul><li>å°†ä» <code>SecurityContextRepository</code> æ‹¿åˆ°çš„å®‰å…¨ä¸Šä¸‹æ–‡ <code>SecurityContext</code> æ”¾åˆ° <code>SecurityContextHolder</code></li><li>å¿…é¡»åœ¨æ‰€æœ‰æˆæƒæœºåˆ¶ä¹‹å‰æ‰§è¡Œ</li><li>ä½¿ç”¨è¯·æ±‚å¯¹è±¡çš„å±æ€§(<code>__spring_security_scpf_applied</code>) æ¥ä¿è¯åªæ‰§è¡Œä¸€æ¬¡</li><li><code>SecurityContextRepository</code><ul><li>ç”¨äºåœ¨è¯·æ±‚ä¹‹é—´æŒä¹…åŒ– <code>SecurityContext</code> ä¿¡æ¯çš„æ¥å£</li><li>å¤§å¤šæ˜¯æƒ…å†µä¸‹æ˜¯ä½¿ç”¨ <code>HttpSession</code> æ¥å­˜å‚¨</li><li>åŠ è½½æ—¶ä¸ä¼šåå› <code>null</code>, å¦‚æœæ²¡æœ‰, ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ä¸Šä¸‹æ–‡</li><li><code>HttpSessionSecurityContextRepository</code><ul><li>ä¼šè¯å­˜å‚¨é”® <code>SPRING_SECURITY_CONTEXT</code></li></ul></li><li><code>NullSecurityContextRepository</code><ul><li>å¦‚æœä¸å¯ç”¨ä¼šè¯åˆ™ä¼šä½¿ç”¨è¯¥å®ç°</li><li>åŠ è½½ä¸Šä¸‹æ–‡æ—¶ä¼šä½¿ç”¨ <code>SecurityContextHolder#createEmptyContext</code> åˆ›å»ºç©ºçš„ä¸Šä¸‹æ–‡</li></ul></li></ul></li></ul></li><li><code>LogoutFilter</code><ul><li>å¤„ç†åŒ¹é…(<code>RequestMatcher</code>)çš„é€€å‡ºç™»å½•è¯·æ±‚</li><li>å®é™…é€€å‡ºç™»å½•æ“ä½œäº¤ç”± <code>LogoutHandler</code> å¤„ç†</li><li>é€€å‡ºç™»å½•æˆåŠŸåé€šçŸ¥ <code>LogoutSuccessHandler</code></li><li>ä¸»è¦å®ç°<ul><li><code>CookieClearingLogoutHandler</code><ul><li>æ¸…ç† Cookie</li></ul></li><li><code>CsrfLogoutHandler</code><ul><li>æ¸…ç† csrf</li></ul></li><li><code>SecurityContextLogoutHandler</code><ul><li>å¤±æ•ˆä¼šè¯</li><li>å»é™¤å®‰å…¨ä¸Šä¸‹æ–‡ä¸­çš„æˆæƒ</li></ul></li><li><code>AbstractRememberMeServices</code><ul><li>æ¸…é™¤  RememberMe ä¿¡æ¯</li></ul></li></ul></li></ul></li><li><code>X509AuthenticationFilter</code></li><li><code>AbstractPreAuthenticatedProcessingFilter</code><ul><li>æ‰€æœ‰è¿›è¡Œé¢„è®¤è¯çš„å¤„ç†</li><li>ä¸»è¦å¤„ç†ç”±å¤–éƒ¨ç³»ç»Ÿè®¤è¯çš„æƒ…å†µ</li><li>ä»è¯·æ±‚ä¸­æå–å‡º <code>principal</code>, è€Œä¸æ˜¯å¯¹ä»–ä»¬è¿›è¡Œè®¤è¯</li><li>å½“ä¸€ä¸ªè®¤è¯å¤±è´¥åä¼šå°è¯•å…¶ä»–çš„è®¤è¯æœºåˆ¶<ul><li><code>continueFilterChainOnUnsuccessfulAuthentication</code></li></ul></li><li>å¦‚æœå·²ç»è¿›è¡Œè¿‡æˆæƒåˆ™ä¸ä¼šå†æ¬¡è¿›è¡Œ</li><li>ä¸»è¦å®ç°<ul><li><code>X509AuthenticationFilter</code><ul><li>æœ€å…ˆæ‰§è¡Œ</li></ul></li><li><code>RequestHeaderAuthenticationFilter</code><ul><li><a href="https://www.ca.com/us/products/ca-single-sign-on.html" target="_blank" rel="noopener noreferrer">CA SSO</a></li><li>CA Siteminder</li><li><code>SM_USER</code> å¤´</li></ul></li><li><code>RequestAttributeAuthenticationFilter</code><ul><li><a href="http://webauth.stanford.edu/manual/mod/mod_webauth.html#java" target="_blank" rel="noopener noreferrer">Stanford WebAuth</a></li><li><a href="https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPJavaInstall" target="_blank" rel="noopener noreferrer">Shibboleth</a></li><li><a href="https://en.wikipedia.org/wiki/Shibboleth_(Internet2)" target="_blank" rel="noopener noreferrer">Shibboleth (Internet2)</a></li><li><code>REMOTE_USER</code> è¯·æ±‚å±æ€§</li></ul></li></ul></li></ul></li><li><code>CasAuthenticationFilter</code><ul><li>å¤„ç† cas è®¤è¯</li></ul></li><li><code>UsernamePasswordAuthenticationFilter</code><ul><li>ç”± <code>formLogin</code> é…ç½®</li><li>å–è¡¨å•ä¸­çš„ç”¨æˆ·åå¯†ç è¿›è¡Œè®¤è¯</li></ul></li><li><code>ConcurrentSessionFilter</code></li><li><code>OpenIDAuthenticationFilter</code></li><li><code>DefaultLoginPageGeneratingFilter</code><ul><li>ç”Ÿæˆé»˜è®¤ç™»å½•é¡µ</li><li>é»˜è®¤åœ°å€ä¸º <code>/login</code></li></ul></li><li><code>ConcurrentSessionFilter</code></li><li><code>DigestAuthenticationFilter</code><ul><li>å¤„ç†<a href="https://zh.wikipedia.org/wiki/HTTP%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81" target="_blank" rel="noopener noreferrer">HTTP æ‘˜è¦è®¤è¯</a></li><li>Digest çš„å¼±ç‚¹<ul><li>è¦æ±‚å¯†ç å¯æ¢å¤</li></ul></li></ul></li><li><code>BasicAuthenticationFilter</code><ul><li>å¤„ç† HTTP åŸºæœ¬éªŒè¯</li></ul></li><li><code>RequestCacheAwareFilter</code><ul><li>ä» <code>RequestCache</code> æ¢å¤ç¼“å­˜çš„è¯·æ±‚</li><li>å…è®¸é‡å®šå‘åˆ°è®¤è¯æœºåˆ¶åé‡æ–°å¼€å§‹å•ä¸ªè¯·æ±‚</li></ul></li><li><code>SecurityContextHolderAwareRequestFilter</code><ul><li>åŒ…è£…å½“å‰çš„è¯·æ±‚, ä»¥å®ç° Servlet 3 è¯·æ±‚ä¸Šå®‰å…¨ç›¸å…³çš„æ–¹æ³•<ul><li><code>HttpServletRequest#authenticate(HttpServletResponse)</code></li><li><code>HttpServletRequest#login(String, String)</code></li><li><code>HttpServletRequest#logout()</code></li><li><code>AsyncContext#start(Runnable)</code></li></ul></li></ul></li><li><code>JaasApiIntegrationFilter</code><ul><li>JAAS é›†æˆ</li></ul></li><li><code>RememberMeAuthenticationFilter</code><ul><li>å¦‚æœæœªæ‰¾åˆ°å½“å‰çš„è®¤è¯ä¿¡æ¯, åˆ™å°è¯•ä» <code>RememberMeServices</code> ä¸­æ„å»ºè®¤è¯</li></ul></li><li><code>AnonymousAuthenticationFilter</code><ul><li>å¦‚æœæ²¡æœ‰è®¤è¯ä¿¡æ¯, åˆ™æ„å»ºä¸€ä¸ªåŒ¿åè®¤è¯ä¿¡æ¯</li></ul></li><li><code>SessionManagementFilter</code><ul><li>æ ¹æ®å½“å‰çš„è®¤è¯ä¿¡æ¯æ‰§è¡Œä¼šè¯ç›¸å…³çš„ç­–ç•¥</li></ul></li><li><code>ExceptionTranslationFilter</code><ul><li>å¤„ç†æŠ›å‡ºçš„ <code>AccessDeniedException</code> å’Œ <code>AuthenticationException</code> å¼‚å¸¸</li><li>å°†å¼‚å¸¸ä¿¡æ¯è½¬æ¢ä¸ºå¯¹åº”çš„ HTTP å“åº”</li><li><code>AuthenticationException</code><ul><li>ä¼šå°è¯•è¿”å›è¯·æ±‚ä»æ–°è¦æ±‚è®¤è¯</li></ul></li><li><code>AccessDeniedException</code><ul><li>å¦‚æœå½“å‰è®¤è¯æ˜¯åŒ¿åçš„æˆ–è€…æ˜¯è®°ä½æˆ‘, åˆ™å°è¯•ä»æ–°å¼€å§‹è®¤è¯</li><li>å¦åˆ™äº¤ç”± <code>AccessDeniedHandler</code> å¤„ç†</li></ul></li></ul></li><li><code>FilterSecurityInterceptor</code><ul><li>æ‰§è¡Œ <code>Filter</code> å±‚çš„æ‹¦æˆªå¤„ç†</li></ul></li><li><code>SwitchUserFilter</code><ul><li>å¤„ç†ç”¨æˆ·åˆ‡æ¢è¯·æ±‚ <code>/login/impersonate</code></li><li>å¤„ç†é€€å‡ºåˆ‡æ¢çš„ç”¨æˆ· <code>/logout/impersonate</code></li><li>ä¾‹å¦‚: å°†ç”¨æˆ·ä» <code>ROLE_ADMIN</code> åˆ‡æ¢ä¸º <code>ROLE_USER</code></li></ul></li></ul></li></ul></li></ul></li></ul></li><li>ä¸»è¦å®ç°<ul><li><code>SecurityConfigurerAdapter</code><ul><li>æ·»åŠ äº†å¯¹è±¡åå¤„ç†é…ç½®<ul><li><code>ObjectPostProcessor</code></li></ul></li><li>æ·»åŠ äº† <code>SecurityBuilder</code> é“¾å¼è°ƒç”¨çš„å¤„ç†</li></ul></li><li><code>WebSecurityConfigurerAdapter</code><ul><li>Builder ç±»å‹ä¸º <code>WebSecurity</code></li><li><code>ContentNegotiationStrategy</code><ul><li>é…ç½®å†…å®¹åå•†å†³ç­–</li></ul></li><li>è¯·æ±‚å¯¹è±¡ -&gt; åª’ä½“ç±»å‹</li><li>æˆæƒé…ç½®</li><li>æˆæƒç®¡ç†å™¨é…ç½®</li><li>Http å®‰å…¨é…ç½®<ul><li>é»˜è®¤é…ç½®<ul><li>csrf</li><li>å¼‚æ­¥é›†æˆ</li><li>å¼‚å¸¸å¤„ç†</li><li>å¤´å¤„ç†</li><li>ä¼šè¯ç®¡ç†</li><li>å®‰å…¨ä¸Šä¸‹æ–‡</li><li>è¯·æ±‚ç¼“å­˜</li><li>åŒ¿åè¯·æ±‚</li><li>servlet æ¥å£</li><li>é»˜è®¤ç™»å½•é¡µ</li><li>é€€å‡ºç™»å½•</li></ul></li></ul></li></ul></li><li><code>AbstractHttpConfigurer</code><ul><li>Builder ç±»å‹ä¸º <code>HttpSecurity</code></li><li>é…ç½®ç»“æœä¸º <code>DefaultSecurityFilterChain</code></li></ul></li></ul></li></ul></li><li><code>AuthenticationEventPublisher</code><ul><li>ç”¨äºå‘å¸ƒæˆæƒæˆåŠŸæˆ–å¤±è´¥çš„ Publisher<ul><li><code>AuthenticationSuccessEvent</code></li></ul></li><li>å¤±è´¥çš„æˆæƒä¼šæ ¹æ®å¼‚å¸¸ç±»å‹ä¸åŒæ˜ å°„ä¸ºä¸åŒçš„äº‹ä»¶</li></ul></li><li><code>UserDetailsService</code><ul><li>å®‰å…¨ç³»ç»Ÿä¸­çš„ç”¨æˆ·æ¦‚å¿µ</li><li>è¯¥æ¥å£æä¾›åªè¯»åŠŸèƒ½</li><li><code>UserDetails</code><ul><li>ç”¨æˆ·ä¿¡æ¯</li></ul></li><li><code>UserDetailsManager</code><ul><li>æä¾›å¯¹ç”¨æˆ·ä¿¡æ¯çš„ç®¡ç†</li></ul></li><li><code>GroupManager</code><ul><li>ç”¨æˆ·åˆ†ç»„ç®¡ç†</li></ul></li><li><code>AuthenticationUserDetailsService</code><ul><li>ä»è®¤è¯ä¸­æ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯</li></ul></li></ul></li><li><code>AuthenticationTrustResolver</code><ul><li>åˆ¤æ–­ä¸€ä¸ªè®¤è¯æ˜¯å¦ä¸ºåŒ¿åæˆ–è®°ä½æˆ‘</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="doc-notes"></a>Doc Notes<a class="hash-link" href="#doc-notes" title="Direct link to heading">#</a></h2><ul><li><a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#secure-object-impls" target="_blank" rel="noopener noreferrer">Secure Object Implementations</a></li><li>PermissionEvaluator ç”¨äºå¤„ç† hasPermission</li><li>æ–¹æ³•å®‰å…¨çš„ AOP ä¸»è¦åŸºäº MethodSecurityInterceptor</li><li>æ–¹æ³•å®‰å…¨ç›¸å…³çš„æ³¨è§£<ul><li>PreAuthorize</li><li>PostAuthorize</li><li>PreFilter</li><li>PostFilter</li></ul></li><li>å¯ä»¥ä½¿ç”¨ AuthenticationPrincipal æ³¨å…¥ä¸Šä¸‹æ–‡ä¸­çš„æˆæƒå¯¹è±¡ Authentication</li><li>å¦‚æœä½¿ç”¨äº†ä»£ç†æœåŠ¡å™¨, éœ€è¦é…ç½®æ­£ç¡®çš„ ForwardedHeaderFilter</li><li>å¯ä»¥ä½¿ç”¨ RoleHierarchy æ¥å®ç°è§’è‰²é—´çš„å±‚çº§å…³ç³»</li><li>å¦‚æœä¸æ˜¯ä½¿ç”¨çš„ä¼ ç»Ÿçš„æˆæƒæ–¹å¼, å¯ä»¥è€ƒè™‘æ·»åŠ è‡ªå·±çš„ AuthenticationEntryPoint åˆ° http ä¸Š</li><li>æ‰§è¡Œå®‰å…¨ç›¸å…³çš„ä¸»ä½“é€»è¾‘åœ¨ AbstractSecurityInterceptor ä¸­<ul><li><a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#secure-objects" target="_blank" rel="noopener noreferrer">AbstractSecurityInterceptor</a></li><li>æˆæƒéªŒè¯</li><li>å‰åéªŒè¯</li><li>è®¿é—®å†³ç­–</li><li>RunAs<ul><li>ä¼šæ›¿æ¢å½“å‰è¯·æ±‚ä¸Šä¸‹æ–‡ä¸­çš„ <code>Authentication</code></li></ul></li><li>åˆ†åˆ«åˆ†ä¸º MethodInvocation å’Œ FilterInvocation<ul><li>MethodInvocation å¯¹ AOP å¯¹æ–¹æ³•è°ƒç”¨çš„æ‹¦æˆª</li><li>FilterInvocation å¯¹ Servlet è¯·æ±‚å“åº”çš„æ‹¦æˆª<ul><li>ä¼šæ ¹æ® Request æ‰¾åˆ°å“åº”çš„å¤„ç†<ul><li>ä¾‹å¦‚: <code>.antMatchers(&quot;/user/**&quot;).access(&quot;@webSecurity.check(authentication,request)&quot;)</code><ul><li>ä¼šç”Ÿæˆä¸€ä¸ª RequestMatcher å®ç°ä¸º AntPathRequestMatcher<ul><li>RequestMatcher å¯èƒ½ä¼šä» request ä¸­æŠ½å–å‡ºå˜é‡</li></ul></li><li>ä¼šç”Ÿæˆ SecurityConfig , ä¼šç”± MetadataSource è½¬æ¢ä¸º WebExpressionConfigAttribute</li><li>ä¼šç”± WebExpressionVoter å¤„ç†<ul><li>æ˜¯ AccessDecisionVoter çš„å®ç°<ul><li>åŸºäºæŠ•ç¥¨çš„å†³ç­–</li><li>æŠ•ç¥¨ç»“æœä¸º ACCESS_GRANTED, ACCESS_ABSTAIN, ACCESS_DENIED</li><li>å¯èƒ½ä¼šç”±ä»¥ä¸‹ AccessDecisionManager å®ç°å¤„ç†</li><li>AffirmativeBased<ul><li>ä»»æ„</li></ul></li><li>ConsensusBased<ul><li>å¤§å¤šæ•°, ä¸åŒ…æ‹¬æ”¾å¼ƒæŠ•ç¥¨çš„</li></ul></li><li>UnanimousBased<ul><li>æ‰€æœ‰éƒ½æŠ•åŒæ„æˆ–æ”¾å¼ƒ</li></ul></li></ul></li></ul></li><li>æœ€ç»ˆä¼šæ±‡èšåˆ° ExpressionBasedFilterInvocationSecurityMetadataSource</li></ul></li></ul></li></ul></li></ul></li></ul></li><li>è§’è‰²ä¹‹æ‰€ä»¥ä¼šä½¿ç”¨ <code>ROLE_</code> å‰ç¼€, æ˜¯å› ä¸º <code>RoleVoter</code> ä¼šå°†æ‰€æœ‰æœ‰è¯¥å‰ç¼€çš„è®¤ä¸ºæ˜¯æ©˜è‰², å¹¶ä½œå‡ºåˆ¤æ–­</li><li>ConfigAttribute<ul><li><a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#tech-intro-config-attributes" target="_blank" rel="noopener noreferrer">What are Configuration Attributes</a></li><li>æ˜¯å°†æ‰€æœ‰æƒé™éªŒè¯ä¸²èµ·æ¥çš„å…³é”®</li><li>æ¯ä¸ªéªŒè¯éƒ½ä¼šç”Ÿæˆç›¸åº”çš„å±æ€§, æ¯ä¸ªå±æ€§æœ‰å„è‡ªçš„ç±»å‹, æ¯ä¸ªç±»å‹çš„å±æ€§ä¹Ÿå¯¹åº”äº†ç›¸åº”çš„å†³ç­–åˆ¤æ–­</li><li>ç”± SecurityMetadataSource åˆ›å»º, ä¸»è¦é’ˆå¯¹ AOP, åˆ†ä¸ºæ–¹æ³•è°ƒç”¨å’Œ Filter è°ƒç”¨</li><li>ç”± AccessDecisionManager å¤„ç†, å¤„ç†ä¹‹å‰éƒ½ä¼šåˆ¤æ–­ç›¸åº”çš„å±æ€§ç±»å‹</li></ul></li><li>AspectJSecurityInterceptor ä¸»è¦ç”¨äº DomainObject çº§åˆ«çš„ ACL</li><li>ExceptionTranslationFilter ä¼šå¤„ç†ä¸æˆæƒç›¸å…³çš„å¼‚å¸¸<ul><li>AuthenticationException</li><li>AccessDeniedException</li><li>å¦‚æœæ˜¯æˆæƒå¤±è´¥ AuthenticationException<ul><li>å…ˆ  RequestCache#savedRequest<ul><li>ä¾‹å¦‚ç”¨æˆ·æˆæƒæˆåŠŸåè·³è½¬</li></ul></li><li>ä¼šä½¿ç”¨ AuthenticationEntryPoint æ¥è§£å†³å¼‚å¸¸</li></ul></li><li>å¦‚æœæ˜¯æ‹’ç»è®¿é—® AccessDeniedException<ul><li>å¦‚æœæ˜¯å‘ç°ç”±äºæ˜¯å› ä¸ºæœªå®Œå…¨æˆæƒ(åŒ¿åæˆ–è®°ä½æˆ‘),ä¹Ÿä¼šè§¦å‘ä¸Šé¢æˆæƒå¤±è´¥çš„å¤„ç†</li><li>ä¼šä½¿ç”¨ AccessDeniedHandler æ¥è§£å†³å¼‚å¸¸</li></ul></li><li>å¯¹äº RESTful æ¥å£æœåŠ¡æ¥è¯´, è¯¥ Filter å®é™…ä¸Šæ˜¯ä¸éœ€è¦çš„</li></ul></li><li>AuthenticationTrustResolver å¯ä»¥ç”¨äºå®ç°å¯¹åŒ¿åå’Œè®°ä½æˆ‘çš„åˆ¤æ–­</li><li>ThrowableAnalyzer å¯ä»¥ç”¨æ¥è¾…åŠ©å¼‚å¸¸å¤„ç†</li><li>AbstractSecurityWebSocketMessageBrokerConfigurer å¯å¯¹ WebSocket è¿›è¡Œå®‰å…¨å¤„ç†</li><li><a href="http://stackoverflow.com/questions/6556522" target="_blank" rel="noopener noreferrer">Authentication vs Authorization</a><ul><li>Authentication<ul><li>Who you are</li><li>Login</li><li>HTTP 401 Unauthorized</li></ul></li><li>Authorization<ul><li>What you are allowed to do</li><li>Permission</li><li>HTTP 403 Forbidden</li></ul></li></ul></li><li>Spring Data é›†æˆ<ul><li>éœ€è¦æ·»åŠ ä¾èµ– <code>spring-security-data</code></li><li>è‡ªåŠ¨é…ç½® <code>org.springframework.boot.autoconfigure.security.SecurityDataConfiguration</code></li><li>åˆå§‹åŒ– <code>org.springframework.security.data.repository.query.SecurityEvaluationContextExtension</code></li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Bean</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public SecurityEvaluationContextExtension securityEvaluationContextExtension() {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return new SecurityEvaluationContextExtension();</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>@Query</code> å¯ä»¥ä½¿ç”¨ Spring Security çš„è¡¨è¾¾å¼<ul><li><code>@Query(&quot;select m from Message m where m.to.id = ?#{ principal?.id }&quot;)</code></li></ul></li><li>å¹¶å‘<ul><li>ç”±äºæˆæƒæ˜¯çº¿ç¨‹ç›¸å…³çš„, å¦‚æœè¦å¹¶å‘ä½¿ç”¨å¯ä»¥ä½¿ç”¨æ¡†æ¶æä¾›çš„åŒ…è£…ç±»<ul><li>DelegatingSecurityContextRunnable</li><li>DelegatingSecurityContextExecutor</li></ul></li></ul></li></ul><p><img src="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/images/security-interception.png"></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// åŸºäºè¡¨è¾¾å¼çš„è®¿é—®æ§åˆ¶</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// å³ä¾¿ä¸æ˜¯ç”¨ access, å®é™…ç”Ÿæˆçš„ä¹Ÿéƒ½æ˜¯ç±»ä¼¼çš„è¡¨è¾¾å¼</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">http</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  .authorizeRequests()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // å¯ä»¥ç›´æ¥è°ƒç”¨ä¸Šä¸‹æ–‡ä¸­çš„ bean å¯¹è±¡æ¥æ£€æµ‹</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // å…¶ä¸­çš„ request å‚æ•°æ˜¯åœ¨ WebSecurityExpressionRoot å®šä¹‰çš„</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    .antMatchers(&quot;/user/**&quot;).access(&quot;@webSecurity.check(authentication,request)&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // è®¿é—®è·¯å¾„å‚æ•°</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    .antMatchers(&quot;/user/{userId}/**&quot;).access(&quot;@webSecurity.checkUserId(authentication,#userId)&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="acl"></a>ACL<a class="hash-link" href="#acl" title="Direct link to heading">#</a></h3><ul><li><a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#domain-acls" target="_blank" rel="noopener noreferrer">Domain Object Security</a></li><li>spring-security-acl</li><li>ä¸»è¦ç”¨äºæ§åˆ¶å¯¹è±¡æƒé™</li><li>ä½¿ç”¨ <code>ACL_</code> æ•°æ®è¡¨<ul><li>ACL_SID<ul><li>SID -&gt; Security Identifier</li><li>ç³»ç»Ÿä¸­ principal æˆ– authority çš„å”¯ä¸€æ ‡è¯†ç¬¦</li></ul></li><li>ACL_CLASS<ul><li>ç³»ç»Ÿä¸­ DO çš„å”¯ä¸€æ ‡è¯†ç¬¦</li></ul></li><li>ACL_OBJECT_IDENTITY<ul><li>DO å®ä¾‹çš„å”¯ä¸€æ ‡è¯†ç¬¦</li></ul></li><li>ACL_ENTRY<ul><li>å­˜å‚¨æŒ‡æ´¾ç»™ recipient çš„å•ç‹¬æƒé™</li><li>åŒ…å« ACL_OBJECT_IDENTITY, ACL_SID å’Œæƒé™çš„ bit mask</li></ul></li></ul></li><li>ä¸»è¦æ¥å£<ul><li>Acl<ul><li>æ¯ä¸ª DO å¯¹åº”ä¸€ä¸ª Acl, åŒ…å« <code>AccessControlEntry</code> ä¿¡æ¯, ä¸ç›´æ¥æŒ‡å‘ DO, ä½†åŒ…å« <code>ObjectIdentity</code>.</li><li>å­˜å‚¨äº <code>ACL_OBJECT_IDENTITY</code> è¡¨</li></ul></li><li>AccessControlEntry<ul><li>åŒ…å«å¤šä¸ª <code>AccessControlEntry</code></li><li>ç¼©å†™ä¸º <code>ACE</code></li><li>æ¯ä¸ª ACE æŒ‡å‘ä¸€ç»„ Permission, Sid å’Œ Acl.</li><li>åŒ…å«æˆæƒå’Œæœªè¢«æˆæƒä¿¡æ¯</li><li>åŒ…å«å®¡æŸ¥è®¾ç½®</li><li>å­˜å‚¨äº <code>ACL_ENTRY</code></li></ul></li><li>Permission<ul><li>è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜çš„ bit mask, å¹¶æä¾›ç›¸åº”çš„æ“ä½œ</li><li>åŸºç¡€çš„æƒé™ (0-4) åœ¨ <code>BasePermission</code> ç±»ä¸­</li></ul></li><li>Sid<ul><li>æŠ½è±¡åŒ–äº† principals å’Œ <code>GrantedAuthority[]</code>, ä»¥ä¾› ACL æ¨¡å—å¼•ç”¨</li><li>å¸¸è§çš„ç±»åŒ…å«<ul><li>PrincipalSid: è¡¨ç¤º <code>Authentication</code> ä¸­çš„ principals</li><li>GrantedAuthoritySid</li></ul></li><li>å­˜å‚¨äº <code>ACL_SID</code></li></ul></li><li>ObjectIdentity<ul><li>æ¯ä¸ª DO å®ä¾‹åœ¨ ACL æ¨¡å—ä¸­éƒ½ä½¿ç”¨ <code>ObjectIdentity</code> è¡¨ç¤º</li><li>é»˜è®¤å®ç°ä¸º <code>ObjectIdentityImpl</code><ul><li>è°ƒç”¨ <code>getId</code> æ–¹æ³•</li></ul></li></ul></li><li>AclService<ul><li>ä» <code>ObjectIdentity</code> å–å¾— Acl ç›¸å…³çš„ä¿¡æ¯</li><li>é»˜è®¤å®ç°ä¸º <code>JdbcAclService</code></li><li>è¯·æ±‚æ“ä½œä¼šè½¬ç§»åˆ° <code>LookupStrategy</code><ul><li>ä¼˜åŒ–äº†å¯¹ ACL ä¿¡æ¯çš„è¯·æ±‚</li><li>BasicLookupStrategy</li></ul></li></ul></li><li>MutableAclService<ul><li>å¾ªåºä¿®æ”¹çš„ Acl ä¿¡æ¯è¢«æŒä¹…åŒ–</li><li>è¯¥åŠŸèƒ½å¯é€‰</li></ul></li></ul></li><li>å–ä¸åˆ° DO çš„ id ä¼šæŠ•å¼ƒæƒ</li><li>Permission<ul><li>æƒé™ä¸ºä¸€ä¸ª bit mask + å­—ç¬¦</li><li>BasePermission å®šä¹‰äº†åŸºç¡€æƒé™</li><li>PermissionFactory</li><li>CumulativePermission å¯ä¿®æ”¹çš„æƒé™å¯¹è±¡, ç”¨äºæ„å»ºæƒé™</li></ul></li><li>NOTE<ul><li>è‡ªå·±ä½¿ç”¨æ—¶å»ºè®®è‡ªå·±å®ç° AclService, å¦‚æœä¸éœ€è¦æä¾›ä¿®æ”¹æ¥å£åˆ™ä¸éœ€è¦å®ç°ä¿®æ”¹æ¥å£</li><li>ç›®å‰æ²¡æœ‰é’ˆå¯¹ Acl çš„è‡ªåŠ¨é…ç½®, æ·»åŠ æ‰«æè·¯å¾„åº”è¯¥å¯ä»¥, æˆ–è€…æ‰‹åŠ¨æ·»åŠ  Voter å’Œ AfterInvocation çš„å¤„ç†.</li><li>å¦‚æœæ˜¯åŸºäºç°æœ‰å¯¹è±¡å®ç° Acl<ul><li>å®ç°è‡ªå®šä¹‰çš„ <code>ObjectIdentityRetrievalStrategy</code> å’Œ <code>ObjectIdentityRetrievalStrategy</code></li><li>å­˜å‚¨çœŸå®çš„ DO å¯¹è±¡. AclService ä»å®ç°ä¸Šå–å¾—çœŸå®å¯¹è±¡å…³è”çš„ä¿¡æ¯</li></ul></li></ul></li></ul><p><strong>BasePermission</strong></p><table><thead><tr><th>Char</th><th>Mask</th><th>Meaning</th></tr></thead><tbody><tr><td>R</td><td>&#x27;----1&#x27;</td><td>READ</td></tr><tr><td>W</td><td>&#x27;---1-&#x27;</td><td>WRITE</td></tr><tr><td>C</td><td>&#x27;--1--&#x27;</td><td>CREATE</td></tr><tr><td>D</td><td>&#x27;-1---&#x27;</td><td>DELETE</td></tr><tr><td>A</td><td>&#x27;1----&#x27;</td><td>ADMINISTRATION</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="ä¸»è¦å¯¹è±¡"></a>ä¸»è¦å¯¹è±¡<a class="hash-link" href="#ä¸»è¦å¯¹è±¡" title="Direct link to heading">#</a></h2><table><thead><tr><th>å¯¹è±¡å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>SecurityContextHolder</td><td>æä¾›å¯¹ SecurityContext çš„è®¿é—®</td></tr><tr><td>SecurityContext</td><td>æä¾› Authentication å’Œå¯èƒ½å¯¹è¯·æ±‚ç›¸å…³çš„å®‰å…¨ä¿¡æ¯</td></tr><tr><td>Authentication</td><td>ä»¥ Spring Security çš„å½¢å¼æä¾›çš„ principal</td></tr><tr><td>GrantedAuthority</td><td>ååº”åº”ç”¨èŒƒå›´å†… principal æ‰€è·å–åˆ°çš„æƒé™</td></tr><tr><td>UserDetails</td><td>æä¾›å¿…è¦çš„ä¿¡æ¯å¹¶é€šè¿‡åº”ç”¨çš„ DAO æˆ–å…¶ä»–å®‰å…¨æ•°æ®æ¥æºæ¥æ„å»ºä¸€ä¸ª Authentication å¯¹è±¡</td></tr><tr><td>UserDetailsService</td><td>é€šè¿‡æä¾›çš„ username æˆ–è€… æˆæƒ ID æ¥æ„å»ºä¸€ä¸ª UserDetails å¯¹è±¡</td></tr></tbody></table><p><a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#setting-the-securitycontextholder-contents-directly" target="_blank" rel="noopener noreferrer">Setting the SecurityContextHolder Contents Directly</a>
å®é™…ä¸Š Spring Security å¹¶ä¸å…³å¿ƒ SecurityContextHolder ä¸­çš„ Authentication å¯¹è±¡æ˜¯å¦‚ä½•æ”¾è¿›å»çš„.æœ€é‡è¦çš„æ˜¯ SecurityContextHolder åœ¨ AbstractSecurityInterceptor å¤„ç†ä¹‹å‰éœ€è¦æŒæœ‰ä¸€ä¸ª Authentication æ¥è¡¨ç¤º principal.</p><p>æƒ³è¦æ”¾å…¥ SecurityContextHolder, è¦ä¿è¯ä¼šè°ƒç”¨ SecurityContextPersistenceFilter, é»˜è®¤æƒ…å†µä¸‹éƒ½ä¼šåŠ è½½è¯¥ Filter.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="åŸºäºè¡¨è¾¾å¼çš„æƒé™æ§åˆ¶"></a>åŸºäºè¡¨è¾¾å¼çš„æƒé™æ§åˆ¶<a class="hash-link" href="#åŸºäºè¡¨è¾¾å¼çš„æƒé™æ§åˆ¶" title="Direct link to heading">#</a></h2><ul><li>è¡¨è¾¾å¼çš„æ ¹å¯¹è±¡ä¸º <code>SecurityExpressionRoot</code></li></ul><table><thead><tr><th>è¡¨è¾¾å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>hasRole([role])</td><td>è¿”å› <code>true</code> å¦‚æœå½“å‰ principle æœ‰è¯¥è§’è‰².é»˜è®¤æƒ…å†µä¸‹å¦‚æœç»™çš„è§’è‰²ä¸æ˜¯ <code>ROLE_</code> å¼€å¤´çš„,ä¼šæ·»åŠ è¯¥è§’è‰².å¯é€šè¿‡ <code>DefaultWebSecurityExpressionHandler</code> çš„ <code>defaultRolePrefix</code> ä¿®æ”¹</td></tr><tr><td>hasAnyRole([role1,role2])</td><td>åŒä¸Š</td></tr><tr><td>hasAuthority([authority])</td><td>åˆ¤æ–­æ˜¯å¦æœ‰è¯¥æˆæƒ</td></tr><tr><td>hasAnyAuthority([authority1,authority2])</td><td>åŒä¸Š</td></tr><tr><td>principal</td><td>å¯ç›´æ¥è®¿é—®å½“å‰çš„ principle</td></tr><tr><td>authentication</td><td>å¯ç›´æ¥è®¿é—®å½“å‰ <code>SecurityContext</code> ä¸­çš„ <code>Authentication</code> å¯¹è±¡.</td></tr><tr><td>permitAll</td><td>æ€»æ˜¯è¿”å› <code>true</code></td></tr><tr><td>denyAll</td><td>æ€»æ˜¯è¿”å› <code>false</code></td></tr><tr><td>isAnonymous()</td><td>åˆ¤æ–­æ˜¯å¦ä¸ºåŒ¿åç”¨æˆ·,äº¤ç”± <code>AuthenticationTrustResolver</code> åˆ¤æ–­</td></tr><tr><td>isRememberMe()</td><td>åˆ¤æ–­æ˜¯å¦ä¸ºè®°ä½æˆ‘ç”¨æˆ·,äº¤ç”± <code>AuthenticationTrustResolver</code> åˆ¤æ–­</td></tr><tr><td>isAuthenticated()</td><td>åˆ¤æ–­æ˜¯å¦æˆæƒ, å¦‚æœä¸ºéåŒ¿ååˆ™è¿”å› <code>true</code></td></tr><tr><td>isFullyAuthenticated()</td><td>å¦‚æœç”¨æˆ·ä¸æ˜¯åŒ¿åç”¨æˆ·ä¸”ä¸æ˜¯è®°ä½æˆ‘ç”¨æˆ·.</td></tr><tr><td>hasPermission(Object target, Object permission)</td><td>å¦‚æœç”¨æˆ·æœ‰è®¿é—®è¯¥å¯¹è±¡çš„æƒé™è¿”å› <code>true</code><br>äº¤ç”± <code>PermissionEvaluator</code> å¤„ç†</td></tr><tr><td>hasPermission(Object targetId, String targetType, Object permission)</td><td>åŒä¸Š</td></tr><tr><td>filterTarget</td><td>è¡¨è¾¾å¼å†…å»ºå¯¹è±¡</td></tr><tr><td>returnValue</td><td>è¡¨è¾¾å¼å†…å»ºå¯¹è±¡</td></tr><tr><td>hasIpAddress([IP])</td><td>ç”± <code>WebSecurityExpressionRoot</code> å®šä¹‰çš„å†…å»ºè¡¨è¾¾å¼</td></tr></tbody></table><p><strong>ç¤ºä¾‹</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@PreAuthorize(&quot;#n == authentication.name&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Contact findContactByName(@Param(&quot;n&quot;) String name);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@PreAuthorize(&quot;#c.name == authentication.name&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void doSomething(@P(&quot;c&quot;) Contact contact);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@PreAuthorize(&quot;hasRole(&#x27;USER&#x27;)&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void create(Contact contact);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@PreAuthorize(&quot;hasPermission(#contact, &#x27;admin&#x27;)&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void deletePermission(Contact contact, Sid recipient, Permission permission);</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@PostFilter(&quot;hasPermission(filterObject, &#x27;read&#x27;) or hasPermission(filterObject, &#x27;admin&#x27;)&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><p>å¦‚æœä½¿ç”¨ JDK 8 ç¼–è¯‘, ç¼–è¯‘æ—¶æŒ‡å®šäº† <code>-parameters</code> å‚æ•°,å¹¶ä¸”ä½¿ç”¨çš„ Spring4+, é‚£ä¹ˆé€šè¿‡ JDK çš„åå°„æ¥å£å¯è·å–åˆ°æ¥å£å’Œç±»çš„å‚æ•°å.</p></li><li><p>å¦‚æœç¼–è¯‘æ—¶å¯ç”¨äº†è°ƒè¯•ç¬¦å·,åˆ™å¯ä»¥é€šè¿‡è°ƒè¯•ç¬¦å·è·å–åˆ°ç±»å‚æ•°å,æ— æ³•è·å–åˆ°æ¥å£å‚æ•°å,å› ä¸ºæ¥å£æ²¡æœ‰è°ƒè¯•ç¬¦å·, å¯æ˜¯å¯ä»¥ä½¿ç”¨ <code>$P(&#x27;name&#x27;)</code> çš„å½¢å¼æ¥ç»™å®šåå­—</p></li><li><p><a href="http://docs.spring.io/spring-security/site/docs/4.0.4.RELEASE/reference/htmlsingle/#el-common-built-in" target="_blank" rel="noopener noreferrer">å¸¸ç”¨å†…å»ºè¡¨è¾¾å¼</a></p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="filter-é¡ºåº"></a>Filter é¡ºåº<a class="hash-link" href="#filter-é¡ºåº" title="Direct link to heading">#</a></h2><table><thead><tr><th>ç±»å</th><th>æè¿°</th></tr></thead><tbody><tr><td>ChannelProcessingFilter</td><td>å¯èƒ½ä¼šé‡å®šå‘åˆ°ä¸åŒåè®®</td></tr><tr><td>SecurityContextPersistenceFilter</td><td>SecurityContextHolder çš„ SecurityContext å¯åœ¨è¯·æ±‚ä¹‹å‰è®¾ç½®å¥½, åœ¨è¯·æ±‚ç»“æŸæ—¶æ‰€æœ‰å¯¹ SecurityContext çš„ä¿®æ”¹éƒ½å¯ä»¥è¢«å¤åˆ¶åˆ° HttpSession ä¸­,ä»¥ä¾¿äºä¸‹æ¬¡è¯·æ±‚æ—¶ä½¿ç”¨.</td></tr><tr><td>ConcurrentSessionFilter</td><td>å› ä¸ºä½¿ç”¨äº† SecurityContextHolder çš„åŠŸèƒ½,å¹¶ä¸”éœ€è¦æ›´æ–° SessionRegistry æ¥ååº”æ­£åœ¨å¤„ç†çš„è¯·æ±‚</td></tr><tr><td>Authentication å¤„ç†æœºåˆ¶</td><td>UsernamePasswordAuthenticationFilter, CasAuthenticationFilter, BasicAuthenticationFilter ç­‰<br>ä½¿å¾— SecurityContextHolder ä¸­èƒ½åŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„ Authentication è¯·æ±‚ä»¤ç‰Œ</td></tr><tr><td>SecurityContextHolderAwareRequestFilter</td><td>ç”¨äºæ·»åŠ ä¸€ä¸ªèƒ½æ„ŸçŸ¥ Spring Security ä¸Šä¸‹æ–‡çš„ HttpServletRequestWrapper åˆ° servlet å®¹å™¨ä¸­</td></tr><tr><td>JaasApiIntegrationFilter</td><td>å¦‚æœ JaasAuthenticationToken åœ¨ SecurityContextHolder ä¸­,è¯¥ Filter ä¼šå°† FilterChain ä½œä¸º JaasAuthenticationToken çš„ Subject æ¥å¤„ç†=</td></tr><tr><td>RememberMeAuthenticationFilter</td><td>å¦‚æœä¹‹å‰çš„é‰´æƒå¤„ç†éƒ½æ²¡æœ‰ä¸º SecurityContextHolder è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆçš„ Authentication, å¹¶ä¸”è¯·æ±‚ä¸­æºå¸¦çš„ Cookie è¡¨ç¤ºå¯ç”¨äº†&#x27;è®°ä½ç™»é™†&#x27;æœåŠ¡, é‚£ä¹ˆä¸€ä¸ªç›¸åº”çš„ Authentication ä¼šè¢«æ”¾åˆ° SecurityContextHolder ä¸­.</td></tr><tr><td>AnonymousAuthenticationFilter</td><td>å¦‚æœä¹‹å‰çš„å¤„ç†æœºåˆ¶éƒ½æ²¡æ›´æ–° SecurityContextHolder,ä¸€ä¸ªåŒ¿å Authentication ä¼šè¢«æ”¾åˆ°é‚£é‡Œ.</td></tr><tr><td>ExceptionTranslationFilter</td><td>ç”¨æ¥æ•è·æ‰€æœ‰åœ¨ Spring Security å‘ç”Ÿçš„å¼‚å¸¸,å¯è¿”å›ä¸€ä¸ª HTTP é”™è¯¯ç›¸åº”æˆ–ç›¸åº”çš„ AuthenticationEntryPoint ä¼šè¢«å¯åŠ¨.</td></tr><tr><td>FilterSecurityInterceptor</td><td>ç”¨äºä¿æŠ¤ URI, å½“è®¿é—®è¢«æ‹’ç»æ—¶æŠ›å‡ºå¼‚å¸¸</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="æ ‡å‡†è¿‡æ»¤å™¨åˆ«åå’Œé¡ºåº"></a>æ ‡å‡†è¿‡æ»¤å™¨åˆ«åå’Œé¡ºåº<a class="hash-link" href="#æ ‡å‡†è¿‡æ»¤å™¨åˆ«åå’Œé¡ºåº" title="Direct link to heading">#</a></h2><table><thead><tr><th>åˆ«å</th><th>è¿‡æ»¤å™¨ç±»</th><th>å‘½åç©ºé—´å’Œå±æ€§</th></tr></thead><tbody><tr><td>CHANNEL_FILTER</td><td>ChannelProcessingFilter</td><td>http/intercept-url@requires-channel</td></tr><tr><td>SECURITY_CONTEXT_FILTER</td><td>SecurityContextPersistenceFilter</td><td>http</td></tr><tr><td>CONCURRENT_SESSION_FILTER</td><td>ConcurrentSessionFilter</td><td>session-management/concurrency-control</td></tr><tr><td>HEADERS_FILTER</td><td>HeaderWriterFilter</td><td>http/headers</td></tr><tr><td>CSRF_FILTER</td><td>CsrfFilter</td><td>http/csrf</td></tr><tr><td>LOGOUT_FILTER</td><td>LogoutFilter</td><td>http/logout</td></tr><tr><td>X509_FILTER</td><td>X509AuthenticationFilter</td><td>http/x509</td></tr><tr><td>PRE_AUTH_FILTER</td><td>AbstractPreAuthenticatedProcessingFilter Subclasses</td><td>N/A</td></tr><tr><td>CAS_FILTER</td><td>CasAuthenticationFilter</td><td>N/A</td></tr><tr><td>FORM_LOGIN_FILTER</td><td>UsernamePasswordAuthenticationFilter</td><td>http/form-login</td></tr><tr><td>BASIC_AUTH_FILTER</td><td>BasicAuthenticationFilter</td><td>http/http-basic</td></tr><tr><td>SERVLET_API_SUPPORT_FILTER</td><td>SecurityContextHolderAwareRequestFilter</td><td>http/@servlet-api-provision</td></tr><tr><td>JAAS_API_SUPPORT_FILTER</td><td>JaasApiIntegrationFilter</td><td>http/@jaas-api-provision</td></tr><tr><td>REMEMBER_ME_FILTER</td><td>RememberMeAuthenticationFilter</td><td>http/remember-me</td></tr><tr><td>ANONYMOUS_FILTER</td><td>AnonymousAuthenticationFilter</td><td>http/anonymous</td></tr><tr><td>SESSION_MANAGEMENT_FILTER</td><td>SessionManagementFilter</td><td>session-management</td></tr><tr><td>EXCEPTION_TRANSLATION_FILTER</td><td>ExceptionTranslationFilter</td><td>http</td></tr><tr><td>FILTER_SECURITY_INTERCEPTOR</td><td>FilterSecurityInterceptor</td><td>http</td></tr><tr><td>SWITCH_USER_FILTER</td><td>SwitchUserFilter</td><td>N/A</td></tr></tbody></table><ul><li>å‚è€ƒ <a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#ns-custom-filters" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰è¿‡æ»¤å™¨</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/java/spring/spring-security.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/notes/java/spring/releases"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« å‘å¸ƒå†å²</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/notes/java/spring/security-oauth2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Spring Security OAuth2 Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tips" class="table-of-contents__link">Tips</a></li><li><a href="#notes" class="table-of-contents__link">Notes</a></li><li><a href="#doc-notes" class="table-of-contents__link">Doc Notes</a><ul><li><a href="#acl" class="table-of-contents__link">ACL</a></li></ul></li><li><a href="#ä¸»è¦å¯¹è±¡" class="table-of-contents__link">ä¸»è¦å¯¹è±¡</a></li><li><a href="#åŸºäºè¡¨è¾¾å¼çš„æƒé™æ§åˆ¶" class="table-of-contents__link">åŸºäºè¡¨è¾¾å¼çš„æƒé™æ§åˆ¶</a></li><li><a href="#filter-é¡ºåº" class="table-of-contents__link">Filter é¡ºåº</a></li><li><a href="#æ ‡å‡†è¿‡æ»¤å™¨åˆ«åå’Œé¡ºåº" class="table-of-contents__link">æ ‡å‡†è¿‡æ»¤å™¨åˆ«åå’Œé¡ºåº</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ç¬”è®°</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 1992-2021 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2021-12-04 00:19</div></div></div></footer></div>
<script src="/assets/js/runtime~main.77714c4d.js"></script>
<script src="/assets/js/main.78d9fd76.js"></script>
</body>
</html>