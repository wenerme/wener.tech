<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml"><title data-react-helmet="true">Kubernetes | Wener Live &amp; Life</title><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/devops/kubernetes/kubernetes"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Kubernetes | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="* Reference"><meta data-react-helmet="true" property="og:description" content="* Reference"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wener.me/notes/devops/kubernetes/kubernetes"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/devops/kubernetes/kubernetes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/devops/kubernetes/kubernetes" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.82b257c7.css">
<link rel="preload" href="/assets/js/runtime~main.83b31e1b.js" as="script">
<link rel="preload" href="/assets/js/main.ad3af725.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Wener</b></a><a class="navbar__item navbar__link" href="/notes/java/java">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">工具</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">自我成长</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Java</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Web</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">语言</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">AlpineLinux</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Docker</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Kubernetes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/notes/devops/kubernetes/kubernetes">Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/k8s-awesome">K8S Awesome</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/k8s-dashboard">Kubernates 面板</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/k8s-faq">K8S 常见问题</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/k8s-glossary">K8S 词汇表</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/k8s-my-practice">我的 K8S 实践</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/k8s-version">Kubernetes 版本</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">发行版</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">网络</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">存储</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">平台</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">应用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/dev/dev">Kubernetes 开发</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/internal/internal">Kubernetes Internal</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/internal/k8s-api">Kubernates 接口</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/internal/k8s-dns">Kubernetes DNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/internal/k8s-labels">Kubernetes 标签</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/internal/k8s-scheduling">Kubernetes 调度</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/k3s-story">K8S 使用经验</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/kubectl-faq">kubectl FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/ops/kops">kops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/ops/kubectl">Kubectl</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/ops/kubectl-faq">kubectl FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/ops/rke">RKE - 安装器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/tool/krew">krew</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/notes/devops/kubernetes/tool/kustomize">kustomize</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">虚拟化</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">操作系统</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">VoIP</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">开发</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">DevOps</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">数据库</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">消息队列</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">安全</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">服务</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">运维</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">指南</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">硬件</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">算法</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">健康</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">参考</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">工具</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Kubernetes</h1></header><ul><li><a href="http://kubernetes.io/docs/user-guide" target="_blank" rel="noopener noreferrer">Reference</a></li><li><a href="http://kubernetes.io/docs" target="_blank" rel="noopener noreferrer">Guide</a></li><li><a href="https://github.com/kelseyhightower/kubernetes-the-hard-way" target="_blank" rel="noopener noreferrer">Kubernetes the hard way</a></li><li><a href="https://blog.netsil.com/kubernetes-vs-openshift-vs-tectonic-comparing-enterprise-options-e3a34dc60519" target="_blank" rel="noopener noreferrer">Kubernetes vs Openshift vs Tectonic</a></li><li><a href="https://github.com/ramitsurana/awesome-kubernetes" target="_blank" rel="noopener noreferrer">ramitsurana/awesome-kubernetes</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install"></a>Install<a class="hash-link" href="#install" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubeadm"></a>kubeadm<a class="hash-link" href="#kubeadm" title="Direct link to heading">#</a></h3><p>从 1.4 开始, Kubernetes 提供了 kubeadm 的测试版,简单的<a href="http://kubernetes.io/docs/getting-started-guides/kubeadm/" target="_blank" rel="noopener noreferrer">使用说明</a> 描述了如何以类似于 docker swarm 初始化集群的方式来部署 Kubernetes.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 如果你有代理,则先设置好代理</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">proxy_host</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10.1</span><span class="token plain">.1.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">https_proxy</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">http://</span><span class="token variable" style="color:rgb(191, 199, 213)">$proxy_host</span><span class="token plain">:7777</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">http_proxy</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">http://</span><span class="token variable" style="color:rgb(191, 199, 213)">$proxy_host</span><span class="token plain">:7777</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> https://packages.cloud.google.com/apt/doc/apt-key.gpg </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> apt-key </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> -</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">EOF</span><span class="token string bash punctuation" style="color:rgb(199, 146, 234)"> </span><span class="token string bash punctuation operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token string bash punctuation" style="color:rgb(199, 146, 234)"> /etc/apt/sources.list.d/kubernetes.list</span><span class="token string" style="color:rgb(195, 232, 141)"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">deb http://apt.kubernetes.io/ kubernetes-xenial main</span></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">EOF</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> update</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y docker.io kubelet kubeadm kubectl kubernetes-cni</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 注意</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 由于 kubeadm 使用的大多服务都是在容器中的,因此一定要记得为 docker 设置好代理</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 启动 Master 节点</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 如果有多个网卡,通过  --api-advertise-addresses=&lt;地址&gt; 指定</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubeadm init</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 允许 Master 节点执行 POD, 也可用于单节点测试</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubelet taint nodes --all dedicated-</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 在其他节点上执行,加入到集群</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubeadm </span><span class="token function" style="color:rgb(130, 170, 255)">join</span><span class="token plain"> --token </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">上面生成的 Token</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">上面给出的地址</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>清理集群</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl stop kubelet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">docker </span><span class="token variable function" style="color:rgb(130, 170, 255)">ps</span><span class="token variable" style="color:rgb(191, 199, 213)"> -q</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mount</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/var/lib/kubelet/*&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">awk</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{print </span><span class="token string variable" style="color:rgb(191, 199, 213)">$3</span><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">xargs</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">umount</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/dev/null </span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/dev/null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -rf /var/lib/kubelet /etc/kubernetes /var/lib/etcd /etc/cni</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">link</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> cbr0 down</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">link</span><span class="token plain"> del cbr0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">link</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> cni0 down</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">link</span><span class="token plain"> del cni0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl start kubelet</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tips"></a>Tips<a class="hash-link" href="#tips" title="Direct link to heading">#</a></h4><p>使用 kubeadm 时会在 /etc/systemd/system/kubelet.service.d 生成相应的配置,例如 10-kubeadm.conf.</p><p><strong>10-kubeadm.conf</strong></p><p>kubelet 参数可参考 <a href="http://kubernetes.io/docs/admin/kubelet/" target="_blank" rel="noopener noreferrer">http://kubernetes.io/docs/admin/kubelet/</a>
cni 可参考 <a href="http://kubernetes.io/docs/admin/network-plugins/" target="_blank" rel="noopener noreferrer">http://kubernetes.io/docs/admin/network-plugins/</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Service]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Environment=&quot;KUBELET_KUBECONFIG_ARGS=--kubeconfig=/etc/kubernetes/kubelet.conf --require-kubeconfig=true&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Environment=&quot;KUBELET_SYSTEM_PODS_ARGS=--pod-manifest-path=/etc/kubernetes/manifests --allow-privileged=true&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Environment=&quot;KUBELET_NETWORK_ARGS=--network-plugin=cni --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Environment=&quot;KUBELET_DNS_ARGS=--cluster-dns=100.64.0.10 --cluster-domain=cluster.local&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Environment=&quot;KUBELET_EXTRA_ARGS=--v=4&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_EXTRA_ARGS</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="最佳实践"></a>最佳实践<a class="hash-link" href="#最佳实践" title="Direct link to heading">#</a></h2><ul><li><a href="https://kubernetes.io/docs/setup/best-practices/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/setup/best-practices/</a></li><li><a href="https://rancher.com/blog/2019/2019-01-17-101-more-kubernetes-security-best-practices/" target="_blank" rel="noopener noreferrer">https://rancher.com/blog/2019/2019-01-17-101-more-kubernetes-security-best-practices/</a></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="faq"></a>FAQ<a class="hash-link" href="#faq" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="安装好后无法使用-kubectl-提示说地址错误"></a>安装好后无法使用 kubectl, 提示说地址错误<a class="hash-link" href="#安装好后无法使用-kubectl-提示说地址错误" title="Direct link to heading">#</a></h5><p>需要手动指定地址 <code>kubectl --server=127.0.0.1:8080 get nodes</code>, 因为启动时的API 服务器地址为 <code>127.0.0.1:8080</code>,具体指定位置在 <code>cat /etc/kubernetes/manifests/kube-apiserver.json</code>, 该地址暂时无法更改.</p><p>由于绑定的地址是 <code>127.0.0.1</code>, 所以如果想要在本地使用,则建议在本地通过转发使用 <code>ssh -vNL 8082:127.0.0.1:8080 主机地址</code>, 然后则可以使用 <code>kubectl -s 127.0.0.1:8082 get nodes</code> 进行操作了.</p><blockquote><p>TIPS:
通过 <code>alias k=&quot;kubectl -s 127.0.0.1:8082&quot;</code> 简化操作</p></blockquote><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="阻塞在-waiting-for-control-plane-to-become-ready"></a>阻塞在 Waiting for &#x27;control plane to become ready&#x27;<a class="hash-link" href="#阻塞在-waiting-for-control-plane-to-become-ready" title="Direct link to heading">#</a></h5><p>也有别人遇到过该问题 <a href="https://github.com/kubernetes/kubernetes/issues/33544" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/kubernetes/issues/33544</a> ,我也遇到,但为 Docker 添加代理后就没问题了,应该是拉取容器造成的.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="限制"></a>限制<a class="hash-link" href="#限制" title="Direct link to heading">#</a></h5><p>由于 kubeadm 还处于 beta 版,因此还会有很多问题</p><ol><li>创建的集群不能和云提供商进行集成,也就是说用不了 GCE 和 AWS 的负载均衡和持久化存储.建议使用 NodePort 来规避改问题.</li><li>集群只能有一个 Master, 多个 Master 的实现还在进行中.建议定义备份 etcd 数据(/var/lib/etcd) 来避免数据丢失的问题.如果数据丢失,整个集群必须从头开始构建.</li><li><code>kubectl logs</code> 无法使用,可追踪该问题 #22770.可通过使用 <code>docker logs</code> 来查看日志.</li><li>目前还没有很好的办法生成 kubeconfig 配置用于远程授权.可通过 <code>scp root@&lt;master&gt;:/etc/kubernetes/admin.conf</code> 来拉取主配置,然后在远程使用时通过 <code>kubectl --kubeconfig ./admin.conf</code> 的形式来使用.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="docker-multinode"></a>docker-multinode<a class="hash-link" href="#docker-multinode" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone --depth</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> https://github.com/kubernetes/kube-deploy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> kube-deploy/docker-multinode/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 使用 docker 安装相对比较简单,需要下载的只有镜像</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 使用 docker 一定要做好代理,否则下载 gcr 的内容会下载失败</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 做 docker 的镜像时,不只是对系统的 docker 做镜像,还需要修改 docker-bootstrap 中, bootstrap 使用到的 daemon 的代理</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">su</span><span class="token plain"> root</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./master.sh</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 启动使用的镜像 https://github.com/kubernetes/kubernetes/tree/master/cluster/images/hyperkube</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 查看启动运行的服务,可修改参数</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker run --rm -it gcr.io/google_containers/hyperkube-amd64:v1.3.6 ls /etc/kubernetes/manifests-multi</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可设置的参数可参考 http://kubernetes.io/docs/admin/kube-apiserver/</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 检查 Bootstrap 启动的程序是否正确</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker -H unix:///var/run/docker-bootstrap.sock </span><span class="token function" style="color:rgb(130, 170, 255)">ps</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 检查相关的进程是否启动</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker </span><span class="token function" style="color:rgb(130, 170, 255)">ps</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 主节点启动成功后再从节点上执行</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># MASTER_IP=主节点地址 ./worker.sh</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装 kubectl</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 1.3.6</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -sSL https://storage.googleapis.com/kubernetes-release/release/v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">KUBECTL_VERSION</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">/bin/linux/amd64/kubectl </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /usr/local/bin/kubectl</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x /usr/local/bin/kubectl</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装 Helm</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -s https://get.helm.sh </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$PWD</span><span class="token plain">/helmc /usr/local/bin/helmc</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装 Deis</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helmc repo </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> deis https://github.com/deis/charts</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 具体版本可查看 https://github.com/deis/charts</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># fetches the chart into a local workspace</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helmc fetch deis/workflow-v2.4.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># generates various secrets</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helmc generate -x manifests workflow-v2.4.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># injects resources into  your cluster</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helmc </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> workflow-v2.4.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 检查安装状态</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl --namespace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">deis get pods</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装 Deis 命令行</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -sSL http://deis.io/deis-cli/install-v2.sh </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$PWD</span><span class="token plain">/deis /usr/local/bin/deis</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl --namespace</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">deis get svc deis-router</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 使用上个命令中的 ExternalIP</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>:8080/ui 管理面板</li><li>:4194 cAdvisor</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kube-up---ubuntu"></a>kube-up - Ubuntu<a class="hash-link" href="#kube-up---ubuntu" title="Direct link to heading">#</a></h3><p><a href="http://kubernetes.io/docs/getting-started-guides/ubuntu/" target="_blank" rel="noopener noreferrer">http://kubernetes.io/docs/getting-started-guides/ubuntu/</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone --depth </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> https://github.com/kubernetes/kubernetes.git</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">nodes</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;root@10.25.30.127 root@10.25.17.232 root@10.25.24.116&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">role</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ai i i&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NUM_NODES</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">${NUM_NODES</span><span class="token variable operator" style="color:rgb(137, 221, 255)">:-</span><span class="token variable" style="color:rgb(191, 199, 213)">3}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SERVICE_CLUSTER_IP_RANGE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">192.168</span><span class="token plain">.3.0/24</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">FLANNEL_NET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token plain">.0.0/16</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PROXY_SETTING</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http_proxy=10.25.30.127:7777 https_proxy=10.25.30.127:7777&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 下载的文件会存放于 kubernetes/cluster/ubuntu/binaries directory</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">KUBERNETES_PROVIDER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ubuntu ./kube-up.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tips-1"></a>Tips<a class="hash-link" href="#tips-1" title="Direct link to heading">#</a></h2><ul><li>该 PR <a href="https://github.com/kubernetes/kubernetes/pull/30360" target="_blank" rel="noopener noreferrer">#30360</a> 正在实现一个 kubeadm 命令,使得 Kubernetes 的集群构建和 swarm 一样简单.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 当关闭 k8s 后,对应的 pods 不会被 umount</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> /proc/mounts </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> -nre </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;s#.*?(/var\S*)\s.*#</span><span class="token string entity" style="color:rgb(195, 232, 141)">\1</span><span class="token string" style="color:rgb(195, 232, 141)">#p&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">xargs</span><span class="token plain"> -n </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">umount</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 删除 veth 虚拟网卡</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ifconfig</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sed</span><span class="token plain"> -nre </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;s/(veth\S*)\s.*/</span><span class="token string entity" style="color:rgb(195, 232, 141)">\1</span><span class="token string" style="color:rgb(195, 232, 141)">/p&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">xargs</span><span class="token plain"> -n </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">link</span><span class="token plain"> delete</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 如果修改了 CNI 的地址,需要先删除原来的 cni0</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ip</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">link</span><span class="token plain"> delete cni0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run -it --rm bb --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">busybox --restart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Never</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>私有 IP v4 地址</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">10.0.0.0/8 (255.0.0.0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">172.16.0.0/12 (255.240.0.0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">192.168.0.0/16 (255.255.0.0)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="常用-label"></a>常用 Label<a class="hash-link" href="#常用-label" title="Direct link to heading">#</a></h3><ul><li>release<ul><li>stable, canary</li></ul></li><li>environment<ul><li>dev, qa, production</li></ul></li><li>tier<ul><li>frontend, backend, cache</li></ul></li><li>partition<ul><li>customerA, customerB</li></ul></li><li>track<ul><li>daily, weekly</li></ul></li><li>role<ul><li>master, slave</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubectl"></a>kubectl<a class="hash-link" href="#kubectl" title="Direct link to heading">#</a></h2><ul><li><a href="http://kubernetes.io/docs/user-guide/kubectl-overview/" target="_blank" rel="noopener noreferrer">kubectl-overview</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run"></a>run<a class="hash-link" href="#run" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Create and run a particular image, possibly replicated.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Creates a deployment or job to manage the created container(s).</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start a single instance of nginx.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run nginx --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nginx</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start a single instance of hazelcast and let the container expose port 5701 .</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run hazelcast --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">hazelcast --port</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">5701</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start a single instance of hazelcast and set environment variables &quot;DNS_DOMAIN=cluster&quot; and &quot;POD_NAMESPACE=default&quot; in the container.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run hazelcast --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">hazelcast --env</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;DNS_DOMAIN=cluster&quot;</span><span class="token plain"> --env</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;POD_NAMESPACE=default&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start a replicated instance of nginx.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run nginx --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nginx --replicas</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Dry run. Print the corresponding API objects without creating them.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run nginx --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nginx --dry-run</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start a single instance of nginx, but overload the spec of the deployment with a partial set of values parsed from JSON.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run nginx --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nginx --overrides</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{ &quot;apiVersion&quot;: &quot;v1&quot;, &quot;spec&quot;: { ... } }&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start a pod of busybox and keep it in the foreground, don&#x27;t restart it if it exits.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run -i -t busybox --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">busybox --restart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Never</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start the nginx container using the default command, but use custom arguments (arg1 .. argN) for that command.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run nginx --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nginx -- </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">arg</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">arg</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">argN</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start the nginx container using a different command and custom arguments.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run nginx --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nginx --command -- </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">cmd</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">arg</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">argN</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Start the perl container to compute π to 2000 places and print it out.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run pi --image</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">perl --restart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">OnFailure -- perl -Mbignum</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">bpi -wle </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;print bpi(2000)&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="help"></a>Help<a class="hash-link" href="#help" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubeadm init -h</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Run this in order to set up the Kubernetes master.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Usage:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  kubeadm init [flags]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Flags:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --api-advertise-addresses value   The IP addresses to advertise, in case autodetection fails (default [])</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --api-external-dns-names value    The DNS names to advertise, in case you have configured them yourself (default [])</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --cloud-provider string           Enable cloud provider features (external load-balancers, storage, etc), e.g. &quot;gce&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --external-etcd-cafile string     etcd certificate authority certificate file. Note: The path must be in /etc/ssl/certs</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --external-etcd-certfile string   etcd client certificate file. Note: The path must be in /etc/ssl/certs</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --external-etcd-endpoints value   etcd endpoints to use, in case you have an external cluster (default [])</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --external-etcd-keyfile string    etcd client key file. Note: The path must be in /etc/ssl/certs</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --pod-network-cidr value          Specify range of IP addresses for the pod network; if set, the control plane will automatically allocate CIDRs for every node</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --service-cidr value              Use alterantive range of IP address for service VIPs, defaults to 100.64.0.0/12 (default 100.64.0.0/12)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --service-dns-domain string       Use alternative domain for services, e.g. &quot;myorg.internal&quot; (default &quot;cluster.local&quot;)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --token string                    Shared secret used to secure cluster bootstrap; if none is provided, one will be generated for you</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      --use-kubernetes-version string   Choose a specific Kubernetes version for the control plane (default &quot;v1.4.0&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/devops/kubernetes/README.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/notes/devops/docker/watchtower"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Watchtower</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/notes/devops/kubernetes/k8s-awesome"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">K8S Awesome »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#install" class="table-of-contents__link">Install</a><ul><li><a href="#kubeadm" class="table-of-contents__link">kubeadm</a></li></ul></li><li><a href="#最佳实践" class="table-of-contents__link">最佳实践</a><ul><li><a href="#docker-multinode" class="table-of-contents__link">docker-multinode</a></li><li><a href="#kube-up---ubuntu" class="table-of-contents__link">kube-up - Ubuntu</a></li></ul></li><li><a href="#tips-1" class="table-of-contents__link">Tips</a><ul><li><a href="#常用-label" class="table-of-contents__link">常用 Label</a></li></ul></li><li><a href="#kubectl" class="table-of-contents__link">kubectl</a><ul><li><a href="#run" class="table-of-contents__link">run</a></li><li><a href="#help" class="table-of-contents__link">Help</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright © 1992-2021 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2021-08-08 03:53</div></div></div></footer></div>
<script src="/assets/js/runtime~main.83b31e1b.js"></script>
<script src="/assets/js/main.ad3af725.js"></script>
</body>
</html>