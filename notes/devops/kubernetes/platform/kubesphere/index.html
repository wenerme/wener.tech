<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live & Life" href="/opensearch.xml"><title data-react-helmet="true">Kubesphere | Wener Live &amp; Life</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Kubesphere | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="Kubesphere"><meta data-react-helmet="true" property="og:description" content="Kubesphere"><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/devops/kubernetes/platform/kubesphere"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://wener.me/notes/devops/kubernetes/platform/kubesphere"><link rel="stylesheet" href="/styles.98d7e791.css">
<link rel="preload" href="/styles.e616f870.js" as="script">
<link rel="preload" href="/runtime~main.8936fe65.js" as="script">
<link rel="preload" href="/main.5c0ac1d7.js" as="script">
<link rel="preload" href="/1.2de20202.js" as="script">
<link rel="preload" href="/2.aa993b72.js" as="script">
<link rel="preload" href="/3.c391163c.js" as="script">
<link rel="preload" href="/1be78505.9405a310.js" as="script">
<link rel="preload" href="/602.342bff5d.js" as="script">
<link rel="preload" href="/935f2afb.f5b48876.js" as="script">
<link rel="preload" href="/17896441.f797a511.js" as="script">
<link rel="preload" href="/82d81901.988260f4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/wener-logo-head.svg" alt="Wener Logo"><strong class="navbar__title">Wener</strong></a><a class="navbar__item navbar__link" href="/notes/java/java">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">工具</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/wener-logo-head.svg" alt="Wener Logo"><strong class="navbar__title">Wener</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/java">笔记</a></li><li class="menu__list-item"><a class="menu__link" href="/story">故事</a></li><li class="menu__list-item"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/tool/network/ip-lookup">工具</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Kubesphere</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kubesphere"></a>Kubesphere<a aria-hidden="true" tabindex="-1" class="hash-link" href="#kubesphere" title="Direct link to heading">#</a></h1><ul><li>是什么<ul><li>国产青云 开源的 kubesphere 管理平台</li><li>vs Rancher<ul><li>UI 好看</li><li>更偏向应用开发</li><li>权限更细</li></ul></li></ul></li><li><a href="https://kubesphere.io" target="_blank" rel="noopener noreferrer">kubesphere.io</a><ul><li><a href="https://kubesphere.com.cn" target="_blank" rel="noopener noreferrer">kubesphere.com.cn</a> - 中文</li></ul></li><li>实现 mysql+redis+minio+openldap+redis+es</li><li>默认 NodePort 30880 - admin/P@88w0rd</li><li>全套安装下来至少 16G+ - 因此服务器至少需要 48G/64G</li><li>kubesphere-system<ul><li>安装 installer</li></ul></li><li>kubesphere-monitoring-system</li><li>kubesphere-controls-system</li><li><a href="https://github.com/kubesphere/ks-installer" target="_blank" rel="noopener noreferrer">kubesphere/ks-installer</a><ul><li>安装 Kubesphere 的 Operator</li><li>安装使用 Ansible</li></ul></li></ul><table><thead><tr><th>Integration</th><th>CPU</th><th>Memory</th><th>Impl</th><th>Desc</th></tr></thead><tbody><tr><td>alerting</td><td>0.3 Core</td><td>300 MiB</td><td></td><td></td></tr><tr><td>auditing</td><td></td><td></td><td>审计日志 - 依赖 ES</td><td>kubesphere-logging-system</td></tr><tr><td>devops</td><td>0.47 Core</td><td>8.6 G</td><td>CI/CD Jinkins</td><td>kubesphere-devops-system</td></tr><tr><td>events</td><td></td><td></td><td></td><td>kubesphere-logging-system</td></tr><tr><td>logging</td><td>57 m</td><td>2.76 G</td><td>Elasticsearch, fluentbit</td><td></td></tr><tr><td>metrics_server</td><td>56 m</td><td>44.35 MiB</td><td></td><td>HPA - Horizontal Pod Autoscaler</td></tr><tr><td>multicluster</td><td></td><td></td><td></td><td>多集群管理</td></tr><tr><td>networkpolicy</td><td></td><td></td><td></td><td>集群内网络隔离</td></tr><tr><td>notification</td><td></td><td></td><td></td><td>Email, WeChat Work, Slack</td></tr><tr><td>monitoring</td><td></td><td>Request 400Mi</td><td>Prometheus</td><td></td></tr><tr><td>openpitrix</td><td>2 Core</td><td>3.6 G</td><td>openpitrix</td><td>HELM/应用商店</td></tr><tr><td>servicemesh</td><td>0.3 Core</td><td>300 MiB</td><td>Istio</td><td></td></tr></tbody></table><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># crd installer.kubesphere.io/v1alpha1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># kubesphere-system</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ServiceAccount ks-installer</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ClusterRole ks-installer</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Deployment ks-installer</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#   https://hub.docker.com/layers/kubesphere/ks-installer</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubesphere/ks-installer/v3.0.0/deploy/kubesphere-installer.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装配置 - 可下载自行修改</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ClusterConfiguration installer.kubesphere.io/v1alpha1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 上次的 jwtSecret kubectl -n kubesphere-system get cm kubesphere-config -o yaml | grep -v &quot;apiVersion&quot; | grep jwtSecret</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubesphere/ks-installer/v3.0.0/deploy/cluster-configuration.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装过程</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl logs -n kubesphere-system </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">kubectl get pod -n kubesphere-system -l </span><span class="token variable assign-left variable" style="color:rgb(191, 199, 213)">app</span><span class="token variable operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">ks-install -o </span><span class="token variable assign-left variable" style="color:rgb(191, 199, 213)">jsonpath</span><span class="token variable operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;{.items[0].metadata.name}&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"> -f</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="配置"></a>配置<a aria-hidden="true" tabindex="-1" class="hash-link" href="#配置" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/kubesphere/kubekey/blob/master/docs/config-example.md" target="_blank" rel="noopener noreferrer">https://github.com/kubesphere/kubekey/blob/master/docs/config-example.md</a></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: installer.kubesphere.io/v1alpha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: ClusterConfiguration</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: ks-installer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: kubesphere-system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  labels:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    version: v3.0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  persistence:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    storageClass: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># If there is not a default StorageClass in your cluster, you need to specify an existing StorageClass here.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authentication:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    jwtSecret: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain">           </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Keep the jwtSecret consistent with the host cluster. Retrive the jwtSecret by executing &quot;kubectl -n kubesphere-system get cm kubesphere-config -o yaml | grep -v &quot;apiVersion&quot; | grep jwtSecret&quot; on the host cluster.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  etcd:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    monitoring: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Whether to enable etcd monitoring dashboard installation. You have to create a secret for etcd before you enable it.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    endpointIps: localhost  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># etcd cluster EndpointIps, it can be a bunch of IPs here.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    port: </span><span class="token number" style="color:rgb(247, 140, 108)">2379</span><span class="token plain">              </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># etcd port</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    tlsEnable: </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  common:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mysqlVolumeSize: 20Gi </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># MySQL PVC size.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minioVolumeSize: 20Gi </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Minio PVC size.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    etcdVolumeSize: 20Gi  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># etcd PVC size.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    openldapVolumeSize: 2Gi   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># openldap PVC size.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    redisVolumSize: 2Gi </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Redis PVC size.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    es:   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Storage backend for logging, events and auditing.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># elasticsearchMasterReplicas: 1   # total number of master nodes, it&#x27;s not allowed to use even number</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># elasticsearchDataReplicas: 1     # total number of data nodes.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      elasticsearchMasterVolumeSize: 4Gi   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Volume size of Elasticsearch master nodes.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      elasticsearchDataVolumeSize: 20Gi    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Volume size of Elasticsearch data nodes.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      logMaxAge: </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">                     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Log retention time in built-in Elasticsearch, it is 7 days by default.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      elkPrefix: logstash              </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The string making up index names. The index name will be formatted as ks-&lt;elk_prefix&gt;-log.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 外部 Elasticsearch - 生产建议使用外部</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      externalElasticsearchUrl: </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The URL of external Elasticsearch</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      externalElasticsearchPort: </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The port of external Elasticsearch</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  console:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enableMultiLogin: </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># enable/disable multiple sing on, it allows an account can be used by different users at the same time.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    port: </span><span class="token number" style="color:rgb(247, 140, 108)">30880</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  alerting:                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (CPU: 0.3 Core, Memory: 300 MiB) Whether to install KubeSphere alerting system. It enables Users to customize alerting policies to send messages to receivers in time with different time intervals and alerting levels to choose from.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  auditing:                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Whether to install KubeSphere audit log system. It provides a security-relevant chronological set of records，recording the sequence of activities happened in platform, initiated by different tenants.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  devops:                  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (CPU: 0.47 Core, Memory: 8.6 G) Whether to install KubeSphere DevOps System. It provides out-of-box CI/CD system based on Jenkins, and automated workflow tools including Source-to-Image &amp; Binary-to-Image.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    jenkinsMemoryLim: 2Gi      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Jenkins memory limit.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    jenkinsMemoryReq: 1500Mi   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Jenkins memory request.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    jenkinsVolumeSize: 8Gi     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Jenkins volume size.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    jenkinsJavaOpts_Xms: 512m  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The following three fields are JVM parameters.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    jenkinsJavaOpts_Xmx: 512m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    jenkinsJavaOpts_MaxRAM: 2g</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  events:                  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Whether to install KubeSphere events system. It provides a graphical web console for Kubernetes Events exporting, filtering and alerting in multi-tenant Kubernetes clusters.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ruler:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      replicas: </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  logging:                 </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (CPU: 57 m, Memory: 2.76 G) Whether to install KubeSphere logging system. Flexible logging functions are provided for log query, collection and management in a unified console. Additional log collectors can be added, such as Elasticsearch, Kafka and Fluentd.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    logsidecarReplicas: </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  metrics_server:                    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (CPU: 56 m, Memory: 44.35 MiB) Whether to install metrics-server. IT enables HPA (Horizontal Pod Autoscaler).</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  monitoring:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># prometheusReplicas: 1            # Prometheus replicas are responsible for monitoring different segments of data source and provide high availability as well.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    prometheusMemoryRequest: 400Mi   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Prometheus request memory.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    prometheusVolumeSize: 20Gi       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Prometheus PVC size.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># alertmanagerReplicas: 1          # AlertManager Replicas.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  multicluster:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    clusterRole: none  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># host | member | none  # You can install a solo cluster, or specify it as the role of host or member cluster.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  networkpolicy:       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Network policies allow network isolation within the same cluster, which means firewalls can be set up between certain instances (Pods).</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Make sure that the CNI network plugin used by the cluster supports NetworkPolicy. There are a number of CNI network plugins that support NetworkPolicy, including Calico, Cilium, Kube-router, Romana and Weave Net.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  notification:        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Email Notification support for the legacy alerting system, should be enabled/disabled together with the above alerting option.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  openpitrix:          </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (2 Core, 3.6 G) Whether to install KubeSphere Application Store. It provides an application store for Helm-based applications, and offer application lifecycle management.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  servicemesh:         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># (0.3 Core, 300 MiB) Whether to install KubeSphere Service Mesh (Istio-based). It provides fine-grained traffic management, observability and tracing, and offer visualization for traffic topology.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="卸载"></a>卸载<a aria-hidden="true" tabindex="-1" class="hash-link" href="#卸载" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/kubesphere/ks-installer/blob/master/scripts/kubesphere-delete.sh" target="_blank" rel="noopener noreferrer">scripts/kubesphere-delete.sh</a></li><li>会用到 helm</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -LO https://raw.githubusercontent.com/kubesphere/ks-installer/master/scripts/kubesphere-delete.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x kubesphere-delete.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># alpine 3.12 安装 helm</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> helm -X https://mirrors.aliyun.com/alpine/edge/testing/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># K3S</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">KUBECONFIG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/etc/rancher/k3s/k3s.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./kubesphere-delete.sh</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/devops/kubernetes/platform/kubesphere.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#配置" class="table-of-contents__link">配置</a></li><li><a href="#卸载" class="table-of-contents__link">卸载</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">笔记</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Projects</h4><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Wener Site" src="/img/wener-logo.svg"></div><div>Copyright © 1992-2020 Wener - 构建时间 2020-11-12 19:14</div></div></div></footer></div>
<script src="/styles.e616f870.js"></script>
<script src="/runtime~main.8936fe65.js"></script>
<script src="/main.5c0ac1d7.js"></script>
<script src="/1.2de20202.js"></script>
<script src="/2.aa993b72.js"></script>
<script src="/3.c391163c.js"></script>
<script src="/1be78505.9405a310.js"></script>
<script src="/602.342bff5d.js"></script>
<script src="/935f2afb.f5b48876.js"></script>
<script src="/17896441.f797a511.js"></script>
<script src="/82d81901.988260f4.js"></script>
</body>
</html>