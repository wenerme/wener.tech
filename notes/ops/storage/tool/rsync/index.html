<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live & Life" href="/opensearch.xml"><title data-react-helmet="true">Rsync | Wener Live &amp; Life</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Rsync | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="rsync"><meta data-react-helmet="true" property="og:description" content="rsync"><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/ops/storage/tool/rsync"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://wener.me/notes/ops/storage/tool/rsync"><link rel="stylesheet" href="/styles.98d7e791.css">
<link rel="preload" href="/styles.73e82c65.js" as="script">
<link rel="preload" href="/runtime~main.c82c161f.js" as="script">
<link rel="preload" href="/main.062517da.js" as="script">
<link rel="preload" href="/1.29ffb65c.js" as="script">
<link rel="preload" href="/2.2e638c55.js" as="script">
<link rel="preload" href="/3.2b6bf9e9.js" as="script">
<link rel="preload" href="/1be78505.9cfd56fa.js" as="script">
<link rel="preload" href="/629.3d00fb88.js" as="script">
<link rel="preload" href="/935f2afb.75d6fdf6.js" as="script">
<link rel="preload" href="/17896441.4dd2a7a8.js" as="script">
<link rel="preload" href="/b1489e47.57ca95e7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/wener-logo-head.svg" alt="Wener Logo"><strong class="navbar__title">Wener</strong></a><a class="navbar__item navbar__link" href="/notes/java/java">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">工具</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/wener-logo-head.svg" alt="Wener Logo"><strong class="navbar__title">Wener</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/java">笔记</a></li><li class="menu__list-item"><a class="menu__link" href="/story">故事</a></li><li class="menu__list-item"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/tool/network/ip-lookup">工具</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Rsync</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="rsync"></a>rsync<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rsync" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tips"></a>Tips<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tips" title="Direct link to heading">#</a></h2><ul><li><a href="https://www.cheatography.com/richardjh/cheat-sheets/rsync/" target="_blank" rel="noopener noreferrer">https://www.cheatography.com/richardjh/cheat-sheets/rsync/</a></li><li><a href="https://wiki.archlinux.org/index.php/rsync" target="_blank" rel="noopener noreferrer">https://wiki.archlinux.org/index.php/rsync</a></li><li>unison<ul><li><a href="https://www.cis.upenn.edu/~bcpierce/unison/" target="_blank" rel="noopener noreferrer">https://www.cis.upenn.edu/~bcpierce/unison/</a></li></ul></li><li><code>--info=progress2</code> 显示速度</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 使用 SSH 同步</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -avz -e </span><span class="token function" style="color:rgb(130, 170, 255)">ssh</span><span class="token plain"> remoteuser@remotehost:/remote/dir /this/dir/ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 远程使用 sudo</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> --rsync-path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;sudo rsync&quot;</span><span class="token plain"> -avz dnsmasq/ admin@10.1.1.1:/etc/dnsmasq/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 备份整个系统</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -aAXv --exclude</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/dev/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/proc/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/sys/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/tmp/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/run/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/mnt/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/media/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/lost+found&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> / /path/to/backup/folder</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 使用 --info=progress2 显示总体的进度, 而不是每个文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -aAX --info</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">progress2 --exclude</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/dev/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/proc/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/sys/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/tmp/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/run/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/mnt/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/media/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/lost+found&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> / /path/to/backup/folder</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 不同步权限用户分组信息</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -avz --no-perms --no-owner --no-group mnt/wener abuild/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 配合 fswatch 使用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拷贝</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fswatch ./ </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">xargs</span><span class="token plain"> -I</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> ~/Dropbox/backup/latest/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># rsync</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">run_rsync</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rsync -azP --exclude &quot;.*/&quot; --exclude &quot;.*&quot; --exclude &quot;tmp/&quot; ~/Documents/repos/my_repository username@host:~&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">run_rsync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> fswatch -o </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">read</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"> run_rsync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">done</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="concurrent"></a>Concurrent<a aria-hidden="true" tabindex="-1" class="hash-link" href="#concurrent" title="Direct link to heading">#</a></h2><p><a href="https://wiki.ncsa.illinois.edu/display/~wglick/2013/11/01/Parallel+Rsync" target="_blank" rel="noopener noreferrer">https://wiki.ncsa.illinois.edu/display/~wglick/2013/11/01/Parallel+Rsync</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="--help"></a>--help<a aria-hidden="true" tabindex="-1" class="hash-link" href="#--help" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ rsync --help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rsync  version 3.1.1  protocol version 31</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copyright (C) 1996-2014 by Andrew Tridgell, Wayne Davison, and others.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Web site: http://rsync.samba.org/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Capabilities:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    64-bit files, 64-bit inums, 64-bit timestamps, 64-bit long ints,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    socketpairs, hardlinks, symlinks, IPv6, batchfiles, inplace,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    append, ACLs, xattrs, iconv, symtimes, no prealloc, file-flags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rsync comes with ABSOLUTELY NO WARRANTY.  This is free software, and you</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">are welcome to redistribute it under certain conditions.  See the GNU</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">General Public Licence for details.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rsync is a file transfer program capable of efficient remote update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">via a fast differencing algorithm.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Usage: rsync [OPTION]... SRC [SRC]... DEST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  or   rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  or   rsync [OPTION]... [USER@]HOST:SRC [DEST]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  or   rsync [OPTION]... [USER@]HOST::SRC [DEST]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  or   rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The &#x27;:&#x27; usages connect via remote shell, while &#x27;::&#x27; &amp; &#x27;rsync://&#x27; usages connect</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">to an rsync daemon, and require SRC or DEST to start with a module name.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -v, --verbose               increase verbosity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --info=FLAGS            fine-grained informational verbosity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --debug=FLAGS           fine-grained debug verbosity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --msgs2stderr           special output handling for debugging</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -q, --quiet                 suppress non-error messages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --no-motd               suppress daemon-mode MOTD (see manpage caveat)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -c, --checksum              skip based on checksum, not mod-time &amp; size</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -a, --archive               archive mode; equals -rlptgoD (no -H,-A,-X)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --no-OPTION             turn off an implied OPTION (e.g. --no-D)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -r, --recursive             recurse into directories</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -R, --relative              use relative path names</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --no-implied-dirs       don&#x27;t send implied dirs with --relative</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -b, --backup                make backups (see --suffix &amp; --backup-dir)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --backup-dir=DIR        make backups into hierarchy based in DIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --suffix=SUFFIX         set backup suffix (default ~ w/o --backup-dir)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -u, --update                skip files that are newer on the receiver</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --inplace               update destination files in-place (SEE MAN PAGE)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --append                append data onto shorter files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --append-verify         like --append, but with old data in file checksum</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -d, --dirs                  transfer directories without recursing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -l, --links                 copy symlinks as symlinks</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -L, --copy-links            transform symlink into referent file/dir</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --copy-unsafe-links     only &quot;unsafe&quot; symlinks are transformed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --safe-links            ignore symlinks that point outside the source tree</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --munge-links           munge symlinks to make them safer (but unusable)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -k, --copy-dirlinks         transform symlink to a dir into referent dir</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -K, --keep-dirlinks         treat symlinked dir on receiver as dir</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -H, --hard-links            preserve hard links</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -p, --perms                 preserve permissions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --fileflags             preserve file-flags (aka chflags)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -E, --executability         preserve the file&#x27;s executability</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --chmod=CHMOD           affect file and/or directory permissions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -A, --acls                  preserve ACLs (implies --perms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -X, --xattrs                preserve extended attributes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --hfs-compression       preserve HFS compression if supported</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --protect-decmpfs       preserve HFS compression as xattrs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -o, --owner                 preserve owner (super-user only)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -g, --group                 preserve group</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --devices               preserve device files (super-user only)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --specials              preserve special files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -D                          same as --devices --specials</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -t, --times                 preserve modification times</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -N, --crtimes               preserve create times (newness)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -O, --omit-dir-times        omit directories from --times</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -J, --omit-link-times       omit symlinks from --times</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --super                 receiver attempts super-user activities</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --fake-super            store/recover privileged attrs using xattrs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -S, --sparse                handle sparse files efficiently</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --preallocate           pre-allocate dest files on remote receiver</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -n, --dry-run               perform a trial run with no changes made</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -W, --whole-file            copy files whole (without delta-xfer algorithm)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -x, --one-file-system       don&#x27;t cross filesystem boundaries</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -B, --block-size=SIZE       force a fixed checksum block-size</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -e, --rsh=COMMAND           specify the remote shell to use</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --rsync-path=PROGRAM    specify the rsync to run on the remote machine</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --existing              skip creating new files on receiver</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --ignore-existing       skip updating files that already exist on receiver</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --remove-source-files   sender removes synchronized files (non-dirs)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --del                   an alias for --delete-during</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delete                delete extraneous files from destination dirs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delete-before         receiver deletes before transfer, not during</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delete-during         receiver deletes during the transfer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delete-delay          find deletions during, delete after</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delete-after          receiver deletes after transfer, not during</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delete-excluded       also delete excluded files from destination dirs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --ignore-missing-args   ignore missing source args without error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delete-missing-args   delete missing source args from destination</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --ignore-errors         delete even if there are I/O errors</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --force-delete          force deletion of directories even if not empty</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --force-change          affect user-/system-immutable files/dirs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --force-uchange         affect user-immutable files/dirs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --force-schange         affect system-immutable files/dirs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --max-delete=NUM        don&#x27;t delete more than NUM files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --max-size=SIZE         don&#x27;t transfer any file larger than SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --min-size=SIZE         don&#x27;t transfer any file smaller than SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --partial               keep partially transferred files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --partial-dir=DIR       put a partially transferred file into DIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --delay-updates         put all updated files into place at transfer&#x27;s end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -m, --prune-empty-dirs      prune empty directory chains from the file-list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --numeric-ids           don&#x27;t map uid/gid values by user/group name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --usermap=STRING        custom username mapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --groupmap=STRING       custom groupname mapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --chown=USER:GROUP      simple username/groupname mapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --timeout=SECONDS       set I/O timeout in seconds</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --contimeout=SECONDS    set daemon connection timeout in seconds</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -I, --ignore-times          don&#x27;t skip files that match in size and mod-time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -M, --remote-option=OPTION  send OPTION to the remote side only</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --size-only             skip files that match in size</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --modify-window=NUM     compare mod-times with reduced accuracy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -T, --temp-dir=DIR          create temporary files in directory DIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -y, --fuzzy                 find similar file for basis if no dest file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --compare-dest=DIR      also compare destination files relative to DIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --copy-dest=DIR         ... and include copies of unchanged files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --link-dest=DIR         hardlink to files in DIR when unchanged</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -z, --compress              compress file data during the transfer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --compress-level=NUM    explicitly set compression level</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --skip-compress=LIST    skip compressing files with a suffix in LIST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -C, --cvs-exclude           auto-ignore files the same way CVS does</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -f, --filter=RULE           add a file-filtering RULE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -F                          same as --filter=&#x27;dir-merge /.rsync-filter&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                             repeated: --filter=&#x27;- .rsync-filter&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --exclude=PATTERN       exclude files matching PATTERN</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --exclude-from=FILE     read exclude patterns from FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --include=PATTERN       don&#x27;t exclude files matching PATTERN</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --include-from=FILE     read include patterns from FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --files-from=FILE       read list of source-file names from FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -0, --from0                 all *-from/filter files are delimited by 0s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -s, --protect-args          no space-splitting; only wildcard special-chars</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --address=ADDRESS       bind address for outgoing socket to daemon</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --port=PORT             specify double-colon alternate port number</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --sockopts=OPTIONS      specify custom TCP options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --blocking-io           use blocking I/O for the remote shell</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --stats                 give some file-transfer stats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -8, --8-bit-output          leave high-bit chars unescaped in output</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -h, --human-readable        output numbers in a human-readable format</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --progress              show progress during transfer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -P                          same as --partial --progress</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -i, --itemize-changes       output a change-summary for all updates</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --out-format=FORMAT     output updates using the specified FORMAT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --log-file=FILE         log what we&#x27;re doing to the specified FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --log-file-format=FMT   log updates using the specified FMT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --password-file=FILE    read daemon-access password from FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --list-only             list the files instead of copying them</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --bwlimit=RATE          limit socket I/O bandwidth</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --outbuf=N|L|B          set output buffering to None, Line, or Block</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --write-batch=FILE      write a batched update to FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --only-write-batch=FILE like --write-batch but w/o updating destination</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --read-batch=FILE       read a batched update from FILE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --protocol=NUM          force an older protocol version to be used</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --iconv=CONVERT_SPEC    request charset conversion of filenames</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --checksum-seed=NUM     set block/file checksum seed (advanced)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -4, --ipv4                  prefer IPv4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -6, --ipv6                  prefer IPv6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     --version               print version number</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-h) --help                  show this help (-h is --help only if used alone)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Use &quot;rsync --daemon --help&quot; to see the daemon-mode command-line options.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Please see the rsync(1) and rsyncd.conf(5) man pages for full documentation.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">See http://rsync.samba.org/ for updates, bug reports, and answers</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/ops/storage/tool/rsync.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tips" class="table-of-contents__link">Tips</a></li><li><a href="#concurrent" class="table-of-contents__link">Concurrent</a></li><li><a href="#--help" class="table-of-contents__link">--help</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">笔记</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip">VoIP</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Projects</h4><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Wener Site" src="/img/wener-logo.svg"></div><div>Copyright © 1992-2020 Wener - 构建时间 2020-12-09 21:47</div></div></div></footer></div>
<script src="/styles.73e82c65.js"></script>
<script src="/runtime~main.c82c161f.js"></script>
<script src="/main.062517da.js"></script>
<script src="/1.29ffb65c.js"></script>
<script src="/2.2e638c55.js"></script>
<script src="/3.2b6bf9e9.js"></script>
<script src="/1be78505.9cfd56fa.js"></script>
<script src="/629.3d00fb88.js"></script>
<script src="/935f2afb.75d6fdf6.js"></script>
<script src="/17896441.4dd2a7a8.js"></script>
<script src="/b1489e47.57ca95e7.js"></script>
</body>
</html>