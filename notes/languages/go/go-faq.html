<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"><title data-react-helmet="true">Go FAQ | Wener Live &amp; Life</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/languages/go/go-faq"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Go FAQ | Wener Live &amp; Life"><meta data-react-helmet="true" name="description" content="- golang/go#9200"><meta data-react-helmet="true" property="og:description" content="- golang/go#9200"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wener.me/notes/languages/go/go-faq"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/languages/go/go-faq" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wener.me/notes/languages/go/go-faq" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7900c842.css">
<link rel="preload" href="/assets/js/runtime~main.dc34be00.js" as="script">
<link rel="preload" href="/assets/js/main.c206799f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Wener</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/evolve">自我成长</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/java/java-awesome">Java</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/web/web-awesome">Web</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/notes/languages">语言</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages">语言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/languages-awesome">Languages Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/languages-faq">Languages FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/notes/languages/go/go-awesome">Golang</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-awesome">Go Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-build">Go Build</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-cgo">CGO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-concurrent">Concurrent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/languages/go/go-faq">Go FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-generic">泛型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-gui-awesome">Go GUI Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-lint">Golang Linter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-microservice">Golang 微服务</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-module">Golang 模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-pkg-net-rpc">Go net/rpc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-spec">Golang Spec</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-template">Go 模板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-test">Golang Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-tools">Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-version">Go Version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-wasm">Go WASM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-windows">Golang Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go-xml">Go XML</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/notes/languages/go/lib/chi">Library</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go/go2">Go2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/go">Golang</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/notes/languages/c/c-awesome">C</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/notes/languages/php">PHP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/notes/languages/diagram">Diagram</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/notes/languages/lua">Lua</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/notes/languages/v">V</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/antlr4">Antlr 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/grammar/glossary">Grammar Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/grammar/grammar-faq">Grammar FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/grammar">语法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/llvm">LLVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/lml">Lightweight markup language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/lml/markdown">Markdown</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/lml/markdown-awesome">Markdown Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/objc">Object C</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/parsing">语法解析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/peg">PEG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/pegjs">PEG.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/ruby">Ruby</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/rust">Rust</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/rust/rust-awesome">Rust Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/tex/tex-awesome">TeX Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/xml/xpath">xpath</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/languages/zig">Zig</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/os/alpine/alpine-awesome">AlpineLinux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/devops/docker/docker-cookbook">Docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/devops/kubernetes">Kubernetes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/os/linux/linux-awesome">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/os/virt">虚拟化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/os/os-awesome">操作系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/voip">VoIP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/dev/dev-awesome">开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/devops/devops-faq">DevOps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/db">数据库</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/queue">消息队列</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/security/security-awesome">安全</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/service/service-awesome">服务</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/ops/ops-awesome">运维</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/howto/ops/alpine-admin-ansible">指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/hardware/hardware-awesome">硬件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/algorithm/algorithm-awesome">算法</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/healthcare/disease">健康</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/reference/software/glossary">参考</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/notes/tool">工具</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Go FAQ</h1></header><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><ul><li><a href="https://github.com/golang/go/issues/9200" target="_blank" rel="noopener noreferrer">golang/go#9200</a><ul><li>html/template JS 不能包含 `<!-- -->`<!-- -->`</li></ul></li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="安装指定版本-golang-环境">安装指定版本 Golang 环境<a class="hash-link" href="#安装指定版本-golang-环境" title="Direct link to heading">​</a></h2><ul><li>下载位置<ul><li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>d</mi><mi>k</mi><mi mathvariant="normal">/</mi><mi>g</mi><mi>o</mi></mrow><annotation encoding="application/x-tex">HOME/sdk/go</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.08125em">H</span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mord mathnormal" style="margin-right:0.05764em">E</span><span class="mord">/</span><span class="mord mathnormal">s</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord mathnormal">o</span></span></span></span></span>VERSION/go$VERSION.darwin-amd64.tar.gz</li></ul></li><li>安装逻辑 <!-- -->[golang.org/dl/internal/version/version.go]<!-- -->（<a href="https://cs.opensource.google/go/dl/+/1eec6072:internal/version/version.go" target="_blank" rel="noopener noreferrer">https://cs.opensource.google/go/dl/+/1eec6072:internal/version/version.go</a></li><li>安装完成不会删除压缩包，可自己删除</li><li>tip 最新 latest<ul><li>下载源码进行编译</li></ul></li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 下载 tip 版本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> golang.org/dl/gotip@latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gotip download</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 下载最新版本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 从 dl.google.com 下载</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 默认安装到 ~/sdk/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> golang.org/dl/go1.18beta1@latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go1.18beta1 download</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go1.18beta1 </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><span class="token plain"> GOROOT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">～/sdk/go1.18beta1/bin/go </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装到别的地方</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:rgb(130, 170, 255)">HOME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt ~/go/bin/go1.18beta1 download</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/opt/sdk/go1.18beta1/bin/go </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="go-cannot-find-goroot-directory-usrlocalgo">go: cannot find GOROOT directory: /usr/local/go<a class="hash-link" href="#go-cannot-find-goroot-directory-usrlocalgo" title="Direct link to heading">​</a></h2><ul><li>从源码构建默认 GOROOT_FINAL=/usr/local/go</li><li>AlpineLinux 默认为 /usr/lib/go<ul><li>自行构建可修改 - <a href="https://gitlab.alpinelinux.org/alpine/aports/-/blob/master/community/go/APKBUILD#L135" target="_blank" rel="noopener noreferrer">alpinelinix/go/APKBUILD</a></li></ul></li><li>bazel 安装的 Go 也有这个问题</li></ul><hr><ol><li>创建目录 - 推荐方式</li></ol><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -s /opt/sdk/go1.18beta1 /usr/local/go</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>修改 GOROOT 配置</li></ol><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GOROOT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/sdk/go1.18beta1 /opt/sdk/go1.18beta1/bin/go </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 写入后便不会报错</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GOROOT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/sdk/go1.18beta1 /opt/sdk/go1.18beta1/bin/go </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><span class="token plain"> -w </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GOROOT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/opt/sdk/go1.18beta1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/opt/sdk/go1.18beta1/bin/go </span><span class="token function" style="color:rgb(130, 170, 255)">env</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="golangorgx">golang.org/x<a class="hash-link" href="#golangorgx" title="Direct link to heading">​</a></h2><ul><li>x/net<ul><li><a href="https://github.com/golang/net" target="_blank" rel="noopener noreferrer">https://github.com/golang/net</a></li><li><a href="https://cs.opensource.google/go/x/net" target="_blank" rel="noopener noreferrer">https://cs.opensource.google/go/x/net</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="查找用到了-cgo-的模块">查找用到了 cgo 的模块<a class="hash-link" href="#查找用到了-cgo-的模块" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">go list -f </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{{if .CgoFiles}}{{.ImportPath}}{{end}}&quot;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">go list -f </span><span class="token variable string" style="color:rgb(195, 232, 141)">&quot;{{.ImportPath}}{{range .Deps}} {{.}}{{end}}&quot;</span><span class="token variable" style="color:rgb(191, 199, 213)"> ./</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token variable" style="color:rgb(191, 199, 213)">. </span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="json-string-to-int">JSON string to int<a class="hash-link" href="#json-string-to-int" title="Direct link to heading">​</a></h2><ul><li>json.Number - encode 保留 number</li><li><code>json:&quot;,string&quot;</code> - encode 会转 string</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="sql-null">sql null<a class="hash-link" href="#sql-null" title="Direct link to heading">​</a></h2><ul><li>直接使用指针<ul><li>简单、无外部依赖</li><li>json、mapstructure 能正确处理</li><li>代码逻辑复杂一点</li><li>可能导致未预期的修改</li></ul></li><li>sql.NullType<ul><li>代码逻辑清晰，不会导致指针修改</li><li>json、mapstructure 无法正确处理</li><li>mapstructure 需要自定义 Hook</li></ul></li><li>null.Type - <a href="https://github.com/guregu/null" target="_blank" rel="noopener noreferrer">guregu/null</a><ul><li>引入外部库</li><li>提供便捷方法</li><li>支持 json</li><li>mapstructure 无法正确处理</li><li>mapstructure 需要自定义 Hook</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="struct-是否使用指针">Struct 是否使用指针<a class="hash-link" href="#struct-是否使用指针" title="Direct link to heading">​</a></h2><ul><li>尽量不使用指针 - 直接使用 Struct 会更快<ul><li>使用指针会用到全局堆，使用 struct 副本可直接放到栈</li><li>用到堆就会涉及到 GC</li></ul></li><li>使用 Pointer<ul><li>调用密度高</li><li>不需要副本场景</li></ul></li><li>使用 Struct<ul><li>数据密度高但不需要经常调用</li><li>确保数据不发生变化</li></ul></li><li>如果 Struct 包含了不可复制对象，则一定要用指针 - 例如 sycn.Mutex</li><li>参考<ul><li><a href="https://medium.com/a-journey-with-go/44b43b104963" target="_blank" rel="noopener noreferrer">Go: Should I Use a Pointer instead of a Copy of my Struct?</a></li></ul></li></ul><div class="codeBlockContainer_J+bg language-golang theme-code-block"><div class="codeBlockContent_csEI golang"><pre tabindex="0" class="prism-code language-golang codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">type Server struct {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 内部配置对象可使用 Struct</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  conf ServerConf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// 因为会对 conf 进行默认值补齐 - 因此传入指针</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">func NewServer(conf *ServerConf)*Server{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 修改</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if conf.Bind == &quot;&quot; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    conf.Bind = &quot;0.0.0.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // 复制一个 conf 避免外部更改</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // Server 使用指针，因为不需要副本</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return &amp;Server{ Conf = *conf }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="texttemplate-vs-htmltemplate">text/template vs html/template<a class="hash-link" href="#texttemplate-vs-htmltemplate" title="Direct link to heading">​</a></h2><ul><li>html/template<ul><li>输出内容被转义，避免代码注入</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="不会使用-etchosts-就行解析">不会使用 /etc/hosts 就行解析<a class="hash-link" href="#不会使用-etchosts-就行解析" title="Direct link to heading">​</a></h2><ul><li>添加 <code>/etc/nsswitch.conf</code> 可以解决<ul><li><code>echo &quot;hosts: files dns&quot; &gt; /etc/nsswitch.conf</code><ul><li><a href="https://github.com/gliderlabs/docker-alpine/issues/367#issuecomment-424546457" target="_blank" rel="noopener noreferrer">1</a></li></ul></li></ul></li><li><a href="https://github.com/golang/go/issues/35305" target="_blank" rel="noopener noreferrer">#35305</a> - net: prefer /etc/hosts over DNS when no /etc/nsswitch.conf is present</li><li><a href="https://github.com/golang/go/issues/22846" target="_blank" rel="noopener noreferrer">#22846</a> - net: Go DNS resolver does not read /etc/hosts</li></ul><p><strong>/etc/nsswitch.conf</strong></p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># /etc/nsswitch.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># As described on the web page https://man7.org/linux/man-pages/man3/gethostbyname.3.html,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># without the nsswitch.conf file, the gethostbyname() and gethostbyaddr() domain queries</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># will fail to a local name server, thus the /etc/hosts will take no effect.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># For example, when hostaliases are specified for a kubernetes pod, without proper settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># defined in this file, the hostaliases settings will not take effect.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Following contents of this file is from the ubuntu:16.04 docker image.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">passwd:         compat</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">group:          compat</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">shadow:         compat</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gshadow:        files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hosts:          files dns</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">networks:       files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">protocols:      db files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">services:       db files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ethers:         db files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rpc:            db files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">netgroup:       nis</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="windows-安装">Windows 安装<a class="hash-link" href="#windows-安装" title="Direct link to heading">​</a></h2><ul><li><a href="https://golang.org/dl/" target="_blank" rel="noopener noreferrer">https://golang.org/dl/</a> - 下载 MSI 或 Zip<ul><li>MSI 默认安装在 <code>C:\GO</code></li></ul></li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># msys 下</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GOPATH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/go</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:rgb(130, 170, 255)">PATH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string environment constant" style="color:rgb(130, 170, 255)">$PATH</span><span class="token string" style="color:rgb(195, 232, 141)">:/c/GO/bin:</span><span class="token string environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token string" style="color:rgb(195, 232, 141)">/go/bin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GO111MODULE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">on</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GOPROXY</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">https://goproxy.io</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="reflectvalueinterface-cannot-return-value-obtained-from-unexported-field-or-method">reflect.Value.Interface: cannot return value obtained from unexported field or method<a class="hash-link" href="#reflectvalueinterface-cannot-return-value-obtained-from-unexported-field-or-method" title="Direct link to heading">​</a></h2><p>relfect 不允许访问未导出字段</p><ul><li>Hack access <a href="https://stackoverflow.com/a/43918797/1870054" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/43918797/1870054</a></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="bufioreader-vs-bufioscanner">bufio.Reader vs bufio.Scanner<a class="hash-link" href="#bufioreader-vs-bufioscanner" title="Direct link to heading">​</a></h2><ul><li>bufio.Scanner<ul><li>一次读一行 - 不包含分隔符 <code>\r\n</code></li><li>默认 64k 行限制</li><li>接口使用友好，Scan 和 错误 独立</li><li><code>io.EOF</code> 时 Err 为 nil</li></ul></li><li>bufio.Reader</li><li>内部 4k 缓冲</li><li>ReadLine 不返回换行，类似 Scanner，但返回 <code>[]byte</code> - <strong>不推荐</strong> 使用</li><li>ReadString - 读取直到指定分隔符，返回分隔符 - 类似 Scanner</li><li>实现 <code>io.Reader</code> - 很多时候这个是选择的 <em>决定因素</em></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pq-vs-pgx">pq vs pgx<a class="hash-link" href="#pq-vs-pgx" title="Direct link to heading">​</a></h2><blockquote><p>pq 作者推荐推荐使用 pgx</p></blockquote><ul><li><a href="https://github.com/lib/pq" target="_blank" rel="noopener noreferrer">pq</a><ul><li>项目处于维护模式</li></ul></li><li><a href="https://github.com/jackc/pgx" target="_blank" rel="noopener noreferrer">pgx</a><ul><li>支持所有 native 类型</li><li>支持逻辑复制协议</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gc-vs-gccgo">gc vs gccgo<a class="hash-link" href="#gc-vs-gccgo" title="Direct link to heading">​</a></h2><ul><li>gc - 默认 Golang 实现<ul><li>半年升级一次 - 跟随 spec 版本</li><li>1.5 后不再依赖 C 编译器</li><li>跨平台编译 - 不依赖 CGO 时</li><li>静态编译 - 体积大 - HelloWorld 2M+</li></ul></li><li>gccgo - 基于 GCC 实现<ul><li>随 GCC 升级 - 版本一般落后，升级慢</li><li>依赖 OS 提供 GCC 包 - 一般落后主 GCC 版本</li><li>编译更快，但支持更多优化 - 重 CPU 场景性能更好</li><li>默认支持 CGO</li><li>支持更多平台 - 所有 GCC 支持的平台</li><li>交叉编译非常难</li><li>动态链接 - 体积非常小 - HelloWorld 250K vs 2MB<ul><li>libgo, libm, libgcc, libz, libpthread, ld.so, linux-vdso.so - virtual shared object</li></ul></li></ul></li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># go 可直接使用 gccgo 编译</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go build -compiler gccgo myprog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># gccgo flags</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go build -gccgoflags </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;-s -w&quot;</span><span class="token plain"> main.go</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="cipher-cbc--ecb--cfb--gcm">Cipher CBC / ECB / CFB / GCM<a class="hash-link" href="#cipher-cbc--ecb--cfb--gcm" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_y2LR" id="memstatsgc_sys-undefined-type-mstats-has-no-field-or-method-gc_sys">memstats.gc_sys undefined (type mstats has no field or method gc_sys)<a class="hash-link" href="#memstatsgc_sys-undefined-type-mstats-has-no-field-or-method-gc_sys" title="Direct link to heading">​</a></h2><p>升级后出现，尝试卸载重装。</p><p>尝试删除目录 /usr/lib/go/ 后重装。</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gosum-h1">go.sum h1<a class="hash-link" href="#gosum-h1" title="Direct link to heading">​</a></h2><ul><li>h1: hash-v1<ul><li>sha256+base64</li><li><a href="https://github.com/vikyd/go-checksum" target="_blank" rel="noopener noreferrer">https://github.com/vikyd/go-checksum</a></li></ul></li></ul><div class="codeBlockContainer_J+bg language-go.sum theme-code-block"><div class="codeBlockContent_csEI go.sum"><pre tabindex="0" class="prism-code language-go.sum codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;module&gt; &lt;version&gt; &lt;hash&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;module&gt; &lt;version&gt;/go.mod &lt;hash&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="godebug">GODEBUG<a class="hash-link" href="#godebug" title="Direct link to heading">​</a></h2><ul><li>GODEBUG=netdns=go</li><li>GODEBUG=netdns=cgo</li><li>GODEBUG=netdns=go+2</li><li>GODEBUG=netdns=cgo+2</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="常见大写字段名字">常见大写字段名字<a class="hash-link" href="#常见大写字段名字" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ACL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">API</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ASCII</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CPU</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CSS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DNS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GUID</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HTML</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HTTPS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ID</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">JSON</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LHS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">QPS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RAM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RHS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RPC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SLA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SMTP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SQL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SSH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TCP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TLS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TTL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UDP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UID</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">URI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">URL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UTF8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UUID</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">VM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">XML</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">XMPP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">XSRF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">XSS</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li><a href="https://github.com/golang/lint/blob/6edffad5e6160f5949cdefc81710b2706fbcd4f6/lint.go#L770-L809" target="_blank" rel="noopener noreferrer">commonInitialisms</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/notes/tags/faq">FAQ</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/languages/go/go-faq.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/notes/languages/go/go-concurrent"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Concurrent</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/notes/languages/go/go-generic"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">泛型</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#安装指定版本-golang-环境" class="table-of-contents__link toc-highlight">安装指定版本 Golang 环境</a></li><li><a href="#go-cannot-find-goroot-directory-usrlocalgo" class="table-of-contents__link toc-highlight">go: cannot find GOROOT directory: /usr/local/go</a></li><li><a href="#golangorgx" class="table-of-contents__link toc-highlight">golang.org/x</a></li><li><a href="#查找用到了-cgo-的模块" class="table-of-contents__link toc-highlight">查找用到了 cgo 的模块</a></li><li><a href="#json-string-to-int" class="table-of-contents__link toc-highlight">JSON string to int</a></li><li><a href="#sql-null" class="table-of-contents__link toc-highlight">sql null</a></li><li><a href="#struct-是否使用指针" class="table-of-contents__link toc-highlight">Struct 是否使用指针</a></li><li><a href="#texttemplate-vs-htmltemplate" class="table-of-contents__link toc-highlight">text/template vs html/template</a></li><li><a href="#不会使用-etchosts-就行解析" class="table-of-contents__link toc-highlight">不会使用 /etc/hosts 就行解析</a></li><li><a href="#windows-安装" class="table-of-contents__link toc-highlight">Windows 安装</a></li><li><a href="#reflectvalueinterface-cannot-return-value-obtained-from-unexported-field-or-method" class="table-of-contents__link toc-highlight">reflect.Value.Interface: cannot return value obtained from unexported field or method</a></li><li><a href="#bufioreader-vs-bufioscanner" class="table-of-contents__link toc-highlight">bufio.Reader vs bufio.Scanner</a></li><li><a href="#pq-vs-pgx" class="table-of-contents__link toc-highlight">pq vs pgx</a></li><li><a href="#gc-vs-gccgo" class="table-of-contents__link toc-highlight">gc vs gccgo</a></li><li><a href="#cipher-cbc--ecb--cfb--gcm" class="table-of-contents__link toc-highlight">Cipher CBC / ECB / CFB / GCM</a></li><li><a href="#memstatsgc_sys-undefined-type-mstats-has-no-field-or-method-gc_sys" class="table-of-contents__link toc-highlight">memstats.gc_sys undefined (type mstats has no field or method gc_sys)</a></li><li><a href="#gosum-h1" class="table-of-contents__link toc-highlight">go.sum h1</a></li><li><a href="#godebug" class="table-of-contents__link toc-highlight">GODEBUG</a></li><li><a href="#常见大写字段名字" class="table-of-contents__link toc-highlight">常见大写字段名字</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright © 1992-2022 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2022-02-21 16:07</div></div></div></footer></div>
<script src="/assets/js/runtime~main.dc34be00.js"></script>
<script src="/assets/js/main.c206799f.js"></script>
</body>
</html>