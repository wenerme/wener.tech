<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-os/alpine/alpine-ops">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"><title data-rh="true">Alpine 运维笔记 | Wener Live &amp; Life</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wener.me/notes/os/alpine/alpine-ops"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Alpine 运维笔记 | Wener Live &amp; Life"><meta data-rh="true" name="description" content="Tips"><meta data-rh="true" property="og:description" content="Tips"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wener.me/notes/os/alpine/alpine-ops"><link data-rh="true" rel="alternate" href="https://wener.me/notes/os/alpine/alpine-ops" hreflang="en"><link data-rh="true" rel="alternate" href="https://wener.me/notes/os/alpine/alpine-ops" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://37P8DMWBKF-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a5b87add.css">
<link rel="preload" href="/assets/js/runtime~main.07b4d16f.js" as="script">
<link rel="preload" href="/assets/js/main.92dfd685.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_WawS">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--light_HlbN"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--dark__4Lo"></div><b class="navbar__title text--truncate">Wener</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_N_jk colorModeToggle_wwB5"><button class="clean-btn toggleButton_gcuK toggleButtonDisabled_AJhd" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Eiwc"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_a3UO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_Ymm7"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_uXRe docsWrapper_AGYY"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_aXSw" type="button"></button><div class="docPage_Q_rn"><aside class="theme-doc-sidebar-container docSidebarContainer_GlFK"><div class="sidebar_ogDj"><nav class="menu thin-scrollbar menu_fqy9"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes">笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/algorithm">算法</a><button aria-label="Toggle the collapsible sidebar category &#x27;算法&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/blockchain">区块链</a><button aria-label="Toggle the collapsible sidebar category &#x27;区块链&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/culture/anime/anime-awesome">culture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/db">数据库</a><button aria-label="Toggle the collapsible sidebar category &#x27;数据库&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/design/ip">design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/dev/build/bazel">dev</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/economics">经济学</a><button aria-label="Toggle the collapsible sidebar category &#x27;经济学&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/elastic/elasticsearch-v2">elastic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/electrical/multimeter">electrical</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/embedded/embedded-awesome">embedded</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/evolve">自我成长</a><button aria-label="Toggle the collapsible sidebar category &#x27;自我成长&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/game/mhr">game</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/hardware/arm">hardware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/healthcare">健康</a><button aria-label="Toggle the collapsible sidebar category &#x27;健康&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/howto/network/dns-prevent-spoofing">howto</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/java">Java</a><button aria-label="Toggle the collapsible sidebar category &#x27;Java&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/languages">语言</a><button aria-label="Toggle the collapsible sidebar category &#x27;语言&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/mgmt/pm-awesome">mgmt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/network/application/dns">network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/ops/admin/augeas">ops</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/notes/os/alpine">os</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/notes/os/alpine">Alpine</a><button aria-label="Toggle the collapsible sidebar category &#x27;Alpine&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-apk">apk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-awesome">AlpineLinux Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-boot">Alpin Boot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-chroot">Alpine chroot 环境</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-faq">Alpine FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-health">Health Check</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-install">AlpineLinux Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-intro">Alpine 入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-lbu">Alpine local backup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/os/alpine/alpine-ops">Alpine 运维笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-pkgs">Alpine 包维护</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-setup">AlpineLinux Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-tip">Alpine Tip</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-version">AlpineLinux 版本历史</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/alpine/alpine-virt">Alpine Virt</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/os/android/android-awesome">android</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/os/busybox">Busybox</a><button aria-label="Toggle the collapsible sidebar category &#x27;Busybox&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/os/centos">CentOS</a><button aria-label="Toggle the collapsible sidebar category &#x27;CentOS&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/chromeos">ChromeOS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/os/darwin">Darwin</a><button aria-label="Toggle the collapsible sidebar category &#x27;Darwin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/os/debian">Debian</a><button aria-label="Toggle the collapsible sidebar category &#x27;Debian&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/freebsd">FreeBSD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/fuchsia">Fuchsia</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/lakka">lakka tv</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/libreelec">LibreELEC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/os/linux/admin">linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/os/network">网络设备系统</a><button aria-label="Toggle the collapsible sidebar category &#x27;网络设备系统&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/os-awesome">OS Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/os-faq">OS FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/os/os-glossary">OS Glossary</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/os/rhel/anaconda">rhel</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/os/ubuntu/ubuntu-version">ubuntu</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/os/virt">虚拟化</a><button aria-label="Toggle the collapsible sidebar category &#x27;虚拟化&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/os/windows">Windows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Windows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/photography/camera-awesome">photography</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/platform">平台</a><button aria-label="Toggle the collapsible sidebar category &#x27;平台&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/queue">Queue</a><button aria-label="Toggle the collapsible sidebar category &#x27;Queue&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/reference/cook/glossary">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/security/acme-awesome">security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/service/analytics/analytics-awesome">service</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/tool">工具</a><button aria-label="Toggle the collapsible sidebar category &#x27;工具&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/voip">VoIP</a><button aria-label="Toggle the collapsible sidebar category &#x27;VoIP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/web">Web</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_BKoE"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_EYvA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_RaEK"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nrhp"><div class="docItemContainer_EkVX"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_GKCt" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OL5o"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">os</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/os/alpine"><span itemprop="name">Alpine</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Alpine 运维笔记</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_oqr9 theme-doc-toc-mobile tocMobile_5aMT"><button type="button" class="clean-btn tocCollapsibleButton_CjyO">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Alpine 运维笔记</h1></header><h2 id="tips">Tips</h2><pre><code class="language-bash">lsblk --output NAME,SIZE,VENDOR,FSTYPE,LABEL,UUID,MODE # 查看磁盘硬盘
lsblk -x NAME --output NAME,SIZE,VENDOR,FSTYPE,LABEL,UUID,MODE # 使用 NAME 排序

apk add wpa_supplicant e2fsprogs-extra # 基础安装包
</code></pre><h2 id="bash">bash</h2><ul><li><a href="https://pkgs.alpinelinux.org/packages?name=*-bash-completion&amp;branch=v3.6&amp;repo=&amp;arch=x86_64">*<!-- -->-bash-completion</a><ul><li>其他的 bash 补全的包</li></ul></li></ul><pre><code class="language-bash"># Bash
apk add shadow bash
usermod --shell /bin/bash admin
# 该步骤要求输入密码
# chsh root -s /bin/bash

# 补全
apk add bash-completion
# 加载补全
source /etc/profile.d/bash_completion.sh
</code></pre><h2 id="替换-apk-仓库镜像">替换 apk 仓库镜像</h2><pre><code class="language-bash">echo &quot;http://mirrors.sjtug.sjtu.edu.cn/alpine/v$(sed -n &#x27;s/\.\d\+$//p&#x27; /etc/alpine-release)/main
http://mirrors.sjtug.sjtu.edu.cn/alpine/v$(sed -n &#x27;s/\.\d\+$//p&#x27; /etc/alpine-release)/community&quot; &gt; /etc/apk/repositories
apk update
</code></pre><h2 id="manpages">manpages</h2><ul><li>Alpine 默认不会安装 doc 和 man</li><li>所有的文档以 -doc 结尾</li><li>文档位于 /usr/share/man</li><li><a href="https://wiki.alpinelinux.org/wiki/How_to_get_regular_stuff_working">How to get regular stuff working</a></li></ul><pre><code class="language-bash">apk add --no-cache man man-pages mdocml-apropos less less-doc
export PAGER=less

# 安装和查看
apk add --no-cache curl-doc
man curl

# 或者直接使用 docker 便于查文档
docker run --rm -it wener/base:man
# 可以安装映射到主机
docker run --rm -it -v $PWD/man:/usr/share/man wener/base:man
</code></pre><h2 id="基础运维">基础运维</h2><pre><code class="language-bash"># 基础工具
apk add nano file grep htop rsync curl openssl

# 简化链接
apk add tmux mosh

# sshrc - https://github.com/Russell91/sshrc
# 依赖包
apk add vim tar coreutils openssl

# 证书
# /etc/ssl/certs/ca-certificates.crt

# 系统信息
apk add neofetch
</code></pre><h2 id="系统运维">系统运维</h2><pre><code class="language-bash"># 常用工具
apk add util-linux
# 扩展工具
apk add blkid cfdisk findmnt mcookie setpriv sfdisk
# 补全
apk add util-linux-bash-completion

# 信息查询工具
apk add lsof
</code></pre><h2 id="硬件运维">硬件运维</h2><pre><code class="language-bash">apk add pciutils
apk add usbutils
apk add parted
apk add ddrescue

# dmidecode ownership vpddecode biosdecode
apk add dmidecode
</code></pre><h2 id="setup-disk">setup-disk</h2><pre><code class="language-bash"># 制作系统盘
# swap 0
setup-disk -m sys -s 0 -v /dev/sda

# ==========
# 新系统检查项
# ==========
# 修改主机名
setup-hostname -n alpine-test
/etc/init.d/hostname --quiet restart
nano /etc/hosts

# 修改网络地址
nano /etc/network/interfaces
</code></pre><h2 id="本地仓库">本地仓库</h2><pre><code class="language-bash">ARCH=$(apk print --print-arch)
REPO=$PWD/repo
mkdir -p $REPO/$ARCH
apk fetch -vRo $REPO/$ARCH nano
# 可以指定仓库
apk fetch -vRo $REPO/$ARCH -X http://mirrors.aliyun.com/alpine/edge/main --no-cache linux-firmware-brcm

# 创建索引
# 这里的 APKINDEX 是未签名的
apk index -o $REPO/$ARCH/APKINDEX.tar.gz $REPO/$ARCH/*.apk
apk -X $REPO update --allow-untrust
apk -X $REPO search --allow-untrust nano

</code></pre><h2 id="容器">容器</h2><pre><code class="language-bash"># Docker
apk add docker
rc-update add docker
</code></pre><h2 id="磁盘扩展">磁盘扩展</h2><pre><code class="language-bash"># 扩展分区
# 假设分区结构为: boot,swap,root,空闲
# 删除最后一个分区, 再创建最后一个分区, 确保起点位置不变
# F 可以看到空余空间
# 手动分区
# fdisk /dev/sda
# 或直接分区
apk add util-linux
echo -e &#x27;d\n\nn\n\n\n\n\n\np\nw\n&#x27; | fdisk /dev/sda

# 重启
# 不重启应该也是可以的 - ext4 支持在线扩容
# reboot

# 扩展文件系统
apk add e2fsprogs-extra
resize2fs /dev/sda2

# 检查结果
df -h /

# parted 也可以
parted /dev/sdb resize 1 1 200M
parted /dev/sdb resizepart 1 400M
resize2fs /dev/sdb1 400M
</code></pre><h2 id="udev">udev</h2><ul><li>Gentoo <a href="https://wiki.gentoo.org/wiki/Project:Eudev">Eudev</a></li></ul><pre><code class="language-bash"># 设置 /dev/disk
apk add udev-init-scripts
# OpenRC compatible fork of systemd-udev
apk add eudev
# init: udev udev-trigger udev-postmount udev-settle
rc-update add udev sysinit
rc-update add udev-trigger sysinit

# 如果想要立即启用
rc-service udev start
rc-service udev-trigger start

udevadm trigger

# 该包会影响网卡名字
# 会添加 /lib/udev/rules.d/80-net-name-slot.rules
# 需要参数 net.ifnames=0 来关闭
# 大多数时候不需要
# apk add eudev-netifnames

# 所有定义的规则
udevadm info --export-db
</code></pre><h2 id="zfs">zfs</h2><ul><li>先安装 <a href="#udev">udev</a> 环境</li><li>使用 zfs 时最好使用 uuid, 因为名字可能会发生变化</li><li>0.6 时, 导致直接系统重启</li><li>0.6 的 init 不是 openrc 的脚本, 启动会警告</li></ul><pre><code class="language-bash">apk add zfs zfs-{scripts,udev,utils-py}
# 区分 lts, virt
apk add zfs-lts
# 加载内核模块
modprobe zfs
echo zfs &gt;&gt; /etc/modules

# init: zfs-import zfs-mount zfs-share zfs-zed
rc-update add zfs-import sysinit
rc-update add zfs-mount sysinit

# 立即启动
rc-service zfs-import start
rc-service zfs-mount start

# 检测是否正常
zpool status

# 查看磁盘量
parted --list
# 查看现有磁盘 UUID
# 依赖于 udev
# 一般会有 ata, scsi, wwn 前缀之类
ls -lh /dev/disk/by-id/
# 只看主盘
ls -lh /dev/disk/by-id/ | grep &#x27;sd.$&#x27;

# -f 强制创建, 避免 Does not contain an EFI label 错误
# -o ashift=12 使用高级磁盘格式
# -m /mnt/data 指定挂载点, 不指定则默认挂载为 /&lt;pool&gt;
# p1 Pool 的名字
# raidz 使用 RADI-Z 冗余
zpool create -f -o ashift=12 -m /mnt/data p1 \
  raidz \
    ata-VBOX_HARDDISK_VB63cffc10-3a66b288 \
    ata-VBOX_HARDDISK_VBfb21373d-56cc6c57 \
    ata-VBOX_HARDDISK_VB91ae7aad-d4a73895

# 查看状态
zpool status

#   pool: p1
#  state: ONLINE
#   scan: none requested
# config:
#
#   NAME                                       STATE     READ WRITE CKSUM
#   p1                                         ONLINE       0     0     0
#     raidz1-0                                 ONLINE       0     0     0
#       ata-VBOX_HARDDISK_VB63cffc10-3a66b288  ONLINE       0     0     0
#       ata-VBOX_HARDDISK_VBfb21373d-56cc6c57  ONLINE       0     0     0
#       ata-VBOX_HARDDISK_VB91ae7aad-d4a73895  ONLINE       0     0     0
#
# errors: No known data errors

# 此时可以重启测试看看 pool 是否还在

zpool status -x

# 将 scrub 作为周期性任务
# 一般一两周一次, 至少一月一次
echo &#x27;#!/bin/sh -
zpool scrub main
&#x27; &gt; /etc/periodic/weekly/zfs-scrub
chmod +x /etc/periodic/weekly/zfs-scrub

# 测试 crond
# busybox 的 run-parts 功能较少
apk add run-parts
run-parts /etc/periodic/weekly -v --report
</code></pre><h3 id="uninstall-zfs">uninstall zfs</h3><pre><code class="language-bash"># 销毁使用的 pool
zpool destroy pool

# 停止 service
rc-service zfs-import stop
rc-service zfs-mount stop

# 移除 init
rc-update del zfs-import sysinit
rc-update del zfs-mount sysinit

# 移除内核模块
modprobe -r zfs
</code></pre><h2 id="btrfs">btrfs</h2><ul><li><p>kernel <a href="https://btrfs.wiki.kernel.org/">btrfs</a></p><ul><li><a href="https://btrfs.wiki.kernel.org/index.php/Manpage/btrfs(5)">btrfs.5</a></li><li><a href="https://btrfs.wiki.kernel.org/index.php/Status">Status</a></li><li><a href="https://btrfs.wiki.kernel.org/index.php/Mount_options">Mount options</a></li><li><a href="https://btrfs.wiki.kernel.org/index.php/Incremental_Backup">Incremental Backup</a></li><li><a href="https://btrfs.wiki.kernel.org/index.php/Problem_FAQ">FAQ</a></li><li><a href="https://btrfs.wiki.kernel.org/index.php/Gotchas">Gotchas</a><ul><li>不建议使用 RAID5, RAID6</li></ul></li><li><a href="https://btrfs.wiki.kernel.org/index.php/Using_Btrfs_with_Multiple_Devices">Using Btrfs with Multiple Devices</a></li></ul></li><li><p>Debian <a href="https://wiki.debian.org/Btrfs">Btrfs</a></p><ul><li>不要使用 4.11.x</li><li>quotas 和 qgroups 有问题</li><li>subvol 不能够被挂在为不同的选项</li><li>compress=lzo 可能比较危险</li><li>-o compress 可能会放大碎片</li></ul></li><li><p>Archlinux <a href="https://wiki.archlinux.org/index.php/Btrfs">Btrfs</a></p><ul><li><a href="https://wiki.archlinux.org/index.php/Btrfs_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">中文</a></li></ul></li><li><p>raid0, raid1, raid5, raid6, raid10, dup, single</p></li></ul><pre><code class="language-bash"># 辅助程序
apk add btrfs-progs
apk add btrfs-progs-extra
# 补全
apk add btrfs-progs-bash-completion

# 加载内核模块
modprobe btrfs
# 确保启动时加载
echo btrfs &gt;&gt; /etc/modules

# 加载模块后会生成, 如果没有可以手动创建
# mknod /dev/btrfs-control c 10 234

# -M 混合元数据和数据, 适用于小数据, 数据大了过后磁盘布局不可预见
# -L 指定标签
# -U 可手动指定 UUID, 避免修改 fstab
# -O 指定特性
mkfs.btrfs --help

# 查看支持的特性
mkfs.btrfs -O list-all
# mixed-bg            - mixed data and metadata block groups (0x4, compat=2.6.37, safe=2.6.37)
# extref              - increased hardlink limit per file to 65536 (0x40, compat=3.7, safe=3.12, default=3.12)
# raid56              - raid56 extended format (0x80, compat=3.9)
# skinny-metadata     - reduced-size metadata extent refs (0x100, compat=3.10, safe=3.18, default=3.18)
# no-holes            - no explicit hole extents for files (0x200, compat=3.14, safe=4.0)

# a.b.c.d 做 raid 1
# 这几个设备的 uuid 会变成一样
mkfs.btrfs -d raid1 -m raid1 /dev/sd{a,b,c,d}

# 此时可以将任意一个设备进行挂载
mount /dev/sda /mnt/main/

# 设备扫描
btrfs device scan
# 查看文件系统
btrfs filesystem show
# 查看使用量
btrfs fi df /data

# 执行 scrub
# https://btrfs.wiki.kernel.org/index.php/Manpage/btrfs-scrub
# 结果会存储于 /var/lib/btrfs/
btrfs sc start /data
# 查看执行状态
btrfs sc status /data

# 执行 check
# check or repair a btrfs filesystem
# https://btrfs.wiki.kernel.org/index.php/Manpage/btrfs-check
# 不建议执行在线检测

# 自动挂载需要修改 /etc/fstab
echo &quot;UUID=$(blkid -s UUID -o value /dev/sda) /data btrfs defaults 0 0&quot; &gt;&gt; /etc/fstab
</code></pre><h3 id="failed-to-read-the-system-array">failed to read the system array</h3><ul><li>会导致启动时挂载失败</li></ul><pre><code class="language-bash">[ 1985.671707] BTRFS info (device sde): disk space caching is enabled
[ 1985.671712] BTRFS info (device sde): has skinny extents
[ 1985.675608] BTRFS error (device sde): failed to read the system array: -5
[ 1985.731217] BTRFS error (device sde): open_ctree failed
</code></pre><pre><code class="language-bash"># 从新扫描后挂载
btrfs dev scan
mount -a

# 如果还不行可以尝试
btrfs rescue zero-log /dev/sde
mount -a
</code></pre><h2 id="networking">networking</h2><ul><li>auto<ul><li>try to <code>ip link set &lt;dev&gt; up</code> at boot. Best choice for anything PCIe/SoC.</li></ul></li><li>allow-hotplug<ul><li>for kernel+drivers+udev to detect the device, then <code>ip link set &lt;dev&gt; up</code> it. The only thing that can deal with annoying USB, SDIO, etc.</li></ul></li></ul><pre><code class="language-bash">apk add ethtool
# 支持更多的参数
apk add ifupdown
apk add iftop
# 支持 -v
apk add run-parts
apk add iproute2
# A utility to ping multiple hosts at once
# http://fping.org/
apk add fping
</code></pre><pre><code class="language-bash"># 设置地址和掩码
ifconfig eth1 192.168.8.182 netmask 255.255.252.0
# 实际调用
# 这里的 run-parts 可能是 busybox 的 run-parts, 不支持 -v, 建议额外安装
# run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
# ip addr add 192.168.8.182/255.255.252.0 broadcast 192.168.11.255    dev eth1 label eth1
ifup -v eth1
</code></pre><pre><code># 一个网卡, 多个网关
auto eth0
iface eth0 inet static
    address 10.1.248.11
    netmask 255.255.255.0
    up ip route add default via 10.1.248.1 dev eth0  metric 100
    up ip route add default via 10.1.248.3 dev eth0  metric 200

# 一个网卡, 多个地址
auto eth0
iface eth0 inet static
  address aaa.aaa.aaa.aaa
  netmask 255.255.254.0
  gateway bbb.bbb.bbb.bbb
  dns-nameservers ccc.ccc.ccc.ccc ddd.ddd.ddd.ddd eee.eee.eee.eee
  dns-search vps-number.com
  # 或者
  up ip addr add fff.fff.fff.fff/prefixlen dev eth0

auto eth0:0
iface eth0:0 inet static
  address fff.fff.fff.fff
  netmask 255.255.254.0

</code></pre><h2 id="network-benchmark">network benchmark</h2><pre><code class="language-bash">apk add iperf3 iptraf-ng iftop

iperf3 -s
iperf3 -c HOST
</code></pre><h2 id="init">init</h2><ul><li>openrc</li><li><code>/etc/conf.d/localmount</code><ul><li>可配置强制挂载点</li></ul></li></ul><pre><code class="language-conf"></code></pre><h2 id="iscsi">iscsi</h2><ul><li><a href="https://github.com/open-iscsi">https://github.com/open-iscsi</a></li><li><a href="https://github.com/open-iscsi/open-iscsi">https://github.com/open-iscsi/open-iscsi</a></li><li><a href="https://github.com/open-iscsi/targetcli-fb">https://github.com/open-iscsi/targetcli-fb</a></li><li><a href="https://wiki.archlinux.org/index.php/ISCSI_Target">https://wiki.archlinux.org/index.php/ISCSI_Target</a></li></ul><p><a href="http://scst.sourceforge.net/">http://scst.sourceforge.net/</a></p><pre><code class="language-bash"># An administration shell for storage targets
# init: targetcli
# bin: targetcli
# apk add targetcli

# ISCSI target for SCST - userspace tools
# apk add iscsi-scst

# High performance, transport independent, multi-platform iSCSI initiator
# init: iscsid
# bin: iscsi_discovery, iscsiadm, iscsi-iname
# sbin: iscsid, iscsistart
# conf:
#   /etc/iscsi/initiatorname.iscsi
#   /etc/iscsi/iscsid.conf
#   /etc/iscsi/ifaces/iface
apk add open-iscsi

</code></pre><h2 id="stress">stress</h2><pre><code class="language-bash">stress --vm-bytes $(awk &#x27;/MemFree/{printf &quot;%d\n&quot;, $2 * 0.9;}&#x27; &lt; /proc/meminfo)k --vm-keep -m 1
stress --vm-bytes $(awk &#x27;/MemFree/{printf &quot;%d\n&quot;, $2 * 0.097;}&#x27; &lt; /proc/meminfo)k --vm-keep -m 10
</code></pre><h2 id="disk">disk</h2><ul><li>badblocks</li><li>e2fsprogs-extra</li></ul><pre><code class="language-bash">apk add cdrkit
# 检测 iso 是否可启动
# 结果中会包含 El Torito 信息
# https://en.wikipedia.org/wiki/El_Torito_(CD-ROM_standard)
isoinfo -d -i is_it_bootable.iso

# burn iso
pv spp-2016.10.0.iso | dd bs=4M of=/dev/sdd
</code></pre><h2 id="qemu">QEMU</h2><ul><li><a href="https://www.qemu.org/">QEMU</a><ul><li><a href="https://qemu.weilnetz.de/doc/qemu-doc.html">Doc</a></li></ul></li></ul><p>If you want to run VM as unprivileged user and let Qemu create tunX devices,
then you must add that user to the group &quot;qemu&quot;.
If you use KVM for hardware-assisted virtualization, then you may also need
to add that user to the group &quot;kvm&quot;.</p><p><a href="https://wiki.archlinux.org/index.php/QEMU_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/QEMU_(简体中文)</a></p><p><a href="https://allyourco.de/running-vmware-esxi-under-qemu-kvm/">https://allyourco.de/running-vmware-esxi-under-qemu-kvm/</a></p><h3 id="kvm">kvm</h3><ul><li><a href="https://wiki.alpinelinux.org/wiki/KVM">https://wiki.alpinelinux.org/wiki/KVM</a></li></ul><pre><code class="language-bash"># 基础
apk add qemu-system-x86_64 libvirt
# 32 位
apk add qemu-system-i386
# 如果需要 GUI 管理
apk add libvirt-daemon dbus polkit
# 如果想用其他磁盘格式
apk add qemu-img
# 启用内核模块
modprobe kvm-intel
echo kvm-intel &gt;&gt; /etc/modules
# 如果是 AMD
# modprobe kvm-amd

# 开机启用
rc-update add libvirtd
rc-update add dbus

# KVM 默认会桥接 NAT, 如果想使用默认的网络配置, 需要加载 tun 模块
modprobe tun

# 添加用户到分组
addgroup $USER kvm
addgroup $USER qemu
addgroup $USER libvirt
</code></pre><h3 id="virtual-disk">virtual-disk</h3><ul><li><a href="https://en.wikibooks.org/wiki/QEMU/Images">https://en.wikibooks.org/wiki/QEMU/Images</a></li><li>qemu-nbd<ul><li>QEMU Disk Network Block Device Server</li></ul></li></ul><pre><code class="language-bash">modprobe nbd max_part=16
# 链接
qemu-nbd -c /dev/nbd0 image.qcow2
partprobe /dev/nbd0
# 挂载
mount /dev/nbd0p1 /mnt/image

umount /mnt/image

# 断开连接
qemu-nbd -c /dev/nbd0

</code></pre><h2 id="ftp">ftp</h2><ul><li>Archlinux <a href="https://wiki.archlinux.org/index.php/Very_Secure_FTP_Daemon">vsftpd</a></li><li><a href="http://vsftpd.beasts.org/vsftpd_conf.html">vsftpd.conf</a></li><li><a href="https://security.appspot.com/vsftpd.html">https://security.appspot.com/vsftpd.html</a></li></ul><pre><code class="language-bash">apk add vsftp
# 修改配置
nano /etc/vsftpd/vsftpd.conf
# 最简配置, 允许匿名操作
cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd.conf.old
echo &quot;
anonymous_enable=YES
write_enable=YES
anon_upload_enable=YES
anon_mkdir_write_enable=YES
dirmessage_enable=YES
xferlog_enable=YES
xferlog_file=/dev/stdout
connect_from_port_20=YES
ftpd_banner=Welcome to wener FTP service.
listen=YES
background=NO
&quot; &gt; /etc/vsftpd/vsftpd.conf

</code></pre><h2 id="lvm">lvm</h2><pre><code class="language-bash">apk add lvm2
modprobe dm-mod

# 扫描逻辑分组
vgscan
# 激活
vgchange -ay SangomaVG
lvs
# 挂载
mount /dev/SangomaVG/root /mnt/data
</code></pre><h2 id="libguestfs">libguestfs</h2><ul><li><a href="https://en.wikipedia.org/wiki/Libguestfs">https://en.wikipedia.org/wiki/Libguestfs</a></li><li><a href="https://bugs.alpinelinux.org/issues/1792">https://bugs.alpinelinux.org/issues/1792</a></li><li>会编译失败, 因为用了 glibc 特有的 printf 修饰符<ul><li><a href="https://www.redhat.com/archives/libguestfs/2016-August/msg00002.html">https://www.redhat.com/archives/libguestfs/2016-August/msg00002.html</a></li><li>No support for glibc-style extended printf formatters.</li></ul></li></ul><pre><code class="language-bash"></code></pre><pre><code>guestfish: guest filesystem shell
guestfish lets you edit virtual machine filesystems
Copyright (C) 2009-2016 Red Hat Inc.
Usage:
  guestfish [--options] cmd [: cmd : cmd ...]
Options:
  -h|--cmd-help        List available commands
  -h|--cmd-help cmd    Display detailed help on &#x27;cmd&#x27;
  -a|--add image       Add image
  -c|--connect uri     Specify libvirt URI for -d option
  --csh                Make --listen csh-compatible
  -d|--domain guest    Add disks from libvirt guest
  --echo-keys          Don&#x27;t turn off echo for passphrases
  -f|--file file       Read commands from file
  --format[=raw|..]    Force disk format for -a option
  -i|--inspector       Automatically mount filesystems
  --keys-from-stdin    Read passphrases from stdin
  --listen             Listen for remote commands
  --live               Connect to a live virtual machine
  -m|--mount dev[:mnt[:opts[:fstype]]]
                       Mount dev on mnt (if omitted, /)
  --network            Enable network
  -N|--new [filename=]type
                       Create prepared disk (test&lt;N&gt;.img or filename)
  -n|--no-sync         Don&#x27;t autosync
  --no-dest-paths      Don&#x27;t tab-complete paths from guest fs
  --pipe-error         Pipe commands can detect write errors
  --progress-bars      Enable progress bars even when not interactive
  --no-progress-bars   Disable progress bars
  --remote[=pid]       Send commands to remote guestfish
  -r|--ro              Mount read-only
  --selinux            Enable SELinux support
  -v|--verbose         Verbose messages
  -V|--version         Display version and exit
  -w|--rw              Mount read-write
  -x                   Echo each command before executing it

To examine a disk image, ISO, hard disk, filesystem etc:
  guestfish [--ro|--rw] -i -a /path/to/disk.img
or
  guestfish [--ro|--rw] -i -d name-of-libvirt-domain

--ro recommended to avoid any writes to the disk image.  If -i option fails
run again without -i and use &#x27;run&#x27; + &#x27;list-filesystems&#x27; + &#x27;mount&#x27; cmds.

For more information, see the manpage guestfish(1).
</code></pre><h2 id="acf">acf</h2><ul><li><a href="https://wiki.alpinelinux.org/wiki/Alpine_Configuration_Framework_Design">Alpine Configuration Framework Design</a></li><li><a href="https://wiki.alpinelinux.org/wiki/ACF_packages">ACF packages</a></li><li><a href="https://pkgs.alpinelinux.org/packages?name=acf-*&amp;branch=v3.6&amp;arch=x86_64">acf-<!-- -->*</a></li></ul><pre><code class="language-bash"></code></pre><h2 id="crond">crond</h2><ul><li>实际执行时使用的 run-parts</li><li>busybox 自带的 run-parts 功能较少, 可额外安装</li></ul><pre><code>echo &#x27;CRON_OPTS=&quot;-c /etc/crontabs -L /var/log/crond.log -l 6&quot;&#x27; &gt; /etc/conf.d/crond
rc-update add crond
rc-service crond restart
</code></pre><pre><code>BusyBox v1.26.2 (2017-10-04 13:37:41 GMT) multi-call binary.

Usage: run-parts [-a ARG]... [-u UMASK] [--reverse] [--test] [--exit-on-error] DIRECTORY

Run a bunch of scripts in DIRECTORY

    -a ARG      Pass ARG as argument to scripts
    -u UMASK    Set UMASK before running scripts
    --reverse   Reverse execution order
    --test      Dry run
    --exit-on-error Exit if a script exits with non-zero
</code></pre><pre><code>Usage: run-parts [OPTION]... DIRECTORY
      --test          print script names which would run, but don&#x27;t run them.
      --list          print names of all valid files (can not be used with
                      --test)
  -v, --verbose       print script names before running them.
      --report        print script names if they produce output.
      --reverse       reverse execution order of scripts.
      --exit-on-error exit as soon as a script returns with a non-zero exit
                      code.
      --lsbsysinit    validate filenames based on LSB sysinit specs.
      --new-session   run each script in a separate process session
      --regex=PATTERN validate filenames based on POSIX ERE pattern PATTERN.
  -u, --umask=UMASK   sets umask to UMASK (octal), default is 022.
  -a, --arg=ARGUMENT  pass ARGUMENT to scripts, use once for each argument.
  -V, --version       output version information and exit.
  -h, --help          display this help and exit.
</code></pre><h2 id="wireguard">wireguard</h2><ul><li>3.8 还没有，需要使用 edge</li></ul><pre><code class="language-bash">qemu-img create -f raw edge-virt.raw 300M
wget https://mirrors.tuna.tsinghua.edu.cn/alpine/v3.8/releases/x86_64/alpine-virt-3.8.2-x86_64.iso
qemu-system-x86_64 -m 2g -hda edge-virt.raw -net nic -net user,hostfwd=tcp::2222-:22 -cdrom alpine-virt-3.8.2-x86_64.iso -boot d

# Setup VM
setup-interfaces
rc-service networking restart
setup-sshd -c openssh
echo &#x27;PermitRootLogin yes&#x27; &gt;&gt; /etc/ssh/sshd_config
echo root:root | chpasswd
rc-service sshd restart

# From Host
ssh-keygen -R [127.0.0.1]:2222
ssh root@127.0.0.1 -p 2222

echo &quot;http://mirrors.aliyun.com/alpine/edge/main
http://mirrors.aliyun.com/alpine/edge/community
http://mirrors.aliyun.com/alpine/edge/testing&quot; &gt;&gt; /etc/apk/repositories
apk update

ERASE_DISKS=/dev/sda setup-disk -m sys -s 0 /dev/sda
poweroff
</code></pre><h2 id="faq">FAQ</h2><h3 id="ip-ioctl-0x8913-failed-no-such-device">ip: ioctl 0x8913 failed: no such device</h3><ul><li>可能是网卡名字发生了改变</li></ul><h3 id="恢复网卡名字">恢复网卡名字</h3><ul><li>安装 udev 后可能会出现, 因为 udev 可能会进行重命名</li><li>此时 eth0 可能就不存在了, 此时可能名字为 enp0s3 这样的</li><li>在 udev 中改变 if name 的为独立包, <code> eudev-netifnames</code>, 将该包移除即可<ul><li><code>/lib/udev/rules.d/80-net-name-slot.rules</code></li></ul></li></ul><pre><code class="language-bash"># 查看网络设备名
cat /proc/net/dev

# 查看网络控制器
lspci | egrep -i --color &#x27;network|ethernet&#x27;
# 查看网络相关硬件
lshw -class network

ifconfig -a
ip link show
ip a
</code></pre><h3 id="文件系统变成了只读">文件系统变成了只读</h3><ul><li>看看 <code>/etc/fstab</code> 的 UUID 是否有多的,错误的或重复的</li><li>使用 df 查看当前挂载设备</li><li>blkid 查看设备 UUID</li><li>从新挂载为读写 <code>mount -rw -o remount UUID=&lt;正确的 UUID&gt; /</code></li><li>修改 <code>/etc/fstab</code></li><li>重启</li></ul><h3 id="find-sysmodulepcc_cpufreq">find: /sys/module/pcc_cpufreq</h3><ul><li>查看 linux/cpufreq</li></ul><h3 id="traps-rc-status3854-general-protection">traps: rc-status<!-- -->[3854]<!-- --> general protection</h3><ul><li><code>rc-status sysinit</code> 时出现该异常</li><li><a href="https://github.com/OpenRC/openrc/issues/168">OpenRC/openrc#168</a></li></ul><pre><code>[ 6921.149981] traps: rc-status[3854] general protection ip:7ca2e00baa1b sp:7ecdf01d7038 error:0
[ 6921.149987]  in ld-musl-x86_64.so.1[7ca2e009d000+89000]
[ 6921.150003] grsec: From 192.168.11.29: Segmentation fault occurred at            (nil) in /bin/rc-status[rc-status:3854] uid/euid:0/0 gid/egid:0/0, parent /bin/bash[bash:3570] uid/euid:0/0 gid/egid:0/0
[ 6921.150020] grsec: From 192.168.11.29: denied resource overstep by requesting 4096 for RLIMIT_CORE against limit 0 for /bin/rc-status[rc-status:3854] uid/euid:0/0 gid/egid:0/0, parent /bin/bash[bash:3570] uid/euid:0/0 gid/egid:0/0
</code></pre><pre><code class="language-bash"># 生成转储的异常为 denied resource overstep by requesting 4096 for RLIMIT_CORE against limit 0
# 查看当前的 limit
ulimit -a
# 配置文件
cat /etc/security/limits.conf
# RLIMIT_CORE = 0 说明不能创建转储
# 针对当前会话设置, 再次调用时会生成 core 文件
ulimit -c 4096
</code></pre><p>RLIMIT_AS //进程的最大虚内存空间，字节为单位。
RLIMIT_CORE //内核转存文件的最大长度。
RLIMIT_CPU //最大允许的 CPU 使用时间，秒为单位。当进程达到软限制，内核将给其发送 SIGXCPU 信号，这一信号的默认行为是终止进程的执行。然而，可以捕捉信号，处理句柄可将控制返回给主程序。如果进程继续耗费 CPU 时间，核心会以每秒一次的频率给其发送 SIGXCPU 信号，直到达到硬限制，那时将给进程发送 SIGKILL 信号终止其执行。
RLIMIT_DATA //进程数据段的最大值。
RLIMIT_FSIZE //进程可建立的文件的最大长度。如果进程试图超出这一限制时，核心会给其发送 SIGXFSZ 信号，默认情况下将终止进程的执行。
RLIMIT_LOCKS //进程可建立的锁和租赁的最大值。
RLIMIT_MEMLOCK //进程可锁定在内存中的最大数据量，字节为单位。
RLIMIT_MSGQUEUE //进程可为 POSIX 消息队列分配的最大字节数。
RLIMIT_NICE //进程可通过 setpriority() 或 nice()调用设置的最大完美值。
RLIMIT_NOFILE //指定比进程可打开的最大文件描述词大一的值，超出此值，将会产生 EMFILE 错误。
RLIMIT_NPROC //用户可拥有的最大进程数。
RLIMIT_RTPRIO //进程可通过 sched_setscheduler 和 sched_setparam 设置的最大实时优先级。
RLIMIT_SIGPENDING //用户可拥有的最大挂起信号数。
RLIMIT_STACK //最大的进程堆栈，以字节为单位。</p><h3 id="ip-rtnetlink-answers-file-exists">ip: RTNETLINK answers: File exists</h3><ul><li>ip addr add 时出现</li><li>usually indicates that a route already exists and you are trying to add it again.</li><li><a href="http://man7.org/linux/man-pages/man7/rtnetlink.7.html">rtnetlink.7</a><ul><li>Linux IPv4 routing socket</li></ul></li><li>网络启停时是依据 <code>/var/run/ifstate</code> 中的 if 状态进行操作</li><li>如果一开始停止失败, 那么就会导致启动是会, 导致实际的 if 状态和 ifstate 中的状态不一致</li><li><a href="https://www.thomas-krenn.com/en/wiki/Two_Default_Gateways_on_One_System">Two Default Gateways on One System</a></li><li>inetfaces 中只能指定一条 gateway<ul><li>如果指定了多条会出现该异常</li></ul></li><li><a href="http://lartc.org/">Linux Advanced Routing &amp; Traffic Control</a></li></ul><pre><code class="language-bash"># 例如
ip addr add 192.168.8.182/255.255.252.0 broadcast 192.168.8.255 dev eth1 label eth1
# 此时可以尝试
ip addr flush dev eth1
# 查看实际操作
strace -e open ifup eth1
# 直接添加 eth1=eth1
nano /var/run/ifstate
# 然后就可以正常操作 ifup 和 ifdown 了
</code></pre><h3 id="grsec-time-set-by-sbinhwclockhwclock2863">grsec: time set by /sbin/hwclock<!-- -->[hwclock:2863]</h3><pre><code>[   14.977686] grsec: time set by /sbin/hwclock[hwclock:2863] uid/euid:0/0 gid/egid:0/0, parent /lib/rc/sh/openrc-run.sh[openrc-run.sh:2838] uid/euid:0/0 gid/egid:0/0
</code></pre><h3 id="node-docker-seg-fault">node docker seg fault</h3><ul><li><a href="https://github.com/sass/node-sass/issues/2031">sass/node-sass#2031</a> Segmentation fault on Node 8 alpine (docker)</li><li>是由于线程栈太小了导致</li><li>jubel-han 的 <a href="https://github.com/jubel-han/dockerfiles/blob/master/node/Dockerfile">Dockerfile</a> 提供了一个 LD_PRELOAD</li><li><a href="https://stackoverflow.com/q/426230/1870054">What is the LD_PRELOAD trick?</a></li><li><a href="http://wiki.musl-libc.org/wiki/Functional_differences_from_glibc#Thread_stack_size">http://wiki.musl-libc.org/wiki/Functional_differences_from_glibc#Thread_stack_size</a></li></ul><h3 id="php-下-iconv-有问题">PHP 下 iconv 有问题</h3><p>Alpine 下 PHP 的 iconv 有问题 <a href="https://github.com/docker-library/php/issues/428">https://github.com/docker-library/php/issues/428</a>
<a href="https://github.com/docker-library/php/issues/240">https://github.com/docker-library/php/issues/240</a></p><pre><code class="language-bash">apk add --no-cache gnu-libiconv --repository http://mirrors.aliyun.com/alpine/edge/testing
LD_PRELOAD=/usr/lib/preloadable_libiconv.so php
# 或
export LD_PRELOAD=&quot;/usr/lib/preloadable_libiconv.so php&quot;
</code></pre><pre><code class="language-Dockerfile">RUN apk add gnu-libiconv --no-cache --repository mirrors.aliyun.com/alpine/edge/testing
ENV LD_PRELOAD /usr/lib/preloadable_libiconv.so php
</code></pre><h3 id="rc-status-sysinit-异常">rc-status sysinit 异常</h3><ul><li>可能是由于 zfs-zed 导致</li><li><a href="https://github.com/OpenRC/openrc/issues/168#issuecomment-349870167">https://github.com/OpenRC/openrc/issues/168#issuecomment-349870167</a></li><li><a href="https://github.com/zfsonlinux/zfs/issues/6930">https://github.com/zfsonlinux/zfs/issues/6930</a></li><li><a href="https://wiki.debian.org/LSBInitScripts">https://wiki.debian.org/LSBInitScripts</a></li></ul><h3 id="启动分区修复">启动分区修复</h3><ol><li>mbr 坏了但分区是好的</li></ol><pre><code class="language-bash">dd bs=440 conv=notrunc count=1 if=/usr/share/syslinux/mbr.bin of=/dev/sdc
</code></pre><ol start="2"><li>启动分区坏了</li></ol><pre><code class="language-bash"># 查看分区信息
file -s /dev/sdc1
</code></pre><h3 id="tbd">TBD</h3><pre><code>[    0.013013] DMAR-IR: This system BIOS has enabled interrupt remapping
               on a chipset that contains an erratum making that
               feature unstable.  To maintain system stability
               interrupt remapping is being disabled.  Please
               contact your BIOS vendor for an update



[ 7785.189928] perf: interrupt took too long (2658 &gt; 2500), lowering kernel.perf_event_max_sample_rate to 75000
</code></pre><h2 id="install-utmpwtmp">install utmp/wtmp</h2><pre><code class="language-bash">apk add utmps
# /run/utmp
service utmpd start
service wtmpd start
</code></pre><h2 id="ntpd">ntpd</h2><ul><li>推荐使用 chrony</li><li>busybox 的 ntpd 能用</li><li><a href="https://www.pool.ntp.org/zone/hk">https://www.pool.ntp.org/zone/hk</a></li></ul><pre><code class="language-bash"># busybox openntpd chrony none
setup-ntp -c chrony
# 查看同步状态
adjtimex

# 停止旧的 ntpd
rc-update del ntpd
service ntpd stop

# busybox ntpd 手动同步
ntpd -dn -N -p pool.ntp.org
ntpd -dn -N -p 3.cn.pool.ntp.org
</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/os/alpine/alpine-ops.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_icZ1" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_IDPb"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes/os/alpine/alpine-lbu"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Alpine local backup</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes/os/alpine/alpine-pkgs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Alpine 包维护</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Rbtr thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tips" class="table-of-contents__link toc-highlight">Tips</a></li><li><a href="#bash" class="table-of-contents__link toc-highlight">bash</a></li><li><a href="#替换-apk-仓库镜像" class="table-of-contents__link toc-highlight">替换 apk 仓库镜像</a></li><li><a href="#manpages" class="table-of-contents__link toc-highlight">manpages</a></li><li><a href="#基础运维" class="table-of-contents__link toc-highlight">基础运维</a></li><li><a href="#系统运维" class="table-of-contents__link toc-highlight">系统运维</a></li><li><a href="#硬件运维" class="table-of-contents__link toc-highlight">硬件运维</a></li><li><a href="#setup-disk" class="table-of-contents__link toc-highlight">setup-disk</a></li><li><a href="#本地仓库" class="table-of-contents__link toc-highlight">本地仓库</a></li><li><a href="#容器" class="table-of-contents__link toc-highlight">容器</a></li><li><a href="#磁盘扩展" class="table-of-contents__link toc-highlight">磁盘扩展</a></li><li><a href="#udev" class="table-of-contents__link toc-highlight">udev</a></li><li><a href="#zfs" class="table-of-contents__link toc-highlight">zfs</a><ul><li><a href="#uninstall-zfs" class="table-of-contents__link toc-highlight">uninstall zfs</a></li></ul></li><li><a href="#btrfs" class="table-of-contents__link toc-highlight">btrfs</a><ul><li><a href="#failed-to-read-the-system-array" class="table-of-contents__link toc-highlight">failed to read the system array</a></li></ul></li><li><a href="#networking" class="table-of-contents__link toc-highlight">networking</a></li><li><a href="#network-benchmark" class="table-of-contents__link toc-highlight">network benchmark</a></li><li><a href="#init" class="table-of-contents__link toc-highlight">init</a></li><li><a href="#iscsi" class="table-of-contents__link toc-highlight">iscsi</a></li><li><a href="#stress" class="table-of-contents__link toc-highlight">stress</a></li><li><a href="#disk" class="table-of-contents__link toc-highlight">disk</a></li><li><a href="#qemu" class="table-of-contents__link toc-highlight">QEMU</a><ul><li><a href="#kvm" class="table-of-contents__link toc-highlight">kvm</a></li><li><a href="#virtual-disk" class="table-of-contents__link toc-highlight">virtual-disk</a></li></ul></li><li><a href="#ftp" class="table-of-contents__link toc-highlight">ftp</a></li><li><a href="#lvm" class="table-of-contents__link toc-highlight">lvm</a></li><li><a href="#libguestfs" class="table-of-contents__link toc-highlight">libguestfs</a></li><li><a href="#acf" class="table-of-contents__link toc-highlight">acf</a></li><li><a href="#crond" class="table-of-contents__link toc-highlight">crond</a></li><li><a href="#wireguard" class="table-of-contents__link toc-highlight">wireguard</a></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#ip-ioctl-0x8913-failed-no-such-device" class="table-of-contents__link toc-highlight">ip: ioctl 0x8913 failed: no such device</a></li><li><a href="#恢复网卡名字" class="table-of-contents__link toc-highlight">恢复网卡名字</a></li><li><a href="#文件系统变成了只读" class="table-of-contents__link toc-highlight">文件系统变成了只读</a></li><li><a href="#find-sysmodulepcc_cpufreq" class="table-of-contents__link toc-highlight">find: /sys/module/pcc_cpufreq</a></li><li><a href="#traps-rc-status3854-general-protection" class="table-of-contents__link toc-highlight">traps: rc-status3854 general protection</a></li><li><a href="#ip-rtnetlink-answers-file-exists" class="table-of-contents__link toc-highlight">ip: RTNETLINK answers: File exists</a></li><li><a href="#grsec-time-set-by-sbinhwclockhwclock2863" class="table-of-contents__link toc-highlight">grsec: time set by /sbin/hwclockhwclock:2863</a></li><li><a href="#node-docker-seg-fault" class="table-of-contents__link toc-highlight">node docker seg fault</a></li><li><a href="#php-下-iconv-有问题" class="table-of-contents__link toc-highlight">PHP 下 iconv 有问题</a></li><li><a href="#rc-status-sysinit-异常" class="table-of-contents__link toc-highlight">rc-status sysinit 异常</a></li><li><a href="#启动分区修复" class="table-of-contents__link toc-highlight">启动分区修复</a></li><li><a href="#tbd" class="table-of-contents__link toc-highlight">TBD</a></li></ul></li><li><a href="#install-utmpwtmp" class="table-of-contents__link toc-highlight">install utmp/wtmp</a></li><li><a href="#ntpd" class="table-of-contents__link toc-highlight">ntpd</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/notes/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--light_HlbN footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--dark__4Lo footer__logo"></div><div class="footer__copyright">Copyright © 1992-2022 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2022-09-22 04:38</div></div></div></footer></div>
<script src="/assets/js/runtime~main.07b4d16f.js"></script>
<script src="/assets/js/main.92dfd685.js"></script>
</body>
</html>