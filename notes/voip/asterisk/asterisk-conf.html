<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-voip/asterisk/asterisk-conf">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Wener Live &amp; Life RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Wener Live &amp; Life Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Wener Live &amp; Life" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"><title data-rh="true">Asterisk 配置 | Wener Live &amp; Life</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wener.me/notes/voip/asterisk/asterisk-conf"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Asterisk 配置 | Wener Live &amp; Life"><meta data-rh="true" name="description" content="目录"><meta data-rh="true" property="og:description" content="目录"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wener.me/notes/voip/asterisk/asterisk-conf"><link data-rh="true" rel="alternate" href="https://wener.me/notes/voip/asterisk/asterisk-conf" hreflang="en"><link data-rh="true" rel="alternate" href="https://wener.me/notes/voip/asterisk/asterisk-conf" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://37P8DMWBKF-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a5b87add.css">
<link rel="preload" href="/assets/js/runtime~main.07b4d16f.js" as="script">
<link rel="preload" href="/assets/js/main.92dfd685.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_WawS">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--light_HlbN"><img src="/img/wener-logo-head.svg" alt="Wener Logo" class="themedImage_sWQn themedImage--dark__4Lo"></div><b class="navbar__title text--truncate">Wener</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/notes">笔记</a><a class="navbar__item navbar__link" href="/story">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenerme/wener" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_N_jk colorModeToggle_wwB5"><button class="clean-btn toggleButton_gcuK toggleButtonDisabled_AJhd" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_Eiwc"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_a3UO"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_Ymm7"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_uXRe docsWrapper_AGYY"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_aXSw" type="button"></button><div class="docPage_Q_rn"><aside class="theme-doc-sidebar-container docSidebarContainer_GlFK"><div class="sidebar_ogDj"><nav class="menu thin-scrollbar menu_fqy9"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/notes">笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/algorithm">算法</a><button aria-label="Toggle the collapsible sidebar category &#x27;算法&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/blockchain">区块链</a><button aria-label="Toggle the collapsible sidebar category &#x27;区块链&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/culture/anime/anime-awesome">culture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/db">数据库</a><button aria-label="Toggle the collapsible sidebar category &#x27;数据库&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/design/ip">design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/dev/build/bazel">dev</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/devops">DevOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;DevOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/economics">经济学</a><button aria-label="Toggle the collapsible sidebar category &#x27;经济学&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/elastic/elasticsearch-v2">elastic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/electrical/multimeter">electrical</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/embedded/embedded-awesome">embedded</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/evolve">自我成长</a><button aria-label="Toggle the collapsible sidebar category &#x27;自我成长&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/game/mhr">game</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/hardware/arm">hardware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/healthcare">健康</a><button aria-label="Toggle the collapsible sidebar category &#x27;健康&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/howto/network/dns-prevent-spoofing">howto</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/java">Java</a><button aria-label="Toggle the collapsible sidebar category &#x27;Java&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/languages">语言</a><button aria-label="Toggle the collapsible sidebar category &#x27;语言&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/mgmt/pm-awesome">mgmt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/network/application/dns">network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/ops/admin/augeas">ops</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/os/alpine">os</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/photography/camera-awesome">photography</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/platform">平台</a><button aria-label="Toggle the collapsible sidebar category &#x27;平台&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/queue">Queue</a><button aria-label="Toggle the collapsible sidebar category &#x27;Queue&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/reference/cook/glossary">reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/security/acme-awesome">security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/notes/service/analytics/analytics-awesome">service</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/tool">工具</a><button aria-label="Toggle the collapsible sidebar category &#x27;工具&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/notes/voip">VoIP</a><button aria-label="Toggle the collapsible sidebar category &#x27;VoIP&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/notes/voip/asterisk">Asterisk</a><button aria-label="Toggle the collapsible sidebar category &#x27;Asterisk&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-agi">Asterisk AGI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-ami">Asterisk AMI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/air">ARI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-awesome">Asterisk Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-build">Build Asterisk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-cdr">Asterisk CDR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/channel">Asterisk 通道</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/codec">Asterisk 编码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/notes/voip/asterisk/asterisk-conf">Asterisk 配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-debian">Asterisk Debian</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/the-definitive-guide-4th">Asterisk 权威指南,第四版</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/dev">开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-dialplain">拨号计划</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/faq">常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-glossary">Asterisk 词汇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-inside">Asterisk Inside</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-ldap">Asterisk LDAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-log">Asterisk Log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-moduels">Asterisk Modules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-network">Asterisk Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-qmi">Asterisk QMI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/reference">参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-troubleshoot">Asterisk 故障排查</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/version">Asterisk 版本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/asterisk-webrtc">Asterisk WebRTC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/chan_dahdi">DAHDi Channel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/chan_dongle">chan_dongle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/chan_extra">chan_extra</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/chan_iax">chan_iax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/chan_pjsip">chan_pjsip</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/chan_sip">chan_sip</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/dahdi">DAHDI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/iax">IAX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/res_http">res_http</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/res_phoneprov">phoneprov</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/res_resolver_unbound">res_resolver_unbound</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/asterisk/res_sorcery">res_sorcery</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/voip/dev/pjsip">dev</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/fonoster">fonoster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/freepbx">FreePBX</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/notes/voip/freeswitch">FreeSWITCH</a><button aria-label="Toggle the collapsible sidebar category &#x27;FreeSWITCH&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/hardware">硬件设备</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/openvox-asterisk">OpenVox Asterisk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/openvox">OpenVox</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/notes/voip/sip/linphone">sip</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/voip-awesome">VoIP Awesome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/voip-faq">VoIP FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/notes/voip/glossary">词汇表</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/notes/web">Web</a><button aria-label="Toggle the collapsible sidebar category &#x27;Web&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_BKoE"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_EYvA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_RaEK"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nrhp"><div class="docItemContainer_EkVX"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_GKCt" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OL5o"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/voip"><span itemprop="name">VoIP</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/notes/voip/asterisk"><span itemprop="name">Asterisk</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Asterisk 配置</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_oqr9 theme-doc-toc-mobile tocMobile_5aMT"><button type="button" class="clean-btn tocCollapsibleButton_CjyO">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Asterisk 配置</h1></header><h2 id="目录">目录</h2><ul><li><a href="https://wiki.asterisk.org/wiki/display/AST/Directory+and+File+Structure">文件和目录结构</a></li><li><code>astetcdir =&gt; /etc/asterisk</code><ul><li>用于存储配置文件</li><li>一般为 <code>.conf</code> 但也包含 <code>.lua</code> 和 <code>.ael</code></li></ul></li><li><code>astmoddir =&gt; /usr/lib/asterisk/modules</code><ul><li>模块目录</li></ul></li><li><code>astvarlibdir =&gt; /var/lib/asterisk</code><ul><li>运行时生成的目录</li></ul></li><li><code>astdbdir =&gt; /var/lib/asterisk</code><ul><li>存储内部数据库</li><li><a href="https://wiki.asterisk.org/wiki/display/AST/SQLite3+astdb+back-end">astdb.sqlite3</a></li></ul></li><li><code>astkeydir =&gt; /var/lib/asterisk</code><ul><li>存储密钥，生成 <code>keys</code> 子目录 - 可能会锁定</li></ul></li><li><code>astdatadir =&gt; /var/lib/asterisk</code><ul><li>系统数据目录</li><li>sounds 存储声音</li></ul></li><li><code>astagidir =&gt; /var/lib/asterisk/agi-bin</code><ul><li>存储 AGI - Asterisk Gateway Interface</li></ul></li><li><code>astspooldir =&gt; /var/spool/asterisk</code><ul><li>存储各种模块的 spool 文件</li><li>常见的子目录<ul><li>dictate</li><li>meetme</li><li>monitor</li><li>outgoing</li><li>recording</li><li>system</li><li>tmp</li><li>voicemail</li></ul></li></ul></li><li><code>astrundir =&gt; /var/run/asterisk</code><ul><li>运行目录</li><li>存储 <code>asterisk.ctl</code> <code>asterisk.pid</code></li></ul></li><li><code>astlogdir =&gt; /var/log/asterisk</code><ul><li>存储<a href="https://wiki.asterisk.org/wiki/display/AST/Logging">日志</a></li><li>/var/log/asterisk/message</li><li>/var/log/asterisk/queue</li></ul></li><li><code>astsbindir =&gt; /usr/sbin</code><ul><li>系统可执行文件</li></ul></li></ul><h2 id="配置">配置</h2><h3 id="配置文件">配置文件</h3><ul><li>目录解释</li></ul><p><a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+Configuration+Files">https://wiki.asterisk.org/wiki/display/AST/Asterisk+Configuration+Files</a>
execincludes=yes</p><p>asterisk.conf
modules.conf</p><pre><code class="language-conf">[section-name]
setting=true
#include otherconfig.conf      ; include another configuration file
#include my_other_files/*.conf ; include all .conf files in the subdirectory my_other_files
#tryinclude mytest/*.conf
#exec otherprogram             ; include output of otherprogram


#exec /usr/bin/curl -s http://example.com/mystuff &gt; /etc/asterisk/mystuff
#include mystuff
</code></pre><p><a href="https://github.com/asterisk/asterisk/tree/master/configs/samples">https://github.com/asterisk/asterisk/tree/master/configs/samples</a>
<a href="https://github.com/asterisk/asterisk/tree/master/configs/basic-pbx">https://github.com/asterisk/asterisk/tree/master/configs/basic-pbx</a></p><p><a href="https://github.com/asterisk/asterisk/tree/master/contrib/ast-db-manage">https://github.com/asterisk/asterisk/tree/master/contrib/ast-db-manage</a></p><pre><code class="language-bash">docker run --rm -it --name ast wener/asterisk:full

# 拷贝出配置文件
docker cp ast:/etc/asterisk etc
docker cp ast:/etc/dahdi etc
# 拷贝出录音文件
docker cp ast:/var/lib/asterisk/moh var/lib/asterisk/moh
docker cp ast:/var/lib/asterisk/sounds var/lib/asterisk/sounds

# 拷贝完成后可以使用主机上的配置启动 - 并添加宿主主机目录和 DB
# 16.6 - PG 12 有兼容问题
# https://github.com/asterisk/asterisk/commit/52ade18420b346449dff40d6bdb071444cf29e2d
docker run -d \
  -p 5432:5432 -v $PWD/pg:/var/lib/postgresql/data \
  -e POSTGRES_USER=ast -e POSTGRES_PASSWORD=ast -e POSTGRES_DB=ast \
  --name ast-pg postgres:11-alpine

docker run --rm -it \
  -v $PWD/etc/asterisk:/etc/asterisk \
  -v $PWD/etc/dahdi:/etc/dahdi \
  -v $PWD:/host \
  --link ast-pg:ast-pg \
  --name ast wener/asterisk:full

# 启动服务 - 可以了解各种命令
asterisk -cvvv
</code></pre><pre><code class="language-bash"># 所有加载的模块 - 可以逐步了解各个模块
module show

core restart

# pg 相关模块 - cdr cel config
module show like pgsql
</code></pre><h2 id="asteriskconf">asterisk.conf</h2><p>核心配置文件</p><pre><code class="language-conf"># 目录配置
[directories](!)
# 配置目录
astetcdir =&gt; /etc/asterisk
# 模块目录
astmoddir =&gt; /usr/lib/asterisk/modules
astvarlibdir =&gt; /var/lib/asterisk
astdbdir =&gt; /var/lib/asterisk
astkeydir =&gt; /var/lib/asterisk
astdatadir =&gt; /var/lib/asterisk
astagidir =&gt; /var/lib/asterisk/agi-bin
astspooldir =&gt; /var/spool/asterisk
astrundir =&gt; /var/run/asterisk
astlogdir =&gt; /var/log/asterisk
astsbindir =&gt; /usr/sbin
</code></pre><h2 id="modulesconf">modules.conf</h2><p>模块配置</p><pre><code class="language-conf">[modules]
; 是否自动加载 - 初学建议自动加载，当配置确定后建议添加 noload
autoload=yes

; 必须加载
require = chan_pjsip.so

; 加载
load =&gt; res_musiconhold.so

; 不加载
noload =&gt; chan_alsa.so
;noload =&gt; chan_oss.so
noload =&gt; chan_console.so
</code></pre><h3 id="示例">示例</h3><pre><code class="language-conf">[modules]
; 以前需要 preload - 现在不需要了
load =&gt; res_config_pgsql.so
load =&gt; res_realtime.so

autoload=yes

; 使用 pg 数据库 - res_pgsql.conf cdr_pgsql.conf cel_pgsql.conf
noload =&gt; res_odbc.so
noload =&gt; res_config_odbc.so
noload =&gt; res_config_sqlite3.so
noload =&gt; res_odbc_transaction.so

noload =&gt; func_odbc.so

noload =&gt; cel_tds.so
noload =&gt; cel_odbc.so
noload =&gt; cel_sqlite3_custom.so
noload =&gt; cel_custom.so

noload =&gt; cdr_tds.so
noload =&gt; cdr_sqlite3_custom.so
noload =&gt; cdr_odbc.so
noload =&gt; cdr_mysql.so
noload =&gt; cdr_adaptive_odbc.so
noload =&gt; cdr_csv.so
noload =&gt; cdr_custom.so

; 使用 pgsip
noload =&gt; chan_mobile.so
noload =&gt; chan_dongle.so
noload =&gt; chan_skinny.so
noload =&gt; chan_phone.so
noload =&gt; chan_unistim.so
noload =&gt; chan_mgcp.so
noload =&gt; chan_sip.so

; 推荐使用 alsa - docker 下只能使用 oss
noload =&gt; chan_console.so
noload =&gt; chan_alsa.so
; 如果运行环境并不能连接耳机等，可以考虑直接关闭
noload =&gt; chan_oss.so

; DAHDi
noload =&gt; chan_dahdi.so
noload =&gt; codec_dahdi.so
noload =&gt; res_timing_dahdi

; 不需要 pbx_*
noload =&gt; pbx_dundi.so
noload =&gt; pbx_gtkconsole.so
noload =&gt; pbx_ael.so

noload =&gt; res_hep_rtcp.so
noload =&gt; res_hep_pjsip.so

; 不需要的一些模块
noload =&gt; res_phoneprov.so
noload =&gt; res_pjsip_phoneprov_provider.so
noload =&gt; res_smdi.so
</code></pre><h2 id="res_pgsqlconf">res_pgsql.conf</h2><pre><code class="language-conf">[general]
dbhost=ast-pg
dbport=5432
dbname=ast
dbuser=ast
dbpass=ast
; 如果配置列不存在
; warn 警告 createclose 创建尽量类似的列 createchar 只创建 char 列
requirements=warn
</code></pre><h2 id="calender">calender</h2><p><a href="https://www.voip-info.org/asterisk-config-alsaconf/">https://www.voip-info.org/asterisk-config-alsaconf/</a>
alsa.conf</p><h2 id="cdr">cdr</h2><ul><li>呼叫详细记录</li></ul><h3 id="cdrconf">cdr.conf</h3><pre><code class="language-conf">[general]
enable=yes

; 是否记录未应答
unanswered = yes

; 是否记录被拥塞呼叫
congestion = yes

; 是否在 h/hangup 之前结束 CDR - 默认等待所有扩展执行完成
endbeforehexten=no

; 日志记录使用 billsec 字段 - 挂断时间减应答时间 - 秒级
; 系统内部使用 微秒和秒 - 开启该配置会影响微秒计算 round up - 一般使用影响不大
;initiatedseconds=no

; 批量 - 默认未开启
; 在 kill -9 可能丢失数据
;batch=no

; 批大小
;size=100

; 批缓冲最大时间 - 秒 - 默认 5 分钟
;time=300

; 默认在调度线程提交 - 如果批较大设置为 no 则在在额外线程进行提交
;scheduleronly=no

; 停止服务时安全写入日志 - cdr status 可以看当前的提交情况
;safeshutdown=yes
</code></pre><h3 id="cdr_managerconf">cdr_manager.conf</h3><pre><code class="language-conf">[general]
enabled = no

; 定义额外的包含在管理事件中的 KV 值
; &quot;varname =&gt; label&quot; 映射为 &quot;label: ${CDR(varname)}&quot;
;[mappings]
;rate =&gt; Rate
;carrier =&gt; Carrier
</code></pre><h3 id="cdr_pgsqlconf">cdr_pgsql.conf</h3><p>CDR 记录到 PG 数据库</p><pre><code class="language-conf">hostname=db
port=5432
dbname=ast
password=ast
user=ast
appname=asterisk    ; Postgres application_name support (optional). Whitespace not allowed.
table=cdr               ; 记录的表名
;encoding=LATIN9      ; 日志编码
;timezone=UTC           ; 时区
</code></pre><h3 id="cdr_beanstalkdconf">cdr_beanstalkd.conf</h3><p><a href="https://github.com/beanstalkd/beanstalkd">https://github.com/beanstalkd/beanstalkd</a></p><p>Simple and fast general purpose work queue.</p><pre><code class="language-conf">[general]
enabled = yes

host = 127.0.0.1
port = 11300
tube = asterisk-cdr ; 队列
priority = 99       ; 默认优先级 - 在存在多个 asterisk 时有用
</code></pre><h2 id="cel">cel</h2><h3 id="celconf">cel.conf</h3><pre><code class="language-conf">[general]
; 开启
enable=yes

; 应用事件跟踪
; 逗号分割的应用列表，例如 dial,park
; all 标示全部开启，可能影响性能
apps=dial,park

; 事件跟踪
; 逗号分割的事件列表
;
;  ALL              -- Generate entries on all events
;  CHAN_START       -- The time a channel was created
;  CHAN_END         -- The time a channel was terminated
;  ANSWER           -- The time a channel was answered (ie, phone taken off-hook)
;  HANGUP           -- The time at which a hangup occurred
;  BRIDGE_ENTER       -- The time a channel was connected into a conference room
;  BRIDGE_EXIT        -- The time a channel was removed from a conference room
;  APP_START        -- The time a tracked application was started
;  APP_END          -- the time a tracked application ended
;  PARK_START       -- The time a call was parked
;  PARK_END         -- Unpark event
;  BLINDTRANSFER    -- When a blind transfer is initiated
;  ATTENDEDTRANSFER -- When an attended transfer is initiated
;  PICKUP           -- This channel picked up the specified channel
;  FORWARD          -- This channel is being forwarded somewhere else
;  LINKEDID_END     -- The last channel with the given linkedid is retired
;  USER_DEFINED     -- Triggered from the dialplan, and has a name given by the
;                      user
;  LOCAL_OPTIMIZE   -- A local channel pair is optimizing away.
;
;events=APP_START,CHAN_START,CHAN_END,ANSWER,HANGUP,BRIDGE_ENTER,BRIDGE_EXIT
events=ALL

; 日期格式
; strftime 支持的格式
;
; 例如: &quot;%F %T&quot; &quot;2009-06-23 17:02:35&quot;
; 不指定默认为 &quot;&lt;seconds&gt;.&lt;microseconds&gt;&quot; - microseconds 长度固定 6 有前缀0
;
;dateformat = %F %T

; Asterisk Manager Interface (AMI) 事件记录
[manager]
enabled=yes

; 显示 USER_DEFINED 事件类型而不是直接放事件名字
; 可以使用 UserDefType 头指定
show_user_defined=yes

;
; RADIUS CEL Backend
;
[radius]
;
; Log date/time in GMT
;usegmtime=yes
;
; Set this to the location of the radiusclient-ng configuration file
; The default is /etc/radiusclient-ng/radiusclient.conf
;radiuscfg =&gt; /usr/local/etc/radiusclient-ng/radiusclient.conf
;
</code></pre><h3 id="cel_pgsqlconf">cel_pgsql.conf</h3><pre><code class="language-conf">[global]
; 默认只记录事件名字，开启后会添加 USER_DEFINED 事件类型
show_user_defined=yes

; 记录 GMT 格式的日期事件 - 默认 no
;usegmtime=yes

hostname=ast-pg
port=5432
dbname=ast
password=ast
user=ast
table=cel
schema=public
</code></pre><h2 id="sorceryconf">sorcery.conf</h2><ul><li>配置和数据库映射</li></ul><pre><code class="language-conf">; 外部 MWI mailbox 映射 - 持久化消息数量
;[res_mwi_external]
;mailboxes=astdb,mwi_external

[res_pjsip]
auth        =realtime,ps_auths
aor         =realtime,ps_aors
contact     =realtime,ps_contacts
domain_alias=realtime,ps_domain_aliases
endpoint    =realtime,ps_endpoints
global      =realtime,ps_globals
system      =realtime,ps_systems
transport   =realtime,ps_transports

; ps_resource_list
; ps_subscription_persistence

; PJSIP 配置映射

[res_pjsip_endpoint_identifier_ip]
identify              =realtime,ps_endpoint_id_ips

[res_pjsip_outbound_publish]
outbound-publish      =realtime,ps_outbound_publishes

[res_pjsip_pubsub]
inbound-publication   =realtime,ps_inbound_publications

[res_pjsip_outbound_registration]
registration          =realtime,ps_registrations

[res_pjsip_publish_asterisk]
asterisk-publication  =realtime,ps_asterisk_publications
</code></pre><h2 id="extconfigconf">extconfig.conf</h2><ul><li>静态和实时外部配置</li><li><a href="https://wiki.asterisk.org/wiki/display/AST/Realtime+Database+Configuration">实时数据库配置</a></li></ul><pre><code class="language-conf">[settings]
; 静态文件配置映射
; file.conf =&gt; driver,database[,table[,priority]]

; 配置文件 =&gt; 数据库驱动,数据库[,表名 = 默认为文件名]
;queues.conf =&gt; odbc,asterisk,ast_config
;extensions.conf =&gt; sqlite,asterisk,ast_config

; 自定义数据库
; staffs  =&gt; pgsql,ast
; logs    =&gt; pgsql,ast

; conf
queues =&gt; pgsql,ast

; pjsip
ps_aors                     =&gt; pgsql,ast
ps_asterisk_publications    =&gt; pgsql,ast
ps_auths                    =&gt; pgsql,ast
ps_contacts                 =&gt; pgsql,ast
ps_domain_aliases           =&gt; pgsql,ast
ps_endpoint_id_ips          =&gt; pgsql,ast
ps_endpoints                =&gt; pgsql,ast
ps_globals                  =&gt; pgsql,ast
ps_inbound_publications     =&gt; pgsql,ast
ps_outbound_publishes       =&gt; pgsql,ast
ps_registrations            =&gt; pgsql,ast
ps_resource_list            =&gt; pgsql,ast
ps_subscription_persistence =&gt; pgsql,ast
ps_systems                  =&gt; pgsql,ast
ps_transports               =&gt; pgsql,ast
</code></pre><h2 id="httpconf">http.conf</h2><ul><li>内置的 HTTP 服务器</li><li>静态 HTTP 位于 <code>/var/lib/asterisk/static-http</code></li></ul><pre><code class="language-conf">[general]
; Server 头和一些请求的消息体里包含
servername=Asterisk

; 启用
; 影响 manager/rawman/mxml 访问 - manager.conf
enabled=yes

bindaddr=127.0.0.1  ; 绑定地址
bindport=8088       ; 端口 - 默认 8080

;prefix=asterisk    ; 路径前缀
;sessionlimit=100   ; 会话数 - 默认 100
; 会话不活跃关闭的等待事件 ms 单位
;session_inactivity=30000
; Keep Alive 时间 ms
;session_keep_alive=15000

; 启用静态文件服务
enablestatic=yes

; 重定向
;redirect = / /static/config/index.html

; 文件上传映射
;[post_mappings]
; 访问需要合法的 AMI mansession_id cookie
;
; 上传到 /uploads 的文件会存放在 /var/lib/asterisk/uploads/
;uploads = /var/lib/asterisk/uploads/
</code></pre><h2 id="ariconf">ari.conf</h2><pre><code class="language-conf">[general]
; 允许访问的 origin
allowed_origins=http://ari.asterisk.org
; 启用 ARI
enabled = yes
;pretty = no        ; 返回结果格式化
;allowed_origins =  ; CORS 选项
;auth_realm =       ; 鉴权的域 - 默认 Asterisk
; 默认写超时 - 默认 100ms
;websocket_write_timeout = 100
; 发起呼叫时显示指定变量
;channelvars = var1,var2,var3

; 添加一个用户
[admin]
type = user
read_only = no      ; 只读
password = admin    ; 密码
; 明文密码 - 设置为 crypt 可以使用 echo -n admin | mkpasswd -m sha-512 -P 0 生成
password_format = plain
</code></pre><h2 id="pjsip">pjsip</h2><h3 id="pjsipconf">pjsip.conf</h3><pre><code class="language-conf">; Anonymous Calls
;
; By default anonymous inbound calls via PJSIP are not allowed. If you want to
; route anonymous calls you&#x27;ll need to define an endpoint named &quot;anonymous&quot;.
; res_pjsip_endpoint_identifier_anonymous.so handles that functionality so it
; must be loaded. It is not recommended to accept anonymous calls.

[transport-ws]
type=transport
protocol=ws
bind=0.0.0.0

</code></pre><h2 id="extension">extension</h2><h3 id="extensionsconf">extensions.conf</h3><pre><code class="language-conf"></code></pre><h2 id="pg">PG</h2><h3 id="cdrcel">cdr/cel</h3><pre><code class="language-sql">CREATE TABLE cdr
(
  id          serial primary key,
  accountcode text,
  src         text,
  src         text,
  dst         text,
  dcontext    text,
  clid        text,
  channel     text,
  dstchannel  text,
  lastapp     text,
  lastdata    text,
  start       TIMESTAMP WITHOUT TIME ZONE,
  answer      TIMESTAMP WITHOUT TIME ZONE,
  &quot;end&quot;       TIMESTAMP WITHOUT TIME ZONE,
  duration    INTEGER,
  billsec     INTEGER,
  disposition text,
  amaflags    text,
  userfield   text,
  uniqueid    text,
  linkedid    text,
  peeraccount text,
  sequence    INTEGER
);

CREATE TABLE cel
(
  id          serial primary key,
  eventtype   text      NOT NULL,
  eventtime   timestamp NOT NULL,
  userdeftype text      NOT NULL,
  cid_name    text      NOT NULL,
  cid_num     text      NOT NULL,
  cid_ani     text      NOT NULL,
  cid_rdnis   text      NOT NULL,
  cid_dnid    text      NOT NULL,
  exten       text      NOT NULL,
  context     text      NOT NULL,
  channame    text      NOT NULL,
  appname     text      NOT NULL,
  appdata     text      NOT NULL,
  amaflags    int       NOT NULL,
  accountcode text      NOT NULL,
  peeraccount text      NOT NULL,
  uniqueid    text      NOT NULL,
  linkedid    text      NOT NULL,
  userfield   text      NOT NULL,
  peer        text      NOT NULL
);
</code></pre><h2 id="faq">FAQ</h2><h3 id="dtmfmode">dtmfmode</h3><p>rfc2833
rfc4733</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wenerme/wener/edit/master/notes/voip/asterisk/asterisk-conf.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_icZ1" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_IDPb"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/notes/voip/asterisk/codec"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Asterisk 编码</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/notes/voip/asterisk/asterisk-debian"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Asterisk Debian</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Rbtr thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#目录" class="table-of-contents__link toc-highlight">目录</a></li><li><a href="#配置" class="table-of-contents__link toc-highlight">配置</a><ul><li><a href="#配置文件" class="table-of-contents__link toc-highlight">配置文件</a></li></ul></li><li><a href="#asteriskconf" class="table-of-contents__link toc-highlight">asterisk.conf</a></li><li><a href="#modulesconf" class="table-of-contents__link toc-highlight">modules.conf</a><ul><li><a href="#示例" class="table-of-contents__link toc-highlight">示例</a></li></ul></li><li><a href="#res_pgsqlconf" class="table-of-contents__link toc-highlight">res_pgsql.conf</a></li><li><a href="#calender" class="table-of-contents__link toc-highlight">calender</a></li><li><a href="#cdr" class="table-of-contents__link toc-highlight">cdr</a><ul><li><a href="#cdrconf" class="table-of-contents__link toc-highlight">cdr.conf</a></li><li><a href="#cdr_managerconf" class="table-of-contents__link toc-highlight">cdr_manager.conf</a></li><li><a href="#cdr_pgsqlconf" class="table-of-contents__link toc-highlight">cdr_pgsql.conf</a></li><li><a href="#cdr_beanstalkdconf" class="table-of-contents__link toc-highlight">cdr_beanstalkd.conf</a></li></ul></li><li><a href="#cel" class="table-of-contents__link toc-highlight">cel</a><ul><li><a href="#celconf" class="table-of-contents__link toc-highlight">cel.conf</a></li><li><a href="#cel_pgsqlconf" class="table-of-contents__link toc-highlight">cel_pgsql.conf</a></li></ul></li><li><a href="#sorceryconf" class="table-of-contents__link toc-highlight">sorcery.conf</a></li><li><a href="#extconfigconf" class="table-of-contents__link toc-highlight">extconfig.conf</a></li><li><a href="#httpconf" class="table-of-contents__link toc-highlight">http.conf</a></li><li><a href="#ariconf" class="table-of-contents__link toc-highlight">ari.conf</a></li><li><a href="#pjsip" class="table-of-contents__link toc-highlight">pjsip</a><ul><li><a href="#pjsipconf" class="table-of-contents__link toc-highlight">pjsip.conf</a></li></ul></li><li><a href="#extension" class="table-of-contents__link toc-highlight">extension</a><ul><li><a href="#extensionsconf" class="table-of-contents__link toc-highlight">extensions.conf</a></li></ul></li><li><a href="#pg" class="table-of-contents__link toc-highlight">PG</a><ul><li><a href="#cdrcel" class="table-of-contents__link toc-highlight">cdr/cel</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href="#dtmfmode" class="table-of-contents__link toc-highlight">dtmfmode</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/notes/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/os/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip">VoIP</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item">
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wener/actions" title="wenerme/wener - ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://github.com/wenerme/wener/workflows/Build/badge.svg">
                </a>
              </div>
              </li><li class="footer__item"><a href="https://apis.wener.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wener&#x27;s Apis<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_pUOn"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/story">Blog</a></li><li class="footer__item"><a href="https://github.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/wenerme" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--light_HlbN footer__logo"><img src="/img/wener-logo.svg" alt="Wener Site" class="themedImage_sWQn themedImage--dark__4Lo footer__logo"></div><div class="footer__copyright">Copyright © 1992-2022 Wener - <img alt="cc-by-sa-4.0" src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg"> - Build @2022-09-22 04:38</div></div></div></footer></div>
<script src="/assets/js/runtime~main.07b4d16f.js"></script>
<script src="/assets/js/main.92dfd685.js"></script>
</body>
</html>