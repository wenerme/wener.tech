<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1")</script>
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30404720-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30404720-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-30404720-1")</script>

<title data-react-helmet="true">开发</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Wener Live &amp; Life · Passion I&#x27;ve found"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="# Dev"><meta data-react-helmet="true" property="og:description" content="# Dev"><meta data-react-helmet="true" property="og:url" content="https://wener.me/notes/voip/asterisk/dev">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.cb15e1ce.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/wener-logo-head.svg" alt="Wener Logo"><strong>Wener</strong></a><a class="navbar__item navbar__link" href="/notes/java/java">笔记</a><a class="navbar__item navbar__link" href="/blog">故事</a><a class="navbar__item navbar__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a><a class="navbar__item navbar__link" href="/notes/tool/network/ip-lookup">工具</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/wenerme/wener">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_3gvz"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_2Zd- moon_Tgrt"></span></div><div class="react-toggle-track-x"><span class="toggle_2Zd- sun_38Cb"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/wener-logo-head.svg" alt="Wener Logo"><strong>Wener</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/java">笔记</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">故事</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/wenerme/wener">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/dns-prevent-spoofing">指南</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/tool/network/ip-lookup">工具</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_NanV"><div class="docSidebarContainer_1igf"><div class="sidebar_291D"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2ovr" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/java">Java</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/maven">Maven</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">版本</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/version/version">Java版本</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/version/java-11">Java 11</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/version/java-10">Java 10</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/version/java-9">Java 9</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/version/java-8">Java 8</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/version/java-7">Java 7</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/version/java-6">Java 6</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Spring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/spring">Spring</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/boot">Spring Boot</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/data">Spring Data</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/data-rest">Spring Data REST</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/security">Spring Security</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/security-oauth2">Spring Security OAuth2</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/cloud">Spring Cloud</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/spring/releases">发布历史</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/library/productive">生产力</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/library/hazelcast">Hazelcast</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/library/hibernate-orm">Hibernate</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/library/hibernate-enver">Hibernate Enver</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/library/quarkus">Quarkus</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/java/library/guava">Guava</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">前端技术</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">框架</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/nextjs">NextJS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/nextjs-version">NextJS 版本历史</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/nextjs-cookbook">NextJS Cookbook</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/electron">Electron</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/vue">Vue</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/angular">Angular</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/riot">Riot</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/web/framework/prisma">Prisma</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">语言</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/languages/languages">语言</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/parsing">语法解析</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/peg">PEG</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/pegjs">PEG.js</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/php">PHP</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/zig">Zig</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/go/go-intro">Golang</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/go/go-template">Go 模板</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/go/go-pkg-net-rpc">Go net/rpc</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/go/go-kit">go-kit</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/lua/lua">Lua</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/languages/lua/lua-version">Lua 版本</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">开发运维</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/tracing/tracing">Tracing</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">指标监控</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/metrics">指标监控</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/prometheus">Prometheus</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/promql">PromQL</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/prometheus-exporter">Prometheus Exporter</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/statsd_exporter">statsd_exporter</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/prometheus-k8s">Prometheus K8S</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/prometheus-storage">Prometheus 存储</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/grafana">Grafana</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/thanos">Thanos</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/metrics/cortex">Cortex</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/microservices">Microservices</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/servicemesh">Service Mesh</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/linkerd">Linkerd</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/kuma">Kuma</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/consul">Consul</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/consul-conf">Consul 配置</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/consul-connect">Consule Connect Mesh</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/service/fabio">fabio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/web/nginx">Nginx</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/web/caddy">Caddy</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/web/traefik">Traefik</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">平台服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/xaas/db-schema">Tenant DB Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/xaas/paas/dokku">Dokku</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">AlpineLinux</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine">Alpine</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine-intro">Alpine 入门</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine-ops">Alpine 运维笔记</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine-pkgs">Alpine 包维护</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine-lbu">Alpine local backup</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine-boot">Alpin Boot</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine-version">版本历史</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/alpine/alpine-faq">Alpine FAQ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docker</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/docker/docker-intro">Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/docker/docker-network">Docker 网络</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/docker/docker-storage">Docker 存储</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/docker/docker-swarm">Docker Swarm</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/docker/docker-cookbook">Docker 常用服务</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/k8s-intro">Kubernates</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/k8s-dashboard">Kubernates 面板</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/k3s">K3S</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/k3d">K3S in Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/k8s-glossary">K8S 词汇表</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/helm-intro">HELM 包管理器</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/helm2">HELM2 - 不推荐</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/rancher-intro">Rancher UI</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/rancher-rke">RKE - 安装器</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/tool/kustomize">kustomize</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/tool/krew">krew</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">网络</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/network/k8s-network">Kubernates 网络</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/network/kong-ingress">Kong Ingress</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/network/nginx-ingress">Nginx Ingress</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/network/traefik-ingress">Traefik Ingress</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/network/metallb">MetalLB</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/network/flannel">Flannel</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/storage/k8s-storage">Kubernates 存储</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/storage/longhorn">Longhorn</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/storage/k8s-nfs">NFS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/storage/rook">Rook</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">平台</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/platform/knative-intro">Knative</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/platform/istio-intro">Istio 服务网格</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">应用</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/app/cert-manager">Cert Manager</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/app/k8s-consul">Consol</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/devops/kubernetes/app/harbor">Harbor</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">指南</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">运维</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/howto/ops/alpine-admin-ansible">如何通过 Ansible 来管理 AlpineLinux ？</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">网络</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/dns-prevent-spoofing">如何避免 DNS 污染且能正常访问国内域名？</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/tinc-get-started">如何部署 TINC 网络？</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/tinc-multi-path-failover">如何配置 TINC 实现多路容灾？</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/howto/network/tinc-transparency-proxy">如何基于 TINC 实现透明代理</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">系统管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/admin/htop">htop</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/admin/mosh">MOSH</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">基础设施</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/infra">基础设施</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/ansible">Ansible</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/ansible-awx">Ansible AWX</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/ansible-faq">ansible-faq</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/terraform">Terraform</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/terraform-provider">Terraform Provider</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/terraform-cookbook">Terraform 常用脚本</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/packer">Packer</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/infra/cloud-init">Cloud Init</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">虚拟化</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/virt">虚拟化</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/qemu-doc">QEMU 文档</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/qemu-monitor">QEMU监视器</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/qemu-version">QEMU Version</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/libvirt">Libvirt</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/libvirtd">Libvirt Daemon</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/libvirt-faq">Libvirt常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/virt/virsh">Virsh</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">启动</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/boot/syslinux">Syslinux</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/linux/boot/uboot">U-Boot</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">工具</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">网络</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/tool/network/ip-lookup">常用IP地址段查询</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">操作系统</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Darwin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/darwin/darwin">Darwin</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/darwin/macos">macOS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/darwin/brew">Brew</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Windows</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/windows/windows">Windows</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/windows/windows-dc">Windows 域控</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/os/windows/windows-faq">Windows FAQ</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">数据库</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/db/db">数据库</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">PostgreSQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/postgresql">PostgresSQL</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/datatype">数据类型</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/fts">PostgreSQL 全文检索</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/version">版本历史</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/faq">常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/postgresql-sql-faq">Pg SQL 常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/timescale">TimeScale</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/postgrest-hello">PostREST 入门部署</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/postgresql/hasura">Hasura</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">关系型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/mysql">MySQL</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/mysql-gtid">MySQL GTID</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/relational/sqlite">SQLite</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">文档型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/db/document/mongodb">MongoDB</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/document/rethinkdb">RethinkDB</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/document/couchdb">CouchDB</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">键值型</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/db/kv/kv">Key Value</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/kv/redis">Redis</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/kv/lmdb">LMDB</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/db/kv/leveldb">LevelDB</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">参考</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/reference/words">词汇对比</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">软件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/reference/software/saas">SaaS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/reference/software/glossary">开发词汇</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">用户增长</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/reference/growth/formula">增长相关公式</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/reference/growth/glossary">增长相关词汇</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">烹饪</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/reference/cook/glossary">烹饪词汇</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">网络</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">应用</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/application/dns">DNS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/application/http">HTTP</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/application/ssl">SSL</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">链路</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/link/wireless">无线网络</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/link/infiniband">InfiniBand</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">私有</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/private/intro">私有网络</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/private/tinc">Tinc</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/private/privoxy">Privoxy</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/private/privoxy-action">Privoxy Action</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/private/ipsec">IPSec</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/private/wireguard">WireGuard</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/private/vpn-faq">私有虚拟网络常见问题</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">工具</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/intro">网络相关工具集</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/bonding">Bonding</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/dnsmasq">dnsmasq</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/ifconfig">ifconfig</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/iproute2">IPRoute2</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/iptables">IPTables</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/mitmproxy">MitmProxy</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/nmap">NMap</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/powerdns">PowerDNS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/tool/wireshark">Wireshark</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/network/standard/ieee-802">IEEE 802</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/intro">Storage</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">块存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/block/raid">RAID</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/block/mdadm">mdadm</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/block/lvm">LVM</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">文件存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/fs/intro">Filesystem</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/fs/zfs">ZFS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/fs/btrfs">Btrfs</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/fs/fuse">FUSE</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/fs/nfs">NFS</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/fs/smb">Samba</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/fs/ntfs">NTFS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">网络存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/network/share">Share</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/storage/network/sshfs">SSHFS</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">开发服务</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Auth</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/auth">Auth 概念</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/auth-faq">认证授权常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/keycloak">Keycloak</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/keycloak-dev">Keycloak 开发</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/keycloak-faq">Keycloak 常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/louketo">Louketo Proxy</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/oauth2-proxy">oauth2-proxy</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/ldap">LADP</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/ldap-schema">LDAP Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/ldif">LDIF</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/apacheds">Apache Directory</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/apacheds-ops">ApacheDS 运维</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/apacheds-kerberos">ApacheDS Kerberos</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/kerberos">Kerberos</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/kerberos-faq">Kerberos FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/oauth">OAuth</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/jwt">JWT</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/auth-protocol">协议</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/auth/auth-glossary">词汇</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">内容管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/service/cms/cms">CMS 概览</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Office</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/service/office/office">办公套件</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/office/collabora">Collabora Online</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/office/onlyoffice">ONLYOFFICE</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">客户关系管理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/service/crm/crm-insight">理解 CRM</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">文件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/service/file/nextcloud">NextCloud</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/file/nextcloud-config">Nextcloud 配置</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/file/nextcloud-faq">Nextcloud FAQ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">存储</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/seaweedfs">seaweedfs</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/minio">Minio</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/minio-operator">MinIO Kubernetes Operator</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/ceph">Ceph</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/ceph-glossary">Ceph 术语</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/ceph-k8s">Ceph Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/ceph-ubuntu-16-install">Ubuntu 16.04 安装 Ceph</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/service/storage/distributed-storage">分布式存储</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">仓库</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/service/repository/nexus">Nexus</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">运维</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">服务</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/service/remote-desktop">远程桌面</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/service/matomo">Matomo</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Gitlab</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/ops/service/gitlab-config">GitLab配置</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/service/gitlab-cicd">GitaLab持续集成持续交付</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/ops/service/gitlab-k8s">GitLab K8S 集成</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">VoIP</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/voip/voip-intro">VoIP</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/hardware/intro">硬件设备</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/sip/provider">SIP 提供商</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/glossary">词汇表</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Asterisk</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/intro">Asterisk</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/version">Asterisk 版本</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/asterisk-moduls">Asterisk Modules</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/notes/voip/asterisk/dev">开发</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/conf">Asterisk 配置</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/dialplan">拨号计划</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/codec">Asterisk 编码</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/chan_dahdi">DAHDi Channel</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/chan_dongle">chan_dongle</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/reference">参考</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/glossory">Asterisk 词汇</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/faq">常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/notes/voip/asterisk/the-definitive-guide-4th">Asterisk 权威指南,第四版</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3XKI"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_AHR_"><article><header><h1 class="docTitle_3A0L">开发</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor" id="dev"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#dev" title="Direct link to heading">#</a>Dev</h1><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="tips"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#tips" title="Direct link to heading">#</a>Tips</h2><ul><li><p><a href="https://github.com/ttacon/libphonenumber">https://github.com/ttacon/libphonenumber</a></p></li><li><p><a href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+Architecture%2C+The+Big+Picture">Asterisk Architecture, The Big Picture</a></p></li><li><p><a href="https://wiki.asterisk.org/wiki/display/AST/Interfaces">Interface</a></p><ul><li>Asterisk Call Files<ul><li>基于纯文件的调用, 将调用文件放到 spool 即可</li></ul></li><li>Asterisk Gateway Interface<ul><li>pipes, stdin, stdout</li><li>Asterisk dialplan 与 外部程序</li><li><code>main/manager.c</code><ul><li>源文件中包含了事件和操作的定义</li><li>部分其他的操作和事件在其他源文件中, 但定义的方式是一样的</li></ul></li></ul></li><li>Asterisk Management Interface<ul><li>管理类型的功能, PBX, 呼叫发起, 检测邮箱状态, 通道监控和队列, 命令执行</li><li>CS 模式, TCP</li></ul></li><li>Asterisk REST Interface<ul><li>异步接口, 暴露内部原始对象, 通道, 桥接, 终端, 媒体等.</li><li>通过 WebSocket 传输 JSON 事件</li></ul></li><li>Calendaring<ul><li>对多各种标准的日历协议进行读写</li><li>拨号计划可利用日历事件信息</li></ul></li><li>Database Connectivity	<ul><li>ODBC, MySQL, PostgreSQL</li></ul></li><li>Distributed Device State	<ul><li>提供用于在多个实例之间状态分发的机制.</li></ul></li><li>SNMP<ul><li>基本的 SNMP 支持</li><li>活动监控</li></ul></li><li>Speech Recognition API	</li><li>StatsD<ul><li>是一个拨号计划中的应用</li><li>用于发送统计信息</li></ul></li></ul></li><li><p>Doxygen <a href="http://doxygen.asterisk.org/">代码文档</a></p></li><li><p>NOTES</p><ul><li>构建时生成的 xml 可以用于生成代码</li></ul></li><li><p><a href="http://www.corosync.org/">corosync</a></p><ul><li>集群设备状态同步</li></ul></li></ul><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># EXTERNALS_CACHE_DIR 可以指定下载文件的缓存目录</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># NOTE: 编译的版本由于 pjproject 的 md5 检测构建代码有问题, 需要将最终的判断调整下绕过</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EXTERNALS_CACHE_DIR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token environment constant" style="color:rgb(130, 170, 255)">$PWD</span><span class="token plain">/cache ./configure</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 生成文档</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> doc/core-en_US.xml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 会使用 build_tools/post_process_documentation.py 进行后处理</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 合并 managerEventInstances managerEvent 节点参数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> doc/full-en_US.xml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># NOTE 生成文档中的 para/example 标签应该为 CDATA, 但是生成的 xml 中没有 &lt;![CDATA[ ]]&gt;, 需要手动替换, 否则部分解析器会解析失败</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="tricks"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#tricks" title="Direct link to heading">#</a>Tricks</h2><p><a href="https://www.voip-info.org/asterisk-tips-and-tricks">https://www.voip-info.org/asterisk-tips-and-tricks</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="addon"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#addon" title="Direct link to heading">#</a>Addon</h2><p><a href="https://github.com/zaf/Asterisk-eSpeak">https://github.com/zaf/Asterisk-eSpeak</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="ami"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ami" title="Direct link to heading">#</a>AMI</h2><ul><li>配置文件 <code>manager.conf</code></li><li>默认端口 5038</li><li>服务端会主动发送头 <code>Asterisk Call Manager/3.2.0</code></li><li>响应均为异步事件</li><li>包类型分为: 事件, 响应, 和发送的操作</li><li>格式类似于 HTTP 头</li><li>Action,Response,Event 必须在第一行</li><li>请求通过 ActionID, 服务端返回 ActionID 来识别响应</li><li>一次请求除了会返回一个响应以外, 可能还会范围一列数据, 此时列数据是通过事件发送的, 没有 ActionID<ul><li>例如: 以 <code>EndpointDetail</code> 开始, 以 <code>EndpointDetailComplete</code> 结束</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="ari"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ari" title="Direct link to heading">#</a>ARI</h2><ul><li><a href="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=4817239">Asterisk Manager Interface</a></li><li><a href="https://wiki.asterisk.org/wiki/pages/viewpage.action?pageId=29395573">Asterisk REST Interface</a></li><li><a href="https://github.com/asterisk/asterisk/tree/master/res/ari">asterisk/res/ari</a></li><li><a href="https://github.com/asterisk/asterisk/tree/master/rest-api">https://github.com/asterisk/asterisk/tree/master/rest-api</a></li><li>Swagger<ul><li>http://localhost:8088/ari/api-docs/resources.json</li><li><a href="https://raw.githubusercontent.com/asterisk/asterisk/master/rest-api/resources.json">https://raw.githubusercontent.com/asterisk/asterisk/master/rest-api/resources.json</a></li></ul></li><li><a href="http://ari.asterisk.org/">http://ari.asterisk.org/</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="experiment"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#experiment" title="Direct link to heading">#</a>Experiment</h2><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 实验数据目录</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> -p ~/data/asterisk</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 启动</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run --rm -it --name ast wener/asterisk:edge asterisk -cvvvv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 拷贝出配置文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> ast:/etc/asterisk/ ~/data/asterisk/etc/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 停止之前的, 使用主机上的配置文件启动</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run --rm -it --net</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">host -v </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/data/asterisk/etc/:/etc/asterisk --name ast wener/asterisk:edge asterisk -cvvvv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可以从另外一个终端执行命令</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exec</span><span class="token plain"> ast asterisk -rx </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;sip reload&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 在 Mac 下可能导致文件不同步, 那只能尝试别的办法了, 例如</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -avz -e </span><span class="token function" style="color:rgb(130, 170, 255)">ssh</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/data/asterisk/ root@192.168.1.1:/data/asterisk/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --restart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">always </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">POSTGRES_USER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ast -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">POSTGRES_PASSWORD</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ast -p </span><span class="token number" style="color:rgb(247, 140, 108)">5432</span><span class="token plain">:5432 -v /data/pg/data:/var/lib/postgresql/data --name ast-pg postgres:alpine</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><p><strong>sip.conf</strong></p><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-conf codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; 打开 tcp 和 ws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[general]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">context=public               </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">allowoverlap=no  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">udpbindaddr=0.0.0.0  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rtpbindaddr=0.0.0.0  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tcpenable=yes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tcpbindaddr=0.0.0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">websocket_enabled = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">transport=tcp,ws,udp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">srvlookup=yes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; 添加测试用户</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[codecs](!)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">allow=!all,ilbc,g729,gsm,g723,ulaw</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[base](!,codecs)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type=friend</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">secret=0000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[9001](base)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[9002](base)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[9003](base)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[9004](base)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[9005](base)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><p><strong>pjsip_wizard.conf</strong></p><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-conf codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[user-template](!)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type = wizard</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">accepts_registrations = yes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">accepts_auth = yes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endpoint/context = default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endpoint/allow = !all,ulaw,gsm,g722</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aor/max_contacts=5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[9001](user-template)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">inbound_auth/username = 9001</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">inbound_auth/password = 9001</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[9002](user-template)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">inbound_auth/username = 9002</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">inbound_auth/password = 9002</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="os"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#os" title="Direct link to heading">#</a>OS</h2><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 基础</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> openssh-client openssl </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> busybox </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">nano</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> shadow </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">chsh root -s /bin/bash</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 扩展</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> tmux </span><span class="token function" style="color:rgb(130, 170, 255)">htop</span><span class="token plain"> docker </span><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> neofetch@testing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> sox alsa-utils</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 核心</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> asterisk</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> asterisk-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">curl,pgsql,sounds-en,sounds-moh,srtp,chan-dongle,curl,alsa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># apk add asterisk-sample-config</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 部分工具依赖 perl</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> asterisk-dahdi dahdi-linux-hardened perl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> pciutils util-linux</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 会看到 Communication controller 这样的 PCI</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lspci</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># OpenVox 需要 wct4xxp</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">modprobe dahdi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">modprobe wct4xxp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 启动 dahdi 服务, 并且下次自动启动</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rc-update </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> dahdi</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rc-service dahdi start</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 生成配置</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /etc/dahdi/system.conf</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /etc/asterisk/dahdi-channels.conf</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dahdi_genconf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 配置正确的国家设置</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /etc/dahdi/system.conf</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># loadzone = cn</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># defaultzone = cn</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /etc/asterisk/indications.conf</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># country=cn</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 导入配置</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 默认使用 /etc/dahdi/system.conf</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可以修改使用的配置文件 -c /data/asterisk/dahdi/system.conf</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dahdi_cfg -vvvvvv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># dahdi_monitor</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Monitors signal level on analog channel allows you to record audio from it</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Usage: dahdi_monitor &lt;channel num&gt; -v -m -o -p -l limit -f FILE -s FILE -r FILE1 -t FILE2 -F FILE -S FILE -R FILE1 -T FILE2</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example: dahdi_monitor 1 -vv</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># note: extremly usefull, but otherwise not mentioned, that the raw format output is 8Khz 16bit signed. </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#   Use sox to convert to a wav. sox -r 8000 -s -w rx.raw rx.wav</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 导入配置</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;#include dahdi-channels.conf&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token plain"> /etc/asterisk/chan_dahdi.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可选</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># asterisk-{alsa,cdr-mysql,chan-dongle,curl,dahdi,dbg,dev,doc,fax,mobile,odbc,pgsql,sample-config,sounds-en,sounds-moh,speex,srtp,tds}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 使用样例配置文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># apk add sample-config</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apk </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> --allow-untrusted ~/packages/main/x86_64/pjproject-2.5.5-r3.apk</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">until</span><span class="token plain"> asterisk -gcvvvvv -C /data/asterisk/etc/asterisk.conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">UNID</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">date</span><span class="token variable" style="color:rgb(191, 199, 213)"> +</span><span class="token variable string" style="color:rgb(195, 232, 141)">&quot;%Y-%m-%d.%H-%M-%S&quot;</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> -e core </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">$UNID</span><span class="token string" style="color:rgb(195, 232, 141)"> Server &#x27;asterisk&#x27; crashed with exit code </span><span class="token string variable" style="color:rgb(191, 199, 213)">$?</span><span class="token string" style="color:rgb(195, 232, 141)">.  Respawning..&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token plain"> dump.log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> core core.</span><span class="token variable" style="color:rgb(191, 199, 213)">$UNID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> /var/log/asterisk/full full.</span><span class="token variable" style="color:rgb(191, 199, 213)">$UNID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">sleep</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">done</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><ul><li><a href="https://pagure.io/newt/">newt</a><ul><li>Redhat&#x27;s Newt windowing toolkit development files</li></ul></li><li><a href="https://www.isdn4linux.de/">isdn4linux</a></li><li><a href="https://sourceforge.net/projects/osp-toolkit/">OSP Toolkit</a><ul><li>a client side implementation of the ETSI OSP VoIP Peering protocol (ETSI TS 101 321)</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="asterisk-configure---help"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#asterisk-configure---help" title="Direct link to heading">#</a>asterisk ./configure --help</h3><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-undefined codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ./configure --help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">`configure&#x27; configures asterisk trunk to adapt to many kinds of systems.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Usage: ./configure [OPTION]... [VAR=VALUE]...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">To assign environment variables (e.g., CC, CFLAGS...), specify them as</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">VAR=VALUE.  See below for descriptions of some of the useful variables.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Defaults for the options are specified in brackets.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Configuration:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -h, --help              display this help and exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --help=short        display options specific to this package</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --help=recursive    display the short help of all the included packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -V, --version           display version information and exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -q, --quiet, --silent   do not print `checking ...&#x27; messages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --cache-file=FILE   cache test results in FILE [disabled]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -C, --config-cache      alias for `--cache-file=config.cache&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -n, --no-create         do not create output files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --srcdir=DIR        find the sources in DIR [configure dir or `..&#x27;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Installation directories:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --prefix=PREFIX         install architecture-independent files in PREFIX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          [/usr/local]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          [PREFIX]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">By default, `make install&#x27; will install all the files in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">`/usr/local/bin&#x27;, `/usr/local/lib&#x27; etc.  You can specify</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">an installation prefix other than `/usr/local&#x27; using `--prefix&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for instance `--prefix=$HOME&#x27;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">For better control, use the options below.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Fine tuning of the installation directories:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --bindir=DIR            user executables [EPREFIX/bin]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --sbindir=DIR           system admin executables [EPREFIX/sbin]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --libexecdir=DIR        program executables [EPREFIX/libexec]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --localstatedir=DIR     modifiable single-machine data [PREFIX/var]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --libdir=DIR            object code libraries [EPREFIX/lib]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --includedir=DIR        C header files [PREFIX/include]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --oldincludedir=DIR     C header files for non-gcc [/usr/include]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --datarootdir=DIR       read-only arch.-independent data root [PREFIX/share]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --datadir=DIR           read-only architecture-independent data [DATAROOTDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --infodir=DIR           info documentation [DATAROOTDIR/info]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --localedir=DIR         locale-dependent data [DATAROOTDIR/locale]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --mandir=DIR            man documentation [DATAROOTDIR/man]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --docdir=DIR            documentation root [DATAROOTDIR/doc/asterisk]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --htmldir=DIR           html documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --dvidir=DIR            dvi documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --pdfdir=DIR            pdf documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --psdir=DIR             ps documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">System types:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --build=BUILD     configure for building on BUILD [guessed]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --host=HOST       cross-compile to build programs to run on HOST [BUILD]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Optional Features:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-option-checking  ignore unrecognized --enable/--with options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-dev-mode       Turn on developer mode</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-coverage       Turn on code coverage tracking (for gcov)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-xmldoc        Explicitly disable XML documentation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-largefile     omit support for large files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-internal-poll  Use Asterisk&#x27;s poll implementation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-asteriskssl   Disable Asterisk&#x27;s SSL wrapper library</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-rpath         Disables rpath linker option checking</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Optional Packages:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-sounds-cache=PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          use cached sound tarfiles in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-externals-cache=PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          use cached external module tarfiles in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-pjproject-bundled</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          Use bundled pjproject libraries</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-asound=PATH      use Advanced Linux Sound Architecture files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-bfd=PATH         use Debug symbol decoding files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-execinfo=PATH    use Stack Backtrace files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-bluetooth=PATH   use Bluetooth files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-cap=PATH         use POSIX 1.e capabilities files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-cpg=PATH         use Corosync files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-curses=PATH      use curses files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-crypt=PATH       use password and data encryption files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-crypto=PATH      use OpenSSL Cryptography files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-dahdi=PATH       use DAHDI files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-avcodec=PATH     use Ffmpeg and avcodec files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-gsm=PATH         use External GSM files in PATH, use &#x27;internal&#x27; GSM</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          otherwise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ilbc=PATH        use System iLBC files in PATH, use &#x27;internal&#x27; iLBC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          otherwise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-gtk2=PATH        use gtk2 files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-gmime=PATH       use GMime files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-h323=PATH        use OpenH323 files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-hoard=PATH       use Hoard Memory Allocator files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ical=PATH        use iCal files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-iconv=PATH       use Iconv files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-iksemel=PATH     use Iksemel Jabber files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-imap=PATH        use UW IMAP Toolkit files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-inotify=PATH     use inotify support files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-iodbc=PATH       use iODBC files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-isdnnet=PATH     use ISDN4Linux files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-jack=PATH        use Jack Audio Connection Kit files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-jansson=PATH     use Jansson JSON library files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-uriparser=PATH   use uriparser library files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-kqueue=PATH      use kqueue support files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ldap=PATH        use OpenLDAP files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-libcurl=PREFIX   look for the curl library in PREFIX/lib and headers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          in PREFIX/include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-libedit=PATH     use NetBSD Editline library files in PATH, use</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          &#x27;internal&#x27; Editline otherwise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-libxml2=PATH     use LibXML2 files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-libxslt=PATH     use LibXSLT files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ltdl=PATH        use libtool files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-lua=PATH         use Lua files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-misdn=PATH       use mISDN user files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-mysqlclient=PATH use MySQL client files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-nbs=PATH         use Network Broadcast Sound files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ncurses=PATH     use ncurses files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-neon=PATH        use neon files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-neon29=PATH      use neon29 files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-netsnmp=PATH     use Net-SNMP files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-newt=PATH        use newt files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ogg=PATH         use OGG files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-openr2=PATH      use MFR2 files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-opus=PATH        use Opus files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-osptk=PATH       use OSP Toolkit files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-oss=PATH         use Open Sound System files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-postgres=PATH    use PostgreSQL files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-pjproject=PATH   use PJPROJECT files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-popt=PATH        use popt files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-portaudio=PATH   use PortAudio files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-pri=PATH         use ISDN PRI files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-pwlib=PATH       use PWlib files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-radius=PATH      use Radius Client files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-resample=PATH    use LIBRESAMPLE files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-sdl=PATH         use Sdl files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-SDL_image=PATH   use Sdl Image files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-spandsp=PATH     use SPANDSP files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ss7=PATH         use ISDN SS7 files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-speex=PATH       use Speex files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-speex=PATH       use Speex preprocess routines files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-speexdsp=PATH    use SpeexDSP files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-sqlite=PATH      use SQLite files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-sqlite3=PATH     use SQLite files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-srtp=PATH        use Secure RTP files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ssl=PATH         use OpenSSL Secure Sockets Layer files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-suppserv=PATH    use mISDN Supplemental Services files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-tds=PATH         use FreeTDS files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-termcap=PATH     use Termcap files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-timerfd=PATH     use timerfd files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-tinfo=PATH       use Term Info files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-tonezone=PATH    use tonezone files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-unbound=PATH     use unbound files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-unixodbc=PATH    use unixODBC files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-vorbis=PATH      use Vorbis files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-vpb=PATH         use Voicetronix API files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-x11=PATH         use X11 files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-z=PATH           use zlib compression files in PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Some influential environment variables:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CC          C compiler command</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CFLAGS      C compiler flags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  LDFLAGS     linker flags, e.g. -L&lt;lib dir&gt; if you have libraries in a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              nonstandard directory &lt;lib dir&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  LIBS        libraries to pass to the linker, e.g. -l&lt;library&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I&lt;include dir&gt; if</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              you have headers in a nonstandard directory &lt;include dir&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CPP         C preprocessor</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CXX         C++ compiler command</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CXXFLAGS    C++ compiler flags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CXXCPP      C++ preprocessor</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PJPROJECT_CONFIGURE_OPTS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              Additional configure options to pass to bundled pjproject</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PKG_CONFIG  path to pkg-config utility</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PKG_CONFIG_PATH</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              directories to add to pkg-config&#x27;s search path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PKG_CONFIG_LIBDIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              path overriding pkg-config&#x27;s built-in search path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ILBC_CFLAGS C compiler flags for ILBC, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ILBC_LIBS   linker flags for ILBC, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  LIBEDIT_CFLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              C compiler flags for LIBEDIT, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  LIBEDIT_LIBS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              linker flags for LIBEDIT, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PJPROJECT_CFLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              C compiler flags for PJPROJECT, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PJPROJECT_LIBS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              linker flags for PJPROJECT, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PYTHONDEV_CFLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              C compiler flags for PYTHONDEV, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  PYTHONDEV_LIBS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              linker flags for PYTHONDEV, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  GMIME_CFLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              C compiler flags for GMIME, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  GMIME_LIBS  linker flags for GMIME, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  GTK2_CFLAGS C compiler flags for GTK2, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  GTK2_LIBS   linker flags for GTK2, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  SYSTEMD_CFLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              C compiler flags for SYSTEMD, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  SYSTEMD_LIBS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              linker flags for SYSTEMD, overriding pkg-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Use these variables to override the choices made by `configure&#x27; or to help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">it to find libraries and programs with nonstandard names/locations.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Report bugs to &lt;https://issues.asterisk.org&gt;.</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="pjproject-configure---help"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pjproject-configure---help" title="Direct link to heading">#</a>pjproject ./configure --help</h3><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-undefined codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ./configure --help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">`configure&#x27; configures pjproject 2.x to adapt to many kinds of systems.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Usage: ./aconfigure [OPTION]... [VAR=VALUE]...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">To assign environment variables (e.g., CC, CFLAGS...), specify them as</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">VAR=VALUE.  See below for descriptions of some of the useful variables.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Defaults for the options are specified in brackets.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Configuration:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -h, --help              display this help and exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --help=short        display options specific to this package</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --help=recursive    display the short help of all the included packages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -V, --version           display version information and exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -q, --quiet, --silent   do not print `checking ...&#x27; messages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --cache-file=FILE   cache test results in FILE [disabled]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -C, --config-cache      alias for `--cache-file=config.cache&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  -n, --no-create         do not create output files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      --srcdir=DIR        find the sources in DIR [configure dir or `..&#x27;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Installation directories:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --prefix=PREFIX         install architecture-independent files in PREFIX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          [/usr/local]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          [PREFIX]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">By default, `make install&#x27; will install all the files in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">`/usr/local/bin&#x27;, `/usr/local/lib&#x27; etc.  You can specify</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">an installation prefix other than `/usr/local&#x27; using `--prefix&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">for instance `--prefix=$HOME&#x27;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">For better control, use the options below.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Fine tuning of the installation directories:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --bindir=DIR            user executables [EPREFIX/bin]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --sbindir=DIR           system admin executables [EPREFIX/sbin]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --libexecdir=DIR        program executables [EPREFIX/libexec]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --localstatedir=DIR     modifiable single-machine data [PREFIX/var]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --libdir=DIR            object code libraries [EPREFIX/lib]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --includedir=DIR        C header files [PREFIX/include]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --oldincludedir=DIR     C header files for non-gcc [/usr/include]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --datarootdir=DIR       read-only arch.-independent data root [PREFIX/share]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --datadir=DIR           read-only architecture-independent data [DATAROOTDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --infodir=DIR           info documentation [DATAROOTDIR/info]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --localedir=DIR         locale-dependent data [DATAROOTDIR/locale]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --mandir=DIR            man documentation [DATAROOTDIR/man]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --docdir=DIR            documentation root [DATAROOTDIR/doc/pjproject]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --htmldir=DIR           html documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --dvidir=DIR            dvi documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --pdfdir=DIR            pdf documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --psdir=DIR             ps documentation [DOCDIR]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">System types:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --build=BUILD     configure for building on BUILD [guessed]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --host=HOST       cross-compile to build programs to run on HOST [BUILD]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --target=TARGET   configure for building compilers for TARGET [HOST]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Optional Features:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-option-checking  ignore unrecognized --enable/--with options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-floating-point</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          Disable floating point where possible</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-epoll          Use /dev/epoll ioqueue on Linux (experimental)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-shared         Build shared libraries</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-resample      Disable resampling implementations</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-sound         Exclude sound (i.e. use null sound)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-oss           Disable OSS audio (default: not disabled)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-video         Disable video feature</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-ext-sound      PJMEDIA will not provide any sound device backend</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-small-filter  Exclude small filter in resampling</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-large-filter  Exclude large filter in resampling</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-speex-aec     Exclude Speex Acoustic Echo Canceller/AEC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-g711-codec    Exclude G.711 codecs from the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-l16-codec     Exclude Linear/L16 codec family from the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-gsm-codec     Exclude GSM codec in the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-g722-codec    Exclude G.722 codec in the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-g7221-codec   Exclude G.7221 codec in the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-speex-codec   Exclude Speex codecs in the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-ilbc-codec    Exclude iLBC codec in the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-libsamplerate  Link with libsamplerate when available.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-resample-dll   Build libresample as shared library</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-sdl           Disable SDL (default: not disabled)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-ffmpeg        Disable ffmpeg (default: not disabled)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-v4l2          Disable Video4Linux2 (default: not disabled)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-openh264      Disable OpenH264 (default: not disabled)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --enable-ipp            Enable Intel IPP support. Specify the Intel IPP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          package and samples location using IPPROOT and</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          IPPSAMPLES env var or with --with-ipp and</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          --with-ipp-samples options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-ssl           Exclude SSL support the build (default: autodetect)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-opencore-amr  Exclude OpenCORE AMR support from the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          (default: autodetect)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-silk          Exclude SILK support from the build (default:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          autodetect)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-opus          Exclude OPUS support from the build (default:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          autodetect)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-libyuv        Exclude libyuv in the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --disable-libwebrtc     Exclude libwebrtc in the build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Optional Packages:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-external-speex   Use external Speex development files, not the one in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          &quot;third_party&quot; directory. When this option is set,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          make sure that Speex is accessible to use (hint: use</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          CFLAGS and LDFLAGS env var to set the include/lib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          paths)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-external-gsm     Use external GSM codec library, not the one in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          &quot;third_party&quot; directory. When this option is set,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          make sure that the GSM include/lib files are</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          accessible to use (hint: use CFLAGS and LDFLAGS env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          var to set the include/lib paths)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-external-srtp    Use external SRTP development files, not the one in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          &quot;third_party&quot; directory. When this option is set,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          make sure that SRTP is accessible to use (hint: use</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          CFLAGS and LDFLAGS env var to set the include/lib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          paths)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-external-yuv     Use external libyuv development files, not the one</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          in &quot;third_party&quot; directory. When this option is set,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          make sure that libyuv is accessible to use (hint:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          use CFLAGS and LDFLAGS env var to set the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          include/lib paths)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-external-webrtc  Use external webrtc development files, not the one</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          in &quot;third_party&quot; directory. When this option is set,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          make sure that webrtc is accessible to use (hint:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          use CFLAGS and LDFLAGS env var to set the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          include/lib paths)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-external-pa      Use external PortAudio development files, not the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          one in &quot;third_party&quot; directory. When this option is</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          set, make sure that PortAudio is accessible to use</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          (hint: use CFLAGS and LDFLAGS env var to set the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          include/lib paths)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-sdl=DIR          Specify alternate libSDL prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ffmpeg=DIR       Specify alternate FFMPEG prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-openh264=DIR     Specify alternate OpenH264 prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ipp=DIR          Specify the Intel IPP location</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ipp-samples=DIR  Specify the Intel IPP samples location</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ipp-arch=ARCH    Specify the Intel IPP ARCH suffix, e.g. &quot;64&quot; or</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          &quot;em64t. Default is blank for IA32&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-ssl=DIR          Specify alternate libssl prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-opencore-amrnb=DIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          This option is obsolete and replaced by</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          --with-opencore-amr=DIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-opencore-amr=DIR Specify alternate libopencore-amr prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-opencore-amrwbenc=DIR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          Specify alternate libvo-amrwbenc prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-silk=DIR         Specify alternate SILK prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-opus=DIR         Specify alternate OPUS prefix</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Some influential environment variables:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CC          C compiler command</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CFLAGS      C compiler flags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  LDFLAGS     linker flags, e.g. -L&lt;lib dir&gt; if you have libraries in a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              nonstandard directory &lt;lib dir&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  LIBS        libraries to pass to the linker, e.g. -l&lt;library&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I&lt;include dir&gt; if</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              you have headers in a nonstandard directory &lt;include dir&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CXX         C++ compiler command</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CXXFLAGS    C++ compiler flags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CPP         C preprocessor</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Use these variables to override the choices made by `configure&#x27; or to help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">it to find libraries and programs with nonstandard names/locations.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Report bugs to the package provider.</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="centos"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#centos" title="Direct link to heading">#</a>Centos</h3><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 建议先设置好 https_proxy 和 http_proxy 变量, 因为 wget 只支持 http 代理, 所以不能用 socks 代理</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 前置条件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> kernel-devel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y ncurses-devel curl-devel zlib-devel libedit-devel sqlite-devel postgresql-devel libuuid-devel uuid-devel lua-devel jansson-devel newt-devel openssl-devel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># DAHDi 驱动安装</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 如果使用的 OpenVox 则可以使用 OpenVox 的驱动</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># wget http://downloads.openvox.cn/pub/drivers/dahdi-linux-complete/openvox_dahdi-linux-complete-current.tar.gz</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> http://downloads.asterisk.org/pub/telephony/dahdi-linux-complete/dahdi-linux-complete-current.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> -zxvf dahdi-linux-complete-*.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> dahdi-linux-complete-*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装 libpri</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> http://downloads.asterisk.org/pub/telephony/libpri/libpri-current.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> -zxvf libpri-current.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> libpri-*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装 asterisk</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">AST_MAJOR_VER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">14</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> http://downloads.asterisk.org/pub/telephony/asterisk/asterisk-</span><span class="token variable" style="color:rgb(191, 199, 213)">${AST_MAJOR_VER}</span><span class="token plain">-current.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> -zxvf asterisk-</span><span class="token variable" style="color:rgb(191, 199, 213)">${AST_MAJOR_VER}</span><span class="token plain">-current.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> asterisk-</span><span class="token variable" style="color:rgb(191, 199, 213)">${AST_MAJOR_VER}</span><span class="token plain">.*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 15 后 --with-pjproject-bundled 为默认值</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./configure </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-pjproject-bundled --with-gnu-ld --with-libcurl --with-libedit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-gsm</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">internal </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --without-x11 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-dahdi --with-pri --with-tonezone </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-postgres --with-sqlite3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> samples</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># format_mp3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Any rate but 8000hz mono is optimal</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 源码需要下载</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">contrib/scripts/get_mp3_source.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./menuselect/menuselect --enable format_mp3 menuselect.makeopts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># codec_opus</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># http://downloads.digium.com/pub/telephony/codec_opus/README</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># https://wiki.asterisk.org/wiki/display/AST/Codec+Opus</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 使用官方二进制版可能会进行统计, 如果想要关闭, 可以在 dnsmasq 中添加 local=/stats.asterisk.org/ 或者在 hosts 中添加对应记录</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 二进制安装</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 支持 13,14,15 支持 x86_64,x86_32 的 linux</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">AST_MAJOR_VER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">$(</span><span class="token string variable" style="color:rgb(191, 199, 213)">asterisk -V </span><span class="token string variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token string variable" style="color:rgb(191, 199, 213)"> </span><span class="token string variable function" style="color:rgb(130, 170, 255)">sed</span><span class="token string variable" style="color:rgb(191, 199, 213)"> -nr -e </span><span class="token string variable string" style="color:rgb(195, 232, 141)">&#x27;s/.*([0-9]{2}).*/</span><span class="token string variable string entity" style="color:rgb(195, 232, 141)">\1</span><span class="token string variable string" style="color:rgb(195, 232, 141)">/p&#x27;</span><span class="token string variable" style="color:rgb(191, 199, 213)">)</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 当前最新版为 1.1.0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">OPUS_VER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">current</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://downloads.digium.com/pub/telephony/codec_opus/asterisk-</span><span class="token string variable" style="color:rgb(191, 199, 213)">${AST_MAJOR_VER}</span><span class="token string" style="color:rgb(195, 232, 141)">.0/x86-64/codec_opus-</span><span class="token string variable" style="color:rgb(191, 199, 213)">${AST_MAJOR_VER}</span><span class="token string" style="color:rgb(195, 232, 141)">.0_</span><span class="token string variable" style="color:rgb(191, 199, 213)">${OPUS_VER}</span><span class="token string" style="color:rgb(195, 232, 141)">-</span><span class="token string variable" style="color:rgb(191, 199, 213)">$(</span><span class="token string variable function" style="color:rgb(130, 170, 255)">uname</span><span class="token string variable" style="color:rgb(191, 199, 213)"> -m</span><span class="token string variable" style="color:rgb(191, 199, 213)">)</span><span class="token string" style="color:rgb(195, 232, 141)">.tar.gz&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> zxvf codec_opus-*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> codec_opus-*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> codec_opus.so /usr/lib/asterisk/modules/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> format_ogg_opus.so /usr/lib/asterisk/modules/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> codec_opus_config-en_US.xml /var/lib/asterisk/documentation/thirdparty/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 源码安装</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 依赖</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y opus-devel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 官方未释出源码</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 菜单项为 Codec Translators -&gt; codec_opus</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 可参考源码 https://github.com/traud/asterisk-opus</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Debian 的 Asterisk 使用的改源码 https://anonscm.debian.org/git/pkg-voip/asterisk-opus.git</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="录音文件归档"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#录音文件归档" title="Direct link to heading">#</a>录音文件归档</h2><ul><li>录音文件归档建议使用 opus 压缩<ul><li>1453  wav 405M 压缩后为 91M<ul><li>其中有 764 个空白文件</li></ul></li><li>688   wav 402M 压缩后为 88M</li></ul></li><li>wav 空白文件为 44</li><li>opus 空白文件为 872</li></ul><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 删除空白文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">find</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> -size 44c -delete</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 时间范围</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">find</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> -type f -newermt </span><span class="token number" style="color:rgb(247, 140, 108)">2017</span><span class="token plain">-9-28 </span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"> -newermt </span><span class="token number" style="color:rgb(247, 140, 108)">2017</span><span class="token plain">-9-29</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 15 分钟前到现在</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">find</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> -type f -mmin -15</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 删除这之前的数据</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">find</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> -type f </span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"> -newermt </span><span class="token number" style="color:rgb(247, 140, 108)">2017</span><span class="token plain">-9-29 -delete</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="自动拨号文件"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#自动拨号文件" title="Direct link to heading">#</a>自动拨号文件</h2><p>/var/spool/asterisk/outgoing/</p><p><a href="https://www.voip-info.org/asterisk-call-files">https://www.voip-info.org/asterisk-call-files</a>
<a href="https://www.voip-info.org/asterisk-auto-dial-out">https://www.voip-info.org/asterisk-auto-dial-out</a></p><p><a href="http://www.pycall.org/">http://www.pycall.org/</a>
a flexible python library for creating and using Asterisk call files.</p><ul><li>使用场景<ul><li>Prank call programs.</li><li>Wakeup call programs.</li><li>Telemarketing campaigns.</li><li>Automatic callback systems.</li><li>Emergency warning systems.</li><li>Advanced conferencing applications.</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="性能调优"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#性能调优" title="Direct link to heading">#</a>性能调优</h2><ul><li><a href="https://www.voip-info.org/wiki/view/Asterisk+at+large">Asterisk at large</a></li><li><a href="https://www.voip-info.org/wiki/view/Asterisk+dimensioning">Asterisk dimensioning</a></li></ul><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将语言文件放到内存</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /var/lib/asterisk/sound</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> /mnt/ramdisk</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mount</span><span class="token plain"> -t tmpfs -o </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">size</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">2g tmpfs /mnt/ramdisk</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /etc/fstab</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># tmpfs /mnt/ramdisk tmpfs nodev,nosuid,noexec,nodiratime,size=2048M 0 0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 保证最大文件数够大, 至少 131072</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sysctl fs.file-max</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 刷新修改</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sysctl -p /etc/sysctl.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sysctl -w fs.file-max</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">100000</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sysctl --system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 确保打开文件数勾搭, 至少 32768</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">ulimit</span><span class="token plain"> -n</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 查看已经运行的</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> /proc/</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">pidof asterisk</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain">/limits </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># https://superuser.com/a/441758/242730</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">prlimit --nofile -p </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">pidof asterisk</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 当前打开的文件数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">lsof</span><span class="token plain"> -p </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">pidof asterisk</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">wc</span><span class="token plain"> -l</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ls</span><span class="token plain"> -l /proc/</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">pidof asterisk</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain">/fd </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">wc</span><span class="token plain"> -l</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 当前所有的量</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">lsof</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">wc</span><span class="token plain"> -l</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 查看内核的文件数限制</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sysctl fs.file-nr</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="debian"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#debian" title="Direct link to heading">#</a>debian</h2><p><a href="https://github.com/alpinelinux/aports/blob/master/main/asterisk/APKBUILD">https://github.com/alpinelinux/aports/blob/master/main/asterisk/APKBUILD</a></p><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> libedit-dev uuid-dev libjansson-dev libxml2-dev libsqlite3-dev</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./configure </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --prefix</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --sysconfdir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/etc </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --mandir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/share/man </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --infodir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/share/info </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --libdir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/lib </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --localstatedir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/var </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --disable-xmldoc </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-gsm</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">internal </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-popt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-z </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-newt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-unixodbc </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-postgres </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-tds </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-dahdi </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-pri </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-tonezone </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-resample </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-sqlite3 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-speex </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-asound </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --without-x11 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --without-pjproject-bundled </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-spandsp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-bluetooth </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-libcurl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-libedit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-srtp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-imap</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-imap</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--with-bluetooth</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--with-tds</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--with-unixodbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--with-popt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./configure </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --prefix</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --sysconfdir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/etc </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --mandir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/share/man </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --infodir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/share/info </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --libdir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/lib </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --localstatedir</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/var </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --disable-xmldoc </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-gsm</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">internal </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-z </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-newt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-postgres </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-dahdi </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-pri </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-tonezone </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-resample </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-sqlite3 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-speex </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-asound </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --without-x11 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-spandsp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-libcurl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-libedit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --with-srtp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./menuselect/menuselect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --enable chan_mobile </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --enable app_meetme </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --enable cdr_mysql </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --disable BUILD_NATIVE </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --enable IMAP_STORAGE </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        menuselect.makeopts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f menuselect.makeopts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> menuselect.makeopts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./menuselect/menuselect </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        --enable app_meetme </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        menuselect.makeopts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> -j </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">nproc</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><p>libxml2-dev libncurses5-dev uuid-dev sqlite3 libsqlite3-dev pkg-config libjansson-dev</p><p>uuid-dev</p><p>xml2,sqlite3,jansson,asound2,newt,pq,pri,resample,spandsp,speex,speexdsp,srtp</p><p>dahdi</p><p><a href="https://en.wikipedia.org/wiki/Newt_(programming_library)">https://en.wikipedia.org/wiki/Newt_(programming_library)</a></p><p>tonezone</p><p>dahdi-source</p><p>configure: <strong><em>
configure: </em></strong> The ALSA installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-asound.</p><p>configure: <strong><em>
configure: </em></strong> The BLUETOOTH installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-bluetooth.</p><p>configure: <strong><em>
configure: </em></strong> The DAHDI installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-dahdi.</p><p>configure: <strong><em>
configure: </em></strong> The IMAP_TK installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-imap.</p><p>configure: <strong><em>
configure: </em></strong> The NEWT installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-newt.</p><p>configure: <strong><em>
configure: </em></strong> The PGSQL installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-postgres.</p><p>configure: <strong><em>
configure: </em></strong> The POPT installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-popt.</p><p>configure: <strong><em>
configure: </em></strong> The PRI installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-pri.</p><p>configure: <strong><em>
configure: </em></strong> The RESAMPLE installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-resample.</p><p>configure: <strong><em>
configure: </em></strong> The SPANDSP installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-spandsp.</p><p>configure: <strong><em>
configure: </em></strong> The SPEEX installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-speex.</p><p>configure: <strong><em>
configure: </em></strong> The SPEEX_PREPROCESS installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-speex.</p><p>configure: <strong><em>
configure: </em></strong> The SRTP installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-srtp.</p><p>configure: <strong><em>
configure: </em></strong> The FREETDS installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-tds.</p><p>configure: <strong><em>
configure: </em></strong> The TONEZONE installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-tonezone.</p><p>configure: <strong><em>
configure: </em></strong> The UNIXODBC installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-unixodbc.</p><p>configure: <strong><em>
configure: </em></strong> The ZLIB installation appears to be missing or broken.
configure: <strong><em> Either correct the installation, or run configure
configure: </em></strong> including --without-z.</p><p><a href="http://www.sailpbx.com/mediawiki/index.php/Debian_DAHDI">http://www.sailpbx.com/mediawiki/index.php/Debian_DAHDI</a></p><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> dahdi-source</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">m-a a-i dahdi</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="ops"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ops" title="Direct link to heading">#</a>Ops</h2><p><a href="https://www.voip-info.org/asterisk-automatic-daily-restart/">https://www.voip-info.org/asterisk-automatic-daily-restart/</a></p><pre class="mdxCodeBlock_2E1g"><div class="codeBlockWrapper_1h2Z"><pre class="prism-code language-bash codeBlock_3dxb" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">until</span><span class="token plain"> asterisk -gcv -C /data/asterisk/etc/asterisk.conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">UNID</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">date</span><span class="token variable" style="color:rgb(191, 199, 213)"> +</span><span class="token variable string" style="color:rgb(195, 232, 141)">&quot;%Y-%m-%d.%H-%M-%S&quot;</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> -e core </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">$UNID</span><span class="token string" style="color:rgb(195, 232, 141)"> Server &#x27;asterisk&#x27; crashed with exit code </span><span class="token string variable" style="color:rgb(191, 199, 213)">$?</span><span class="token string" style="color:rgb(195, 232, 141)">.  Respawning..&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token plain"> dump.log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> core core.</span><span class="token variable" style="color:rgb(191, 199, 213)">$UNID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> /var/log/asterisk/full full.</span><span class="token variable" style="color:rgb(191, 199, 213)">$UNID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">sleep</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">done</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3qZc">Copy</button></div></pre></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/notes/voip/asterisk/asterisk-moduls"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Asterisk Modules</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/notes/voip/asterisk/conf"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Asterisk 配置 »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3z_-"><ul class="contents contents__left-border"><li><a href="#tips" class="contents__link">Tips</a></li><li><a href="#tricks" class="contents__link">Tricks</a></li><li><a href="#addon" class="contents__link">Addon</a></li><li><a href="#ami" class="contents__link">AMI</a></li><li><a href="#ari" class="contents__link">ARI</a></li><li><a href="#experiment" class="contents__link">Experiment</a></li><li><a href="#os" class="contents__link">OS</a><ul><li><a href="#asterisk-configure---help" class="contents__link">asterisk ./configure --help</a></li><li><a href="#pjproject-configure---help" class="contents__link">pjproject ./configure --help</a></li><li><a href="#centos" class="contents__link">Centos</a></li></ul></li><li><a href="#录音文件归档" class="contents__link">录音文件归档</a></li><li><a href="#自动拨号文件" class="contents__link">自动拨号文件</a></li><li><a href="#性能调优" class="contents__link">性能调优</a></li><li><a href="#debian" class="contents__link">debian</a></li><li><a href="#ops" class="contents__link">Ops</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">笔记</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/notes/java/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/ops/os/alpine/alpine">AlpineLinux</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/devops/kubernetes/k8s-intro">Kubernates</a></li><li class="footer__item"><a class="footer__link-item" href="/notes/voip/voip-intro">VoIP</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Projects</h4><ul class="footer__items"><div>
              <div>
              <a class="footer__link-item" href="https://github.com/wenerme/wener">Wener</a>
              - <a class="footer__link-item" href="https://travis-ci.com/wenerme/wener" title="wenerme/wener - travis-ci">
                <img style="vertical-align: middle;opacity: .4;" src="https://travis-ci.com/wenerme/wener.svg?branch=master">
                </a>
              - <a class="footer__link-item" href="https://github.com/wenerme/wenerme.github.io/deployments" title="GitHub Pages 部署">部署状态</a>
              </div>
              </div><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://apis.wener.me">Wener&#x27;s Apis</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" to="https://github.com/wenerme" href="https://github.com/wenerme">GitHub</a></li><li class="footer__item"><a class="footer__link-item" to="https://twitter.com/wenerme" href="https://twitter.com/wenerme">Twitter</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Wener Site" src="/img/wener-logo.svg"></div>Copyright © 1992-2020 Wener - 构建时间 2020-10-10 21:30</div></div></footer>
</div>

<script src="/styles.3bfef576.js"></script>

<script src="/runtime~main.21bc78aa.js"></script>

<script src="/main.995ead94.js"></script>

<script src="/1.ea46efd4.js"></script>

<script src="/2.9c5675ff.js"></script>

<script src="/1be78505.3520f6ae.js"></script>

<script src="/7f176b88.fd00c630.js"></script>

<script src="/17896441.cc0f7da5.js"></script>

<script src="/3212680b.f33f03e3.js"></script>


</body>
</html>