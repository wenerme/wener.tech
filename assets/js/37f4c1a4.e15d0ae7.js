/*! For license information please see 37f4c1a4.e15d0ae7.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[60203],{81418:(n,e,d)=>{d.r(e),d.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>i,toc:()=>h});var s=d(11527),r=d(47214);const t={title:"LDAP Command line"},l="ldap cli",i={id:"service/auth/ldap/ldap-cli",title:"LDAP Command line",description:"- ldapmodify",source:"@site/../notes/service/auth/ldap/ldap-cli.md",sourceDirName:"service/auth/ldap",slug:"/service/auth/ldap/cli",permalink:"/notes/service/auth/ldap/cli",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/ldap/ldap-cli.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1661507210,formattedLastUpdatedAt:"Aug 26, 2022",frontMatter:{title:"LDAP Command line"},sidebar:"docs",previous:{title:"LDAP Awesome",permalink:"/notes/service/auth/ldap/awesome"},next:{title:"LDAP FAQ",permalink:"/notes/service/auth/ldap/faq"}},c={},h=[{value:"modify",id:"modify",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"ldap-cli",children:"ldap cli"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ldapmodify"}),"\n",(0,s.jsxs)(e.li,{children:["ldapadd -> ",(0,s.jsx)(e.code,{children:"ldapmodify -a"})]}),"\n",(0,s.jsx)(e.li,{children:"modifyDN -> rename"}),"\n",(0,s.jsx)(e.li,{children:"/etc/openldap/ldap.conf"}),"\n",(0,s.jsxs)(e.li,{children:["filter - ",(0,s.jsx)(e.a,{href:"https://www.rfc-editor.org/rfc/rfc2254.html",children:"RFC2254"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"attribute/value assertion"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"(k=v)"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"(&(k=v)(k2=v2))"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"(k=*)"})," - \u5b58\u5728 k"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"="}),",",(0,s.jsx)(e.code,{children:"<="}),",",(0,s.jsx)(e.code,{children:">="}),",",(0,s.jsx)(e.code,{children:"~="})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"!"}),",",(0,s.jsx)(e.code,{children:"|"}),",",(0,s.jsx)(e.code,{children:"&"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"*"})," \u901a\u914d\u7b26"]}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"common"}),(0,s.jsx)(e.th,{children:"for"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-c"}),(0,s.jsx)(e.td,{children:"ignore error"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-D binddn"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-f file"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-h host"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-H ldapuri"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-n"}),(0,s.jsx)(e.td,{children:"dry run"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-p port"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-P protocol"}),(0,s.jsx)(e.td,{children:"2,3"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-v"}),(0,s.jsx)(e.td,{children:"verbose"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-W"}),(0,s.jsx)(e.td,{children:"ask password"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-w passwd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-x"}),(0,s.jsx)(e.td,{children:"simple auth instead of SASL"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-y passwdfile"}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",metastring:'title="/etc/openldap/ldap.conf"',children:"BASE dc=wener,dc=me\nURI ldap://ip\nTLS_CACERTDIR /etc/openldap/certs\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"ldapsearch"}),(0,s.jsx)(e.th,{children:"for"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-u"}),(0,s.jsx)(e.td,{children:"output dn"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-t"}),(0,s.jsx)(e.td,{children:"binary to file"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-tt"}),(0,s.jsx)(e.td,{children:"all values to file"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-T path"}),(0,s.jsx)(e.td,{children:"TMPDIR"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-F prefix"}),(0,s.jsx)(e.td,{children:"URL prefix for temporary files"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-A"}),(0,s.jsx)(e.td,{children:"attributes only"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-L"}),(0,s.jsx)(e.td,{children:"output LDIFv1"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-LL"}),(0,s.jsx)(e.td,{children:"output LDIFv1 without comment"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-LLL"}),(0,s.jsx)(e.td,{children:"output LDIFv1 without comment & version"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-S sort-attr"}),(0,s.jsx)(e.td,{children:"sort by attr"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-b base"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-s scope"}),(0,s.jsxs)(e.td,{children:["base,one,",(0,s.jsx)(e.strong,{children:"sub"}),",children"]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-a alias-deref"}),(0,s.jsx)(e.td,{children:"never,always,search,find"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-l timelimit"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-z sizelimit"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-M"}),(0,s.jsx)(e.td,{children:"DSA IT"})]})]})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \u4fee\u6539\u5bc6\u7801 - \u53ea\u80fd\u4fee\u6539\u81ea\u5df1\u7684\n# LDAPv3 Password Modify (RFC 3062)\nldappasswd -x -D uid=admin,ou=users,dc=wener,dc=me -w secret -s new\n\n# namingContexts\nldapsearch -LLL -x -b '' -s base '(objectClass=*)' namingContexts\n\n# \u751f\u6210\u5bc6\u7801\n# -m module.so\nslappasswd -h {SSHA} -s secret\n"})}),"\n",(0,s.jsx)(e.h2,{id:"modify",children:"modify"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["changetype\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["modify\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"replace: attr"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["add\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"add: attr"}),"\n",(0,s.jsx)(e.li,{children:"\u591a\u503c\u5c5e\u6027\u503c\u4e0d\u80fd\u76f8\u540c"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["delete\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"delete: attr - \u672a\u6307\u5b9a\u5219\u5220\u9664 entry"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"-"})," \u5206\u9694 \u591a\u4e2a\u64cd\u4f5c"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ldif",children:"dn: cn=ToModify,dc=example,dc=com\nchangetype: modify\nreplace: mail\nmail: new@email.com\n-\nchangetype: add\nadd: foo\nfoo: bar\n-\nchangetype: delete\ndelete: unneededEntry\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"RFC 4511 LDAP: the protocol"}),"\n",(0,s.jsx)(e.li,{children:"RFC 4512 LDAP: directory information models"}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},3354:(n,e,d)=>{var s=d(50959),r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,d){var s,t={},h=null,o=null;for(s in void 0!==d&&(h=""+d),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(o=e.ref),e)l.call(e,s)&&!c.hasOwnProperty(s)&&(t[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps)void 0===t[s]&&(t[s]=e[s]);return{$$typeof:r,type:n,key:h,ref:o,props:t,_owner:i.current}}e.Fragment=t,e.jsx=h,e.jsxs=h},11527:(n,e,d)=>{n.exports=d(3354)},47214:(n,e,d)=>{d.d(e,{Z:()=>i,a:()=>l});var s=d(50959);const r={},t=s.createContext(r);function l(n){const e=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);