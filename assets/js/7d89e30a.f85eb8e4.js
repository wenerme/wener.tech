"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[42058],{49613:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return h}});var r=n(59496);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=u(n),h=o,f=m["".concat(c,".").concat(h)]||m[h]||p[h]||i;return n?r.createElement(f,a(a({ref:t},l),{},{components:n})):r.createElement(f,a({ref:t},l))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},16187:function(e,t,n){n.r(t),n.d(t,{assets:function(){return g},contentTitle:function(){return h},default:function(){return v},frontMatter:function(){return m},metadata:function(){return f},toc:function(){return d}});var r=n(49613),o=Object.defineProperty,i=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&l(e,n,t[n]);if(s)for(var n of s(t))u.call(t,n)&&l(e,n,t[n]);return e};const m={title:"Github Action"},h="Github Action",f={unversionedId:"service/forge/github/github-action",id:"service/forge/github/github-action",title:"Github Action",description:"- actions/virtual-environments",source:"@site/../notes/service/forge/github/github-action.md",sourceDirName:"service/forge/github",slug:"/service/forge/github/action",permalink:"/notes/service/forge/github/action",draft:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/forge/github/github-action.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1696577752,formattedLastUpdatedAt:"Oct 6, 2023",frontMatter:{title:"Github Action"},sidebar:"docs",previous:{title:"Github",permalink:"/notes/service/forge/github/"},next:{title:"Github FAQ",permalink:"/notes/service/forge/github/faq"}},g={},d=[{value:"step",id:"step",level:2},{value:"uses",id:"uses",level:3},{value:"pnpm template",id:"pnpm-template",level:2},{value:"compile: version does not match go tool version",id:"compile-version-does-not-match-go-tool-version",level:2}],b={toc:d};function v(e){var t,n=e,{components:o}=n,l=((e,t)=>{var n={};for(var r in e)c.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&s)for(var r of s(e))t.indexOf(r)<0&&u.call(e,r)&&(n[r]=e[r]);return n})(n,["components"]);return(0,r.kt)("wrapper",(t=p(p({},b),l),i(t,a({components:o,mdxType:"MDXLayout"}))),(0,r.kt)("h1",p({},{id:"github-action"}),"Github Action"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",p({parentName:"li"},{href:"https://github.com/actions/virtual-environments"}),"actions/virtual-environments")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",p({parentName:"li"},{href:"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions"}),"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",p({parentName:"li"},{href:"https://github.com/actions"}),"https://github.com/actions")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",p({parentName:"li"},{href:"https://gitea.com/actions"}),"https://gitea.com/actions"))),(0,r.kt)("admonition",p({},{type:"caution"}),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u652f\u6301\u5141\u8bb8\u9519\u8bef ",(0,r.kt)("a",p({parentName:"li"},{href:"https://github.com/actions/toolkit/issues/399"}),"#399")))),(0,r.kt)("admonition",p({},{type:"info"}),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"golangci-lint-action CI \u8017\u65f6\u975e\u5e38\u957f ",(0,r.kt)("a",p({parentName:"li"},{href:"https://github.com/golangci/golangci-lint-action/issues/297"}),"#297")))),(0,r.kt)("h2",p({},{id:"step"}),"step"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"id"),(0,r.kt)("li",{parentName:"ul"},"if name uses run shell with env continue-on-error timeout-minutes")),(0,r.kt)("h3",p({},{id:"uses"}),"uses"),(0,r.kt)("pre",null,(0,r.kt)("code",p({parentName:"pre"},{className:"language-yaml"}),"# {owner}/{repo}@{ref}\n# {owner}/{repo}/{path}@{ref}\n- uses: actions/checkout@v3\n- uses: actions/aws/ec2@main\n\n# \u76f8\u540c\u4ed3\u5e93 - \u9700\u8981\u5148 checkout\n# ./path/to/dir\n- uses: ./.github/actions/my-action\n# docker://{image}:{tag}\n# docker://{host}/{image}:{tag}\n- uses: docker://alpine:3.8\n- uses: docker://ghcr.io/OWNER/IMAGE_NAME\n- uses: docker://gcr.io/cloud-builders/gradle\n\n# private repo\n- uses: actions/checkout@v3\n  with:\n    repository: octocat/my-private-repo\n    ref: v1.0\n    token: ${{ secrets.PERSONAL_ACCESS_TOKEN }}\n    path: ./.github/actions/my-private-repo\n# from private repo\n- uses: ./.github/actions/my-private-repo/my-action\n")),(0,r.kt)("h2",p({},{id:"pnpm-template"}),"pnpm template"),(0,r.kt)("pre",null,(0,r.kt)("code",p({parentName:"pre"},{className:"language-yaml"}),"name: Build\n\non:\n  push:\n    branches: [master]\n  pull_request:\n    branches: [master]\n\njobs:\n  build:\n    runs-on: ubuntu-22.04\n\n    steps:\n      - uses: actions/checkout@v3\n      - name: Install Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 16\n      - uses: pnpm/action-setup@v2.0.1\n        name: Install pnpm\n        id: pnpm-install\n        with:\n          version: 7\n          run_install: false\n      - name: Get pnpm store directory\n        id: pnpm-cache\n        run: |\n          echo \"::set-output name=pnpm_cache_dir::$(pnpm store path)\"\n      - name: Build Cache\n        id: build-cache\n        uses: actions/cache@v2\n        with:\n          path: ${{ steps.pnpm-cache.outputs.pnpm_cache_dir }}\n          key: ${{ runner.os }}-pnpm-store-${{ hashFiles('**/pnpm-lock.yaml') }}\n          restore-keys: |\n            ${{ runner.os }}-pnpm-store-\n\n      # Real build\n      - run: make ci\n\n      - name: Deploy Pages\n        uses: JamesIves/github-pages-deploy-action@releases/v4\n        with:\n          branch: gh-pages\n          folder: out\n          single-commit: true\n")),(0,r.kt)("h1",p({},{id:"faq"}),"FAQ"),(0,r.kt)("h2",p({},{id:"compile-version-does-not-match-go-tool-version"}),"compile: version does not match go tool version"),(0,r.kt)("pre",null,(0,r.kt)("code",p({parentName:"pre"},{className:"language-yaml"}),"- name: Run CI\n  run: |\n    export PATH=${GOROOT}/bin:$PATH\n    go version\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",p({parentName:"li"},{href:"https://github.com/actions/setup-go/issues/107#issuecomment-854071850"}),"https://github.com/actions/setup-go/issues/107#issuecomment-854071850"))))}v.isMDXComponent=!0}}]);