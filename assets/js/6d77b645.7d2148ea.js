/*! For license information please see 6d77b645.7d2148ea.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[21517],{72463:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>c,toc:()=>h});var s=r(2488),i=r(62780);const t={title:"React Route"},l="React Route",c={id:"web/react/react-router",title:"React Route",description:"- remix-run/react-router",source:"@site/../notes/web/react/react-router.md",sourceDirName:"web/react",slug:"/web/react/router",permalink:"/notes/web/react/router",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/react/react-router.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1663838677,formattedLastUpdatedAt:"Sep 22, 2022",frontMatter:{title:"React Route"},sidebar:"docs",previous:{title:"react-querybuilder",permalink:"/notes/web/react/querybuilder"},next:{title:"react-spectrum",permalink:"/notes/web/react/spectrum"}},d={},h=[{value:"Notes",id:"notes",level:2},{value:"React Router v6",id:"react-router-v6",level:2},{value:"Switch vs Route",id:"switch-vs-route",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"react-route",children:"React Route"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router",children:"remix-run/react-router"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u6838\u5fc3 ",(0,s.jsx)(n.a,{href:"https://github.com/remix-run/history",children:"remix-run/history"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e0d\u80fd\u5d4c\u5957 Router"}),"\n",(0,s.jsx)(n.li,{children:"children \u7edd\u5bf9\u8def\u5f84\u9700\u8981\u5305\u542b parent \u524d\u7f00"}),"\n",(0,s.jsxs)(n.li,{children:["NavLink \u4f7f\u7528 routerState \u4f1a\u6bcf\u6b21 rerender\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router/blob/f722d7fda7a5aff1d90fdc2d8cf51f14f7870376/packages/react-router-dom/index.tsx#L427-L501",children:"react-router-dom/index.tsx#L427-L501"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["useNavigate \u4f1a rerender ",(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/7634",children:"#7634"})]}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm add react-router-dom\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Path\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"*"})," - \u5904\u7406 NotFound"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:":handle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"const { handle } = useParams()"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsx)(n.admonition,{title:"v6",type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/7634",children:"react-router#7634"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"useNavigate \u4f1a\u5bfc\u81f4 rerender"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/8139",children:"react-router#8139"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"usePrompt & useBlocker"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/8254",children:"react-router#8254"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"path regex"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router/issues/8381",children:"react-router#8381"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Optional routing parameters in v6"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Router - \u4e0d\u80fd\u5d4c\u5957\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["NavigationContext - { basename, navigator, static }\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"useNavigate"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["LocationContext - { location, navigationType }\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"useLocation"}),"\n",(0,s.jsx)(n.li,{children:"useNavigationType"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"stripBasename - \u5b9e\u73b0 basename \u80fd\u529b"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Routes\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"createRoutesFromChildren"}),"\n",(0,s.jsxs)(n.li,{children:["useRoutes - \u652f\u6301\u81ea\u5b9a\u4e49 location - \u9ed8\u8ba4\u4f7f\u7528\u4e0a\u4e0b\u6587 location\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"matchRoutes - \u5339\u914d\u79fb\u9664 parentPathnameBase"}),"\n",(0,s.jsxs)(n.li,{children:["renderMatches\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"RouteContext - { outlet, matches }"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["matchRoutes\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["flattenRoutes\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["computeScore\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"segments.length +"}),"\n",(0,s.jsxs)(n.li,{children:["splatPenalty=-1 - ",(0,s.jsx)(n.code,{children:"*"})]}),"\n",(0,s.jsxs)(n.li,{children:["indexRouteValue=2 - ",(0,s.jsx)(n.code,{children:"index: true"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"index \u8def\u7531\u4e0d\u80fd\u6709 children"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["dynamicSegmentValue=3 - ",(0,s.jsx)(n.code,{children:":id"})]}),"\n",(0,s.jsxs)(n.li,{children:["emptySegmentValue=1 - ",(0,s.jsx)(n.code,{children:'""'})]}),"\n",(0,s.jsxs)(n.li,{children:["staticSegmentValue=10 - ",(0,s.jsx)(n.code,{children:"/user"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"rankRouteBranches"}),"\n",(0,s.jsx)(n.li,{children:"matchRouteBranch"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"version",children:"Version"}),"\n",(0,s.jsx)(n.h2,{id:"react-router-v6",children:"React Router v6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u66ff\u4ee3 React Router v3,v4,v5, Reach Router"}),"\n",(0,s.jsxs)(n.li,{children:["\u652f\u6301 \u5d4c\u5957\u8def\u7531\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<Outlet/>"})," \u6e32\u67d3\u4e0b\u4e00\u4e2a\u5339\u914d"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301 \u76f8\u5bf9\u8def\u5f84"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301 basename - \u8def\u7531\u66f4\u52a0\u901a\u7528\uff0c\u65b9\u4fbf\u5d4c\u5957"}),"\n",(0,s.jsxs)(n.li,{children:["\u5185\u7f6e RouterObject - \u76f4\u63a5 JS \u914d\u7f6e\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"useRoutes"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u7eaf Hook \u91cd\u5199 - \u8981\u6c42 React 16.8+"}),"\n",(0,s.jsxs)(n.li,{children:["\u4e0d\u518d\u9700\u8981 exact - \u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"*"})," \u8fdb\u884c\u4efb\u610f\u5339\u914d"]}),"\n",(0,s.jsx)(n.li,{children:"element \u66ff\u4ee3 component \u548c render"}),"\n",(0,s.jsx)(n.li,{children:"\u57fa\u4e8e rank \u7684\u8def\u7531\u4f18\u5148\u7ea7"}),"\n",(0,s.jsxs)(n.li,{children:["\u4e0d\u518d\u4f7f\u7528 path-to-regexp - \u56e0\u6b64\u8def\u5f84\u5199\u6cd5\u4f1a\u6709\u533a\u522b\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/remix-run/react-router/discussions/8132",children:"https://github.com/remix-run/react-router/discussions/8132"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://reactrouter.com/docs/en/v6/getting-started/faq#what-happened-to-regexp-routes-paths",children:"What Happened to Regexp Routes Paths?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u65e0\u6cd5 Rank \u8def\u5f84"}),"\n",(0,s.jsxs)(n.li,{children:["bundle size \u8f83\u5927- 1/3 of react-router\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"path-to-regexp 6kB/2.2kB"}),"\n",(0,s.jsxs)(n.li,{children:["react-router - 11kB/4kB\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"history - 6kB/2kB"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"react-router-dom + 7kB/2kB"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://remix.run/blog/react-router-v6",children:"https://remix.run/blog/react-router-v6"})}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6682\u4e0d\u652f\u6301 Prompt"}),"\n",(0,s.jsxs)(n.li,{children:["\u4e0d\u518d\u66b4\u9732 history - \u4f7f\u7528\u4e0a\u6709\u5f88\u591a\u4e0d\u65b9\u4fbf\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53ef\u4f7f\u7528 unstable_HistoryRouter \u81ea\u5df1\u63d0\u4f9b history"}),"\n",(0,s.jsx)(n.li,{children:"\u53ef\u80fd\u5b58\u5728\u5f15\u5165\u4e0d\u540c\u7248\u672c history \u5bfc\u81f4\u51b2\u7a81\u7684\u95ee\u9898"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://reactrouter.com/docs/en/v6/upgrading/v5#upgrade-to-react-router-v6",children:"https://reactrouter.com/docs/en/v6/upgrading/v5#upgrade-to-react-router-v6"})}),"\n",(0,s.jsx)(n.li,{children:"Switch -> Routes"}),"\n",(0,s.jsx)(n.li,{children:"Redirect -> Navigate"}),"\n",(0,s.jsxs)(n.li,{children:["Link \u79fb\u9664 component \u719f\u6089\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u63a8\u8350\u4f7f\u7528\u9ed8\u8ba4 ",(0,s.jsx)(n.code,{children:"<a>"})]}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528 useLinkClickHandler \u6784\u5efa\u81ea\u5b9a\u4e49 Link"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["useHistory -> useNavigate,useSearchParams\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u63a5\u53e3\u4e0d\u4e00\u6837"}),"\n",(0,s.jsx)(n.li,{children:"useHistory \u8fd4\u56de history \u5b9e\u4f8b"}),"\n",(0,s.jsx)(n.li,{children:"useNavigate \u8fd4\u56de\u5c01\u88c5\u540e\u8f85\u52a9\u65b9\u6cd5"}),"\n",(0,s.jsx)(n.li,{children:"\u66f4\u597d\u7684\u652f\u6301 React suspense - useTransition"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<NavLink exact />"})," -> ",(0,s.jsx)(n.code,{children:"<NavLink end />"})]}),"\n",(0,s.jsx)(n.li,{children:"useRouteMatch -> useMatch"}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,s.jsx)(n.h2,{id:"switch-vs-route",children:"Switch vs Route"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"<Switch>"})," \u53ea\u6e32\u67d3\u4e00\u4e2a\u8def\u7531. \u800c ",(0,s.jsx)(n.code,{children:"<Route>"})," \u4f1a\u6e32\u67d3\u6240\u6709\u5339\u914d\u7684\u8def\u7531\u3002"]})]})}function a(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},38088:(e,n,r)=>{var s=r(96651),i=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(e,n,r){var s,t={},h=null,o=null;for(s in void 0!==r&&(h=""+r),void 0!==n.key&&(h=""+n.key),void 0!==n.ref&&(o=n.ref),n)l.call(n,s)&&!d.hasOwnProperty(s)&&(t[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===t[s]&&(t[s]=n[s]);return{$$typeof:i,type:e,key:h,ref:o,props:t,_owner:c.current}}n.Fragment=t,n.jsx=h,n.jsxs=h},2488:(e,n,r)=>{e.exports=r(38088)},62780:(e,n,r)=>{r.d(n,{I:()=>c,M:()=>l});var s=r(96651);const i={},t=s.createContext(i);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);