/*! For license information please see 26d96413.26e5e1bf.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[32050],{4807:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>a});var s=r(11527),c=r(47214);const t={title:"Cache-Control"},l="Cache-Control",o={id:"service/network/spec/http/http-cache",title:"Cache-Control",description:"- MDN Cache-Control",source:"@site/../notes/service/network/spec/http/http-cache.md",sourceDirName:"service/network/spec/http",slug:"/service/network/spec/http/cache",permalink:"/notes/service/network/spec/http/cache",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/spec/http/http-cache.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1680629704,formattedLastUpdatedAt:"Apr 4, 2023",frontMatter:{title:"Cache-Control"},sidebar:"docs",previous:{title:"HTTP",permalink:"/notes/service/network/spec/http/"},next:{title:"HTTP Extension",permalink:"/notes/service/network/spec/http/extensions"}},i={},a=[{value:"\u5e73\u53f0",id:"\u5e73\u53f0",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"cache-control",children:"Cache-Control"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["MDN ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control",children:"Cache-Control"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching",children:"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://support.cloudflare.com/hc/en-us/articles/115003206852-Understanding-Origin-Cache-Control",children:"https://support.cloudflare.com/hc/en-us/articles/115003206852-Understanding-Origin-Cache-Control"})}),"\n",(0,s.jsxs)(n.li,{children:["max-age=0 vs no-cache\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://stackoverflow.com/a/1383359/1870054",children:"https://stackoverflow.com/a/1383359/1870054"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match",children:"If-None-Match"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"W/"})," weak validator"]}),"\n",(0,s.jsx)(n.li,{children:"GET, HEAD"}),"\n",(0,s.jsx)(n.li,{children:"\u503c\u4e3a etag, \u5b58\u5728\u5219\u8fd4\u56de 304 Not Modified"}),"\n",(0,s.jsx)(n.li,{children:"\u4fee\u6539\u64cd\u4f5c, 412 Precondition Failed"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'If-None-Match: "<etag>"[, "<etag>"]'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8bf7\u6c42"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Cache-Control: max-age=<seconds>\nCache-Control: max-stale[=<seconds>]\nCache-Control: min-fresh=<seconds>\nCache-Control: no-cache\nCache-Control: no-store\nCache-Control: no-transform\nCache-Control: only-if-cached\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u54cd\u5e94"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Cache-Control: must-revalidate\nCache-Control: no-cache\nCache-Control: no-store\nCache-Control: no-transform\nCache-Control: public\nCache-Control: private\nCache-Control: proxy-revalidate\nCache-Control: max-age=<seconds>\nCache-Control: s-maxage=<seconds>\n\nCache-Control: immutable\nCache-Control: stale-while-revalidate=<seconds>\nCache-Control: stale-if-error=<seconds>\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"private - \u9762\u5411\u5355\u7528\u6237 - Authorization - browser \u7f13\u5b58"}),"\n",(0,s.jsx)(n.li,{children:"public - \u591a\u7528\u6237\u5171\u4eab\u7f13\u5b58 - proxy cache \u7f13\u5b58"}),"\n",(0,s.jsx)(n.li,{children:"post-check"}),"\n",(0,s.jsx)(n.li,{children:"pre-check"}),"\n",(0,s.jsxs)(n.li,{children:["immutable\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"max-age \u5185\u907f\u514d\u5c1d\u8bd5\u6821\u9a8c\u7f13\u5b58"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# \u5355\u4f4d\u4e3a\u79d2\nCache-Control: public, max-age=3600\nExpires: Thu, 01 Dec 2014 16:00:00 GMT\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Cache-Control: public, max-age=86400\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"static asset"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: no-store\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e0d\u7f13\u5b58"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: private, max-age=3600\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6d4f\u89c8\u5668\u7f13\u5b58\u4f46 Proxy \u4e0d\u7f13\u5b58"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: public, no-cache\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"prefer revalidation when served"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: public, no-cache, proxy-revalidate or Cache-Control: public, s-maxage=0\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cache assets in proxy caches but REQUIRE revalidation by the proxy when served"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: public, no-cache, must-revalidate\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cache assets in proxy caches, but REQUIRE revalidation by any cache when served"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: public, no-transform\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cache assets, but ensure the proxy does not modify it"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: public, max-age=3600, stale-if-error=60\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cache assets with revalidation, but allow stale responses if origin server is unreachable"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: public, max-age=7200, s-maxage=3600\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cache assets for different amounts of time on Cloudflare and in visitor browsers"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Cache-Control: max-age=600, stale-while-revalidate=30\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cache an asset and serve while asset is being revalidated"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developers.cloudflare.com/cache/about/cache-control",children:"https://developers.cloudflare.com/cache/about/cache-control"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5e73\u53f0",children:"\u5e73\u53f0"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["x-vercel-cache\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"HIT, MISS"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"x-vercel-id"}),"\n",(0,s.jsxs)(n.li,{children:["cf-cache-status\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"HIT, MISS, EXPIRED, DYNAMIC, BYPASS"}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},3354:(e,n,r)=>{var s=r(50959),c=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,r){var s,t={},a=null,h=null;for(s in void 0!==r&&(a=""+r),void 0!==n.key&&(a=""+n.key),void 0!==n.ref&&(h=n.ref),n)l.call(n,s)&&!i.hasOwnProperty(s)&&(t[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===t[s]&&(t[s]=n[s]);return{$$typeof:c,type:e,key:a,ref:h,props:t,_owner:o.current}}n.Fragment=t,n.jsx=a,n.jsxs=a},11527:(e,n,r)=>{e.exports=r(3354)},47214:(e,n,r)=>{r.d(n,{Z:()=>o,a:()=>l});var s=r(50959);const c={},t=s.createContext(c);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);