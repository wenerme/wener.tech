/*! For license information please see 08cfe771.85702f3a.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[93840],{10960:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>t,metadata:()=>c,toc:()=>p});var s=e(2488),i=e(62780);const t={title:"NPM"},o="NPM",c={id:"web/nodejs/npm",title:"NPM",description:"- npm download size",source:"@site/../notes/web/nodejs/npm.md",sourceDirName:"web/nodejs",slug:"/web/nodejs/npm",permalink:"/notes/web/nodejs/npm",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/nodejs/npm.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1708697175,formattedLastUpdatedAt:"Feb 23, 2024",frontMatter:{title:"NPM"},sidebar:"docs",previous:{title:"NPM Version",permalink:"/notes/web/nodejs/npm-version"},next:{title:"npmrc",permalink:"/notes/web/nodejs/npmrc"}},l={},p=[{value:".npmrc",id:"npmrc",level:2},{value:"registry",id:"registry",level:2},{value:"scope",id:"scope",level:2},{value:"workspaces",id:"workspaces",level:2},{value:"corepack",id:"corepack",level:2},{value:"Package",id:"package",level:2},{value:"Registry",id:"registry-1",level:2}];function d(n){const r={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",hr:"hr",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h1,{id:"npm",children:"NPM"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://arve0.github.io/npm-download-size/",children:"npm download size"})}),"\n",(0,s.jsxs)(r.li,{children:["cache\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"$HOME/.npm"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"%AppData%/npm-cache"})}),"\n",(0,s.jsx)(r.li,{children:"--cache"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://www.runpkg.com/",children:"https://www.runpkg.com/"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://deps.dev/",children:"https://deps.dev/"})}),"\n"]}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["NODE_ENV=production \u6216 --production \u65f6 npm ci/install \u4e0d\u4f1a\u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"npm ci --include=dev"})," \u5f3a\u5236\u5b89\u88c5 dev"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",metastring:'title="\u5efa\u8bae\u9650\u5b9a\u7248\u672c"',children:'{\n  "engines": {\n    "node": "14",\n    "npm": "8"\n  }\n}\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"du -hs ~/.npm/_cacache/ # \u67e5\u770b\u672c\u5730\u7f13\u5b58\u5927\u5c0f\nnpm config get prefix   # bin \u76ee\u5f55\nnpm list -g --depth=0   # \u5168\u5c40\u6a21\u5757 - \u7b2c\u4e00\u884c\u4e3a\u76ee\u5f55\uff0c\u4f8b\u5982 /usr/local/lib\nnpm root -g\n\nexport NODE_PATH=$(npm root -g) # \u80fd import \u5168\u5c40\u7684\u5305\nnode -p process.config.variables.node_prefix\n"})}),"\n",(0,s.jsx)(r.h2,{id:"npmrc",children:".npmrc"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"~/.npmrc"}),"\n",(0,s.jsx)(r.li,{children:"/etc/npmrc"}),"\n",(0,s.jsx)(r.li,{children:"/usr/lib/node_modules/npm/npmrc"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ini",children:"# \u6709\u65f6\u5019\u955c\u50cf\u4e0d\u5339\u914d\n# registry=https://registry.npmmirror.com/\n# \u901f\u5ea6\u8fd8\u884c\nregistry=https://registry.npmjs.org\n\ndisturl=https://npmmirror.com/mirrors/node/\nsharp_binary_host=https://npmmirror.com/mirrors/sharp/\nsharp_libvips_binary_host=https://npmmirror.com/mirrors/sharp-libvips/\nnode_sqlite3_binary_host_mirror=https://npmmirror.com/mirrors/sqlite3/\nbetter-sqlite3_binary_host=https://npmmirror.com/mirrors/sharp-libvips/\n"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ini",children:'# \u4e0d\u63a8\u8350 - \u7ecf\u5e38\u51fa\u73b0\u56e0\u4e3a\u955c\u50cf\u95ee\u9898\u6784\u5efa\u5931\u8d25\n#registry="https://registry.npmmirror.com"\ndisturl=https://npmmirror.com/mirrors/node\nchromedriver_cdnurl=https://npmmirror.com/mirrors/chromedriver\nelectron_mirror=https://npmmirror.com/mirrors/electron/\nfse_binary_host_mirror=https://npmmirror.com/mirrors/fsevents\nnode_inspector_cdnurl=https://npmmirror.com/mirrors/node-inspector\nnodejs_org_mirror=https://npmmirror.com/mirrors/node\nnvm_nodejs_org_mirror=https://npmmirror.com/mirrors/node\noperadriver_cdnurl=https://npmmirror.com/mirrors/operadriver\nphantomjs_cdnurl=https://npmmirror.com/mirrors/phantomjs\nprofiler_binary_host_mirror=https://npmmirror.com/mirrors/node-inspector/\npuppeteer_download_host=https://npmmirror.com/mirrors/\nsass_binary_site=https://npmmirror.com/mirrors/node-sass\nselenium_cdnurl=https://npmmirror.com/mirrors/selenium\nSQLITE3_BINARY_SITE=https://npmmirror.com/mirrors/sqlite3\nsharp_binary_host=https://npmmirror.com/mirrors/sharp\nsharp_libvips_binary_host=https://npmmirror.com/mirrors/sharp-libvips\ncanvas_binary_host=https://npmmirror.com/mirrors/node-canvas-prebuilt/\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# _binary_host_mirror\n# npm view sqlite3 binary.module_name\nnode_sqlite3_binary_host_mirror=https://npmmirror.com/mirrors/sqlite3\n"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["disturl\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["gyp \u4e0b\u8f7d\u6784\u5efa\u4f9d\u8d56 ",(0,s.jsx)(r.a,{href:"https://nodejs.org/download/release/v16.16.0/node-v16.16.0-headers.tar.gz",children:"https://nodejs.org/download/release/v16.16.0/node-v16.16.0-headers.tar.gz"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://registry.npmmirror.com/binary.html",children:"https://registry.npmmirror.com/binary.html"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://docs.npmjs.com/cli/v6/configuring-npm/npmrc",children:"https://docs.npmjs.com/cli/v6/configuring-npm/npmrc"})}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"registry",children:"registry"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"url"}),(0,s.jsx)(r.th,{children:"from"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://registry.npmjs.org",children:"https://registry.npmjs.org"})}),(0,s.jsx)(r.td,{children:"\u5b98\u65b9"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://mirrors.sjtug.sjtu.edu.cn/npm-registry",children:"https://mirrors.sjtug.sjtu.edu.cn/npm-registry"})}),(0,s.jsx)(r.td,{children:"\u4e0a\u6d77\u4ea4\u5927"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://registry.npmmirror.com",children:"https://registry.npmmirror.com"})}),(0,s.jsx)(r.td,{children:"\u6dd8\u5b9d"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.del,{children:(0,s.jsx)(r.a,{href:"https://r.cnpmjs.org",children:"https://r.cnpmjs.org"})})}),(0,s.jsx)(r.td,{})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.del,{children:(0,s.jsx)(r.a,{href:"https://registry.npm.taobao.org",children:"https://registry.npm.taobao.org"})})}),(0,s.jsx)(r.td,{children:"\u6dd8\u5b9d"})]})]})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["npmmirror\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://registry.npmmirror.com/binary.html",children:"https://registry.npmmirror.com/binary.html"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"\u955c\u50cf\u7684\u4e00\u4e9b\u4e8c\u8fdb\u5236"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\u89e6\u53d1\u540c\u6b65\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://npmmirror.com/sync/ohm-grammar-miniquery",children:"https://npmmirror.com/sync/ohm-grammar-miniquery"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://npmmirror.com/sync/@wener/reaction",children:"https://npmmirror.com/sync/@wener/reaction"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# \u539f\u59cb\nnpm_config_registry=https://registry.npmjs.org\nnpm i --registry=https://registry.npmjs.org\n\n# \u6dd8\u5b9d\u955c\u50cf\nnpm i --registry=https://registry.npm.taobao.org\n# \u4e0a\u6d77\u4ea4\u5927\u955c\u50cf\nnpm ci --registry=https://mirrors.sjtug.sjtu.edu.cn/npm-registry\n# npx \u4f7f\u7528\u955c\u50cf\nnpm_config_registry=https://registry.npm.taobao.org npx @scoped/package\n#\nnpx --registry=https://registry.npmjs.org -y cubejs-cli create demo-cube -d postgres\n\n# musl \u624b\u52a8\u5b89\u88c5 sharp\n# \u6709\u53ef\u80fd\u6700\u65b0\u7248\u7684 libvips \u65e0\u955c\u50cf\uff0c\u56e0\u6b64\u6ce8\u610f\u7248\u672c\u9009\u62e9\n# libvips v8.13.1 \u65e0\u955c\u50cf\n# https://registry.npmmirror.com/binary.html?path=sharp-libvips/v8.13.1/\nnpm install --verbose --platform=linux --libc=musl sharp@^0.30\n"})}),"\n",(0,s.jsx)(r.h2,{id:"scope",children:"scope"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://docs.npmjs.com/getting-started/scoped-packages",children:"https://docs.npmjs.com/getting-started/scoped-packages"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://docs.npmjs.com/private-modules/intro",children:"https://docs.npmjs.com/private-modules/intro"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://docs.npmjs.com/misc/scope",children:"https://docs.npmjs.com/misc/scope"})}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# \u6dfb\u52a0\u4e00\u4e2a scope\nnpm login --registry=https://reg.wener.me/nexus/repository/npm-internal/ --scope=@wener\n# \u6dfb\u52a0\u540e\u53ef\u4fee\u6539\u5173\u8054\u7684\u4ed3\u5e93\nnpm config set @wener:registry https://reg.wener.me/nexus/repository/npm-internal/\n# \u521d\u59cb\u5316\u65f6\u53ef\u4ee5\u4f7f\u7528\u6307\u5b9a\u7684 scope, \u5305\u540d\u4e2d\u4f1a\u52a0\u4e0a  @wener\nnpm init --scope=wener\n# \u53d1\u5e03\u662f\u4f1a\u53d1\u5f80 @wener \u7684\u4ed3\u5e93\u4e2d\nnpm publish\n# \u5b89\u88c5\u6307\u5b9a scope \u4e2d\u7684\u6a21\u5757\nnpm install @wener/wener-test\n# \u53ef\u4ee5\u8bbe\u7f6e\u5f53\u524d\u7684\u5168\u5c40 scope\nnpm config set scope wener\n"})}),"\n",(0,s.jsx)(r.h2,{id:"workspaces",children:"workspaces"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/npm/rfcs/blob/latest/implemented/0026-workspaces.md",children:"npm workspaces"})}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "name": "workspace-example",\n  "version": "1.0.0",\n  // \u4e24\u79cd\u683c\u5f0f\n  "workspaces": ["packages/*"],\n  "workspaces": {\n    "packages": ["packages/*"]\n  }\n}\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"npm ls\n# \u6dfb\u52a0\u4f9d\u8d56\u5230 workspace\nnpm add -w @wener/apis-weaver systemjs\n# \u4f9d\u8d56\u53e6\u5916\u4e00\u4e2a workspace - \u4e0d\u80fd\u5728 module add - \u4f1a\u62a5\u627e\u4e0d\u5230\nnpm add -w @wener/apis-weaver @wener/apis-core\n# npx \u5728 ws \u4e0b\u6267\u884c\nnpx -w @wener/apis-weaver typesync\n# run \u5728 ws \u4e0b\u6267\u884c - \u6ce8\u610f path.resolve \u8fd8\u662f\u57fa\u4e8e ws \u8def\u5f84\u800c\u4e0d\u662f\u5f53\u524d\u8def\u5f84\nnpm run -w @wener/apis-weaver build\n"})}),"\n",(0,s.jsx)(r.h2,{id:"corepack",children:"corepack"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"corepack enable\n"})}),"\n",(0,s.jsx)(r.h2,{id:"package",children:"Package"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",metastring:'title="package.json"',children:'{\n  // cjs\n  "main": "./main.js",\n  // esm\n  "module": "./index.js",\n  "types": "./index.d.ts",\n  "unpkg": "./umd/react-router-dom.production.min.js",\n\n  // \u591a\u4e2a entry - \u8bbf\u95ee\u9664\u6b64\u4e4b\u5916\u7684\u4f1a\u88ab\u62d2\u7edd\n  "exports": {\n    ".": {\n      "require": "./index.cjs",\n      "import": "./index.mjs",\n      "default": "./index.js"\n    },\n    "./package.json": "./package.json",\n    "./extra": "./jsx-runtime.cjs"\n  },\n\n  // \u662f\u5426\u6709\u5168\u5c40\u64cd\u4f5c\n  "sideEffects": false\n}\n'})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",metastring:'title="main.js"',children:"'use strict';\n\n/* eslint-env node */\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./umd/react-router-dom.production.min.js');\n} else {\n  module.exports = require('./umd/react-router-dom.development.js');\n}\n"})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Pure ESM package\n",(0,s.jsx)(r.a,{href:"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c",children:"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"registry-1",children:"Registry"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"curl -sfL 'https://registry.npmmirror.com/@wener/reaction' | jq -r '.\"dist-tags\".latest'\ncurl -sfL 'https://registry.npmmirror.com/@wener/reaction/latest' | jq -r '.version'\n"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\u5143\u6570\u636e\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"GET /"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"GET /-/all"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"GET /-/"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\u5305\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"GET /{package}"})}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"GET /{package}/{version}"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"version \u53ef\u4ee5\u662f latest"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"GET /-/v1/search"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"text, size, from, quality, popularity, maintenance"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/npm/registry/blob/master/docs/REGISTRY-API.md",children:"https://github.com/npm/registry/blob/master/docs/REGISTRY-API.md"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/npm/registry/blob/master/docs/user/authentication.md",children:"https://github.com/npm/registry/blob/master/docs/user/authentication.md"})}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'# basic \u652f\u6301\u8bbf\u95ee private \u5185\u5bb9\ncurl -u username:password https://registry.npmjs.org/@org/pkg\n\ncurl -u user:pass https://registry.npmjs.org/-/npm/v1/tokens\ncurl -u user:pass -X POST \\\n  --json \'{"password":"","readonly":true}\' \\\n  https://registry.npmjs.org/-/npm/v1/tokens\n'})})]})}function m(n={}){const{wrapper:r}={...(0,i.M)(),...n.components};return r?(0,s.jsx)(r,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},38088:(n,r,e)=>{var s=e(96651),i=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function p(n,r,e){var s,t={},p=null,d=null;for(s in void 0!==e&&(p=""+e),void 0!==r.key&&(p=""+r.key),void 0!==r.ref&&(d=r.ref),r)o.call(r,s)&&!l.hasOwnProperty(s)&&(t[s]=r[s]);if(n&&n.defaultProps)for(s in r=n.defaultProps)void 0===t[s]&&(t[s]=r[s]);return{$$typeof:i,type:n,key:p,ref:d,props:t,_owner:c.current}}r.Fragment=t,r.jsx=p,r.jsxs=p},2488:(n,r,e)=>{n.exports=e(38088)},62780:(n,r,e)=>{e.d(r,{I:()=>c,M:()=>o});var s=e(96651);const i={},t=s.createContext(i);function o(n){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function c(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),s.createElement(t.Provider,{value:r},n.children)}}}]);