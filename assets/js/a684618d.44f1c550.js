"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[84668],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return k}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(a),k=r,d=m["".concat(s,".").concat(k)]||m[k]||u[k]||l;return a?n.createElement(d,i(i({ref:t},p),{},{components:a})):n.createElement(d,i({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<l;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},47744:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var n=a(87462),r=a(63366),l=(a(67294),a(3905)),i=["components"],o={title:"tailscale"},s=void 0,c={unversionedId:"service/network/tailscale",id:"service/network/tailscale",title:"tailscale",description:"- tailscale/tailscale",source:"@site/notes/service/network/tailscale.md",sourceDirName:"service/network",slug:"/service/network/tailscale",permalink:"/notes/service/network/tailscale",editUrl:"https://github.com/wenerme/wener/edit/master/notes/service/network/tailscale.md",tags:[],version:"current",frontMatter:{title:"tailscale"},sidebar:"docs",previous:{title:"stun",permalink:"/notes/service/network/stun"},next:{title:"Teleport",permalink:"/notes/service/network/teleport"}},p=[{value:"Notes",id:"notes",children:[],level:2}],u={toc:p};function m(e){var t=e.components,a=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/tailscale/tailscale"},"tailscale/tailscale"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"BSD-3, Go"),(0,l.kt)("li",{parentName:"ul"},"taildrop",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7c7b\u4f3c Airdrop \u80fd\u529b"))))),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"li",href:"/notes/service/network/headscale"},"headscale")," \u63d0\u4f9b\u63a7\u5236\u670d\u52a1"),(0,l.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://tailscale.com/kb/1086/tailscale-vs-wireguard"},"WireGuard vs. Tailscale")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://tailscale.com/kb/1080/cli"},"Tailscale CLI")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://tailscale.com/pricing/#comparison"},"\u4ef7\u683c"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Free - 1 User, 1 Admin, 1 ACL, 20 Devices, 1 Subnet routers"),(0,l.kt)("li",{parentName:"ul"},"Team - 60$/User/Year - 5/Devices/User, 5 Subnet routers, 2 Admin, 5 Users in ACL")))))),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"Linux \u4e0b\u4f7f\u7528\u7684 \u7528\u6237\u7a7a\u95f4 wg \u5b9e\u73b0 - \u6027\u80fd\u5f31\u4e8e wg",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Kernel implementation of tstun ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/tailscale/tailscale/issues/3264"},"#3264")),(0,l.kt)("li",{parentName:"ul"},"Linux kernel Wireguard data plane ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/tailscale/tailscale/issues/426"},"#426")))),(0,l.kt)("li",{parentName:"ul"},"macOS GUI, iOS, Android \u4e0d\u652f\u6301\u4fee\u6539 control server",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53ea\u6709\u547d\u4ee4\u884c\u624d\u53ef\u4ee5\u4fee\u6539 control server")))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# --accept-dns - \u9ed8\u8ba4\u5f00\u542f\n# --accept-routes - \u9ed8\u8ba4\u5173\u95ed\n# --advertise-exit-node\n# --advertise-routes=<ip>\n# --advertise-tags=<tags>\n# --authkey=<key>\n# --exit-node=<ip>\n# --force-reauth\n# --host-routes\n# --hostname=<name>\n# --operator=<user>\n# --operator=<user>\n# --qr\n# --reset\n# --shields-up\ntailscale up --login-server http://192.168.1.2:8080\n\ntailscale down\n\ntailscale ip\n# \u4e0b\u6b21 up \u9700\u8981\u91cd\u65b0\u6388\u6743\ntailscale logout\n# \u7f51\u7edc\u72b6\u51b5\ntailscale netcheck\n\ntailscale ping host\ntailscale status\ntailscale web\n")),(0,l.kt)("h2",{id:"notes"},"Notes"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8bb0\u5f55\u7684 JSON \u72b6\u6001",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"/var/lib/tailscale/tailscaled.state"))),(0,l.kt)("li",{parentName:"ul"},"DNS",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4fee\u6539 /etc/resolv.conf"),(0,l.kt)("li",{parentName:"ul"},"\u5907\u4efd\u4e4b\u524d\u914d\u7f6e /etc/resolv.pre-tailscale-backup.conf"))),(0,l.kt)("li",{parentName:"ul"},"DERP - Encrypted TCP relays")),(0,l.kt)("h1",{id:"glossary"},"Glossary"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Exit Node",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8def\u7531\u6240\u6709\u6d41\u91cf - \u7c7b\u4f3c\u4f20\u7edf VPN \u65b9\u5f0f - 0.0.0.0/0"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tailscale up --advertise-exit-node")," \u5141\u8bb8\u8282\u70b9\u4f5c\u4e3a Exit Node"),(0,l.kt)("li",{parentName:"ul"},"\u4f1a\u6dfb\u52a0 tag - \u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"is:exit-node")," \u8fc7\u6ee4"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tailscale up --exit-node=<exit-node-ip>")," \u5ba2\u6237\u7aef\u9009\u62e9 Exit Node"))),(0,l.kt)("li",{parentName:"ul"},"MagicDNS",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u4f7f\u7528 hostname \u8bbf\u95ee\u8bbe\u5907"),(0,l.kt)("li",{parentName:"ul"},"\u8fd8\u4f1a\u6dfb\u52a0 search domain \u901a\u8fc7 \u7f51\u5740\u57df\u540d\u8bbf\u95ee"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"--accept-dns=false")," \u5173\u95ed")))))}m.isMDXComponent=!0}}]);