"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[41316],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return k}});var l=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,l,i=function(e,t){if(null==e)return{};var a,l,i={},n=Object.keys(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=l.createContext({}),u=function(e){var t=l.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},m=function(e){var t=u(e.components);return l.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},c=l.forwardRef((function(e,t){var a=e.components,i=e.mdxType,n=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),c=u(a),k=i,N=c["".concat(p,".").concat(k)]||c[k]||s[k]||n;return a?l.createElement(N,r(r({ref:t},m),{},{components:a})):l.createElement(N,r({ref:t},m))}));function k(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=a.length,r=new Array(n);r[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var u=2;u<n;u++)r[u]=a[u];return l.createElement.apply(null,r)}return l.createElement.apply(null,a)}c.displayName="MDXCreateElement"},91638:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return p},metadata:function(){return u},toc:function(){return m},default:function(){return c}});var l=a(87462),i=a(63366),n=(a(67294),a(3905)),r=["components"],o={title:"Apache NiFi"},p=void 0,u={unversionedId:"service/data/nifi",id:"service/data/nifi",title:"Apache NiFi",description:"- apache/nifi",source:"@site/notes/service/data/nifi.md",sourceDirName:"service/data",slug:"/service/data/nifi",permalink:"/notes/service/data/nifi",editUrl:"https://github.com/wenerme/wener/edit/master/notes/service/data/nifi.md",tags:[],version:"current",frontMatter:{title:"Apache NiFi"},sidebar:"docs",previous:{title:"airbyte",permalink:"/notes/service/data/airbyte"},next:{title:"\u6570\u636e",permalink:"/notes/service/data/"}},m=[{value:"Notes",id:"notes",children:[],level:2},{value:"Glossary",id:"glossary",children:[],level:2},{value:"Driver",id:"driver",children:[],level:2},{value:"Processor",id:"processor",children:[],level:2},{value:"FlowFile",id:"flowfile",children:[],level:2},{value:"EL",id:"el",children:[],level:2},{value:"Registry",id:"registry",children:[],level:2},{value:"JOLT",id:"jolt",children:[],level:2},{value:"Illegal initial character: ?column?",id:"illegal-initial-character-column",children:[],level:2},{value:"Record does not have a value for the UpdateKey column",id:"record-does-not-have-a-value-for-the-updatekey-column",children:[],level:2},{value:"\u591a\u503c\u53c2\u6570",id:"\u591a\u503c\u53c2\u6570",children:[],level:2},{value:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6",id:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6",children:[],level:2},{value:"h2 java.lang.IllegalStateException: The file is locked",id:"h2-javalangillegalstateexception-the-file-is-locked",children:[],level:2},{value:"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup",id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup",children:[],level:2}],s={toc:m};function c(e){var t=e.components,a=(0,i.Z)(e,r);return(0,n.kt)("wrapper",(0,l.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi"},"apache/nifi"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Cloudera Dataflow Pipeline"))),(0,n.kt)("li",{parentName:"ul"},"nifi-stateless"),(0,n.kt)("li",{parentName:"ul"},"nifi-registry",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"NiFi Process Group \u7248\u672c\u7ba1\u7406 - Flow \u4ed3\u5e93"))),(0,n.kt)("li",{parentName:"ul"},"minifi",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u8f7b\u91cf\u7ea7\u7684 NiFi - \u652f\u6301\u90e8\u5206\u529f\u80fd"),(0,n.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e Edge \u90e8\u7f72"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi-minifi-cpp"},"apache/nifi-minifi-cpp"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"C++"),(0,n.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e Ingest \u548c\u6700\u7ec8\u8f93\u51fa"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi/tree/main/minifi"},"minifi"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Java"),(0,n.kt)("li",{parentName:"ul"},"\u529f\u80fd\u6309\u9700\u6253\u5305 - NAR"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi-fds"},"apache/nifi-fds")," - Flow Design System",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u524d\u7aef\u7ec4\u4ef6"),(0,n.kt)("li",{parentName:"ul"},"Angular"))),(0,n.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/user-guide.html"},"User Guide")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html"},"Administration Guide")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/nifi-in-depth.html"},"NiFi In Depth")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://dev.to/tspannhw/simple-change-data-capture-cdc-with-sql-selects-via-apache-nifi-flank-19m4"},"Simple Change Data Capture (CDC) with SQL Selects via Apache NiFi (FLaNK)"))))),(0,n.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("ul",{parentName:"div"},(0,n.kt)("li",{parentName:"ul"},"\u4e00\u4e2a NiFi \u5b9e\u4f8b\u53ea\u6709\u4e00\u4e2a flow",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u901a\u8fc7 Process Group \u7ba1\u7406\u591a\u7ec4\u903b\u8f91"))),(0,n.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4 bootstrap.conf \u4e3a -Xmx512m",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u6b63\u5e38\u4f7f\u7528\u591a\u534a\u4e0d\u591f")))))),(0,n.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("ul",{parentName:"div"},(0,n.kt)("li",{parentName:"ul"},"\u5904\u7406\u8fc7\u7a0b\u5c3d\u91cf\u4f7f\u7528 Avro",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u9762\u5411\u884c"),(0,n.kt)("li",{parentName:"ul"},"\u5305\u542b schema \u4fe1\u606f"),(0,n.kt)("li",{parentName:"ul"},"\u6bd4 JSON \u652f\u6301\u66f4\u591a\u7c7b\u578b - \u4f8b\u5982: DB \u63d2\u5165\u7684 Date \u5217\u7684\u65f6\u5019\uff0cJSON \u53ef\u80fd\u5931\u8d25\u3002")))))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# Docker \u542f\u52a8\n# ===========\n# https://hub.docker.com/r/apache/nifi\n# NIFI_HOME /opt/nifi/nifi-current\n# NIFI_TOOLKIT_HOME /opt/nifi/nifi-toolkit-current\n# -v $PWD/data:/opt/nifi/nifi-current\n# \u5bc6\u7801\u81f3\u5c11 12 \u4f4d\n# \u811a\u672c\u91cc\u5217\u4e3e\u4e86\u652f\u6301\u7684\u53d8\u91cf\n# https://github.com/apache/nifi/blob/main/nifi-docker/dockerhub/sh/start.sh\ndocker run --rm -it \\\n  -p 8443:8443 \\\n  -e SINGLE_USER_CREDENTIALS_USERNAME=admin \\\n  -e SINGLE_USER_CREDENTIALS_PASSWORD=000000000000 \\\n  --name nifi apache/nifi\n\n# \u542f\u52a8\u540e\ndocker exec -it nifi bash\n./bin/nifi.sh status\n\n# \u672c\u5730 \u542f\u52a8\n# ===========\n./bin/nifi.sh set-single-user-credentials admin 000000000000\n./bin/nifi.sh start   # \u542f\u52a8\n./bin/nifi.sh status  # \u67e5\u770b\u72b6\u6001\n# \u65e5\u5fd7\ntail -F logs/nifi-app.log\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"/",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"logs/"),(0,n.kt)("li",{parentName:"ul"},"conf/",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"flow.xml.gz"),(0,n.kt)("li",{parentName:"ul"},"bootstrap.conf",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u63d0\u4f9b JVM \u76f8\u5173\u53c2\u6570"))),(0,n.kt)("li",{parentName:"ul"},"nifi.properties"),(0,n.kt)("li",{parentName:"ul"},"login-identity-providers.xml"),(0,n.kt)("li",{parentName:"ul"},"authorizers.xml"),(0,n.kt)("li",{parentName:"ul"},"state-management.xml"),(0,n.kt)("li",{parentName:"ul"},"stateless.properties"),(0,n.kt)("li",{parentName:"ul"},"zookeeper.properties",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5185\u7f6e Zookeeper \u7684\u914d\u7f6e"))))),(0,n.kt)("li",{parentName:"ul"},"content_repository/"),(0,n.kt)("li",{parentName:"ul"},"database_repository/ - H2",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"nifi-flow-audit.mv.db"),(0,n.kt)("li",{parentName:"ul"},"nifi-identity-providers.mv.db"))),(0,n.kt)("li",{parentName:"ul"},"flowfile_repository/"),(0,n.kt)("li",{parentName:"ul"},"provenance_repository/ - \u5185\u7f6e Lucene"),(0,n.kt)("li",{parentName:"ul"},"state/"),(0,n.kt)("li",{parentName:"ul"},"extensions/ - \u7a7a\u76ee\u5f55 -"),(0,n.kt)("li",{parentName:"ul"},"work/",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"nar/",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"extensions/",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"*.nar-unpacked"),"/"))),(0,n.kt)("li",{parentName:"ul"},"framework/",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"nifi-framework-nar-1.15.2.nar-unpacked/"))))),(0,n.kt)("li",{parentName:"ul"},"jetty/",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"*.war"))))))))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curl -O https://jdbc.postgresql.org/download/postgresql-42.3.3.jar\ndocker exec -it nifi mkdir -p /opt/nifi/lib\ndocker cp postgresql-42.3.3.jar nifi:/opt/nifi/lib\n")),(0,n.kt)("h2",{id:"notes"},"Notes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u96c6\u7fa4\u4f7f\u7528 zookeeper \u7ba1\u7406\u72b6\u6001"),(0,n.kt)("li",{parentName:"ul"},"\u652f\u6301\u4f7f\u7528\u5185\u7f6e\u7684 zookeeper"),(0,n.kt)("li",{parentName:"ul"},"\u5f03\u7528 Variable \uff0c\u4f7f\u7528 Parameter"),(0,n.kt)("li",{parentName:"ul"},"record-oriented",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5728 record \u4e4b\u524d\uff0c\u5185\u90e8\u7ed3\u6784\u90fd\u4ee5 avro \u4e3a\u4e3b"),(0,n.kt)("li",{parentName:"ul"},"\u5f15\u5165 record \u62bd\u79bb reader, writer")))),(0,n.kt)("h2",{id:"glossary"},"Glossary"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"NAR - NiFi Archive",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u63d0\u4f9b Java ClassLoader isolation")))),(0,n.kt)("h2",{id:"driver"},"Driver"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"postgresql",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"org.postgresql.Driver"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://jdbc.postgresql.org/download.html"},"https://jdbc.postgresql.org/download.html")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar"},"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar"))))),(0,n.kt)("h2",{id:"processor"},"Processor"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"PutFile",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5199\u5165\u5230\u76ee\u5f55\uff0c\u6587\u4ef6\u540d\u4e3a UUID\uff0c\u6bcf\u6b21\u4ea7\u751f\u4e00\u4e2a\u6587\u4ef6"))),(0,n.kt)("li",{parentName:"ul"},"PutS3, PutFTP, PutSSH"),(0,n.kt)("li",{parentName:"ul"},"PutRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Put \u5230 RecordSinkServices"))),(0,n.kt)("li",{parentName:"ul"},"PutDatabaseRecord"),(0,n.kt)("li",{parentName:"ul"},"QueryDatabaseTableRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u589e\u91cf\u67e5\u8be2"))),(0,n.kt)("li",{parentName:"ul"},"MergeRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5408\u5e76\u90e8\u5206 Record"),(0,n.kt)("li",{parentName:"ul"},"\u4f8b\u5982 \u7528\u4e8e\u5c0f\u6279\u91cf\u63d2\u5165"))),(0,n.kt)("li",{parentName:"ul"},"ValidateRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u57fa\u4e8e schema \u68c0\u67e5"))),(0,n.kt)("li",{parentName:"ul"},"\u8f6c\u6362",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"ConvertRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Avro, JSON, CSV \u7b49"))),(0,n.kt)("li",{parentName:"ul"},"JoltTransformRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"JOLT - JsOn Language for Transform"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/bazaarvoice/jolt"},"bazaarvoice/jolt"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Apache-2.0, Java"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://jolt-demo.appspot.com/"},"https://jolt-demo.appspot.com/")))),(0,n.kt)("li",{parentName:"ul"},"QueryRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u5185\u7f6e Calcite SQL \u5f15\u64ce\u5904\u7406 Flow \u6587\u4ef6"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"SELECT * FROM FLOWFILE")))),(0,n.kt)("li",{parentName:"ul"},"LookupRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u67e5\u8be2\u5916\u90e8 - \u4f8b\u5982 Redis"))),(0,n.kt)("li",{parentName:"ul"},"UpdateRecord"))),(0,n.kt)("li",{parentName:"ul"},"\u805a\u5408",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"PartitionRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5206\u7ec4"))),(0,n.kt)("li",{parentName:"ul"},"SplitRecord",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5206\u7ec4\u53d8\u5355\u884c")))))),(0,n.kt)("h2",{id:"flowfile"},"FlowFile"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"FlowFile",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"org.apache.nifi.flowfile.attributes.CoreAttributes",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"filename"),(0,n.kt)("li",{parentName:"ul"},"uuid"),(0,n.kt)("li",{parentName:"ul"},"path"),(0,n.kt)("li",{parentName:"ul"},"absolute.path"),(0,n.kt)("li",{parentName:"ul"},"priority"),(0,n.kt)("li",{parentName:"ul"},"mime.type",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"application/avro-binary"))),(0,n.kt)("li",{parentName:"ul"},"alternate.identifier"))),(0,n.kt)("li",{parentName:"ul"},"Standard FlowFile Attributes",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"fileSize"),(0,n.kt)("li",{parentName:"ul"},"entryDate"),(0,n.kt)("li",{parentName:"ul"},"lineageStartDate"))))),(0,n.kt)("li",{parentName:"ul"},"\u5e38\u89c1\u5c5e\u6027",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"tablename"),(0,n.kt)("li",{parentName:"ul"},"querydbtable.row.count"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"maxvalue.<column>"))))),(0,n.kt)("hr",null),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/developer-guide.html"},"Developer Guide")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/expression-language-guide.html"},"Expression Language Guide"))))),(0,n.kt)("h2",{id:"el"},"EL"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"${filename:equals(${uuid})}"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"${\u5c5e\u6027:\u51fd\u6570(\u53c2\u6570)}"))),(0,n.kt)("li",{parentName:"ul"},"\u5c5e\u6027\u7ea7\u8054\u5173\u7cfb",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"FlowFile"),(0,n.kt)("li",{parentName:"ul"},"Process Group Variable"),(0,n.kt)("li",{parentName:"ul"},"File Registry"),(0,n.kt)("li",{parentName:"ul"},"NiFi JVM Properties"),(0,n.kt)("li",{parentName:"ul"},"System Environment"))),(0,n.kt)("li",{parentName:"ul"},"\u51fd\u6570",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Bool",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"isNull, notNull, isEmpty, equals, equalsIgnoreCase, gt, ge, lt, le, and, or, not"),(0,n.kt)("li",{parentName:"ul"},"ifElse",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"${literal(true):ifElse('a','b')}")))))),(0,n.kt)("li",{parentName:"ul"},"String",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"toUpper, toLower, trim, substring, substringBefore, substringBeforeLast, substringAfter, substringAfterLast"),(0,n.kt)("li",{parentName:"ul"},"getDelimitedField, append, prepend, replace, replaceFirst, replaceAll, padLeft, padRight"),(0,n.kt)("li",{parentName:"ul"},"replaceNull, replaceEmpty, length, evaluateELString, repeat"),(0,n.kt)("li",{parentName:"ul"},"startsWith, endsWith, contains, in, find, matches, indexOf, lastIndexOf"),(0,n.kt)("li",{parentName:"ul"},"jsonPath, jsonPathDelete, jsonPathAdd, jsonPathSet, jsonPathPut"))),(0,n.kt)("li",{parentName:"ul"},"Codec",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"{escape,unescape}{Json,Xml,Csv,Html3,Html4}"),(0,n.kt)("li",{parentName:"ul"},"urlEncode, urlDecode, base64Encode, base64Decode"),(0,n.kt)("li",{parentName:"ul"},"UUID3, UUID5"),(0,n.kt)("li",{parentName:"ul"},"hash",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"hex"))))),(0,n.kt)("li",{parentName:"ul"},"Math",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"plus, minus, multiply, divide, mod, toRadix, fromRadix, random, math"))),(0,n.kt)("li",{parentName:"ul"},"Date - format, toDate, now"),(0,n.kt)("li",{parentName:"ul"},"Typing - toString, toNumber, toDecimal"),(0,n.kt)("li",{parentName:"ul"},"ip, hostname, UUID, nextInt, literal"),(0,n.kt)("li",{parentName:"ul"},"getStateValue, thread"),(0,n.kt)("li",{parentName:"ul"},"anyAttribute, allAttributes, anyMatchingAttribute, allMatchingAttributes, anyDelineatedValue, allDelineatedValues"),(0,n.kt)("li",{parentName:"ul"},"join, count")))),(0,n.kt)("h2",{id:"registry"},"Registry"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"# \u672c\u5730\u542f\u52a8\n# http://localhost:18080/nifi-registry/\n./bin/nifi-registry.sh start\n")),(0,n.kt)("h2",{id:"jolt"},"JOLT"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "operation": "default",\n    "spec": {}\n  }\n]\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"operation",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"shift"),(0,n.kt)("li",{parentName:"ul"},"default"),(0,n.kt)("li",{parentName:"ul"},"remove"),(0,n.kt)("li",{parentName:"ul"},"sort"),(0,n.kt)("li",{parentName:"ul"},"java"),(0,n.kt)("li",{parentName:"ul"},"cardinality")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'[\n  // \u79fb\u9664\u6570\u7ec4\u91cc\u6bcf\u4e2a\u5143\u7d20\u7684 id,raw \u5b57\u6bb5\n  {\n    "operation": "remove",\n    "spec": {\n      "*": {\n        "id": "",\n        "raw": ""\n      }\n    }\n  }\n]\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://community.cloudera.com/t5/Community-Articles/Jolt-quick-reference-for-Nifi-Jolt-Processors/ta-p/244350"},"Jolt quick reference for Nifi Jolt Processors "))),(0,n.kt)("h1",{id:"faq"},"FAQ"),(0,n.kt)("h2",{id:"illegal-initial-character-column"},"Illegal initial character: ?column?"),(0,n.kt)("p",null,"ExecuteSQL \u6dfb\u52a0 alias"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"-- \u6709\u95ee\u9898\nselect 1;\n-- \u53ef\u4ee5\nselect 1 as val;\n")),(0,n.kt)("h2",{id:"record-does-not-have-a-value-for-the-updatekey-column"},"Record does not have a value for the UpdateKey column"),(0,n.kt)("h2",{id:"\u591a\u503c\u53c2\u6570"},"\u591a\u503c\u53c2\u6570"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u9017\u53f7\u5206\u9694\uff0c\u4f7f\u7528\u65f6\u91cd\u65b0\u62fc\u63a5")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-pre",metastring:'title="owner_ids \u4e0d\u53ef\u4ee5\u5305\u542b\u7a7a\u683c"',title:'"owner_ids','\u4e0d\u53ef\u4ee5\u5305\u542b\u7a7a\u683c"':!0},"owner_id in ('${#{owner_ids}:replaceAll(',', \"','\")}')\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-pre",metastring:'title="owner_ids \u53ef\u4ee5\u5305\u542b\u7a7a\u683c"',title:'"owner_ids','\u53ef\u4ee5\u5305\u542b\u7a7a\u683c"':!0},'owner_id in (\'${allDelineatedValues("${#{owner_ids}}", ","):trim():join("\',\'")}\')\n')),(0,n.kt)("h2",{id:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6"},"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"var flowFile = session.get();\nvar File = Java.type('java.io.RandomAccessFile');\nif (flowFile != null) {\n  var filename = flowFile.getAttribute('filename');\n  /// \u5199\u5165\u6587\u4ef6\n  var filePath = '/tmp/nifi/test.log';\n  flowFile = session.putAttribute(flowFile, 'filePath', filePath);\n  var file = new File(filePath, 'rws');\n  file.seek(file.length());\n  // \u5199\u5165\u5185\u5bb9\n  file.write(filename.getBytes());\n  file.write('\\n'.getBytes());\n  file.close();\n  // Finish by transferring the FlowFile to an output relationship\n  session.transfer(flowFile, REL_SUCCESS);\n}\n")),(0,n.kt)("h2",{id:"h2-javalangillegalstateexception-the-file-is-locked"},"h2 java.lang.IllegalStateException: The file is locked"),(0,n.kt)("p",null,"\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u542f\u52a8\u8fc7 NiFi \u4e86"),(0,n.kt)("h2",{id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup"},"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"nifi.content.repository.implementation=org.apache.nifi.controller.repository.FileSystemRepository\nnifi.content.claim.max.appendable.size=1 MB\nnifi.content.repository.directory.default=./content_repository\nnifi.content.repository.archive.max.retention.period=7 days\n# \u9650\u5b9a\u4e86\u6700\u5927\u53ef\u7528\u7a7a\u95f4\nnifi.content.repository.archive.max.usage.percentage=50%\nnifi.content.repository.archive.enabled=true\nnifi.content.repository.always.sync=false\nnifi.content.viewer.url=../nifi-content-viewer/\n")))}c.isMDXComponent=!0}}]);