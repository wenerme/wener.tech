/*! For license information please see 6ab9dade.90c5d21d.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[30669],{71520:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>g,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var o=n(2488),r=n(62780);const a={title:"logrotate"},l="logrotate",s={id:"os/linux/admin/logrotate",title:"logrotate",description:"- logrotate/logrotate",source:"@site/../notes/os/linux/admin/logrotate.md",sourceDirName:"os/linux/admin",slug:"/os/linux/admin/logrotate",permalink:"/notes/os/linux/admin/logrotate",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/admin/logrotate.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1690946986,formattedLastUpdatedAt:"Aug 2, 2023",frontMatter:{title:"logrotate"},sidebar:"docs",previous:{title:"Logging",permalink:"/notes/os/linux/admin/log"},next:{title:"man",permalink:"/notes/os/linux/admin/man"}},i={},c=[{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,r.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"logrotate",children:"logrotate"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"https://github.com/logrotate/logrotate",children:"logrotate/logrotate"})}),"\n",(0,o.jsx)(t.li,{children:"/etc/logrotate.conf"}),"\n",(0,o.jsx)(t.li,{children:"/etc/logrotate.d/"}),"\n",(0,o.jsx)(t.li,{children:"\u901a\u8fc7 cron \u6267\u884c"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"# \u914d\u7f6e /etc/logrotate.conf\n# \u4efb\u52a1 /etc/periodic/daily/logrotate\napk add logrotate\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ini",metastring:'title="logrotate.conf"',children:"include /etc/logrotate.d\n"})}),"\n",(0,o.jsx)(t.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["\u53c2\u8003 ",(0,o.jsx)(t.a,{href:"https://pkgs.alpinelinux.org/contents?file=&path=%2Fetc%2Flogrotate.d&name=&branch=edge&arch=x86_64",children:"/etc/logrotate.d"})]}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-conf",children:"/var/log/apache2/* {\n    weekly\n    rotate 3\n    size 10M\n    compress\n    delaycompress\n}\n\n/var/log/squid/access.log {\n    monthly\n    create 0644 root root\n    rotate 5\n    size=1M\n    dateext\n    dateformat -%d%m%Y\n    notifempty\n    # mail gabriel@mydomain.com\n}\n\n/var/log/k3s.log {\n        missingok\n        notifempty\n        sharedscripts\n        postrotate\n                /etc/init.d/k3s --quiet --ifstarted restart || true\n        endscript\n}\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"# -d debug - \u4e0d\u4f1a\u6267\u884c\nlogrotate -d /etc/logrotate.d/apache2.conf\n# -v verbose - \u4f1a\u6267\u884c\nlogrotate -v /etc/logrotate.d/apache2.conf\n"})})]})}function g(e={}){const{wrapper:t}={...(0,r.M)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},38088:(e,t,n)=>{var o=n(96651),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,a={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,o)&&!i.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},2488:(e,t,n)=>{e.exports=n(38088)},62780:(e,t,n)=>{n.d(t,{I:()=>s,M:()=>l});var o=n(96651);const r={},a=o.createContext(r);function l(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);