/*! For license information please see f98d0be0.4575ebf2.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[22937],{48798:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>j,frontMatter:()=>t,metadata:()=>c,toc:()=>a});var i=r(11527),s=r(47214);const t={title:"Jaeger"},l="Jaeger",c={id:"service/observability/tracing/jaeger",title:"Jaeger",description:"- jaegertracing/jaeger",source:"@site/../notes/service/observability/tracing/jaeger.md",sourceDirName:"service/observability/tracing",slug:"/service/observability/tracing/jaeger",permalink:"/notes/service/observability/tracing/jaeger",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/observability/tracing/jaeger.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1695042174,formattedLastUpdatedAt:"Sep 18, 2023",frontMatter:{title:"Jaeger"},sidebar:"docs",previous:{title:"Jaeger Operator",permalink:"/notes/service/observability/tracing/jaeger-operator"},next:{title:"OpenTelemetry",permalink:"/notes/service/observability/tracing/opentelemetry/"}},d={},a=[{value:"agent",id:"agent",level:2},{value:"collector",id:"collector",level:2},{value:"ingester",id:"ingester",level:2},{value:"query",id:"query",level:2}];function h(e){const n={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"jaeger",children:"Jaeger"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/jaegertracing/jaeger",children:"jaegertracing/jaeger"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Apache-2.0, Golang"}),"\n",(0,i.jsx)(n.li,{children:"from Uber"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5b58\u50a8\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9ed8\u8ba4\u5185\u5b58\u5b58\u50a8"}),"\n",(0,i.jsx)(n.li,{children:"badger - \u672c\u5730\u6587\u4ef6\u5b58\u50a8"}),"\n",(0,i.jsx)(n.li,{children:"cassandra - \u517c\u5bb9 scyllab"}),"\n",(0,i.jsx)(n.li,{children:"elasticsearch"}),"\n",(0,i.jsx)(n.li,{children:"kafka"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/jaegertracing/jaeger-clickhouse",children:"jaegertracing/jaeger-clickhouse"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# badger \u6301\u4e45\u5b58\u50a8\ndocker run -it --rm \\\n  -v $PWD/data:/badger \\\n  -e SPAN_STORAGE_TYPE=badger \\\n  -e BADGER_EPHEMERAL=false \\\n  -e BADGER_DIRECTORY_VALUE=/badger/data \\\n  -e BADGER_DIRECTORY_KEY=/badger/key \\\n  -e COLLECTOR_ZIPKIN_HTTP_PORT=9411 \\\n  -p5775:5775/udp -p6831:6831/udp -p6832:6832/udp \\\n  -p5778:5778 -p16686:16686 -p14268:14268 -p9411:9411 \\\n  jaegertracing/all-in-one:latest\n"})}),"\n",(0,i.jsx)(n.h1,{id:"\u7ec4\u4ef6",children:"\u7ec4\u4ef6"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"collector - span -> \u5b58\u50a8"}),"\n",(0,i.jsx)(n.li,{children:"ingester - kafka -> \u5b58\u50a8"}),"\n",(0,i.jsx)(n.li,{children:"agent - sidecar"}),"\n",(0,i.jsx)(n.li,{children:"query - api, ui"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"agent",children:"agent"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e0d\u4e00\u5b9a\u9700\u8981\u8fd0\u884c - \u4f46\u63a8\u8350"}),"\n",(0,i.jsx)(n.li,{children:"sidecar \u89d2\u8272 - \u8d1f\u8d23\u4e0e \u5176\u5b83\u7ec4\u4ef6\u4ea4\u4e92"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"port"}),(0,i.jsx)(n.th,{children:"protocol"}),(0,i.jsx)(n.th,{children:"function"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"6831"}),(0,i.jsx)(n.td,{children:"UDP"}),(0,i.jsx)(n.td,{children:"jaeger.thrift compact"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"6832"}),(0,i.jsx)(n.td,{children:"UDP"}),(0,i.jsx)(n.td,{children:"jaeger.thrift binary - Node.js Jaeger client"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"5778"}),(0,i.jsx)(n.td,{children:"HTTP"}),(0,i.jsx)(n.td,{children:"serve configs, sampling strategies"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"5775"}),(0,i.jsx)(n.td,{children:"UDP"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.del,{children:"zipkin.thrift compact"})," - 2016 \u65e9\u671f \u5ba2\u6237\u7aef"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"14271"}),(0,i.jsx)(n.td,{children:"HTTP"}),(0,i.jsx)(n.td,{children:"\u7ba1\u7406 - \u5065\u5eb7\u68c0\u67e5 / , \u6307\u6807 /metrics"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --rm \\\n  -p6831:6831/udp \\\n  -p6832:6832/udp \\\n  -p5778:5778/tcp \\\n  -p5775:5775/udp \\\n  jaegertracing/jaeger-agent:1.25\n"})}),"\n",(0,i.jsx)(n.h2,{id:"collector",children:"collector"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u65e0\u72b6\u6001"}),"\n",(0,i.jsx)(n.li,{children:"\u4e0e\u5b58\u50a8\u540e\u7aef\u4ea4\u4e92 - \u5199\u5165\u5230\u5b58\u50a8"}),"\n",(0,i.jsxs)(n.li,{children:["SPAN_STORAGE_TYPE\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"cassandra, elasticsearch, kafka, grpc-plugin, badger, memory"}),"\n",(0,i.jsx)(n.li,{children:"\u652f\u6301\u591a\u4e2a - \u9017\u53f7\u5206\u9694 - \u67e5\u8be2\u53ea\u4f1a\u7528\u7b2c\u4e00\u4e2a"}),"\n",(0,i.jsxs)(n.li,{children:["\u5927\u578b\u751f\u4ea7\u63a8\u8350 es\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u56e0\u4e3a es \u652f\u6301\u641c\u7d22"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528 cassandra \u9700\u8981\u5728 jeager"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.jaegertracing.io/docs/1.25/faq/#what-is-the-recommended-storage-backend",children:"What is the recommended storage backend?"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5b58\u50a8\u63d2\u4ef6 - \u57fa\u4e8e unix-socket ",(0,i.jsx)(n.a,{href:"https://github.com/jaegertracing/jaeger/tree/master/plugin/storage/grpc",children:"grpc"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/jaegertracing/jaeger-clickhouse",children:"jaegertracing/jaeger-clickhouse"})}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"port"}),(0,i.jsx)(n.th,{children:"protocol"}),(0,i.jsx)(n.th,{children:"function"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"14250"}),(0,i.jsx)(n.td,{children:"gRPC"}),(0,i.jsx)(n.td,{children:"jaeger-agent send spans - model.proto"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"14268"}),(0,i.jsx)(n.td,{children:"HTTP"}),(0,i.jsx)(n.td,{children:"spans in jaeger.thrift binary"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"9411"}),(0,i.jsx)(n.td,{children:"HTTP"}),(0,i.jsx)(n.td,{children:"Zipkin spans in Thrift, JSON, Proto (disabled by default)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"14269"}),(0,i.jsx)(n.td,{children:"HTTP"}),(0,i.jsx)(n.td,{children:"\u7ba1\u7406 - \u5065\u5eb7\u68c0\u67e5 / , \u6307\u6807 /metrics"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"ingester",children:"ingester"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"kafka -> \u5176\u4ed6\u540e\u7aef\u5b58\u50a8 - es \u6216 cassandra"}),"\n",(0,i.jsx)(n.li,{children:"\u7ba1\u7406\u7aef\u53e3 14270"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"query",children:"query"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"UI"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Port"}),(0,i.jsx)(n.th,{children:"Protocol"}),(0,i.jsx)(n.th,{children:"Function"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"16685"}),(0,i.jsx)(n.td,{children:"gRPC"}),(0,i.jsx)(n.td,{children:"gRPC QueryService"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"16686"}),(0,i.jsx)(n.td,{children:"HTTP"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"/api/*"}),", UI /"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"16687"}),(0,i.jsx)(n.td,{children:"HTTP"}),(0,i.jsx)(n.td,{children:"\u7ba1\u7406\u7aef\u53e3"})]})]})]})]})}function j(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},3354:(e,n,r)=>{var i=r(50959),s=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,r){var i,t={},a=null,h=null;for(i in void 0!==r&&(a=""+r),void 0!==n.key&&(a=""+n.key),void 0!==n.ref&&(h=n.ref),n)l.call(n,i)&&!d.hasOwnProperty(i)&&(t[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===t[i]&&(t[i]=n[i]);return{$$typeof:s,type:e,key:a,ref:h,props:t,_owner:c.current}}n.Fragment=t,n.jsx=a,n.jsxs=a},11527:(e,n,r)=>{e.exports=r(3354)},47214:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>l});var i=r(50959);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);