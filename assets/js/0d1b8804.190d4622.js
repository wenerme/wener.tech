/*! For license information please see 0d1b8804.190d4622.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[64148],{83864:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var i=s(2488),l=s(62780);const r={title:"Linux PAM"},c="Linux PAM",t={id:"os/linux/linux-pam",title:"Linux PAM",description:"- linux-pam/linux-pam",source:"@site/../notes/os/linux/linux-pam.md",sourceDirName:"os/linux",slug:"/os/linux/pam",permalink:"/notes/os/linux/pam",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/linux-pam.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1708697175,formattedLastUpdatedAt:"Feb 23, 2024",frontMatter:{title:"Linux PAM"},sidebar:"docs",previous:{title:"Linux Glossary",permalink:"/notes/os/linux/glossary"},next:{title:"Linux Releases",permalink:"/notes/os/linux/version"}},o={},d=[{value:"pam.conf",id:"pamconf",level:2},{value:"pam.d",id:"pamd",level:2},{value:"modules",id:"modules",level:2}];function a(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.M)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"linux-pam",children:"Linux PAM"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/linux-pam/linux-pam",children:"linux-pam/linux-pam"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://pkgs.alpinelinux.org/contents?file=&path=&name=linux-pam&branch=edge&arch=x86_64",children:"https://pkgs.alpinelinux.org/contents?file=&path=&name=linux-pam&branch=edge&arch=x86_64"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"pamconf",children:"pam.conf"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"/etc/pam.d/<service>"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"type control module-path module-arguments"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["service\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"su"}),"\n",(0,i.jsx)(e.li,{children:"login"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"other"})," - \u9ed8\u8ba4"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["type\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"account"}),"\n",(0,i.jsx)(e.li,{children:"auth"}),"\n",(0,i.jsx)(e.li,{children:"password"}),"\n",(0,i.jsx)(e.li,{children:"session"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["control\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"required"}),"\n",(0,i.jsx)(e.li,{children:"requisite"}),"\n",(0,i.jsx)(e.li,{children:"sufficient"}),"\n",(0,i.jsx)(e.li,{children:"optional"}),"\n",(0,i.jsx)(e.li,{children:"include"}),"\n",(0,i.jsx)(e.li,{children:"substack"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"value1=action1 value2=action2"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["module-path\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b8c\u6574\u6216\u76f8\u5bf9"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"/lib/security/"}),", ",(0,i.jsx)(e.code,{children:"/lib64/security/"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-txt",metastring:'title="/etc/pam.d/su"',children:"# basic PAM configuration for Alpine.\nauth            sufficient      pam_rootok.so\nauth            include         base-auth\naccount         include         base-account\npassword        include         base-password\nsession         include         base-session-noninteractive\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man5/pam.conf.5.html",children:"https://man7.org/linux/man-pages/man5/pam.conf.5.html"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"pamd",children:"pam.d"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"base-account"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"account\t\trequired\tpam_unix.so\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"base-auth"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"auth\trequired\tpam_env.so\nauth\trequired\tpam_unix.so\tnullok_secure\nauth\trequired\tpam_nologin.so\tsuccessok\n\nauth\tsufficient\tpam_unix.so\tnullok try_first_pass\n\naccount\trequired\tpam_nologin.so\naccount\tsufficient\tpam_unix.so\n\npassword\tsufficient\tpam_unix.so\tnullok sha512 shadow try_first_pass use_authtok\n\n-session\toptional\tpam_loginuid.so\n-session\toptional\tpam_elogind.so\nsession\tsufficient\tpam_unix.so\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"base-password"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"password\trequired\tpam_unix.so\tnullok md5 sha512\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"base-session"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"session\t\tinclude\t\tbase-session-noninteractive\nsession\t\trequired\tpam_motd.so\n-session\toptional\tpam_elogind.so\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"base-session-noninteractive"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"session\t\trequired\tpam_limits.so\nsession\t\trequired\tpam_unix.so\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"chpasswd"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"groupadd"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"groupdel"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"groupmems"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"groupmod"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"newusers"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"other"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"polkit-1"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"su"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"system-local-login"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"system-login"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"useradd"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"userdel"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"usermod"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"modules",children:"modules"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"pam_access.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_cgfs.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_debug.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_deny.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_echo.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_env.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_exec.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_faildelay.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_faillock.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_filter.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_ftp.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_group.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_issue.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_keyinit.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_limits.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_listfile.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_localuser.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_loginuid.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_mail.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_mkhomedir.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_motd.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_namespace.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_nologin.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_permit.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_pwhistory.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_rootok.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_securetty.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_setquota.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_shells.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_stress.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_succeed_if.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_time.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_timestamp.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_umask.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_unix.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_usertype.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_warn.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_wheel.so"}),"\n",(0,i.jsx)(e.li,{children:"pam_xauth.so"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,l.M)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}},38088:(n,e,s)=>{var i=s(96651),l=Symbol.for("react.element"),r=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,t=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(n,e,s){var i,r={},d=null,a=null;for(i in void 0!==s&&(d=""+s),void 0!==e.key&&(d=""+e.key),void 0!==e.ref&&(a=e.ref),e)c.call(e,i)&&!o.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps)void 0===r[i]&&(r[i]=e[i]);return{$$typeof:l,type:n,key:d,ref:a,props:r,_owner:t.current}}e.Fragment=r,e.jsx=d,e.jsxs=d},2488:(n,e,s)=>{n.exports=s(38088)},62780:(n,e,s)=>{s.d(e,{I:()=>t,M:()=>c});var i=s(96651);const l={},r=i.createContext(l);function c(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);