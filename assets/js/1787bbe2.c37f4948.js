/*! For license information please see 1787bbe2.c37f4948.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[1101],{92646:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>r,default:()=>x,frontMatter:()=>d,metadata:()=>c,toc:()=>h});var l=s(11527),i=s(47214);const d={title:"make"},r="make",c={id:"dev/build/make",title:"make",description:"- Automatic-Variables",source:"@site/../notes/dev/build/make.md",sourceDirName:"dev/build",slug:"/dev/build/make",permalink:"/notes/dev/build/make",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/dev/build/make.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1669864776,formattedLastUpdatedAt:"Dec 1, 2022",frontMatter:{title:"make"},sidebar:"docs",previous:{title:"magefile",permalink:"/notes/dev/build/mage"},next:{title:"Makefile",permalink:"/notes/dev/build/makefile"}},t={},h=[{value:"\u8981\u6c42\u73af\u5883\u53d8\u91cf",id:"\u8981\u6c42\u73af\u5883\u53d8\u91cf",level:2},{value:"\u63a5\u6536\u4efb\u610f\u989d\u5916\u53c2\u6570",id:"\u63a5\u6536\u4efb\u610f\u989d\u5916\u53c2\u6570",level:2},{value:"\u5e2e\u52a9\u6587\u6863",id:"\u5e2e\u52a9\u6587\u6863",level:2},{value:"Variables",id:"variables",level:2},{value:"\u7279\u6b8a\u53d8\u91cf",id:"\u7279\u6b8a\u53d8\u91cf",level:3},{value:"Targets",id:"targets",level:2},{value:"\u7279\u6b8a\u76ee\u6807",id:"\u7279\u6b8a\u76ee\u6807",level:3},{value:"\u51fd\u6570",id:"\u51fd\u6570",level:2},{value:"Recipes",id:"recipes",level:2},{value:"\u5e26\u5e2e\u52a9\u7684 Makefile",id:"\u5e26\u5e2e\u52a9\u7684-makefile",level:2}];function a(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"make",children:"make"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html",children:"Automatic-Variables"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://devhints.io/makefile",children:"Makefile cheatsheet"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://clarkgrubb.com/makefile-style-guide",children:"makefile style guide"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.gnu.org/software/make/manual/make.html#Special-Built_002din-Target-Names",children:"Special Built-in Target Names"})}),"\n"]}),"\n",(0,l.jsx)(e.admonition,{type:"caution",children:(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"$(wildcard src/**/*.ts)"})," \u5728\u6709\u4e9b\u5e73\u53f0\u4e0a\u662f ",(0,l.jsx)(e.code,{children:"$(wildcard src/*/*.ts)"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4e0d\u80fd\u904d\u5386\u6240\u6709\u6587\u4ef6"}),"\n",(0,l.jsx)(e.li,{children:"\u63a8\u8350 shell \u5c55\u5f00\u6216 find \u547d\u4ee4"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-Makefile",children:"# \u4fee\u6539\u9ed8\u8ba4 shell\nSHELL=/bin/bash\n\n# \u4fdd\u7559\u4e2d\u95f4\u6587\u4ef6\n.PRECIOUS: public/modules/wener-apis-%.system.js\n# \u4e8c\u6b21\u6c42\u503c $$\n# \u8fd9\u4e2a\u9700\u8981\u653e\u5728\u524d\u9762\n.SECONDEXPANSION:\n\n# \u603b\u662f\u6267\u884c\n.PHONEY: always\nalways:\n\n# export \u6240\u6709\u53d8\u91cf\n.EXPORT_ALL_VARIABLES:\n\n# makefile \u6240\u5728\u76ee\u5f55\ncwd := $(notdir $(patsubst %/,%,$(dir $(abspath $(lastword $(MAKEFILE_LIST))))))\n\n# \u66ff\u6362\u7a7a\u683c\u4e3a\u9017\u53f7\ntext := hello a b c\ncomma:= ,\nempty:=\nspace:= $(empty) $(empty)\nrel  := $(subst $(space),$(comma),${text})\n\n# @ \u4e0d\u8f93\u51fa\u8fd9\u884c\u547d\u4ee4\nok:\n\t@echo OK\n# \u4e8c\u6b21\u6c42\u503c\ndo-%: ok $$(wildcard src/modules/%/*.c)\n  # ? ok - @ do-xxx - % - < ok - ^ ok - + ok - | - * xxx\n\techo '?' $? - '@' $@ - '%' $% - '<' $< - '^' $^ - '+' $+ - '|' $| - '*' $*\n\nmake-%: always\n# \u5982\u679c\u6587\u4ef6\u5b58\u5728\u624d\u6267\u884c\nifneq (\"$$(wildcard src/modules/$*/Makefile)\",\"\")\n\t$(MAKE) -f src/modules/$*/Makefile build\nelse\n\t@echo Skip - no makefile\nendif\n\n# \u5355\u6b21\nifneq (\"$(wildcard $(PATH_TO_FILE))\",\"\")\n    FILE_EXISTS = 1\nelse\n    FILE_EXISTS = 0\nendif\n\n# \u5faa\u73af\nLIST = one two three\nforeach:\n  for i in $(LIST); do \\\n      echo $$i; \\\n  done\n\n# \u76ee\u5f55\u5207\u6362\nfoo : bar/lose\n  cd $(<D) && gobble $(<F) > ../$@\n# \u4f7f\u7528 ONESHELL \u5219\u7b80\u5355\u4e00\u4e9b\n.ONESHELL:\nfoo : bar/lose\n  cd $(@D)\n  gobble $(@F) > ../$@\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u8981\u6c42\u73af\u5883\u53d8\u91cf",children:"\u8981\u6c42\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:"check-env:\nifndef ENV\n\t$(error ENV is undefined)\nendif\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u63a5\u6536\u4efb\u610f\u989d\u5916\u53c2\u6570",children:"\u63a5\u6536\u4efb\u610f\u989d\u5916\u53c2\u6570"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:"CMD_ARGS = $(filter-out $@,$(MAKECMDGOALS))\n%:\n\t@:\nrun:\n  @echo RUN $(CMD_ARGS)\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"make run app\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5e2e\u52a9\u6587\u6863",children:"\u5e2e\u52a9\u6587\u6863"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://marmelab.com/blog/2016/02/29/auto-documented-makefile.html",children:"Self-Documented Makefile"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:".PHONY: help\n.DEFAULT_GOAL := help\nhelp:\n\t@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = \":.*?## \"}; {printf \"\\033[36m%-30s\\033[0m %s\\n\", $$1, $$2}'\n"})}),"\n",(0,l.jsx)(e.h2,{id:"variables",children:"Variables"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"${foo}"}),", ",(0,l.jsx)(e.code,{children:"$(foo)"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"$foo"})," \u5b9e\u9645\u662f ",(0,l.jsx)(e.code,{children:"$(f)oo"})," - \u6240\u4ee5\u4e0d\u8981\u8fd9\u6837\u7528"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u4f7f\u7528\u573a\u666f targets, prerequisites, recipes, most directives, new variable values"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"="}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"set variable - \u9012\u5f52\u5c55\u5f00\uff0c\u6bcf\u6b21\u6c42\u503c\u5c55\u5f00"}),"\n",(0,l.jsxs)(e.li,{children:["\u4e0d\u53ef\u4ee5 ",(0,l.jsx)(e.code,{children:"CFLAGS = $(CFLAGS) -O"}),", \u4f1a\u5bfc\u81f4\u65e0\u9650\u5faa\u73af\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"+="})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:":="}),",",(0,l.jsx)(e.code,{children:"::="}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Simply expanded variables"}),"\n",(0,l.jsx)(e.li,{children:"\u7acb\u5373\u5c55\u5f00\uff0c\u6267\u884c\u4e00\u6b21"}),"\n",(0,l.jsxs)(e.li,{children:["\u9012\u5f52\u5c55\u5f00 ",(0,l.jsx)(e.code,{children:"a := $($(x))"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"?="}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9ed8\u8ba4\u503c"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"override variable := value"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u8986\u76d6\u53d8\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"="}),",",(0,l.jsx)(e.code,{children:":="}),",",(0,l.jsx)(e.code,{children:"+="})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"undefine variable"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u53d6\u6d88\u53d8\u91cf\u5b9a\u4e49"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"${var:a=b}"}),",",(0,l.jsx)(e.code,{children:"$(var:a=b)"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u66ff\u6362"}),"\n",(0,l.jsxs)(e.li,{children:["\u7b49\u540c\u4e8e ",(0,l.jsx)(e.code,{children:"$(patsubst %a,%b,var)"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u6c42\u503c\u987a\u5e8f\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8986\u76d6\u53d8\u91cf"}),"\n",(0,l.jsx)(e.li,{children:"Setting Variables, verbatim definition - Defining Multi-Line Variables"}),"\n",(0,l.jsx)(e.li,{children:"\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(e.li,{children:"\u81ea\u52a8\u53d8\u91cf"}),"\n",(0,l.jsx)(e.li,{children:"\u5e38\u91cf\u53d8\u91cf\u3001\u9690\u6027\u89c4\u5219"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u6ce8\u610f\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4f9d\u8d56\u9879\u4f1a\u7ee7\u627f\u53d8\u91cf"}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"var"}),(0,l.jsx)(e.th,{children:"desc"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$@"})}),(0,l.jsx)(e.td,{children:"target"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"$*"})}),(0,l.jsxs)(e.td,{children:[(0,l.jsx)(e.code,{children:"%"})," in target"]})]})]})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:"# \u591a\u884c\u53d8\u91cf\n# \u7b49\u540c\u4e8e two-lines = echo foo; echo $(bar)\ndefine two-lines\necho foo\necho $(bar)\nendef\n\n$(info $(origin foo))\n$(info $(flavor bar))\n\n\nEXTRA_CFLAGS =\n# \u79c1\u6709\u53d8\u91cf\nprog: private EXTRA_CFLAGS = -L/usr/local/lib\nprog: a.o b.o\n\n# ?=\nifeq ($(origin FOO), undefined)\n  FOO = bar\nendif\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:"%.out: %.input1 %.input2\n    merge $<1 $<2 $@\n%.out: %.input1 %.input2\n    merge $^ $@\n\ndoit: project.out\n    # force build\n    touch $@\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u7279\u6b8a\u53d8\u91cf",children:"\u7279\u6b8a\u53d8\u91cf"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"var"}),(0,l.jsx)(e.th,{children:"desc"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"MAKEFILE_LIST"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".DEFAULT_GOAL"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"MAKE_RESTARTS"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"MAKE_TERMOUT,MAKE_TERMERR"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".RECIPEPREFIX"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".VARIABLES"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".FEATURES"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".INCLUDE_DIRS"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".EXTRA_PREREQS"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"MAKECMDGOALS"}),(0,l.jsx)(e.td,{children:"make \u65f6\u7684\u76ee\u6807"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"MAKE"}),(0,l.jsx)(e.td,{children:"make"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"MAKEFILES"}),(0,l.jsx)(e.td,{})]})]})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["CURDIR\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5c3d\u91cf\u7528 CURDIR"}),"\n",(0,l.jsx)(e.li,{children:"\u7531 make \u7ef4\u62a4"}),"\n",(0,l.jsxs)(e.li,{children:["\u652f\u6301 ",(0,l.jsx)(e.code,{children:"-C"})," \u5207\u6362"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["PWD\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u73af\u5883\u53d8\u91cf\u63d0\u4f9b"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:"info:\n  echo $(info CURDIR is from $(origin CURDIR)) $(info PWD is from $(origin PWD))\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.gnu.org/software/make/manual/html_node/Quick-Reference.html",children:"https://www.gnu.org/software/make/manual/html_node/Quick-Reference.html"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"targets",children:"Targets"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:"https://www.gnu.org/software/make/manual/make.html#Standard-Targets",children:"Standard Targets"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"target"}),(0,l.jsx)(e.th,{children:"desc"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"all"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"clean"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"mostlyclean"}),(0,l.jsx)(e.td,{children:"\u4fdd\u7559\u4e0d\u60f3\u91cd\u65b0\u7f16\u8bd1\u7684\u6587\u4ef6\uff0c\u4f8b\u5982 libgcc.a"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"distclean,realclean,clobber"}),(0,l.jsx)(e.td,{children:"\u6bd4 clean \u6e05\u9664\u66f4\u591a\u6587\u4ef6\uff0c\u4f8b\u5982\u914d\u7f6e\u6587\u4ef6\uff0clink"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"install"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"print"}),(0,l.jsx)(e.td,{children:"\u663e\u793a\u53d8\u5316\u4e86\u7684\u6e90\u6587\u4ef6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"tar"}),(0,l.jsx)(e.td,{children:"\u6e90\u6587\u4ef6 tar"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"shar"}),(0,l.jsx)(e.td,{children:"\u6e90\u6587\u4ef6 shar"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"dist"}),(0,l.jsx)(e.td,{})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"TAGS"}),(0,l.jsx)(e.td,{children:"\u66f4\u65b0 tags \u6587\u4ef6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"check,test"}),(0,l.jsx)(e.td,{children:"\u6d4b\u8bd5"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u7279\u6b8a\u76ee\u6807",children:"\u7279\u6b8a\u76ee\u6807"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.gnu.org/software/make/manual/make.html#Special-Targets",children:"Special-Targets"})}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"target"}),(0,l.jsx)(e.th,{children:"desc"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".PHONY"}),(0,l.jsx)(e.td,{children:"\u603b\u662f\u8fd0\u884c"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".SUFFIXES"}),(0,l.jsxs)(e.td,{children:["\u540e\u7f00\u6a21\u5f0f\u81ea\u52a8\u5339\u914d\uff0c\u73b0\u5728\u4e00\u822c\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"%"})]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".DEFAULT"}),(0,l.jsx)(e.td,{children:"\u6ca1\u627e\u5230\u89c4\u5219\u65f6\u7684\u9ed8\u8ba4\u76ee\u6807"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".PRECIOUS"}),(0,l.jsx)(e.td,{children:"\u4fdd\u7559\u4e2d\u95f4\u6587\u4ef6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".INTERMEDIATE"}),(0,l.jsx)(e.td,{children:"\u8868\u660e\u662f\u4e2d\u95f4\u6587\u4ef6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".SECONDARY"}),(0,l.jsx)(e.td,{children:"\u9ed8\u8ba4\u4f9d\u8d56\u4e3a\u4e8c\u6b21\u5c55\u5f00"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".SECONDEXPANSION"}),(0,l.jsxs)(e.td,{children:[(0,l.jsx)(e.code,{children:"$$"})," \u4e8c\u6b21\u5c55\u5f00"]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".DELETE_ON_ERROR"}),(0,l.jsx)(e.td,{children:"\u9519\u8bef\u65f6\u5220\u9664\u6587\u4ef6"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".IGNORE"}),(0,l.jsxs)(e.td,{children:["\u5ffd\u7565\u9519\u8bef\uff0c\u73b0\u5728\u4e00\u822c\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"-"})]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".LOW_RESOLUTION_TIME"}),(0,l.jsx)(e.td,{children:"\u5904\u7406\u6587\u4ef6\u4fee\u6539\u65f6\u95f4\u65f6\u7528\u66f4\u4f4e\u7cbe\u5ea6\uff0c\u73b0\u5728\u4e00\u822c\u4e0d\u4f7f\u7528"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".SILENT"}),(0,l.jsxs)(e.td,{children:["\u4e0d\u8f93\u51fa\uff0c\u7c7b\u4f3c ",(0,l.jsx)(e.code,{children:"-s"})]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".EXPORT_ALL_VARIABLES"}),(0,l.jsx)(e.td,{children:"\u5bfc\u51fa\u6240\u6709\u53d8\u91cf"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".NOTPARALLEL"}),(0,l.jsxs)(e.td,{children:["\u4e0d\u5e76\u884c\uff0c\u5ffd\u7565 ",(0,l.jsx)(e.code,{children:"-j"})]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".ONESHELL"}),(0,l.jsx)(e.td,{children:"\u8fd0\u884c\u5728\u4e00\u4e2a shell \u91cc\u800c\u4e0d\u662f\u6bcf\u884c\u4e00\u4e2a shell"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:".POSIX"}),(0,l.jsx)(e.td,{children:"POSIX \u517c\u5bb9\u6a21\u5f0f"})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u51fd\u6570",children:"\u51fd\u6570"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html",children:"https://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"recipes",children:"Recipes"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.gnu.org/software/make/manual/make.html#Recipes",children:"Recipes"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:"subsystem:\n  # \u900f\u4f20 make\n  cd subdir && $(MAKE) $(MFLAGS)\n\nifeq (0,${MAKELEVEL})\nwhoami    := $(shell whoami)\nhost-type := $(shell arch)\nMAKE := ${MAKE} host-type=${host-type} whoami=${whoami}\nendif\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5e26\u5e2e\u52a9\u7684-makefile",children:"\u5e26\u5e2e\u52a9\u7684 Makefile"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-makefile",children:"build: ## Build\n  echo BUILD\n.PHONY: help\nhelp: ## \u5e2e\u52a9\n\t@egrep -h '\\s##\\s' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = \":.*?## \"}; {printf \"\\033[36m%-20s\\033[0m %s\\n\", $$1, $$2}'\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"make help\n"})})]})}function x(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},3354:(n,e,s)=>{var l=s(50959),i=Symbol.for("react.element"),d=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,s){var l,d={},h=null,a=null;for(l in void 0!==s&&(h=""+s),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(a=e.ref),e)r.call(e,l)&&!t.hasOwnProperty(l)&&(d[l]=e[l]);if(n&&n.defaultProps)for(l in e=n.defaultProps)void 0===d[l]&&(d[l]=e[l]);return{$$typeof:i,type:n,key:h,ref:a,props:d,_owner:c.current}}e.Fragment=d,e.jsx=h,e.jsxs=h},11527:(n,e,s)=>{n.exports=s(3354)},47214:(n,e,s)=>{s.d(e,{Z:()=>c,a:()=>r});var l=s(50959);const i={},d=l.createContext(i);function r(n){const e=l.useContext(d);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),l.createElement(d.Provider,{value:e},n.children)}}}]);