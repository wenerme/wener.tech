/*! For license information please see 5dc1e93f.2addf366.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[47700],{36087:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var t=r(11527),s=r(47214);const l={title:"V Reference"},c="V Reference",i={id:"languages/v/v-reference",title:"V Reference",description:"\u5185\u5b58\u7ba1\u7406",source:"@site/../notes/languages/v/v-reference.md",sourceDirName:"languages/v",slug:"/languages/v/reference",permalink:"/notes/languages/v/reference",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/v/v-reference.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1623656447,formattedLastUpdatedAt:"Jun 14, 2021",frontMatter:{title:"V Reference"},sidebar:"docs",previous:{title:"Vlang FAQ",permalink:"/notes/languages/v/faq"},next:{title:"xpath",permalink:"/notes/languages/xml/xpath"}},a={},d=[{value:"\u5185\u5b58\u7ba1\u7406",id:"\u5185\u5b58\u7ba1\u7406",level:2},{value:"C \u4ea4\u4e92",id:"c-\u4ea4\u4e92",level:2},{value:"C \u8f6c V",id:"c-\u8f6c-v",level:3},{value:"\u6c47\u7f16",id:"\u6c47\u7f16",level:2}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"v-reference",children:"V Reference"}),"\n",(0,t.jsx)(n.h2,{id:"\u5185\u5b58\u7ba1\u7406",children:"\u5185\u5b58\u7ba1\u7406"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"-autofree - v0.3 \u9ed8\u8ba4\u5f00\u542f - \u4e0d\u5f00\u542f\u53ef\u80fd\u4f1a\u6cc4\u6f0f\u5185\u5b58"}),"\n",(0,t.jsxs)(n.li,{children:["-manualfree, ",(0,t.jsx)(n.code,{children:"[manualfree]"})]}),"\n",(0,t.jsx)(n.li,{children:"-prealloc"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-vlang",children:"struct MyType {}\n\n[unsafe]\nfn (data &MyType) free() {\n\t// \u81ea\u5b9a\u4e49 free \u903b\u8f91\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"c-\u4ea4\u4e92",children:"C \u4ea4\u4e92"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"v"}),(0,t.jsx)(n.th,{children:"c"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"voidptr"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"void*"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"&byte"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"byte*"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"&char"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"char*"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"&&char"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"char**"})})]})]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-vlang",children:'// -I,-L,-l,-D\n#flag -lsqlite3\n#include "sqlite3.h"\n\n// \u73af\u5883\u533a\u5206\n#flag linux -lsdl2\n\n// \u4f7f\u7528 pkgconfig \u751f\u6210 flag - PKG_CONFIG_PATH\n#pkgconfig r_core\n#pkgconfig --cflags --libs r_core\n\nstruct C.sqlite3 {\n}\n\nstruct C.sqlite3_stmt {\n}\n\ntype FnSqlite3Callback = fn (voidptr, int, &&char, &&char) int\nfn C.sqlite3_open(&char, &&C.sqlite3) int\nfn C.sqlite3_close(&C.sqlite3) int\n\n\nfn main(){\n  // null \u7ed3\u5c3e\u5b57\u7b26\u4e32\u8f6c v string - \u5b57\u7b26\u4e32\u53ef\u80fd\u9700\u8981 dup \u4f7f\u7528 cstring_to_vstring(cstring)\n  unsafe { &char(cstring).vstring() }\n  // \u5df2\u77e5\u957f\u5ea6\u8f6c string\n  unsafe { &char(cstring).vstring_with_len(len) }\n  // windows wide \u8f6c\u5b57\u7b26\u4e32 string_from_wide(&u16(cwidestring))\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u76f4\u63a5\u5305\u542b c \u4ee3\u7801, \u5728 v.mod \u6dfb\u52a0"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:'#flag -I @VMODROOT/c\n#flag @VMODROOT/c/implementation.o\n#include "header.h"\n'})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"@VMODROOT \u4f1a\u88ab\u81ea\u52a8\u66ff\u6362\u4e3a\u6700\u8fd1\u7684 parent module"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"c-\u8f6c-v",children:"C \u8f6c V"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"v translate test.c\n# \u751f\u6210 wrapper\nv wrapper c_code/libsodium/src/libsodium\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6c47\u7f16",children:"\u6c47\u7f16"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-v",children:"a := 100\nb := 20\nmut c := 0\nasm amd64 {\n    mov eax, a\n    add eax, b\n    mov c, eax\n    ; =r (c) as c // output\n    ; r (a) as a // input\n      r (b) as b\n}\nprintln('a: $a') // 100\nprintln('b: $b') // 20\nprintln('c: $c') // 120\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},3354:(e,n,r)=>{var t=r(50959),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,r){var t,l={},d=null,o=null;for(t in void 0!==r&&(d=""+r),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(o=n.ref),n)c.call(n,t)&&!a.hasOwnProperty(t)&&(l[t]=n[t]);if(e&&e.defaultProps)for(t in n=e.defaultProps)void 0===l[t]&&(l[t]=n[t]);return{$$typeof:s,type:e,key:d,ref:o,props:l,_owner:i.current}}n.Fragment=l,n.jsx=d,n.jsxs=d},11527:(e,n,r)=>{e.exports=r(3354)},47214:(e,n,r)=>{r.d(n,{Z:()=>i,a:()=>c});var t=r(50959);const s={},l=t.createContext(s);function c(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);