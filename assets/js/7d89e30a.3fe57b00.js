/*! For license information please see 7d89e30a.3fe57b00.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[17496],{62540:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var s=t(2488),i=t(62780);const o={title:"Github Action"},r="Github Action",c={id:"service/forge/github/github-action",title:"Github Action",description:"- actions/virtual-environments",source:"@site/../notes/service/forge/github/github-action.md",sourceDirName:"service/forge/github",slug:"/service/forge/github/action",permalink:"/notes/service/forge/github/action",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/forge/github/github-action.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1696577752,formattedLastUpdatedAt:"Oct 6, 2023",frontMatter:{title:"Github Action"},sidebar:"docs",previous:{title:"Github",permalink:"/notes/service/forge/github/"},next:{title:"Copilot",permalink:"/notes/service/forge/github/copilot"}},a={},l=[{value:"step",id:"step",level:2},{value:"uses",id:"uses",level:3},{value:"pnpm template",id:"pnpm-template",level:2},{value:"compile: version does not match go tool version",id:"compile-version-does-not-match-go-tool-version",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"github-action",children:"Github Action"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/actions/virtual-environments",children:"actions/virtual-environments"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions",children:"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/actions",children:"https://github.com/actions"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://gitea.com/actions",children:"https://gitea.com/actions"})}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4e0d\u652f\u6301\u5141\u8bb8\u9519\u8bef ",(0,s.jsx)(n.a,{href:"https://github.com/actions/toolkit/issues/399",children:"#399"})]}),"\n"]})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["golangci-lint-action CI \u8017\u65f6\u975e\u5e38\u957f ",(0,s.jsx)(n.a,{href:"https://github.com/golangci/golangci-lint-action/issues/297",children:"#297"})]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"step",children:"step"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"id"}),"\n",(0,s.jsx)(n.li,{children:"if name uses run shell with env continue-on-error timeout-minutes"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"uses",children:"uses"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# {owner}/{repo}@{ref}\n# {owner}/{repo}/{path}@{ref}\n- uses: actions/checkout@v3\n- uses: actions/aws/ec2@main\n\n# \u76f8\u540c\u4ed3\u5e93 - \u9700\u8981\u5148 checkout\n# ./path/to/dir\n- uses: ./.github/actions/my-action\n# docker://{image}:{tag}\n# docker://{host}/{image}:{tag}\n- uses: docker://alpine:3.8\n- uses: docker://ghcr.io/OWNER/IMAGE_NAME\n- uses: docker://gcr.io/cloud-builders/gradle\n\n# private repo\n- uses: actions/checkout@v3\n  with:\n    repository: octocat/my-private-repo\n    ref: v1.0\n    token: ${{ secrets.PERSONAL_ACCESS_TOKEN }}\n    path: ./.github/actions/my-private-repo\n# from private repo\n- uses: ./.github/actions/my-private-repo/my-action\n"})}),"\n",(0,s.jsx)(n.h2,{id:"pnpm-template",children:"pnpm template"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"name: Build\n\non:\n  push:\n    branches: [master]\n  pull_request:\n    branches: [master]\n\njobs:\n  build:\n    runs-on: ubuntu-22.04\n\n    steps:\n      - uses: actions/checkout@v3\n      - name: Install Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 16\n      - uses: pnpm/action-setup@v2.0.1\n        name: Install pnpm\n        id: pnpm-install\n        with:\n          version: 7\n          run_install: false\n      - name: Get pnpm store directory\n        id: pnpm-cache\n        run: |\n          echo \"::set-output name=pnpm_cache_dir::$(pnpm store path)\"\n      - name: Build Cache\n        id: build-cache\n        uses: actions/cache@v2\n        with:\n          path: ${{ steps.pnpm-cache.outputs.pnpm_cache_dir }}\n          key: ${{ runner.os }}-pnpm-store-${{ hashFiles('**/pnpm-lock.yaml') }}\n          restore-keys: |\n            ${{ runner.os }}-pnpm-store-\n\n      # Real build\n      - run: make ci\n\n      - name: Deploy Pages\n        uses: JamesIves/github-pages-deploy-action@releases/v4\n        with:\n          branch: gh-pages\n          folder: out\n          single-commit: true\n"})}),"\n",(0,s.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,s.jsx)(n.h2,{id:"compile-version-does-not-match-go-tool-version",children:"compile: version does not match go tool version"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"- name: Run CI\n  run: |\n    export PATH=${GOROOT}/bin:$PATH\n    go version\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/actions/setup-go/issues/107#issuecomment-854071850",children:"https://github.com/actions/setup-go/issues/107#issuecomment-854071850"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},38088:(e,n,t)=>{var s=t(96651),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,t){var s,o={},l=null,u=null;for(s in void 0!==t&&(l=""+t),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(u=n.ref),n)r.call(n,s)&&!a.hasOwnProperty(s)&&(o[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===o[s]&&(o[s]=n[s]);return{$$typeof:i,type:e,key:l,ref:u,props:o,_owner:c.current}}n.Fragment=o,n.jsx=l,n.jsxs=l},2488:(e,n,t)=>{e.exports=t(38088)},62780:(e,n,t)=>{t.d(n,{I:()=>c,M:()=>r});var s=t(96651);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);