/*! For license information please see ffc67301.b711bdc6.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[92176],{4256:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>o,default:()=>a,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var i=s(2488),r=s(62780);const l={title:"OS.js"},o="OS.js",c={id:"web/script/lib/osjs",title:"OS.js",description:"- os-js/OS.js",source:"@site/../notes/web/script/lib/osjs.md",sourceDirName:"web/script/lib",slug:"/web/script/lib/osjs",permalink:"/notes/web/script/lib/osjs",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/script/lib/osjs.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1663838677,formattedLastUpdatedAt:"Sep 22, 2022",frontMatter:{title:"OS.js"},sidebar:"docs",previous:{title:"oidc-client",permalink:"/notes/web/script/lib/oidc-client"},next:{title:"PopperJS",permalink:"/notes/web/script/lib/popperjs"}},t={},d=[{value:"Notes",id:"notes",level:2},{value:"CoreBase",id:"corebase",level:2}];function j(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,r.M)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"osjs",children:"OS.js"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/os-js/OS.js",children:"os-js/OS.js"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"BSD-2, JS"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://demo.os-js.org/",children:"https://demo.os-js.org/"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"@osjs/event-emitter"}),"\n",(0,i.jsxs)(e.li,{children:["@osjs/common\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["class CoreBase\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"deepmerge, omit-deep \u5408\u5e76\u9009\u9879"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"interface ServiceProvider"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u533a\u5206 Client \u548c Server\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"@osjs/client"}),"\n",(0,i.jsx)(e.li,{children:"@osjs/server"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u52a8\u6001\u52a0\u8f7d\u7684\u5185\u5bb9\u6709 Client \u548c Server \u90e8\u5206"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/os-js/OS.js",children:"os-js/OS.js"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["client ",(0,i.jsx)(e.a,{href:"https://github.com/os-js/OS.js/blob/0aa874455e1ca5a31e7be193b3be14080300c2c1/src/client/index.js#L57-L72",children:"Bootstrap"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CoreServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"DesktopServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"VFSServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"NotificationServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"SettingsServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"AuthServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"PanelServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"DialogServiceProvider"}),"\n",(0,i.jsx)(e.li,{children:"GUIServiceProvider"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u914d\u7f6e ",(0,i.jsx)(e.a,{href:"https://github.com/os-js/osjs-client/blob/master/src/config.js",children:"https://github.com/os-js/osjs-client/blob/master/src/config.js"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/os-js/osjs-event-emitter",children:"@osjs/event-emitter"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u975e\u5e38\u7b80\u5355\u7684 EventEmitter"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/os-js/osjs-common",children:"@osjs/common"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["CoreBase\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f5c\u4e3a OS \u7684\u6838\u5fc3 \u5bb9\u5668/IoC \u5bb9\u5668/\u8fd0\u884c\u4e0a\u4e0b\u6587"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["providerHandler - \u521b\u5efa\u5bb9\u5668\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"IoC \u4f9d\u8d56\u5bb9\u5668"}),"\n",(0,i.jsxs)(e.li,{children:["\u57fa\u4e8e ",(0,i.jsx)(e.a,{href:"https://github.com/chriswoodle/async-dependency-graph",children:"async-dependency-graph"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"async-dependency-graph - 5.3kB 1.5kB"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u6bd4 inversify - 50kB, 11kB"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["@osjs/client\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Core extends CoreBase\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["window.OSjs = this.createGlobalApi()\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u66b4\u9732\u5230\u5168\u5c40\u7684 API"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"Application - \u5e94\u7528\u7ba1\u7406"}),"\n",(0,i.jsx)(e.li,{children:"Window - \u7a97\u53e3\u7ba1\u7406\u5668"}),"\n",(0,i.jsx)(e.li,{children:"Session - \u4f1a\u8bdd"}),"\n",(0,i.jsx)(e.li,{children:"Packages - \u52a8\u6001\u52a0\u8f7d\u5305"}),"\n",(0,i.jsx)(e.li,{children:"Tray"}),"\n",(0,i.jsx)(e.li,{children:"Websocket - ws \u901a\u8baf"}),"\n",(0,i.jsx)(e.li,{children:"Clickboard"}),"\n",(0,i.jsx)(e.li,{children:"Middleware"}),"\n",(0,i.jsxs)(e.li,{children:["locale\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/os-js/osjs-client/blob/master/src/locale/zh_CN.js",children:"https://github.com/os-js/osjs-client/blob/master/src/locale/zh_CN.js"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["CoreServiceProvider\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"osjs/application"}),"\n",(0,i.jsx)(e.li,{children:"osjs/basic-application"}),"\n",(0,i.jsx)(e.li,{children:"osjs/window"}),"\n",(0,i.jsx)(e.li,{children:"osjs/windows"}),"\n",(0,i.jsx)(e.li,{children:"osjs/event-handler"}),"\n",(0,i.jsx)(e.li,{children:"osjs/window-behaviour"}),"\n",(0,i.jsx)(e.li,{children:"osjs/dnd"}),"\n",(0,i.jsx)(e.li,{children:"osjs/dom"}),"\n",(0,i.jsx)(e.li,{children:"osjs/clipboard"}),"\n",(0,i.jsx)(e.li,{children:"osjs/middleware"}),"\n",(0,i.jsx)(e.li,{children:"osjs/tray"}),"\n",(0,i.jsx)(e.li,{children:"osjs/locale"}),"\n",(0,i.jsx)(e.li,{children:"osjs/packages"}),"\n",(0,i.jsx)(e.li,{children:"osjs/websocket"}),"\n",(0,i.jsx)(e.li,{children:"osjs/session"}),"\n",(0,i.jsx)(e.li,{children:"osjs/theme"}),"\n",(0,i.jsx)(e.li,{children:"osjs/sounds"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5e94\u7528 \u6ce8\u518c\u903b\u8f91\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7c7b\u578b: theme, icons, sounds, application"}),"\n",(0,i.jsxs)(e.li,{children:["\u5148 preload\uff0c\u7136\u540e\u5e94\u7528\u5185\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"osjs.register(name,callback)"})," \u6ce8\u518c\u56de\u8c03\u5230 Packages"]}),"\n",(0,i.jsx)(e.li,{children:"Packages preload \u5b8c\u6210\u540e\u89e6\u53d1 \u6ce8\u518c\u7684 \u56de\u8c03"}),"\n",(0,i.jsxs)(e.li,{children:["callback \u5165\u53c2\u4e3a ",(0,i.jsx)(e.code,{children:"core, args, options, metadata"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5e94\u7528\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u521b\u5efa osjs/application \u4f5c\u4e3a\u4e3b\u8981 \u8fdb\u7a0b\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7 proc \u521b\u5efa window - \u83b7\u53d6\u5230\u53ef\u6e32\u67d3\u7684 $content"}),"\n",(0,i.jsxs)(e.li,{children:["\u521b\u5efa osjs/basic-application \u4f5c\u4e3a event-bus\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b\u6807\u51c6\u64cd\u4f5c - dialog, vfs \u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"\u6e32\u67d3\u5230 $content"}),"\n",(0,i.jsxs)(e.li,{children:["vfs \u64cd\u4f5c\u89e6\u53d1\u4e8b\u4ef6\u5230 event\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"new-file"}),"\n",(0,i.jsx)(e.li,{children:"save-file - \u5b9e\u9645\u4fdd\u5b58\u64cd\u4f5c"}),"\n",(0,i.jsx)(e.li,{children:"open-file - \u5b9e\u9645\u8bfb\u53d6\u6587\u4ef6"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"corebase",children:"CoreBase"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"export interface ServiceProviderOptions {\n  before?: boolean;\n  args?: object;\n}\n\nexport class ServiceProvider {\n  readonly core: CoreBase;\n  readonly options: any;\n  constructor(core: CoreBase, options: any);\n  // \u6240\u6709\u670d\u52a1\n  provides(): string[];\n  // \u521d\u59cb\u5316\n  init(): Promise<any>;\n  // \u542f\u52a8\n  start(): Promise<any>;\n  // \u9500\u6bc1\n  destroy(): void;\n}\n\nexport class CoreBase extends EventEmitter {\n  // \u9ed8\u8ba4 console\n  readonly logger: any;\n  readonly configuration: object;\n  readonly options: object;\n  booted: boolean;\n  started: boolean;\n  destroyd: boolean;\n  // Service Provider Handler\n  providers: any;\n\n  constructor(defaultConfiguration: object, configuration: object, options: object);\n\n  // \u9500\u6bc1\n  destroy(): void;\n  // \u542f\u52a8\n  boot(): Promise<boolean>;\n\n  // \u542f\u52a8\u6240\u6709\u6838\u5fc3\u670d\u52a1\n  // before?\n  // this.providers.init(false)\n  start(): Promise<boolean>;\n  // \u83b7\u53d6\u914d\u7f6e\n  config(key: string, defaultValue: any): any;\n\n  // \u6ce8\u518c service provider\n  // providers.push(new ref(core, options.args))\n  register(ref: typeof ServiceProvider, options: ServiceProviderOptions): void;\n\n  // \u6ce8\u518c instanciator provider\n  instance(name: string, callback: Function): void;\n  // \u6ce8\u518c \u5355\u4f8b provider\n  singleton(name: string, callback: Function): void;\n  // \u5b9e\u4f8b\u5316\u670d\u52a1\n  //\n  make<T>(name: string, ...args: any[]): T;\n\n  // \u670d\u52a1\u662f\u5426\u5b58\u5728\n  has(name: string): boolean;\n}\n\n"})})]})}function a(n={}){const{wrapper:e}={...(0,r.M)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(j,{...n})}):j(n)}},38088:(n,e,s)=>{var i=s(96651),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function d(n,e,s){var i,l={},d=null,j=null;for(i in void 0!==s&&(d=""+s),void 0!==e.key&&(d=""+e.key),void 0!==e.ref&&(j=e.ref),e)o.call(e,i)&&!t.hasOwnProperty(i)&&(l[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps)void 0===l[i]&&(l[i]=e[i]);return{$$typeof:r,type:n,key:d,ref:j,props:l,_owner:c.current}}e.Fragment=l,e.jsx=d,e.jsxs=d},2488:(n,e,s)=>{n.exports=s(38088)},62780:(n,e,s)=>{s.d(e,{I:()=>c,M:()=>o});var i=s(96651);const r={},l=i.createContext(r);function o(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);