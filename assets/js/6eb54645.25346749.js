/*! For license information please see 6eb54645.25346749.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[18132],{51676:(n,s,e)=>{e.r(s),e.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>c,toc:()=>h});var t=e(2488),i=e(62780);const r={title:"NATS"},l="NATS",c={id:"queue/nats/README",title:"NATS",description:"- \u652f\u6301 JetStreaming",source:"@site/../notes/queue/nats/README.md",sourceDirName:"queue/nats",slug:"/queue/nats/",permalink:"/notes/queue/nats/",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/queue/nats/README.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1710413103,formattedLastUpdatedAt:"Mar 14, 2024",frontMatter:{title:"NATS"},sidebar:"docs",previous:{title:"mosquitto",permalink:"/notes/queue/mosquitto"},next:{title:"nats-account-server",permalink:"/notes/queue/nats/account-server"}},a={},h=[{value:"Notes",id:"notes",level:2},{value:"nats-top",id:"nats-top",level:2}];function o(n){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"nats",children:"NATS"}),"\n",(0,t.jsx)(s.admonition,{type:"tip",children:(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 JetStreaming"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 WebSocket - \u80fd\u591f\u5229\u7528 HTTP \u57fa\u7840\u8bbe\u65bd"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 JWT Auth"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 Auth Resolver - \u901a\u8fc7 nats service \u76d1\u542c\u5b9e\u73b0\u81ea\u5b9a\u4e49 auth"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 Group Consumer"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 RPC -> Load Balance - Request/Reply"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 KV"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 ObjectStore"}),"\n"]})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats-server",children:"nats-io/nats-server"})," \u662f\u4ec0\u4e48\uff1f\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u504f\u5411\u901a\u8baf\u534f\u8bae\uff0c\u7528\u4f5c \u6d88\u606f\u961f\u5217"}),"\n",(0,t.jsx)(s.li,{children:"\u9ed8\u8ba4\u6ca1\u6709\u6301\u4e45\u5316"}),"\n",(0,t.jsx)(s.li,{children:"\u534f\u8bae\u652f\u6301 MQTT, NATS, WebSocket"}),"\n",(0,t.jsxs)(s.li,{children:["\u96c6\u6210 JetStream - \u66ff\u4ee3 STAN\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 KV\u3001ObjectStore"}),"\n",(0,t.jsx)(s.li,{children:"\u652f\u6301 \u6301\u4e45\u5316"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\u7aef\u53e3\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"4222 \u5ba2\u6237\u7aef"}),"\n",(0,t.jsx)(s.li,{children:"8222 HTTP \u7ba1\u7406\u548c\u4fe1\u606f\u4e0a\u62a5"}),"\n",(0,t.jsx)(s.li,{children:"6222 \u96c6\u7fa4\u8def\u7531"}),"\n",(0,t.jsx)(s.li,{children:"7422 Leaf Node"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\u53c2\u8003\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats-architecture-and-design",children:"nats-io/nats-architecture-and-design"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"ADR - Architecture and Design Docs"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://github.com/nats-io/natscli",children:"nats-io/natscli"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u547d\u4ee4\u884c\u5de5\u5177"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nsc",children:"nats-io/nsc"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"nats \u8d26\u53f7\u7ba1\u7406\u529f\u80fd"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://docs.nats.io/compare-nats",children:"compare-nats"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://docs.nats.io/nats-protocol/nats-protocol",children:"Client Protocol"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["SDK\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.go",children:"nats.go"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.java",children:"nats.java"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.net",children:"nats.net"})}),"\n",(0,t.jsxs)(s.li,{children:["Javascript\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.ws",children:"nats.ws"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.deno",children:"nats.deno"})}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.js",children:"nats.js"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"NPM nats"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.c",children:"nats.c"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.py",children:"nats.py"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats.rs",children:"nats.rs"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Demo\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"nats://demo.nats.io:4222"}),"\n",(0,t.jsx)(s.li,{children:"demo.nats.io:7422"}),"\n",(0,t.jsx)(s.li,{children:"wss://demo.nats.io:8443"}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/varz",children:"https://demo.nats.io:8222/varz"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/healthz",children:"https://demo.nats.io:8222/healthz"})}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/connz",children:"https://demo.nats.io:8222/connz"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"limit, offset, state"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/routez?subs=true",children:"https://demo.nats.io:8222/routez?subs=true"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/gatewayz",children:"https://demo.nats.io:8222/gatewayz"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/leafz?subs=true",children:"https://demo.nats.io:8222/leafz?subs=true"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/subsz",children:"https://demo.nats.io:8222/subsz"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/acountz?acc=$G",children:"https://demo.nats.io:8222/acountz?acc=$G"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/accstatz?unused=false",children:"https://demo.nats.io:8222/accstatz?unused=false"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://demo.nats.io:8222/jsz",children:"https://demo.nats.io:8222/jsz"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Docker\n# \u670d\u52a1\u7aef - \u5927\u7ea6 10mb\ndocker run --rm -it --name nats -p 4222:4222 -p 6222:6222 -p 8222:8222 nats:alpine -js\n\n# macOS\nbrew install nats-server\nnats-server\n\n# nats \u5de5\u5177\u9700\u8981\u989d\u5916 tap \u6216\u8005\u76f4\u63a5\u4e0b\u8f7d https://github.com/nats-io/natscli/releases\nbrew tap nats-io/nats-tools\nbrew install nats-io/nats-tools/nats\nnats --help\n\nnats account info\nnats rtt\n"})}),"\n",(0,t.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Subject-Based Messaging\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Subject \u540d\u5b57 ",(0,t.jsx)(s.code,{children:"[a-z0-9.]+"})]}),"\n",(0,t.jsx)(s.li,{children:"\u7ea7/\u5c42/token"}),"\n",(0,t.jsxs)(s.li,{children:["\u5efa\u8bae\u4e0d\u8d85\u8fc7 ",(0,t.jsx)(s.strong,{children:"16"})," \u5c42"]}),"\n",(0,t.jsxs)(s.li,{children:["\u901a\u8fc7 ",(0,t.jsx)(s.code,{children:"a.b"})," \u65b9\u5f0f\u5b9e\u73b0\u7ea7\u8054"]}),"\n",(0,t.jsxs)(s.li,{children:["\u5355\u5c42\u5339\u914d ",(0,t.jsx)(s.code,{children:"a.*.c"})," - \u5339\u914d a.b.c"]}),"\n",(0,t.jsxs)(s.li,{children:["\u591a\u5c42\u5339\u914d ",(0,t.jsx)(s.code,{children:"a.b.>"})," - \u5339\u914d a.b.c.d"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"*.*.c.>"})," - \u5339\u914d a.b.c.d"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:"Publish-Subscribe"}),"\n",(0,t.jsxs)(s.li,{children:["Queue Groups / Queue Subscribe / Consumer Group\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Kafka Consumer Group \u6982\u5ff5"}),"\n",(0,t.jsx)(s.li,{children:"\u591a\u4e2a consumer \u5171\u4eab\u6d88\u8d39\u4f4d\u7f6e"}),"\n",(0,t.jsx)(s.li,{children:"queue \u8868\u793a\u8fd9\u4e2a group - \u6709\u552f\u4e00\u7684\u540d\u5b57"}),"\n",(0,t.jsx)(s.li,{children:"\u5982\u679c\u4e0d\u8bbe\u7f6e durable \u5219\u4f1a\u5728 consumer \u5173\u95ed\u5b8c\u65f6\u79fb\u9664 queue \u4fe1\u606f"}),"\n",(0,t.jsx)(s.li,{children:"durable \u4e3a\u4e00\u4e2a consumer \u7684\u540d\u5b57"}),"\n",(0,t.jsx)(s.li,{children:"\u5f53\u6240\u6709 consumer unsub \u65f6\uff0c\u4e5f\u4f1a\u79fb\u9664 queue \u4fe1\u606f"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["ACK\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u54cd\u5e94\u4e00\u6761\u6d88\u8d39\u7684\u6d88\u606f"}),"\n",(0,t.jsxs)(s.li,{children:["\u8fd4\u56de ",(0,t.jsx)(s.code,{children:"+ACK"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:"Sequence Numbers"}),"\n",(0,t.jsxs)(s.li,{children:["Leaf Nodes\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u8def\u7531\u6d88\u606f\u5230\u5176\u4ed6\u96c6\u7fa4"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["gateways\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u8fde\u63a5\u591a\u4e2a\u96c6\u7fa4\u7ec4\u6210 full mesh"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"nats-top",children:"nats-top"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/nats-io/nats-top",children:"nats-io/nats-top"})}),"\n"]})]})}function d(n={}){const{wrapper:s}={...(0,i.M)(),...n.components};return s?(0,t.jsx)(s,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}},38088:(n,s,e)=>{var t=e(96651),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function h(n,s,e){var t,r={},h=null,o=null;for(t in void 0!==e&&(h=""+e),void 0!==s.key&&(h=""+s.key),void 0!==s.ref&&(o=s.ref),s)l.call(s,t)&&!a.hasOwnProperty(t)&&(r[t]=s[t]);if(n&&n.defaultProps)for(t in s=n.defaultProps)void 0===r[t]&&(r[t]=s[t]);return{$$typeof:i,type:n,key:h,ref:o,props:r,_owner:c.current}}s.Fragment=r,s.jsx=h,s.jsxs=h},2488:(n,s,e)=>{n.exports=e(38088)},62780:(n,s,e)=>{e.d(s,{I:()=>c,M:()=>l});var t=e(96651);const i={},r=t.createContext(i);function l(n){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(s):{...s,...n}}),[s,n])}function c(n){let s;return s=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),t.createElement(r.Provider,{value:s},n.children)}}}]);