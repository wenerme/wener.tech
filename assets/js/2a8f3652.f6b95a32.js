/*! For license information please see 2a8f3652.f6b95a32.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[41464],{88332:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>i,metadata:()=>t,toc:()=>h});var r=s(2488),l=s(62780);const i={title:"NestJS"},c="NestJS",t={id:"web/framework/nestjs/README",title:"NestJS",description:"- nestjs/nest",source:"@site/../notes/web/framework/nestjs/README.md",sourceDirName:"web/framework/nestjs",slug:"/web/framework/nestjs/",permalink:"/notes/web/framework/nestjs/",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/framework/nestjs/README.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1708697175,formattedLastUpdatedAt:"Feb 23, 2024",frontMatter:{title:"NestJS"},sidebar:"docs",previous:{title:"mocha",permalink:"/notes/web/framework/mocha"},next:{title:"nestia",permalink:"/notes/web/framework/nestjs/nestia"}},d={},h=[{value:"GraphQL",id:"graphql",level:2},{value:"Standalone",id:"standalone",level:2},{value:"Reflection metadata &#39;design&#39; returning undefined",id:"reflection-metadata-design-returning-undefined",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"nestjs",children:"NestJS"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/nestjs/nest",children:"nestjs/nest"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u8ba1\u6765\u81ea Angular + SpringFramework"}),"\n",(0,r.jsx)(n.li,{children:"http-errors"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6838\u5fc3\u6982\u5ff5\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Module\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@Module()"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Controller\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"request -> response"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@Controller('user/me')"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Get()"}),",",(0,r.jsx)(n.code,{children:"@Post"})," - ",(0,r.jsx)(n.code,{children:"@HttpCode(204)"}),", ",(0,r.jsx)(n.code,{children:"@Header('Cache-Control', 'none')"}),", ",(0,r.jsx)(n.code,{children:"@Redirect('https://nestjs.com', 301)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Request()"}),", ",(0,r.jsx)(n.code,{children:"@Req() req: Request"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Response()"}),", ",(0,r.jsx)(n.code,{children:"@Res() res: Response"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Param(key?: string)"})," - req.params"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Body(key?: string)"})," - req.body"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Query(key?: string)"})," - req.query"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Headers(name?: string)"})," - req.headers"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@Next() next"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Ip()"})," - req.ip"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@HostParam()"})," - req.hosts"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@Session()"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Provider\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@Injectable()"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@Optional()"}),", ",(0,r.jsx)(n.code,{children:"@Inject(key?:string)"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Middleware"}),"\n",(0,r.jsx)(n.li,{children:"Exception filter"}),"\n",(0,r.jsx)(n.li,{children:"Pipe"}),"\n",(0,r.jsx)(n.li,{children:"Guard"}),"\n",(0,r.jsx)(n.li,{children:"Interceptor"}),"\n",(0,r.jsx)(n.li,{children:"decorator"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u7279\u6027\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5e95\u5c42\u5e73\u53f0\u65e0\u5173 - \u9ed8\u8ba4 Express\uff0c\u53ef\u7528 Fastify"}),"\n",(0,r.jsx)(n.li,{children:"\u652f\u6301 GraphQL\u3001WebSocket"}),"\n",(0,r.jsx)(n.li,{children:"combine your config and your code seamlessly by making use of TypeScript decorators"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u96c6\u6210\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["NextJS\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/nestjs/nest/issues/1122",children:"nestjs/nest#1122"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/kyle-mccarthy/nest-next",children:"kyle-mccarthy/nest-next"})}),"\n",(0,r.jsx)(n.li,{children:"\u56e0\u4e3a Next \u53ef\u80fd\u5728\u6784\u5efa\u65f6\u6709\u4e00\u4e9b\u8bf7\u6c42\uff0c\u4e24\u8005\u5171\u5b58\u53ef\u80fd\u4f1a\u6709\u4e9b\u95ee\u9898"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u80fd\u524d\u540e\u7aef\u5206\u79bb\u66f4\u597d"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6570\u636e\u5e93\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@nestjs/typeorm"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@nestjs/sequelize"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u914d\u7f6e\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@nestjs/config"})," - dotenv"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6821\u9a8c\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/class-validator",children:"class-validator"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u7f13\u5b58\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/cache-manager",children:"cache-manager"})," - Flexible NodeJS cache module"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5e8f\u5217\u5316\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/class-transformer",children:"class-transformer"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u4efb\u52a1\u8c03\u5ea6\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@nestjs/schedule"})," - ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/node-cron",children:"node-cron"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5b89\u5168\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/helmet",children:"helmet"})}),"\n",(0,r.jsxs)(n.li,{children:["CSRF ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/csurf",children:"csurf"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u9650\u6d41 ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/express-rate-limit",children:"express-rate-limit"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u961f\u5217\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@nestjs/bull"})," - bull"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u65e5\u5fd7\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/winstonjs/winston",children:"winstonjs/winston"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u6587\u4ef6\u4e0a\u4f20\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/expressjs/multer",children:"expressjs/multer"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["HTTP \u5ba2\u6237\u7aef\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"axios"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["GraphQL\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@nestjs/graphql"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@nestjs/apollo"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"apollo-server-express"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"@nestjs/mercurius"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\ud83d\udcc2 src\n\u251c\u2500 \ud83d\udcc4 app.controller.spec.ts\n\u251c\u2500 \ud83d\udcc4 app.controller.ts\n\u251c\u2500 \ud83d\udcc4 app.module.ts\n\u251c\u2500 \ud83d\udcc4 app.service.ts\n\u2514\u2500 \ud83d\udcc4 main.ts\n"})}),"\n",(0,r.jsx)(n.h2,{id:"graphql",children:"GraphQL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Express + Apollo \u9ed8\u8ba4\nnpm i @nestjs/graphql @nestjs/apollo @apollo/server graphql\n\n# Fastify + Apollo\nnpm i @nestjs/graphql @nestjs/apollo @apollo/server @as-integrations/fastify graphql\n\n# Fastify + Mercurius\nnpm i @nestjs/graphql @nestjs/mercurius graphql mercurius\n"})}),"\n",(0,r.jsx)(n.h2,{id:"standalone",children:"Standalone"}),"\n",(0,r.jsx)(n.p,{children:"\u4f5c\u4e3a IoC \u5bb9\u5668"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["@nestjs/core\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"172.1kB, 43.9kB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["@nestjs/common\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"86.9kB, 19.4kB"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { NestFactory } from '@nestjs/core';\n\nconst app = await NestFactory.createApplicationContext(AppModule);\nconst userService = app.get(UserService);\n\nawait app.close();\n"})}),"\n",(0,r.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(n.h2,{id:"reflection-metadata-design-returning-undefined",children:"Reflection metadata 'design:paramtypes' returning undefined"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u9700\u8981 emitDecoratorMetadata"}),"\n",(0,r.jsx)(n.li,{children:"esbuild \u4e0d\u652f\u6301 emitDecoratorMetadata\uff0cswc \u652f\u6301"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u63a8\u8350 swc + tsx\npnpm swc --watch ./src -d ./dist/out\npnpm tsx watch ./dist/out/main.js\n\n# \u6216 ts-node\nts-node --esm --swc\n"})})]})}function a(e={}){const{wrapper:n}={...(0,l.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},38088:(e,n,s)=>{var r=s(96651),l=Symbol.for("react.element"),i=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,t=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(e,n,s){var r,i={},h=null,o=null;for(r in void 0!==s&&(h=""+s),void 0!==n.key&&(h=""+n.key),void 0!==n.ref&&(o=n.ref),n)c.call(n,r)&&!d.hasOwnProperty(r)&&(i[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===i[r]&&(i[r]=n[r]);return{$$typeof:l,type:e,key:h,ref:o,props:i,_owner:t.current}}n.Fragment=i,n.jsx=h,n.jsxs=h},2488:(e,n,s)=>{e.exports=s(38088)},62780:(e,n,s)=>{s.d(n,{I:()=>t,M:()=>c});var r=s(96651);const l={},i=r.createContext(l);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);