"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[7292],{49613:function(t,e,n){n.d(e,{Zo:function(){return k},kt:function(){return o}});var a=n(59496);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var m=a.createContext({}),d=function(t){var e=a.useContext(m),n=e;return t&&(n="function"==typeof t?t(e):p(p({},e),t)),n},k=function(t){var e=d(t.components);return a.createElement(m.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},N=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,m=t.parentName,k=i(t,["components","mdxType","originalType","parentName"]),N=d(n),o=r,g=N["".concat(m,".").concat(o)]||N[o]||u[o]||l;return n?a.createElement(g,p(p({ref:e},k),{},{components:n})):a.createElement(g,p({ref:e},k))}));function o(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,p=new Array(l);p[0]=N;var i={};for(var m in e)hasOwnProperty.call(e,m)&&(i[m]=e[m]);i.originalType=t,i.mdxType="string"==typeof t?t:r,p[1]=i;for(var d=2;d<l;d++)p[d]=n[d];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}N.displayName="MDXCreateElement"},8020:function(t,e,n){n.r(e),n.d(e,{assets:function(){return k},contentTitle:function(){return m},default:function(){return o},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return u}});var a=n(96600),r=n(27279),l=(n(59496),n(49613)),p=["components"],i={title:"n2n"},m="n2n",d={unversionedId:"service/network/n2n",id:"service/network/n2n",title:"n2n",description:"- ntop/n2n \u662f\u4ec0\u4e48?",source:"@site/../notes/service/network/n2n.md",sourceDirName:"service/network",slug:"/service/network/n2n",permalink:"/notes/service/network/n2n",draft:!1,editUrl:"https://github.com/wenerme/wener/edit/master/../notes/service/network/n2n.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1645693721,formattedLastUpdatedAt:"Feb 24, 2022",frontMatter:{title:"n2n"},sidebar:"docs",previous:{title:"n2n version",permalink:"/notes/service/network/n2n-version"},next:{title:"NAT",permalink:"/notes/service/network/nat"}},k={},u=[{value:"\u9009\u9879",id:"\u9009\u9879",level:2},{value:"\u52a0\u5bc6",id:"\u52a0\u5bc6",level:3},{value:"NOTES",id:"notes",level:2},{value:"supernode",id:"supernode",level:2},{value:"Supernode not responding, now trying",id:"supernode-not-responding-now-trying",level:2}],N={toc:u};function o(t){var e=t.components,n=(0,r.Z)(t,p);return(0,l.kt)("wrapper",(0,a.Z)({},N,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"n2n"},"n2n"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/ntop/n2n"},"ntop/n2n")," \u662f\u4ec0\u4e48?"),(0,l.kt)("li",{parentName:"ul"},"\u4e2d\u5fc3\u8282\u70b9 - supernode"),(0,l.kt)("li",{parentName:"ul"},"\u5355\u7ebf\u7a0b"),(0,l.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://www.supernode.ml"},"supernode.ml"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"supernode \u5217\u8868"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/lucktu/n2n"},"lucktu/n2n"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9884\u7f16\u8bd1"))))),(0,l.kt)("li",{parentName:"ul"},"supernode",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"7654/udp - \u4e3b\u8981"),(0,l.kt)("li",{parentName:"ul"},"7654/tcp - \u8f85\u52a9"),(0,l.kt)("li",{parentName:"ul"},"5645/udp - \u7ba1\u7406"))),(0,l.kt)("li",{parentName:"ul"},"edge",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"5644/udp - \u7ba1\u7406")))),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},"bridge \u652f\u6301\u6709\u70b9\u95ee\u9898"),(0,l.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u53ef\u7528\u7684 ios \u5e94\u7528 - ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/ntop/n2n/issues/381"},"ntop/n2n#381")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# macOS\nbrew install --cash tuntap\nbrew install openssl cmake\n\n# Make\n./autogen.sh\n# CFLAGS \u53ef\u542f\u7528\u672c\u5730\u6307\u4ee4\u4f18\u5316\n./configure CFLAGS=\"-O3 -march=native\"\nmake\n\n# CMake\nmkdir -p build && cd build\ncmake -DOPENSSL_ROOT_DIR=/usr/local/opt/openssl ../\nmake\n# \u4e0d\u60f3\u5b89\u88c5\u53ef\u76f4\u63a5\u4f7f\u7528 - \u4f1a\u5b89\u88c5\u5230 /usr/local/sbin\n# make install\n\n./edge --help\n\n# -r -a dhcp:0.0.0.0\nN2N_KEY=$(cat /dev/urandom | env LC_CTYPE=C tr -dc 'a-zA-Z0-9' | head -c 32)\nsudo N2N_KEY=$N2N_KEY edge  -c community -l 127.0.0.1:7654 -f -a 10.20.1.1\n\n# supernode mgmt\nnc -u 127.0.0.1 5645\n# edge mgmt\nnc -u 127.0.0.1 5644\n")),(0,l.kt)("h2",{id:"\u9009\u9879"},"\u9009\u9879"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"edge 3.0")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"edge <config file>\nedge  -c <community name> -l <supernode host:port>\n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"flag"),(0,l.kt)("th",{parentName:"tr",align:null},"defaul"),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-c COMMUNITY"),(0,l.kt)("td",{parentName:"tr",align:null},"$N2N_COMMUNITY"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-k KEY"),(0,l.kt)("td",{parentName:"tr",align:null},"$N2N_KEY"),(0,l.kt)("td",{parentName:"tr",align:null},"encryption key")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-J PASSWORD"),(0,l.kt)("td",{parentName:"tr",align:null},"$N2N_PASSWORD"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-l HOST:PORT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"supernode")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"}," -p [<ip>:]<port>")),(0,l.kt)("td",{parentName:"tr",align:null},"any"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7ed1\u5b9a\u7684\u672c\u5730\u5730\u5740\u548c\u7aef\u53e3")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-T TOS"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u5305 TOS")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-D"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"PMTU discovery")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-e IP"),(0,l.kt)("td",{parentName:"tr",align:null},"auto"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5e7f\u64ad\u7684\u672c\u5730\u5730\u5740")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-S1"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u603b\u4f7f\u7528 supernode UDP")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-S2"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u603b\u4f7f\u7528 supernode TCP")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-i REG_INTERVAL"),(0,l.kt)("td",{parentName:"tr",align:null},"20"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6ce8\u518c\u95f4\u9694\uff0c\u7528\u4e8e NAT")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-L REG_TTL"),(0,l.kt)("td",{parentName:"tr",align:null},"0"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-H"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u5934\u52a0\u5bc6 - \u8981\u6c42 supernode \u914d\u7f6e\u56fa\u5b9a community")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-z,z1,z2"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u5305\u538b\u7f29 - -z1, -z = lzo1x")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"--select-rtt"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u57fa\u4e8e rtt \u9009\u62e9 supernode - \u9ed8\u8ba4\u57fa\u4e8e\u8d1f\u8f7d")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"-a [mode]<ip>[/n]")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"CIDR \u9ed8\u8ba4 /24',mode=static,dhcp",(0,l.kt)("br",null),"DHCP ",(0,l.kt)("inlineCode",{parentName:"td"},"-r -a dhcp:0.0.0.0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-m MAD"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u9ed8\u8ba4\u968f\u673a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-d DEVICE"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"TAP \u8bbe\u5907\u540d\u5b57")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-M MTU"),(0,l.kt)("td",{parentName:"tr",align:null},"1290"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-r"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"packet forwarding")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-E"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"accept multicast MAC addresses")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-I DESCRIPTION"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"edge \u63cf\u8ff0 - \u7528\u4e8e\u7ba1\u7406\u8bc6\u522b")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-P public_key"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"federation public key for user-password authentication")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-R RULE"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u81ea\u5b9a\u4e49\u89c4\u5219")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-f"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-t PORT"),(0,l.kt)("td",{parentName:"tr",align:null},"5644"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"--management_password PW"),(0,l.kt)("td",{parentName:"tr",align:null},"n2n"),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-n CIDW:GW"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u8def\u7531\u89c4\u5219")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"edge 2.8")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"flag"),(0,l.kt)("th",{parentName:"tr",align:null},"param"),(0,l.kt)("th",{parentName:"tr",align:null},"desc"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-d"),(0,l.kt)("td",{parentName:"tr",align:null},"tun device"),(0,l.kt)("td",{parentName:"tr",align:null},"tun \u8bbe\u5907\u540d\u5b57 - \u5426\u5219\u5c31\u662f tun0 \u8fd9\u6837\u7684\u540d\u5b57")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-a"),(0,l.kt)("td",{parentName:"tr",align:null},"mode:address"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5730\u5740 - DHCP \u53ef\u4f7f\u7528 '-r -a dhcp:0.0.0.0'")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-c"),(0,l.kt)("td",{parentName:"tr",align:null},"community"),(0,l.kt)("td",{parentName:"tr",align:null},"community \u540d\u5b57")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-k"),(0,l.kt)("td",{parentName:"tr",align:null},"encrypt key"),(0,l.kt)("td",{parentName:"tr",align:null},"N2N_KEY")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-s"),(0,l.kt)("td",{parentName:"tr",align:null},"netmask"),(0,l.kt)("td",{parentName:"tr",align:null},"\u63a9\u7801 - 255.255.255.0 \u683c\u5f0f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-l,supernode-list"),(0,l.kt)("td",{parentName:"tr",align:null},"host:port"),(0,l.kt)("td",{parentName:"tr",align:null},"Supernode \u5730\u5740:\u7aef\u53e3")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-i"),(0,l.kt)("td",{parentName:"tr",align:null},"reg_interval"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6ce8\u518c\u95f4\u9694\uff0c\u7528\u4e8e NAT \u7a7f\u900f - \u9ed8\u8ba4 20 \u79d2")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-L"),(0,l.kt)("td",{parentName:"tr",align:null},"reg_ttl"),(0,l.kt)("td",{parentName:"tr",align:null},"NAT \u7a7f\u900f \u65f6 UDP \u6ce8\u518c\u7684 TTL - \u9ed8\u8ba4 0 \u672a\u8bbe\u7f6e")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-p"),(0,l.kt)("td",{parentName:"tr",align:null},"local port"),(0,l.kt)("td",{parentName:"tr",align:null},"\u672c\u5730\u56fa\u5b9a UDP \u7aef\u53e3")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-u"),(0,l.kt)("td",{parentName:"tr",align:null},"UID"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd0\u884c UID")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-g"),(0,l.kt)("td",{parentName:"tr",align:null},"GID"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd0\u884c GID")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-f"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u524d\u53f0\u8fd0\u884c")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-m"),(0,l.kt)("td",{parentName:"tr",align:null},"MAC address"),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fa\u5b9a mac \u5730\u5740")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-M"),(0,l.kt)("td",{parentName:"tr",align:null},"mtu"),(0,l.kt)("td",{parentName:"tr",align:null},"\u63a5\u53e3 MTU - \u9ed8\u8ba4 1290")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-D"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u542f\u7528 PMTU \u53d1\u73b0 - \u652f\u6301\u573a\u666f\u53ef\u51cf\u5c11\u5206\u5305\uff0c\u4e0d\u652f\u6301\u53ef\u80fd\u5bfc\u81f4\u5305\u5ef6\u65f6")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-r"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u542f\u7528\u5305\u8f6c\u53d1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-H"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u5934\u52a0\u5bc6 - \u8981\u6c42 supernode \u914d\u7f6e\u56fa\u5b9a community")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-z,z1,z2"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u5305\u538b\u7f29 - -z1 or -z = lzo1x (default=disabled).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-E"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u652f\u6301\u591a\u64ad MAC - \u9ed8\u8ba4\u4e22\u5f03")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-S"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e0d\u5c1d\u8bd5 P2P - \u901a\u8fc7 supernode \u4e2d\u8f6c")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-T"),(0,l.kt)("td",{parentName:"tr",align:null},"tos"),(0,l.kt)("td",{parentName:"tr",align:null},"TOS for packets - \u4f8b\u5982 SSH \u4e3a 0x48")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-n"),(0,l.kt)("td",{parentName:"tr",align:null},"cidr:gateway"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8def\u7531\u7ed9\u5b9a\u7f51\u7edc - \u53ef\u4f7f\u7528 0.0.0.0/0 \u8def\u7531\u9ed8\u8ba4\u7f51\u7edc")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-v"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u8be6\u7ec6\u65e5\u5fd7 - \u53ef\u591a\u6b21\u6307\u5b9a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-t"),(0,l.kt)("td",{parentName:"tr",align:null},"port"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7ba1\u7406 UDP \u7aef\u53e3")))),(0,l.kt)("h3",{id:"\u52a0\u5bc6"},"\u52a0\u5bc6"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"n2n \u5185\u5efa\u7b97\u6cd5 - \u4e5f\u53ef\u4ee5\u7f16\u8bd1\u7684\u65f6\u5019 link openssl"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"-k $KEY")," \u6216\u8005 N2N_KEY \u63d0\u4f9b\u5bc6\u94a5"),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4 -A3/AES"),(0,l.kt)("li",{parentName:"ul"},"-A1 \u4e3a\u4e0d\u52a0\u5bc6\uff0c\u4e0d\u63d0\u4f9b ",(0,l.kt)("inlineCode",{parentName:"li"},"-k")," \u65f6\u7684\u9ed8\u8ba4")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"center"},"Flag"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Cipher"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Mode"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Block Size"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Key Size"),(0,l.kt)("th",{parentName:"tr",align:"center"},"IV length"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Speed"),(0,l.kt)("th",{parentName:"tr",align:null},"Built-In"),(0,l.kt)("th",{parentName:"tr",align:null},"Origin"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"center"},"-A2"),(0,l.kt)("td",{parentName:"tr",align:"center"},"Twofish"),(0,l.kt)("td",{parentName:"tr",align:"center"},"CTS"),(0,l.kt)("td",{parentName:"tr",align:"center"},"128 bits"),(0,l.kt)("td",{parentName:"tr",align:"center"},"256 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"128 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"-..O"),(0,l.kt)("td",{parentName:"tr",align:null},"Y"),(0,l.kt)("td",{parentName:"tr",align:null},"Bruce Schneier")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"center"},"-A3"),(0,l.kt)("td",{parentName:"tr",align:"center"},"AES"),(0,l.kt)("td",{parentName:"tr",align:"center"},"CTS"),(0,l.kt)("td",{parentName:"tr",align:"center"},"128 bits"),(0,l.kt)("td",{parentName:"tr",align:"center"},"128, 192, 256 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"128 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"O..+"),(0,l.kt)("td",{parentName:"tr",align:null},"Y"),(0,l.kt)("td",{parentName:"tr",align:null},"Joan Daemen, Vincent Rijmen, NSA-approved")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"center"},"-A4"),(0,l.kt)("td",{parentName:"tr",align:"center"},"ChaCha20"),(0,l.kt)("td",{parentName:"tr",align:"center"},"CTR"),(0,l.kt)("td",{parentName:"tr",align:"center"},"Stream"),(0,l.kt)("td",{parentName:"tr",align:"center"},"256 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"128 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"+..++"),(0,l.kt)("td",{parentName:"tr",align:null},"Y"),(0,l.kt)("td",{parentName:"tr",align:null},"Daniel J. Bernstein")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"center"},"-A5"),(0,l.kt)("td",{parentName:"tr",align:"center"},"SPECK"),(0,l.kt)("td",{parentName:"tr",align:"center"},"CTR"),(0,l.kt)("td",{parentName:"tr",align:"center"},"Stream"),(0,l.kt)("td",{parentName:"tr",align:"center"},"256 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"128 bit"),(0,l.kt)("td",{parentName:"tr",align:"center"},"++"),(0,l.kt)("td",{parentName:"tr",align:null},"Y"),(0,l.kt)("td",{parentName:"tr",align:null},"NSA")))),(0,l.kt)("h2",{id:"notes"},"NOTES"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u591a\u4e2a supernode \u53ef\u7ec4\u8054\u90a6 - community=","*","Federation",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u5907\u4efd\u3001\u5bb9\u707e\u548c\u8d1f\u8f7d\u5747\u8861 - \u907f\u514d DDoS"),(0,l.kt)("li",{parentName:"ul"},"edge \u53ef\u4ee5\u8fde\u4e00\u4e2a\u6216\u591a\u4e2a"),(0,l.kt)("li",{parentName:"ul"},"\u540d\u5b57\u53ef ",(0,l.kt)("inlineCode",{parentName:"li"},"-F")," \u6307\u5b9a\uff0c\u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"*Federation")))),(0,l.kt)("li",{parentName:"ul"},"3.0 \u5b9e\u73b0 ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/ntop/n2n/blob/dev/doc/Authentication.md"},"\u8ba4\u8bc1")," - \u4e4b\u524d\u4f7f\u7528 MAC",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u57fa\u4e8e edge \u63d0\u4f9b\u7684\u6807\u8bc6\u4fe1\u606f"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301 user/password \u6a21\u5f0f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 n2n-keygen \u751f\u6210"),(0,l.kt)("li",{parentName:"ul"},"sn \u5728 community.list \u4e2d\u6dfb\u52a0\u751f\u6210\u7684\u4fe1\u606f"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"edge -I ${USERNAME} -J ${PASSWORD} -A5/-A4 -k ${N2N_KEY} -P ${SN_PUB_KEY}")),(0,l.kt)("li",{parentName:"ul"},"\u9700\u8981\u7528\u5230 \u5934 \u52a0\u5bc6"))),(0,l.kt)("li",{parentName:"ul"},"community",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"19 byte - \u4e0d\u5141\u8bb8\u5305\u542b ",(0,l.kt)("inlineCode",{parentName:"li"},".*+?[]\\")),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u6b63\u5219\u5339\u914d - \u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"net[0-9]")," \u6216\u8005 ",(0,l.kt)("inlineCode",{parentName:"li"},"net\\d")),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4 ",(0,l.kt)("strong",{parentName:"li"},"\u660e\u6587\u4f20\u8f93")," - \u9664\u975e\u5f00\u542f \u5934 \u52a0\u5bc6"),(0,l.kt)("li",{parentName:"ul"},"\u5f00\u542f \u5934 \u52a0\u5bc6\u540e\u540d\u5b57\u4e0d\u80fd\u4f7f\u7528\u6b63\u5219 - \u53ea\u80fd\u662f\u56fa\u5b9a\u540d\u5b57",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},".*")," \u6765\u5141\u8bb8\u4efb\u610f"))),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u88ab\u8ba4\u4e3a\u662f\u7b80\u5355\u7684\u5bc6\u7801 - \u53ea\u6709\u77e5\u9053 community \u624d\u80fd\u52a0\u5165\u7f51\u7edc")))),(0,l.kt)("h2",{id:"supernode"},"supernode"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"opt"),(0,l.kt)("th",{parentName:"tr",align:null},"default"),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-p PORT"),(0,l.kt)("td",{parentName:"tr",align:null},"7654"),(0,l.kt)("td",{parentName:"tr",align:null},"UDP, \u672c\u5730\u7aef\u53e3")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-F FEDERATION"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"*Federation")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8054\u90a6\u540d\u5b57")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-l HOST:PORT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u5df2\u77e5\u7684 supernode \u540d\u5b57\u6216\u5730\u5740")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-M"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u7981\u7528 MAC \u548c IP \u6b3a\u9a97\u4fdd\u62a4\u672a\u6388\u6743 communities")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-V VERSION"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u53d1\u9001\u7ed9 edge \u7684\u7248\u672c\u4fe1\u606f - \u6700\u957f 19")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-c PATH"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u5141\u8bb8\u7684 communities")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-a"),(0,l.kt)("td",{parentName:"tr",align:null},"10.128.255.0-10.255.255.0/24"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b50\u7f51")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-t"),(0,l.kt)("td",{parentName:"tr",align:null},"5645"),(0,l.kt)("td",{parentName:"tr",align:null},"UDP, \u7ba1\u7406\u7aef\u53e3")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"--management_password PW"),(0,l.kt)("td",{parentName:"tr",align:null},"n2n"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7ba1\u7406\u5bc6\u7801")))),(0,l.kt)("h1",{id:"faq"},"FAQ"),(0,l.kt)("h2",{id:"supernode-not-responding-now-trying"},"Supernode not responding, now trying"),(0,l.kt)("p",null,"\u5728\u91cd\u8bd5\u4e24\u6b21\u540e\u5c31\u505c\u6b62\u4e86\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u91cd\u542f\u8fdb\u884c\u518d\u6b21\u8fde\u63a5\u3002"))}o.isMDXComponent=!0}}]);