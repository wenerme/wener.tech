/*! For license information please see cfecef63.e5814abb.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[87434],{58429:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var l=s(11527),i=s(47214);const r={title:"Go FAQ",tags:["FAQ"]},o="Go FAQ",t={id:"languages/go/go-faq",title:"Go FAQ",description:"- golang/go#9200",source:"@site/../notes/languages/go/go-faq.md",sourceDirName:"languages/go",slug:"/languages/go/faq",permalink:"/notes/languages/go/faq",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/go/go-faq.md",tags:[{label:"FAQ",permalink:"/notes/tags/faq"}],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1705291463,formattedLastUpdatedAt:"Jan 15, 2024",frontMatter:{title:"Go FAQ",tags:["FAQ"]},sidebar:"docs",previous:{title:"Debugging",permalink:"/notes/languages/go/debug"},next:{title:"\u6cdb\u578b",permalink:"/notes/languages/go/generic"}},c={},d=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u5b89\u88c5\u6307\u5b9a\u7248\u672c Golang \u73af\u5883",id:"\u5b89\u88c5\u6307\u5b9a\u7248\u672c-golang-\u73af\u5883",level:2},{value:"tip \u7248\u672c",id:"tip-version",level:2},{value:"iota",id:"iota",level:2},{value:"GOVCS disallows using git for public",id:"govcs-disallows-using-git-for-public",level:2},{value:"go: cannot find GOROOT directory: /usr/local/go",id:"go-cannot-find-goroot-directory-usrlocalgo",level:2},{value:"golang.org/x",id:"golangorgx",level:2},{value:"\u67e5\u627e\u7528\u5230\u4e86 cgo \u7684\u6a21\u5757",id:"\u67e5\u627e\u7528\u5230\u4e86-cgo-\u7684\u6a21\u5757",level:2},{value:"JSON string to int",id:"json-string-to-int",level:2},{value:"sql null",id:"sql-null",level:2},{value:"Struct \u662f\u5426\u4f7f\u7528\u6307\u9488",id:"struct-\u662f\u5426\u4f7f\u7528\u6307\u9488",level:2},{value:"text/template vs html/template",id:"texttemplate-vs-htmltemplate",level:2},{value:"\u4e0d\u4f1a\u4f7f\u7528 /etc/hosts \u5c31\u884c\u89e3\u6790",id:"\u4e0d\u4f1a\u4f7f\u7528-etchosts-\u5c31\u884c\u89e3\u6790",level:2},{value:"Windows \u5b89\u88c5",id:"windows-\u5b89\u88c5",level:2},{value:"reflect.Value.Interface: cannot return value obtained from unexported field or method",id:"reflectvalueinterface-cannot-return-value-obtained-from-unexported-field-or-method",level:2},{value:"bufio.Reader vs bufio.Scanner",id:"bufioreader-vs-bufioscanner",level:2},{value:"pq vs pgx",id:"pq-vs-pgx",level:2},{value:"gc vs gccgo",id:"gc-vs-gccgo",level:2},{value:"compile: version does not match go tool version",id:"compile-version-does-not-match-go-tool-version",level:2},{value:"Cipher CBC / ECB / CFB / GCM",id:"cipher-cbc--ecb--cfb--gcm",level:2},{value:"memstats.gc_sys undefined (type mstats has no field or method gc_sys)",id:"memstatsgc_sys-undefined-type-mstats-has-no-field-or-method-gc_sys",level:2},{value:"go.sum h1",id:"gosum-h1",level:2},{value:"GODEBUG",id:"godebug",level:2},{value:"\u5e38\u89c1\u5927\u5199\u5b57\u6bb5\u540d\u5b57",id:"\u5e38\u89c1\u5927\u5199\u5b57\u6bb5\u540d\u5b57",level:2},{value:"regexp",id:"regexp",level:2},{value:"go build static",id:"go-build-static",level:2},{value:"struct \u53ef\u6bd4\u8f83",id:"struct-\u53ef\u6bd4\u8f83",level:2},{value:"\u5224\u65ad int \u7c7b\u578b",id:"\u5224\u65ad-int-\u7c7b\u578b",level:2},{value:"\u5185\u5b58\u6a21\u578b",id:"\u5185\u5b58\u6a21\u578b",level:2},{value:"This program can only be run on AMD64 processors with v3 microarchitecture support",id:"this-program-can-only-be-run-on-amd64-processors-with-v3-microarchitecture-support",level:2}];function a(n){const e={a:"a",admonition:"admonition",annotation:"annotation",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",hr:"hr",li:"li",math:"math",mi:"mi",mrow:"mrow",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,i.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"go-faq",children:"Go FAQ"}),"\n",(0,l.jsx)(e.admonition,{type:"caution",children:(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/golang/go/issues/9200",children:"golang/go#9200"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"html/template JS \u4e0d\u80fd\u5305\u542b ```"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/golang/go/issues/13492",children:"golang/go#13492"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"musl \u4e0d\u652f\u6301 c-shared"}),"\n",(0,l.jsx)(e.li,{children:"\u56e0\u4e3a c-shared \u7528\u5230\u4e86 glibc \u6269\u5c55"}),"\n",(0,l.jsx)(e.li,{children:"initial-exec TLS resolves to dynamic definition"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,l.jsx)(e.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://go.dev/dl/",children:"https://go.dev/dl/"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://mirrors.ustc.edu.cn/golang/",children:"https://mirrors.ustc.edu.cn/golang/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Windows go1.17.6.windows-amd64.zip\n# macOS go1.18.3.darwin-amd64.tar.gz\ncurl -LO https://mirrors.ustc.edu.cn/golang/go1.17.6.windows-amd64.zip\nmkdir -p ~/sdk\nunzip go1.17.6.windows-amd64.zip -d ~/sdk\nmv ~/sdk/go ~/sdk/go1.17.6\n~/sdk/go1.17.6/bin/go version\n\nexport PATH=$HOME/sdk/go1.17.6/bin:$PATH\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5b89\u88c5\u6307\u5b9a\u7248\u672c-golang-\u73af\u5883",children:"\u5b89\u88c5\u6307\u5b9a\u7248\u672c Golang \u73af\u5883"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4e0b\u8f7d\u4f4d\u7f6e\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"H"}),(0,l.jsx)(e.mi,{children:"O"}),(0,l.jsx)(e.mi,{children:"M"}),(0,l.jsx)(e.mi,{children:"E"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,l.jsx)(e.mi,{children:"s"}),(0,l.jsx)(e.mi,{children:"d"}),(0,l.jsx)(e.mi,{children:"k"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"/"}),(0,l.jsx)(e.mi,{children:"g"}),(0,l.jsx)(e.mi,{children:"o"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"HOME/sdk/go"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.08125em"},children:"H"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"OME"}),(0,l.jsx)(e.span,{className:"mord",children:"/"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,l.jsx)(e.span,{className:"mord",children:"/"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"o"})]})})]}),"VERSION/go$VERSION.darwin-amd64.tar.gz"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5b89\u88c5\u903b\u8f91 [golang.org/dl/internal/version/version.go]\uff08",(0,l.jsx)(e.a,{href:"https://cs.opensource.google/go/dl/+/1eec6072:internal/version/version.go",children:"https://cs.opensource.google/go/dl/+/1eec6072:internal/version/version.go"})]}),"\n",(0,l.jsx)(e.li,{children:"\u5b89\u88c5\u5b8c\u6210\u4e0d\u4f1a\u5220\u9664\u538b\u7f29\u5305\uff0c\u53ef\u81ea\u5df1\u5220\u9664"}),"\n",(0,l.jsxs)(e.li,{children:["tip \u6700\u65b0 latest\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4e0b\u8f7d\u6e90\u7801\u8fdb\u884c\u7f16\u8bd1"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u9ed8\u8ba4\u4e0b\u8f7d\u5730\u5740 ",(0,l.jsx)(e.code,{children:'"https://dl.google.com/go/" + version + "." + goos + "-" + arch + ext'})]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# \u4e0b\u8f7d tip \u7248\u672c\ngo install golang.org/dl/gotip@latest\ngotip download\n\n# \u4e0b\u8f7d\u6700\u65b0\u7248\u672c\n# \u4ece dl.google.com \u4e0b\u8f7d\n# \u9ed8\u8ba4\u5b89\u88c5\u5230 ~/sdk/\n# \u5176\u4ed6\u7248\u672c \u4f8b\u5982 go1.18rc1\ngo install golang.org/dl/go1.18@latest\ngo1.18 download\ngo1.18 env GOROOT\n\uff5e/sdk/go1.18/bin/go env\n\n# \u5b89\u88c5\u5230\u522b\u7684\u5730\u65b9\nHOME=/opt ~/go/bin/go1.18 download\n/opt/sdk/go1.18/bin/go env\n\n# \u4ea4\u53c9\u7f16\u8bd1\nmkdir work && cd work\ngo mod init work\ngo get -u golang.org/dl/go1.18\nGOOS=linux go build -o go1.18_linux golang.org/dl/go1.18@latest\n\n# AlpineLinux \u57fa\u7840\u4f9d\u8d56\napk add libc6-compat gcompat\n# AlpineLinux CGO \u4f9d\u8d56\napk add gcc musl-dev\n\n# \u6ce8\u610f\u8bbe\u7f6e GOROOT - \u9ed8\u8ba4 /usr/go\nexport GOROOT=/opt/sdk/go1.18\n\nexport PATH="$GOROOT/bin:$HOME/go/bin:$PATH"\n'})}),"\n",(0,l.jsx)(e.h2,{id:"tip-version",children:"tip \u7248\u672c"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"@latest - \u7a33\u5b9a\u7248\u672c"}),"\n",(0,l.jsxs)(e.li,{children:["@main, @master, @HEAD -> @tip\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6700\u65b0\u7684\u63d0\u4ea4"}),"\n",(0,l.jsx)(e.li,{children:"\u501f\u7528\u81ea Mercurial"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"iota",children:"iota"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://en.wiktionary.org/wiki/iota#Etymology",children:"https://en.wiktionary.org/wiki/iota#Etymology"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"govcs-disallows-using-git-for-public",children:"GOVCS disallows using git for public"}),"\n",(0,l.jsxs)(e.p,{children:["\u6dfb\u52a0 GOVCS \u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u4e3a ",(0,l.jsx)(e.code,{children:"public:git|hg,private:all"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5168\u90e8\u5141\u8bb8\nGOVCS=*:all go get github.com/wenerme/apki\n# \u9650\u5b9a\nGOVCS=github.com:git,*:off go get github.com/wenerme/apki\n"})}),"\n",(0,l.jsx)(e.h2,{id:"go-cannot-find-goroot-directory-usrlocalgo",children:"go: cannot find GOROOT directory: /usr/local/go"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4ece\u6e90\u7801\u6784\u5efa\u9ed8\u8ba4 GOROOT_FINAL=/usr/local/go"}),"\n",(0,l.jsxs)(e.li,{children:["AlpineLinux \u9ed8\u8ba4\u4e3a /usr/lib/go\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u81ea\u884c\u6784\u5efa\u53ef\u4fee\u6539 - ",(0,l.jsx)(e.a,{href:"https://gitlab.alpinelinux.org/alpine/aports/-/blob/master/community/go/APKBUILD#L135",children:"alpinelinix/go/APKBUILD"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"bazel \u5b89\u88c5\u7684 Go \u4e5f\u6709\u8fd9\u4e2a\u95ee\u9898"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u521b\u5efa\u76ee\u5f55 - \u63a8\u8350\u65b9\u5f0f"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"ln -s /opt/sdk/go1.18beta1 /usr/local/go\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:"\u4fee\u6539 GOROOT \u914d\u7f6e"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"GOROOT=/opt/sdk/go1.18beta1 /opt/sdk/go1.18beta1/bin/go env\n# \u5199\u5165\u540e\u4fbf\u4e0d\u4f1a\u62a5\u9519\nGOROOT=/opt/sdk/go1.18beta1 /opt/sdk/go1.18beta1/bin/go env -w GOROOT=/opt/sdk/go1.18beta1\n/opt/sdk/go1.18beta1/bin/go env\n"})}),"\n",(0,l.jsx)(e.h2,{id:"golangorgx",children:"golang.org/x"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["x/net\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/golang/net",children:"https://github.com/golang/net"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://cs.opensource.google/go/x/net",children:"https://cs.opensource.google/go/x/net"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u67e5\u627e\u7528\u5230\u4e86-cgo-\u7684\u6a21\u5757",children:"\u67e5\u627e\u7528\u5230\u4e86 cgo \u7684\u6a21\u5757"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'go list -f "{{if .CgoFiles}}{{.ImportPath}}{{end}}" $(go list -f "{{.ImportPath}}{{range .Deps}} {{.}}{{end}}" ./...)\n'})}),"\n",(0,l.jsx)(e.h2,{id:"json-string-to-int",children:"JSON string to int"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"json.Number - encode \u4fdd\u7559 number"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:'json:",string"'})," - encode \u4f1a\u8f6c string"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"sql-null",children:"sql null"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u76f4\u63a5\u4f7f\u7528\u6307\u9488\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7b80\u5355\u3001\u65e0\u5916\u90e8\u4f9d\u8d56"}),"\n",(0,l.jsx)(e.li,{children:"json\u3001mapstructure \u80fd\u6b63\u786e\u5904\u7406"}),"\n",(0,l.jsx)(e.li,{children:"\u4ee3\u7801\u903b\u8f91\u590d\u6742\u4e00\u70b9"}),"\n",(0,l.jsx)(e.li,{children:"\u53ef\u80fd\u5bfc\u81f4\u672a\u9884\u671f\u7684\u4fee\u6539"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["sql.NullType\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4ee3\u7801\u903b\u8f91\u6e05\u6670\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u6307\u9488\u4fee\u6539"}),"\n",(0,l.jsx)(e.li,{children:"json\u3001mapstructure \u65e0\u6cd5\u6b63\u786e\u5904\u7406"}),"\n",(0,l.jsx)(e.li,{children:"mapstructure \u9700\u8981\u81ea\u5b9a\u4e49 Hook"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["null.Type - ",(0,l.jsx)(e.a,{href:"https://github.com/guregu/null",children:"guregu/null"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f15\u5165\u5916\u90e8\u5e93"}),"\n",(0,l.jsx)(e.li,{children:"\u63d0\u4f9b\u4fbf\u6377\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301 json"}),"\n",(0,l.jsx)(e.li,{children:"mapstructure \u65e0\u6cd5\u6b63\u786e\u5904\u7406"}),"\n",(0,l.jsx)(e.li,{children:"mapstructure \u9700\u8981\u81ea\u5b9a\u4e49 Hook"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"struct-\u662f\u5426\u4f7f\u7528\u6307\u9488",children:"Struct \u662f\u5426\u4f7f\u7528\u6307\u9488"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u5c3d\u91cf\u4e0d\u4f7f\u7528\u6307\u9488 - \u76f4\u63a5\u4f7f\u7528 Struct \u4f1a\u66f4\u5feb\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\ud83c\udf1f \u4f7f\u7528\u6307\u9488\u4f1a\u7528\u5230\u5168\u5c40\u5806\uff0c\u4f7f\u7528 struct \u526f\u672c\u53ef\u76f4\u63a5\u653e\u5230\u6808"}),"\n",(0,l.jsx)(e.li,{children:"\u7528\u5230\u5806\u5c31\u4f1a\u6d89\u53ca\u5230 GC"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528 Pointer\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8c03\u7528\u5bc6\u5ea6\u9ad8"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0d\u9700\u8981\u526f\u672c\u573a\u666f"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528 Struct\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6570\u636e\u5bc6\u5ea6\u9ad8\u4f46\u4e0d\u9700\u8981\u7ecf\u5e38\u8c03\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd\u6570\u636e\u4e0d\u53d1\u751f\u53d8\u5316"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u679c Struct \u5305\u542b\u4e86\u4e0d\u53ef\u590d\u5236\u5bf9\u8c61\uff0c\u5219\u4e00\u5b9a\u8981\u7528\u6307\u9488 - \u4f8b\u5982 sycn.Mutex"}),"\n",(0,l.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://medium.com/a-journey-with-go/44b43b104963",children:"Go: Should I Use a Pointer instead of a Copy of my Struct?"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.ardanlabs.com/blog/2017/06/design-philosophy-on-data-and-semantics.html",children:"https://www.ardanlabs.com/blog/2017/06/design-philosophy-on-data-and-semantics.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-golang",children:'type Server struct {\n  // \u5185\u90e8\u914d\u7f6e\u5bf9\u8c61\u53ef\u4f7f\u7528 Struct\n  conf ServerConf\n}\n// \u56e0\u4e3a\u4f1a\u5bf9 conf \u8fdb\u884c\u9ed8\u8ba4\u503c\u8865\u9f50 - \u56e0\u6b64\u4f20\u5165\u6307\u9488\nfunc NewServer(conf *ServerConf)*Server{\n  // \u4fee\u6539\n  if conf.Bind == "" {\n    conf.Bind = "0.0.0.0"\n  }\n  // \u590d\u5236\u4e00\u4e2a conf \u907f\u514d\u5916\u90e8\u66f4\u6539\n  // Server \u4f7f\u7528\u6307\u9488\uff0c\u56e0\u4e3a\u4e0d\u9700\u8981\u526f\u672c\n  return &Server{ Conf = *conf }\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"texttemplate-vs-htmltemplate",children:"text/template vs html/template"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["html/template\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8f93\u51fa\u5185\u5bb9\u88ab\u8f6c\u4e49\uff0c\u907f\u514d\u4ee3\u7801\u6ce8\u5165"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4e0d\u4f1a\u4f7f\u7528-etchosts-\u5c31\u884c\u89e3\u6790",children:"\u4e0d\u4f1a\u4f7f\u7528 /etc/hosts \u5c31\u884c\u89e3\u6790"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u6dfb\u52a0 ",(0,l.jsx)(e.code,{children:"/etc/nsswitch.conf"})," \u53ef\u4ee5\u89e3\u51b3\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:'echo "hosts: files dns" > /etc/nsswitch.conf'}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/gliderlabs/docker-alpine/issues/367#issuecomment-424546457",children:"1"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/golang/go/issues/35305",children:"#35305"})," - net: prefer /etc/hosts over DNS when no /etc/nsswitch.conf is present"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/golang/go/issues/22846",children:"#22846"})," - net: Go DNS resolver does not read /etc/hosts"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"/etc/nsswitch.conf"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"# /etc/nsswitch.conf\n#\n# As described on the web page https://man7.org/linux/man-pages/man3/gethostbyname.3.html,\n# without the nsswitch.conf file, the gethostbyname() and gethostbyaddr() domain queries\n# will fail to a local name server, thus the /etc/hosts will take no effect.\n#\n# For example, when hostaliases are specified for a kubernetes pod, without proper settings\n# defined in this file, the hostaliases settings will not take effect.\n#\n# Following contents of this file is from the ubuntu:16.04 docker image.\n\npasswd:         compat\ngroup:          compat\nshadow:         compat\ngshadow:        files\n\nhosts:          files dns\nnetworks:       files\n\nprotocols:      db files\nservices:       db files\nethers:         db files\nrpc:            db files\n\nnetgroup:       nis\n"})}),"\n",(0,l.jsx)(e.h2,{id:"windows-\u5b89\u88c5",children:"Windows \u5b89\u88c5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://golang.org/dl/",children:"https://golang.org/dl/"})," - \u4e0b\u8f7d MSI \u6216 Zip\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["MSI \u9ed8\u8ba4\u5b89\u88c5\u5728 ",(0,l.jsx)(e.code,{children:"C:\\GO"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# msys \u4e0b\nexport GOPATH=$HOME/go\nexport PATH="$PATH:/c/GO/bin:$HOME/go/bin"\nexport GO111MODULE=on\nexport GOPROXY=https://goproxy.io\n'})}),"\n",(0,l.jsx)(e.h2,{id:"reflectvalueinterface-cannot-return-value-obtained-from-unexported-field-or-method",children:"reflect.Value.Interface: cannot return value obtained from unexported field or method"}),"\n",(0,l.jsx)(e.p,{children:"relfect \u4e0d\u5141\u8bb8\u8bbf\u95ee\u672a\u5bfc\u51fa\u5b57\u6bb5"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Hack access ",(0,l.jsx)(e.a,{href:"https://stackoverflow.com/a/43918797/1870054",children:"https://stackoverflow.com/a/43918797/1870054"})]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"bufioreader-vs-bufioscanner",children:"bufio.Reader vs bufio.Scanner"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["bufio.Scanner\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u4e00\u6b21\u8bfb\u4e00\u884c - \u4e0d\u5305\u542b\u5206\u9694\u7b26 ",(0,l.jsx)(e.code,{children:"\\r\\n"})]}),"\n",(0,l.jsx)(e.li,{children:"\u9ed8\u8ba4 64k \u884c\u9650\u5236"}),"\n",(0,l.jsx)(e.li,{children:"\u63a5\u53e3\u4f7f\u7528\u53cb\u597d\uff0cScan \u548c \u9519\u8bef \u72ec\u7acb"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"io.EOF"})," \u65f6 Err \u4e3a nil"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"bufio.Reader"}),"\n",(0,l.jsx)(e.li,{children:"\u5185\u90e8 4k \u7f13\u51b2"}),"\n",(0,l.jsxs)(e.li,{children:["ReadLine \u4e0d\u8fd4\u56de\u6362\u884c\uff0c\u7c7b\u4f3c Scanner\uff0c\u4f46\u8fd4\u56de ",(0,l.jsx)(e.code,{children:"[]byte"})," - ",(0,l.jsx)(e.strong,{children:"\u4e0d\u63a8\u8350"})," \u4f7f\u7528"]}),"\n",(0,l.jsx)(e.li,{children:"ReadString - \u8bfb\u53d6\u76f4\u5230\u6307\u5b9a\u5206\u9694\u7b26\uff0c\u8fd4\u56de\u5206\u9694\u7b26 - \u7c7b\u4f3c Scanner"}),"\n",(0,l.jsxs)(e.li,{children:["\u5b9e\u73b0 ",(0,l.jsx)(e.code,{children:"io.Reader"})," - \u5f88\u591a\u65f6\u5019\u8fd9\u4e2a\u662f\u9009\u62e9\u7684 ",(0,l.jsx)(e.em,{children:"\u51b3\u5b9a\u56e0\u7d20"})]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"pq-vs-pgx",children:"pq vs pgx"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"pq \u4f5c\u8005\u63a8\u8350\u63a8\u8350\u4f7f\u7528 pgx"}),"\n"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/lib/pq",children:"pq"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u9879\u76ee\u5904\u4e8e\u7ef4\u62a4\u6a21\u5f0f"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://github.com/jackc/pgx",children:"pgx"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u6240\u6709 native \u7c7b\u578b"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u903b\u8f91\u590d\u5236\u534f\u8bae"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"gc-vs-gccgo",children:"gc vs gccgo"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["gc - \u9ed8\u8ba4 Golang \u5b9e\u73b0\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u534a\u5e74\u5347\u7ea7\u4e00\u6b21 - \u8ddf\u968f spec \u7248\u672c"}),"\n",(0,l.jsx)(e.li,{children:"1.5 \u540e\u4e0d\u518d\u4f9d\u8d56 C \u7f16\u8bd1\u5668"}),"\n",(0,l.jsx)(e.li,{children:"\u8de8\u5e73\u53f0\u7f16\u8bd1 - \u4e0d\u4f9d\u8d56 CGO \u65f6"}),"\n",(0,l.jsx)(e.li,{children:"\u9759\u6001\u7f16\u8bd1 - \u4f53\u79ef\u5927 - HelloWorld 2M+"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["gccgo - \u57fa\u4e8e GCC \u5b9e\u73b0\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u968f GCC \u5347\u7ea7 - \u7248\u672c\u4e00\u822c\u843d\u540e\uff0c\u5347\u7ea7\u6162"}),"\n",(0,l.jsx)(e.li,{children:"\u4f9d\u8d56 OS \u63d0\u4f9b GCC \u5305 - \u4e00\u822c\u843d\u540e\u4e3b GCC \u7248\u672c"}),"\n",(0,l.jsx)(e.li,{children:"\u7f16\u8bd1\u66f4\u5feb\uff0c\u4f46\u652f\u6301\u66f4\u591a\u4f18\u5316 - \u91cd CPU \u573a\u666f\u6027\u80fd\u66f4\u597d"}),"\n",(0,l.jsx)(e.li,{children:"\u9ed8\u8ba4\u652f\u6301 CGO"}),"\n",(0,l.jsx)(e.li,{children:"\u652f\u6301\u66f4\u591a\u5e73\u53f0 - \u6240\u6709 GCC \u652f\u6301\u7684\u5e73\u53f0"}),"\n",(0,l.jsx)(e.li,{children:"\u4ea4\u53c9\u7f16\u8bd1\u975e\u5e38\u96be"}),"\n",(0,l.jsxs)(e.li,{children:["\u52a8\u6001\u94fe\u63a5 - \u4f53\u79ef\u975e\u5e38\u5c0f - HelloWorld 250K vs 2MB\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"libgo, libm, libgcc, libz, libpthread, ld.so, linux-vdso.so - virtual shared object"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# go \u53ef\u76f4\u63a5\u4f7f\u7528 gccgo \u7f16\u8bd1\ngo build -compiler gccgo myprog\n\n# gccgo flags\ngo build -gccgoflags "-s -w" main.go\n'})}),"\n",(0,l.jsx)(e.h2,{id:"compile-version-does-not-match-go-tool-version",children:"compile: version does not match go tool version"}),"\n",(0,l.jsx)(e.p,{children:"\u6ce8\u610f\u8c03\u6574 GOROOT"}),"\n",(0,l.jsx)(e.h2,{id:"cipher-cbc--ecb--cfb--gcm",children:"Cipher CBC / ECB / CFB / GCM"}),"\n",(0,l.jsx)(e.h2,{id:"memstatsgc_sys-undefined-type-mstats-has-no-field-or-method-gc_sys",children:"memstats.gc_sys undefined (type mstats has no field or method gc_sys)"}),"\n",(0,l.jsx)(e.p,{children:"\u5347\u7ea7\u540e\u51fa\u73b0\uff0c\u5c1d\u8bd5\u5378\u8f7d\u91cd\u88c5\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u5c1d\u8bd5\u5220\u9664\u76ee\u5f55 /usr/lib/go/ \u540e\u91cd\u88c5\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"gosum-h1",children:"go.sum h1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["h1: hash-v1\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"sha256+base64"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/vikyd/go-checksum",children:"https://github.com/vikyd/go-checksum"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go.sum",children:"<module> <version> <hash>\n<module> <version>/go.mod <hash>\n"})}),"\n",(0,l.jsx)(e.h2,{id:"godebug",children:"GODEBUG"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"GODEBUG=netdns=go"}),"\n",(0,l.jsx)(e.li,{children:"GODEBUG=netdns=cgo"}),"\n",(0,l.jsx)(e.li,{children:"GODEBUG=netdns=go+2"}),"\n",(0,l.jsx)(e.li,{children:"GODEBUG=netdns=cgo+2"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u5e38\u89c1\u5927\u5199\u5b57\u6bb5\u540d\u5b57",children:"\u5e38\u89c1\u5927\u5199\u5b57\u6bb5\u540d\u5b57"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"ACL\nAPI\nASCII\nCPU\nCSS\nDNS\nEOF\nGUID\nHTML\nHTTP\nHTTPS\nID\nIP\nJSON\nLHS\nQPS\nRAM\nRHS\nRPC\nSLA\nSMTP\nSQL\nSSH\nTCP\nTLS\nTTL\nUDP\nUI\nUID\nURI\nURL\nUTF8\nUUID\nVM\nXML\nXMPP\nXSRF\nXSS\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/golang/lint/blob/6edffad5e6160f5949cdefc81710b2706fbcd4f6/lint.go#L770-L809",children:"commonInitialisms"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"regexp",children:"regexp"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Index \u4e3a byte index"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://pkg.go.dev/regexp",children:"https://pkg.go.dev/regexp"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://pkg.go.dev/regexp/syntax",children:"https://pkg.go.dev/regexp/syntax"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"go-build-static",children:"go build static"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"CGO_ENABLED=0 go build -a -ldflags '-extldflags \"-static\"'\n# statically linked PIE\nCGO_ENABLED=1 go build -buildmode=pie -tags 'osusergo,netgo,static,static_build' -ldflags '-linkmode=external -extldflags \"-static-pie\"' .\n\nGOOS=linux go build -tags 'osusergo netgo'\nGOFLAGS=-static\n\nCGO_ENABLED=0 go build -a -tags 'osusergo netgo' -ldflags '-extldflags \"-static\"'\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/golang/go/issues/26492",children:"https://github.com/golang/go/issues/26492"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"struct-\u53ef\u6bd4\u8f83",children:"struct \u53ef\u6bd4\u8f83"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5982\u679c\u6240\u6709\u5b57\u6bb5\u53ef\u6bd4\u8f83\uff0c\u5219 struct \u53ef\u6bd4\u8f83"}),"\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528 struct \u4f5c\u4e3a context key \u9700\u8981\u6ce8\u610f\u6bd4\u8f83\u903b\u8f91\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6307\u9488\u548c\u975e\u6307\u9488\u6bd4\u8f83\u903b\u8f91\u76f8\u540c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"// nocmp is an uncomparable struct. Embed this inside another struct to make\n// it uncomparable.\n//\n//  type Foo struct {\n//    nocmp\n//    // ...\n//  }\n//\n// This DOES NOT:\n//\n//  - Disallow shallow copies of structs\n//  - Disallow comparison of pointers to uncomparable structs\ntype nocmp [0]func()\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5224\u65ad-int-\u7c7b\u578b",children:"\u5224\u65ad int \u7c7b\u578b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"runtime"\n\t"unsafe"\n)\n\nfunc main() {\n\tfmt.Println("arch", runtime.GOARCH)\n  // 8 -> int64\n  // 4 -> int32\n\tfmt.Println("int", unsafe.Sizeof(int(0)))\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u5185\u5b58\u6a21\u578b",children:"\u5185\u5b58\u6a21\u578b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://research.swtch.com/mm",children:"https://research.swtch.com/mm"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://go.dev/ref/mem",children:"https://go.dev/ref/mem"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"this-program-can-only-be-run-on-amd64-processors-with-v3-microarchitecture-support",children:"This program can only be run on AMD64 processors with v3 microarchitecture support"})]})}function h(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},3354:(n,e,s)=>{var l=s(50959),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,t=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(n,e,s){var l,r={},d=null,a=null;for(l in void 0!==s&&(d=""+s),void 0!==e.key&&(d=""+e.key),void 0!==e.ref&&(a=e.ref),e)o.call(e,l)&&!c.hasOwnProperty(l)&&(r[l]=e[l]);if(n&&n.defaultProps)for(l in e=n.defaultProps)void 0===r[l]&&(r[l]=e[l]);return{$$typeof:i,type:n,key:d,ref:a,props:r,_owner:t.current}}e.Fragment=r,e.jsx=d,e.jsxs=d},11527:(n,e,s)=>{n.exports=s(3354)},47214:(n,e,s)=>{s.d(e,{Z:()=>t,a:()=>o});var l=s(50959);const i={},r=l.createContext(i);function o(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);