/*! For license information please see 3a53d49a.6f2bb37d.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[64564],{79226:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>d});var i=s(11527),r=s(47214);const t={title:"bun"},l="bun",o={id:"web/dev/bun",title:"bun",description:"- oven-sh/bun",source:"@site/../notes/web/dev/bun.md",sourceDirName:"web/dev",slug:"/web/dev/bun",permalink:"/notes/web/dev/bun",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/dev/bun.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1701146597,formattedLastUpdatedAt:"Nov 28, 2023",frontMatter:{title:"bun"},sidebar:"docs",previous:{title:"biome",permalink:"/notes/web/dev/biome"},next:{title:"Bundle FAQ",permalink:"/notes/web/dev/bundle/faq"}},c={},d=[{value:"ffi",id:"ffi",level:2},{value:"macro",id:"macro",level:2},{value:"compile",id:"compile",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"bun",children:"bun"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/oven-sh/bun",children:"oven-sh/bun"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MIT, Zig"}),"\n",(0,i.jsx)(n.li,{children:"JavaScriptCore,tinycc,libiconv LGPLv2"}),"\n",(0,i.jsx)(n.li,{children:"boringssl,libarchive,libiconv,lol-html,mimalloc,picohttp,tinycc,uSockets,zlib-cloudflare,libicu,uWebsockets"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["bun-types\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"typing"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/SaltyAom/bun-http-framework-benchmark",children:"SaltyAom/bun-http-framework-benchmark"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/oven-sh/awesome-bun",children:"oven-sh/awesome-bun"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["musl \u652f\u6301\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/oven-sh/bun/issues/918",children:"#918"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/oven-sh/bun/issues/255",children:"#255"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["deploy ",(0,i.jsx)(n.a,{href:"https://github.com/oven-sh/bun/issues/211",children:"bun#211"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.del,{children:"\u65e0 dns \u6a21\u5757"})," - 0.5+ - pg \u4e0d\u652f\u6301 ",(0,i.jsx)(n.a,{href:"https://github.com/oven-sh/bun/issues/288",children:"#288"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.del,{children:"\u65e0 async_hooks - sequelize \u4e0d\u652f\u6301"})}),"\n",(0,i.jsxs)(n.li,{children:["\u672a\u5b9e\u73b0 ",(0,i.jsx)(n.del,{children:"dns"}),", http2, https, child_process, vm, tls, async_hooks, worker_threads"]}),"\n",(0,i.jsxs)(n.li,{children:["\u652f\u6301 NestJS ",(0,i.jsx)(n.a,{href:"https://github.com/oven-sh/bun/issues/1641",children:"#1641"})]}),"\n"]})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"bun \u5d4c\u5165\u4e86 tinycc\uff0c\u6709 jit \u80fd\u529b\uff0c\u56e0\u6b64 ffi \u6548\u7387\u975e\u5e38\u9ad8"}),"\n",(0,i.jsx)(n.li,{children:"bun \u8fd8\u5904\u4e8e\u975e\u5e38\u65e9\u671f\u5f00\u53d1\u9636\u6bb5"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528 JavaScriptCore - \u5404\u6709\u4f18\u7f3a\u70b9"}),"\n",(0,i.jsx)(n.li,{children:"bun \u4e00\u4e9b\u70b9\u7684\u6027\u80fd\u5f88\u597d\uff0c\u4f46\u6574\u4f53\u5e94\u7528\u6027\u80fd\u6bd4\u4e0d\u4e0a node"}),"\n"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Manually Install\n# =======================\ncurl -LO https://ghproxy.com/https://github.com/oven-sh/bun/releases/download/bun-v1.0.0/bun-darwin-x64.zip\nunzip bun-darwin-x64.zip\nmv bun-darwin-x64/bun ~/bin/\nxattr -r -d com.apple.quarantine ~/bin/bun\nbun -v\n\nbun upgrade          # \u5347\u7ea7\nbun upgrade --canary # \u5347\u7ea7\u5230\u5c1a\u672a\u53d1\u5e03\u7248\u672c - bun \u5f00\u53d1\u5f88\u5feb\uff0c\u53ef\u4ee5\u63d0\u524d\u5c1d\u8bd5\u4e00\u4e9b\u7279\u6027\n\ndocker run --rm -it wener/bun bun -v\ndocker run --rm --init --ulimit memlock=-1:-1 oven/bun # \u5b98\u65b9\u955c\u50cf\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bun bun src/index.js\n# https://github.com/oven-sh/bun/issues/211\n./node_modules.bun > ./node_modules.js\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ffi",children:"ffi"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { viewSource } from 'bun:ffi';\n\n// \u751f\u6210\u7684 C \u4ee3\u7801\nconsole.log(\n  viewSource(\n    {\n      hello_world: {\n        returns: 'float',\n        args: ['float'],\n      },\n    },\n    false,\n  )[0],\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"macro",children:"macro"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7c7b\u4f3c inline+\u9884\u6267\u884c"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { random } from './random.ts' with { type: 'macro' };\n"})}),"\n",(0,i.jsx)(n.h2,{id:"compile",children:"compile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 90MB+\nbun build --compile ./src/main.ts --outfile myapp --external={pg-query-stream,better-sqlite3,tedious,oracledb,mysql2,sqlite3,mysql} --external=@mikro-orm/{migrations,entity-generator,better-sqlite,sqlite,mariadb,mysql,mongodb,seeder}\n"})}),"\n",(0,i.jsx)(n.h1,{id:"faq",children:"FAQ"})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},3354:(e,n,s)=>{var i=s(50959),r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,s){var i,t={},d=null,a=null;for(i in void 0!==s&&(d=""+s),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(a=n.ref),n)l.call(n,i)&&!c.hasOwnProperty(i)&&(t[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===t[i]&&(t[i]=n[i]);return{$$typeof:r,type:e,key:d,ref:a,props:t,_owner:o.current}}n.Fragment=t,n.jsx=d,n.jsxs=d},11527:(e,n,s)=>{e.exports=s(3354)},47214:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>l});var i=s(50959);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);