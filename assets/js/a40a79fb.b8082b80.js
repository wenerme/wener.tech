/*! For license information please see a40a79fb.b8082b80.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[91228],{41328:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var r=s(2488),i=s(62780);const l={title:"CASL"},t="CASL",c={id:"service/auth/authz/casl",title:"CASL",description:"- stalniy/casl",source:"@site/../notes/service/auth/authz/casl.md",sourceDirName:"service/auth/authz",slug:"/service/auth/authz/casl",permalink:"/notes/service/auth/authz/casl",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/authz/casl.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1697457593,formattedLastUpdatedAt:"Oct 16, 2023",frontMatter:{title:"CASL"},sidebar:"docs",previous:{title:"Casbin",permalink:"/notes/service/auth/authz/casbin"},next:{title:"permify",permalink:"/notes/service/auth/authz/permify"}},a={},d=[{value:"ucast",id:"ucast",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"casl",children:"CASL"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/stalniy/casl",children:"stalniy/casl"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"MIT, TS, JS"}),"\n",(0,r.jsx)(e.li,{children:"core 6KB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["CASL - CanCanAble Simple Language\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"AuthZ"}),"\n",(0,r.jsx)(e.li,{children:"\u5b9e\u73b0 ABAC\u3001RBAC"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Ruby CanCan, RoR CanCanCan"}),"\n",(0,r.jsxs)(e.li,{children:["\u6838\u5fc3\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Ability"}),"\n",(0,r.jsxs)(e.li,{children:["Action\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4f8b\u5982 read, create, update, delete, manage"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Subject\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4f8b\u5982 Post"}),"\n",(0,r.jsx)(e.li,{children:"all \u8868\u793a\u6240\u6709"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"Rule"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["vs Casbin\u3001OPA\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u66f4\u7b80\u5355\uff0c\u66f4\u6613\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u652f\u6301\u524d\u7aef"}),"\n",(0,r.jsx)(e.li,{children:"\u9762\u5411 Web"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"npm add @casl/react @casl/ability\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u5e8f\u5217\u5316"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'interface Rule {\n  pricipal: string; // e.g. user id\n  action: string; // read\n  subject: string; // Post\n  conditions: any; // {"published": true}\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"RBAC"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function defineAbilitiesFor(role) {\n  const { can, build } = new AbilityBuilder(Ability);\n\n  if (role === 'user') {\n    can('read', 'Article');\n    can('create', 'Article');\n  } else if (role === 'admin') {\n    can(['read', 'create', 'update', 'delete'], 'Article');\n  }\n\n  return build();\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"can('read', 'Address', { 'country.isoCode': 'UA' });\ncan('read', 'Post', 'author.*');\ncan('read', 'Post', 'vehicle.*.generic.*');\n\n// \u652f\u6301\u81ea\u5b9a\u4e49 any/all\n// \u9ed8\u8ba4 manage \u548c all\nconst ability = new Ability([{ action: '*', subject: '*' }], {\n  anyAction: '*',\n  anySubjectType: '*',\n});\n\ncan('*', 'Post');\ncan('*', '*');\n"})}),"\n",(0,r.jsx)(e.h2,{id:"ucast",children:"ucast"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/stalniy/ucast",children:"stalniy/ucast"})}),"\n",(0,r.jsx)(e.li,{children:"@ucast/core"}),"\n",(0,r.jsxs)(e.li,{children:["@ucast/js\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u89e3\u91ca\u5668"}),"\n",(0,r.jsx)(e.li,{children:"eq, ne"}),"\n",(0,r.jsx)(e.li,{children:"lt, lte"}),"\n",(0,r.jsx)(e.li,{children:"gt, gte"}),"\n",(0,r.jsx)(e.li,{children:"within, nin"}),"\n",(0,r.jsx)(e.li,{children:"all"}),"\n",(0,r.jsx)(e.li,{children:"regex"}),"\n",(0,r.jsx)(e.li,{children:"or, nor, and, not"}),"\n",(0,r.jsx)(e.li,{children:"exists"}),"\n",(0,r.jsx)(e.li,{children:"size"}),"\n",(0,r.jsx)(e.li,{children:"mod"}),"\n",(0,r.jsx)(e.li,{children:"where,"}),"\n",(0,r.jsx)(e.li,{children:"elemMatch"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://docs.mongodb.org/manual/reference/operator/query/",children:"http://docs.mongodb.org/manual/reference/operator/query/"})}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.M)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},38088:(n,e,s)=>{var r=s(96651),i=Symbol.for("react.element"),l=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(n,e,s){var r,l={},d=null,o=null;for(r in void 0!==s&&(d=""+s),void 0!==e.key&&(d=""+e.key),void 0!==e.ref&&(o=e.ref),e)t.call(e,r)&&!a.hasOwnProperty(r)&&(l[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps)void 0===l[r]&&(l[r]=e[r]);return{$$typeof:i,type:n,key:d,ref:o,props:l,_owner:c.current}}e.Fragment=l,e.jsx=d,e.jsxs=d},2488:(n,e,s)=>{n.exports=s(38088)},62780:(n,e,s)=>{s.d(e,{I:()=>c,M:()=>t});var r=s(96651);const i={},l=r.createContext(i);function t(n){const e=r.useContext(l);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);