/*! For license information please see 28bb608b.dba6ecfd.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[80048],{19696:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>d});var s=t(2488),o=t(62780);const l={title:"PostgreSQL JSON"},r=void 0,a={id:"db/relational/postgresql/postgresql-json",title:"PostgreSQL JSON",description:"PostgreSQL JSON",source:"@site/../notes/db/relational/postgresql/postgresql-json.md",sourceDirName:"db/relational/postgresql",slug:"/db/relational/postgresql/json",permalink:"/notes/db/relational/postgresql/json",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/postgresql/postgresql-json.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1688543048,formattedLastUpdatedAt:"Jul 5, 2023",frontMatter:{title:"PostgreSQL JSON"},sidebar:"docs",previous:{title:"PostgreSQL Introspection",permalink:"/notes/db/relational/postgresql/introspection"},next:{title:"PostgreSQL PL",permalink:"/notes/db/relational/postgresql/pl"}},i={},d=[{value:"PostgreSQL JSON",id:"postgresql-json",level:2},{value:"JSON \u6570\u7ec4\u8f6c\u884c",id:"json-\u6570\u7ec4\u8f6c\u884c",level:2},{value:"JSON \u5bf9\u8c61\u904d\u5386",id:"json-\u5bf9\u8c61\u904d\u5386",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,o.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"postgresql-json",children:"PostgreSQL JSON"}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data->'field' is not null"})," \u65e0\u6cd5\u68c0\u6d4b null \u6570\u636e - \u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"->>"})," \u53ef\u4ee5\u68c0\u6d4b\u5230 null"]}),"\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528 json_typeof \u76d1\u6d4b null - ",(0,s.jsx)(n.code,{children:"json_typeof(col->'field') = 'null'"})]}),"\n"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://bitnine.net/blog-postgresql/postgresql-internals-jsonb-type-and-its-indexes/",children:"https://bitnine.net/blog-postgresql/postgresql-internals-jsonb-type-and-its-indexes/"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'-- \u6570\u7ec4\u79fb\u9664 null\nselect jsonb_path_query_array(\'{"values": [null, "test", { "key": "value" }]}\', \'$.values[*] ? (@ != null)\');\n\n-- \u79fb\u9664 null \u6570\u636e\nselect json_strip_nulls(\'[{"f1":1, "f2":null}, 2, null, 3]\');\n\n-- \u68c0\u6d4b key \u5b58\u5728 - jsonb\nSELECT \'{"a":1}\'::jsonb ? \'a\';\nSELECT \'{"a": {"b": 1}}\'::jsonb -> \'a\' ? \'b\';\n'})}),"\n",(0,s.jsx)(n.h2,{id:"json-\u6570\u7ec4\u8f6c\u884c",children:"JSON \u6570\u7ec4\u8f6c\u884c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'-- \u8f6c\u6362\u4e3a\u5355\u884c JSON \u5bf9\u8c61\nselect * from json_array_elements(\'[{"a":1},{"a":2}]\');\n\n-- \u540c\u65f6\u63d0\u53d6\u5217\nselect * from json_to_recordset(\'[{"a":1,"b":"first"},{"a":2,"b":"second"}]\') as (a int, b text);\n'})}),"\n",(0,s.jsx)(n.h2,{id:"json-\u5bf9\u8c61\u904d\u5386",children:"JSON \u5bf9\u8c61\u904d\u5386"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'-- (key,value)\nselect * from json_each_text(\'{"a":1,"b":2}\') as d;\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},38088:(e,n,t)=>{var s=t(96651),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,t){var s,l={},d=null,c=null;for(s in void 0!==t&&(d=""+t),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(c=n.ref),n)r.call(n,s)&&!i.hasOwnProperty(s)&&(l[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===l[s]&&(l[s]=n[s]);return{$$typeof:o,type:e,key:d,ref:c,props:l,_owner:a.current}}n.Fragment=l,n.jsx=d,n.jsxs=d},2488:(e,n,t)=>{e.exports=t(38088)},62780:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>r});var s=t(96651);const o={},l=s.createContext(o);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);