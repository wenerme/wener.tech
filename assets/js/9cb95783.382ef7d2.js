/*! For license information please see 9cb95783.382ef7d2.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[98860],{46852:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var i=s(2488),t=s(62780);const r={title:"AlpineLinux Setup"},l="AlpineLinux Setup",o={id:"os/alpine/alpine-setup",title:"AlpineLinux Setup",description:"- \u53c2\u8003",source:"@site/../notes/os/alpine/alpine-setup.md",sourceDirName:"os/alpine",slug:"/os/alpine/setup",permalink:"/notes/os/alpine/setup",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/os/alpine/alpine-setup.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1676862087,formattedLastUpdatedAt:"Feb 20, 2023",frontMatter:{title:"AlpineLinux Setup"},sidebar:"docs",previous:{title:"pxe",permalink:"/notes/os/alpine/pxe"},next:{title:"Alpine Tip",permalink:"/notes/os/alpine/tip"}},a={},p=[{value:"setup-disk",id:"setup-disk",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"alpinelinux-setup",children:"AlpineLinux Setup"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/alpinelinux/alpine-conf",children:"alpinelinux/alpine-conf"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts",children:"Alpine setup scripts"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setup-interfaces -ar\n# service networking restart\n\nsetup-sshd -c openssh\necho 'PermitRootLogin yes' >> /etc/ssh/sshd_config\nservice sshd reload\n\necho root:root | chpasswd\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null root@127.0.0.1 -p 2222\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rc-update add networking\nrc-update add acpid\nservice acpid start\n\nsetup-keymap us us\nsetup-ntp -c chrony\nsetup-timezone Asia/Shanghai\n\necho \"https://mirrors.tuna.tsinghua.edu.cn/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/main\nhttps://mirrors.tuna.tsinghua.edu.cn/alpine/v$(sed -n 's/\\.\\d\\+$//p' /etc/alpine-release)/community\" > /etc/apk/repositories\napk update\napk version -a\n\napk add util-linux nano curl\n# \u5e38\u7528 - \u5982\u679c\u60f3\u8981\u505a\u5c0f\u955c\u50cf\u53ef\u4ee5\u4e0d\u88c5\napk add shadow bash sudo doas busybox-extras openssh-client openssh-sftp-server\n\n# setup-hostname alpine\n\n# \u5b89\u88c5\u5230\u7cfb\u7edf\u76d8 - \u6ce8\u610f\u9009\u62e9\u6b63\u786e\u7684\u76d8\u7b26\n# qemu \u7684\u53c2\u6570\u987a\u5e8f\u5f71\u54cd vda \u8fd8\u662f vdb\nlsblk\nUSE_EFI=1 setup-disk -m sys -s 0 -v /dev/vda\n"})}),"\n",(0,i.jsx)(n.h2,{id:"setup-disk",children:"setup-disk"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5c06\u7cfb\u7edf\u5199\u5165\u5b58\u50a8\u4ecb\u8d28"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/alpinelinux/alpine-conf/blob/master/setup-disk.in",children:"setup-disk"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MKFS_OPTS_BOOT"}),"\n",(0,i.jsxs)(n.li,{children:["MKFS_OPTS_ROOT\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["ext4 \u5efa\u8bae \u8bbe\u7f6e ",(0,i.jsx)(n.code,{children:"-b 4096"})," \u5f3a\u5236 4k"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"diskmode"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"sys - \u6b63\u5e38\u6a21\u5f0f\uff0cboot \u5206\u533a\u548c root \u5206\u533a - \u9002\u7528\u4e8e \u5f00\u53d1\u73af\u5883\uff0c\u684c\u9762\uff0c\u865a\u62df\u673a"}),"\n",(0,i.jsx)(n.li,{children:"data - OS \u901a\u8fc7\u5185\u5b58\u542f\u52a8 tmpfs\uff0c\u65e0 boot \u5206\u533a"}),"\n",(0,i.jsx)(n.li,{children:"lvm"}),"\n",(0,i.jsx)(n.li,{children:"lvmsys"}),"\n",(0,i.jsx)(n.li,{children:"lvmdata"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"bootloader"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ARCH=s390x -> s390-tools"}),"\n",(0,i.jsx)(n.li,{children:"ARCH=ppc64le -> grub-ieee1275"}),"\n",(0,i.jsx)(n.li,{children:"USE_EFI - grub-efi"}),"\n",(0,i.jsxs)(n.li,{children:["BOOTLOADER\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"grub -> grub-bios"}),"\n",(0,i.jsx)(n.li,{children:"syslinux"}),"\n",(0,i.jsx)(n.li,{children:"zipl"}),"\n",(0,i.jsx)(n.li,{children:"raspberrypi-bootloader"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash"})})]})}function d(e={}){const{wrapper:n}={...(0,t.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},38088:(e,n,s)=>{var i=s(96651),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function p(e,n,s){var i,r={},p=null,c=null;for(i in void 0!==s&&(p=""+s),void 0!==n.key&&(p=""+n.key),void 0!==n.ref&&(c=n.ref),n)l.call(n,i)&&!a.hasOwnProperty(i)&&(r[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===r[i]&&(r[i]=n[i]);return{$$typeof:t,type:e,key:p,ref:c,props:r,_owner:o.current}}n.Fragment=r,n.jsx=p,n.jsxs=p},2488:(e,n,s)=>{e.exports=s(38088)},62780:(e,n,s)=>{s.d(n,{I:()=>o,M:()=>l});var i=s(96651);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);