/*! For license information please see 0e1b49cb.93474348.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[56008],{12652:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>d});var r=s(2488),i=s(62780);const t={title:"Storage"},l="Storage",o={id:"devops/storage/README",title:"Storage",description:"Tips",source:"@site/../notes/devops/storage/README.md",sourceDirName:"devops/storage",slug:"/devops/storage/",permalink:"/notes/devops/storage/",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/storage/README.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1693463269,formattedLastUpdatedAt:"Aug 31, 2023",frontMatter:{title:"Storage"},sidebar:"docs",previous:{title:"Status",permalink:"/notes/devops/status"},next:{title:"Fiber Channel",permalink:"/notes/devops/storage/block/fc"}},c={},d=[{value:"Tips",id:"tips",level:2},{value:"Transfer",id:"transfer",level:2},{value:"Disk",id:"disk",level:2}];function a(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,i.M)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"storage",children:"Storage"}),"\n",(0,r.jsx)(e.h2,{id:"tips",children:"Tips"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/restic/restic",children:"restic/restic"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://restic.github.io/",children:"restic"})}),"\n",(0,r.jsx)(e.li,{children:"Fast, secure, efficient backup program"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://rclone.org/",children:"Rclone"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/ncw/rclone",children:"ncw/rclone"})}),"\n",(0,r.jsx)(e.li,{children:"Rclone is a command line program to sync files and directories to and from"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://mountainduck.io/",children:"Mountain Duck"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"mount server and cloud storage as a local disk"}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://mountainduck.io/comparison/",children:"comparison"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://cyberduck.io/",children:"Cyberduck"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/iterate-ch/cyberduck",children:"iterate-ch/cyberduck"})}),"\n",(0,r.jsx)(e.li,{children:"Cyberduck is a libre FTP, SFTP, WebDAV, Amazon S3, OpenStack Swift, Backblaze B2, Microsoft Azure & OneDrive, Google Drive and Dropbox browser for Mac and Windows."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://cryptomator.org/",children:"Cryptomator"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/cryptomator/cryptomator",children:"cryptomator/cryptomator"})}),"\n",(0,r.jsx)(e.li,{children:"Free client-side encryption for your cloud files. Open source software: No backdoors, no registration."}),"\n",(0,r.jsx)(e.li,{children:"Transparent encryption"}),"\n",(0,r.jsx)(e.li,{children:"Files get encrypted individually"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/cryptomator/cryptofs",children:"cryptomator/cryptofs"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Java Filesystem Provider with integrated encryption"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Java\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/lookfirst/sardine",children:"lookfirst/sardine"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"an easy to use webdav client for java"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/dCache/nfs4j",children:"dCache/nfs4j"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Pure Java NFSv3 and NFSv4.1 implementation"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/hierynomus/sshj",children:"ssh, scp and sftp for java"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Golang\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/spf13/afero",children:"spf13/afero"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["S3\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/s3fs-fuse/s3fs-fuse",children:"s3fs-fuse/s3fs-fuse"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u9650\u5236\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u968f\u673a\u5199\u6216 append \u4f1a\u91cd\u5199\u6574\u4e2a\u6587\u4ef6"}),"\n",(0,r.jsx)(e.li,{children:"list \u6574\u4e2a\u76ee\u5f55\u7684\u6027\u80fd\u8f83\u5dee, \u53d6\u51b3\u4e8e\u7f51\u7edc\u5ef6\u8fdf"}),"\n",(0,r.jsx)(e.li,{children:"\u6700\u7ec8\u4e00\u81f4\u6027\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8bfb\u53d6\u8fc7\u671f\u6570\u636e"}),"\n",(0,r.jsx)(e.li,{children:"\u91cd\u547d\u540d\u4e0d\u662f\u539f\u5b50\u6027\u7684"}),"\n",(0,r.jsx)(e.li,{children:"\u591a\u4e2a\u7aef\u6302\u8f7d\u4e0d\u4f1a\u8fdb\u884c\u534f\u8c03"}),"\n",(0,r.jsx)(e.li,{children:"\u4e0d\u652f\u6301\u786c\u8fde\u63a5"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/kahing/goofys",children:"kahing/goofys"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Goofys is a high-performance, POSIX-ish Amazon S3 file system written in Go"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["B2 Cloud Storage\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.backblaze.com/b2/cloud-storage-pricing.html",children:"Pricing"})}),"\n",(0,r.jsx)(e.li,{children:"\u975e\u5e38\u4fbf\u5b9c\u7684\u4e91\u5b58\u50a8"}),"\n",(0,r.jsx)(e.li,{children:"\u5b58\u50a8 0.005$/GB/Month"}),"\n",(0,r.jsx)(e.li,{children:"\u4e0b\u8f7d 0.02$/GB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["FS\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/kahing/catfs",children:"kahing/catfs"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Catfs is a caching filesystem written in Rust"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.snia.org/sites/default/files/SDC/2016/presentations/erasure_coding/DrorGoldenberg_Optimize_Storage_Efficiency-v2.pdf",children:"Optimize Storage Efficiency"})}),"\n",(0,r.jsxs)(e.li,{children:["\u4e0d\u80fd\u4f7f\u7528\u7684\u6587\u4ef6\u540d\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Windows ",(0,r.jsx)(e.code,{children:'\\/:*?"<>|'})]}),"\n",(0,r.jsxs)(e.li,{children:["Linux, macOS ",(0,r.jsx)(e.code,{children:"null"})," \u6216 ",(0,r.jsx)(e.code,{children:"/"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"brew install s3fs\n\nbrew install goofys\n\nexport AWS_ACCESS_KEY_ID=${ID}\nexport AWS_SECRET_ACCESS_KEY=${KEY}\n# goofys <bucket> <mountpoint>\n# goofys <bucket:prefix> <mountpoint>\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'find dir/ -name "offender1" -mtime -1 -print0 | du --files0-from=- -hc | tail -n1\n'})}),"\n",(0,r.jsx)(e.h2,{id:"transfer",children:"Transfer"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u4e24\u4e2a\u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u8f93\u5927\u91cf\u5c0f\u6587\u4ef6\u65f6\u975e\u5e38\u5feb\n# \u89c9\u5f97 gzip \u6162\u53ef\u4ee5\u4f7f\u7528 pigz\ntar c some/dir/ | gzip - | ssh host2 tar xz -C /other/dir/\n# \u5168\u91cf\u540c\u6b65\u540e\u518d\u8fdb\u884c\u589e\u91cf\u540c\u6b65\nrsync -azv some/dir/ user@host:/other/dir/\n\n"})}),"\n",(0,r.jsx)(e.h2,{id:"disk",children:"Disk"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Disk_cloning",children:"Disk cloning"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'#\nlsblk --output NAME,SIZE,VENDOR,FSTYPE,LABEL,UUID,MODE\n\n# \u514b\u9686\u5355\u4e2a\u78c1\u76d8\ndd if=/dev/sda1 of=/dev/sdb1 bs=64K conv=noerror,sync status=progress\n# \u514b\u9686\u6574\u4e2a\u78c1\u76d8\ndd if=/dev/sdX of=/dev/sdY bs=64K conv=noerror,sync status=progress\n\n# \u5907\u4efd\n# \u5907\u4efd\u6574\u4e2a\u7cfb\u7edf\nrsync -aAXv --exclude={"/dev/*","/proc/*","/sys/*","/tmp/*","/run/*","/mnt/*","/media/*","/lost+found"} / /path/to/backup/folder\n# \u4f7f\u7528 --info=progress2 \u663e\u793a\u603b\u4f53\u7684\u8fdb\u5ea6, \u800c\u4e0d\u662f\u6bcf\u4e2a\u6587\u4ef6\nrsync -aAX --info=progress2 --exclude={"/dev/*","/proc/*","/sys/*","/tmp/*","/run/*","/mnt/*","/media/*","/lost+found"} / /path/to/backup/folder\n\n# \u5907\u4efd\u542f\u52a8\u5206\u533a\n# https://wiki.archlinux.org/index.php/disk_cloning\ndd if=/dev/sda1 of=/mnt/dst/bios-boot bs=64K conv=noerror,sync status=progress\n\n# \u5907\u4efd\u5206\u533a\nsfdisk -d /dev/sda > part_table\n# \u6062\u590d\u5206\u533a\nsfdisk /dev/sda < part_table\n# wipefs \u4e5f\u53ef\u4ee5\n'})})]})}function h(n={}){const{wrapper:e}={...(0,i.M)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},38088:(n,e,s)=>{var r=s(96651),i=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(n,e,s){var r,t={},d=null,a=null;for(r in void 0!==s&&(d=""+s),void 0!==e.key&&(d=""+e.key),void 0!==e.ref&&(a=e.ref),e)l.call(e,r)&&!c.hasOwnProperty(r)&&(t[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps)void 0===t[r]&&(t[r]=e[r]);return{$$typeof:i,type:n,key:d,ref:a,props:t,_owner:o.current}}e.Fragment=t,e.jsx=d,e.jsxs=d},2488:(n,e,s)=>{n.exports=s(38088)},62780:(n,e,s)=>{s.d(e,{I:()=>o,M:()=>l});var r=s(96651);const i={},t=r.createContext(i);function l(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);