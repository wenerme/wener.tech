/*! For license information please see d1eab7d8.a5e755fe.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[64348],{52900:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>x,frontMatter:()=>l,metadata:()=>i,toc:()=>a});var d=s(2488),r=s(62780);const l={title:"ApacheDS \u8fd0\u7ef4"},t="ApacheDS \u8fd0\u7ef4",i={id:"service/auth/ldap/apacheds-ops",title:"ApacheDS \u8fd0\u7ef4",description:"ApacheDS \u76ee\u5f55\u8bbe\u8ba1",source:"@site/../notes/service/auth/ldap/apacheds-ops.md",sourceDirName:"service/auth/ldap",slug:"/service/auth/ldap/apacheds-ops",permalink:"/notes/service/auth/ldap/apacheds-ops",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/ldap/apacheds-ops.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1660664456,formattedLastUpdatedAt:"Aug 16, 2022",frontMatter:{title:"ApacheDS \u8fd0\u7ef4"},sidebar:"docs",previous:{title:"ApacheDS Kerberos",permalink:"/notes/service/auth/ldap/apacheds-kerberos"},next:{title:"Apache Directory",permalink:"/notes/service/auth/ldap/apacheds"}},c={},a=[{value:"ApacheDS \u76ee\u5f55\u8bbe\u8ba1",id:"apacheds-\u76ee\u5f55\u8bbe\u8ba1",level:2},{value:"\u5220\u9664\u9ed8\u8ba4\u5206\u533a",id:"\u5220\u9664\u9ed8\u8ba4\u5206\u533a",level:2},{value:"\u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801",id:"\u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801",level:2},{value:"Nextcloud LDAP",id:"nextcloud-ldap",level:2},{value:"\u5206\u533a",id:"\u5206\u533a",level:2}];function h(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.M)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.h1,{id:"apacheds-\u8fd0\u7ef4",children:"ApacheDS \u8fd0\u7ef4"}),"\n",(0,d.jsx)(e.h2,{id:"apacheds-\u76ee\u5f55\u8bbe\u8ba1",children:"ApacheDS \u76ee\u5f55\u8bbe\u8ba1"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["DN\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["ou=users - \u7528\u6237\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"uid=test.cs"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["ou=groups - \u5206\u7ec4\u3001\u7ec4\u7ec7\u67b6\u6784\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["uid=company\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"objectclass: groupOfNames"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["ou=roles - \u89d2\u8272\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["uid=admin\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"objectclass: groupOfNames"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["ou=services - \u670d\u52a1\u8d26\u53f7\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"uid=keycloak"}),"\n",(0,d.jsx)(e.li,{children:"uid=nextcloud"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["dc=security - \u5b89\u5168\u76f8\u5173\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["ou=services - \u5b89\u5168\u670d\u52a1\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["uid=krbtgt\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["krb5PrincipalName: krbtgt/EXAMPLE.",(0,d.jsx)(e.a,{href:"mailto:COM@EXAMPLE.COM",children:"COM@EXAMPLE.COM"})]}),"\n",(0,d.jsx)(e.li,{children:"userPassword: randomKey"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["uid=kpasswd\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"krb5PrincipalName: kadmin/changepw@EXAMPLE.COM"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["uid=ldap\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["krb5PrincipalName: ldap/example.",(0,d.jsx)(e.a,{href:"mailto:net@EXAMPLE.COM",children:"net@EXAMPLE.COM"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u7c7b\u9009\u62e9\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u4e3b\u4f53 inetOrgPerson\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u53c2\u7167 ",(0,d.jsx)(e.a,{href:"https://tools.ietf.org/html/rfc2798",children:"rfc2798"})," \u9009\u7528\u5c5e\u6027"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"\u5206\u7ec4 groupOfNames"}),"\n",(0,d.jsx)(e.li,{children:"\u89d2\u8272 groupOfNames"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u5c5e\u6027\u9009\u62e9\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["uid \u7528\u4e8e\u552f\u4e00\u6807\u793a\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"uid \u4e0d\u662f inetOrgPerson \u5f3a\u5236\u5c5e\u6027"}),"\n",(0,d.jsx)(e.li,{children:"cn \u548c sn \u662f\u5f3a\u5236\u5c5e\u6027"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ldif",children:"# \u521b\u5efa\u57fa\u7840\u7ed3\u6784 - \u53ef\u66ff\u6362 basedn dc=example,dc=com\ndn: ou=users,dc=example,dc=com\nobjectclass: organizationalUnit\nou: users\n\ndn: ou=groups,dc=example,dc=com\nobjectclass: organizationalUnit\nou: groups\n\ndn: ou=roles,dc=example,dc=com\nobjectclass: organizationalUnit\nou: roles\n\ndn: ou=services,dc=example,dc=com\nobjectclass: organizationalUnit\nou: services\n\ndn: dc=security,dc=example,dc=com\nobjectclass: domain\ndc: security\n\ndn: ou=services,dc=security,dc=example,dc=com\nobjectclass: organizationalUnit\nou: services\n"})}),"\n",(0,d.jsx)(e.h2,{id:"\u5220\u9664\u9ed8\u8ba4\u5206\u533a",children:"\u5220\u9664\u9ed8\u8ba4\u5206\u533a"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"# \u9012\u5f52\u5220\u9664\u914d\u7f6e\nldapdelete -r -H ldap://localhost:10389 -D uid=admin,ou=system -w secret ads-partitionId=example,ou=partitions,ads-directoryServiceId=default,ou=config\n"})}),"\n",(0,d.jsx)(e.h2,{id:"\u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801",children:"\u4fee\u6539\u9ed8\u8ba4\u5bc6\u7801"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ldif",children:"# \u4fee\u6539\u9ed8\u8ba4 admin \u5bc6\u7801\ndn:uid=admin,ou=system\nchangetype: modify\nreplace: userPassword\n# \u65b0\u7684\u5bc6\u7801\nuserPassword: secret\n"})}),"\n",(0,d.jsx)(e.h2,{id:"nextcloud-ldap",children:"Nextcloud LDAP"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"./occ ldap:show-config s01\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"Configuration"}),(0,d.jsx)(e.th,{children:"s01"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"hasMemberOfFilterSupport"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"homeFolderNamingRule"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"lastJpegPhotoLookup"}),(0,d.jsx)(e.td,{children:"0"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapAgentName"}),(0,d.jsx)(e.td,{children:"uid=admin,ou=system"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapAgentPassword"}),(0,d.jsx)(e.td,{children:"secret"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapAttributesForGroupSearch"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapAttributesForUserSearch"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapBackupHost"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapBackupPort"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapBase"}),(0,d.jsx)(e.td,{children:"dc=example,dc=com"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapBaseGroups"}),(0,d.jsx)(e.td,{children:"ou=groups,dc=example,dc=com"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapBaseUsers"}),(0,d.jsx)(e.td,{children:"ou=users,dc=example,dc=com"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapCacheTTL"}),(0,d.jsx)(e.td,{children:"600"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapConfigurationActive"}),(0,d.jsx)(e.td,{children:"1"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapDefaultPPolicyDN"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapDynamicGroupMemberURL"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapEmailAttribute"}),(0,d.jsx)(e.td,{children:"mail"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapExperiencedAdmin"}),(0,d.jsx)(e.td,{children:"0"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapExpertUUIDGroupAttr"}),(0,d.jsx)(e.td,{children:"enrtyUUID"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapExpertUUIDUserAttr"}),(0,d.jsx)(e.td,{children:"enrtyUUID"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapExpertUsernameAttr"}),(0,d.jsx)(e.td,{children:"uid"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapExtStorageHomeAttribute"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapGidNumber"}),(0,d.jsx)(e.td,{children:"gidNumber"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapGroupDisplayName"}),(0,d.jsx)(e.td,{children:"cn"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapGroupFilter"}),(0,d.jsx)(e.td,{children:"(objectclass=groupOfNames)"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapGroupFilterGroups"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapGroupFilterMode"}),(0,d.jsx)(e.td,{children:"1"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapGroupFilterObjectclass"}),(0,d.jsx)(e.td,{children:"inetOrgPerson"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapGroupMemberAssocAttr"}),(0,d.jsx)(e.td,{children:"member"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapHost"}),(0,d.jsx)(e.td,{children:"ldap://192.168.1.1"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapIgnoreNamingRules"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapLoginFilter"}),(0,d.jsx)(e.td,{children:"`(&("})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapLoginFilterAttributes"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapLoginFilterEmail"}),(0,d.jsx)(e.td,{children:"1"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapLoginFilterMode"}),(0,d.jsx)(e.td,{children:"0"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapLoginFilterUsername"}),(0,d.jsx)(e.td,{children:"1"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapNestedGroups"}),(0,d.jsx)(e.td,{children:"1"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapOverrideMainServer"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapPagingSize"}),(0,d.jsx)(e.td,{children:"500"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapPort"}),(0,d.jsx)(e.td,{children:"10389"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapQuotaAttribute"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapQuotaDefault"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapTLS"}),(0,d.jsx)(e.td,{children:"0"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUserAvatarRule"}),(0,d.jsx)(e.td,{children:"default"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUserDisplayName"}),(0,d.jsx)(e.td,{children:"cn"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUserDisplayName2"}),(0,d.jsx)(e.td,{children:"displayname"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUserFilter"}),(0,d.jsx)(e.td,{children:"(objectclass=inetOrgPerson)"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUserFilterGroups"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUserFilterMode"}),(0,d.jsx)(e.td,{children:"1"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUserFilterObjectclass"}),(0,d.jsx)(e.td,{children:"inetOrgPerson"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUuidGroupAttribute"}),(0,d.jsx)(e.td,{children:"auto"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ldapUuidUserAttribute"}),(0,d.jsx)(e.td,{children:"auto"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"turnOffCertCheck"}),(0,d.jsx)(e.td,{children:"0"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"turnOnPasswordChange"}),(0,d.jsx)(e.td,{children:"0"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"useMemberOfToDetectMembership"}),(0,d.jsx)(e.td,{children:"1"})]})]})]}),"\n",(0,d.jsx)(e.h2,{id:"\u5206\u533a",children:"\u5206\u533a"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-ldif"})})]})}function x(n={}){const{wrapper:e}={...(0,r.M)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(h,{...n})}):h(n)}},38088:(n,e,s)=>{var d=s(96651),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,i=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function a(n,e,s){var d,l={},a=null,h=null;for(d in void 0!==s&&(a=""+s),void 0!==e.key&&(a=""+e.key),void 0!==e.ref&&(h=e.ref),e)t.call(e,d)&&!c.hasOwnProperty(d)&&(l[d]=e[d]);if(n&&n.defaultProps)for(d in e=n.defaultProps)void 0===l[d]&&(l[d]=e[d]);return{$$typeof:r,type:n,key:a,ref:h,props:l,_owner:i.current}}e.Fragment=l,e.jsx=a,e.jsxs=a},2488:(n,e,s)=>{n.exports=s(38088)},62780:(n,e,s)=>{s.d(e,{I:()=>i,M:()=>t});var d=s(96651);const r={},l=d.createContext(r);function t(n){const e=d.useContext(l);return d.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),d.createElement(l.Provider,{value:e},n.children)}}}]);