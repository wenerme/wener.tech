/*! For license information please see cc48a9f8.7a4a76f5.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[5520],{69732:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>E,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var i=t(2488),c=t(62780);const r={title:"tinc 1.0"},o="tinc 1.0",s={id:"service/network/vpn/tinc/tinc-1.0",title:"tinc 1.0",description:"- \u53ea\u6709 tincd",source:"@site/../notes/service/network/vpn/tinc/tinc-1.0.md",sourceDirName:"service/network/vpn/tinc",slug:"/service/network/vpn/tinc/1.0",permalink:"/notes/service/network/vpn/tinc/1.0",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/vpn/tinc/tinc-1.0.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1680070123,formattedLastUpdatedAt:"Mar 29, 2023",frontMatter:{title:"tinc 1.0"},sidebar:"docs",previous:{title:"Tinc",permalink:"/notes/service/network/vpn/tinc/"},next:{title:"Tinc \u914d\u7f6e",permalink:"/notes/service/network/vpn/tinc/conf"}},a={},d=[{value:"init",id:"init",level:2}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,c.M)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"tinc-10",children:"tinc 1.0"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ea\u6709 tincd"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"NETNAME=netname\nNODE=NodeA\nmkdir -p /etc/tinc/$NETNAME/hosts\n# tinc.conf\ncat << CONF > /etc/tinc/$NETNAME/tinc.conf\nName = $NODE\nMode = switch\n# ConnectTo = $NETANAME\nCONF\n\n# \u751f\u6210 key\ntincd -n $NETNAME -K\n\n# tinc-up\ncat << SH > /etc/tinc/$NETNAME/tinc-up\nifconfig $INTERFACE 10.10.1.1 netmask 255.0.0.0\nSH\n\n# \u968f\u673a port\ncat << CONF > /etc/tinc/$NETNAME/hosts/$NODE\nPort = 0\nCONF\n\n# \u6dfb\u52a0\u5176\u4ed6\u8282\u70b9\ncat << CONF > /etc/tinc/$NETNAME/hosts/$NETNAME\n# Subnet = 10.10.0.0/24\nAddress = 4.5.6.7\n\n-----BEGIN RSA PUBLIC KEY-----\n...\n-----END RSA PUBLIC KEY-----\nCONF\n\ntincd -n $NETNAME -Dd 5\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"  -c, --config=DIR               Read configuration options from DIR.\n  -D, --no-detach                Don't fork and detach.\n  -d, --debug[=LEVEL]            Increase debug level or set it to LEVEL.\n  -k, --kill[=SIGNAL]            Attempt to kill a running tincd and exit.\n  -n, --net=NETNAME              Connect to net NETNAME.\n  -K, --generate-keys[=BITS]     Generate public/private RSA keypair.\n  -L, --mlock                    Lock tinc into main memory.\n      --logfile[=FILENAME]       Write log entries to a logfile.\n      --pidfile=FILENAME         Write PID to FILENAME.\n  -o, --option=[HOST.]KEY=VALUE  Set global/host configuration value.\n  -R, --chroot                   chroot to NET dir at startup.\n  -U, --user=USER                setuid to given USER at startup.\n      --help                     Display this help and exit.\n      --version                  Output version information and exit.\n"})}),"\n",(0,i.jsx)(e.h2,{id:"init",children:"init"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.tinc-vpn.org/documentation/tinc.conf.5",children:"tinc.conf.5"})}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"export NETWORK=kubenet\nNODENAME=$(hostname | tr - _)\n\nmodprobe tun\n\nmkdir -p /etc/tinc/$NETWORK/hosts\ncd /etc/tinc/$NETWORK\n\ntincd -n $NETWORK -K 4096\ncat << CONF > tinc.conf\nName=$NODENAME\nMode=switch\nDevice = /dev/net/tun\nAddressFamily = ipv4\nCONF\n\ncat << 'SHELL' > tinc-up\nip link set $INTERFACE up\nip addr add 10.10.1.1 dev $INTERFACE\nip route add 10.10.1.0/24 dev $INTERFACE\nSHELL\ncat << 'SHELL' > tinc-down\nip link set $INTERFACE down\nSHELL\nchmod -v +x tinc-up tinc-down\n\ncp rsa_key.pub hosts/$NODENAME.rsa_key.pub\ncat << CONF > hosts/$NODENAME\nPublicKeyFile=$NODENAME.rsa_key.pub\nCONF\n\n# \u524d\u53f0\u542f\u52a8 - debug\ntincd -n $NETWORK -Dd 5\n\n# \u670d\u52a1\u542f\u52a8\necho \"NETWORK: $NETWORK\" >> /etc/conf.d/tinc.networks\nservice tincd start\n"})})]})}function E(n={}){const{wrapper:e}={...(0,c.M)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}},38088:(n,e,t)=>{var i=t(96651),c=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(n,e,t){var i,r={},d=null,l=null;for(i in void 0!==t&&(d=""+t),void 0!==e.key&&(d=""+e.key),void 0!==e.ref&&(l=e.ref),e)o.call(e,i)&&!a.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps)void 0===r[i]&&(r[i]=e[i]);return{$$typeof:c,type:n,key:d,ref:l,props:r,_owner:s.current}}e.Fragment=r,e.jsx=d,e.jsxs=d},2488:(n,e,t)=>{n.exports=t(38088)},62780:(n,e,t)=>{t.d(e,{I:()=>s,M:()=>o});var i=t(96651);const c={},r=i.createContext(c);function o(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:o(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);