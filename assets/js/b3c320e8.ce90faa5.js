/*! For license information please see b3c320e8.ce90faa5.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[61883],{68032:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var l=i(11527),s=i(47214);const r={title:"Zig"},t="Zig",c={id:"languages/zig/README",title:"Zig",description:"- ziglang.org",source:"@site/../notes/languages/zig/README.md",sourceDirName:"languages/zig",slug:"/languages/zig/",permalink:"/notes/languages/zig/",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/zig/README.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1696577752,formattedLastUpdatedAt:"Oct 6, 2023",frontMatter:{title:"Zig"},sidebar:"docs",previous:{title:"xpath",permalink:"/notes/languages/xml/xpath"},next:{title:"Zig FAQ",permalink:"/notes/languages/zig/faq"}},a={},d=[{value:"C Interop",id:"c-interop",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"zig",children:"Zig"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"http://ziglang.org/",children:"ziglang.org"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://github.com/zig-lang/zig",children:"zig-lang/zig"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"MIT, Zig"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Why\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4e0e C \u4ea4\u4e92\u975e\u5e38\u597d, \u53ef\u76f4\u63a5\u5bfc\u5165 C \u5934\u6587\u4ef6\u4f7f\u7528"}),"\n",(0,l.jsx)(n.li,{children:"\u53ef\u4e0e C \u7684\u7f16\u8bd1\u540e\u5bf9\u63a5\u8fdb\u884c\u6df7\u5408\u7f16\u8bd1"}),"\n",(0,l.jsx)(n.li,{children:"stdlib \u8bbe\u8ba1\u4e0a\u4e0d\u4f9d\u8d56 libc - wasm \u66f4\u5c0f"}),"\n",(0,l.jsxs)(n.li,{children:["\u5185\u7f6e libc - \u652f\u6301\u4ea4\u53c9\u7f16\u8bd1\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"ARCH: aarch64,aarch64_6e,armeb,arm,i386,mips64el,mips64,mipsel,mips,powerpc64le,powerpc64,powerpc,riscv64,s390x,sparc,sparcv9,x86_64"}),"\n",(0,l.jsx)(n.li,{children:"{ARCH}-{linux,windows}-{musl,gnu}{,eabi,eabihf,abi64,abin32}"}),"\n",(0,l.jsx)(n.li,{children:"wasm32-freestanding-musl"}),"\n",(0,l.jsx)(n.li,{children:"40+"}),"\n",(0,l.jsx)(n.li,{children:"linux 3.16+, macOS 10.13+, Windows 8.1+"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"\u5185\u7f6e clang - zig cc"}),"\n",(0,l.jsx)(n.li,{children:"\u52a8\u6001\u7f16\u8bd1\u8def\u5f84"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u53c2\u8003\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://github.com/ZigEmbeddedGroup/microzig",children:"ZigEmbeddedGroup/microzig"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"zig for microcontrollers"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://andrewkelley.me/",children:"https://andrewkelley.me/"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://scattered-thoughts.net/writing/assorted-thoughts-on-zig-and-rust/",children:"Assorted thoughts on zig"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://ziglang.org/learn/why_zig_rust_d_cpp/",children:"Why Zig When There is Already C++, D, and Rust?"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.scattered-thoughts.net/writing/how-safe-is-zig/",children:"How safe is zig?"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["ARM < v7 \u5f88\u591a\u4e0d\u652f\u6301\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["atomic,sync ",(0,l.jsx)(n.a,{href:"https://github.com/ziglang/zig/issues/4959",children:"#4959"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["self-hosted compiler ",(0,l.jsx)(n.a,{href:"https://github.com/ziglang/zig/issues/89",children:"#89"})]}),"\n"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker run --rm -it -v $PWD:/host -w /host wener/zig\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-zig",metastring:'title="hello.zig"',children:'const std = @import("std");\n\npub fn main() !void {\n    const stdout = std.io.getStdOut().writer();\n    try stdout.print("Hello, {s}!\\n", .{"world"});\n}\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-zig",metastring:'title="hello.zig"',children:'const print = @import("std").debug.print;\n\npub fn main() void {\n    print("Hello, world!\\n", .{});\n}\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"zig build-exe hello.zig\n# \u4ea4\u53c9\u7f16\u8bd1\nzig targets # \u6240\u6709 targets\nzig build-exe -target arm-linux hello.zig\n\nzig build-exe -target arm-linux-musleabi -mcpu arm1176jzf_s hello.zig\nzig build-exe -target arm-linux-gnueabi -mcpu arm1176jzf_s hello.zig\n\n# hello \u7ea6 4.4k\nzig build-exe --strip -O ReleaseSmall hello.zig\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["flags\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"-fsingle-threaded"}),"\n",(0,l.jsx)(n.li,{children:"-mcpu=arm926ej_s+soft_float"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-l[lib], --library [lib]"})," - \u5728\u9700\u8981\u65f6 link \u7cfb\u7edf\u5e93"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-L[d], --library-directory [d]"})," - \u6dfb\u52a0 \u5e93 \u76ee\u5f55"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"c-interop",children:"C Interop"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"--verbose-cc \u67e5\u770b cc \u547d\u4ee4"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",metastring:'title="hello.c"',children:'#include <stdio.h>\n\nint main(int argc, char **argv) {\n    printf("Hello world\\n");\n    return 0;\n}\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u76f4\u63a5\u7f16\u8bd1 C\nzig build-exe hello.c\nldd hello\nfile hello\n# \u9759\u6001\u94fe\u63a5\n# x86_64-macos\n# x86_64-macos-musl \u5931\u8d25\nzig build-exe hello.c --library c -target x86_64-macos-gnu\n# macOS \u4e0b\u4ea4\u53c9\u7f16\u8bd1 - \u9759\u6001\u94fe\u63a5 ~11k\nzig build-exe hello.c --library c -target x86_64-linux-musl\nfile hello\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4ea4\u53c9\u7f16\u8bd1\u7b2c\u4e00\u6b21\u4f1a\u6162 - \u9884\u7f16\u8bd1\u4e00\u4e9b\u5185\u5bb9"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},3354:(e,n,i)=>{var l=i(50959),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,i){var l,r={},d=null,o=null;for(l in void 0!==i&&(d=""+i),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(o=n.ref),n)t.call(n,l)&&!a.hasOwnProperty(l)&&(r[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps)void 0===r[l]&&(r[l]=n[l]);return{$$typeof:s,type:e,key:d,ref:o,props:r,_owner:c.current}}n.Fragment=r,n.jsx=d,n.jsxs=d},11527:(e,n,i)=>{e.exports=i(3354)},47214:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>t});var l=i(50959);const s={},r=l.createContext(s);function t(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);