/*! For license information please see 756d25aa.748efba0.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[69692],{89100:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>c});var r=s(2488),i=s(62780);const o={tags:["API"]},t="Auth API",d={id:"dev/design/design-auth-api",title:"Auth API",description:"- API Keys",source:"@site/../notes/dev/design/design-auth-api.md",sourceDirName:"dev/design",slug:"/dev/design/auth-api",permalink:"/notes/dev/design/auth-api",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/dev/design/design-auth-api.md",tags:[{label:"API",permalink:"/notes/tags/api"}],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1710413103,formattedLastUpdatedAt:"Mar 14, 2024",frontMatter:{tags:["API"]},sidebar:"docs",previous:{title:"Design",permalink:"/notes/dev/design/"},next:{title:"Auth",permalink:"/notes/dev/design/auth"}},l={},c=[{value:"strapi",id:"strapi",level:2},{value:"directus",id:"directus",level:2},{value:"access token",id:"access-token",level:3},{value:"login",id:"login",level:3},{value:"refresh",id:"refresh",level:3},{value:"logout",id:"logout",level:3},{value:"password reset",id:"password-reset",level:3},{value:"providers",id:"providers",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"auth-api",children:"Auth API"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"API Keys"}),"\n",(0,r.jsx)(n.li,{children:"Basic Auth"}),"\n",(0,r.jsx)(n.li,{children:"OAuth 2.0"}),"\n",(0,r.jsx)(n.li,{children:"HMAC"}),"\n",(0,r.jsxs)(n.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/simov/grant",children:"simov/grant"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"JS"}),"\n",(0,r.jsx)(n.li,{children:"OAuth Proxy"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/simov/purest",children:"simov/purest"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"REST API Client Library"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.strapi.io/dev-docs/plugins/users-permissions",children:"https://docs.strapi.io/dev-docs/plugins/users-permissions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.directus.io/reference/authentication.html",children:"https://docs.directus.io/reference/authentication.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"strapi",children:"strapi"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Login /api/auth/local"}),"\n",(0,r.jsx)(n.li,{children:"/connect/github/redirect"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/connect/${provider}"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/auth/${provider}/callback"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/auth/forgot-password"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/auth/reset-password"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/auth/send-email-confirmation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/api/auth/email-confirmation?confirmation=TOKEN"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /api/auth/local/register\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "username": "Strapi user",\n  "email": "user@strapi.io",\n  "password": "strapiPassword"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4fee\u6539\u5bc6\u7801"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /api/auth/change-password\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "currentPassword": "currentPassword",\n  "password": "userNewPassword",\n  "passwordConfirmation": "userNewPassword"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"directus",children:"directus"}),"\n",(0,r.jsx)(n.h3,{id:"access-token",children:"access token"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"by header"}),"\n",(0,r.jsx)(n.li,{children:"by cookie"}),"\n",(0,r.jsx)(n.li,{children:"by query"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Authorization: Bearer <token>\nCookie: directus_session_token=<token>\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"?access_token=<token>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"login",children:"login"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /auth/login\nPOST /auth/login/provider\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "email": "example@wener.com",\n  "password": "password",\n  "otp": "123456",\n  "mode": "jsoncookie|session"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "",\n  "expires": 7200,\n  "refresh_token": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"refresh",children:"refresh"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /auth/refresh\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "refresh_token": "refresh_token_string",\n  "mode": "json|cookie|session"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "",\n  "expires": 7200,\n  "refresh_token": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"logout",children:"logout"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /auth/logout\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "refresh_token": "refresh_token",\n  "mode": "json"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"password-reset",children:"password reset"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /auth/password/request\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "email": "user_email",\n  "reset_url": ""\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /auth/password/reset\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "token": "password_reset_token",\n  "password": "password"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"providers",children:"providers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /auth\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    {\n      "name": "GitHub",\n      "driver": "oauth2",\n      "icon": "github"\n    },\n    {\n      "name": "Google",\n      "driver": "openid",\n      "icon": "google"\n    },\n    {\n      "name": "Okta",\n      "driver": "openid"\n    }\n  ],\n  "disableDefault": false\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},38088:(e,n,s)=>{var r=s(96651),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,s){var r,o={},c=null,a=null;for(r in void 0!==s&&(c=""+s),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(a=n.ref),n)t.call(n,r)&&!l.hasOwnProperty(r)&&(o[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===o[r]&&(o[r]=n[r]);return{$$typeof:i,type:e,key:c,ref:a,props:o,_owner:d.current}}n.Fragment=o,n.jsx=c,n.jsxs=c},2488:(e,n,s)=>{e.exports=s(38088)},62780:(e,n,s)=>{s.d(n,{I:()=>d,M:()=>t});var r=s(96651);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);