/*! For license information please see 96f744d4.e0202813.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[14973],{4412:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>d});var i=s(11527),r=s(47214);const l={title:"Strapi"},t="Strapi",a={id:"service/cms/strapi",title:"Strapi",description:"- strapi/strapi",source:"@site/../notes/service/cms/strapi.md",sourceDirName:"service/cms",slug:"/service/cms/strapi",permalink:"/notes/service/cms/strapi",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/cms/strapi.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1689238697,formattedLastUpdatedAt:"Jul 13, 2023",frontMatter:{title:"Strapi"},sidebar:"docs",previous:{title:"payload",permalink:"/notes/service/cms/payload"},next:{title:"Wiki.js",permalink:"/notes/service/cms/wikijs"}},c={},d=[{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2},{value:"REST",id:"rest",level:2},{value:"Plugins",id:"plugins",level:2},{value:"Midleware",id:"midleware",level:2},{value:"\u5347\u7ea7",id:"\u5347\u7ea7",level:2},{value:"GraphQL",id:"graphql",level:2},{value:"Swagger",id:"swagger",level:3},{value:"S3",id:"s3",level:2},{value:"\u603b\u662f\u8bf7\u6c42 localhost:1337/admin/project-type",id:"\u603b\u662f\u8bf7\u6c42-localhost1337adminproject-type",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"strapi",children:"Strapi"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/strapi/strapi",children:"strapi/strapi"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["MIT+",(0,i.jsx)(n.a,{href:"https://github.com/strapi/strapi/blob/86e0cf0f55d58e714a67cf4daee2e59e39974dd9/packages/strapi-admin/ee/LICENSE",children:"EE"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"strapi-admin \u5305\u542b\u90e8\u5206 EE \u534f\u8bae - Strapi Enterprise Edition"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u534a\u5f00\u53d1\u534a\u53ef\u89c6\u5316\u64cd\u4f5c\u7684 Headless CMS\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u534a\u5f00\u53d1\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u63a5\u53e3\u3001\u6a21\u578b\u3001\u7ec4\u4ef6\u3001\u63d2\u4ef6\u5747\u53ef\u4ee5\u4ee3\u7801\u64cd\u4f5c"}),"\n",(0,i.jsx)(n.li,{children:"\u9996\u9009\u64cd\u4f5c\u65b9\u5f0f\u662f\u751f\u6210\u9879\u76ee\u800c\u4e0d\u662f\u4f5c\u4e3a\u670d\u52a1\u4f7f\u7528"}),"\n",(0,i.jsx)(n.li,{children:"\u533a\u5206 \u5f00\u53d1\u3001\u9884\u53d1\u3001\u751f\u4ea7 \u73af\u5883"}),"\n",(0,i.jsx)(n.li,{children:"\u4e00\u822c\u53ea\u6709\u5f00\u53d1\u73af\u5883\u624d\u80fd\u751f\u6210\u6a21\u578b"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u534a\u53ef\u89c6\u5316\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u6a21\u578b\u5b9a\u4e49\u53ef\u89c6\u5316"}),"\n",(0,i.jsx)(n.li,{children:"\u6570\u636e\u7f16\u5c31\u53ef\u89c6\u5316"}),"\n",(0,i.jsx)(n.li,{children:"\u7ec4\u4ef6\u5b9a\u4e49"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://portal.productboard.com/strapi/1-public-roadmap/tabs/2-under-consideration",children:"Roadmap"})}),"\n",(0,i.jsxs)(n.li,{children:["\u5f00\u53d1\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://strapi.io/documentation/3.0.0-beta.x/concepts/file-structure.html",children:"\u6587\u4ef6\u7ed3\u6784"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/strapi/strapi-examples",children:"strapi/strapi-examples"})," - \u96c6\u6210\u53c2\u8003"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://medium.com/@alexdevmotion/1cc852fbf504",children:"\u5c06 Strapi \u8f6c\u4e3a Typescript"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"./config/env/{env}/plugins.js"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yarn create strapi-app my-strapi --quickstart\ncd my-strapi\n\n#  http://localhost:1337/admin\nnpm run strapi develop --watch-admin\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ADMIN_PATH"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="src/admin/app.js"',children:"export default {\n  config: {\n    // en \u4e0d\u53ef\u4ee5\u79fb\u9664\uff0c\u4f1a\u4f5c\u4e3a\u7b2c\u4e00\u6b21\u6253\u5f00\u65f6\u7684\u9ed8\u8ba4\u8bed\u8a00\n    // @strapi/admin/admin/src/translations/[language-name].json\n    // localStorage['strapi-admin-language']\n    // https://github.com/strapi/strapi/blob/v4.0.0/packages/plugins/i18n/server/constants/iso-locales.json\n    locales: ['zh-Hans', 'en'],\n    // \u81ea\u5b9a\u4e49\u7ffb\u8bd1\n    translations: {\n      fr: {\n        'Auth.form.email.label': 'test',\n        Users: 'Utilisateurs',\n        City: 'CITY (FRENCH)',\n        // Customize the label of the Content Manager table.\n        Id: 'ID french',\n      },\n    },\n  },\n  bootstrap() {},\n};\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html",children:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/configurations/required/server.html",children:"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/configurations/required/server.html"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="./config/server.js"',children:"module.exports = ({ env }) => ({\n  host: env('HOST', '0.0.0.0'),\n  port: env.int('PORT', 1337),\n  app: {\n    keys: env.array('APP_KEYS'),\n  },\n  // \u914d\u7f6e\u540e url \u4f1a\u8fd4\u56de\u5b8c\u6574\u8def\u5f84 - \u6d89\u53ca\u5230\u7b2c\u4e09\u65b9\u65f6\u53ef\u80fd\u8981\u6c42\u5fc5\u987b\u914d\u7f6e - \u4f8b\u5982 \u56de\u8c03\n  // build \u662f\u4f1a\u5199\u5165\u5230 js \u4e2d\uff0c\u65e0\u6cd5\u542f\u52a8\u4fee\u6539\n  // STRAPI_ADMIN_BACKEND_URL\n  url: env('WEBSITE', 'http://127.0.0.1:1337'),\n  // \u662f\u5426\u4fe1\u4efb proxy \u5934\n  proxy: false,\n  emitErrors: false,\n  socket: '/tmp/nginx.socket',\n  cron: {\n    enabled: false,\n    tasks: {},\n  },\n  dir: {\n    public: './public',\n  },\n});\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="./config/admin.js"',children:"module.exports = ({ env }) => ({\n  // \u540e\u53f0\u8def\u5f84\n  url: '/admin',\n});\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'tiitle="./config/plugins.js"',children:"export default {\n  //\n  graphql: {\n    config: {\n      endpoint: '/graphql',\n      shadowCRUD: true,\n      playgroundAlways: false,\n      depthLimit: 7,\n      amountLimit: 100,\n      apolloServer: {\n        tracing: false,\n      },\n    },\n  },\n};\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# ADMIN \u540e\u53f0\u8def\u5f84 server.url\n# \u4e0d\u914d\u7f6e\u4e3a\u7a7a\negrep -o 'STRAPI_ADMIN_BACKEND_URL[^}]+' build/*.js\n"})}),"\n",(0,i.jsx)(n.h2,{id:"rest",children:"REST"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/rest-api.html",children:"https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/rest-api.html"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'KEY=\ncurl -H "Authorization: Bearear $KEY" 127.0.0.1/api/posts\n'})}),"\n",(0,i.jsx)(n.h2,{id:"plugins",children:"Plugins"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["editor\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9ed8\u8ba4\u4e3a markdown"}),"\n",(0,i.jsx)(n.li,{children:"strapi-tiptap-editor \u751f\u6210 html"}),"\n",(0,i.jsx)(n.li,{children:"strapi-plugin-react-editorjs \u751f\u6210 json"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"graphql"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/WalkingPizza/strapi-plugin-placeholder",children:"strapi-plugin-placeholder"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9488\u5bf9\u73b0\u6709 image \u751f\u6210 placeholder"}),"\n",(0,i.jsx)(n.li,{children:"\u5e76\u4e0d\u662f\u63d0\u4f9b placeholder \u56fe\u50cf"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://plaiceholder.co/docs/usage",children:"https://plaiceholder.co/docs/usage"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/strapi/strapi/tree/master/packages/plugins/documentation",children:"@strapi/plugin-documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u751f\u6210 OpenAPIv3"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/plugins/graphql.html",children:"@strapi/plugin-graphql"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u63d0\u4f9b GraphQL \u63a5\u53e3"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.strapi.io/developer-docs/latest/plugins/graphql.html",children:"docs"})}),"\n",(0,i.jsxs)(n.li,{children:["sort \u53c2\u6570\u683c\u5f0f ",(0,i.jsx)(n.code,{children:"<prop>:{desc|asc}"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["strapi-plugin-slugify\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u751f\u6210/\u7ef4\u62a4 slug"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/strapi-community/strapi-plugin-rest-cache",children:"strapi-plugin-rest-cache"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7f13\u5b58 REST \u8bf7\u6c42"}),"\n",(0,i.jsxs)(n.li,{children:["\u53ea\u652f\u6301 REST \u4e0d\u652f\u6301 GraphQL ",(0,i.jsx)(n.a,{href:"https://github.com/strapi-community/strapi-plugin-rest-cache/issues/4",children:"#4"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/alexkainzinger/strapi-middleware-upload-plugin-cache",children:"strapi-middleware-upload-plugin-cache"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u672c\u5730\u4e0a\u4f20\u6587\u4ef6\u6dfb\u52a0\u7f13\u5b58\u5934"}),"\n",(0,i.jsx)(n.li,{children:"\u9ed8\u8ba4 max-age 60"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"midleware",children:"Midleware"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Strapi middlewares\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5168\u5c40"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Route middlewares\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5c40\u9650\u4e8e\u8def\u7531"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["ctx ",(0,i.jsx)(n.a,{href:"https://koajs.com/#context",children:"https://koajs.com/#context"})]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(n.h2,{id:"\u5347\u7ea7",children:"\u5347\u7ea7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yarn oudated\nsed '/strapi/s/3.0.0-beta.18.7/3.0.1/g' package.json -i\nyarn\nyarn build\n"})}),"\n",(0,i.jsx)(n.h2,{id:"graphql",children:"GraphQL"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# http://localhost:1337/graphql\nyarn strapi install graphql\n"})}),"\n",(0,i.jsx)(n.h3,{id:"swagger",children:"Swagger"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yarn strapi install documentation\n"})}),"\n",(0,i.jsx)(n.h2,{id:"s3",children:"S3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# https://www.npmjs.com/search?q=strapi-provider-upload-\n# \u914d\u7f6e http://localhost:1337/admin/plugins/upload/configurations/development\nyarn add strapi-provider-upload-aws-s3@beta\n# \u652f\u6301\u81ea\u5b9a\u4e49 Endpoint\nyarn add strapi-provider-upload-amazon-s3-endpoint@beta\n\n# Aliyun OSS strapi-provider-upload-oss\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u603b\u662f\u8bf7\u6c42-localhost1337adminproject-type",children:"\u603b\u662f\u8bf7\u6c42 localhost:1337/admin/project-type"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/strapi/strapi/issues/12418#issuecomment-1031915741",children:"https://github.com/strapi/strapi/issues/12418#issuecomment-1031915741"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},3354:(e,n,s)=>{var i=s(50959),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,s){var i,l={},d=null,o=null;for(i in void 0!==s&&(d=""+s),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(o=n.ref),n)t.call(n,i)&&!c.hasOwnProperty(i)&&(l[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===l[i]&&(l[i]=n[i]);return{$$typeof:r,type:e,key:d,ref:o,props:l,_owner:a.current}}n.Fragment=l,n.jsx=d,n.jsxs=d},11527:(e,n,s)=>{e.exports=s(3354)},47214:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>t});var i=s(50959);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);