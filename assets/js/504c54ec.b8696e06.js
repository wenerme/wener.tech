/*! For license information please see 504c54ec.b8696e06.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[8084],{17312:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>d,default:()=>o,frontMatter:()=>r,metadata:()=>c,toc:()=>h});var l=i(2488),s=i(62780);const r={title:"RAID"},d="RAID",c={id:"devops/storage/block/raid",title:"RAID",description:"- RAID",source:"@site/../notes/devops/storage/block/raid.md",sourceDirName:"devops/storage/block",slug:"/devops/storage/block/raid",permalink:"/notes/devops/storage/block/raid",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/storage/block/raid.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1693463269,formattedLastUpdatedAt:"Aug 31, 2023",frontMatter:{title:"RAID"},sidebar:"docs",previous:{title:"NBD",permalink:"/notes/devops/storage/block/nbd"},next:{title:"Encryption",permalink:"/notes/devops/storage/encryption/"}},t={},h=[{value:"\u786c\u4ef6",id:"\u786c\u4ef6",level:2},{value:"\u5982\u4f55\u9009\u62e9 RAID",id:"\u5982\u4f55\u9009\u62e9-raid",level:2},{value:"\u9635\u5217\u5361 vs \u76f4\u901a\u5361",id:"\u9635\u5217\u5361-vs-\u76f4\u901a\u5361",level:2},{value:"JBOD vs HBA",id:"jbod-vs-hba",level:2},{value:"\u6545\u969c/\u635f\u574f/\u53ef\u7528",id:"\u6545\u969c\u635f\u574f\u53ef\u7528",level:2}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.M)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"raid",children:"RAID"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/RAID",children:"RAID"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Redundant Array of Independent Disks - \u72ec\u7acb\u786c\u76d8\u5197\u4f59\u9635\u5217"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Standard_RAID_levels",children:"Standard_RAID_levels"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"RAID 0"}),"\n",(0,l.jsx)(e.li,{children:"RAID 1 - Mirror"}),"\n",(0,l.jsx)(e.li,{children:"RAID 2"}),"\n",(0,l.jsx)(e.li,{children:"RAID 3"}),"\n",(0,l.jsx)(e.li,{children:"RAID 4"}),"\n",(0,l.jsx)(e.li,{children:"RAID 5"}),"\n",(0,l.jsxs)(e.li,{children:["write hole\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"in which data and parity become inconsistent after a power loss"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:"RAID 6"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Nested_RAID_levels",children:"Nested RAID levels"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"RAID 01 (RAID 0+1)"}),"\n",(0,l.jsx)(e.li,{children:"RAID 03 (RAID 0+3)"}),"\n",(0,l.jsx)(e.li,{children:"RAID 10 (RAID 1+0)"}),"\n",(0,l.jsx)(e.li,{children:"RAID 50 (RAID 5+0)"}),"\n",(0,l.jsx)(e.li,{children:"RAID 60 (RAID 6+0)"}),"\n",(0,l.jsx)(e.li,{children:"RAID 100 (RAID 10+0)"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Data_striping",children:"Data striping"})," - \u6570\u636e\u5206\u6761\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"segmenting logically sequential data, such as a file, so that consecutive segments are stored on different physical storage devices."}),"\n",(0,l.jsx)(e.li,{children:"\u589e\u52a0\u541e\u5410\u91cf"}),"\n",(0,l.jsx)(e.li,{children:"IO \u8d1f\u8f7d"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["archlinux ",(0,l.jsx)(e.a,{href:"https://wiki.archlinux.org/index.php/RAID",children:"RAID"})]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u4f7f\u7528\u65f6\u95f4\n# Power_On_Hours\nsmartctl --all /dev/sdj  | command grep -i Power\n\n# RM, HOTPLUG \u4e0d\u51c6\u786e\n# HOTPLUG - removable or hotplug device (usb, pcmcia, ...)\n# ROTA - rotatable\n# RM - removable\nlsblk -d -o NAME,MAJ:MIN,RM,HOTPLUG,MODEL,ROTA,TYPE,TRAN,SUBSYSTEMS,VENDOR\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u786c\u4ef6",children:"\u786c\u4ef6"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"JBOD - Just Bunch Of Disk - RAID \u5361\u7684\u4e00\u79cd\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.li,{children:"HBA - Host Bus Adapter - \u76f4\u901a\u5361 - Dell HBA"}),"\n",(0,l.jsx)(e.li,{children:"IT - Initiator Target - LSI \u56fa\u4ef6\u80fd\u529b\uff0c\u7c7b\u4f3c HBA"}),"\n",(0,l.jsx)(e.li,{children:"\u57fa\u4e8e IOC \u7684\u4ea7\u54c1\uff0c\u4e00\u822c\u79f0\u4e3a HBA \u5361\uff0c\u4e5f\u5c31\u662f\u5e38\u8bf4\u7684\u76f4\u8fde\u5361\uff0c\u4e00\u822c\u652f\u6301 Raid0/1/10/1E"}),"\n",(0,l.jsx)(e.li,{children:"\u57fa\u4e8e ROC \u7684\u4ea7\u54c1\uff0c\u4e00\u822c\u79f0\u4e3a Raid \u5361\uff0c\u4e00\u822c\u5e26\u6709\u7f13\u5b58\uff0c\u652f\u6301 Raid0/1/10/1E/5/50/6/60\uff0c\u53ef\u9009 BBU\uff0c\u9644\u5e26\u7684\u9ad8\u7ea7\u8f6f\u4ef6\u5305\u62ec\uff1aCacheCade\u3001FashPath\u3001SafeStore \u7b49"}),"\n",(0,l.jsx)(e.li,{children:"1064\u30011064e\u30011068\u30011068e\u30012008\u30012308\u30013008 \u5c5e\u4e8e IOC\uff1b2108\u30012208 \u5c5e\u4e8e ROC\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"\u535a\u901a\u6536\u8d2d\u4e86 Mega LSI"}),"\n",(0,l.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://raid.wiki.kernel.org/index.php/Hardware_Raid_Setup_using_MegaCli",children:"Hardware Raid Setup using MegaCli"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://hwraid.le-vert.net/wiki/LSIMegaRAIDSAS",children:"LSI MegaRAID SAS"})}),"\n",(0,l.jsxs)(e.li,{children:["\u535a\u901a ",(0,l.jsx)(e.a,{href:"https://www.broadcom.com/products/storage/raid-controllers/",children:"RAID \u63a7\u5236\u5668"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u535a\u901a ",(0,l.jsx)(e.a,{href:"https://www.broadcom.com/products/storage/host-bus-adapters/",children:"HAB"})]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.cisco.com/c/en/us/support/docs/servers-unified-computing/ucs-c-series-rack-servers/115020-intro-lsi-megacli-00.html",children:"Introduction to LSI's MegaCLI Utility"})}),"\n",(0,l.jsx)(e.li,{children:"ftp://download2.boulder.ibm.com/ecc/sar/CMA/XSA/ibm_utl_sraidmr_megacli-8.00.48_linux_32-64.zip"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.thomas-krenn.com/en/wiki/StorCLI",children:"Note that MegaCLI is now called StorCLI"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.thomas-krenn.com/en/download.html?product=12190",children:"MegaRAID"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://docs.broadcom.com/docs/12352476",children:"StorCLI Reference Manual"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"http://blog.51cto.com/mofesi/1309251",children:"Storcli \u5e38\u7528\u547d\u4ee4"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"./storcli64 show\n"})}),"\n",(0,l.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,l.jsx)(e.h2,{id:"\u5982\u4f55\u9009\u62e9-raid",children:"\u5982\u4f55\u9009\u62e9 RAID"}),"\n",(0,l.jsx)(e.p,{children:"\u505a RAID \u9996\u5148\u8981\u8003\u8651\u76ee\u7684"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u6027\u80fd\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5229\u7528\u591a\u78c1\u76d8\u5e76\u53d1 IO"}),"\n",(0,l.jsx)(e.li,{children:"RAID 10"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u7a7a\u95f4\u5229\u7528\u7387\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u526f\u672c\u6570\u91cf"}),"\n",(0,l.jsx)(e.li,{children:"RAID 5"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u53ef\u7528\u6027\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5141\u8bb8\u574f\u591a\u5c11\u786c\u76d8"}),"\n",(0,l.jsx)(e.li,{children:"RAID 6 - \u76ee\u524d\u4f7f\u7528\u8f83\u591a\uff0c\u5b58\u50a8\u6210\u672c\u4f4e"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u6b21\u8fd8\u9700\u8981\u8003\u8651\u6709\u4ec0\u4e48\u786c\u4ef6\uff0cSSD\u3001\u5927\u5bb9\u91cf 3.5 SATA\u3001\u5927\u5bb9\u91cf 3.5 SAS\u3001\u5c0f\u5bb9\u91cf 2.5 SAS\uff0c\u786c\u4ef6\u4e0d\u540c\u53ef\u80fd\u5bfc\u81f4\u7ec4\u5efa RAID \u7684\u65b9\u5f0f\u548c\u7ed3\u679c\u4e0d\u540c\u3002\n\u4e00\u822c\u4e3a\u4e86\u52a0\u901f RAID \u53ef\u80fd\u4f1a\u52a0 SSD \u6765\u505a\u65e5\u5fd7\u5b58\u50a8\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u7ec4\u5efa RAID \u53ef\u80fd\u8fd8\u9700\u8981\u989d\u5916\u7684\u5185\u5b58\u548c CPU\uff0c\u6839\u636e\u9700\u8981\u7684\u7279\u6027\u6765\u8fdb\u884c\u9009\u62e9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["ZFS\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5360\u7528\u8f83\u591a\u5185\u5b58\uff0c\u81f3\u5c11 1T 1G\uff0c\u9ed8\u8ba4\u4f7f\u7528 50%"}),"\n",(0,l.jsx)(e.li,{children:"\u53ef\u4ee5\u8fdb\u884c LZ4 \u538b\u7f29\uff0c\u4e0d\u5360\u7528\u592a\u591a CPU"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["mdadm\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4e0d\u9700\u8981\u592a\u591a\u5185\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"\u6ca1\u6709\u9644\u52a0\u7279\u6027"}),"\n",(0,l.jsx)(e.li,{children:"\u53ef\u5e73\u6ed1\u8fc1\u79fb"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\u786c\u4ef6 - \u73b0\u5728\u5df2\u7ecf\u4e0d\u63a8\u8350\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u65e0\u9700\u5185\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"\u90e8\u5206 RAID \u5361\u81ea\u5e26\u7f13\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"\u6ca1\u6709\u9644\u52a0\u7279\u6027"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0e\u786c\u4ef6\u7ed1\u5b9a\uff0c\u96be\u4ee5\u76d1\u63a7\u7ba1\u7406\uff0c\u5b58\u50a8\u4e0d\u6613\u8fc1\u79fb"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u9664\u4e86\u57fa\u7840\u7684 RAID \u80fd\u529b\uff0c\u5982\u679c\u8fd8\u9700\u8981\u66f4\u591a\u7684\u9644\u52a0\u80fd\u529b\uff0c\u5219\u4e0d\u5728\u666e\u901a RAID \u7684\u8303\u7574\u5185\uff0c\u53ef\u8003\u8651 ZFS\uff0c\u4f8b\u5982"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u589e\u91cf\u5907\u4efd"}),"\n",(0,l.jsx)(e.li,{children:"\u5feb\u7167"}),"\n",(0,l.jsx)(e.li,{children:"\u53bb\u91cd"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u9635\u5217\u5361-vs-\u76f4\u901a\u5361",children:"\u9635\u5217\u5361 vs \u76f4\u901a\u5361"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u8f6f RAID \u63a8\u8350\u4f7f\u7528\u76f4\u901a\u5361 HBA"}),"\n"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"JBOD \u6bd4 MD RAID0 \u5feb\u7ea6 30%"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://tobert.github.io/post/2014-06-17-jbod-vs-raid.html",children:"JOBD vs RAID"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"jbod-vs-hba",children:"JBOD vs HBA"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["JBOD\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"RAID \u5361\u529f\u80fd"}),"\n",(0,l.jsx)(e.li,{children:"\u6a21\u7cca\u4e86 HBA \u754c\u7ebf"}),"\n",(0,l.jsx)(e.li,{children:"\u5728\u6ca1\u6709 HBA \u5361\u7684\u65f6\u5019\u4f7f\u7528 RAID \u5361\u7684 JBOD \u8fbe\u5230\u76f8\u540c\u7684\u76ee\u7684"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["HBA\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u76f4\u901a\u5361"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6545\u969c\u635f\u574f\u53ef\u7528",children:"\u6545\u969c/\u635f\u574f/\u53ef\u7528"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Annualized_failure_rate",children:"AFR"})," - Annualized failure rate\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5e74\u635f\u574f\u7387"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://www.backblaze.com/b2/hard-drive-test-data.html",children:"Hard Drive Data and Stats"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.backblaze.com/blog/backblaze-drive-stats-for-q1-2022/",children:"Backblaze Drive Stats for Q1 2022"})}),"\n"]}),"\n"]}),"\n"]})]})}function o(n={}){const{wrapper:e}={...(0,s.M)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},38088:(n,e,i)=>{var l=i(96651),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,i){var l,r={},h=null,a=null;for(l in void 0!==i&&(h=""+i),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(a=e.ref),e)d.call(e,l)&&!t.hasOwnProperty(l)&&(r[l]=e[l]);if(n&&n.defaultProps)for(l in e=n.defaultProps)void 0===r[l]&&(r[l]=e[l]);return{$$typeof:s,type:n,key:h,ref:a,props:r,_owner:c.current}}e.Fragment=r,e.jsx=h,e.jsxs=h},2488:(n,e,i)=>{n.exports=i(38088)},62780:(n,e,i)=>{i.d(e,{I:()=>c,M:()=>d});var l=i(96651);const s={},r=l.createContext(s);function d(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:d(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);