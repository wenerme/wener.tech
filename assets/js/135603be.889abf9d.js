/*! For license information please see 135603be.889abf9d.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[81992],{64164:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>j,frontMatter:()=>s,metadata:()=>l,toc:()=>a});var r=i(2488),t=i(62780);const s={title:"inversify"},c="inversify",l={id:"web/script/lib/inversify",title:"inversify",description:"- inversify/InversifyJS",source:"@site/../notes/web/script/lib/inversify.md",sourceDirName:"web/script/lib",slug:"/web/script/lib/inversify",permalink:"/notes/web/script/lib/inversify",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/script/lib/inversify.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1658265387,formattedLastUpdatedAt:"Jul 19, 2022",frontMatter:{title:"inversify"},sidebar:"docs",previous:{title:"i18next",permalink:"/notes/web/script/lib/i18next"},next:{title:"JS Library FAQ",permalink:"/notes/web/script/lib/js-lib-faq"}},o={},a=[{value:"\u6838\u5fc3\u6982\u5ff5",id:"\u6838\u5fc3\u6982\u5ff5",level:2}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,t.M)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"inversify",children:"inversify"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/inversify/InversifyJS",children:"inversify/InversifyJS"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"MIT, TS"}),"\n",(0,r.jsx)(e.li,{children:"~50kB/11kB"}),"\n",(0,r.jsx)(e.li,{children:"Reflect.getMetadata, Map, Promise, Proxy"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Decorator\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@injectable()"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:'@inject("token")'}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"@optional()"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:'@tagged("key", "value")'}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u907f\u514d AMBIGUOUS_MATCH"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:'@named("name")'})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:'@targetName("")'})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"@unmanaged()"})," - \u907f\u514d BaseClass constructor \u6ce8\u5165"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:'@multiInject("token")'})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"@postConstruct()"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"@preDestroy()"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["inversify-inject-decorators\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"@lazyInject"}),"\n",(0,r.jsx)(e.li,{children:"@lazyInjectNamed"}),"\n",(0,r.jsx)(e.li,{children:"@lazyInjectTagged"}),"\n",(0,r.jsx)(e.li,{children:"@lazyMultiInject"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/inversify/InversifyJS/blob/master/wiki/ecosystem.md",children:"https://github.com/inversify/InversifyJS/blob/master/wiki/ecosystem.md"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u63a8\u8350\u4f7f\u7528 Symbol - \u4e5f\u53ef\u4ee5\u4f7f\u7528 Class/string \u4f5c\u4e3a Token"}),"\n"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const TYPES = {\n  ServiceFoo: Symbol.for('ServiceFoo'),\n  ServiceConf: Symbol.for('ServiceConf'),\n  ServiceBar: Symbol.for('ServiceBar'),\n};\n\n@injectable()\nclass ServiceBar implements IServiceBar {\n  private _conf: any;\n  @inject(TYPES.ServiceFoo) private _foo: IServiceFoo;\n  public constructor(@inject(TYPES.ServiceConf) conf: any) {\n    this._conf = conf;\n  }\n}\n\n//\nconst container = new Container();\ncontainer.bind<IServiceBar>(TYPES.ServiceBar).to(ServiceBar);\n//\nconst bar = container.get<IServiceBar>(TYPES.ServiceBar);\n// \u7ea7\u8054\nlet childContainer = new Container();\nchildContainer.parent = parentContainer;\n\n// \u5916\u90e8 Class \u53ef\u624b\u52a8\u4fee\u9970\nimport {decorate, injectable} from 'inversify';\ndecorate(injectable(), SomeClass);\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6838\u5fc3\u6982\u5ff5",children:"\u6838\u5fc3\u6982\u5ff5"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"ContainerModule"}),"\n",(0,r.jsx)(e.li,{children:"AsyncContainerModule"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// \u6a21\u5757\nlet warriors = new ContainerModule((bind: interfaces.Bind, unbind: interfaces.Unbind) => {\n  bind<Ninja>('Ninja').to(Ninja);\n});\n// \u5f02\u6b65 load\nlet warriors = new AsyncContainerModule(async (bind: interfaces.Bind, unbind: interfaces.Unbind) => {\n  const ninja = await getNinja();\n  bind<Ninja>('Ninja').toConstantValue(ninja);\n});\n\ncontainer.load(warriors); // \u52a0\u8f7d\nawait container.loadAsync(warriors, weapons); // \u52a0\u8f7d\u5f02\u6b65\ncontainer.unload(warriors); // \u5378\u8f7d\n"})})]})}function j(n={}){const{wrapper:e}={...(0,t.M)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},38088:(n,e,i)=>{var r=i(96651),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(n,e,i){var r,s={},a=null,d=null;for(r in void 0!==i&&(a=""+i),void 0!==e.key&&(a=""+e.key),void 0!==e.ref&&(d=e.ref),e)c.call(e,r)&&!o.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps)void 0===s[r]&&(s[r]=e[r]);return{$$typeof:t,type:n,key:a,ref:d,props:s,_owner:l.current}}e.Fragment=s,e.jsx=a,e.jsxs=a},2488:(n,e,i)=>{n.exports=i(38088)},62780:(n,e,i)=>{i.d(e,{I:()=>l,M:()=>c});var r=i(96651);const t={},s=r.createContext(t);function c(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);