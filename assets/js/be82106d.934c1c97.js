"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[90229],{49613:function(t,e,n){n.d(e,{Zo:function(){return m},kt:function(){return b}});var a=n(59496);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,l=function(t,e){if(null==t)return{};var n,a,l={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}var d=a.createContext({}),p=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},m=function(t){var e=p(t.components);return a.createElement(d.Provider,{value:e},t.children)},u="mdxType",_={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},s=a.forwardRef((function(t,e){var n=t.components,l=t.mdxType,r=t.originalType,d=t.parentName,m=o(t,["components","mdxType","originalType","parentName"]),u=p(n),s=l,b=u["".concat(d,".").concat(s)]||u[s]||_[s]||r;return n?a.createElement(b,i(i({ref:e},m),{},{components:n})):a.createElement(b,i({ref:e},m))}));function b(t,e){var n=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var r=n.length,i=new Array(r);i[0]=s;var o={};for(var d in e)hasOwnProperty.call(e,d)&&(o[d]=e[d]);o.originalType=t,o[u]="string"==typeof t?t:l,i[1]=o;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},5510:function(t,e,n){n.r(e),n.d(e,{assets:function(){return N},contentTitle:function(){return c},default:function(){return y},frontMatter:function(){return b},metadata:function(){return k},toc:function(){return f}});var a=n(49613),l=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(t,e,n)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u=(t,e)=>{for(var n in e||(e={}))d.call(e,n)&&m(t,n,e[n]);if(o)for(var n of o(e))p.call(e,n)&&m(t,n,e[n]);return t},_=(t,e)=>r(t,i(e)),s=(t,e)=>{var n={};for(var a in t)d.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&o)for(var a of o(t))e.indexOf(a)<0&&p.call(t,a)&&(n[a]=t[a]);return n};const b={title:"InnoDB"},c="InnoDB",k={unversionedId:"db/relational/mysql/mysql-innodb",id:"db/relational/mysql/mysql-innodb",title:"InnoDB",description:"| conf                           | default                | for                                                   |",source:"@site/../notes/db/relational/mysql/mysql-innodb.md",sourceDirName:"db/relational/mysql",slug:"/db/relational/mysql/innodb",permalink:"/notes/db/relational/mysql/innodb",draft:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/mysql/mysql-innodb.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1690946986,formattedLastUpdatedAt:"Aug 2, 2023",frontMatter:{title:"InnoDB"},sidebar:"docs",previous:{title:"MySQL GTID",permalink:"/notes/db/relational/mysql/gtid"},next:{title:"MySQL \u65e5\u5fd7",permalink:"/notes/db/relational/mysql/log"}},N={},f=[{value:"Buufer Pool",id:"buufer-pool",level:2},{value:"Redo log",id:"redo-log",level:2},{value:"innodb_data_file_path",id:"innodb_data_file_path",level:2},{value:"Tuning",id:"tuning",level:2}],g={toc:f},h="wrapper";function y(t){var e=t,{components:n}=e,l=s(e,["components"]);return(0,a.kt)(h,_(u(u({},g),l),{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",u({},{id:"innodb"}),"InnoDB"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",u({parentName:"tr"},{align:null}),"conf"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"default"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"for"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_io_capacity"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"200"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"IOPS")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_flush_sync"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"ON"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"io bursts ignore ",(0,a.kt)("inlineCode",{parentName:"td"},"innodb_io_capacity")," when checkpoint")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_io_capacity_max"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"2000"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_write_io_threads"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"4"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"1-64")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_read_io_threads"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"4"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"1-64")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_thread_concurrency"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"0"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"0-1000")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_stats_persistent"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"ON"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_buffer_pool_chunk_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"134217728"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"128MB")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_buffer_pool_instances"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"8"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"pool < 1GB \u9ed8\u8ba4 1, 1-64")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_buffer_pool_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"134217728"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"128MB")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_dedicated_server"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"OFF"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_redo_log_capacity"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"104857600"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"100MB")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_flush_method"),(0,a.kt)("td",u({parentName:"tr"},{align:null})),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_flush_log_at_trx_commit"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"1"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_data_file_path"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"ibdata1:12M:autoextend"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_log_buffer_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"16777216"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"16MB")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),(0,a.kt)("del",{parentName:"td"},"innodb_log_file_size")),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"50331648"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"48MB,innodb_redo_log_capacity")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_max_dirty_pages_pct"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"90"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"max_sort_length"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"1024"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"sort_buffer_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"262144"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"256K")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"join_buffer_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"262144"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"256K")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"table_open_cache"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"4000"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_ddl_buffer_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"1048576"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"1MB")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_autoextend_increment"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"64"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"\u5355\u4f4d MB")))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"max_sort_length",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"SHOW GLOBAL STATUS where Variable_name = 'Sort_merge_passes';")))),(0,a.kt)("li",{parentName:"ul"},"table_open_cache",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"MAX((open_files_limit-10-max_connections)/2400)"))),(0,a.kt)("li",{parentName:"ul"},"innodb_dedicated_server",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u914d\u7f6e"),(0,a.kt)("li",{parentName:"ul"},"innodb_buffer_pool_size",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"< 1GB - 128MB"),(0,a.kt)("li",{parentName:"ul"},"1GB < 4GB - 0.5"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"4GB - 0.75"),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"e.g. 8GB -> 6G, 16G -> 12G, 128G -> 96G")))))),(0,a.kt)("li",{parentName:"ul"},"innodb_redo_log_capacity - MySQL 8.0.30",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"1GB,2GB - 100MB"),(0,a.kt)("li",{parentName:"ul"},"2GB-4GB - \u672a\u914d\u7f6e pool size 100MB \uff0c \u914d\u7f6e\u4e86 pool size ",(0,a.kt)("inlineCode",{parentName:"li"},"round(0.5*RAM_GB)*0.5")),(0,a.kt)("li",{parentName:"ul"},"4GB-10.66GB - ",(0,a.kt)("inlineCode",{parentName:"li"},"round(0.75*RAM_GB)*0.5"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"e.g. 8G RAM - ",(0,a.kt)("inlineCode",{parentName:"li"},"Math.round(0.75*8)*0.5"),"=3G"))),(0,a.kt)("li",{parentName:"ul"},"10.66GB-170.66GB - ",(0,a.kt)("inlineCode",{parentName:"li"},"round(0.5625*RAM_GB)*0.5"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"e.g. 16G RAM - ",(0,a.kt)("inlineCode",{parentName:"li"},"Math.round(0.5625*16)*0.5"),"=4.5G, 128G -> 36G"))),(0,a.kt)("li",{parentName:"ul"},"170.66GB - 128GB"))),(0,a.kt)("li",{parentName:"ul"},"innodb_flush_method=O_DIRECT_NO_FSYNC"),(0,a.kt)("li",{parentName:"ul"},"\u4e0d\u652f\u6301 cgroup ",(0,a.kt)("a",u({parentName:"li"},{href:"https://bugs.mysql.com/bug.php?id=90231"}),"https://bugs.mysql.com/bug.php?id=90231")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-dedicated-server.html"}),"https://dev.mysql.com/doc/refman/8.0/en/innodb-dedicated-server.html")))),(0,a.kt)("li",{parentName:"ul"},"innodb_io_capacity",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"HDD - 200"),(0,a.kt)("li",{parentName:"ul"},"SSD - 2000+"),(0,a.kt)("li",{parentName:"ul"},"\u5efa\u8bae < 20000"))),(0,a.kt)("li",{parentName:"ul"},"innodb_redo_log_capacity",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-redo-log.html"}),"https://dev.mysql.com/doc/refman/8.0/en/innodb-redo-log.html"))))),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-sql"}),"SHOW ENGINE INNODB STATUS;\n\nselect *\nfrom performance_schema.global_status\nwhere VARIABLE_NAME like 'Innodb_%'\norder by VARIABLE_NAME;\n\n-- common\nselect *,\n       case\n           when VARIABLE_NAME in ('innodb_redo_log_capacity') or VARIABLE_NAME like '%_size' then\n               VARIABLE_VALUE / 1024 / 1024\n           end as 'Size in MB'\nfrom performance_schema.global_variables\nwhere VARIABLE_NAME in (\n                        'innodb_buffer_pool_size', 'innodb_buffer_pool_instances', 'innodb_buffer_pool_chunk_size',\n                        'innodb_io_capacity', 'innodb_read_io_threads', 'innodb_thread_concurrency',\n                        'innodb_write_io_threads', 'innodb_redo_log_capacity', 'innodb_flush_method',\n                        'innodb_log_file_size', 'innodb_log_files_in_group',\n                        'innodb_flush_log_at_trx_commit', 'innodb_max_dirty_pages_pct', 'innodb_data_file_path',\n                        'binlog_format',\n                        'innodb_log_file_size', 'innodb_log_buffer_size', 'innodb_file_per_table',\n                        'innodb_compression_level', 'max_sort_length', 'sort_buffer_size', 'join_buffer_size',\n                        'open_files_limit', 'table_open_cache', 'table_open_cache_instances',\n                        'binlog_expire_logs_seconds', 'sync_binlog', 'sql_log_bin', 'binlog_expire_logs_auto_purge'\n    )\norder by VARIABLE_NAME;\n\n--\nselect *\nfrom performance_schema.global_variables\nwhere VARIABLE_NAME in (\n                        'innodb_buffer_pool_size', 'innodb_buffer_pool_instances', 'innodb_buffer_pool_chunk_size',\n                        'innodb_io_capacity', 'innodb_read_io_threads', 'innodb_thread_concurrency',\n                        'innodb_write_io_threads','innodb_redo_log_capacity','innodb_flush_method'\n    )\norder by VARIABLE_NAME;\n\n-- for innodb_dedicated_server\nselect *\nfrom performance_schema.global_variables\nwhere VARIABLE_NAME in\n      ('innodb_dedicated_server', 'innodb_buffer_pool_size', 'innodb_redo_log_capacity', 'innodb_flush_method',\n       'innodb_buffer_pool_instances', 'innodb_buffer_pool_chunk_size')\n;\n\n\n-- Recommended InnoDB Buffer Pool Size\n-- \u5355\u4f4d GB\nSELECT CEILING(Total_InnoDB_Bytes * 1.6 / POWER(1024, 3)) RIBPS\nFROM (SELECT SUM(data_length + index_length) Total_InnoDB_Bytes\n      FROM information_schema.tables\n      WHERE engine = 'InnoDB') A;\n\n-- RIBPS \u53e6\u5916\u4e00\u79cd\u8ba1\u7b97\u65b9\u5f0f\nSELECT CONCAT(CEILING(RIBPS / POWER(1024, pw)), SUBSTR(' KMGT', pw + 1, 1))\n           Recommended_InnoDB_Buffer_Pool_Size\nFROM (SELECT RIBPS, FLOOR(LOG(RIBPS) / LOG(1024)) pw\n      FROM (SELECT SUM(data_length + index_length) * 1.1 * growth RIBPS\n            FROM information_schema.tables AAA,\n                 (SELECT 1.25 growth) BBB\n            WHERE ENGINE = 'InnoDB') AA) A;\n\n-- \u5f53\u524d\u5b9e\u9645\u4f7f\u7528\u60c5\u51b5\nSELECT (PagesData * PageSize) / POWER(1024, 3) DataGB\nFROM (SELECT variable_value PagesData\n      FROM performance_schema.global_status\n      WHERE variable_name = 'Innodb_buffer_pool_pages_data') A,\n     (SELECT variable_value PageSize\n      FROM performance_schema.global_status\n      WHERE variable_name = 'Innodb_page_size') B;\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",u({parentName:"tr"},{align:null}),"conf"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"default"),(0,a.kt)("th",u({parentName:"tr"},{align:null}),"note"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_buffer_pool_chunk_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"134217728"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"128MB")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_buffer_pool_instances"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"1"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_buffer_pool_size"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"134217728"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_io_capacity"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"200"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_read_io_threads"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"4"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_thread_concurrency"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"0"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",u({parentName:"tr"},{align:null}),"innodb_write_io_threads"),(0,a.kt)("td",u({parentName:"tr"},{align:null}),"4"),(0,a.kt)("td",u({parentName:"tr"},{align:null}))))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"innodb_buffer_pool_size",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u63a8\u8350 60-80% \u53ef\u7528\u5185\u5b58"))),(0,a.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u4f7f\u7528\u5185\u5b58",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"innodb_buffer_pool_size = innodb_buffer_pool_chunk_size * innodb_buffer_pool_instances * N")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://dba.stackexchange.com/questions/27328"}),"https://dba.stackexchange.com/questions/27328"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"RIBPS"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://releem.com/docs/mysql-performance-tuning/innodb_buffer_pool_size"}),"https://releem.com/docs/mysql-performance-tuning/innodb_buffer_pool_size")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html"}),"https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html"))),(0,a.kt)("h2",u({},{id:"buufer-pool"}),"Buufer Pool"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-sql"}),"SHOW STATUS LIKE 'Innodb_buffer_pool_resize_status';\n")),(0,a.kt)("h2",u({},{id:"redo-log"}),"Redo log"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-sql"}),"SHOW GLOBAL STATUS LIKE 'Innodb_redo_log_enabled';\nSHOW STATUS LIKE 'Innodb_redo_log_resize_status'; -- OK, Resizing down\nSHOW STATUS LIKE 'Innodb_redo_log_capacity_resized';\n\nSELECT FILE_ID, START_LSN, END_LSN, SIZE_IN_BYTES, IS_FULL, CONSUMER_LEVEL\nFROM performance_schema.innodb_redo_log_files;\n")),(0,a.kt)("h2",u({},{id:"innodb_data_file_path"}),"innodb_data_file_path"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"InnoDB system tablespace data files")),(0,a.kt)("li",{parentName:"ul"},"innodb_data_home_dir")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{}),"file_name:file_size[:autoextend[:max:max_file_size]]\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-init-startup-configuration.html#innodb-startup-data-file-configuration"}),"https://dev.mysql.com/doc/refman/8.0/en/innodb-init-startup-configuration.html#innodb-startup-data-file-configuration")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-system-tablespace.html#innodb-resize-system-tablespace"}),"https://dev.mysql.com/doc/refman/8.0/en/innodb-system-tablespace.html#innodb-resize-system-tablespace"))),(0,a.kt)("h2",u({},{id:"tuning"}),"Tuning"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-sql"}),"set profiling=1;\nselect 1;\nshow profiles;\n\nshow profile cpu ,block io for query 116\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",u({parentName:"li"},{href:"https://dev.mysql.com/doc/refman/8.0/en/optimization.html"}),"https://dev.mysql.com/doc/refman/8.0/en/optimization.html"))))}y.isMDXComponent=!0}}]);