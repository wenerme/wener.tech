/*! For license information please see 13decbad.1b40d9b2.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[27202],{88216:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>c,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>d,toc:()=>h});var r=e(11527),s=e(47214);const l={title:"Apache NiFi",tags:["Apache"]},t="Apache NiFi",d={id:"service/data/nifi",title:"Apache NiFi",description:"- apache/nifi",source:"@site/../notes/service/data/nifi.md",sourceDirName:"service/data",slug:"/service/data/nifi",permalink:"/notes/service/data/nifi",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/data/nifi.md",tags:[{label:"Apache",permalink:"/notes/tags/apache"}],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1652772118,formattedLastUpdatedAt:"May 17, 2022",frontMatter:{title:"Apache NiFi",tags:["Apache"]},sidebar:"docs",previous:{title:"NiFi Registry",permalink:"/notes/service/data/nifi-registry"},next:{title:"rudder",permalink:"/notes/service/data/rudder"}},c={},h=[{value:"Notes",id:"notes",level:2},{value:"Glossary",id:"glossary",level:2},{value:"Driver",id:"driver",level:2},{value:"Processor",id:"processor",level:2},{value:"FlowFile",id:"flowfile",level:2},{value:"EL",id:"el",level:2},{value:"JOLT",id:"jolt",level:2},{value:"Kubernetes",id:"kubernetes",level:2},{value:"Upgrade",id:"upgrade",level:2},{value:"Illegal initial character: ?column?",id:"illegal-initial-character-column",level:2},{value:"Record does not have a value for the UpdateKey column",id:"record-does-not-have-a-value-for-the-updatekey-column",level:2},{value:"\u591a\u503c\u53c2\u6570",id:"\u591a\u503c\u53c2\u6570",level:2},{value:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6",id:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6",level:2},{value:"h2 java.lang.IllegalStateException: The file is locked",id:"h2-javalangillegalstateexception-the-file-is-locked",level:2},{value:"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup",id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup",level:2}];function o(n){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h1,{id:"apache-nifi",children:"Apache NiFi"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://github.com/apache/nifi",children:"apache/nifi"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Cloudera Dataflow Pipeline"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"nifi-stateless"}),"\n",(0,r.jsxs)(i.li,{children:["nifi-registry\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"NiFi Process Group \u7248\u672c\u7ba1\u7406 - Flow \u4ed3\u5e93"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["minifi\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u8f7b\u91cf\u7ea7\u7684 NiFi - \u652f\u6301\u90e8\u5206\u529f\u80fd"}),"\n",(0,r.jsx)(i.li,{children:"\u9002\u7528\u4e8e Edge \u90e8\u7f72"}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://github.com/apache/nifi-minifi-cpp",children:"apache/nifi-minifi-cpp"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"C++"}),"\n",(0,r.jsx)(i.li,{children:"\u9002\u7528\u4e8e Ingest \u548c\u6700\u7ec8\u8f93\u51fa"}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://github.com/apache/nifi-minifi-cpp/blob/main/PROCESSORS.md",children:"processors"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://github.com/apache/nifi/tree/main/minifi",children:"minifi"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Java"}),"\n",(0,r.jsx)(i.li,{children:"minifi-bin.zip 271M vs nifi-bin.zip 1.5G"}),"\n",(0,r.jsx)(i.li,{children:"\u529f\u80fd\u6309\u9700\u6253\u5305 - NAR"}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://github.com/apache/nifi/tree/main/minifi/minifi-docker",children:"minifi/minifi-docker"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"apache/nifi-minifi"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://github.com/apache/nifi-fds",children:"apache/nifi-fds"})," - Flow Design System\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Angular, \u524d\u7aef\u7ec4\u4ef6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/user-guide.html",children:"User Guide"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html",children:"Administration Guide"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/nifi-in-depth.html",children:"NiFi In Depth"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://dev.to/tspannhw/simple-change-data-capture-cdc-with-sql-selects-via-apache-nifi-flank-19m4",children:"Simple Change Data Capture (CDC) with SQL Selects via Apache NiFi (FLaNK)"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/rest-api/index.html",children:"REST API"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.admonition,{type:"caution",children:(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\u4e00\u4e2a NiFi \u5b9e\u4f8b\u53ea\u6709\u4e00\u4e2a flow\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u901a\u8fc7 Process Group \u7ba1\u7406\u591a\u7ec4\u903b\u8f91"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\u9ed8\u8ba4 bootstrap.conf \u4e3a -Xmx512m\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u6b63\u5e38\u4f7f\u7528\u591a\u534a\u4e0d\u591f"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(i.admonition,{type:"tip",children:(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\u5904\u7406\u8fc7\u7a0b\u5c3d\u91cf\u4f7f\u7528 Avro\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u9762\u5411\u884c"}),"\n",(0,r.jsx)(i.li,{children:"\u5305\u542b schema \u4fe1\u606f"}),"\n",(0,r.jsx)(i.li,{children:"\u6bd4 JSON \u652f\u6301\u66f4\u591a\u7c7b\u578b - \u4f8b\u5982: DB \u63d2\u5165\u7684 Date \u5217\u7684\u65f6\u5019\uff0cJSON \u53ef\u80fd\u5931\u8d25\u3002"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# Docker \u542f\u52a8\n# ===========\n# https://hub.docker.com/r/apache/nifi\n# NIFI_HOME /opt/nifi/nifi-current\n# NIFI_TOOLKIT_HOME /opt/nifi/nifi-toolkit-current\n# -v $PWD/data:/opt/nifi/nifi-current\n# \u5bc6\u7801\u81f3\u5c11 12 \u4f4d\n# \u811a\u672c\u91cc\u5217\u4e3e\u4e86\u652f\u6301\u7684\u53d8\u91cf\n# https://github.com/apache/nifi/blob/main/nifi-docker/dockerhub/sh/start.sh\ndocker run --rm -it \\\n  -p 8443:8443 \\\n  -e SINGLE_USER_CREDENTIALS_USERNAME=admin \\\n  -e SINGLE_USER_CREDENTIALS_PASSWORD=000000000000 \\\n  --name nifi apache/nifi\n\n# \u542f\u52a8\u540e\ndocker exec -it nifi bash\n./bin/nifi.sh status\n\n# \u672c\u5730 \u542f\u52a8\n# ===========\n./bin/nifi.sh set-single-user-credentials admin 000000000000\n./bin/nifi.sh start   # \u542f\u52a8\n./bin/nifi.sh status  # \u67e5\u770b\u72b6\u6001\n# \u65e5\u5fd7\ntail -F logs/nifi-app.log\n"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",metastring:'title="\u63a8\u8350\u751f\u4ea7\u4f7f\u7528\u65b9\u5f0f"',children:"# \u72b6\u6001\u7559\u5728 Host\ncurl -O https://mirror.sjtu.edu.cn/apache/nifi/1.15.3/nifi-1.15.3-bin.zip\nunzip nifi-1.15.3-bin.zip\ncat > .nifi-env <<CONF\nCONF\n# \u51c6\u5907 volume - \u56e0\u4e3a dockerfile \u5b9a\u4e49\u4e86 volume - \u4e0d\u8986\u76d6\u5bb9\u5668\u5185\u4f1a\u65e0\u6cd5\u8bbf\u95ee\u5230\u5916\u90e8\nmkdir -p nifi-1.15.3/{logs,conf,database_repository,flowfile_repository,content_repository,provenance_repository,state}\nchown 1000 nifi-1.15.3/{logs,conf,database_repository,flowfile_repository,content_repository,provenance_repository,state}\n\n# https://github.com/apache/nifi/blob/main/nifi-docker/dockerhub/Dockerfile#L77-L83\n# Docker \u5185\u542f\u52a8 - \u73af\u5883\u9694\u79bb\uff0c\u7b80\u5316\u914d\u7f6e\ndocker run --rm -it \\\n  -p 8443:8443 \\\n  -v $PWD/nifi-1.15.3:/opt/nifi/nifi-current \\\n  -v $PWD/nifi-1.15.3/logs:/opt/nifi/nifi-current/logs \\\n  -v $PWD/nifi-1.15.3/conf:/opt/nifi/nifi-current/conf \\\n  -v $PWD/nifi-1.15.3/state:/opt/nifi/nifi-current/state \\\n  -v $PWD/nifi-1.15.3/database_repository:/opt/nifi/nifi-current/database_repository \\\n  -v $PWD/nifi-1.15.3/flowfile_repository:/opt/nifi/nifi-current/flowfile_repository \\\n  -v $PWD/nifi-1.15.3/content_repository:/opt/nifi/nifi-current/content_repository \\\n  -v $PWD/nifi-1.15.3/provenance_repository:/opt/nifi/nifi-current/provenance_repository \\\n  -e SINGLE_USER_CREDENTIALS_USERNAME=admin \\\n  -e SINGLE_USER_CREDENTIALS_PASSWORD=000000000000 \\\n  --name nifi apache/nifi:1.15.3\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"property"}),(0,r.jsx)(i.th,{children:"default"}),(0,r.jsx)(i.th,{children:"env"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.https.host"}),(0,r.jsx)(i.td,{children:"$HOSTNAME"}),(0,r.jsx)(i.td,{children:"NIFI_WEB_HTTPS_HOST"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.https.port"}),(0,r.jsx)(i.td,{children:"8443"}),(0,r.jsx)(i.td,{children:"NIFI_WEB_HTTPS_PORT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.proxy.host"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_WEB_PROXY_HOST"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.proxy.context.path"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_WEB_PROXY_CONTEXT_PATH"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.http.host"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_WEB_HTTP_HOST"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.http.port"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_WEB_HTTP_PORT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.remote.input.host"}),(0,r.jsx)(i.td,{children:"$HOSTNAME"}),(0,r.jsx)(i.td,{children:"NIFI_REMOTE_INPUT_HOST"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.remote.input.secure"}),(0,r.jsx)(i.td,{children:"true"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.remote.input.socket.port"}),(0,r.jsx)(i.td,{children:"10000"}),(0,r.jsx)(i.td,{children:"NIFI_REMOTE_INPUT_SOCKET_PORT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.variable.registry.properties"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_VARIABLE_REGISTRY_PROPERTIES"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.flow.election.max.candidates"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_ELECTION_MAX_CANDIDATES"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.flow.election.max.wait.time"}),(0,r.jsx)(i.td,{children:"5 mins"}),(0,r.jsx)(i.td,{children:"NIFI_ELECTION_MAX_WAIT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.is.node"}),(0,r.jsx)(i.td,{children:"false"}),(0,r.jsx)(i.td,{children:"NIFI_CLUSTER_IS_NODE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.node.address"}),(0,r.jsx)(i.td,{children:"$HOSTNAME"}),(0,r.jsx)(i.td,{children:"NIFI_CLUSTER_ADDRESS"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.node.protocol.max.threads"}),(0,r.jsx)(i.td,{children:"50"}),(0,r.jsx)(i.td,{children:"NIFI_CLUSTER_NODE_PROTOCOL_MAX_THREADS"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.node.protocol.port"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_CLUSTER_NODE_PROTOCOL_PORT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.protocol.is.secure"}),(0,r.jsx)(i.td,{children:"true"}),(0,r.jsx)(i.td,{children:"$NIFI_CLUSTER_IS_NODE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.zookeeper.connect.string"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_ZK_CONNECT_STRING"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.zookeeper.root.node"}),(0,r.jsx)(i.td,{children:"/nifi"}),(0,r.jsx)(i.td,{children:"NIFI_ZK_ROOT_NODE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.analytics.predict.enabled"}),(0,r.jsx)(i.td,{children:"false"}),(0,r.jsx)(i.td,{children:"NIFI_ANALYTICS_PREDICT_ENABLED"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.analytics.predict.interval"}),(0,r.jsx)(i.td,{children:"3 mins"}),(0,r.jsx)(i.td,{children:"NIFI_ANALYTICS_PREDICT_INTERVAL"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.analytics.query.interval"}),(0,r.jsx)(i.td,{children:"5 mins"}),(0,r.jsx)(i.td,{children:"NIFI_ANALYTICS_QUERY_INTERVAL"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.analytics.connection.model.implementation"}),(0,r.jsx)(i.td,{children:"\u2935\ufe0e"}),(0,r.jsx)(i.td,{children:"NIFI_ANALYTICS_MODEL_IMPLEMENTATION"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.analytics.connection.model.score.name"}),(0,r.jsx)(i.td,{children:"rSquared"}),(0,r.jsx)(i.td,{children:"NIFI_ANALYTICS_MODEL_SCORE_NAME"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.analytics.connection.model.score.threshold"}),(0,r.jsx)(i.td,{children:".90"}),(0,r.jsx)(i.td,{children:"NIFI_ANALYTICS_MODEL_SCORE_THRESHOLD"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.sensitive.props.key"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_SENSITIVE_PROPS_KEY"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.keystore"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"KEYSTORE_PATH"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.keystoreType"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"KEYSTORE_TYPE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.keystorePasswd"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"KEYSTORE_PASSWORD"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.keyPasswd"}),(0,r.jsx)(i.td,{children:"$KEYSTORE_PASSWORD"}),(0,r.jsx)(i.td,{children:"KEY_PASSWORD"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.truststore"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"TRUSTSTORE_PATH"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.truststoreType"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"TRUSTSTORE_TYPE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.truststorePasswd"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"TRUSTSTORE_PASSWORD"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.user.authorizer"}),(0,r.jsx)(i.td,{children:"managed-authorizer"}),(0,r.jsx)(i.td,{children:"NIFI_SECURITY_USER_AUTHORIZER"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.user.login.identity.provider"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.autoreload.enabled"}),(0,r.jsx)(i.td,{children:"false"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.security.autoreload.interval"}),(0,r.jsx)(i.td,{children:"10 secs"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"NODE_IDENTITY"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"INITIAL_ADMIN_IDENTITY"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"SINGLE_USER_CREDENTIALS_USERNAME"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"SINGLE_USER_CREDENTIALS_PASSWORD"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{children:"AUTH"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.ui.banner.text"}),(0,r.jsx)(i.td,{}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.ui.autorefresh.interval"}),(0,r.jsx)(i.td,{children:"30 sec"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.flow.configuration.file"}),(0,r.jsx)(i.td,{children:"./conf/flow.xml.gz"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.authorizer.configuration.file"}),(0,r.jsx)(i.td,{children:"./conf/authorizers.xml"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.database.directory"}),(0,r.jsx)(i.td,{children:"./database_repository"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.documentation.working.directory"}),(0,r.jsx)(i.td,{children:"./work/docs/components"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.login.identity.provider.configuration.file"}),(0,r.jsx)(i.td,{children:"./conf/login-identity-providers.xml"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.nar.library.autoload.directory"}),(0,r.jsx)(i.td,{children:"./extensions"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.nar.library.directory"}),(0,r.jsx)(i.td,{children:"./lib"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.nar.working.directory"}),(0,r.jsx)(i.td,{children:"./work/nar/"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.templates.directory"}),(0,r.jsx)(i.td,{children:"./conf/templates"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.state.management.embedded.zookeeper.properties"}),(0,r.jsx)(i.td,{children:"./conf/zookeeper.properties"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.flowfile.repository.directory"}),(0,r.jsx)(i.td,{children:"./flowfile_repository"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.content.repository.directory.default"}),(0,r.jsx)(i.td,{children:"./content_repository"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.provenance.repository.directory.default"}),(0,r.jsx)(i.td,{children:"./provenance_repository"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.status.repository.questdb.persist.location"}),(0,r.jsx)(i.td,{children:"./status_repository"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.jetty.working.directory"}),(0,r.jsx)(i.td,{children:"./work/jetty"}),(0,r.jsx)(i.td,{})]})]})]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u8bbe\u7f6e\u4e86 NIFI_WEB_HTTP_PORT \u5219\u4f1a\u53d6\u6d88 https"}),"\n",(0,r.jsxs)(i.li,{children:["nifi.analytics.connection.model.implementation\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u9ed8\u8ba4 org.apache.nifi.controller.status.analytics.models.OrdinaryLeastSquares"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"AUTH - tls,ldap"}),"\n",(0,r.jsx)(i.li,{children:"NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER - ldap-provider"}),"\n",(0,r.jsxs)(i.li,{children:["nifi.variable.registry.properties\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u63d0\u4f9b\u53d8\u91cf\u7684\u6587\u4ef6"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["nifi.sensitive.props.key\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u7528\u4e8e\u52a0\u5bc6\u654f\u611f\u4fe1\u606f\u7684 Key"}),"\n",(0,r.jsx)(i.li,{children:"\u8fc1\u79fb\u65f6\u786e\u4fdd Key \u76f8\u540c"}),"\n",(0,r.jsx)(i.li,{children:"./nifi-toolkit/bin/encrypt-config.sh \u53ef\u79bb\u7ebf\u4fee\u6539\u6216\u6062\u590d"}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"./bin/nifi.sh set-sensitive-properties-key <sensitivePropertiesKey>"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u53ef\u542f\u52a8\u540e\u4fee\u6539"}),"\n",(0,r.jsx)(i.li,{children:"\u81f3\u5c11 12 \u4f4d"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"# \u4fee\u6539\u5bc6\u7801\n./nifi-toolkit/bin/encrypt-config.sh \\\n  -f nifi-old/conf/flow.xml.gz -g nifi-new/conf/flow.xml.gz \\\n  -n nifi-old/conf/nifi.properties -o nifi-new/conf/nifi.properties \\\n  -x \\\n  -s new_password\n"})}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"JVM \u914d\u7f6e"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"env"}),(0,r.jsx)(i.th,{children:"bootstrap.conf"}),(0,r.jsx)(i.th,{children:"default"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"NIFI_JVM_HEAP_INIT"}),(0,r.jsx)(i.td,{children:"java.arg.2"}),(0,r.jsx)(i.td,{children:"512m"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"NIFI_JVM_HEAP_MAX"}),(0,r.jsx)(i.td,{children:"java.arg.3"}),(0,r.jsx)(i.td,{children:"512m"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"NIFI_JVM_DEBUGGER"}),(0,r.jsx)(i.td,{children:"java.arg.debug"}),(0,r.jsx)(i.td,{})]})]})]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"\u7aef\u53e3"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"props"}),(0,r.jsx)(i.th,{children:"port"}),(0,r.jsx)(i.th,{children:"note"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.web.https.port"}),(0,r.jsx)(i.td,{children:"8443"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.remote.input.socket.port"}),(0,r.jsx)(i.td,{children:"10443"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.node.protocol.port"}),(0,r.jsx)(i.td,{children:"11443"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"nifi.cluster.node.load.balance.port"}),(0,r.jsx)(i.td,{children:"6342"}),(0,r.jsx)(i.td,{})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"clientPort"}),(0,r.jsx)(i.td,{children:"2181"}),(0,r.jsx)(i.td,{children:"zookeeper.properties"})]})]})]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"conf/flow.xml.gz"}),"\n",(0,r.jsxs)(i.li,{children:["conf/bootstrap.conf\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u63d0\u4f9b JVM \u76f8\u5173\u53c2\u6570"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["conf/nifi.properties\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u6838\u5fc3 NiFi \u914d\u7f6e"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["conf/login-identity-providers.xml\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u767b\u9646\u8ba4\u8bc1\u8bbe\u7f6e"}),"\n",(0,r.jsx)(i.li,{children:"single-user-provider"}),"\n",(0,r.jsx)(i.li,{children:"ldap-provider"}),"\n",(0,r.jsx)(i.li,{children:"kerberos-provider"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["conf/authorizers.xml\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u63d0\u4f9b\u8ba4\u8bc1\u4fe1\u606f"}),"\n",(0,r.jsxs)(i.li,{children:["file-user-group-provider\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"conf/users.xml"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"ldap-user-group-provider"}),"\n",(0,r.jsx)(i.li,{children:"shell-user-group-provider"}),"\n",(0,r.jsx)(i.li,{children:"azure-graph-user-group-provider"}),"\n",(0,r.jsx)(i.li,{children:"composite-user-group-provider"}),"\n",(0,r.jsx)(i.li,{children:"composite-configurable-user-group-provider"}),"\n",(0,r.jsx)(i.li,{children:"file-access-policy-provider"}),"\n",(0,r.jsx)(i.li,{children:"managed-authorizer - org.apache.nifi.authorization.StandardManagedAuthorizer"}),"\n",(0,r.jsx)(i.li,{children:"file-provider - \u88ab managed-authorizer \u66ff\u4ee3"}),"\n",(0,r.jsx)(i.li,{children:"single-user-authorizer - org.apache.nifi.authorization.single.user.SingleUserAuthorizer"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["conf/state-management.xml\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["local-provider\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"./state/local"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"zk-provider"}),"\n",(0,r.jsx)(i.li,{children:"redis-provider - org.apache.nifi.redis.state.RedisStateProvider"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"conf/stateless.properties"}),"\n",(0,r.jsxs)(i.li,{children:["conf/zookeeper.properties\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u5185\u7f6e Zookeeper \u7684\u914d\u7f6e"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"content_repository/"}),"\n",(0,r.jsxs)(i.li,{children:["database_repository/ - H2\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"nifi-flow-audit.mv.db"}),"\n",(0,r.jsx)(i.li,{children:"nifi-identity-providers.mv.db"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"flowfile_repository/"}),"\n",(0,r.jsx)(i.li,{children:"provenance_repository/ - \u5185\u7f6e Lucene"}),"\n",(0,r.jsx)(i.li,{children:"state/"}),"\n",(0,r.jsxs)(i.li,{children:["extensions/\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u4f1a\u88ab nar \u81ea\u52a8\u52a0\u8f7d\u7684\u6269\u5c55\u76ee\u5f55"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["work/\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["nar/\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["extensions/\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"*.nar-unpacked"}),"/"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["framework/\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"nifi-framework-nar-1.15.2.nar-unpacked/"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["jetty/\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"*.war"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"logs/"}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"curl -O https://jdbc.postgresql.org/download/postgresql-42.3.3.jar\ndocker exec -it nifi mkdir -p /opt/nifi/lib\ndocker cp postgresql-42.3.3.jar nifi:/opt/nifi/lib\n"})}),"\n",(0,r.jsx)(i.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u96c6\u7fa4\u4f7f\u7528 zookeeper \u7ba1\u7406\u72b6\u6001"}),"\n",(0,r.jsx)(i.li,{children:"\u652f\u6301\u4f7f\u7528\u5185\u7f6e\u7684 zookeeper"}),"\n",(0,r.jsx)(i.li,{children:"\u5f03\u7528 Variable \uff0c\u4f7f\u7528 Parameter"}),"\n",(0,r.jsxs)(i.li,{children:["record-oriented\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u5728 record \u4e4b\u524d\uff0c\u5185\u90e8\u7ed3\u6784\u90fd\u4ee5 avro \u4e3a\u4e3b"}),"\n",(0,r.jsx)(i.li,{children:"\u5f15\u5165 record \u62bd\u79bb reader, writer"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"glossary",children:"Glossary"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["NAR - NiFi Archive\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u63d0\u4f9b Java ClassLoader isolation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"driver",children:"Driver"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["postgresql\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"org.postgresql.Driver"}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://jdbc.postgresql.org/download.html",children:"https://jdbc.postgresql.org/download.html"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar",children:"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"processor",children:"Processor"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["PutFile\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u5199\u5165\u5230\u76ee\u5f55\uff0c\u6587\u4ef6\u540d\u4e3a UUID\uff0c\u6bcf\u6b21\u4ea7\u751f\u4e00\u4e2a\u6587\u4ef6"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"PutS3, PutFTP, PutSSH"}),"\n",(0,r.jsxs)(i.li,{children:["PutRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Put \u5230 RecordSinkServices"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"PutDatabaseRecord"}),"\n",(0,r.jsxs)(i.li,{children:["QueryDatabaseTableRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u589e\u91cf\u67e5\u8be2"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["MergeRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u5408\u5e76\u90e8\u5206 Record"}),"\n",(0,r.jsx)(i.li,{children:"\u4f8b\u5982 \u7528\u4e8e\u5c0f\u6279\u91cf\u63d2\u5165"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["ValidateRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u57fa\u4e8e schema \u68c0\u67e5"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\u8f6c\u6362\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["ConvertRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Avro, JSON, CSV \u7b49"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["JoltTransformRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"JOLT - JsOn Language for Transform"}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://github.com/bazaarvoice/jolt",children:"bazaarvoice/jolt"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Apache-2.0, Java"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://jolt-demo.appspot.com/",children:"https://jolt-demo.appspot.com/"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["QueryRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u4f7f\u7528\u5185\u7f6e Calcite SQL \u5f15\u64ce\u5904\u7406 Flow \u6587\u4ef6"}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"SELECT * FROM FLOWFILE"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["LookupRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u67e5\u8be2\u5916\u90e8 - \u4f8b\u5982 Redis"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"UpdateRecord"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\u805a\u5408\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["PartitionRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u5206\u7ec4"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["SplitRecord\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u5206\u7ec4\u53d8\u5355\u884c"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"flowfile",children:"FlowFile"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["FlowFile\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["org.apache.nifi.flowfile.attributes.CoreAttributes\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"filename"}),"\n",(0,r.jsx)(i.li,{children:"uuid"}),"\n",(0,r.jsx)(i.li,{children:"path"}),"\n",(0,r.jsx)(i.li,{children:"absolute.path"}),"\n",(0,r.jsx)(i.li,{children:"priority"}),"\n",(0,r.jsxs)(i.li,{children:["mime.type\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"application/avro-binary"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"alternate.identifier"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Standard FlowFile Attributes\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"fileSize"}),"\n",(0,r.jsx)(i.li,{children:"entryDate"}),"\n",(0,r.jsx)(i.li,{children:"lineageStartDate"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\u5e38\u89c1\u5c5e\u6027\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"tablename"}),"\n",(0,r.jsx)(i.li,{children:"querydbtable.row.count"}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"maxvalue.<column>"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/developer-guide.html",children:"Developer Guide"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/expression-language-guide.html",children:"Expression Language Guide"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"el",children:"EL"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"${filename:equals(${uuid})}"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"${\u5c5e\u6027:\u51fd\u6570(\u53c2\u6570)}"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\u5c5e\u6027\u7ea7\u8054\u5173\u7cfb\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"FlowFile"}),"\n",(0,r.jsx)(i.li,{children:"Process Group Variable"}),"\n",(0,r.jsx)(i.li,{children:"File Registry"}),"\n",(0,r.jsx)(i.li,{children:"NiFi JVM Properties"}),"\n",(0,r.jsx)(i.li,{children:"System Environment"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\u51fd\u6570\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Bool\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"isNull, notNull, isEmpty, equals, equalsIgnoreCase, gt, ge, lt, le, and, or, not"}),"\n",(0,r.jsxs)(i.li,{children:["ifElse\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"${literal(true):ifElse('a','b')}"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["String\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"toUpper, toLower, trim, substring, substringBefore, substringBeforeLast, substringAfter, substringAfterLast"}),"\n",(0,r.jsx)(i.li,{children:"getDelimitedField, append, prepend, replace, replaceFirst, replaceAll, padLeft, padRight"}),"\n",(0,r.jsx)(i.li,{children:"replaceNull, replaceEmpty, length, evaluateELString, repeat"}),"\n",(0,r.jsx)(i.li,{children:"startsWith, endsWith, contains, in, find, matches, indexOf, lastIndexOf"}),"\n",(0,r.jsx)(i.li,{children:"jsonPath, jsonPathDelete, jsonPathAdd, jsonPathSet, jsonPathPut"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Codec\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"{escape,unescape}{Json,Xml,Csv,Html3,Html4}"}),"\n",(0,r.jsx)(i.li,{children:"urlEncode, urlDecode, base64Encode, base64Decode"}),"\n",(0,r.jsx)(i.li,{children:"UUID3, UUID5"}),"\n",(0,r.jsxs)(i.li,{children:["hash\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"hex"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Math\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"plus, minus, multiply, divide, mod, toRadix, fromRadix, random, math"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.li,{children:"Date - format, toDate, now"}),"\n",(0,r.jsx)(i.li,{children:"Typing - toString, toNumber, toDecimal"}),"\n",(0,r.jsx)(i.li,{children:"ip, hostname, UUID, nextInt, literal"}),"\n",(0,r.jsx)(i.li,{children:"getStateValue, thread"}),"\n",(0,r.jsx)(i.li,{children:"anyAttribute, allAttributes, anyMatchingAttribute, allMatchingAttributes, anyDelineatedValue, allDelineatedValues"}),"\n",(0,r.jsx)(i.li,{children:"join, count"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"jolt",children:"JOLT"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'[\n  {\n    "operation": "default",\n    "spec": {}\n  }\n]\n'})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["operation\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"shift"}),"\n",(0,r.jsx)(i.li,{children:"default"}),"\n",(0,r.jsx)(i.li,{children:"remove"}),"\n",(0,r.jsx)(i.li,{children:"sort"}),"\n",(0,r.jsx)(i.li,{children:"java"}),"\n",(0,r.jsx)(i.li,{children:"cardinality"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'[\n  // \u79fb\u9664\u6570\u7ec4\u91cc\u6bcf\u4e2a\u5143\u7d20\u7684 id,raw \u5b57\u6bb5\n  {\n    "operation": "remove",\n    "spec": {\n      "*": {\n        "id": "",\n        "raw": ""\n      }\n    }\n  }\n]\n'})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://community.cloudera.com/t5/Community-Articles/Jolt-quick-reference-for-Nifi-Jolt-Processors/ta-p/244350",children:"Jolt quick reference for Nifi Jolt Processors "})}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"kubernetes",children:"Kubernetes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://github.com/cetic/helm-nifi",children:"https://github.com/cetic/helm-nifi"})}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"upgrade",children:"Upgrade"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://cwiki.apache.org/confluence/display/NIFI/Migration+Guidance",children:"Migration Guidance"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html#upgrading_nifi",children:"Upgrading NiFi"})}),"\n"]}),"\n",(0,r.jsx)(i.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(i.h2,{id:"illegal-initial-character-column",children:"Illegal initial character: ?column?"}),"\n",(0,r.jsx)(i.p,{children:"ExecuteSQL \u6dfb\u52a0 alias"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"-- \u6709\u95ee\u9898\nselect 1;\n-- \u53ef\u4ee5\nselect 1 as val;\n"})}),"\n",(0,r.jsx)(i.h2,{id:"record-does-not-have-a-value-for-the-updatekey-column",children:"Record does not have a value for the UpdateKey column"}),"\n",(0,r.jsx)(i.p,{children:"\u914d\u7f6e\u7684 update key \u6ca1\u6709\u6570\u636e\uff0c\u68c0\u67e5\u6570\u636e\u5185\u5bb9\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"\u591a\u503c\u53c2\u6570",children:"\u591a\u503c\u53c2\u6570"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\u4f7f\u7528\u9017\u53f7\u5206\u9694\uff0c\u4f7f\u7528\u65f6\u91cd\u65b0\u62fc\u63a5"}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-pre",metastring:'title="owner_ids \u4e0d\u53ef\u4ee5\u5305\u542b\u7a7a\u683c"',children:"owner_id in ('${#{owner_ids}:replaceAll(',', \"','\")}')\n"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-pre",metastring:'title="owner_ids \u53ef\u4ee5\u5305\u542b\u7a7a\u683c"',children:'owner_id in (\'${allDelineatedValues("${#{owner_ids}}", ","):trim():join("\',\'")}\')\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6",children:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-js",children:"var flowFile = session.get();\nvar File = Java.type('java.io.RandomAccessFile');\nif (flowFile != null) {\n  var filename = flowFile.getAttribute('filename');\n  /// \u5199\u5165\u6587\u4ef6\n  var filePath = '/tmp/nifi/test.log';\n  flowFile = session.putAttribute(flowFile, 'filePath', filePath);\n  var file = new File(filePath, 'rws');\n  file.seek(file.length());\n  // \u5199\u5165\u5185\u5bb9\n  file.write(filename.getBytes());\n  file.write('\\n'.getBytes());\n  file.close();\n  // Finish by transferring the FlowFile to an output relationship\n  session.transfer(flowFile, REL_SUCCESS);\n}\n"})}),"\n",(0,r.jsx)(i.h2,{id:"h2-javalangillegalstateexception-the-file-is-locked",children:"h2 java.lang.IllegalStateException: The file is locked"}),"\n",(0,r.jsx)(i.p,{children:"\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u542f\u52a8\u8fc7 NiFi \u4e86"}),"\n",(0,r.jsx)(i.h2,{id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup",children:"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-properties",children:"nifi.content.repository.implementation=org.apache.nifi.controller.repository.FileSystemRepository\nnifi.content.claim.max.appendable.size=1 MB\nnifi.content.repository.directory.default=./content_repository\nnifi.content.repository.archive.max.retention.period=7 days\n# \u9650\u5b9a\u4e86\u6700\u5927\u53ef\u7528\u7a7a\u95f4\nnifi.content.repository.archive.max.usage.percentage=50%\nnifi.content.repository.archive.enabled=true\nnifi.content.repository.always.sync=false\nnifi.content.viewer.url=../nifi-content-viewer/\n"})})]})}function a(n={}){const{wrapper:i}={...(0,s.a)(),...n.components};return i?(0,r.jsx)(i,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},3354:(n,i,e)=>{var r=e(50959),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(n,i,e){var r,l={},h=null,o=null;for(r in void 0!==e&&(h=""+e),void 0!==i.key&&(h=""+i.key),void 0!==i.ref&&(o=i.ref),i)t.call(i,r)&&!c.hasOwnProperty(r)&&(l[r]=i[r]);if(n&&n.defaultProps)for(r in i=n.defaultProps)void 0===l[r]&&(l[r]=i[r]);return{$$typeof:s,type:n,key:h,ref:o,props:l,_owner:d.current}}i.Fragment=l,i.jsx=h,i.jsxs=h},11527:(n,i,e)=>{n.exports=e(3354)},47214:(n,i,e)=>{e.d(i,{Z:()=>d,a:()=>t});var r=e(50959);const s={},l=r.createContext(s);function t(n){const i=r.useContext(l);return r.useMemo((function(){return"function"==typeof n?n(i):{...i,...n}}),[i,n])}function d(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),r.createElement(l.Provider,{value:i},n.children)}}}]);