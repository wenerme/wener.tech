"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[57050],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(t),m=a,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return t?r.createElement(f,i(i({ref:n},p),{},{components:t})):r.createElement(f,i({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},98294:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var r=t(87462),a=t(63366),o=(t(67294),t(3905)),i=["components"],s={title:"Health Check"},l=void 0,c={unversionedId:"os/alpine/alpine-health",id:"os/alpine/alpine-health",isDocsHomePage:!1,title:"Health Check",description:"DISK",source:"@site/notes/os/alpine/alpine-health.md",sourceDirName:"os/alpine",slug:"/os/alpine/alpine-health",permalink:"/notes/os/alpine/alpine-health",editUrl:"https://github.com/wenerme/wener/edit/master/notes/os/alpine/alpine-health.md",tags:[],version:"current",frontMatter:{title:"Health Check"},sidebar:"docs",previous:{title:"Alpine FAQ",permalink:"/notes/os/alpine/alpine-faq"},next:{title:"AlpineLinux Install",permalink:"/notes/os/alpine/alpine-install"}},p=[{value:"DISK",id:"disk",children:[{value:"SCSI",id:"scsi",children:[]}]}],u={toc:p};function d(e){var n=e.components,t=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"disk"},"DISK"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"apk add smartmontools\n# -a \u8f93\u51fa\u6240\u6709\u4fe1\u606f\nsmartctl -a /dev/sdb\n# -x \u8f93\u51fa\u66f4\u591a\u4fe1\u606f, \u5305\u542b\u975e smart \u4fe1\u606f\nsmartctl -x /dev/sdb\n# -H \u8f93\u51fa\u5065\u5eb7\u72b6\u6001\nsmartctl -H /dev/sdb\n# -t \u8fd0\u884c\u6d4b\u8bd5, -a \u67e5\u770b\u72b6\u6001\nsmartctl -t short /dev/sdb\n\n# \u574f\u5757\u68c0\u6d4b\napk add e2fsprogs-extra\n# \u6ce8\u610f: \u975e\u5e38\u6162\n# 1TB 4 runs(-w) \u5dee\u4e0d\u591a 70 \u5c0f\u65f6\nbadblocks -v /dev/sdb\n")),(0,o.kt)("h3",{id:"scsi"},"SCSI"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/Power+Systems/page/SCSI+-+Hot+add,+remove,+rescan+of+SCSI+devices"},"SCSI - Hot add, remove, rescan of SCSI devices"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'apk add lsscsi\n# \u67e5\u770b scsi \u8bbe\u5907\nlsscsi\ncat /proc/scsi/scsi\n\n# \u91cd\u65b0\u626b\u63cf\necho "- - -" > /sys/class/scsi_host/host0/scan\n# \u79fb\u9664\u8bbe\u5907\necho 1 > /sys/bus/scsi/drivers/sd/<SCSI-ID>/delete\n')))}d.isMDXComponent=!0}}]);