/*! For license information please see b8bf54ff.6b26641a.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[54550],{83688:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>j,frontMatter:()=>r,metadata:()=>t,toc:()=>h});var s=l(2488),i=l(62780);const r={title:"SQLite"},d="SQLite",t={id:"db/relational/sqlite/README",title:"SQLite",description:"- \u6570\u636e\u7c7b\u578b",source:"@site/../notes/db/relational/sqlite/README.md",sourceDirName:"db/relational/sqlite",slug:"/db/relational/sqlite/",permalink:"/notes/db/relational/sqlite/",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/sqlite/README.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1678453938,formattedLastUpdatedAt:"Mar 10, 2023",frontMatter:{title:"SQLite"},sidebar:"docs",previous:{title:"sql.js",permalink:"/notes/db/relational/sql.js"},next:{title:"litefs",permalink:"/notes/db/relational/sqlite/litefs"}},c={},h=[{value:"\u6570\u636e\u64cd\u4f5c",id:"\u6570\u636e\u64cd\u4f5c",level:2},{value:"\u5bfc\u5165 csv",id:"\u5bfc\u5165-csv",level:3},{value:"\u5bfc\u51fa csv",id:"\u5bfc\u51fa-csv",level:3},{value:"csv \u865a\u62df\u8868",id:"csv-\u865a\u62df\u8868",level:2},{value:"DateTime",id:"datetime",level:2},{value:"Notes",id:"notes",level:2},{value:".help",id:"help",level:2},{value:"Deeper",id:"deeper",level:2},{value:"Node",id:"node",level:2},{value:"Java",id:"java",level:2},{value:"UDF",id:"udf",level:2},{value:"Build",id:"build",level:2},{value:"DEV",id:"dev",level:2},{value:"pragma",id:"pragma",level:2},{value:"sqlite_stat1",id:"sqlite_stat1",level:2},{value:"WAL",id:"wal",level:2},{value:"syntax",id:"syntax",level:2},{value:"attach",id:"attach",level:3},{value:"json",id:"json",level:3},{value:"upsert",id:"upsert",level:3},{value:"format",id:"format",level:2},{value:"vacuum",id:"vacuum",level:2},{value:"query",id:"query",level:2},{value:"Versions",id:"versions",level:2}];function x(n){const e={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.M)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"sqlite",children:"SQLite"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"http://sqlite.org/datatype3.html",children:"\u6570\u636e\u7c7b\u578b"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5b58\u50a8\u7c7b\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"NULL"}),"\n",(0,s.jsx)(e.li,{children:"INTEGER - 0, 1, 2, 3, 4, 6, 8 bytes - \u5185\u5b58\u4e2d\u90fd\u4e3a int64"}),"\n",(0,s.jsx)(e.li,{children:"REAL - 8 byte"}),"\n",(0,s.jsx)(e.li,{children:"TEXT - UTF-8, UTF-16BE, UTF-16LE"}),"\n",(0,s.jsx)(e.li,{children:"BLOB"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"BOOLEAN -> 0,1"}),"\n",(0,s.jsx)(e.li,{children:"DATETIME -> TEXT ISO8601, REAL, INTEGER Unix Timestamp"}),"\n",(0,s.jsxs)(e.li,{children:["\u7c7b\u578b\u4eb2\u548c - \u7c7b\u578b\u4e4b\u95f4\u4f1a\u8fdb\u884c\u5185\u90e8\u8f6c\u6362\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"INT,INTEGER,TINYINT,SMALLINT,MEDIUMINT,BIGINT,UNSIGNED BIG INT, INT2, INT8 -> INTEGER"}),"\n",(0,s.jsx)(e.li,{children:"\u5176\u4ed6\u7c7b\u4f3c"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://sqlite.org/stricttables.html",children:"STRICT Tables"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"CREATE TABLE t1(a ANY) STRICT;"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"PRAGMA strict=ON;"})}),"\n",(0,s.jsx)(e.li,{children:"\u5f3a\u5236\u7c7b\u578b - INT, INTEGER, REAL, TEXT, BLOB, ANY"}),"\n",(0,s.jsx)(e.li,{children:"ANY \u548c\u65e7\u7684\u7c7b\u578b\u7c7b\u4f3c"}),"\n",(0,s.jsx)(e.li,{children:"PRAGMA integrity_check, quick_check \u53ef\u68c0\u6d4b\u7c7b\u578b"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u4f1a\u63d0\u5347\u6027\u80fd - \u8fd0\u884c\u65f6\u68c0\u6d4b\uff0c\u5bf9\u5b58\u50a8\u65e0\u5f71\u54cd\uff0c\u6838\u5fc3\u6027\u80fd\u5728\u4e8e IO"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["ROWID - int64\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["rowid, oid, ",(0,s.jsx)(e.code,{children:"_rowid_"})]}),"\n",(0,s.jsx)(e.li,{children:"\u5efa\u8868\u65f6\u53ef WITHOUT ROWID"}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c\u8868\u4f7f\u7528 INT \u4f5c\u4e3a pkey\uff0c\u5219\u8be5\u5217\u4f1a\u88ab\u7528\u4e8e rowid\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"CREATE TABLE t(x INTEGER PRIMARY KEY ASC, y, z);"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"btree \u7684 key"}),"\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7 rowid \u641c\u7d22\u548c\u6392\u5e8f\u662f\u666e\u901a PRIMARY KEY \u7684\u4e24\u500d\u901f\u5ea6"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u8bed\u6cd5\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/lang_expr.html",children:"expr"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/pragma.html",children:"pragma"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u9650\u5236\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u4e0d\u53ef\u4ee5 ALTER COLUMN - \u53ea\u80fd rename table/column \u5f62\u5f0f\u53bb\u53d8\u66f4\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e0d\u53ef\u4ee5\u79fb\u9664 UNIQUE - \u63a8\u8350\u4f7f\u7528 UNIQUE INDEX - \u53ef\u4ee5\u88ab drop"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://sqlite.org/lang_altertable.html",children:"altertable"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["ALTER TABLE DROP COLUMN \u4e0d\u652f\u6301\u88ab\u5f15\u7528\u7684\u5217\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"PRIMARY KEY, UNIQUE, \u7d22\u5f15\u5217, \u5305\u542b\u5728\u90e8\u5206\u7d22\u5f15, \u5305\u542b\u5728 CHECK, \u5916\u952e, \u88ab\u7528\u4e8e\u751f\u6210\u5217, \u7528\u4e8e trigger \u548c view"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://www.sqlite.org/limits.html",children:"Limits In SQLite"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_LENGTH=1,000,000,000 - 1G - text,blob \u6700\u5927\u957f\u5ea6"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_COLUMN=2000 - \u5217"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_SQL_LENGTH=1G - sql \u6700\u5927\u957f\u5ea6 - \u4f7f\u7528 prepare \u907f\u514d\u957f sql"}),"\n",(0,s.jsx)(e.li,{children:"JOIN \u6700\u591a 64 \u4e2a\u8868"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_EXPR_DEPTH=1000"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_FUNCTION_ARG=127"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_COMPOUND_SELECT=500"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_LIKE_PATTERN_LENGTH=50000"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_VARIABLE_NUMBER=999 - v3.32.0 32766"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_TRIGGER_DEPTH=1000"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_ATTACHED=10"}),"\n",(0,s.jsx)(e.li,{children:"SQLITE_MAX_PAGE_COUNT=1073741823 - 1Gi - PRAGMA max_page_count"}),"\n",(0,s.jsx)(e.li,{children:"281TB \u5e93"}),"\n",(0,s.jsx)(e.li,{children:"2^64 \u884c"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/c3ref/c_limit_attached.htm",children:"c_limit_attached"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://sqlite.org/fiddle/",children:"https://sqlite.org/fiddle/"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/jlongster/absurd-sql",children:"https://github.com/jlongster/absurd-sql"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.admonition,{type:"caution",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"SQLite \u7684\u7c7b\u578b\u662f\u52a8\u6001\u7684 - \u4e0d\u5f3a\u5236 - \u65b0\u7248\u672c\u652f\u6301\u4e25\u683c\u7c7b\u578b"}),"\n",(0,s.jsx)(e.li,{children:"SQLite \u7684\u6838\u5fc3\u9650\u5236\u662f\u5e76\u53d1\u5199\u5165\u6027\u80fd - \u5982\u679c\u9700\u8981\u5e76\u53d1\u5199\u5165\uff0c\u4e0d\u5efa\u8bae\u7528 SQLite"}),"\n",(0,s.jsx)(e.li,{children:"DATETIME \u4e0d\u4f1a\u5b58\u50a8\u6beb\u79d2"}),"\n",(0,s.jsx)(e.li,{children:"\u6ca1\u6709 Base64 \u51fd\u6570"}),"\n",(0,s.jsx)(e.li,{children:"BLOB \u4f5c\u4e3a\u4e8c\u8fdb\u5236\u5b58\u50a8\u90e8\u5206\u8bed\u8a00\u7684 Driver \u652f\u6301\u4e0d\u592a\u597d"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u652f\u6301 INSERT DEFAULT"}),"\n",(0,s.jsxs)(e.li,{children:["column DEFAULT \u8868\u8fbe\u5f0f\u9700\u8981\u5199\u4e3a ",(0,s.jsx)(e.code,{children:"(expr)"})]}),"\n"]})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u9ed8\u8ba4\u6700\u591a 999 \u4e2a\u53d8\u91cf"}),"\n",(0,s.jsxs)(e.li,{children:["WAL \u6a21\u5f0f\u53ef\u63d0\u5347 \u5355\u5199\u591a\u8bfb \u6027\u80fd - ",(0,s.jsx)(e.code,{children:"PRAGMA journal_mode=WAL"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u53ef\u4ee5\u914d\u5408 zfs \u8fdb\u884c\u538b\u7f29 - \u6ce8\u610f\u4f7f\u7528\u76f8\u540c\u7684 page size\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"page_size \u4e00\u822c 4096, cache_size \u4e00\u822c -2000 \u5373 2000 kb"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"PRAGMA schema.page_size"}),", ",(0,s.jsx)(e.code,{children:"PRAGMA schema.cache_size"})]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.mail-archive.com/sqlite-users@mailinglists.sqlite.org/msg114729.html",children:"compressed sqlite3 database file?"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"vacuum \u662f\u5148\u5199\u5165\u4e34\u65f6\u6587\u4ef6\uff0c\u7136\u540e\u66ff\u6362 - \u9700\u8981\u5f88\u5927\u7a7a\u95f4"}),"\n"]})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# macOS \u5b89\u88c5\nbrew install sqlite3\n# \u56e0\u4e3a\u7cfb\u7edf\u81ea\u5e26 - \u6240\u4ee5\u9ed8\u8ba4\u4e0d\u4f1a\u6dfb\u52a0\u5230 PATH\n$(brew --prefix sqlite3)/bin/sqlite3\n# \u6dfb\u52a0\u5b89\u88c5\u7684 sqlite3 \u5230 PATH\nexport PATH="/usr/local/opt/sqlite/bin:$PATH"\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u65e5\u671f\u51fd\u6570\n-- https://sqlite.org/lang_datefunc.html\n-- \u8f6c\u6362\u65f6\u95f4\u6233\nselect datetime( 1323648000, 'unixepoch' );\n-- \u83b7\u53d6\u65f6\u95f4\u6233, \u5e26\u6beb\u79d2\nSELECT CAST((julianday('now') - 2440587.5) * 86400000 AS INTEGER);\n-- \u9ed8\u8ba4\u503c\u5e26\u6beb\u79d2\nCREATE TABLE IF NOT EXISTS event\n(\n  create_at DATETIME DEFAULT (STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'))\n);\n\n-- \u9644\u52a0\u5176\u4ed6\u6587\u4ef6\u5230\u6570\u636e\u5e93\nATTACH 'cache.db' AS cache;\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u6240\u6709\u8868\n.tables\n-- \u663e\u793a create \u8868\n.schema urls\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u6570\u636e\u64cd\u4f5c",children:"\u6570\u636e\u64cd\u4f5c"}),"\n",(0,s.jsx)(e.h3,{id:"\u5bfc\u5165-csv",children:"\u5bfc\u5165 csv"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u53ef\u4ee5\u4e0d\u7528\u521b\u5efa\ncreate table foo(a, b);\n.mode csv\n.import test.csv foo\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u5bfc\u51fa-csv",children:"\u5bfc\u51fa csv"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:".output data.csv\nselect * from foo;\n"})}),"\n",(0,s.jsx)(e.h2,{id:"csv-\u865a\u62df\u8868",children:"csv \u865a\u62df\u8868"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/csv.html",children:"https://www.sqlite.org/csv.html"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u52a0\u8f7d\u6269\u5c55\n.load ./csv\n\nCREATE VIRTUAL TABLE temp.t1 USING csv(filename='thefile.csv');\nSELECT * FROM t1;\n"})}),"\n",(0,s.jsx)(e.h2,{id:"datetime",children:"DateTime"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- epoch to datetime\nselect datetime(1580000000,'unixepoch');\n-- \u6dfb\u52a0\u65f6\u533a\nselect datetime(1580000000,'unixepoch','localtime');\n-- datetime to epoch\nselect strftime('%s', datetime(1580000000,'unixepoch','localtime'));\n-- \u5f53\u524d epoch\nselect strftime('%s', 'now');\n"})}),"\n",(0,s.jsx)(e.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u90e8\u5206\u7d22\u5f15\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/partialindex.html",children:"https://www.sqlite.org/partialindex.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/optoverview.html",children:"The SQLite Query Optimizer Overview"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["WHERE \u6761\u4ef6\u5206\u6790\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7d22\u5f15\u9009\u62e9"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["BETWEEN \u4f18\u5316\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8f6c\u6362\u4e3a >= <="}),"\n",(0,s.jsx)(e.li,{children:"\u4e0e\u7d22\u5f15\u5224\u65ad"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["OR \u4f18\u5316\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u76f8\u540c\u5217\u8bed\u610f\u4e0a\u53ef\u8f6c\u6362\u4e3a IN"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u540c\u5217 OR \u9700\u8981\u6309 Cost \u9009\u62e9"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["LIKE \u4f18\u5316\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u524d\u7f00\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["Skip-Scan \u4f18\u5316\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6761\u4ef6\u4e0d\u4ee5\u7d22\u5f15\u6700\u5de6\u5217\u5f00\u59cb"}),"\n",(0,s.jsx)(e.li,{children:"\u5c1d\u8bd5\u9650\u5b9a\u6700\u5de6\u5217\u6761\u4ef6\u6765\u5229\u7528\u7d22\u5f15"}),"\n",(0,s.jsx)(e.li,{children:"\u4f8b\u5982\u5f53\u6700\u5de6\u5217\u53ea\u6709\u56fa\u5b9a\u51e0\u4e2a\u503c\u7684\u65f6\u5019"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["JOIN\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"JOIN \u91cd\u6392\u5e8f"}),"\n",(0,s.jsx)(e.li,{children:"\u57fa\u4e8e SQLITE_STAT \u9009\u62e9\u987a\u5e8f"}),"\n",(0,s.jsx)(e.li,{children:"\u901a\u8fc7 CROSS JOIN \u63a7\u5236\u67e5\u8be2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u591a\u4e2a\u7d22\u5f15\u7684\u9009\u62e9\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u57fa\u4e8e\u7edf\u8ba1"}),"\n",(0,s.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,s.jsx)(e.code,{children:"+a = 4"})," \u7684\u65b9\u5f0f\u6765\u6697\u793a\u4e0d\u5b9e\u7528 ",(0,s.jsx)(e.code,{children:"a"})," \u7684\u7d22\u5f15"]}),"\n",(0,s.jsx)(e.li,{children:"\u8303\u56f4\u67e5\u8be2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u8986\u76d6\u7d22\u5f15\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5168\u8868\u626b\u63cf\u65f6\u9009\u62e9\u5305\u542b rowid \u7684\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["ORDER BY \u4f18\u5316\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5c1d\u8bd5\u4f7f\u7528\u7b26\u5408 ORDER BY \u8981\u6c42\u7684\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u901a\u8fc7\u7d22\u5f15\u8fdb\u884c\u90e8\u5206 ORDER BY\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5305\u542b\u591a\u4e2a ORDER BY \u65f6"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u62c9\u5e73\u5b50\u67e5\u8be2\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5c06\u5b50\u67e5\u8be2\u4f18\u5316\u4e3a JOIN"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u534f\u7a0b\u6267\u884c\u5b50\u67e5\u8be2\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u90e8\u5206\u5b50\u67e5\u8be2\u53ef\u4ee5\u4e0e\u5f53\u524d\u67e5\u8be2\u5e76\u884c\u6267\u884c"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["MIN/MAX \u4f18\u5316\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u5217\u662f\u67d0\u7d22\u5f15\u7684\u6700\u5de6\u5217\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u81ea\u52a8\u7d22\u5f15\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5f53\u67e5\u8be2\u6ca1\u6709\u7d22\u5f15\u65f6\uff0c\u53ef\u80fd\u4f1a\u5728\u8bed\u53e5\u6267\u884c\u671f\u95f4\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u521b\u5efa\u7d22\u5f15 O(NlogN) \u5168\u8868\u626b\u63cf O(N)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4e0b\u63a8\u4f18\u5316/Push-Down Optimization\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e00\u4e2a\u5b50\u67e5\u8be2\u65e0\u6cd5\u88ab\u5e73\u6574\u4e3a\u5916\u90e8\u67e5\u8be2\uff0c\u53ef\u5c1d\u8bd5\u5c06\u5916\u90e8\u67e5\u8be2\u7684\u6761\u4ef6\u4e0b\u63a8\u5230\u5b50\u67e5\u8be2\u4e2d\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["LEFT JOIN Strength Reduction Optimization\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6709\u65f6\u4e00\u4e2a LEFT JOIN \u53ef\u4ee5\u8f6c\u6362\u4e3a\u4e00\u4e2a\u666e\u901a\u7684 JOIN\uff0c\u53ea\u8981\u4e24\u8005\u7ed3\u679c\u76f8\u540c\u3002"}),"\n",(0,s.jsx)(e.li,{children:"if any column in the right-hand table of the LEFT JOIN must be non-NULL in order for the WHERE clause to be true, then the LEFT JOIN is demoted to an ordinary JOIN."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5ffd\u7565 LEFT JOIN\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u6709\u65f6 LEFT JOIN \u53ef\u4ee5\u5b8c\u5168\u5457\u5ffd\u7565\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u98de\u805a\u5408\u67e5\u8be2"}),"\n",(0,s.jsx)(e.li,{children:"DISTINC \u67e5\u8be2\u6216\u4f7f\u7528 ON/USING \u6765\u9650\u5236 JOIN \u53ea\u5339\u914d\u4e00\u5217"}),"\n",(0,s.jsx)(e.li,{children:"LETF JOIN \u53f3\u8fb9\u8868\u7684\u5217\u672a\u5728\u5916\u90e8\u67e5\u8be2\u4f7f\u7528"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/queryplanner-ng.html",children:"The Next-Generation Query Planner"})}),"\n",(0,s.jsx)(e.h2,{id:"help",children:".help"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:".mode column\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u6307\u4ee4"}),(0,s.jsx)(e.th,{children:"\u63cf\u8ff0"}),(0,s.jsx)(e.th,{children:"\u9ed8\u8ba4"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".backup ?DB? FILE"}),(0,s.jsx)(e.td,{children:"\u5907\u4efd\u6570\u636e\u5e93(\u9ed8\u8ba4\u4e3a main)\u5230 FILE"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".bail ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"\u9519\u8bef\u65f6\u505c\u6b62"}),(0,s.jsx)(e.td,{children:"OFF"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".binary ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"\u4e8c\u8fdb\u5236\u8f93\u51fa"}),(0,s.jsx)(e.td,{children:"OFF"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".clone NEWDB"}),(0,s.jsx)(e.td,{children:"\u514b\u9686\u73b0\u6709\u7684\u6570\u636e\u5e93\u5230 NEWDB"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".databases"}),(0,s.jsx)(e.td,{children:"\u4f8b\u4e3e\u6dfb\u52a0\u7684\u6570\u636e\u5e93\u540d\u548c\u6587\u4ef6"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".dbinfo ?DB?"}),(0,s.jsx)(e.td,{children:"\u663e\u793a\u6570\u636e\u5e93\u72b6\u6001\u4fe1\u606f"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".dump ?TABLE? ..."}),(0,s.jsxs)(e.td,{children:["\u4ee5 SQL \u7684\u5f62\u5f0f\u8f6c\u50a8\u6570\u636e\u5e93",(0,s.jsx)(e.br,{}),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u8f6c\u50a8\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."]}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".echo ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"\u547d\u4ee4\u56de\u663e"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".eqp ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"\u81ea\u52a8\u6267\u884c EXPLAIN QUERY PLAN"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".exit"}),(0,s.jsx)(e.td,{children:"\u9000\u51fa"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".explain ",(0,s.jsx)(e.code,{children:"?on|off?"})]}),(0,s.jsxs)(e.td,{children:["\u4f7f\u7528\u9002\u5408 EXPLAIN \u7684\u8f93\u51fa\u6a21\u5f0f",(0,s.jsx)(e.br,{}),"\u5982\u679c\u672a\u6307\u5b9a\u53c2\u6570,\u5219\u4e3a\u6253\u5f00"]}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".fullschema"}),(0,s.jsx)(e.td,{children:"\u663e\u793a sqlite_stat \u7684 schema \u548c\u5185\u5bb9"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".headers ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"\u663e\u793a\u5934"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".help"}),(0,s.jsx)(e.td,{children:"\u663e\u793a\u8be5\u4fe1\u606f"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".import FILE TABLE"}),(0,s.jsx)(e.td,{children:"\u5bfc\u5165 FILE \u5185\u5bb9\u4e3a TABLE"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".indexes ?TABLE?"}),(0,s.jsxs)(e.td,{children:["\u663e\u793a\u6240\u6709\u7d22\u5f15",(0,s.jsx)(e.br,{}),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u663e\u793a\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."]}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".limit ?LIMIT? ?VAL?"}),(0,s.jsx)(e.td,{children:"\u663e\u793a\u6216\u66f4\u6539 SQLITE_LIMIT \u7684\u503c"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".log ",(0,s.jsx)(e.code,{children:"FILE|off"})]}),(0,s.jsx)(e.td,{children:"\u65e5\u5fd7, FILE \u53ef\u4ee5\u4e3a stderr/stdout"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".mode MODE ?TABLE?"}),(0,s.jsx)(e.td,{children:"\u8bbe\u7f6e\u8f93\u51fa\u6a21\u5f0f"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"ascii \u884c\u5217\u4f7f\u7528 0x1F \u548c 0x1E \u5206\u9694"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"csv \u9017\u53f7\u5206\u9694\u7684\u503c"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"column \u5de6\u5bf9\u9f50\u5217 (\u53c2\u89c1 .width)"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsxs)(e.td,{children:["html HTML ",(0,s.jsx)(e.code,{children:"<table>"})," \u4ee3\u7801"]}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"insert Insert \u8bed\u53e5 TABLE"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"line \u6bcf\u884c\u53ea\u6709\u503c"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"list \u4f7f\u7528 .separator \u5206\u9694\u7684\u503c"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"tabs \u5236\u8868\u7b26\u5206\u5272\u7684\u503c"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"tcl TCL list \u5143\u7d20"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".nullvalue STRING"}),(0,s.jsx)(e.td,{children:"\u4f7f\u7528 STRING \u6765\u66ff\u4ee3 NULL \u503c"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".once FILENAME"}),(0,s.jsx)(e.td,{children:"\u8f93\u51fa\u4e0b\u4e00\u4e2a SQL \u6307\u4ee4\u5230 FILENAME"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".open ?FILENAME?"}),(0,s.jsx)(e.td,{children:"\u4fbf\u4e8e\u73b0\u6709\u6570\u636e\u5e93\u5e76\u6253\u5f00 FILENAME"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".output ?FILENAME?"}),(0,s.jsx)(e.td,{children:"\u53d1\u9001\u8f93\u51fa\u5230 FILENAME \u6216 stdout"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".print STRING..."}),(0,s.jsx)(e.td,{children:"\u663e\u793a STRING"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".prompt MAIN CONTINUE"}),(0,s.jsx)(e.td,{children:"\u4fee\u6539\u63d0\u793a\u7b26"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".quit"}),(0,s.jsx)(e.td,{children:"\u9000\u51fa"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".read FILENAME"}),(0,s.jsx)(e.td,{children:"\u6267\u884c FILENAME \u4e2d\u7684 SQL"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".restore ?DB? FILE"}),(0,s.jsx)(e.td,{children:'\u6062\u590d DB(\u9ed8\u8ba4 "main") \u7684\u5185\u5bb9\u5230 FILE'}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".save FILE"}),(0,s.jsx)(e.td,{children:"\u5c06\u5185\u5b58\u6570\u636e\u5e93\u5199\u5165\u5230 FILE"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".scanstats ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"\u6253\u5f00\u6216\u5173\u95ed sqlite3_stmt_scanstatus() \u76d1\u6d4b"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".schema ?TABLE?"}),(0,s.jsxs)(e.td,{children:["\u663e\u793a CREATE \u8bed\u53e5",(0,s.jsx)(e.br,{}),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u663e\u793a\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."]}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".separator COL ?ROW?"}),(0,s.jsx)(e.td,{children:"\u4fee\u6539\u5217\u548c\u884c\u7684\u5206\u9694\u7b26,\u4f1a\u5f71\u54cd\u8f93\u51fa\u548c .import"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".shell CMD ARGS..."}),(0,s.jsx)(e.td,{children:"\u5728\u7cfb\u7edf shell \u4e2d\u6267\u884c CMD ARGS..."}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".show"}),(0,s.jsx)(e.td,{children:"\u663e\u793a\u5f53\u524d\u7684\u5404\u79cd\u8bbe\u7f6e"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".stats ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"\u7edf\u8ba1\u5f00\u5173"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".system CMD ARGS..."}),(0,s.jsx)(e.td,{children:"\u5728\u7cfb\u7edf shell \u4e2d\u6267\u884c CMD ARGS..."}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".tables ?TABLE?"}),(0,s.jsxs)(e.td,{children:["\u663e\u793a\u8868\u540d",(0,s.jsx)(e.br,{}),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u663e\u793a\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."]}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".timeout MS"}),(0,s.jsx)(e.td,{children:"\u6253\u5f00\u88ab\u9501\u8868\u7684\u8d85\u65f6\u65f6\u95f4"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".timer ",(0,s.jsx)(e.code,{children:"on|off"})]}),(0,s.jsx)(e.td,{children:"SQL \u8ba1\u65f6\u5668\u5f00\u5173"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsxs)(e.td,{children:[".trace ",(0,s.jsx)(e.code,{children:"FILE|off"})]}),(0,s.jsx)(e.td,{children:"\u8f93\u51fa\u6bcf\u4e2a SQL \u8bed\u53e5"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".vfsname ?AUX?"}),(0,s.jsx)(e.td,{children:"\u8f93\u51fa VFS \u6808"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:".width NUM1 NUM2 ..."}),(0,s.jsx)(e.td,{children:'\u8bbe\u7f6e "column" \u6a21\u5f0f\u7684\u5bbd\u5ea6,\u8d1f\u503c\u4e3a\u53f3\u5bf9\u9f50'}),(0,s.jsx)(e.td,{})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"deeper",children:"Deeper"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://dzone.com/articles/how-sqlite-database-works",children:"https://dzone.com/articles/how-sqlite-database-works"})}),"\n",(0,s.jsx)(e.h2,{id:"node",children:"Node"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# pre gyp \u9ed8\u8ba4\u4ece s3 \u4e0b\u8f7d - \u53ef\u6307\u5b9a\u955c\u50cf\nyarn add sqlite3 --sqlite3_binary_host_mirror=https://npm.taobao.org/mirrors/sqlite3/\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"// \u83b7\u53d6\u7248\u672c\nconst db = new Database(':memory:');\ndb.serialize(() => {\n  db.each('select sqlite_version() as version', (err, row) => {\n    console.log(`sqlite version ${row.version}`);\n  });\n});\ndb.close();\n"})}),"\n",(0,s.jsx)(e.h2,{id:"java",children:"Java"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["xerial sqlite-jdbc ",(0,s.jsx)(e.a,{href:"https://github.com/xerial/sqlite-jdbc/blob/master/Usage.md",children:"Usage"})]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"udf",children:"UDF"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"http://www.sqlite.org/c3ref/create_function.html",children:"Create Or Redefine SQL Functions"})}),"\n",(0,s.jsxs)(e.li,{children:["PHP \u652f\u6301 ",(0,s.jsx)(e.a,{href:"https://www.php.net/manual/en/sqlite3.createfunction.php",children:"SQLite3::createFunction"})]}),"\n",(0,s.jsxs)(e.li,{children:["Java Xerial \u652f\u6301 ",(0,s.jsx)(e.a,{href:"https://www.javadoc.io/doc/org.xerial/sqlite-jdbc/3.30.1/org/sqlite/Function.html",children:"org.sqlite.Function"})]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/mapbox/node-sqlite3/issues/140",children:"mapbox/node-sqlite3#140"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"build",children:"Build"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://sqlite.org/howtocompile.html",children:"How To Compile SQLite"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://sqlite.org/amalgamation.html",children:"amalgamation"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5408\u5e76\u540e\u7684 sqlite \u6e90\u7801"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://github.com/sqlite/sqlite",children:"sqlite/sqlite"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"mirror"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/chronology.html",children:"chronology"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7248\u672c\u5386\u53f2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u4f9d\u8d56"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["pthread - \u591a\u7ebf\u7a0b\u652f\u6301\uff0c\u53ef\u5173\u95ed ",(0,s.jsx)(e.code,{children:"SQLITE_THREADSAFE=0"})]}),"\n",(0,s.jsxs)(e.li,{children:["dl - \u6269\u5c55\u6a21\u5757\u652f\u6301\uff0c\u53ef\u5173\u95ed ",(0,s.jsx)(e.code,{children:"-DSQLITE_OMIT_LOAD_EXTENSION"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# http://www.sqlite.org/\u5e74/sqlite-amalgamation-\u7248\u672c\u53f7.zip\n# 2013-04-12\t3.7.16.2\ncurl -O http://www.sqlite.org/2013/sqlite-amalgamation-3071602.zip\n\n# \u6b63\u5e38\u7f16\u8bd1\ngcc shell.c sqlite3.c -lpthread -ldl -lm\n# \u5355\u7ebf\u7a0b - sqlite shell \u4e0d\u9700\u8981\u7ebf\u7a0b\u652f\u6301\ngcc -DSQLITE_THREADSAFE=0 shell.c sqlite3.c -ldl -lm\n# \u5355\u7ebf\u7a0b \u65e0\u6269\u5c55\ngcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION shell.c sqlite3.c\n# \u5355\u7ebf\u7a0b \u65e0\u6269\u5c55 \u9759\u6001 - \u65b9\u4fbf\u79fb\u690d\ngcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION -static shell.c sqlite3.c\n\n# \u4ea4\u53c9\u7f16\u8bd1\n# arm-none \u65e0\u6cd5\u7f16\u8bd1 - \u7f3a\u5c11 stdlib.h, stdlb.h\narm-none-eabi-gcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION -static shell.c sqlite3.c\n"})}),"\n",(0,s.jsx)(e.h2,{id:"dev",children:"DEV"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://zetcode.com/db/sqlitec/",children:"SQLite C tutorial"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"pragma",children:"pragma"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"PRAGMA pragma_list;     -- \u67e5\u770b\u6240\u6709\u5c5e\u6027\nPRAGMA compile_options; -- \u7f16\u8bd1\u9009\u9879 https://www.sqlite.org/compile.html\nPRAGMA module_list;     -- \u6a21\u5757\u5217\u8868\nPRAGMA stats;           -- \u7edf\u8ba1\u65b0\u79c0\nPRAGMA freelist_count;  --\n\nPRAGMA database_list; -- \u6570\u636e\u5e93\nPRAGMA table_list;    -- \u8868\nPRAGMA function_list;\n\n-- PRAGMA table_info(table-name);\n-- PRAGMA table_xinfo(table-name);\n-- PRAGMA foreign_key_list(table-name);\n-- PRAGMA index_list(table-name);\n-- PRAGMA index_info(index-name);\n-- PRAGMA index_xinfo(index-name);\nPRAGMA table_info(sqlite_schema); -- \u8868\u4fe1\u606f\nPRAGMA table_xinfo(sqlite_schema);\n\nPRAGMA optimize;  -- \u6267\u884c\u4f18\u5316\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["synchronous\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["0 | OFF\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e0d\u8c03\u7528 fsync"}),"\n",(0,s.jsx)(e.li,{children:"\u5e94\u7528\u5d29\u6e83\u5b89\u5168\uff0c\u7cfb\u7edf\u5d29\u6e83\u4e0d\u5b89\u5168"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["1 | NORMAL\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"sync \u5c11\u4e8e FULL"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["2 | FULL\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"VFS xSync"}),"\n",(0,s.jsx)(e.li,{children:"\u975e WAL \u65f6\u4f7f\u7528"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["3 | EXTRA\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u540c\u6b65 rollback journal"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["journal_mode - \u63a7\u5236 ",(0,s.jsx)(e.code,{children:"-journal"})," \u6587\u4ef6\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"DELETE - \u4e8b\u52a1\u7ed3\u675f\u5220\u9664 rollback journal"}),"\n",(0,s.jsx)(e.li,{children:"TRUNCATE - \u4f7f\u7528 truncaate \u800c\u975e \u5220\u9664 - \u6709\u7684 fs \u4f1a\u66f4\u5feb"}),"\n",(0,s.jsxs)(e.li,{children:["PERSIST - \u4fdd\u7559 - \u518d\u6b21\u5199\u5165\u5c31\u884c\u8986\u76d6\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"journal_size_limit=SQLITE_DEFAULT_JOURNAL_SIZE_LIMIT=32K"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"MEMORY"}),"\n",(0,s.jsxs)(e.li,{children:["WAL - \u4f7f\u7528 WAL \u800c\u975e rollback journal\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u4ea7\u751f ",(0,s.jsx)(e.code,{children:"-shm"})," \u548c ",(0,s.jsx)(e.code,{children:"-wal"})," \u6587\u4ef6"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["OFF - \u7981\u7528 rollback journal\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6ca1\u6709 rollback \u80fd\u529b"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["wal_autocheckpoint=1000 - \u81ea\u52a8\u6267\u884c wal_checkpoint(PASSIVE)\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5f53 WAL N \u9875\u540e auto-checkpoint"}),"\n",(0,s.jsx)(e.li,{children:"\u63a7\u5236 -wal \u6587\u4ef6\u5927\u5c0f"}),"\n",(0,s.jsx)(e.li,{children:"\u8bbe\u7f6e\u4e3a <= 0 \u7981\u7528 - \u901a\u8fc7 wal_checkpoint \u624b\u52a8\u89e6\u53d1"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["wal_checkpoint(mode)\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"PASSIVE - \u9ed8\u8ba4 - \u4e0d\u7b49\u5f85 reader"}),"\n",(0,s.jsx)(e.li,{children:"FULL - \u963b\u585e\u8bfb"}),"\n",(0,s.jsx)(e.li,{children:"RESTART - \u540c FULL\uff0c\u4e14\u786e\u4fdd\u4e4b\u540e\u8bfb\u4f1a RESTART log file"}),"\n",(0,s.jsx)(e.li,{children:"TRUNCATE - \u540c RESTART\uff0c\u4e14 truncate \u6587\u4ef6"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["locking_mode\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"NORMAL - \u9ed8\u8ba4"}),"\n",(0,s.jsx)(e.li,{children:"EXCLUSIVE"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["auto_vacuum - \u9700\u8981\u5728\u521b\u5efa\u8868\u4e4b\u524d\u6307\u5b9a\uff0c\u521b\u5efa\u8868\u4f1a\u6dfb\u52a0\u989d\u5916\u4fe1\u606f\u7528\u4e8e\u8ffd\u8e2a\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"0 | NONE - \u9ed8\u8ba4 - \u9700\u8981\u6267\u884c VACUUM \u6765\u56de\u6536\u7a7a\u95f4"}),"\n",(0,s.jsx)(e.li,{children:"1 | FULL - \u6bcf\u6b21 commit \u79fb\u52a8\u7a7a\u9875\u5230\u6587\u4ef6\u5c3e\u90e8\uff0c\u7136\u540e truncate - \u4f1a\u5bfc\u81f4\u6587\u4ef6\u788e\u7247\u5316"}),"\n",(0,s.jsxs)(e.li,{children:["2 | INCREMENTAL\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"incremental_vacuum=N"}),"\n",(0,s.jsx)(e.li,{children:"\u5f53 freelist \u8fbe\u5230\u7ed9\u5b9a\u7684 page \u540e\u5c31\u884c auto vaccum"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["temp_store - \u5b58\u50a8 temporary indices / tables \u903b\u8f91\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"0 | DEFAULT"}),"\n",(0,s.jsx)(e.li,{children:"1 | FILE"}),"\n",(0,s.jsx)(e.li,{children:"2 | MEMORY;"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"automatic_index=true - SQLite \u4f1a\u57fa\u4e8e\u67e5\u8be2\u81ea\u52a8\u521b\u5efa\u7d22\u5f15\u4f18\u5316\u540e\u7eed\u67e5\u8be2"}),"\n",(0,s.jsxs)(e.li,{children:["page_size=4096 - \u8303\u56f4 512 - 65536\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4fee\u6539\u9700\u8981 vacuum \u624d\u80fd\u751f\u6548"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"max_page_count"}),"\n",(0,s.jsx)(e.li,{children:"page_count - \u5f53\u524d\u7684\u9875\u6570"}),"\n",(0,s.jsxs)(e.li,{children:["mmap_size=0 - ",(0,s.jsx)(e.a,{href:"https://sqlite.org/mmap.html",children:"https://sqlite.org/mmap.html"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e0d\u4e00\u5b9a\u4f1a\u63d0\u5347\u6027\u80fd"}),"\n",(0,s.jsx)(e.li,{children:"0 \u7981\u7528"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cache_size=2000\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"2000 -> 2000xpage_size -> 2000x4k=8M"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"foreign_key_check - \u662f\u5426\u6821\u9a8c\u5916\u952e\u7ea6\u675f"}),"\n",(0,s.jsx)(e.li,{children:"ignore_check_constraints"}),"\n",(0,s.jsx)(e.li,{children:"encoding=UTF-8"}),"\n",(0,s.jsx)(e.li,{children:"query_only - \u53ea\u8bfb\u6a21\u5f0f"}),"\n",(0,s.jsxs)(e.li,{children:["quick_check\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6bd4 integrity_check \u5c11\u68c0\u67e5 unique"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"read_uncommitted"}),"\n",(0,s.jsx)(e.li,{children:"recursive_triggers"}),"\n",(0,s.jsx)(e.li,{children:"reverse_unordered_selects"}),"\n",(0,s.jsxs)(e.li,{children:["secure_delete\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5f00\u542f\u540e\u5220\u9664\u4f1a\u7f6e 0"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"schema_version - int32 at offset 40 - schema cookie"}),"\n",(0,s.jsx)(e.li,{children:"writable_schema"}),"\n",(0,s.jsx)(e.li,{children:"shrink_memory - \u91ca\u653e\u5185\u5b58"}),"\n",(0,s.jsxs)(e.li,{children:["\u989d\u5916\u4fe1\u606f\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"user_version - int32 at offset 60"}),"\n",(0,s.jsxs)(e.li,{children:["application_id - int32 at offset 68\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u90e8\u5206\u5df2\u77e5 id - ",(0,s.jsx)(e.a,{href:"https://www.sqlite.org/src/artifact?ci=trunk&filename=magic.txt",children:"https://www.sqlite.org/src/artifact?ci=trunk&filename=magic.txt"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/pragma.html",children:"https://www.sqlite.org/pragma.html"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \u4fee\u6539 page_size\npragma page_count;\npragma page_size 65536;\nvacuum;\npragma page_count;\n"})}),"\n",(0,s.jsx)(e.h2,{id:"sqlite_stat1",children:"sqlite_stat1"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://www.sqlite.org/lang_analyze.html",children:"https://www.sqlite.org/lang_analyze.html"}),"\nANALYZE \u4f1a\u751f\u6210\u7edf\u8ba1\u4fe1\u606f\u8868"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://www.sqlite.org/fileformat2.html#stat1tab",children:"stat1tab"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"sqlite_stat1 \u53ef\u66f4\u65b0\u6216\u5220\u9664\uff0c\u4e0d\u53ef alter \u6216\u521b\u5efa"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE sqlite_stat1(tbl,idx,stat);\n-- v3.6.18 2009-09-11\nCREATE TABLE sqlite_stat2(tbl,idx,sampleno,sample);\n-- v3.7.9 - 2011-11-01\nCREATE TABLE sqlite_stat3(tbl,idx,nEq,nLt,nDLt,sample);\n-- v3.8.1 - 2013-10-17\nCREATE TABLE sqlite_stat4(tbl,idx,nEq,nLt,nDLt,sample);\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"tbl - \u8868\u540d"}),"\n",(0,s.jsx)(e.li,{children:"idx - \u7d22\u5f15"}),"\n",(0,s.jsx)(e.li,{children:"sample - \u91c7\u6837\u6570\u636e - BLOB"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"wal",children:"WAL"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u4f18\u70b9\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5927\u591a\u60c5\u51b5\u90fd\u4f1a\u66f4\u5feb"}),"\n",(0,s.jsx)(e.li,{children:"\u8bfb \u4e0d\u963b\u585e \u5199\uff0c\u5199 \u4e0d\u963b\u585e \u8bfb"}),"\n",(0,s.jsx)(e.li,{children:"\u5927\u591a\u4e3a\u987a\u5e8f IO"}),"\n",(0,s.jsx)(e.li,{children:"\u66f4\u5c11 fsync"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u7f3a\u70b9\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u57fa\u4e8e\u5171\u4eab\u5185\u5b58 - \u4e0d\u80fd\u5728 NFS \u8fd9\u79cd\u8de8\u8282\u70b9 FS \u4f7f\u7528"}),"\n",(0,s.jsx)(e.li,{children:"\u8fdb\u5165 WAL \u540e\u4e0d\u53ef\u4ee5\u4fee\u6539 page_size"}),"\n",(0,s.jsx)(e.li,{children:"\u4ea7\u751f\u989d\u5916\u7684 -wal, -shm \u6587\u4ef6"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/wal.html",children:"https://www.sqlite.org/wal.html"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"syntax",children:"syntax"}),"\n",(0,s.jsx)(e.h3,{id:"attach",children:"attach"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"attach expr as name;\ndetach name;\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/lang_attach.html",children:"https://www.sqlite.org/lang_attach.html"})}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"json",children:"json"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/json1.html",children:"https://www.sqlite.org/json1.html"})}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"upsert",children:"upsert"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/lang_UPSERT.html",children:"https://www.sqlite.org/lang_UPSERT.html"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"format",children:"format"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["page\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"lock-byte"}),"\n",(0,s.jsxs)(e.li,{children:["freelist - \u4e0d\u6d3b\u8dc3\u7684\u9875 - linked list \u5f62\u5f0f\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"freelist trunk"}),"\n",(0,s.jsx)(e.li,{children:"freelist leaf"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["b-tree\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"table b-tree interior"}),"\n",(0,s.jsx)(e.li,{children:"table b-tree leaf"}),"\n",(0,s.jsx)(e.li,{children:"tindex b-tree interior"}),"\n",(0,s.jsx)(e.li,{children:"tindex b-tree leaf"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"payload overflow"}),"\n",(0,s.jsx)(e.li,{children:"pointer map"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["-journal - \u56de\u6eda\u65e5\u5fd7\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"page number in db"}),"\n",(0,s.jsx)(e.li,{children:"\u539f\u59cb page \u5185\u5bb9"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["-wal\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"checkpoint \u5e8f\u5217\u53f7"}),"\n",(0,s.jsx)(e.li,{children:"frames - 24-byte header+page"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"-shm - wal-index"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/fileformat2.html",children:"https://www.sqlite.org/fileformat2.html"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"vacuum",children:"vacuum"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u91cd\u5efa\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u91ca\u653e\u4e0d\u9700\u8981\u7684\u78c1\u76d8\u7a7a\u95f4"}),"\n",(0,s.jsx)(e.li,{children:"VACUUM INTO \u7c7b\u4f3c backup\uff0c\u4e14\u751f\u6210\u7684 db \u662f VACUUM \u540e\u7684"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- VACUUM [schema] [INFO filename];\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/lang_vacuum.html",children:"https://www.sqlite.org/lang_vacuum.html"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"query",children:"query"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/queryplanner.html",children:"Query Planning"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/lang_explain.html",children:"https://www.sqlite.org/lang_explain.html"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/eqp.html",children:"https://www.sqlite.org/eqp.html"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.sqlite.org/optoverview.html",children:"Query Optimizer Overview"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"versions",children:"Versions"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["SQLite v3.38.0 - 2022-02-22\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u9ed8\u8ba4\u5305\u542b json"}),"\n",(0,s.jsxs)(e.li,{children:["json ",(0,s.jsx)(e.code,{children:"->"}),", ",(0,s.jsx)(e.code,{children:"->>"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.37.2\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"-DSQLITE_ENABLE_JSON1 - json1"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.37.0 - 2021-11-27\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"STRICT Tables"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.23.0 - 2018-04-02\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8bc6\u522b TRUE, FALSE -> 1, 0"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.12.0 - 2016-03-29\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"page_size 1024 -> 4096"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.8.2 - 2013-12-06\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"WITHOUT ROWID"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.8.0 - 2013-08-26\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u90e8\u5206\u7d22\u5f15"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.7.17 - 2013-05-20\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"mmap"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["SQLite v3.7.0 - 2010-07-21\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"WAL"}),"\n"]}),"\n"]}),"\n"]})]})}function j(n={}){const{wrapper:e}={...(0,i.M)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(x,{...n})}):x(n)}},38088:(n,e,l)=>{var s=l(96651),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,t=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,l){var s,r={},h=null,x=null;for(s in void 0!==l&&(h=""+l),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(x=e.ref),e)d.call(e,s)&&!c.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps)void 0===r[s]&&(r[s]=e[s]);return{$$typeof:i,type:n,key:h,ref:x,props:r,_owner:t.current}}e.Fragment=r,e.jsx=h,e.jsxs=h},2488:(n,e,l)=>{n.exports=l(38088)},62780:(n,e,l)=>{l.d(e,{I:()=>t,M:()=>d});var s=l(96651);const i={},r=s.createContext(i);function d(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);