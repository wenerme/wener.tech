"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[82796],{49613:function(t,e,a){a.d(e,{Zo:function(){return N},kt:function(){return s}});var l=a(59496);function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,l)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e){if(null==t)return{};var a,l,n=function(t,e){if(null==t)return{};var a,l,n={},r=Object.keys(t);for(l=0;l<r.length;l++)a=r[l],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(l=0;l<r.length;l++)a=r[l],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var m=l.createContext({}),u=function(t){var e=l.useContext(m),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},N=function(t){var e=u(t.components);return l.createElement(m.Provider,{value:e},t.children)},k={inlineCode:"code",wrapper:function(t){var e=t.children;return l.createElement(l.Fragment,{},e)}},o=l.forwardRef((function(t,e){var a=t.components,n=t.mdxType,r=t.originalType,m=t.parentName,N=p(t,["components","mdxType","originalType","parentName"]),o=u(a),s=n,d=o["".concat(m,".").concat(s)]||o[s]||k[s]||r;return a?l.createElement(d,i(i({ref:e},N),{},{components:a})):l.createElement(d,i({ref:e},N))}));function s(t,e){var a=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var r=a.length,i=new Array(r);i[0]=o;var p={};for(var m in e)hasOwnProperty.call(e,m)&&(p[m]=e[m]);p.originalType=t,p.mdxType="string"==typeof t?t:n,i[1]=p;for(var u=2;u<r;u++)i[u]=a[u];return l.createElement.apply(null,i)}return l.createElement.apply(null,a)}o.displayName="MDXCreateElement"},68270:function(t,e,a){a.r(e),a.d(e,{assets:function(){return c},contentTitle:function(){return s},default:function(){return E},frontMatter:function(){return o},metadata:function(){return d},toc:function(){return g}});var l=a(49613),n=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,N=(t,e,a)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,k=(t,e)=>{for(var a in e||(e={}))m.call(e,a)&&N(t,a,e[a]);if(p)for(var a of p(e))u.call(e,a)&&N(t,a,e[a]);return t};const o={title:"SQLite"},s="SQLite",d={unversionedId:"db/relational/sqlite",id:"db/relational/sqlite",title:"SQLite",description:"- \u6570\u636e\u7c7b\u578b",source:"@site/../notes/db/relational/sqlite.md",sourceDirName:"db/relational",slug:"/db/relational/sqlite",permalink:"/notes/db/relational/sqlite",draft:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/sqlite.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1653992153,formattedLastUpdatedAt:"May 31, 2022",frontMatter:{title:"SQLite"},sidebar:"docs",previous:{title:"SQLite FAQ",permalink:"/notes/db/relational/sqlite-faq"},next:{title:"TiDB",permalink:"/notes/db/relational/tidb"}},c={},g=[{value:"\u6570\u636e\u64cd\u4f5c",id:"\u6570\u636e\u64cd\u4f5c",level:2},{value:"\u5bfc\u5165 csv",id:"\u5bfc\u5165-csv",level:3},{value:"\u5bfc\u51fa csv",id:"\u5bfc\u51fa-csv",level:3},{value:"csv \u865a\u62df\u8868",id:"csv-\u865a\u62df\u8868",level:2},{value:"DateTime",id:"datetime",level:2},{value:"Notes",id:"notes",level:2},{value:".help",id:"help",level:2},{value:"Deeper",id:"deeper",level:2},{value:"Node",id:"node",level:2},{value:"Java",id:"java",level:2},{value:"UDF",id:"udf",level:2},{value:"Build",id:"build",level:2},{value:"DEV",id:"dev",level:2},{value:"pragma",id:"pragma",level:2},{value:"sqlite_stat1",id:"sqlite_stat1",level:2},{value:"WAL",id:"wal",level:2},{value:"syntax",id:"syntax",level:2},{value:"attach",id:"attach",level:3},{value:"json",id:"json",level:3},{value:"upsert",id:"upsert",level:3},{value:"format",id:"format",level:2},{value:"vacuum",id:"vacuum",level:2},{value:"query",id:"query",level:2},{value:"Versions",id:"versions",level:2}],h={toc:g};function E(t){var e,a=t,{components:n}=a,N=((t,e)=>{var a={};for(var l in t)m.call(t,l)&&e.indexOf(l)<0&&(a[l]=t[l]);if(null!=t&&p)for(var l of p(t))e.indexOf(l)<0&&u.call(t,l)&&(a[l]=t[l]);return a})(a,["components"]);return(0,l.kt)("wrapper",(e=k(k({},h),N),r(e,i({components:n,mdxType:"MDXLayout"}))),(0,l.kt)("h1",k({},{id:"sqlite"}),"SQLite"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"http://sqlite.org/datatype3.html"}),"\u6570\u636e\u7c7b\u578b"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5b58\u50a8\u7c7b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"NULL"),(0,l.kt)("li",{parentName:"ul"},"INTEGER - 0, 1, 2, 3, 4, 6, 8 bytes - \u5185\u5b58\u4e2d\u90fd\u4e3a int64"),(0,l.kt)("li",{parentName:"ul"},"REAL - 8 byte"),(0,l.kt)("li",{parentName:"ul"},"TEXT - UTF-8, UTF-16BE, UTF-16LE"),(0,l.kt)("li",{parentName:"ul"},"BLOB"))),(0,l.kt)("li",{parentName:"ul"},"BOOLEAN -> 0,1"),(0,l.kt)("li",{parentName:"ul"},"DATETIME -> TEXT ISO8601, REAL, INTEGER Unix Timestamp"),(0,l.kt)("li",{parentName:"ul"},"\u7c7b\u578b\u4eb2\u548c - \u7c7b\u578b\u4e4b\u95f4\u4f1a\u8fdb\u884c\u5185\u90e8\u8f6c\u6362",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"INT,INTEGER,TINYINT,SMALLINT,MEDIUMINT,BIGINT,UNSIGNED BIG INT, INT2, INT8 -> INTEGER"),(0,l.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u7c7b\u4f3c"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://sqlite.org/stricttables.html"}),"STRICT Tables"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"CREATE TABLE t1(a ANY) STRICT;")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"PRAGMA strict=ON;")),(0,l.kt)("li",{parentName:"ul"},"\u5f3a\u5236\u7c7b\u578b - INT, INTEGER, REAL, TEXT, BLOB, ANY"),(0,l.kt)("li",{parentName:"ul"},"ANY \u548c\u65e7\u7684\u7c7b\u578b\u7c7b\u4f3c"),(0,l.kt)("li",{parentName:"ul"},"PRAGMA integrity_check, quick_check \u53ef\u68c0\u6d4b\u7c7b\u578b"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u4f1a\u63d0\u5347\u6027\u80fd - \u8fd0\u884c\u65f6\u68c0\u6d4b\uff0c\u5bf9\u5b58\u50a8\u65e0\u5f71\u54cd\uff0c\u6838\u5fc3\u6027\u80fd\u5728\u4e8e IO"))),(0,l.kt)("li",{parentName:"ul"},"ROWID - int64",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"rowid, oid, ",(0,l.kt)("inlineCode",{parentName:"li"},"_rowid_")),(0,l.kt)("li",{parentName:"ul"},"\u5efa\u8868\u65f6\u53ef WITHOUT ROWID"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u8868\u4f7f\u7528 INT \u4f5c\u4e3a pkey\uff0c\u5219\u8be5\u5217\u4f1a\u88ab\u7528\u4e8e rowid",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"CREATE TABLE t(x INTEGER PRIMARY KEY ASC, y, z);")))),(0,l.kt)("li",{parentName:"ul"},"btree \u7684 key"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7 rowid \u641c\u7d22\u548c\u6392\u5e8f\u662f\u666e\u901a PRIMARY KEY \u7684\u4e24\u500d\u901f\u5ea6"))),(0,l.kt)("li",{parentName:"ul"},"\u8bed\u6cd5",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/lang_expr.html"}),"expr")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/pragma.html"}),"pragma")))),(0,l.kt)("li",{parentName:"ul"},"\u9650\u5236",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u53ef\u4ee5 ALTER COLUMN - \u53ea\u80fd rename table/column \u5f62\u5f0f\u53bb\u53d8\u66f4",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u53ef\u4ee5\u79fb\u9664 UNIQUE - \u63a8\u8350\u4f7f\u7528 UNIQUE INDEX - \u53ef\u4ee5\u88ab drop"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://sqlite.org/lang_altertable.html"}),"altertable"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"ALTER TABLE DROP COLUMN \u4e0d\u652f\u6301\u88ab\u5f15\u7528\u7684\u5217",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"PRIMARY KEY, UNIQUE, \u7d22\u5f15\u5217, \u5305\u542b\u5728\u90e8\u5206\u7d22\u5f15, \u5305\u542b\u5728 CHECK, \u5916\u952e, \u88ab\u7528\u4e8e\u751f\u6210\u5217, \u7528\u4e8e trigger \u548c view"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/limits.html"}),"Limits In SQLite"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_LENGTH=1,000,000,000 - 1G - text,blob \u6700\u5927\u957f\u5ea6"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_COLUMN=2000 - \u5217"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_SQL_LENGTH=1G - sql \u6700\u5927\u957f\u5ea6 - \u4f7f\u7528 prepare \u907f\u514d\u957f sql"),(0,l.kt)("li",{parentName:"ul"},"JOIN \u6700\u591a 64 \u4e2a\u8868"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_EXPR_DEPTH=1000"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_FUNCTION_ARG=127"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_COMPOUND_SELECT=500"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_LIKE_PATTERN_LENGTH=50000"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_VARIABLE_NUMBER=999 - v3.32.0 32766"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_TRIGGER_DEPTH=1000"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_ATTACHED=10"),(0,l.kt)("li",{parentName:"ul"},"SQLITE_MAX_PAGE_COUNT=1073741823 - 1Gi - PRAGMA max_page_count"),(0,l.kt)("li",{parentName:"ul"},"281TB \u5e93"),(0,l.kt)("li",{parentName:"ul"},"2^64 \u884c"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/c3ref/c_limit_attached.htm"}),"c_limit_attached")))),(0,l.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://sqlite.org/fiddle/"}),"https://sqlite.org/fiddle/")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://github.com/jlongster/absurd-sql"}),"https://github.com/jlongster/absurd-sql"))))),(0,l.kt)("admonition",k({},{type:"caution"}),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},"SQLite \u7684\u7c7b\u578b\u662f\u52a8\u6001\u7684 - \u4e0d\u5f3a\u5236 - \u65b0\u7248\u672c\u652f\u6301\u4e25\u683c\u7c7b\u578b"),(0,l.kt)("li",{parentName:"ul"},"SQLite \u7684\u6838\u5fc3\u9650\u5236\u662f\u5e76\u53d1\u5199\u5165\u6027\u80fd - \u5982\u679c\u9700\u8981\u5e76\u53d1\u5199\u5165\uff0c\u4e0d\u5efa\u8bae\u7528 SQLite"),(0,l.kt)("li",{parentName:"ul"},"DATETIME \u4e0d\u4f1a\u5b58\u50a8\u6beb\u79d2"),(0,l.kt)("li",{parentName:"ul"},"\u6ca1\u6709 Base64 \u51fd\u6570"),(0,l.kt)("li",{parentName:"ul"},"BLOB \u4f5c\u4e3a\u4e8c\u8fdb\u5236\u5b58\u50a8\u90e8\u5206\u8bed\u8a00\u7684 Driver \u652f\u6301\u4e0d\u592a\u597d"))),(0,l.kt)("admonition",k({},{type:"tip"}),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u6700\u591a 999 \u4e2a\u53d8\u91cf"),(0,l.kt)("li",{parentName:"ul"},"WAL \u6a21\u5f0f\u53ef\u63d0\u5347 \u5355\u5199\u591a\u8bfb \u6027\u80fd - ",(0,l.kt)("inlineCode",{parentName:"li"},"PRAGMA journal_mode=WAL")),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u914d\u5408 zfs \u8fdb\u884c\u538b\u7f29 - \u6ce8\u610f\u4f7f\u7528\u76f8\u540c\u7684 page size",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"page_size \u4e00\u822c 4096, cache_size \u4e00\u822c -2000 \u5373 2000 kb"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"PRAGMA schema.page_size"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"PRAGMA schema.cache_size")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.mail-archive.com/sqlite-users@mailinglists.sqlite.org/msg114729.html"}),"compressed sqlite3 database file?")))),(0,l.kt)("li",{parentName:"ul"},"vacuum \u662f\u5148\u5199\u5165\u4e34\u65f6\u6587\u4ef6\uff0c\u7136\u540e\u66ff\u6362 - \u9700\u8981\u5f88\u5927\u7a7a\u95f4"))),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-bash"}),'# macOS \u5b89\u88c5\nbrew install sqlite3\n# \u56e0\u4e3a\u7cfb\u7edf\u81ea\u5e26 - \u6240\u4ee5\u9ed8\u8ba4\u4e0d\u4f1a\u6dfb\u52a0\u5230 PATH\n$(brew --prefix sqlite3)/bin/sqlite3\n# \u6dfb\u52a0\u5b89\u88c5\u7684 sqlite3 \u5230 PATH\nexport PATH="/usr/local/opt/sqlite/bin:$PATH"\n')),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"-- \u65e5\u671f\u51fd\u6570\n-- https://sqlite.org/lang_datefunc.html\n-- \u8f6c\u6362\u65f6\u95f4\u6233\nselect datetime( 1323648000, 'unixepoch' );\n-- \u83b7\u53d6\u65f6\u95f4\u6233, \u5e26\u6beb\u79d2\nSELECT CAST((julianday('now') - 2440587.5) * 86400000 AS INTEGER);\n-- \u9ed8\u8ba4\u503c\u5e26\u6beb\u79d2\nCREATE TABLE IF NOT EXISTS event\n(\n  create_at DATETIME DEFAULT (STRFTIME('%Y-%m-%d %H:%M:%f', 'NOW'))\n);\n\n-- \u9644\u52a0\u5176\u4ed6\u6587\u4ef6\u5230\u6570\u636e\u5e93\nATTACH 'cache.db' AS cache;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"-- \u6240\u6709\u8868\n.tables\n-- \u663e\u793a create \u8868\n.schema urls\n")),(0,l.kt)("h2",k({},{id:"\u6570\u636e\u64cd\u4f5c"}),"\u6570\u636e\u64cd\u4f5c"),(0,l.kt)("h3",k({},{id:"\u5bfc\u5165-csv"}),"\u5bfc\u5165 csv"),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"-- \u53ef\u4ee5\u4e0d\u7528\u521b\u5efa\ncreate table foo(a, b);\n.mode csv\n.import test.csv foo\n")),(0,l.kt)("h3",k({},{id:"\u5bfc\u51fa-csv"}),"\u5bfc\u51fa csv"),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),".output data.csv\nselect * from foo;\n")),(0,l.kt)("h2",k({},{id:"csv-\u865a\u62df\u8868"}),"csv \u865a\u62df\u8868"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/csv.html"}),"https://www.sqlite.org/csv.html"))),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"-- \u52a0\u8f7d\u6269\u5c55\n.load ./csv\n\nCREATE VIRTUAL TABLE temp.t1 USING csv(filename='thefile.csv');\nSELECT * FROM t1;\n")),(0,l.kt)("h2",k({},{id:"datetime"}),"DateTime"),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"-- epoch to datetime\nselect datetime(1580000000,'unixepoch');\n-- \u6dfb\u52a0\u65f6\u533a\nselect datetime(1580000000,'unixepoch','localtime');\n-- datetime to epoch\nselect strftime('%s', datetime(1580000000,'unixepoch','localtime'));\n-- \u5f53\u524d epoch\nselect strftime('%s', 'now');\n")),(0,l.kt)("h2",k({},{id:"notes"}),"Notes"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u90e8\u5206\u7d22\u5f15",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/partialindex.html"}),"https://www.sqlite.org/partialindex.html"))))),(0,l.kt)("p",null,(0,l.kt)("a",k({parentName:"p"},{href:"https://www.sqlite.org/optoverview.html"}),"The SQLite Query Optimizer Overview")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"WHERE \u6761\u4ef6\u5206\u6790",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7d22\u5f15\u9009\u62e9"))),(0,l.kt)("li",{parentName:"ul"},"BETWEEN \u4f18\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8f6c\u6362\u4e3a >= <="),(0,l.kt)("li",{parentName:"ul"},"\u4e0e\u7d22\u5f15\u5224\u65ad"))),(0,l.kt)("li",{parentName:"ul"},"OR \u4f18\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u76f8\u540c\u5217\u8bed\u610f\u4e0a\u53ef\u8f6c\u6362\u4e3a IN"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u540c\u5217 OR \u9700\u8981\u6309 Cost \u9009\u62e9"))),(0,l.kt)("li",{parentName:"ul"},"LIKE \u4f18\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u524d\u7f00\u7d22\u5f15"))),(0,l.kt)("li",{parentName:"ul"},"Skip-Scan \u4f18\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6761\u4ef6\u4e0d\u4ee5\u7d22\u5f15\u6700\u5de6\u5217\u5f00\u59cb"),(0,l.kt)("li",{parentName:"ul"},"\u5c1d\u8bd5\u9650\u5b9a\u6700\u5de6\u5217\u6761\u4ef6\u6765\u5229\u7528\u7d22\u5f15"),(0,l.kt)("li",{parentName:"ul"},"\u4f8b\u5982\u5f53\u6700\u5de6\u5217\u53ea\u6709\u56fa\u5b9a\u51e0\u4e2a\u503c\u7684\u65f6\u5019"))),(0,l.kt)("li",{parentName:"ul"},"JOIN",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"JOIN \u91cd\u6392\u5e8f"),(0,l.kt)("li",{parentName:"ul"},"\u57fa\u4e8e SQLITE_STAT \u9009\u62e9\u987a\u5e8f"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7 CROSS JOIN \u63a7\u5236\u67e5\u8be2"))),(0,l.kt)("li",{parentName:"ul"},"\u591a\u4e2a\u7d22\u5f15\u7684\u9009\u62e9",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u57fa\u4e8e\u7edf\u8ba1"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"+a = 4")," \u7684\u65b9\u5f0f\u6765\u6697\u793a\u4e0d\u5b9e\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"a")," \u7684\u7d22\u5f15"),(0,l.kt)("li",{parentName:"ul"},"\u8303\u56f4\u67e5\u8be2"))),(0,l.kt)("li",{parentName:"ul"},"\u8986\u76d6\u7d22\u5f15",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5168\u8868\u626b\u63cf\u65f6\u9009\u62e9\u5305\u542b rowid \u7684\u7d22\u5f15"))),(0,l.kt)("li",{parentName:"ul"},"ORDER BY \u4f18\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5c1d\u8bd5\u4f7f\u7528\u7b26\u5408 ORDER BY \u8981\u6c42\u7684\u7d22\u5f15"))),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u7d22\u5f15\u8fdb\u884c\u90e8\u5206 ORDER BY",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5305\u542b\u591a\u4e2a ORDER BY \u65f6"))),(0,l.kt)("li",{parentName:"ul"},"\u62c9\u5e73\u5b50\u67e5\u8be2",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5c06\u5b50\u67e5\u8be2\u4f18\u5316\u4e3a JOIN"))),(0,l.kt)("li",{parentName:"ul"},"\u534f\u7a0b\u6267\u884c\u5b50\u67e5\u8be2",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u90e8\u5206\u5b50\u67e5\u8be2\u53ef\u4ee5\u4e0e\u5f53\u524d\u67e5\u8be2\u5e76\u884c\u6267\u884c"))),(0,l.kt)("li",{parentName:"ul"},"MIN/MAX \u4f18\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5217\u662f\u67d0\u7d22\u5f15\u7684\u6700\u5de6\u5217\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15"))),(0,l.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u7d22\u5f15",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5f53\u67e5\u8be2\u6ca1\u6709\u7d22\u5f15\u65f6\uff0c\u53ef\u80fd\u4f1a\u5728\u8bed\u53e5\u6267\u884c\u671f\u95f4\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u7d22\u5f15 O(NlogN) \u5168\u8868\u626b\u63cf O(N)"))),(0,l.kt)("li",{parentName:"ul"},"\u4e0b\u63a8\u4f18\u5316/Push-Down Optimization",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u5b50\u67e5\u8be2\u65e0\u6cd5\u88ab\u5e73\u6574\u4e3a\u5916\u90e8\u67e5\u8be2\uff0c\u53ef\u5c1d\u8bd5\u5c06\u5916\u90e8\u67e5\u8be2\u7684\u6761\u4ef6\u4e0b\u63a8\u5230\u5b50\u67e5\u8be2\u4e2d\u3002"))),(0,l.kt)("li",{parentName:"ul"},"LEFT JOIN Strength Reduction Optimization",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6709\u65f6\u4e00\u4e2a LEFT JOIN \u53ef\u4ee5\u8f6c\u6362\u4e3a\u4e00\u4e2a\u666e\u901a\u7684 JOIN\uff0c\u53ea\u8981\u4e24\u8005\u7ed3\u679c\u76f8\u540c\u3002"),(0,l.kt)("li",{parentName:"ul"},"if any column in the right-hand table of the LEFT JOIN must be non-NULL in order for the WHERE clause to be true, then the LEFT JOIN is demoted to an ordinary JOIN."))),(0,l.kt)("li",{parentName:"ul"},"\u5ffd\u7565 LEFT JOIN",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6709\u65f6 LEFT JOIN \u53ef\u4ee5\u5b8c\u5168\u5457\u5ffd\u7565",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u98de\u805a\u5408\u67e5\u8be2"),(0,l.kt)("li",{parentName:"ul"},"DISTINC \u67e5\u8be2\u6216\u4f7f\u7528 ON/USING \u6765\u9650\u5236 JOIN \u53ea\u5339\u914d\u4e00\u5217"),(0,l.kt)("li",{parentName:"ul"},"LETF JOIN \u53f3\u8fb9\u8868\u7684\u5217\u672a\u5728\u5916\u90e8\u67e5\u8be2\u4f7f\u7528")))))),(0,l.kt)("p",null,(0,l.kt)("a",k({parentName:"p"},{href:"https://www.sqlite.org/queryplanner-ng.html"}),"The Next-Generation Query Planner")),(0,l.kt)("h2",k({},{id:"help"}),".help"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",k({parentName:"tr"},{align:null}),"\u6307\u4ee4"),(0,l.kt)("th",k({parentName:"tr"},{align:null}),"\u63cf\u8ff0"),(0,l.kt)("th",k({parentName:"tr"},{align:null}),"\u9ed8\u8ba4"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".backup ?DB? FILE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u5907\u4efd\u6570\u636e\u5e93(\u9ed8\u8ba4\u4e3a main)\u5230 FILE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".bail ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u9519\u8bef\u65f6\u505c\u6b62"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"OFF")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".binary ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4e8c\u8fdb\u5236\u8f93\u51fa"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"OFF")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".clone NEWDB"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u514b\u9686\u73b0\u6709\u7684\u6570\u636e\u5e93\u5230 NEWDB"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".databases"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4f8b\u4e3e\u6dfb\u52a0\u7684\u6570\u636e\u5e93\u540d\u548c\u6587\u4ef6"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".dbinfo ?DB?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a\u6570\u636e\u5e93\u72b6\u6001\u4fe1\u606f"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".dump ?TABLE? ..."),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4ee5 SQL \u7684\u5f62\u5f0f\u8f6c\u50a8\u6570\u636e\u5e93",(0,l.kt)("br",null),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u8f6c\u50a8\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".echo ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u547d\u4ee4\u56de\u663e"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".eqp ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u81ea\u52a8\u6267\u884c EXPLAIN QUERY PLAN"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".exit"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u9000\u51fa"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".explain ",(0,l.kt)("inlineCode",{parentName:"td"},"?on\\|off?")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4f7f\u7528\u9002\u5408 EXPLAIN \u7684\u8f93\u51fa\u6a21\u5f0f",(0,l.kt)("br",null),"\u5982\u679c\u672a\u6307\u5b9a\u53c2\u6570,\u5219\u4e3a\u6253\u5f00"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".fullschema"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a sqlite_stat \u7684 schema \u548c\u5185\u5bb9"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".headers ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a\u5934"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".help"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a\u8be5\u4fe1\u606f"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".import FILE TABLE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u5bfc\u5165 FILE \u5185\u5bb9\u4e3a TABLE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".indexes ?TABLE?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a\u6240\u6709\u7d22\u5f15",(0,l.kt)("br",null),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u663e\u793a\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".limit ?LIMIT? ?VAL?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a\u6216\u66f4\u6539 SQLITE_LIMIT \u7684\u503c"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".log ",(0,l.kt)("inlineCode",{parentName:"td"},"FILE\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u65e5\u5fd7, FILE \u53ef\u4ee5\u4e3a stderr/stdout"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".mode MODE ?TABLE?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u8bbe\u7f6e\u8f93\u51fa\u6a21\u5f0f"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"ascii \u884c\u5217\u4f7f\u7528 0x1F \u548c 0x1E \u5206\u9694"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"csv \u9017\u53f7\u5206\u9694\u7684\u503c"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"column \u5de6\u5bf9\u9f50\u5217 (\u53c2\u89c1 .width)"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"html HTML ",(0,l.kt)("inlineCode",{parentName:"td"},"<table>")," \u4ee3\u7801"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"insert Insert \u8bed\u53e5 TABLE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"line \u6bcf\u884c\u53ea\u6709\u503c"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"list \u4f7f\u7528 .separator \u5206\u9694\u7684\u503c"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"tabs \u5236\u8868\u7b26\u5206\u5272\u7684\u503c"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),"-"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"tcl TCL list \u5143\u7d20"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".nullvalue STRING"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4f7f\u7528 STRING \u6765\u66ff\u4ee3 NULL \u503c"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".once FILENAME"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u8f93\u51fa\u4e0b\u4e00\u4e2a SQL \u6307\u4ee4\u5230 FILENAME"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".open ?FILENAME?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4fbf\u4e8e\u73b0\u6709\u6570\u636e\u5e93\u5e76\u6253\u5f00 FILENAME"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".output ?FILENAME?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u53d1\u9001\u8f93\u51fa\u5230 FILENAME \u6216 stdout"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".print STRING..."),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a STRING"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".prompt MAIN CONTINUE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4fee\u6539\u63d0\u793a\u7b26"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".quit"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u9000\u51fa"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".read FILENAME"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u6267\u884c FILENAME \u4e2d\u7684 SQL"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".restore ?DB? FILE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),'\u6062\u590d DB(\u9ed8\u8ba4 "main") \u7684\u5185\u5bb9\u5230 FILE'),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".save FILE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u5c06\u5185\u5b58\u6570\u636e\u5e93\u5199\u5165\u5230 FILE"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".scanstats ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u6253\u5f00\u6216\u5173\u95ed sqlite3_stmt_scanstatus() \u76d1\u6d4b"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".schema ?TABLE?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a CREATE \u8bed\u53e5",(0,l.kt)("br",null),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u663e\u793a\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".separator COL ?ROW?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u4fee\u6539\u5217\u548c\u884c\u7684\u5206\u9694\u7b26,\u4f1a\u5f71\u54cd\u8f93\u51fa\u548c .import"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".shell CMD ARGS..."),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u5728\u7cfb\u7edf shell \u4e2d\u6267\u884c CMD ARGS..."),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".show"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a\u5f53\u524d\u7684\u5404\u79cd\u8bbe\u7f6e"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".stats ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u7edf\u8ba1\u5f00\u5173"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".system CMD ARGS..."),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u5728\u7cfb\u7edf shell \u4e2d\u6267\u884c CMD ARGS..."),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".tables ?TABLE?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u663e\u793a\u8868\u540d",(0,l.kt)("br",null),"\u5982\u679c\u6307\u5b9a\u4e86\u8868,\u5219\u53ea\u663e\u793a\u5339\u914d LIKE \u6a21\u5f0f\u7684\u8868."),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".timeout MS"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u6253\u5f00\u88ab\u9501\u8868\u7684\u8d85\u65f6\u65f6\u95f4"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".timer ",(0,l.kt)("inlineCode",{parentName:"td"},"on\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"SQL \u8ba1\u65f6\u5668\u5f00\u5173"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".trace ",(0,l.kt)("inlineCode",{parentName:"td"},"FILE\\|off")),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u8f93\u51fa\u6bcf\u4e2a SQL \u8bed\u53e5"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".vfsname ?AUX?"),(0,l.kt)("td",k({parentName:"tr"},{align:null}),"\u8f93\u51fa VFS \u6808"),(0,l.kt)("td",k({parentName:"tr"},{align:null}))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",k({parentName:"tr"},{align:null}),".width NUM1 NUM2 ..."),(0,l.kt)("td",k({parentName:"tr"},{align:null}),'\u8bbe\u7f6e "column" \u6a21\u5f0f\u7684\u5bbd\u5ea6,\u8d1f\u503c\u4e3a\u53f3\u5bf9\u9f50'),(0,l.kt)("td",k({parentName:"tr"},{align:null}))))),(0,l.kt)("h2",k({},{id:"deeper"}),"Deeper"),(0,l.kt)("p",null,(0,l.kt)("a",k({parentName:"p"},{href:"https://dzone.com/articles/how-sqlite-database-works"}),"https://dzone.com/articles/how-sqlite-database-works")),(0,l.kt)("h2",k({},{id:"node"}),"Node"),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-bash"}),"# pre gyp \u9ed8\u8ba4\u4ece s3 \u4e0b\u8f7d - \u53ef\u6307\u5b9a\u955c\u50cf\nyarn add sqlite3 --sqlite3_binary_host_mirror=https://npm.taobao.org/mirrors/sqlite3/\n")),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-ts"}),"// \u83b7\u53d6\u7248\u672c\nconst db = new Database(':memory:');\ndb.serialize(() => {\n  db.each('select sqlite_version() as version', (err, row) => {\n    console.log(`sqlite version ${row.version}`);\n  });\n});\ndb.close();\n")),(0,l.kt)("h2",k({},{id:"java"}),"Java"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"xerial sqlite-jdbc ",(0,l.kt)("a",k({parentName:"li"},{href:"https://github.com/xerial/sqlite-jdbc/blob/master/Usage.md"}),"Usage"))),(0,l.kt)("h2",k({},{id:"udf"}),"UDF"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"http://www.sqlite.org/c3ref/create_function.html"}),"Create Or Redefine SQL Functions")),(0,l.kt)("li",{parentName:"ul"},"PHP \u652f\u6301 ",(0,l.kt)("a",k({parentName:"li"},{href:"https://www.php.net/manual/en/sqlite3.createfunction.php"}),"SQLite3::createFunction")),(0,l.kt)("li",{parentName:"ul"},"Java Xerial \u652f\u6301 ",(0,l.kt)("a",k({parentName:"li"},{href:"https://www.javadoc.io/doc/org.xerial/sqlite-jdbc/3.30.1/org/sqlite/Function.html"}),"org.sqlite.Function")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://github.com/mapbox/node-sqlite3/issues/140"}),"mapbox/node-sqlite3#140"))),(0,l.kt)("h2",k({},{id:"build"}),"Build"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",k({parentName:"p"},{href:"https://sqlite.org/howtocompile.html"}),"How To Compile SQLite"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",k({parentName:"p"},{href:"https://sqlite.org/amalgamation.html"}),"amalgamation")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5408\u5e76\u540e\u7684 sqlite \u6e90\u7801"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",k({parentName:"p"},{href:"https://github.com/sqlite/sqlite"}),"sqlite/sqlite")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"mirror"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",k({parentName:"p"},{href:"https://www.sqlite.org/chronology.html"}),"chronology")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7248\u672c\u5386\u53f2"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4f9d\u8d56"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"pthread - \u591a\u7ebf\u7a0b\u652f\u6301\uff0c\u53ef\u5173\u95ed ",(0,l.kt)("inlineCode",{parentName:"li"},"SQLITE_THREADSAFE=0")),(0,l.kt)("li",{parentName:"ul"},"dl - \u6269\u5c55\u6a21\u5757\u652f\u6301\uff0c\u53ef\u5173\u95ed ",(0,l.kt)("inlineCode",{parentName:"li"},"-DSQLITE_OMIT_LOAD_EXTENSION"))))),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-bash"}),"# http://www.sqlite.org/\u5e74/sqlite-amalgamation-\u7248\u672c\u53f7.zip\n# 2013-04-12    3.7.16.2\ncurl -O http://www.sqlite.org/2013/sqlite-amalgamation-3071602.zip\n\n# \u6b63\u5e38\u7f16\u8bd1\ngcc shell.c sqlite3.c -lpthread -ldl -lm\n# \u5355\u7ebf\u7a0b - sqlite shell \u4e0d\u9700\u8981\u7ebf\u7a0b\u652f\u6301\ngcc -DSQLITE_THREADSAFE=0 shell.c sqlite3.c -ldl -lm\n# \u5355\u7ebf\u7a0b \u65e0\u6269\u5c55\ngcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION shell.c sqlite3.c\n# \u5355\u7ebf\u7a0b \u65e0\u6269\u5c55 \u9759\u6001 - \u65b9\u4fbf\u79fb\u690d\ngcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION -static shell.c sqlite3.c\n\n# \u4ea4\u53c9\u7f16\u8bd1\n# arm-none \u65e0\u6cd5\u7f16\u8bd1 - \u7f3a\u5c11 stdlib.h, stdlb.h\narm-none-eabi-gcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION -static shell.c sqlite3.c\n")),(0,l.kt)("h2",k({},{id:"dev"}),"DEV"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://zetcode.com/db/sqlitec/"}),"SQLite C tutorial"))),(0,l.kt)("h2",k({},{id:"pragma"}),"pragma"),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"PRAGMA pragma_list;     -- \u67e5\u770b\u6240\u6709\u5c5e\u6027\nPRAGMA compile_options; -- \u7f16\u8bd1\u9009\u9879 https://www.sqlite.org/compile.html\nPRAGMA module_list;     -- \u6a21\u5757\u5217\u8868\nPRAGMA stats;           -- \u7edf\u8ba1\u65b0\u79c0\nPRAGMA freelist_count;  --\n\nPRAGMA database_list; -- \u6570\u636e\u5e93\nPRAGMA table_list;    -- \u8868\nPRAGMA function_list;\n\n-- PRAGMA table_info(table-name);\n-- PRAGMA table_xinfo(table-name);\n-- PRAGMA foreign_key_list(table-name);\n-- PRAGMA index_list(table-name);\n-- PRAGMA index_info(index-name);\n-- PRAGMA index_xinfo(index-name);\nPRAGMA table_info(sqlite_schema); -- \u8868\u4fe1\u606f\nPRAGMA table_xinfo(sqlite_schema);\n\nPRAGMA optimize;  -- \u6267\u884c\u4f18\u5316\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"synchronous",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"0 | OFF",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u8c03\u7528 fsync"),(0,l.kt)("li",{parentName:"ul"},"\u5e94\u7528\u5d29\u6e83\u5b89\u5168\uff0c\u7cfb\u7edf\u5d29\u6e83\u4e0d\u5b89\u5168"))),(0,l.kt)("li",{parentName:"ul"},"1 | NORMAL",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"sync \u5c11\u4e8e FULL"))),(0,l.kt)("li",{parentName:"ul"},"2 | FULL",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"VFS xSync"),(0,l.kt)("li",{parentName:"ul"},"\u975e WAL \u65f6\u4f7f\u7528"))),(0,l.kt)("li",{parentName:"ul"},"3 | EXTRA",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u540c\u6b65 rollback journal"))))),(0,l.kt)("li",{parentName:"ul"},"journal_mode - \u63a7\u5236 ",(0,l.kt)("inlineCode",{parentName:"li"},"-journal")," \u6587\u4ef6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"DELETE - \u4e8b\u52a1\u7ed3\u675f\u5220\u9664 rollback journal"),(0,l.kt)("li",{parentName:"ul"},"TRUNCATE - \u4f7f\u7528 truncaate \u800c\u975e \u5220\u9664 - \u6709\u7684 fs \u4f1a\u66f4\u5feb"),(0,l.kt)("li",{parentName:"ul"},"PERSIST - \u4fdd\u7559 - \u518d\u6b21\u5199\u5165\u5c31\u884c\u8986\u76d6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"journal_size_limit=SQLITE_DEFAULT_JOURNAL_SIZE_LIMIT=32K"))),(0,l.kt)("li",{parentName:"ul"},"MEMORY"),(0,l.kt)("li",{parentName:"ul"},"WAL - \u4f7f\u7528 WAL \u800c\u975e rollback journal",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4ea7\u751f ",(0,l.kt)("inlineCode",{parentName:"li"},"-shm")," \u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"-wal")," \u6587\u4ef6"))),(0,l.kt)("li",{parentName:"ul"},"OFF - \u7981\u7528 rollback journal",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6ca1\u6709 rollback \u80fd\u529b"))))),(0,l.kt)("li",{parentName:"ul"},"wal_autocheckpoint=1000 - \u81ea\u52a8\u6267\u884c wal_checkpoint(PASSIVE)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5f53 WAL N \u9875\u540e auto-checkpoint"),(0,l.kt)("li",{parentName:"ul"},"\u63a7\u5236 -wal \u6587\u4ef6\u5927\u5c0f"),(0,l.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u4e3a <= 0 \u7981\u7528 - \u901a\u8fc7 wal_checkpoint \u624b\u52a8\u89e6\u53d1"))),(0,l.kt)("li",{parentName:"ul"},"wal_checkpoint(mode)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"PASSIVE - \u9ed8\u8ba4 - \u4e0d\u7b49\u5f85 reader"),(0,l.kt)("li",{parentName:"ul"},"FULL - \u963b\u585e\u8bfb"),(0,l.kt)("li",{parentName:"ul"},"RESTART - \u540c FULL\uff0c\u4e14\u786e\u4fdd\u4e4b\u540e\u8bfb\u4f1a RESTART log file"),(0,l.kt)("li",{parentName:"ul"},"TRUNCATE - \u540c RESTART\uff0c\u4e14 truncate \u6587\u4ef6"))),(0,l.kt)("li",{parentName:"ul"},"locking_mode",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"NORMAL - \u9ed8\u8ba4"),(0,l.kt)("li",{parentName:"ul"},"EXCLUSIVE"))),(0,l.kt)("li",{parentName:"ul"},"auto_vacuum - \u9700\u8981\u5728\u521b\u5efa\u8868\u4e4b\u524d\u6307\u5b9a\uff0c\u521b\u5efa\u8868\u4f1a\u6dfb\u52a0\u989d\u5916\u4fe1\u606f\u7528\u4e8e\u8ffd\u8e2a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"0 | NONE - \u9ed8\u8ba4 - \u9700\u8981\u6267\u884c VACUUM \u6765\u56de\u6536\u7a7a\u95f4"),(0,l.kt)("li",{parentName:"ul"},"1 | FULL - \u6bcf\u6b21 commit \u79fb\u52a8\u7a7a\u9875\u5230\u6587\u4ef6\u5c3e\u90e8\uff0c\u7136\u540e truncate - \u4f1a\u5bfc\u81f4\u6587\u4ef6\u788e\u7247\u5316"),(0,l.kt)("li",{parentName:"ul"},"2 | INCREMENTAL",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"incremental_vacuum=N"),(0,l.kt)("li",{parentName:"ul"},"\u5f53 freelist \u8fbe\u5230\u7ed9\u5b9a\u7684 page \u540e\u5c31\u884c auto vaccum"))))),(0,l.kt)("li",{parentName:"ul"},"temp_store - \u5b58\u50a8 temporary indices / tables \u903b\u8f91",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"0 | DEFAULT"),(0,l.kt)("li",{parentName:"ul"},"1 | FILE"),(0,l.kt)("li",{parentName:"ul"},"2 | MEMORY;"))),(0,l.kt)("li",{parentName:"ul"},"automatic_index=true - SQLite \u4f1a\u57fa\u4e8e\u67e5\u8be2\u81ea\u52a8\u521b\u5efa\u7d22\u5f15\u4f18\u5316\u540e\u7eed\u67e5\u8be2"),(0,l.kt)("li",{parentName:"ul"},"page_size=4096 - \u8303\u56f4 512 - 65536",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4fee\u6539\u9700\u8981 vacuum \u624d\u80fd\u751f\u6548"))),(0,l.kt)("li",{parentName:"ul"},"max_page_count"),(0,l.kt)("li",{parentName:"ul"},"page_count - \u5f53\u524d\u7684\u9875\u6570"),(0,l.kt)("li",{parentName:"ul"},"mmap_size=0 - ",(0,l.kt)("a",k({parentName:"li"},{href:"https://sqlite.org/mmap.html"}),"https://sqlite.org/mmap.html"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u4e00\u5b9a\u4f1a\u63d0\u5347\u6027\u80fd"),(0,l.kt)("li",{parentName:"ul"},"0 \u7981\u7528"))),(0,l.kt)("li",{parentName:"ul"},"cache_size=2000",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"2000 -> 2000xpage_size -> 2000x4k=8M"))),(0,l.kt)("li",{parentName:"ul"},"foreign_key_check - \u662f\u5426\u6821\u9a8c\u5916\u952e\u7ea6\u675f"),(0,l.kt)("li",{parentName:"ul"},"ignore_check_constraints"),(0,l.kt)("li",{parentName:"ul"},"encoding=UTF-8"),(0,l.kt)("li",{parentName:"ul"},"query_only - \u53ea\u8bfb\u6a21\u5f0f"),(0,l.kt)("li",{parentName:"ul"},"quick_check",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6bd4 integrity_check \u5c11\u68c0\u67e5 unique"))),(0,l.kt)("li",{parentName:"ul"},"read_uncommitted"),(0,l.kt)("li",{parentName:"ul"},"recursive_triggers"),(0,l.kt)("li",{parentName:"ul"},"reverse_unordered_selects"),(0,l.kt)("li",{parentName:"ul"},"secure_delete",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5f00\u542f\u540e\u5220\u9664\u4f1a\u7f6e 0"))),(0,l.kt)("li",{parentName:"ul"},"schema_version - int32 at offset 40 - schema cookie"),(0,l.kt)("li",{parentName:"ul"},"writable_schema"),(0,l.kt)("li",{parentName:"ul"},"shrink_memory - \u91ca\u653e\u5185\u5b58"),(0,l.kt)("li",{parentName:"ul"},"\u989d\u5916\u4fe1\u606f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"user_version - int32 at offset 60"),(0,l.kt)("li",{parentName:"ul"},"application_id - int32 at offset 68",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u90e8\u5206\u5df2\u77e5 id - ",(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/src/artifact?ci=trunk&filename=magic.txt"}),"https://www.sqlite.org/src/artifact?ci=trunk&filename=magic.txt")))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/pragma.html"}),"https://www.sqlite.org/pragma.html"))),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"-- \u4fee\u6539 page_size\npragma page_count;\npragma page_size 65536;\nvacuum;\npragma page_count;\n")),(0,l.kt)("h2",k({},{id:"sqlite_stat1"}),"sqlite_stat1"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/lang_analyze.html"}),"https://www.sqlite.org/lang_analyze.html"),"\nANALYZE \u4f1a\u751f\u6210\u7edf\u8ba1\u4fe1\u606f\u8868"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/fileformat2.html#stat1tab"}),"stat1tab"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"sqlite_stat1 \u53ef\u66f4\u65b0\u6216\u5220\u9664\uff0c\u4e0d\u53ef alter \u6216\u521b\u5efa")))),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"CREATE TABLE sqlite_stat1(tbl,idx,stat);\n-- v3.6.18 2009-09-11\nCREATE TABLE sqlite_stat2(tbl,idx,sampleno,sample);\n-- v3.7.9 - 2011-11-01\nCREATE TABLE sqlite_stat3(tbl,idx,nEq,nLt,nDLt,sample);\n-- v3.8.1 - 2013-10-17\nCREATE TABLE sqlite_stat4(tbl,idx,nEq,nLt,nDLt,sample);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"tbl - \u8868\u540d"),(0,l.kt)("li",{parentName:"ul"},"idx - \u7d22\u5f15"),(0,l.kt)("li",{parentName:"ul"},"sample - \u91c7\u6837\u6570\u636e - BLOB")),(0,l.kt)("h2",k({},{id:"wal"}),"WAL"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f18\u70b9",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5927\u591a\u60c5\u51b5\u90fd\u4f1a\u66f4\u5feb"),(0,l.kt)("li",{parentName:"ul"},"\u8bfb \u4e0d\u963b\u585e \u5199\uff0c\u5199 \u4e0d\u963b\u585e \u8bfb"),(0,l.kt)("li",{parentName:"ul"},"\u5927\u591a\u4e3a\u987a\u5e8f IO"),(0,l.kt)("li",{parentName:"ul"},"\u66f4\u5c11 fsync"))),(0,l.kt)("li",{parentName:"ul"},"\u7f3a\u70b9",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u57fa\u4e8e\u5171\u4eab\u5185\u5b58 - \u4e0d\u80fd\u5728 NFS \u8fd9\u79cd\u8de8\u8282\u70b9 FS \u4f7f\u7528"),(0,l.kt)("li",{parentName:"ul"},"\u8fdb\u5165 WAL \u540e\u4e0d\u53ef\u4ee5\u4fee\u6539 page_size"),(0,l.kt)("li",{parentName:"ul"},"\u4ea7\u751f\u989d\u5916\u7684 -wal, -shm \u6587\u4ef6"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/wal.html"}),"https://www.sqlite.org/wal.html"))),(0,l.kt)("h2",k({},{id:"syntax"}),"syntax"),(0,l.kt)("h3",k({},{id:"attach"}),"attach"),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"attach expr as name;\ndetach name;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/lang_attach.html"}),"https://www.sqlite.org/lang_attach.html"))),(0,l.kt)("h3",k({},{id:"json"}),"json"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/json1.html"}),"https://www.sqlite.org/json1.html"))),(0,l.kt)("h3",k({},{id:"upsert"}),"upsert"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/lang_UPSERT.html"}),"https://www.sqlite.org/lang_UPSERT.html"))),(0,l.kt)("h2",k({},{id:"format"}),"format"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"page",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"lock-byte"),(0,l.kt)("li",{parentName:"ul"},"freelist - \u4e0d\u6d3b\u8dc3\u7684\u9875 - linked list \u5f62\u5f0f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"freelist trunk"),(0,l.kt)("li",{parentName:"ul"},"freelist leaf"))),(0,l.kt)("li",{parentName:"ul"},"b-tree",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"table b-tree interior"),(0,l.kt)("li",{parentName:"ul"},"table b-tree leaf"),(0,l.kt)("li",{parentName:"ul"},"tindex b-tree interior"),(0,l.kt)("li",{parentName:"ul"},"tindex b-tree leaf"))),(0,l.kt)("li",{parentName:"ul"},"payload overflow"),(0,l.kt)("li",{parentName:"ul"},"pointer map"))),(0,l.kt)("li",{parentName:"ul"},"-journal - \u56de\u6eda\u65e5\u5fd7",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"page number in db"),(0,l.kt)("li",{parentName:"ul"},"\u539f\u59cb page \u5185\u5bb9"))),(0,l.kt)("li",{parentName:"ul"},"-wal",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"checkpoint \u5e8f\u5217\u53f7"),(0,l.kt)("li",{parentName:"ul"},"frames - 24-byte header+page"))),(0,l.kt)("li",{parentName:"ul"},"-shm - wal-index"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/fileformat2.html"}),"https://www.sqlite.org/fileformat2.html"))),(0,l.kt)("h2",k({},{id:"vacuum"}),"vacuum"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u91cd\u5efa\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u91ca\u653e\u4e0d\u9700\u8981\u7684\u78c1\u76d8\u7a7a\u95f4"),(0,l.kt)("li",{parentName:"ul"},"VACUUM INTO \u7c7b\u4f3c backup\uff0c\u4e14\u751f\u6210\u7684 db \u662f VACUUM \u540e\u7684")),(0,l.kt)("pre",null,(0,l.kt)("code",k({parentName:"pre"},{className:"language-sql"}),"-- VACUUM [schema] [INFO filename];\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/lang_vacuum.html"}),"https://www.sqlite.org/lang_vacuum.html"))),(0,l.kt)("h2",k({},{id:"query"}),"query"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/queryplanner.html"}),"Query Planning")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/lang_explain.html"}),"https://www.sqlite.org/lang_explain.html")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/eqp.html"}),"https://www.sqlite.org/eqp.html")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",k({parentName:"li"},{href:"https://www.sqlite.org/optoverview.html"}),"Query Optimizer Overview"))),(0,l.kt)("h2",k({},{id:"versions"}),"Versions"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"SQLite v3.38.0 - 2022-02-22",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u5305\u542b json"),(0,l.kt)("li",{parentName:"ul"},"json ",(0,l.kt)("inlineCode",{parentName:"li"},"->"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"->>")))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.37.2",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"-DSQLITE_ENABLE_JSON1 - json1"))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.37.0 - 2021-11-27",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"STRICT Tables"))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.23.0 - 2018-04-02",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8bc6\u522b TRUE, FALSE -> 1, 0"))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.12.0 - 2016-03-29",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"page_size 1024 -> 4096"))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.8.2 - 2013-12-06",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"WITHOUT ROWID"))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.8.0 - 2013-08-26",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u90e8\u5206\u7d22\u5f15"))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.7.17 - 2013-05-20",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"mmap"))),(0,l.kt)("li",{parentName:"ul"},"SQLite v3.7.0 - 2010-07-21",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"WAL")))))}E.isMDXComponent=!0}}]);