/*! For license information please see daf1d129.b3ddbc76.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[6955],{4678:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>a,frontMatter:()=>t,metadata:()=>c,toc:()=>h});var i=s(11527),l=s(47214);const t={title:"entgo"},r="entgo",c={id:"languages/go/lib/ent",title:"entgo",description:"- ent/ent \u662f\u4ec0\u4e48\uff1f",source:"@site/../notes/languages/go/lib/ent.md",sourceDirName:"languages/go/lib",slug:"/languages/go/lib/ent",permalink:"/notes/languages/go/lib/ent",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/go/lib/ent.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1656388638,formattedLastUpdatedAt:"Jun 28, 2022",frontMatter:{title:"entgo"},sidebar:"docs",previous:{title:"colly",permalink:"/notes/languages/go/lib/colly"},next:{title:"fx",permalink:"/notes/languages/go/lib/fx"}},d={},h=[{value:"Note",id:"note",level:2},{value:"entql",id:"entql",level:3},{value:"\u6267\u884c\u4efb\u610f SQL",id:"\u6267\u884c\u4efb\u610f-sql",level:2},{value:"ent v0.10",id:"ent-v010",level:2},{value:"ent v0.9",id:"ent-v09",level:2},{value:"ent v0.8",id:"ent-v08",level:2}];function o(n){const e={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"entgo",children:"entgo"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ent/ent",children:"ent/ent"})," \u662f\u4ec0\u4e48\uff1f\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9879\u76ee\u6e90\u81ea facebook, \u52a0\u5165 LF"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301 RESTful \u63a5\u53e3"}),"\n",(0,i.jsxs)(e.li,{children:["\u57fa\u4e8e\u4ee3\u7801\u751f\u6210\u7684 ORM\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u652f\u6301 MySQL, MariaDB, PostgreSQL, SQLite, Gremlin"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u521b\u5efa\u548c\u66f4\u65b0\u4f7f\u7528 setter/getter"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u751f\u6210 gqlgen \u96c6\u6210\u4ee3\u7801"}),"\n",(0,i.jsxs)(e.li,{children:["\u7279\u70b9\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e0d\u57fa\u4e8e struct \u5b9a\u4e49\u6a21\u578b\uff0c\u76f4\u63a5\u5b9a\u4e49 Fields, Indexes, Edges"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u5b9a\u4e49\u6821\u9a8c"}),"\n",(0,i.jsx)(e.li,{children:"\u80fd mixin \u516c\u5171\u6a21\u578b"}),"\n",(0,i.jsx)(e.li,{children:"\u6dfb\u52a0 annotation \u81ea\u5b9a\u4e49\u4fe1\u606f"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u652f\u6301\u7684\u7c7b\u578b\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6240\u6709 golang \u6570\u5b57\u7c7b\u578b"}),"\n",(0,i.jsx)(e.li,{children:"bool"}),"\n",(0,i.jsx)(e.li,{children:"string"}),"\n",(0,i.jsx)(e.li,{children:"time.Time"}),"\n",(0,i.jsx)(e.li,{children:"[]byte"}),"\n",(0,i.jsx)(e.li,{children:"JSON"}),"\n",(0,i.jsx)(e.li,{children:"Enum"}),"\n",(0,i.jsx)(e.li,{children:"UUID"}),"\n",(0,i.jsx)(e.li,{children:"Other - \u81ea\u5b9a\u4e49 DB \u7c7b\u578b\u548c Go \u7c7b\u578b"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u652f\u6301\u5168\u5c40\u552f\u4e00 ID - int \u7c7b\u578b\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"migrate.WithGlobalUniqueID"}),"\n",(0,i.jsx)(e.li,{children:"ID \u524d\u9762\u90e8\u5206\u4e3a Table \u7d22\u5f15"}),"\n",(0,i.jsx)(e.li,{children:"ent_types \u8868\u7ef4\u62a4 \u8868\u540d->\u7d22\u5f15 \u5173\u7cfb"}),"\n",(0,i.jsx)(e.li,{children:"\u56e0\u6b64\u4e00\u4e2a ID \u80fd\u83b7\u53d6\u5230\u7c7b\u578b\u4fe1\u606f"}),"\n",(0,i.jsx)(e.li,{children:"graphql Node ID \u9700\u8981\u8be5\u80fd\u529b"}),"\n",(0,i.jsxs)(e.li,{children:["github gql \u4f7f\u7528 String ID - \u683c\u5f0f\u4e3a base64 ",(0,i.jsx)(e.code,{children:"04:User583231"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ent/contrib",children:"ent/contribs"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"entoas,entgql,entgrpc"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ogen-go/ogen",children:"ogen-go/ogen"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210 OpenAPIv3"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/452#issuecomment-619430120",children:"Neptune / Gremlin - experience compared to SQL backends"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ent \u65e9\u671f\u540e\u7aef\u4e3a Gremlin"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ariga/atlas",children:"ariga/atlas"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"DSL schema \u7ba1\u7406"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ariga/entcache",children:"ariga/entcache"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ent \u7f13\u5b58\u5c42"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6838\u5fc3\u6210\u5458\u6210\u7acb\u7684\u516c\u53f8 ",(0,i.jsx)(e.a,{href:"https://ariga.io/",children:"https://ariga.io/"})," operational data graph"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5185\u5efa id \u5b57\u6bb5 - \u53ef\u8986\u76d6"}),"\n",(0,i.jsxs)(e.li,{children:["\u4e0d\u652f\u6301 \u67e5\u8be2 Hook - ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/833",children:"ent/ent#833"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u53ef\u4ee5\u4f7f\u7528 ",(0,i.jsx)(e.a,{href:"https://entgo.io/docs/privacy/#multi-tenancy",children:"privacy"})," \u5b9e\u73b0\u7c7b\u578b\u529f\u80fd"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["gRPC \u6269\u5c55\u652f\u6301\u60c5\u51b5 ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/2446",children:"#2446"})]}),"\n"]})}),"\n",(0,i.jsx)(e.admonition,{type:"caution",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e0d\u652f\u6301 \u8f6f\u5220\u9664 - ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/252",children:"ent/ent#252"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u4e0d\u652f\u6301\u7ea7\u8054\u5220\u9664 - ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/407",children:"ent/ent#407"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u4e0d\u652f\u6301\u591a\u6001 - ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/1048",children:"#1048"})]}),"\n",(0,i.jsxs)(e.li,{children:["entql \u5d4c\u5957\u5206\u9875 N+1 \u95ee\u9898 - ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/1180",children:"#1180"})]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.del,{children:"\u76ee\u524d GoType \u8981\u6c42\u4e3a struct \u6216\u53ef\u6620\u5c04\u7c7b\u578b"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.del,{children:"\u5173\u8054\u5173\u7cfb\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u5c5e\u6027"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsxs)(e.del,{children:["\u4e0d\u652f\u6301 upsert - ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/139",children:"ent/ent#139"})]})}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"go get entgo.io/ent/cmd/ent\n\ngo mod init <project>\nent init User\ngo generate ./ent\n\n# edge\ngo run entgo.io/ent/cmd/ent init Car Group\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["feature\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"privacy"}),"\n",(0,i.jsx)(e.li,{children:"entql - EntQL DSL \u62bd\u8c61\u652f\u6301\u5e95\u5c42\u591a\u79cd\u65b9\u8a00"}),"\n",(0,i.jsxs)(e.li,{children:["schema/snapshot\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7f13\u5b58\u4e4b\u524d schema \u89e3\u51b3\u5408\u5e76\u51b2\u7a81 ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/852",children:"#852"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"sql/schemaconfig - \u9488\u5bf9 table \u6307\u5b9a schema"}),"\n",(0,i.jsx)(e.li,{children:"sql/lock - \u751f\u6210 ForUpdate/ForShare"}),"\n",(0,i.jsx)(e.li,{children:"sql/modifier - \u751f\u6210 Modify \u8c03\u6574\u8bed\u53e5"}),"\n",(0,i.jsxs)(e.li,{children:["sql/versioned-migration\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Schema \u589e\u52a0 Diff \u548c NamedDiff"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:'client.Schema.NamedDiff(ctx, "migration_name", schema.WithDir(dir))'}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210\u8fc1\u79fb\u5230\u6587\u4ef6"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u4e0e\u73b0\u6709 schema \u8fdb\u884c diff"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["sql/execquery\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210 ExecContext, QueryContext"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"sql/upsert - \u751f\u6210 OnConflict"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"note",children:"Note"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Validator \u4e0d\u80fd\u83b7\u53d6\u5230\u4e0a\u4e0b\u6587\uff0c\u4f1a cast \u6210\u5b9e\u9645\u7c7b\u578b"}),"\n",(0,i.jsxs)(e.li,{children:["Save \u987a\u5e8f\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8bbe\u7f6e\u9ed8\u8ba4\u503c"}),"\n",(0,i.jsxs)(e.li,{children:["\u6ca1\u6709 hooks\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6821\u9a8c\u5b57\u6bb5"}),"\n",(0,i.jsx)(e.li,{children:"\u4fdd\u5b58"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u6709 hooks\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210 Mutator - \u6821\u9a8c\u3001\u4fdd\u5b58"}),"\n",(0,i.jsx)(e.li,{children:"\u6267\u884c hook"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["ent.Policy - \u8bbf\u95ee\u7b56\u7565\u63a7\u5236\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u62e6\u622a\u63a7\u5236\u67e5\u8be2\u548c\u4fee\u6539 - \u6ca1\u6709 Action \u6982\u5ff5\uff0c\u53ea\u6709 Query \u548c Mutation"}),"\n",(0,i.jsxs)(e.li,{children:["\u4e09\u79cd\u51b3\u7b56\u7ed3\u679c\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"privacy.Allow"}),"\n",(0,i.jsx)(e.li,{children:"privacy.Deny"}),"\n",(0,i.jsx)(e.li,{children:"privacy.Skip"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"entql",children:"entql"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u52a8\u6001 sql \u751f\u6210"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u51fd\u6570"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"func"}),(0,i.jsx)(e.th,{children:"how"}),(0,i.jsx)(e.th,{children:"note"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"equal_fold"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"LOWER(col) = ${strings.ToLower(sub)}"})}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"contains"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:'col like ${"%"+sub+"%"}'})}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"contains_fold"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:'col ilike ${"%"+sub+"%"}'})}),(0,i.jsxs)(e.td,{children:["pg ilike, mysql ",(0,i.jsx)(e.code,{children:"COLLATE utf8mb4_general_ci LIKE"})]})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"has_prefix"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:'col like ${prefix+"%"}'})}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"has_suffix"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:'col like ${"%"+suffix}'})}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"has_edge(edge,expr...)"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]})]})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:'select * from account where has_edge(owningUser)\n--\nselect * from account where owning_user_id IS NOT NULL\n\nselect * from account where has_edge(owningUser,username = "wener")\n-- args [wener]\nSELECT * FROM "accounts" WHERE "accounts"."owning_user_id" IS NOT NULL AND "accounts"."owning_user_id" IN (SELECT "users"."id" FROM "users" WHERE "username" = $1)\n\nselect * from account where has_edge(owningUser,has_edge(department,name = "Test"))\n-- args [Test]\nSELECT * FROM "accounts" WHERE "accounts"."owning_user_id" IN (SELECT "users"."id" FROM "users" WHERE "users"."department_id" IN (SELECT "departments"."id" FROM "departments" WHERE "name" = $1))\n'})}),"\n",(0,i.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(e.h2,{id:"\u6267\u884c\u4efb\u610f-sql",children:"\u6267\u884c\u4efb\u610f SQL"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210\u65f6\u6dfb\u52a0 sql/execquery \u7279\u6027"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:"// \u66b4\u9732\u5e95\u5c42 DB\nfunc (c *Client) DB() *sql.DB {\n\tif c.debug {\n            return c.driver.(*dialect.DebugDriver).Driver.(*entsql.Driver).DB()\n\t}\n\treturn c.driver.(*entsql.Driver).DB()\n}\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/issues/85#issuecomment-542194059",children:"https://github.com/ent/ent/issues/85#issuecomment-542194059"})}),"\n"]}),"\n",(0,i.jsx)(e.h1,{id:"version",children:"Version"}),"\n",(0,i.jsx)(e.h2,{id:"ent-v010",children:"ent v0.10"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/ariga/atlas",children:"ariga/atlas"})," \u7ee7\u627f\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u57fa\u4e8e HCL \u7684 DDL Schema \u5b9a\u4e49/\u8fc1\u79fb"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\nimport (\n    "context"\n    "log"\n    "<project>/ent"\n    "<project>/ent/migrate"\n    "entgo.io/ent/dialect/sql/schema"\n)\nfunc main() {\n    client, err := ent.Open("mysql", "root:pass@tcp(localhost:3306)/test")\n    if err != nil {\n        log.Fatalf("failed connecting to mysql: %v", err)\n    }\n    defer client.Close()\n    ctx := context.Background()\n    // \u4f7f\u7528 Atlas \u6267\u884c\u8fc1\u79fb\n    err = client.Schema.Create(ctx, schema.WithAtlas(true))\n    if err != nil {\n        log.Fatalf("failed creating schema resources: %v", err)\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"ent-v09",children:"ent v0.9"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Upsert/UpsertBulk"}),"\n",(0,i.jsx)(e.li,{children:"Row-level locking"}),"\n",(0,i.jsx)(e.li,{children:"\u65b0\u7684 entc.Extension API"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301 SQL Query \u4fee\u9970\u7b26"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'id, err := client.User.\n    Create().\n    SetAge(30).\n    SetName("Ariel").\n    // upsert\n    OnConflict().\n    SetName("Mashraki").\n    ID(ctx)\n\n// UpsertBulk\nerr := client.User.\n    CreateBulk(builders...).\n    OnConflict().\n    UpdateNewValues().\n    Exec(ctx)\n\ntx.User.Query().\n    Where(user.Name(name)).\n    // RLL\n    ForUpdate().\n    Only(ctx)\n\nclient.Pet.\n    Query().\n    //  SQL Modifier\n    Modify(func(s *sql.Selector) {\n        s.Select("SUM(LENGTH(name))")\n    }).\n    IntX(ctx)\n'})}),"\n",(0,i.jsx)(e.h2,{id:"ent-v08",children:"ent v0.8"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["entc/gen\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://entgo.io/docs/templates/#global-annotations",children:"\u5168\u5c40 Annotation"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f1a\u6dfb\u52a0\u5230 gen.Config"}),"\n",(0,i.jsx)(e.li,{children:"\u7c7b\u4f3c\u4e8e\u914d\u7f6e entc"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["entc/schema\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u751f\u6210\u4ee3\u7801\u4f7f\u7528\u5b9e\u9645 GoType - ",(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/pull/1428",children:"#1428"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4e4b\u524d\u4f8b\u5982 ID \u7c7b\u578b\uff0c\u4f1a\u751f\u6210\u5bf9\u5e94\u7684 SQL \u7c7b\u578b - \u4f8b\u5982 ",(0,i.jsx)(e.code,{children:"sql.NullString"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"UpdateOne \u652f\u6301 Select \u5b57\u6bb5"}),"\n",(0,i.jsx)(e.li,{children:"\u5141\u8bb8\u67e5\u8be2\u5173\u95ed DISTINCT - \u9ed8\u8ba4\u5f00\u542f"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/ent/ent/releases/tag/v0.8.0",children:"v0.8.0"})}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'type Annotation struct {\n    Config *config.Config\n}\n\nfunc (Annotation) Name() string {\n    return "GQL"\n}\n\n// \u5168\u5c40\nvar _ schema.Annotation = (*Annotation)(nil)\n'})})]})}function a(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},3354:(n,e,s)=>{var i=s(50959),l=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,s){var i,t={},h=null,o=null;for(i in void 0!==s&&(h=""+s),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(o=e.ref),e)r.call(e,i)&&!d.hasOwnProperty(i)&&(t[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps)void 0===t[i]&&(t[i]=e[i]);return{$$typeof:l,type:n,key:h,ref:o,props:t,_owner:c.current}}e.Fragment=t,e.jsx=h,e.jsxs=h},11527:(n,e,s)=>{n.exports=s(3354)},47214:(n,e,s)=>{s.d(e,{Z:()=>c,a:()=>r});var i=s(50959);const l={},t=i.createContext(l);function r(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);