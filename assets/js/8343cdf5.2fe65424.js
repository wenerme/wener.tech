"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[95427],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return g}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=s(n),g=r,k=m["".concat(p,".").concat(g)]||m[g]||c[g]||l;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},61925:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return u},default:function(){return m}});var a=n(22122),r=n(19756),l=(n(67294),n(3905)),i=["components"],o={title:"gRPC"},p=void 0,s={unversionedId:"service/api/grpc",id:"service/api/grpc",isDocsHomePage:!1,title:"gRPC",description:"- gRPC",source:"@site/notes/service/api/grpc.md",sourceDirName:"service/api",slug:"/service/api/grpc",permalink:"/notes/service/api/grpc",editUrl:"https://github.com/wenerme/wener/edit/master/notes/service/api/grpc.md",version:"current",frontMatter:{title:"gRPC"},sidebar:"docs",previous:{title:"grpc web",permalink:"/notes/service/api/grpc-web"},next:{title:"Protobuf",permalink:"/notes/service/api/protobuf"}},u=[{value:"Note",id:"note",children:[]},{value:"Docker",id:"docker",children:[]},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",children:[]},{value:"Java",id:"java",children:[]},{value:"PHP",id:"php",children:[]},{value:"Node",id:"node",children:[]},{value:"Golang",id:"golang",children:[{value:"Client",id:"client",children:[]},{value:"Server",id:"server",children:[]}]},{value:"Web",id:"web",children:[]},{value:"Typescript",id:"typescript",children:[]},{value:"grpc-gateway",id:"grpc-gateway",children:[]},{value:"Auth",id:"auth",children:[]},{value:"\u6848\u4f8b",id:"\u6848\u4f8b",children:[{value:"GCP",id:"gcp",children:[]}]},{value:"\u6e90\u7801\u548c\u4f7f\u7528\u5206\u6790",id:"\u6e90\u7801\u548c\u4f7f\u7528\u5206\u6790",children:[{value:"Java",id:"java-1",children:[]},{value:"\u804a\u5929",id:"\u804a\u5929",children:[]}]},{value:"FAQ",id:"faq",children:[{value:"all SubConns are in TransientFailure",id:"all-subconns-are-in-transientfailure",children:[]}]}],c={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/"},"gRPC")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc-ecosystem"},"gRPC Ecosystem")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/google/protobuf/blob/master/docs/third_party.md"},"Third-Party Add-ons for Protocol Buffers")),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef\u6682\u4e0d\u652f\u6301 PHP",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u8ddf\u8e2a\u8be5\u5e16\u5b50 ",(0,l.kt)("a",{parentName:"li",href:"https://groups.google.com/forum/#!topic/grpc-io/F3IyYaI_6S0"},"Servers in PHP?")))),(0,l.kt)("li",{parentName:"ul"},"google.protobuf",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u5b9a\u4e49"),(0,l.kt)("li",{parentName:"ul"},"api.proto",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u670d\u52a1\u7684\u8f7b\u91cf\u7ea7\u5b9a\u4e49"))))),(0,l.kt)("li",{parentName:"ul"},"\u95ee\u9898",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc-go/issues/555"},"grpc-go#555")," - ServeHTTP doesn't work without TLS",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Golang \u5b9e\u73b0\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"ServeHTTP"),", \u4f46\u5fc5\u987b\u8981 ",(0,l.kt)("inlineCode",{parentName:"li"},"TLS")))))),(0,l.kt)("li",{parentName:"ul"},"\u76f8\u5173\u670d\u52a1",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/mwitkow/grpc-proxy"},"mwitkow/grpc-proxy"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"grpc \u53cd\u5411\u4ee3\u7406"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/improbable-eng/grpc-web"},"improbable-eng/grpc-web"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"gRPC Web implementation for Golang and TypeScript"))))),(0,l.kt)("li",{parentName:"ul"},"\u6848\u4f8b\u53c2\u8003",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc-proto"},"grpc/grpc-proto"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5e38\u7528\u534f\u8bae"))),(0,l.kt)("li",{parentName:"ul"},"k8s \u4f7f\u7528 go-to-protobuf \u4ece go \u751f\u6210\u7684 proto"))),(0,l.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/mfornos/awesome-microservices"},"mfornos/awesome-microservices")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://goel.io/grpc-100/"},"gRPC Practical Tutorial - Magic That Generates Code")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/LogNet/grpc-spring-boot-starter"},"LogNet/grpc-spring-boot-starter"))))),(0,l.kt)("h2",{id:"note"},"Note"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"guides/",(0,l.kt)("a",{parentName:"li",href:"https://grpc.io/docs/guides/concepts.html"},"concepts"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5b9a\u4e49"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u65b9\u5f0f"),(0,l.kt)("li",{parentName:"ul"},"RPC \u751f\u547d\u5468\u671f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5355\u5411 RPC"),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef\u6d41"),(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u6d41"),(0,l.kt)("li",{parentName:"ul"},"\u53cc\u5411\u6d41"),(0,l.kt)("li",{parentName:"ul"},"\u8d85\u65f6"),(0,l.kt)("li",{parentName:"ul"},"\u7ec8\u7aef"),(0,l.kt)("li",{parentName:"ul"},"\u53d6\u6d88"),(0,l.kt)("li",{parentName:"ul"},"\u5143\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u9053"))))),(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u73b0",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 HTTP2 \u534f\u8bae"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 HTTP2 Trailler \u6765\u6807\u8bc6\u662f\u5426\u8fd8\u6709\u540e\u7eed\u5305",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Web \u65e0\u6cd5\u83b7\u53d6\u5230\u8be5\u4fe1\u606f, \u6240\u4ee5\u65e0\u6cd5\u5b9e\u73b0\u548c\u4f7f\u7528 gRPC")))))),(0,l.kt)("h2",{id:"docker"},"Docker"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul"},"\u907f\u514d\u5b89\u88c5\u7f16\u8bd1\u7b49\u7e41\u6742\u7684\u8fc7\u7a0b"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/wenerme/dockerfiles/tree/master/grpc"},"Dockerfile")),(0,l.kt)("li",{parentName:"ul"},"AlpineLinux Packages ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/wenerme/statics/tree/master/abuild"},"grpc")),(0,l.kt)("li",{parentName:"ul"},"grpc"),(0,l.kt)("li",{parentName:"ul"},"grpc-java"),(0,l.kt)("li",{parentName:"ul"},"grpc-go",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"protowrap"))),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","grpc-swift"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","grpc-slate")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# \u5047\u8bbe api \u4f4d\u4e8e\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 apis\ndocker run --rm -it -v $PWD:/host --workdir /host wener/grpc\n# \u521b\u5efa\u76ee\u6807\u76ee\u5f55\n# \u6ce8\u610f: \u5982\u679c\u5220\u9664\u4e86 proto \u6587\u4ef6, \u76ee\u5f55\u4e0b\u4e4b\u524d\u751f\u6210\u7684\u7684\u6587\u4ef6\u4e0d\u4f1a\u88ab\u5220\u9664, \u6b64\u65f6\u5efa\u8bae\u5220\u9664\u76ee\u5f55\u4ece\u65b0\u751f\u6210\n# \u6ce8\u610f: \u6587\u4ef6\u751f\u6210\u5728\u4e86\u5f53\u524d\u76ee\u5f55, \u9700\u8981\u540c\u6b65\u5230\u9879\u76ee\u4e2d. \u4e5f\u53ef\u4ee5\u76f4\u63a5\u751f\u6210\u5230\u9879\u76ee\u4e2d\nmkdir java javanano php go objc js ruby python csharp node slatedoc\n# \u5b9a\u4e49\u5e38\u7528\u53c2\u6570\n# \u6ce8\u610f: \u5982\u679c\u6587\u4ef6\u5217\u8868\u53d1\u751f\u4e86\u53d8\u5316\u9700\u8981\u4ece\u65b0\u6267\u884c\nCOMMON_ARGS="$(echo -I . apis/**/*.proto)"\n\n# Generate Java\nprotoc $COMMON_ARGS --plugin=$(which protoc-gen-grpc-java) --java_out=./java --grpc-java_out=./java\n# Generate Java Nano\nprotoc $COMMON_ARGS --plugin=$(which protoc-gen-grpc-java) --java_out=nano:./javanano --grpc-java_out=./javanano\n# Generate Go by protowrap\n# The last -I apis is required\nprotowrap $COMMON_ARGS --go_out=plugins=grpc:$HOME/go/src -I apis/\n# Generate slate document\nprotowrap $COMMON_ARGS --slate_out=./slatedoc -I apis/\n\n# Generate Swift\nprotoc $COMMON_ARGS --swift_out=./swift --swiftgrpc_out=./swift\n\n# Generate PHP\nprotoc $COMMON_ARGS --plugin=protoc-gen-grpc=$(which grpc_php_plugin) --php_out=./php --grpc_out=./php\n# Generate CXX\nprotoc $COMMON_ARGS --plugin=protoc-gen-grpc=$(which grpc_cpp_plugin) --cpp_out=./cpp --grpc_out=./cpp\n# Generate C#\nprotoc $COMMON_ARGS --plugin=protoc-gen-grpc=$(which grpc_csharp_plugin) --csharp_out=./csharp --grpc_out=./csharp\n# Generate ObjC\nprotoc $COMMON_ARGS --plugin=protoc-gen-grpc=$(which grpc_objective_c_plugin) --objc_out=./objc --grpc_out=./objc\n# Generate Ruby\nprotoc $COMMON_ARGS --plugin=protoc-gen-grpc=$(which grpc_ruby_plugin) --ruby_out=./ruby --grpc_out=./ruby\n# Generate Python\nprotoc $COMMON_ARGS --plugin=protoc-gen-grpc=$(which grpc_python_plugin) --python_out=./objc --grpc_out=./python\n# Generate Node\nprotoc $COMMON_ARGS --plugin=protoc-gen-grpc=$(which grpc_node_plugin)  --js_out=import_style=commonjs,binary:./node --grpc_out=./node\n')),(0,l.kt)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc/blob/master/INSTALL.md"},"https://github.com/grpc/grpc/blob/master/INSTALL.md")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://hub.docker.com/u/grpc/"},"https://hub.docker.com/u/grpc/")),(0,l.kt)("li",{parentName:"ul"},"\u751f\u6210\u4e3b\u8981\u4f9d\u8d56\u63d2\u4ef6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"protoc-gen-go"),(0,l.kt)("li",{parentName:"ul"},"protoc-gen-grpc-gateway"),(0,l.kt)("li",{parentName:"ul"},"protoc-gen-swagger"),(0,l.kt)("li",{parentName:"ul"},"protoc-gen-grpc-java"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/Juniper/grpc-c"},"Juniper/grpc-c"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301 C"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc-java/tree/master/compiler"},"https://github.com/grpc/grpc-java/tree/master/compiler"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# grpc_cli\n# grpc_cpp_plugin\n# grpc_csharp_plugin\n# grpc_node_plugin\n# grpc_objective_c_plugin\n# grpc_php_plugin\n# grpc_python_plugin\n# grpc_ruby_plugin\nbrew install grpc\n# \u4e0d link \u5219\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\nbrew link grpc\n\n\n# \u53d8\u91cf\u5b9a\u4e49\u7b80\u5316\u64cd\u4f5c\n# =========\n# \u5b89\u88c5 gRPC \u540e\u4f1a\u5305\u542b\u5f88\u591a\u63d2\u4ef6\n# # \u751f\u6210 cpp, node, php, c#, ruby, python, objc \u7684\u65b9\u5f0f\u662f\u4e00\u6837\u7684\nGRPC_BIN=$(brew --prefix grpc)/bin\n# \u5b9a\u4e49 pb \u8def\u5f84\nPROTO_PATH=./apis/\n# \u5bf9\u8def\u5f84\u8fdb\u884c\u5c55\u5f00\nPROTO_FILES=(apis/**/*.proto)\nPROTO_ARGS="-I $PROTO_PATH  ${PROTO_FILES[*]}"\n# \u8986\u76d6 protoc\nalias protoc="protoc $PROTO_ARGS"\n\n\n# gRPC \u751f\u6210\n# =========\n# --js_out=./node \u751f\u6210 protobuf\n# --grpc_out=./node \u751f\u6210 grpc\n# --plugin=protoc-gen-grpc=$GRPC_BIN/grpc_node_plugin \u4f7f\u7528 grpc_node_plugin \u6765\u751f\u6210 node \u7684 grpc\n# -I . \u5305\u4ece\u5f53\u524d\u76ee\u5f55\u67e5\u627e\n# apis/**/*.proto \u751f\u6210\u6240\u6709 apis \u4e0b\u7684 proto\nprotoc --js_out=./node --grpc_out=./node --plugin=protoc-gen-grpc=$GRPC_BIN/grpc_node_plugin -I . apis/**/*.proto\n\n# Golang\n# =========\n# \u4e0d\u652f\u6301\u4e00\u6b21\u6027\u751f\u6210\u591a\u4e2a\u5305\n# https://github.com/golang/protobuf/pull/40\n# \u53ef\u4ee5\u4f7f\u7528 https://github.com/square/goprotowrap \u89c4\u907f\ngo get -u github.com/golang/protobuf/{proto,protoc-gen-go}\ngo get -u google.golang.org/grpc\n# Golang \u53ef\u76f4\u63a5\u751f\u6210 gRPC \u548c Protobuf\nprotoc --go_out=plugins=grpc:$HOME/go/src -I . apis/**/*.proto\n\n# \u4f7f\u7528 protowrap\ngo get -u github.com/square/goprotowrap/cmd/protowrap\n# -I apis/ \u662f\u5fc5\u987b\u7684, \u8981\u6709\u6709\u4e00\u4e2a\u524d\u7f00\nprotowrap --go_out=plugins=grpc:$HOME/go/src -I . -I apis/ apis/**/*.proto\n\n# https://github.com/gogo/protobuf\n# gogoprotobuf is a fork of golang/protobuf with extra code generation features.\n# \u6269\u5c55 https://github.com/gogo/protobuf/blob/master/extensions.md\n#\n# protoc-gen-gogofast (same as gofast, but imports gogoprotobuf)\n# protoc-gen-gogofaster (same as gogofast, without XXX_unrecognized, less pointer fields)\n# protoc-gen-gogoslick (same as gogofaster, but with generated string, gostring and equal methods)\ngo get -u github.com/gogo/protobuf/protoc-gen-gofast\nprotowrap --gofast_out=plugins=grpc:$HOME/go/src -I . -I apis/ apis/**/*.proto\n\n# Java\n# =========\n# Java \u63d2\u4ef6\u9700\u8981\u81ea\u5df1\u7f16\u8bd1\ngit clone https://github.com/grpc/grpc-java\ncd grpc-java/compiler\n../gradlew java_pluginExecutable\n# \u63d2\u4ef6\u5b8c\u6574\u8def\u5f84\nrealpath build/exe/java_plugin/protoc-gen-grpc-java\nGEN_JAVA="$(realpath build/exe/java_plugin/protoc-gen-grpc-java)"\n\n# \u751f\u6210 gRPC\nprotoc --plugin=protoc-gen-grpc-java=$GEN_JAVA --grpc-java_out=$PWD/java -I . proto/**/*.proto\n# \u751f\u6210 protobuf\nprotoc -I . --java_out=./java proto/**/*.proto\n# \u751f\u6210 nano \u7684 pb\nprotoc -I . --javanano_out=./java proto/**/*.proto\n# \u751f\u6210 gRPC lite\nprotoc --plugin=protoc-gen-grpc-java=$GEN_JAVA --grpc-java_out=lite:$PWD/java -I . proto/**/*.proto\n# \u751f\u6210 gRPC nano\nprotoc --plugin=protoc-gen-grpc-java=$GEN_JAVA --grpc-java_out=nano:$PWD/java -I . proto/**/*.proto\n\n# Swift\n# =========\n# https://github.com/grpc/grpc-swift\ngit clone https://github.com/grpc/grpc-swift\ncd grpc-swift/Plugin\nmake\nGEN_SWIFT=$(realpath .)\n# \u751f\u6210 pb \u548c grpc\nprotoc --plugin=$GEN_SWIFT/protoc-gen-swift --swift_out=./swift -I . proto/**/*.proto\nprotoc --plugin=$GEN_SWIFT/protoc-gen-swiftgrpc --swiftgrpc_out=./swift -I . proto/**/*.proto\n\n# Node\n# =========\nprotoc --js_out=./node --grpc_out=./node --plugin=protoc-gen-grpc=$GRPC_BIN/grpc_node_plugin -I . proto/**/*.proto\n\n# \u4f7f\u7528 grpc-tools \u751f\u6210\nyarn global add grpc-tools\nprotoc -I=. ./protos/product.proto \\\n  --js_out=import_style=commonjs,binary:./server \\\n  --grpc_out=./server \\\n  --plugin=protoc-gen-grpc=`which grpc_tools_node_protoc_plugin`\n\n# ts-protoc-gen\n# =========\n# https://github.com/improbable-eng/ts-protoc-gen\n# \u751f\u6210 Typescript \u5b9a\u4e49 .d.ts\n\n# Gateway\n# =========\n# Web <-> gRPC\n# \u751f\u6210\u7f51\u5173\u4ee3\u7801\u548c Swagger \u914d\u7f6e\ngo get -u github.com/grpc-ecosystem/grpc-gateway/protoc-gen-grpc-gateway\ngo get -u github.com/grpc-ecosystem/grpc-gateway/protoc-gen-swagger\n\n\n# \u751f\u6210 stub\nprotoc --go_out=plugins=grpc:. -I proto/ proto/hello.proto\n# \u751f\u6210\u53cd\u5411\u4ee3\u7406\nprotoc --grpc-gateway_out=logtostderr=true:. -I proto/ proto/hello.proto\n# \u751f\u6210 swagger\nprotoc --swagger_out=logtostderr=true:. -I proto/ proto/hello.proto\n\n# prototools\n# =========\n# \u751f\u6210\u6587\u6863, json, dump\n# https://github.com/sourcegraph/prototools\ngo get -u sourcegraph.com/sourcegraph/prototools/cmd/protoc-gen-doc\n# \u5982\u679c\u627e\u4e0d\u5230\u6587\u4ef6\u53ef\u4ee5\u8003\u8651\u6307\u5b9a filemap=./tmpl/filemap.xml\nprotowrap --doc_out=./apidoc -I . -I apis/ apis/**/*.proto\n\n# pseudomuto/protoc-gen-doc\n# =========\n# \u751f\u6210\u6587\u6863, \u652f\u6301\u751f\u6210 HTML, JSON, DocBook, Markdown\n# \u9ed8\u8ba4\u6a21\u677f\u6bd4 prototools \u597d\u770b\n# https://github.com/pseudomuto/protoc-gen-doc\ngo get -u github.com/pseudomuto/protoc-gen-doc/cmd/...\n')),(0,l.kt)("h2",{id:"java"},"Java"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc-java/issues/3458"},"grpc/grpc-java#3458")," - FR: Port sharing with traditional HTTP services",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/netty/netty/issues/3667"},"netty/netty#3667")," - h2childchan: Model streams in HTTP/2 as child channels")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'class Tests{\n  // TLS \u670d\u52a1\u7aef\n  @Test\n  public void testTLSSvr() throws IOException, InterruptedException {\n    java.security.Security.addProvider(\n        new org.bouncycastle.jce.provider.BouncyCastleProvider()\n    );\n\n    int port = 8443;\n    Server server = NettyServerBuilder\n        .forPort(port)\n        .sslContext(GrpcSslContexts\n            .forServer(new File("localhost.pem"),new File("localhost-key.pem"))\n            .trustManager(new File("ca.pem"))\n            // \u8981\u6c42\u5ba2\u6237\u7aef\u8ba4\u8bc1\n            .clientAuth(ClientAuth.REQUIRE).build())\n        .addService(new MyServiceImpl())\n        .build();\n    log.info("Server started, listening on " + port);\n    server.start().awaitTermination();\n  }\n\n  // TLS \u5ba2\u6237\u7aef\n  @Test\n  public void testTLSCli() throws Exception {\n    java.security.Security.addProvider(\n        new org.bouncycastle.jce.provider.BouncyCastleProvider()\n    );\n    // \u4f7f\u7528 Netty \u5b9e\u73b0, \u4e5f\u53ef\u4ee5\u4f7f\u7528 OkHttp \u5b9e\u73b0\n    ManagedChannel channel = NettyChannelBuilder\n        .forAddress("localhost", 8443)\n        .sslContext(GrpcSslContexts\n            .forClient()\n            .trustManager(new File("ca.pem"))\n            // \u53cc\u5411\u8ba4\u8bc1\u624d\u9700\u8981\n            .keyManager(\n                new File("cli.pem"),\n                new File("cli-key.pem")\n            )\n            .build())\n        .build();\n    // \u521b\u5efa\u963b\u585e\u5ba2\u6237\u7aef\n    MyServiceGrpcBlockingStub stub = MyServiceGrpc.newBlockingStub(channel);\n    GetInfoResponse info = stub.getInfo(GetInfoRequest.newBuilder().build());\n    System.out.println(info.getName());\n  }\n}\n')),(0,l.kt)("h2",{id:"php"},"PHP"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},'<?php\nrequire __DIR__ . \'/vendor/autoload.php\';\n\n$creds =\n  // \u65e0 TLS\n  Grpc\\ChannelCredentials::createInsecure()\n  // \u53ea\u914d\u7f6e CA \u5982\u679c\u670d\u52a1\u7aef\u4e0d\u8981\u6c42\u5ba2\u6237\u7aef\u8ba4\u8bc1\n  // \\Grpc\\ChannelCredentials::createSsl(file_get_contents("ca.pem"))\n  // \u53cc\u5411\u8ba4\u8bc1, \u670d\u52a1\u7aef\u8981\u6c42\u5ba2\u6237\u7aef\u8ba4\u8bc1\n  // \\Grpc\\ChannelCredentials::createSsl(file_get_contents("ca.pem"),file_get_contents("cli-key.pem"),file_get_contents("cli.pem"))\n;\n$client = new \\Wener\\Service\\V1\\InfoServiceClient("localhost:5002", [\n    \'credentials\' => $creds,\n]);\n\n/**\n * @var \\Wener\\Service\\V1\\GetInfoResponse $reply\n * @var \\Wener\\Api\\GrpcStatus $status Customized type for ide to hint type\n */\nlist($reply, $status) = $client->GetInfo(new \\Wener\\Service\\V1\\GetInfoRequest())->wait();\n\necho $status->code . PHP_EOL;\necho $reply->getName() . PHP_EOL;\n\n// All Status\nprint_r($status);\n// JSON\n// \u518d\u6b21\u89e3\u7801\u7f16\u7801\u662f\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\necho json_encode(json_decode($reply->serializeToJsonString()), JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE) . PHP_EOL;\n')),(0,l.kt)("h2",{id:"node"},"Node"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc/issues/8233"},"#8233 Typescript typings for node package"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u6700\u57fa\u672c\u7684\u53ea\u9700\u8981\u8fd9\u4e24\u4e2a\u4f9d\u8d56\nyarn add google-protobuf\nyarn add grpc\n\n# \u8c03\u8bd5\u76f8\u5173\u7684\u73af\u5883\u53d8\u91cf\nGRPC_TRACE=all\nGRPC_VERBOSITY=DEBUG\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const grpc = require('grpc');\nconst fs = require('fs');\n\n// \u751f\u6210\u7684 pb \u5bf9\u8c61\nconst messages = require('./service_pb');\n// \u751f\u6210 grpc \u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\nconst services = require('./service_grpc_pb');\n\nlet client = new services.ServiceClient(\n  'service.wener.me:443',\n  // \u65e0 TLS\n  // grpc.credentials.createInsecure(),\n  // \u4f7f\u7528 self-signed \u8bc1\u4e66\n  grpc.credentials.createSsl(fs.readFileSync('ca.pem'), fs.readFileSync('cli-key.pem'), fs.readFileSync('cli.pem')),\n);\n\n// \u53d1\u8d77\u8bf7\u6c42\nlet request = new messages.GetInfoRequest();\nclient.getInfo(request, (err, response) => {\n  console.log('Service name', response.getName());\n});\n")),(0,l.kt)("h2",{id:"golang"},"Golang"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# http2 \u76f8\u5173\u7684\u73af\u5883\u53d8\u91cf\nGODEBUG=http2client=0  # disable HTTP/2 client support\nGODEBUG=http2server=0  # disable HTTP/2 server support\nGODEBUG=http2debug=1   # enable verbose HTTP/2 debug logs\nGODEBUG=http2debug=2   # ... even more verbose, with frame dumps\n")),(0,l.kt)("h3",{id:"client"},"Client"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},"package main\n\nfunc main(){\n\n}\n")),(0,l.kt)("h3",{id:"server"},"Server"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package main\n\nvar (\n    ServerCert string\n    ServerKey  string\n    RootCA     string\n    Addr       string\n)\n\nfunc main() {\n    flag.StringVar(&ServerCert, "cert", "", "")\n    flag.StringVar(&ServerKey, "key", "", "")\n    flag.StringVar(&RootCA, "ca", "", "")\n    flag.StringVar(&Addr, "addr", "", "")\n\n    flag.Parse()\n    var srv *grpc.Server\n    lis, err := net.Listen("tcp", Addr)\n    if err != nil {\n        panic(fmt.Errorf("could not list on %s: %s", Addr, err))\n    }\n\n    if ServerCert == "" {\n        srv = grpc.NewServer()\n    } else {\n        logrus.WithField("cert", ServerCert).Info("With TLS")\n        // \u8bfb\u53d6\u8bc1\u4e66\u4fe1\u606f\n        certificate, err := tls.LoadX509KeyPair(ServerCert, ServerKey)\n        if err != nil {\n            panic(fmt.Errorf("could not load client key pair: %s", err))\n        }\n\n        // Create a certificate pool from the certificate authority\n        certPool := x509.NewCertPool()\n        ca, err := ioutil.ReadFile(RootCA)\n        if err != nil {\n            panic(fmt.Errorf("could not read ca certificate: %s", err))\n        }\n\n        // Append the certificates from the CA\n        if ok := certPool.AppendCertsFromPEM(ca); !ok {\n            panic(errors.New("failed to append ca certs"))\n        }\n\n        creds := credentials.NewTLS(&tls.Config{\n      // \u5982\u4f55\u5bf9\u5ba2\u6237\u7aef\u8fdb\u884c\u8ba4\u8bc1, \u53ef\u8fdb\u884c\u53cc\u5411\u8ba4\u8bc1\n            ClientAuth:   tls.VerifyClientCertIfGiven,\n            Certificates: []tls.Certificate{certificate},\n            ClientCAs:    certPool,\n        })\n        srv = grpc.NewServer(grpc.Creds(creds))\n    }\n\n    // Create the gRPC server with the credentials\n    service.RegisterInfoServiceServer(srv, &DemoStatus{})\n\n    logrus.WithField("addr", Addr).Info("Serving")\n    // Serve and Listen\n    if err := srv.Serve(lis); err != nil {\n        panic(fmt.Errorf("grpc serve error: %s", err))\n    }\n}\n\ntype DemoStatus struct {\n    service.InfoServiceServer\n}\n\nfunc (DemoStatus) GetInfo(context.Context, *service.GetInfoRequest) (*service.GetInfoResponse, error) {\n    logrus.Info("Handle request")\n    return &service.GetInfoResponse{Name: "Demo Service"}, nil\n}\n')),(0,l.kt)("h2",{id:"web"},"Web"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md"},"gRPC Web")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/dcodeIO/ProtoBuf.js/"},"https://github.com/dcodeIO/ProtoBuf.js/"))),(0,l.kt)("h2",{id:"typescript"},"Typescript"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/ts-protoc-gen"},"https://www.npmjs.com/package/ts-protoc-gen")),(0,l.kt)("h2",{id:"grpc-gateway"},"grpc-gateway"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc-ecosystem/grpc-gateway"},"grpc-gateway"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"gRPC to JSON proxy generator"))),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301 googleapis \u4e2d\u7684 http \u5b9a\u4e49"),(0,l.kt)("li",{parentName:"ul"},"Features",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Generating JSON API handlers"),(0,l.kt)("li",{parentName:"ul"},"Method parameters in request body"),(0,l.kt)("li",{parentName:"ul"},"Method parameters in request path"),(0,l.kt)("li",{parentName:"ul"},"Method parameters in query string"),(0,l.kt)("li",{parentName:"ul"},"Enum fields in path parameter (including repeated enum fields)."),(0,l.kt)("li",{parentName:"ul"},"Mapping streaming APIs to newline-delimited JSON streams"),(0,l.kt)("li",{parentName:"ul"},"Mapping HTTP headers with Grpc-Metadata- prefix to gRPC metadata (prefixed with grpcgateway-)"),(0,l.kt)("li",{parentName:"ul"},"Optionally emitting API definition for Swagger."),(0,l.kt)("li",{parentName:"ul"},"Setting gRPC timeouts through inbound HTTP Grpc-Timeout header."))),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u53ea\u62f7\u8d1d\u9700\u8981\u7684\u5bfc\u5165\u6587\u4ef6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"google/api/annotations.proto")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"google/api/http.proto")))),(0,l.kt)("li",{parentName:"ul"},"\u7136\u540e\u5728 rpc \u4e2d\u6dfb\u52a0 http \u5b9a\u4e49\u5373\u53ef")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'rpc SayHello (HelloRequest) returns (HelloReply) {\n  option (google.api.http) = {\n      post:"/v1/greeter/hello"\n      body:"*"\n  };\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5b89\u88c5\ngo get -u github.com/grpc-ecosystem/grpc-gateway/protoc-gen-grpc-gateway\ngo get -u github.com/grpc-ecosystem/grpc-gateway/protoc-gen-swagger\ngo get -u github.com/golang/protobuf/protoc-gen-go\n\n# \u751f\u6210 stub\nprotoc --go_out=plugins=grpc:. -I proto/ proto/hello.proto\n# \u751f\u6210\u53cd\u5411\u4ee3\u7406\nprotoc --grpc-gateway_out=logtostderr=true:. -I proto/ proto/hello.proto\n# \u751f\u6210 swagger\nprotoc --swagger_out=logtostderr=true:. -I proto/ proto/hello.proto\n\n# \u62c9\u53d6\u76f8\u5173\u4f9d\u8d56\ngo get .\n\n# \u6dfb\u52a0 main, \u542f\u52a8\u65f6\u8c03\u7528\u6ce8\u518c\n")),(0,l.kt)("h2",{id:"auth"},"Auth"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/grpc/grpc-java/blob/master/SECURITY.md"},"grpc/grpc-java/SECURITY.md")),(0,l.kt)("li",{parentName:"ul"},"guides/",(0,l.kt)("a",{parentName:"li",href:"https://grpc.io/docs/guides/auth.html"},"auth"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"SSL/TLS \u53cc\u5411\u8ba4\u8bc1"),(0,l.kt)("li",{parentName:"ul"},"\u57fa\u4e8e Token"))),(0,l.kt)("li",{parentName:"ul"},"\u6388\u6743\u5206\u4e3a\u6574\u4e2a\u901a\u9053\u548c\u5355\u6b21\u8bf7\u6c42"),(0,l.kt)("li",{parentName:"ul"},"gRPC \u53ef\u4ee5\u81ea\u5e26\u5143\u6570\u636e\u5934, \u56e0\u6b64\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6388\u6743")),(0,l.kt)("h2",{id:"\u6848\u4f8b"},"\u6848\u4f8b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/cockroachdb/cockroach/tree/master/pkg/roachpb"},"cockroachdb/cockroach")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/docker/swarmkit/tree/master/api"},"docker/swarmkit")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/gogo/protobuf#users"},"https://github.com/gogo/protobuf#users"))),(0,l.kt)("h3",{id:"gcp"},"GCP"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://github.com/googleapis/googleapis"},"googleapis/googleapis"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://github.com/googleapis/toolkit"},"googleapis/toolkit"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://github.com/googleapis/artman"},"googleapis/artman"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"GAPIC")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"selector"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9017\u53f7\u5206\u9694"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"*")," \u505a\u5339\u914d, \u4f46\u662f\u53ea\u80fd\u653e\u5728\u6700\u540e",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"foo.*"),", \u4f46\u4e0d\u80fd\u5199 ",(0,l.kt)("inlineCode",{parentName:"li"},"foo.*b"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"foo.*.abc")),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"*")," \u5339\u914d\u6240\u6709"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u670d\u52a1\u7ed3\u6784"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"api",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u63a5\u53e3\u76f8\u5173\u7684\u5b9a\u4e49"),(0,l.kt)("li",{parentName:"ul"},"backend.proto",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5b9a\u4e49\u670d\u52a1\u7684\u540e\u7aef"))),(0,l.kt)("li",{parentName:"ul"},"service.proto",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u670d\u52a1\u7684\u5b9a\u4e49"))),(0,l.kt)("li",{parentName:"ul"},"servicecontrol",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u63a7\u5236"),(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u670d\u52a1\u7684\u68c0\u67e5\u62a5\u544a"))),(0,l.kt)("li",{parentName:"ul"},"servicemanagement",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7ba1\u7406"),(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u670d\u52a1\u7684 CRUD, \u542f\u7528\u505c\u7528"))))),(0,l.kt)("li",{parentName:"ul"},"appengine")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# artman\n# \u5305\u542b\u4e86 grpc \u751f\u6210\u4e2a\u4e2a\u8bed\u8a00\u7684\u73af\u5883\ndocker pull googleapis/artman\n\ndocker run -it --rm -v $PWD/googleapis:/googleapis -v $PWD/artman:/artman -w /googleapis googleapis/artman\n# artman --api pubsub --language python\n\n")),(0,l.kt)("h4",{id:"service-control"},"Service Control"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://cloud.google.com/service-control/overview"},"Google Service Control")),(0,l.kt)("li",{parentName:"ul"},"How to control access to your service."),(0,l.kt)("li",{parentName:"ul"},"How to validate API keys."),(0,l.kt)("li",{parentName:"ul"},"How to send logging and monitoring data to both consumers and producers."),(0,l.kt)("li",{parentName:"ul"},"How to create and manage dashboards to visualize such data."),(0,l.kt)("li",{parentName:"ul"},"How to scale the control plane components with your service.")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://cloud.google.com/service-control/images/arch.svg",alt:"Architecture"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Managed services",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Google Service Management \u7ba1\u7406\u6bcf\u4e2a\u670d\u52a1\u548c\u5176\u914d\u7f6e, \u7528\u4e8e\u5b9a\u5236\u5316 Google Service Control \u7684\u884c\u4e3a. \u670d\u52a1\u914d\u7f6e\u4e5f\u88ab\u7528\u4e8e Google Cloud Platform Console \u663e\u793a\u5176\u914d\u7f6e, \u542f\u7528/\u7981\u7528 \u7b49."),(0,l.kt)("li",{parentName:"ul"},"For example:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Google Cloud Pub/Sub (pubsub.googleapis.com)"),(0,l.kt)("li",{parentName:"ul"},"Google Cloud Vision (vision.googleapis.com)"),(0,l.kt)("li",{parentName:"ul"},"Google Cloud Bigtable (bigtable.googleapis.com)"),(0,l.kt)("li",{parentName:"ul"},"Google Cloud Datastore (datastore.googleapis.com)"))))),(0,l.kt)("li",{parentName:"ul"},"Operations",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8868\u793a\u88ab\u7ba1\u7406\u670d\u52a1\u7684\u6d3b\u52a8, \u4f8b\u5982\u63a5\u53e3\u8c03\u7528\u6216\u8d44\u6e90\u4f7f\u7528"),(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u64cd\u4f5c\u90fd\u5173\u8054\u4e00\u4e2a\u88ab\u7ba1\u7406\u7684\u670d\u52a1,\u548c\u8c03\u7528\u8005, \u4e5f\u5305\u542b\u8c03\u7528\u7684\u76f8\u5173\u4fe1\u606f, \u4f8b\u5982\u8c03\u7528\u65b9\u6cd5, \u8d44\u6e90\u4f7f\u7528\u91cf\u7b49"))),(0,l.kt)("li",{parentName:"ul"},"Check",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Check if the consumer is still active."),(0,l.kt)("li",{parentName:"ul"},"Check if the consumer has enabled the service."),(0,l.kt)("li",{parentName:"ul"},"Check if the API key is still valid."),(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u63a5\u53e3\u8fdb\u884c\u68c0\u6d4b\u4ee5\u4fdd\u8bc1\u66f4\u597d\u7684\u6027\u80fd, \u66f4\u9ad8\u7684\u53ef\u7528\u6027"))),(0,l.kt)("li",{parentName:"ul"},"Report")),(0,l.kt)("h4",{id:"service-management"},"Service Management"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Google ",(0,l.kt)("a",{parentName:"li",href:"https://cloud.google.com/service-management/overview"},"Service Management")),(0,l.kt)("li",{parentName:"ul"},"Service producer",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7531\u8c37\u6b4c\u5f00\u53d1\u8005\u8d1f\u8d23\u53d1\u5e03\u7ef4\u62a4\u88ab\u7ba1\u7406\u7684\u670d\u52a1. \u6bcf\u4e2a\u88ab\u7ba1\u7406\u7684\u670d\u52a1\u90fd\u7531\u4e00\u4e2a\u670d\u52a1\u751f\u4ea7\u8005\u6240\u6709"))),(0,l.kt)("li",{parentName:"ul"},"Service consumers",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u542f\u7528\u4e86\u63a5\u53e3\u8c03\u7528\u7684\u7ba1\u7406\u670d\u52a1, \u4e00\u4e2a\u88ab\u7ba1\u7406\u7684\u670d\u52a1\u53ef\u4ee5\u6709\u5f88\u591a\u670d\u52a1\u6d88\u8d39\u8005"))),(0,l.kt)("li",{parentName:"ul"},"Service configurations",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u88ab\u7ba1\u7406\u7684\u670d\u52a1\u90fd\u6709\u81ea\u5df1\u7684\u914d\u7f6e\u63cf\u8ff0, \u5305\u62ec\u540d\u5b57, \u6807\u9898, RPC \u63a5\u53e3\u5b9a\u4e49, REST \u63a5\u53e3\u5b9a\u4e49, \u6587\u6863, \u6388\u6743\u7b49"))),(0,l.kt)("li",{parentName:"ul"},"Service rollouts",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6d41\u91cf\u63a7\u5236")))),(0,l.kt)("h2",{id:"\u6e90\u7801\u548c\u4f7f\u7528\u5206\u6790"},"\u6e90\u7801\u548c\u4f7f\u7528\u5206\u6790"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"PB \u9644\u5e26\u4e86\u6240\u6709\u89e3\u6790\u540e\u7684\u6d88\u606f\u683c\u5f0f\u5b9a\u4e49"),(0,l.kt)("li",{parentName:"ul"},"PB 3 \u589e\u52a0\u4e86 java-util, \u53ef\u4ee5\u8fdb\u884c JSON \u5e8f\u5217\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"JsonFormat")," \u6253\u5370\u65f6\u9700\u8981\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"com.google.protobuf.util.JsonFormat.TypeRegistry")," \u6765\u53cd\u67e5\u5177\u4f53\u7c7b"))),(0,l.kt)("li",{parentName:"ul"},"\u4f18\u5316\u6a21\u5f0f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"SPEED",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Generate complete code for parsing, serialization, etc."))),(0,l.kt)("li",{parentName:"ul"},"CODE_SIZE",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Use ReflectionOps to implement these methods."))),(0,l.kt)("li",{parentName:"ul"},"LITE_RUNTIME",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Generate code using MessageLite and the lite runtime."))))),(0,l.kt)("li",{parentName:"ul"},"\u547d\u540d\u7a7a\u95f4",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4e0e Java \u547d\u540d\u7a7a\u95f4\u7684\u6982\u5ff5\u76f8\u4f3c"),(0,l.kt)("li",{parentName:"ul"},"\u751f\u6210\u7684\u7c7b\u7684\u5305\u540d\u53ef\u4ee5\u4e0d\u540c\u4e8e proto \u7684\u5305"),(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u5b9a\u4e49\u7684\u6d88\u606f\u90fd\u6709\u81ea\u5df1\u7684\u7c7b\u578b\u548c\u547d\u540d\u7a7a\u95f4"),(0,l.kt)("li",{parentName:"ul"},"\u56e0\u6b64 Any \u6d88\u606f\u624d\u80fd\u6839\u636e\u4e00\u4e2a url \u548c\u6570\u636e\u6765\u8fd8\u539f\u6d88\u606f"),(0,l.kt)("li",{parentName:"ul"},"\u7c7b\u578b\u7684\u5f15\u7528\u4e5f\u662f\u57fa\u4e8e\u8be5\u547d\u540d\u7a7a\u95f4")))),(0,l.kt)("h3",{id:"java-1"},"Java"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef\u652f\u6301 Netty"),(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u652f\u6301 OkHttp \u548c Netty"),(0,l.kt)("li",{parentName:"ul"},"\u4f20\u8f93\u5c42\u89e3\u6790\u51fa\u8bf7\u6c42\u7684\u65b9\u6cd5",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u65b9\u6cd5\u540d\u5b9e\u9645\u5305\u542b\u4e86\u8bf7\u6c42\u7c7b ",(0,l.kt)("inlineCode",{parentName:"li"},"foo.bar.Greeter/SayHello")))),(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u65b9\u6cd5\u89e6\u53d1\u4f4d\u7f6e\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.ServerCall.Listener")," \u7684\u4e0d\u540c\u5b9e\u73b0"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerServiceDefinition"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5b9a\u4e49"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServiceDescriptor"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u63cf\u8ff0"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"MethodDescriptor"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u65b9\u6cd5\u63cf\u8ff0"),(0,l.kt)("li",{parentName:"ul"},"\u7c7b\u578b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"UNARY - \u8bf7\u6c42 -> \u54cd\u5e94"),(0,l.kt)("li",{parentName:"ul"},"CLIENT_STREAMING - \u6d41\u8bf7\u6c42 -> \u54cd\u5e94"),(0,l.kt)("li",{parentName:"ul"},"SERVER_STREAMING - \u8bf7\u6c42 -> \u6d41\u54cd\u5e94"),(0,l.kt)("li",{parentName:"ul"},"BIDI_STREAMING - \u6d41\u8bf7\u6c42 -> \u6d41\u54cd\u5e94"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"HandlerRegistry"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerInterceptor"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef\u62e6\u622a\u5668"),(0,l.kt)("li",{parentName:"ul"},"\u5e38\u89c1\u7528\u4f8b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6388\u6743\u8ba4\u8bc1"),(0,l.kt)("li",{parentName:"ul"},"\u65e5\u5fd7\u76d1\u63a7"),(0,l.kt)("li",{parentName:"ul"},"\u4ee3\u7406"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCallHandler"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u8bf7\u6c42\u5904\u7406\u7684\u65b9\u6cd5"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Stream"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u7684\u901a\u8baf\u6d41"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.Context"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8de8\u7ebf\u7a0b\u7684\u5904\u7406\u4e0a\u4e0b\u6587"))),(0,l.kt)("li",{parentName:"ul"},"\u901f\u5ea6\u4f18\u5316",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4f1a\u751f\u6210 ",(0,l.kt)("inlineCode",{parentName:"li"},"MethodHandlers")),(0,l.kt)("li",{parentName:"ul"},"\u7edf\u4e00\u65b9\u6cd5\u8c03\u7528"),(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u6240\u6709\u7c7b\u578b\u7684\u65b9\u6cd5\u8c03\u7528\u63a5\u53e3",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.stub.ServerCalls.UnaryMethod")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.stub.ServerCalls.ServerStreamingMethod")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.stub.ServerCalls.ClientStreamingMethod")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.stub.ServerCalls.BidiStreamingMethod")))),(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u8c03\u7528\u65f6\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"switch")," \u548c\u4e8b\u5148\u7ed9\u5b9a\u7684\u65b9\u6cd5 id \u8fdb\u884c\u8bf7\u6c42, \u907f\u514d\u4f7f\u7528\u53cd\u5c04"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.Server"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"InternalServer"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7528\u4e8e\u4e0d\u540c\u94fe\u63a5\u5c42\u5b9e\u73b0\u7684\u63a5\u53e3"),(0,l.kt)("li",{parentName:"ul"},"\u5efa\u7acb\u65b0\u7684\u94fe\u63a5\u65f6\u56de\u8c03 ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerListener#transportCreated")))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.Status"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8868\u8fbe\u5f02\u5e38\u548c\u72b6\u6001"))),(0,l.kt)("li",{parentName:"ul"},"\u57fa\u7840",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Stream")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"StreamListener")),(0,l.kt)("li",{parentName:"ul"},"\u57fa\u672c\u6d41\u7a0b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u65b9\u6cd5 -> Call -> Stream"),(0,l.kt)("li",{parentName:"ul"},"\u751f\u6210 Call \u65f6\u4f1a\u521b\u5efa\u5bf9\u5e94\u7684 Feature"),(0,l.kt)("li",{parentName:"ul"},"\u540c\u6b65\u8bf7\u6c42\u662f\u5faa\u73af\u7b49\u5f85 Feature \u5b8c\u6210"))),(0,l.kt)("li",{parentName:"ul"},"\u5b8c\u6574\u65b9\u6cd5\u540d\u7684\u547d\u540d\u89c4\u5219\u4e3a",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6574\u7684\u670d\u52a1\u540d/\u65b9\u6cd5\u540d")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"wener.scel.v1.Scel/Search")))))),(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ClientCall"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ClientCall.Listener"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"onHeaders(Metadata)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"onMessage(RespT)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"onClose(Status,Metadata)")))),(0,l.kt)("li",{parentName:"ul"},"\u5904\u7406\u6d41\u7a0b"),(0,l.kt)("li",{parentName:"ul"},"\u804c\u8d23"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ManagedChannelBuilder")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ClientTransport"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ManagedClientTransport"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6709\u751f\u547d\u5468\u671f\u7ba1\u7406"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ConnectionClientTransport"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u57fa\u4e8e\u94fe\u63a5"),(0,l.kt)("li",{parentName:"ul"},"\u6709\u5c5e\u6027"))))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ClientStream")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ClientStreamListener")),(0,l.kt)("li",{parentName:"ul"},"\u751f\u6210\u7684\u5ba2\u6237\u7aef\u5206\u4e3a\u4e09\u79cd\u7c7b\u578b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Stub",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6709\u6240\u6709\u7684\u65b9\u6cd5"),(0,l.kt)("li",{parentName:"ul"},"\u54cd\u5e94\u5747\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"io.grpc.stub.StreamObserver")))),(0,l.kt)("li",{parentName:"ul"},"BlockingStub",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u963b\u585e\u63a5\u53e3"),(0,l.kt)("li",{parentName:"ul"},"\u54cd\u5e94\u4e3a\u76f4\u63a5\u7684\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u6d41\u54cd\u5e94\u4e3a Iterator"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u751f\u6210\u6d41\u8bf7\u6c42"))),(0,l.kt)("li",{parentName:"ul"},"FeatureStub",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4ee5 Feature \u4f5c\u4e3a\u8fd4\u56de\u72b6\u6001"))))))),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5904\u7406\u6d41\u7a0b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerStream")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerStreamListener")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerStreamListener#messageRead"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4f1a\u5bf9\u8bf7\u6c42\u5bf9\u8c61\u8fdb\u884c\u89e3\u6790"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall.Listener#onMessage"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u62e6\u622a\u5904\u7406\u5728\u8fd9\u4e00\u5c42\u53d1\u751f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCallHandler")," \u8d1f\u8d23\u4ece ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall")," \u521b\u5efa ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall.Listener")),(0,l.kt)("li",{parentName:"ul"},"\u5373\u5b9e\u9645\u7684\u65b9\u6cd5\u5904\u7406\u53d1\u751f\u5728\u8fd9\u91cc"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCalls"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u63d0\u4f9b ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall")," \u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerCallHandler")," \u7684\u9002\u914d"),(0,l.kt)("li",{parentName:"ul"},"\u4e3b\u8981\u7528\u4e8e\u7b80\u5316\u5b9e\u73b0"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall.Listener")),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u65b9\u6cd5 ",(0,l.kt)("inlineCode",{parentName:"li"},"MethodDescriptor")," \u5bf9\u5e94\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"li"},"ServerCallHandler")))),(0,l.kt)("li",{parentName:"ul"},"\u804c\u8d23",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall.Listener")," \u7528\u4e8e\u63a5\u6536\u6d88\u606f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCall")," \u7528\u4e8e\u53d1\u9001\u548c\u5411\u5ba2\u6237\u7aef\u8bf7\u6c42\u6d88\u606f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerCallHandler")," \u65b9\u6cd5\u5904\u7406"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerBuilder")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerTransport")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerStream")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ServerStreamListener")))),(0,l.kt)("li",{parentName:"ul"},"Netty",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyServerProvider")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyChannelProvider")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyServer")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyServerHandler"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef GRPC \u5904\u7406"),(0,l.kt)("li",{parentName:"ul"},"\u6267\u884c\u4e0a\u4e0b\u6587"))),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyServerTransport")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyServerStream")))),(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyClientTransport")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NettyClientStream"))))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"protoc --help")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ protoc --help\nUsage: protoc [OPTION] PROTO_FILES\nParse PROTO_FILES and generate output based on the options given:\n  -IPATH, --proto_path=PATH   Specify the directory in which to search for\n                              imports.  May be specified multiple times;\n                              directories will be searched in order.  If not\n                              given, the current working directory is used.\n  --version                   Show version info and exit.\n  -h, --help                  Show this text and exit.\n  --encode=MESSAGE_TYPE       Read a text-format message of the given type\n                              from standard input and write it in binary\n                              to standard output.  The message type must\n                              be defined in PROTO_FILES or their imports.\n  --decode=MESSAGE_TYPE       Read a binary message of the given type from\n                              standard input and write it in text format\n                              to standard output.  The message type must\n                              be defined in PROTO_FILES or their imports.\n  --decode_raw                Read an arbitrary protocol message from\n                              standard input and write the raw tag/value\n                              pairs in text format to standard output.  No\n                              PROTO_FILES should be given when using this\n                              flag.\n  -oFILE,                     Writes a FileDescriptorSet (a protocol buffer,\n    --descriptor_set_out=FILE defined in descriptor.proto) containing all of\n                              the input files to FILE.\n  --include_imports           When using --descriptor_set_out, also include\n                              all dependencies of the input files in the\n                              set, so that the set is self-contained.\n  --include_source_info       When using --descriptor_set_out, do not strip\n                              SourceCodeInfo from the FileDescriptorProto.\n                              This results in vastly larger descriptors that\n                              include information about the original\n                              location of each decl in the source file as\n                              well as surrounding comments.\n  --dependency_out=FILE       Write a dependency output file in the format\n                              expected by make. This writes the transitive\n                              set of input file paths to FILE\n  --error_format=FORMAT       Set the format in which to print errors.\n                              FORMAT may be 'gcc' (the default) or 'msvs'\n                              (Microsoft Visual Studio format).\n  --print_free_field_numbers  Print the free field numbers of the messages\n                              defined in the given proto files. Groups share\n                              the same field number space with the parent\n                              message. Extension ranges are counted as\n                              occupied fields numbers.\n\n  --plugin=EXECUTABLE         Specifies a plugin executable to use.\n                              Normally, protoc searches the PATH for\n                              plugins, but you may specify additional\n                              executables not in the path using this flag.\n                              Additionally, EXECUTABLE may be of the form\n                              NAME=PATH, in which case the given plugin name\n                              is mapped to the given executable even if\n                              the executable's own name differs.\n  --cpp_out=OUT_DIR           Generate C++ header and source.\n  --csharp_out=OUT_DIR        Generate C# source file.\n  --java_out=OUT_DIR          Generate Java source file.\n  --javanano_out=OUT_DIR      Generate Java Nano source file.\n  --js_out=OUT_DIR            Generate JavaScript source.\n  --objc_out=OUT_DIR          Generate Objective C header and source.\n  --php_out=OUT_DIR           Generate PHP source file.\n  --python_out=OUT_DIR        Generate Python source file.\n  --ruby_out=OUT_DIR          Generate Ruby source file.\n")),(0,l.kt)("h3",{id:"\u804a\u5929"},"\u804a\u5929"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'syntax = "proto3";\n\n// https://github.com/yafithekid/grpc-chat/blob/master/src/main/proto/rpcchat.proto\noption java_package = "com.if4031.proto";\noption objc_class_prefix = "HLW";\n\nservice ChatService {\n    rpc join (JoinRequest) returns (Response);\n    rpc leave (LeaveRequest) returns (Response);\n    rpc send (SendRequest) returns (Response);\n    rpc sendAll (SendAllRequest) returns (Response);\n    rpc recvAll (RecvAllRequest) returns (ChatResponse);\n}\n\nmessage Message {\n    string nickname = 1;\n    string channel = 2;\n    string content = 3;\n    int64 timestamp = 4;\n}\n\nmessage Response {\n    string status = 1;\n    string message = 2;\n}\n\nmessage ChatResponse {\n    string status = 1;\n    string message = 2;\n    repeated Message chats = 3;\n}\n\nmessage JoinRequest {\n    string nickname = 1;\n    string channel = 2;\n}\n\nmessage LeaveRequest {\n    string nickname = 1;\n    string channel = 2;\n}\n\nmessage SendRequest {\n    string nickname = 1;\n    string channel = 2;\n    string message = 3;\n}\n\nmessage SendAllRequest {\n    string nickname = 1;\n    string message = 2;\n}\n\nmessage RecvAllRequest {\n    string nickname = 1;\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'syntax = "proto3";\n\nservice Chat {\n  rpc Authorize(RequestAuthorize) returns (ResponseAuthorize);\n  rpc Connect(RequestConnect) returns (stream Event);\n  rpc Say(CommandSay) returns (None);\n}\n\nmessage None {}\n\nmessage RequestAuthorize {\n  string name = 1;\n}\n\nmessage ResponseAuthorize {\n  bytes session_id = 1;\n}\n\nmessage RequestConnect {\n  bytes session_id = 1;\n}\n\nmessage CommandSay {\n  bytes session_id = 1;\n  string message = 2;\n}\n\nmessage Event {\n  oneof event {\n    EventNone none = 1;\n    EventJoin join = 2;\n    EventLeave leave = 3;\n    EventLog log = 4;\n  }\n}\n\nmessage EventNone {}\n\nmessage EventJoin {\n  string name = 1;\n}\n\nmessage EventLeave {\n  string name = 1;\n}\n\nmessage EventLog {\n  string name = 1;\n  string message = 2;\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'syntax = "proto3";\n\noption java_package = "com.chat";\n\npackage Chat;\n\nservice MyChat{\n    rpc login (Username) returns (LoginSuccess){}\n    rpc join (ChannelName) returns (IsSuccess){}\n    rpc leave (ChannelName) returns (IsSuccess){}\n    rpc sendMessage (Message) returns (IsSuccess) {}\n    rpc broadcastMessage (BroadcastMsg) returns (IsSuccess) {}\n    rpc getMessages (Username) returns (Messages) {}\n}\n\nmessage Username {\n    string username = 1;\n}\n\nmessage LoginSuccess{\n    bool success = 1;\n    string username = 2;\n}\n\nmessage ChannelName {\n    string username = 1;\n    string channel = 2;\n}\n\nmessage IsSuccess {\n    bool success = 1;\n}\n\nmessage Message {\n    string username = 1;\n    string channel = 2;\n    string msg = 3;\n}\n\nmessage Messages {\n    bool success = 1;\n    repeated string messages = 2;\n}\n\nmessage BroadcastMsg {\n    string username = 1;\n    string msg = 2;\n}\n')),(0,l.kt)("h2",{id:"faq"},"FAQ"),(0,l.kt)("h3",{id:"all-subconns-are-in-transientfailure"},"all SubConns are in TransientFailure"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://groups.google.com/forum/#!topic/grpc-io/yCUwuHycNWk"},"https://groups.google.com/forum/#!topic/grpc-io/yCUwuHycNWk")),(0,l.kt)("li",{parentName:"ul"},"\u8d85\u65f6\u540e\u4f1a\u6062\u590d")))}m.isMDXComponent=!0}}]);