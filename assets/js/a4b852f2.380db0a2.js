/*! For license information please see a4b852f2.380db0a2.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[47472],{99648:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var l=t(2488),s=t(62780);const i={title:"till"},a="till",r={id:"service/data/crawler/till",title:"till",description:"- DataHenHQ/till \u662f\u4ec0\u4e48\uff1f",source:"@site/../notes/service/data/crawler/till.md",sourceDirName:"service/data/crawler",slug:"/service/data/crawler/till",permalink:"/notes/service/data/crawler/till",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/data/crawler/till.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1628355009,formattedLastUpdatedAt:"Aug 7, 2021",frontMatter:{title:"till"},sidebar:"docs",previous:{title:"Scrapy",permalink:"/notes/service/data/crawler/scrapy"},next:{title:"WARC",permalink:"/notes/service/data/crawler/warc"}},o={},c=[{value:"config",id:"config",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.M)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"till",children:"till"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://github.com/DataHenHQ/till",children:"DataHenHQ/till"})," \u662f\u4ec0\u4e48\uff1f\n\u722c\u866b\u8bf7\u6c42\u4ee3\u7406\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Apache-2.0, Go"}),"\n",(0,l.jsxs)(n.li,{children:["\u9700\u8981\u4ece till.datahen.com \u83b7\u53d6 token\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u514d\u8d39 3 \u5b9e\u4f8b"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"\u968f\u673a User-Agent"}),"\n",(0,l.jsx)(n.li,{children:"Proxy IP address rotation"}),"\n",(0,l.jsxs)(n.li,{children:["\u7c98\u6027\u4f1a\u8bdd\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"X-DH-Session-ID"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"Cookie \u7ba1\u7406"}),"\n",(0,l.jsx)(n.li,{children:"\u8bf7\u6c42\u65e5\u5fd7"}),"\n",(0,l.jsxs)(n.li,{children:["HTTP \u7f13\u5b58\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u547d\u4e2d\u7f13\u5b58\u4f1a\u8fd4\u56de X-Dh-Cache-Created-At"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Global ID/GID\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7f13\u5b58 Key"}),"\n",(0,l.jsx)(n.li,{children:"\u4f1a\u8fd4\u56de X-DH-GID"}),"\n",(0,l.jsx)(n.li,{children:"X-DH-Cache-Freshness \u7f13\u5b58\u5237\u65b0\u65f6\u95f4"}),"\n",(0,l.jsx)(n.li,{children:"X-DH-Cache-Serve-Failures \u662f\u5426\u7f13\u5b58\u9519\u8bef\u54cd\u5e94"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["~/.config/datahen/till\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"default.data/ - \u7f13\u5b58\u548c\u6570\u636e"}),"\n",(0,l.jsxs)(n.li,{children:["proxylist.txt - \u4ee3\u7406\u5217\u8868, --proxy-file\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u683c\u5f0f\u4e3a ",(0,l.jsx)(n.code,{children:"http://<user>:<password>@<ip>:<port>"})]}),"\n",(0,l.jsx)(n.li,{children:"\u5f3a\u5236\u5207\u6362 X-DH-Cache-Freshness: now"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# curl -LO https://github.com/DataHenHQ/till/releases/download/v0.8.0/till_0.8.0_Darwin_MacOS_x86_64.tar.gz\n\n# HTTP \u4ee3\u7406 http://localhost:2933\n# Till UI http://localhost:2980\ntill serve -t <token>\ncurl -k --proxy http://localhost:2933 https://fetchtest.datahen.com/echo/request\n"})}),"\n",(0,l.jsx)(n.h2,{id:"config",children:"config"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u914d\u7f6e\u540d\u5b57\u548c flag \u540d\u5b57\u57fa\u672c\u4e00\u81f4"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"~/.config/datahen/till/config.yaml"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"# Get your auth token for FREE at https://till.datahen.com\ntoken: replace-with-your-token\n\n# The Till instance name.\n# This can be changed to match other instance names that you've\n# created on https://till.datahen.com/instances\ninstance: default\n\n# The data directory that is used by various features of Till to store data.\n# It usually follows the naming convention of `<instance name>.data`\ndatadir: ~/.config/datahen/till/default.data\n\n# The proxy port where your scraper codes will connect to.\nport: 2930\n\n# The port to the Till UI.\nuiport: 2980\n\n# Certificate Authority (CA) settings that Till will use to act as Man-In-The-Middle (MIITM) proxy.\n# The path to the CA certificate file.\nca-cert: ~/.config/datahen/till/till-ca-cert.pem\n# The path to the CA key file.\nca-key: ~/.config/datahen/till/till-ca-key.pem\n\n# User agent settings.\n# When set to true, it will override all user-agent with a randomly generated one\nforce-user-agent: false\n# specify user agent type to generate randomly.\nua-type: desktop\n\n# Proxy IP settings.\n# Path to the text file that contains a list of proxy IPs.\n# If you don't specify this, Till will use your real local IP address.\nproxy-file: ~/.config/datahen/till/proxylist.txt\n\n# Sticky Session settings\nsessions:\n  # Disable the sticky sessions feature.\n  # Defaults to false.\n  disabled: false\n\n  # TTL (Time To Live). How long a session record will be allowed to live before it gets deleted.\n  # Defaults to \"week\".\n  ttl: 'week'\n\n# Cache settings\ncache:\n  # Disable the cache feature.\n  # Defaults to false.\n  disabled: false\n\n  # TTL (Time To Live). How long a cache record will be allowed to live before it gets deleted.\n  # Defaults to \"week\".\n  ttl: 'week'\n\n  # Specifies by default on how fresh the Cache Hit will be.\n  # Defaults to \"any\"\n  freshness: 'any'\n\n  # Specifies if Till should serve cached responses of failed HTTP requests (non 2XX statuses)\n  # Defaults to false.\n  serve-failures: false\n\n# Logger settings\nlogger:\n  # Disable the logger feature\n  # Defaults to false.\n  disabled: false\n\n  # TTL (Time To Live). How long a request log record will be allowed to live before it gets deleted.\n  # Defaults to \"week\".\n  ttl: 'week'\n\n# \u8bf7\u6c42\u62e6\u622a\ninterceptors:\n  # this example intercept various image URLs and responds with a local image\n  - name: replace_images\n    disabled: true\n    matches:\n      pattern: '.+\\.(jpe?g|png|tiff|bmp|gif|webp)'\n      method: GET\n    responds:\n      code: 200\n      header:\n        'Content-Type': 'image/png'\n      file: '/path/to/your/image.png'\n  # this example intercept a certain URL and responds with a body\n  - name: replace_body\n    disabled: true\n    matches:\n      pattern: 'fetchtest\\.datahen\\.com\\/echo\\/request'\n      method: GET,POST\n    responds:\n      code: 200\n      header:\n        'Content-Type': 'application/json'\n      body: '{\"Hello\":\"this has been intercepted\"}'\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.M)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},38088:(e,n,t)=>{var l=t(96651),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,t){var l,i={},c=null,d=null;for(l in void 0!==t&&(c=""+t),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(d=n.ref),n)a.call(n,l)&&!o.hasOwnProperty(l)&&(i[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps)void 0===i[l]&&(i[l]=n[l]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:r.current}}n.Fragment=i,n.jsx=c,n.jsxs=c},2488:(e,n,t)=>{e.exports=t(38088)},62780:(e,n,t)=>{t.d(n,{I:()=>r,M:()=>a});var l=t(96651);const s={},i=l.createContext(s);function a(e){const n=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);