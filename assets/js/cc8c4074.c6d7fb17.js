/*! For license information please see cc8c4074.c6d7fb17.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[34535],{43121:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var o=n(11527),t=n(47214);const s={title:"Argo Workflow"},a="Argo Workflow",l={id:"devops/kubernetes/app/argo/workflow/README",title:"Argo Workflow",description:"- argoproj/argo-workflows \u662f\u4ec0\u4e48\uff1f",source:"@site/../notes/devops/kubernetes/app/argo/workflow/README.md",sourceDirName:"devops/kubernetes/app/argo/workflow",slug:"/devops/kubernetes/app/argo/workflow/",permalink:"/notes/devops/kubernetes/app/argo/workflow/",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/devops/kubernetes/app/argo/workflow/README.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1699003495,formattedLastUpdatedAt:"Nov 3, 2023",frontMatter:{title:"Argo Workflow"},sidebar:"docs",previous:{title:"Argo",permalink:"/notes/devops/kubernetes/app/argo/"},next:{title:"Executor",permalink:"/notes/devops/kubernetes/app/argo/workflow/executor"}},i={},c=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"Workflow",id:"workflow",level:2},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:3}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h1,{id:"argo-workflow",children:"Argo Workflow"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.a,{href:"https://github.com/argoproj/argo-workflows",children:"argoproj/argo-workflows"})," \u662f\u4ec0\u4e48\uff1f\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Cloud Native \u5de5\u4f5c\u6d41\u5f15\u64ce"}),"\n",(0,o.jsx)(r.li,{children:"CRD \u7ba1\u7406"}),"\n",(0,o.jsx)(r.li,{children:"\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u662f\u5bb9\u5668"}),"\n",(0,o.jsx)(r.li,{children:"\u9002\u7528\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1 - \u673a\u5668\u5b66\u4e60, \u6570\u636e\u5904\u7406"}),"\n",(0,o.jsx)(r.li,{children:"\u9002\u7528\u4e8e CI/CD \u573a\u666f"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(r.li,{children:["adopted by\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"kubeflow"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(r.li,{children:["\u7528\u5230\u7684\u955c\u50cf\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"argoproj/argocli"}),"\n",(0,o.jsx)(r.li,{children:"argoproj/workflow-controller"}),"\n",(0,o.jsx)(r.li,{children:"argoproj/argoexec - executor"}),"\n",(0,o.jsx)(r.li,{children:"argoproj/argosay - \u6f14\u793a\u6d41\u7a0b\u4f7f\u7528\u7684\u955c\u50cf"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"https://argoproj.github.io/argo-workflows/workflow-executors/",children:"workflow-executors"})}),"\n",(0,o.jsxs)(r.li,{children:["\u53c2\u8003\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Use Cases ",(0,o.jsx)(r.a,{href:"https://argoproj.github.io/argo-workflows/use-cases/ci-cd/",children:"https://argoproj.github.io/argo-workflows/use-cases/ci-cd/"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"CI/CD"}),"\n",(0,o.jsx)(r.li,{children:"Data Processing"}),"\n",(0,o.jsx)(r.li,{children:"Infrastructure Automation"}),"\n",(0,o.jsx)(r.li,{children:"Machine Learning"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"https://argoproj-labs.github.io/argo-workflows-catalog/",children:"https://argoproj-labs.github.io/argo-workflows-catalog/"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# \u5b89\u88c5\u65b9\u5f0f\n# install.yaml - \u96c6\u7fa4\u7eac\u5ea6\uff0c\u6240\u6709\u547d\u540d\u7a7a\u95f4\n# namespace-install.yaml - argo \u547d\u540d\u7a7a\u95f4\n# \u4f1a\u90e8\u7f72 argo-server \u548c workflow-controller\n# \u914d\u7f6e - workflow-controller-configmap\n# https://github.com/argoproj/argo-workflows/tree/stable/manifests\nkubectl create ns argo\nkubectl apply -n argo -f https://raw.githubusercontent.com/argoproj/argo-workflows/stable/manifests/namespace-install.yaml\n# \u9ed8\u8ba4\u4e0d\u9700\u8981 login - \u53ef\u4ee5\u81ea\u5df1\u6dfb\u52a0 sso \u6216\u8005\u8c03\u6574 authmode\n\n# \u547d\u4ee4\u884c\u5de5\u5177\nbrew install argo\n# \u83b7\u53d6\u767b\u9646 token\n# argo auth token\n"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: argo-ingress\n  namespace: argo\nspec:\n  rules:\n    - host: argo.example.com\n      http:\n        paths:\n          - backend:\n              service:\n                name: argo-server\n                port:\n                  name: web\n            pathType: ImplementationSpecific\n"})}),"\n",(0,o.jsx)(r.h2,{id:"workflow",children:"Workflow"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"metadata:\n  name: delightful-rhino\n  labels:\n    example: 'true'\nspec:\n  arguments:\n    parameters:\n      - name: message\n        value: hello argo\n  entrypoint: argosay\n  templates:\n    - name: argosay\n      inputs:\n        parameters:\n          - name: message\n            value: '{{workflow.parameters.message}}'\n      container:\n        name: main\n        image: 'argoproj/argosay:v2'\n        command:\n          - /argosay\n        args:\n          - echo\n          - '{{inputs.parameters.message}}'\n  ttlStrategy:\n    secondsAfterCompletion: 300\n  podGC:\n    strategy: OnPodCompletion\n"})}),"\n",(0,o.jsx)(r.h3,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"https://argoproj.github.io/argo-workflows/workflow-controller-configmap.yaml",children:"https://argoproj.github.io/argo-workflows/workflow-controller-configmap.yaml"})}),"\n"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:"# containerRuntimeExecutor: docker\ncontainerRuntimeExecutor: kubelet\n\n# SSO Configuration for the Argo server.\n# You must also start argo server with `--auth-mode sso`.\n# https://argoproj.github.io/argo/argo-server-auth-mode/\nsso: |\n  # This is the root URL of the OIDC provider (required).\n  issuer: https://issuer.root.url/\n  # This is name of the secret and the key in it that contain OIDC client\n  # ID issued to the application by the provider (required).\n  clientId:\n    name: client-id-secret\n    key: client-id-key\n  # This is name of the secret and the key in it that contain OIDC client\n  # secret issued to the application by the provider (required).\n  clientSecret:\n    name: client-secret-secret\n    key: client-secret-key\n  # This is the redirect URL supplied to the provider (required). It must\n  # be in the form <argo-server-root-url>/oauth2/callback. It must be\n  # browser-accessible.\n  redirectUrl: https://argo-server/oauth2/callback\n  # Additional scopes to request. Typically needed for SSO RBAC. >= v2.12\n  scopes:\n    - groups\n    - email\n  # RBAC Config. >= v2.12\n  rbac:\n    enabled: false\n"})})]})}function p(e={}){const{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},3354:(e,r,n)=>{var o=n(50959),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,n){var o,s={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)a.call(r,o)&&!i.hasOwnProperty(o)&&(s[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===s[o]&&(s[o]=r[o]);return{$$typeof:t,type:e,key:c,ref:d,props:s,_owner:l.current}}r.Fragment=s,r.jsx=c,r.jsxs=c},11527:(e,r,n)=>{e.exports=n(3354)},47214:(e,r,n)=>{n.d(r,{Z:()=>l,a:()=>a});var o=n(50959);const t={},s=o.createContext(t);function a(e){const r=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);