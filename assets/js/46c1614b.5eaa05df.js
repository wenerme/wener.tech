/*! For license information please see 46c1614b.5eaa05df.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[20391],{7348:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var r=s(11527),t=s(47214);const i={title:"Apache Superset"},l="Apache Superset",a={id:"service/bi/superset",title:"Apache Superset",description:"- apache/superset",source:"@site/../notes/service/bi/superset.md",sourceDirName:"service/bi",slug:"/service/bi/superset",permalink:"/notes/service/bi/superset",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/bi/superset.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1706956646,formattedLastUpdatedAt:"Feb 3, 2024",frontMatter:{title:"Apache Superset"},sidebar:"docs",previous:{title:"cubestore",permalink:"/notes/service/bi/cubejs/store"},next:{title:"veta lite",permalink:"/notes/service/bi/vega-lite"}},c={},d=[{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2},{value:"Roles",id:"roles",level:2},{value:"SQL Macro",id:"sql-macro",level:2},{value:"K8S",id:"k8s",level:2},{value:"\u524d\u7aef\u663e\u793a\u7684 UTC \u65e5\u671f",id:"\u524d\u7aef\u663e\u793a\u7684-utc-\u65e5\u671f",level:2},{value:"Hide menus",id:"hide-menus",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"apache-superset",children:"Apache Superset"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/apache/superset",children:"apache/superset"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"by Airbnb"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://medium.com/@sairamkrish/8217956273c1",children:"\u81ea\u5b9a\u4e49\u6388\u6743\u5b9e\u73b0\u5206\u4eab"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://stackoverflow.com/questions/54219101/apache-superset-dashboard-in-webpage",children:"Apache superset dashboard in webpage"})}),"\n",(0,r.jsxs)(n.li,{children:["Helm ",(0,r.jsx)(n.a,{href:"https://github.com/apache/incubator-superset/tree/master/helm/superset",children:"chart"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/amancevice/docker-superset",children:"amancevice/docker-superset"})," - \u5355 docker \u542f\u52a8 superset\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/amancevice/docker-superset/tree/main/examples",children:"\u542f\u52a8\u793a\u4f8b"})}),"\n",(0,r.jsxs)(n.li,{children:["\u7ba1\u7406\u5de5\u5177 ",(0,r.jsx)(n.code,{children:"/usr/local/bin/superset"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u5b89\u88c5\u4f4d\u7f6e ",(0,r.jsx)(n.code,{children:"/usr/local/lib/python3.6/site-packages/superset/"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://preset.io/blog/2020-07-02-hello-world/",children:"\u5982\u4f55\u65b0\u589e\u63d2\u4ef6"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Dashboard \u53ea\u8bfb\u57fa\u7840\u6743\u9650\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"can explore json on Superset"}),"\n",(0,r.jsx)(n.li,{children:"can dashboard on Superset"}),"\n",(0,r.jsxs)(n.li,{children:["can read on CssTemplateModelView\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6ca1\u6709\u6743\u9650\u4f1a\u51fa\u4e00\u4e2a\u9519\u8bef\u4fe1\u606f"}),"\n",(0,r.jsx)(n.li,{children:"\u65e7\u7248\u672c\u4e3a can list on CssTemplateModelView"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"datasource access on xxx.xxx"}),"\n",(0,r.jsx)(n.li,{children:"can csrf token on Superset"}),"\n",(0,r.jsx)(n.li,{children:"can show on DashboardModelView"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5206\u4eab\u6dfb\u52a0 ",(0,r.jsx)(n.code,{children:"?standalone=true"})," \u53ef\u4ee5\u9690\u85cf\u4e0d\u5fc5\u8981\u7684\u5185\u5bb9"]}),"\n"]})}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u524d\u7aef\u4f1a\u663e\u793a\u4e3a UTC\uff0c\u5bfc\u81f4\u65f6\u95f4 -8\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/apache/incubator-superset/issues/3928",children:"#3928"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Calendar Heatmap \u65f6\u95f4\u504f\u5dee\u4e00\u5929\n",(0,r.jsx)(n.a,{href:"https://github.com/apache-superset/superset-ui/issues/409",children:"apache-superset/superset-ui#409"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u4e0d\u80fd\u94fe\u63a5 prometheus ",(0,r.jsx)(n.a,{href:"https://github.com/apache/superset/discussions/18381",children:"#18381"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u53ef\u4ee5\u8003\u8651\u5468 trino \u6216\u8005 postgresql"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://superset.apache.org/docs/installation/cache",children:"\u7f13\u5b58\u914d\u7f6e"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/apache/superset/blob/master/superset/config.py",children:"config.py"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"PUBLIC_ROLE_LIKE_GAMMA = True\nSESSION_COOKIE_SAMESITE = None\nSESSION_COOKIE_HTTPONLY = False\n#HTTP_HEADERS = {'X-Frame-Options': 'ALLOW-FROM http://localhost:8080'}\n#HTTP_HEADERS = {'Content-Security-Policy': 'frame-ancestors \\'self\\' localhost:8081','Access-Control-Allow-Origin':'*'}\n\n#\nROW_LIMIT = 5000\nSUPERSET_WORKERS = 2\n\nSUPERSET_WEBSERVER_PORT = 8088\n\n# Flask App Builder configuration\n# Your App secret key\nSECRET_KEY = '\\2\\1thisismyscretkey\\1\\2\\e\\y\\y\\h'\n\n# The SQLAlchemy connection string to your database backend\n# This connection defines the path to the database that stores your\n# superset metadata (slices, connections, tables, dashboards, ...).\n# Note that the connection information to connect to the datasources\n# you want to explore are managed directly in the web UI\nSQLALCHEMY_DATABASE_URI = 'sqlite:////var/lib/superset/superset.db'\n\n# Flask-WTF flag for CSRF\nWTF_CSRF_ENABLED = True\n# Add endpoints that need to be exempt from CSRF protection\nWTF_CSRF_EXEMPT_LIST = []\nMAPBOX_API_KEY = ''\n\n#\nMAPBOX_API_KEY = os.getenv('MAPBOX_API_KEY', '')\n\n# Flask \u7f13\u5b58\n# https://flask-caching.readthedocs.io/en/latest/#configuring-flask-caching\n# Superset \u81ea\u5df1\u7f13\u5b58\nCACHE_CONFIG = {\n    'CACHE_TYPE': 'redis',\n    'CACHE_DEFAULT_TIMEOUT': 300,\n    'CACHE_KEY_PREFIX': 'superset_',\n    'CACHE_REDIS_HOST': 'redis',\n    'CACHE_REDIS_PORT': 6379,\n    'CACHE_REDIS_DB': 1,\n    'CACHE_REDIS_URL': 'redis://redis:6379/1'}\n\n# \u6570\u636e\u5e93\u7f13\u5b58\nDATA_CACHE_CONFIG = {\n    'CACHE_TYPE': 'redis',\n    'CACHE_DEFAULT_TIMEOUT': 60 * 60 * 24, # 1 day default (in secs)\n    'CACHE_KEY_PREFIX': 'superset_results',\n    'CACHE_REDIS_URL': 'redis://localhost:6379/0',\n}\n\n# SQL Lab \u67e5\u8be2\u7ed3\u679c\u5b58\u50a8\n# RESULTS_BACKEND\n\nSQLALCHEMY_DATABASE_URI = 'postgresql+psycopg2://superset:superset@postgresql:5432/superset'\nSQLALCHEMY_TRACK_MODIFICATIONS = True\nSECRET_KEY = ''\n\n# \u8df3\u8f6c\u5230 https\nENABLE_PROXY_FIX = True\nPREFERRED_URL_SCHEME = 'https'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"roles",children:"Roles"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Admin"}),"\n",(0,r.jsx)(n.li,{children:"Alpha"}),"\n",(0,r.jsx)(n.li,{children:"Gamma"}),"\n",(0,r.jsx)(n.li,{children:"sql_lab"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"sql-macro",children:"SQL Macro"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://superset.incubator.apache.org/sqllab.html#templating-with-jinja",children:"https://superset.incubator.apache.org/sqllab.html#templating-with-jinja"})}),"\n",(0,r.jsxs)(n.li,{children:["\u547d\u540d\u7a7a\u95f4 ",(0,r.jsx)(n.code,{children:"superset.jinja_context"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jinja",children:"{% set date_ref =   filter_values('my_date')[0] %}\nAND date >= DATE_ADD({{date_ref}}, INTERVAL -7 DAYS)\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Macro"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Describe"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"current_user_id()"}),(0,r.jsx)(n.td,{children:"int?"}),(0,r.jsx)(n.td,{children:"\u5f53\u524d\u7528\u6237 ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"current_username()"}),(0,r.jsx)(n.td,{children:"str?"}),(0,r.jsx)(n.td,{children:"\u5f53\u524d\u7528\u6237\u540d"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"url_param(param, default=None)"}),(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"URL \u53c2\u6570"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"filter_values(column, default=None)"}),(0,r.jsx)(n.td,{children:"any"}),(0,r.jsx)(n.td,{children:"form_data \u91cc\u7684\u6570\u636e"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"k8s",children:"K8S"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u7ec4\u4ef6\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CeleryBeat"}),"\n",(0,r.jsx)(n.li,{children:"CeleryFlower"}),"\n",(0,r.jsx)(n.li,{children:"Node"}),"\n",(0,r.jsx)(n.li,{children:"Websockets"}),"\n",(0,r.jsx)(n.li,{children:"worker"}),"\n",(0,r.jsx)(n.li,{children:"redis"}),"\n",(0,r.jsx)(n.li,{children:"postgresql"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm repo add superset https://apache.github.io/superset\n"})}),"\n",(0,r.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(n.h2,{id:"\u524d\u7aef\u663e\u793a\u7684-utc-\u65e5\u671f",children:"\u524d\u7aef\u663e\u793a\u7684 UTC \u65e5\u671f"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/apache/incubator-superset/issues/3928",children:"#3928"})," - Timestamps are not displayed in the client's local timezone"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/apache/incubator-superset/issues/9304#issuecomment-609524741",children:"#9304"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Superset decided to always UTC time to keep things simple. It'd be quite some work if we want to add custom timezone support."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'SUPERSET_D3_LOCALE = """\n{\n  "decimal": ".",\n  "thousands": ",",\n  "grouping": [3],\n  "currency": ["\xa3", ""],\n  "dateTime": "%a %e %b %X %Y",\n  "date": "%d/%m/%Y",\n  "time": "%H:%M:%S",\n  "periods": ["AM", "PM"],\n  "days": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],\n  "shortDays": ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],\n  "months": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],\n  "shortMonths": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]\n} """\n\nSUPERSET_D3_LOCALE = """\n{\n  "decimal": ".",\n  "thousands": ",",\n  "grouping": [3],\n  "currency": ["\xa5", ""],\n  "dateTime": "%a %b %e %X %Y",\n  "date": "%Y-%d-%m",\n  "time": "%H:%M:%S",\n  "periods": ["\u4e0a\u5348", "\u4e0b\u5348"],\n  "days": ["\u5468\u65e5", "\u5468\u4e00", "\u5468\u4e8c", "\u5468\u4e09", "\u5468\u56db", "\u5468\u4e94", "\u5468\u516d"],\n  "shortDays": ["\u65e5", "\u4e00", "\u4e8c", "\u4e09", "\u56db", "\u4e94", "\u516d"],\n  "months": ["\u4e00\u6708", "\u4e8c\u6708", "\u4e09\u6708", "\u56db\u6708", "\u4e94\u6708", "\u516d\u6708", "\u4e03\u6708", "\u516b\u6708", "\u4e5d\u6708", "\u5341\u6708", "\u5341\u4e00\u6708", "\u5341\u4e8c\u6708"],\n  "shortMonths": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"]\n} """\n'})}),"\n",(0,r.jsx)(n.h2,{id:"hide-menus",children:"Hide menus"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"html:not([mode='edit']) .dashboard-header > .button-container {\n  display: none !important;\n}\nhtml:not([mode='edit']) header.top {\n  display: none;\n}\nhtml:not([mode='edit']) .chart-header > .header > .dropdown {\n  display: none !important;\n}\nhtml:not([mode='edit']) .dragdroppable-tab .anchor-link-container {\n  display: none !important;\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// \u663e\u793a\n$('html').attr('mode', 'edit');\n"})})]})}function o(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},3354:(e,n,s)=>{var r=s(50959),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,s){var r,i={},d=null,h=null;for(r in void 0!==s&&(d=""+s),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(h=n.ref),n)l.call(n,r)&&!c.hasOwnProperty(r)&&(i[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===i[r]&&(i[r]=n[r]);return{$$typeof:t,type:e,key:d,ref:h,props:i,_owner:a.current}}n.Fragment=i,n.jsx=d,n.jsxs=d},11527:(e,n,s)=>{e.exports=s(3354)},47214:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>l});var r=s(50959);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);