/*! For license information please see 69a1fcc9.7a032000.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[77728],{28308:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>l,toc:()=>h});var r=i(2488),s=i(62780);const t={title:"\u6865\u63a5\u7f51\u7edc"},d="Bridge",l={id:"os/linux/network/bridge",title:"\u6865\u63a5\u7f51\u7edc",description:"- networking/bridge",source:"@site/../notes/os/linux/network/bridge.md",sourceDirName:"os/linux/network",slug:"/os/linux/network/bridge",permalink:"/notes/os/linux/network/bridge",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/network/bridge.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1646642462,formattedLastUpdatedAt:"Mar 7, 2022",frontMatter:{title:"\u6865\u63a5\u7f51\u7edc"},sidebar:"docs",previous:{title:"Bonding",permalink:"/notes/os/linux/network/bonding"},next:{title:"firewalld",permalink:"/notes/os/linux/network/firewalld"}},c={},h=[{value:"STP",id:"stp",level:2},{value:"bridge vs bonding active-backup",id:"bridge-vs-bonding-active-backup",level:2},{value:"\u6865\u63a5\u7f51\u5361\u4e0d\u4f7f\u7528\u5b9e\u9645\u7f51\u5361 Mac \u5730\u5740",id:"\u6865\u63a5\u7f51\u5361\u4e0d\u4f7f\u7528\u5b9e\u9645\u7f51\u5361-mac-\u5730\u5740",level:2},{value:"tinc \u8282\u70b9\u907f\u514d mac \u51b2\u7a81",id:"tinc-\u8282\u70b9\u907f\u514d-mac-\u51b2\u7a81",level:2},{value:"received packet on bond0 with own address as source address",id:"received-packet-on-bond0-with-own-address-as-source-address",level:2},{value:"bridge: filtering via arp/ip/ip6tables is no longer available by default",id:"bridge-filtering-via-arpipip6tables-is-no-longer-available-by-default",level:2}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.M)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"bridge",children:"Bridge"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://wiki.linuxfoundation.org/networking/bridge",children:"networking/bridge"})}),"\n",(0,r.jsx)(e.li,{children:"\u5de5\u4f5c\u7c7b\u4f3c Switch"}),"\n",(0,r.jsx)(e.li,{children:"L2 learning and forwarding"}),"\n",(0,r.jsxs)(e.li,{children:["STP\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8ba9\u591a\u8def\u80fd\u6b63\u5e38\u5de5\u4f5c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-interfaces",children:"auto eth0\niface eth0 inet manual\n\nauto br0\niface br0 inet dhcp\n\tbridge-ports eth0\n\tbridge-stp on\n  # \u81ea\u5b9a\u4e49 mac \u786e\u4fdd dhcp \u7a33\u5b9a\n\t# bridge-hw 00:00:00:00:00:00\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# ip link set dev $IFACE type bridge ageing_time $IF_BRIDGE_AGEING\n# brctl setageing\n\n# ip link set dev $IFACE type bridge priority $IF_BRIDGE_BRIDGEPRIO\n# brctl setbridgeprio\n\n# ip link set dev $IFACE type bridge forward_delay $IF_BRIDGE_FD\n# brctl setfd\n\n# ip link set dev $IFACE type bridge hello_time $IF_BRIDGE_HELLO\n# brctl sethello\n\n# ip link set dev $IFACE type bridge max_age $IF_BRIDGE_MAXAGE\n# brctl setmaxage\n\n# bridge link set dev $IFACE cost $IF_BRIDGE_PATHCOST\n# brctl setpathcost\n\n# bridge link set dev $IFACE priority $IF_BRIDGE_PORTPRIO\n# brctl setportprio\n\n# ip link set dev $IFACE type bridge stp $(yesno $IF_BRIDGE_STP)\nbrctl stp br0 off\n\n# vlan\n# ip link set dev $IFACE type bridge vlan_filtering $(yesno $IF_BRIDGE_VLAN_AWARE)\n\n#\nbrctl showmacs br0\nbrctl showstp br0\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsxs)(e.th,{children:["brctl setATTR ",(0,r.jsx)(e.strong,{children:"br"})," ",(0,r.jsx)(e.em,{children:"val"})]}),(0,r.jsx)(e.th,{children:"for"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setageing bridge time"}),(0,r.jsx)(e.td,{children:"Set ageing time"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setbridgeprio bridge prio"}),(0,r.jsx)(e.td,{children:"Set bridge priority (between 0 and 65535)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setfd bridge time"}),(0,r.jsx)(e.td,{children:"Set bridge forward delay"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"sethello bridge time"}),(0,r.jsx)(e.td,{children:"Set hello time"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmaxage bridge time"}),(0,r.jsx)(e.td,{children:"Set max message age"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setgcint bridge time"}),(0,r.jsx)(e.td,{children:"Set garbage collection interval in seconds"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"sethashel bridge int"}),(0,r.jsx)(e.td,{children:"Set hash elasticity"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"sethashmax bridge int"}),(0,r.jsx)(e.td,{children:"Set hash max"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmclmc bridge int"}),(0,r.jsx)(e.td,{children:"Set multicast last member count"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcrouter bridge int"}),(0,r.jsx)(e.td,{children:"Set multicast router"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcsnoop bridge int"}),(0,r.jsx)(e.td,{children:"Set multicast snooping"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcsqc bridge int"}),(0,r.jsx)(e.td,{children:"Set multicast startup query count"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmclmi bridge time"}),(0,r.jsx)(e.td,{children:"Set multicast last member interval"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcmi bridge time"}),(0,r.jsx)(e.td,{children:"Set multicast membership interval"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcqpi bridge time"}),(0,r.jsx)(e.td,{children:"Set multicast querier interval"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcqi bridge time"}),(0,r.jsx)(e.td,{children:"Set multicast query interval"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcqri bridge time"}),(0,r.jsx)(e.td,{children:"Set multicast query response interval"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setmcqri bridge time"}),(0,r.jsx)(e.td,{children:"Set multicast startup query interval"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setpathcost bridge port cost"}),(0,r.jsx)(e.td,{children:"Set path cost"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setportprio bridge port prio"}),(0,r.jsx)(e.td,{children:"Set port priority (between 0 and 255)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"setportmcrouter bridge port int"}),(0,r.jsx)(e.td,{children:"Set port multicast router"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"sethashel bridge int"}),(0,r.jsx)(e.td,{children:"Set hash elasticity value"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"bridge"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man8/bridge.8.html",children:"bridge.8"})}),"\n",(0,r.jsx)(e.li,{children:"fdb - Forwarding Database"}),"\n",(0,r.jsx)(e.li,{children:"mdb - Multicast group database"}),"\n",(0,r.jsx)(e.li,{children:"BPDU"}),"\n",(0,r.jsxs)(e.li,{children:["link\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["hwmode\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"vepa"}),"\n",(0,r.jsx)(e.li,{children:"veb - \u786c\u4ef6 bridge"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"bridge li   # link show\nbridge fdb  # fdb show\nbridge mdb  # mdb show\nbridge vlan # vlan show\n\nbridge monitor\n"})}),"\n",(0,r.jsx)(e.h2,{id:"stp",children:"STP"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["master \u6bcf 2s \u53d1\u9001\u4e00\u6b21 \u201c\u5fc3\u8df3\u201d/hello \u5305 ",(0,r.jsx)(e.code,{children:"0180c2000000"})]}),"\n",(0,r.jsxs)(e.li,{children:["slave \u63a5\u6536\u5230\u5305\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"20s \u5185\u6ca1\u6536\u5230\uff0c\u5219\u8ba4\u4e3a master down"}),"\n",(0,r.jsx)(e.li,{children:"30s \u5185\u5efa\u7acb\u597d\u65b0\u7684 stp - \u4f5c\u4e3a master"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"BPDU - Bridge Protocol Data Unit"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u89d2\u8272"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Role"}),(0,r.jsx)(e.th,{children:"Name"}),(0,r.jsx)(e.th,{children:"Chinese"}),(0,r.jsx)(e.th,{children:"Desc"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"RB"}),(0,r.jsx)(e.td,{children:"Root Bridge"}),(0,r.jsx)(e.td,{children:"\u6839\u6865"}),(0,r.jsx)(e.td,{children:"ID \u6700\u5c0f\u6865"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"RP"}),(0,r.jsx)(e.td,{children:"Root Port"}),(0,r.jsx)(e.td,{children:"\u6839\u7aef\u53e3"}),(0,r.jsx)(e.td,{children:"\u6700\u4f73\u8def\u5f84\u7aef\u53e3"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"DP"}),(0,r.jsx)(e.td,{children:"Designated Port"}),(0,r.jsx)(e.td,{children:"\u6307\u5b9a\u7aef\u53e3"}),(0,r.jsx)(e.td,{children:"\u6bcf\u4e00\u4e2a\u7f51\u6bb5\u9009\u62e9\u5230\u6839\u6865\u6700\u8fd1\u7684\u7f51\u6865\u4f5c\u4e3a\u6307\u5b9a\u7f51\u6865, \u8be5\u7f51\u6865\u5230\u8fd9\u4e00\u7f51\u6bb5\u7684\u7aef\u53e3\u4e3a\u6307\u5b9a\u7aef\u53e3"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"AP"}),(0,r.jsx)(e.td,{children:"Alternated Port"}),(0,r.jsx)(e.td,{children:"\u53ef\u9009\u7aef\u53e3"}),(0,r.jsx)(e.td,{children:"\u5373\u963b\u585e\u7aef\u53e3, \u65e2\u4e0d\u662f\u6307\u5b9a\u7aef\u53e3, \u4e5f\u4e0d\u662f\u6839\u7aef\u53e3\u7684\u7aef\u53e3"})]})]})]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u7aef\u53e3\u72b6\u6001"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Status"}),(0,r.jsx)(e.th,{children:"Data"}),(0,r.jsx)(e.th,{children:"BPDU"}),(0,r.jsx)(e.th,{children:"Learn Address"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Disabled"}),(0,r.jsx)(e.td,{children:"no"}),(0,r.jsx)(e.td,{children:"no"}),(0,r.jsx)(e.td,{children:"no"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Blocking"}),(0,r.jsx)(e.td,{children:"no"}),(0,r.jsx)(e.td,{children:"recv"}),(0,r.jsx)(e.td,{children:"no"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Listening"}),(0,r.jsx)(e.td,{children:"no"}),(0,r.jsx)(e.td,{children:"yes"}),(0,r.jsx)(e.td,{children:"no"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Learning"}),(0,r.jsx)(e.td,{children:"no"}),(0,r.jsx)(e.td,{children:"yes"}),(0,r.jsx)(e.td,{children:"start"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Forwarding"}),(0,r.jsx)(e.td,{children:"yes"}),(0,r.jsx)(e.td,{children:"yes"}),(0,r.jsx)(e.td,{children:"yes"})]})]})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Blocking(20s) \u2013> Listening(15s) \u2013> Learning(15s) \u2013> Forwarding"}),"\n",(0,r.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"https://github.com/mstpd/mstpd",children:"mstpd/mstpd"})," - Multiple Spanning Tree Protocol Daemon"]}),"\n",(0,r.jsxs)(e.li,{children:["wikipedia ",(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Spanning_Tree_Protocol",children:"Spanning Tree Protocol"})]}),"\n",(0,r.jsxs)(e.li,{children:["wikipedia ",(0,r.jsx)(e.a,{href:"https://zh.wikipedia.org/wiki/%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE",children:"\u751f\u6210\u6811\u534f\u8bae"})]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.cnblogs.com/hzl6255/p/3259909.html",children:"Linux STP \u4ecb\u7ecd"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://tldp.org/HOWTO/BRIDGE-STP-HOWTO/",children:"Linux BRIDGE-STP-HOWTO"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"http://www.embeddedlinux.org.cn/linux_net/0596002556/understandlni-CHP-16-SECT-16.html",children:"Spanning Tree Protocol"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://serverfault.com/questions/824621",children:"Linux: bridges, VLANs and RSTP"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,r.jsx)(e.h2,{id:"bridge-vs-bonding-active-backup",children:"bridge vs bonding active-backup"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["bonding - \u7528\u4e8e\u805a\u5408\u94fe\u8def\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u805a\u5408 - \u4f7f\u7528\u540c\u8d28\u7684\u94fe\u8def\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u591a\u4e2a\u94fe\u8def\u5e76\u884c\u5de5\u4f5c"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["active-backup - \u53ef\u80fd\u4f7f\u7528\u975e\u540c\u8d28\u94fe\u8def - wlan0+eth0 - eth0 \u4f5c\u4e3a primary\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u68c0\u6d4b\u94fe\u8def\u72b6\u6001 - \u5207\u6362\u65f6\u95f4\u77ed"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["bridge - \u7528\u4e8e\u5b66\u4e60\u548c\u8f6c\u53d1\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"members \u53ef\u4ee5\u662f\u865a\u62df\u94fe\u8def\uff0c\u53ef\u4ee5\u662f\u7269\u7406\u94fe\u8def"}),"\n",(0,r.jsx)(e.li,{children:"STP - \u5b66\u4e60\u9700\u8981\u65f6\u95f4 - \u9ed8\u8ba4\u524d\u540e\u52a0\u8d77\u6765 50s - \u53ef\u80fd\u66f4\u957f"}),"\n",(0,r.jsx)(e.li,{children:"\u7406\u8bba\u4e0a\u6765\u8bf4\u4e5f\u80fd\u5b9e\u73b0 bonding active-backup \u7684\u6548\u679c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u6865\u63a5\u7f51\u5361\u4e0d\u4f7f\u7528\u5b9e\u9645\u7f51\u5361-mac-\u5730\u5740",children:"\u6865\u63a5\u7f51\u5361\u4e0d\u4f7f\u7528\u5b9e\u9645\u7f51\u5361 Mac \u5730\u5740"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\u6865\u63a5\u7f51\u5361 MAC \u5730\u5740\u4f1a\u53d8\u5bfc\u81f4 dhcp \u83b7\u53d6\u7684\u5730\u5740\u4e0d\u7a33\u5b9a"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u9ed8\u8ba4\u9009\u62e9\u6700\u4f4e mac - \u6392\u5e8f\u6700\u524d\uff0c\u4e00\u822c\u865a\u62df\u7f51\u5361\u7684 mac \u4f1a\u6bd4\u5b9e\u9645\u7684\u66f4\u4f4e\uff0c\u5bfc\u81f4\u88ab\u4f18\u5148\u9009\u62e9\u3002"}),"\n",(0,r.jsx)(e.p,{children:"brctl addif \u6dfb\u52a0 slave \u7684\u65f6\u5019\u4e5f\u4f1a\u53d8"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u6dfb\u52a0 slave \u7684\u65f6\u5019\u8bb0\u5f55 mac \u518d\u8bbe\u7f6e\u56de\u53bb"}),"\n",(0,r.jsx)(e.li,{children:"\u5c06\u865a\u62df\u7f51\u5361\u7684 mac \u8bbe\u7f6e\u9ad8\u4e00\u70b9"}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u63a8\u8350"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u65b9\u6cd5 1\nmac=$(cat /etc/tinc/br0/address)\nip li set $IFACE master br0\nip li set br0 address $mac\n\n# \u65b9\u6cd5 2\nip link set $IFACE address fe:12:34:56:78:9a\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://lists.linuxfoundation.org/pipermail/bridge/2006-January/003036.html",children:"Bridge Interface MAC address assignment"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/hansode/linux-bridge-mac-addresses-and-dynamic-ports",children:"hansode/linux-bridge-mac-addresses-and-dynamic-ports"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"tinc-\u8282\u70b9\u907f\u514d-mac-\u51b2\u7a81",children:"tinc \u8282\u70b9\u907f\u514d mac \u51b2\u7a81"}),"\n",(0,r.jsx)(e.p,{children:"\u8bbe\u7f6e\u9ad8 mac"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ip li set $INTERFACE address fe:fe:12:34:56:78\nip li set $INTERFACE master br0\nip li set $INTERFACE up\nip addr add 10.10.1.1/16 dev br0\n"})}),"\n",(0,r.jsx)(e.h2,{id:"received-packet-on-bond0-with-own-address-as-source-address",children:"received packet on bond0 with own address as source address"}),"\n",(0,r.jsx)(e.p,{children:"\u5f71\u54cd\u4e0d\u5927\u7684 log \u4fe1\u606f"}),"\n",(0,r.jsx)(e.h2,{id:"bridge-filtering-via-arpipip6tables-is-no-longer-available-by-default",children:"bridge: filtering via arp/ip/ip6tables is no longer available by default"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u53ea\u662f info log\uff0c\u4ee5\u524d modprobe bridge \u4f1a\u63d0\u4f9b\u7684\u529f\u80fd\u73b0\u5728\u9700\u8981 modprobe br_netfilter"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"bridge: filtering via arp/ip/ip6tables is no longer available by default. Update your scripts to load br_netfilter if you need this.\n"})})]})}function o(n={}){const{wrapper:e}={...(0,s.M)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},38088:(n,e,i)=>{var r=i(96651),s=Symbol.for("react.element"),t=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,i){var r,t={},h=null,a=null;for(r in void 0!==i&&(h=""+i),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(a=e.ref),e)d.call(e,r)&&!c.hasOwnProperty(r)&&(t[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps)void 0===t[r]&&(t[r]=e[r]);return{$$typeof:s,type:n,key:h,ref:a,props:t,_owner:l.current}}e.Fragment=t,e.jsx=h,e.jsxs=h},2488:(n,e,i)=>{n.exports=i(38088)},62780:(n,e,i)=>{i.d(e,{I:()=>l,M:()=>d});var r=i(96651);const s={},t=r.createContext(s);function d(n){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:d(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);