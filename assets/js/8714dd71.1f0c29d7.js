/*! For license information please see 8714dd71.1f0c29d7.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[14361],{88284:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>a});var s=l(2488),d=l(62780);const r={title:"OpenLDAP"},i="OpenLDAP",c={id:"service/auth/ldap/openldap",title:"OpenLDAP",description:"- openldap/openldap",source:"@site/../notes/service/auth/ldap/openldap.md",sourceDirName:"service/auth/ldap",slug:"/service/auth/ldap/openldap",permalink:"/notes/service/auth/ldap/openldap",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/auth/ldap/openldap.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1661507210,formattedLastUpdatedAt:"Aug 26, 2022",frontMatter:{title:"OpenLDAP"},sidebar:"docs",previous:{title:"LLDAP",permalink:"/notes/service/auth/ldap/lldap"},next:{title:"OAuth",permalink:"/notes/service/auth/oauth/"}},t={},a=[{value:"Note",id:"note",level:2},{value:"Overlay",id:"overlay",level:2},{value:"dynlist",id:"dynlist",level:3},{value:"Schema",id:"schema",level:2},{value:"Password",id:"password",level:3},{value:"slapd-config",id:"slapd-config",level:2},{value:"\u57fa\u7840\u914d\u7f6e",id:"\u57fa\u7840\u914d\u7f6e",level:3},{value:"slapd.conf",id:"slapdconf",level:2},{value:"\u57fa\u7840\u914d\u7f6e",id:"\u57fa\u7840\u914d\u7f6e-1",level:3},{value:"backend sql",id:"backend-sql",level:2},{value:"backend monitor",id:"backend-monitor",level:2},{value:"Access Control",id:"access-control",level:2},{value:"Off-line",id:"off-line",level:2},{value:"\u5907\u4efd",id:"\u5907\u4efd",level:2},{value:"lloadd",id:"lloadd",level:2},{value:"\u4e0d\u652f\u6301 sha256, sha512",id:"\u4e0d\u652f\u6301-sha256-sha512",level:2},{value:"No passwd entry for user ldap",id:"no-passwd-entry-for-user-ldap",level:2},{value:"slapd.ldif",id:"slapdldif",level:2},{value:"daemon: bind(7) failed errno=2 (No such file or directory)",id:"daemon-bind7-failed-errno2-no-such-file-or-directory",level:2}];function o(n){const e={a:"a",admonition:"admonition",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.M)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"openldap",children:"OpenLDAP"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/openldap/openldap",children:"openldap/openldap"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u652f\u6301 SQL \u540e\u7aef - PostgreSQL"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4f7f\u7528\u573a\u666f - \u7528\u6237\u8054\u90a6, \u6570\u636e\u5b58\u50a8\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Linux PAM"}),"\n",(0,s.jsx)(e.li,{children:"SSH PAM"}),"\n",(0,s.jsx)(e.li,{children:"Keycloak user federation"}),"\n",(0,s.jsx)(e.li,{children:"Kerberos database"}),"\n",(0,s.jsx)(e.li,{children:"PowerDNS database"}),"\n",(0,s.jsx)(e.li,{children:"Serive user - Gitea, Gitlab, Nextcloud"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.openldap.org/doc/",children:"\u6587\u6863"})}),"\n",(0,s.jsxs)(e.li,{children:["archlinux ",(0,s.jsx)(e.a,{href:"https://wiki.archlinux.org/index.php/OpenLDAP",children:"OpenLDAP"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/leenooks/phpLDAPadmin",children:"leenooks/phpLDAPadmin"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"http://demo.phpldapadmin.org/",children:"demo"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://stackoverflow.com/questions/22606811",children:"OpenLDAP multi-tenant like ACL"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.openldap.org/faq/data/cache/1133.html",children:"Sets in Access Controls"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/osixia/docker-openldap",children:"osixia/docker-openldap"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/jp-gouin/helm-openldap",children:"jp-gouin/helm-openldap"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/ltb-project/self-service-password",children:"ltb-project/self-service-password"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"GPLv3, PHP"}),"\n",(0,s.jsx)(e.li,{children:"change and reset password in an LDAP"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.admonition,{type:"caution",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["sql backend \u9700\u8981\u81ea\u884c\u7ef4\u62a4 \u8868 \u4e0e ObjectClass \u7684\u5173\u7cfb\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5e76\u4e0d\u662f\u76f4\u63a5\u53ef\u7528 - \u521d\u671f\u6709\u4e00\u5b9a\u5de5\u4f5c\u91cf"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u652f\u6301 reload - \u76f4\u63a5\u91cd\u542f"}),"\n"]})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# macOS\n/usr/libexec/slapd -VVV # \u81ea\u5e26 v2.4\n\nbrew install openldap\nexport PATH="/usr/local/opt/openldap/bin:$PATH"\nexport PATH="/usr/local/opt/openldap/sbin:$PATH"\n/usr/local/opt/openldap/libexec/slapd -VVV # \u6700\u65b0\u7248 v2.6\n\n# AlpineLinux\napk add openldap\n# \u6dfb\u52a0\u540e\u7aef - \u751f\u4ea7\u7528 sql \u6d4b\u8bd5\u7528 mdb\napk add openldap-back-sql openldap-back-mdb\n# \u6dfb\u52a0 overlay - openldap-overlay-all \u4e3a\u6240\u6709\napk add openldap-overlay-{accesslog,memberof,otp}\napk add openldap-passwd-{pbkdf2,argon2,sha2}\n# /etc/openldap/slapd.conf\nservice slapd checkconfig\n'})}),"\n",(0,s.jsx)(e.h2,{id:"note",children:"Note"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["overlay\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u524d\u540e\u7aef\u4e4b\u95f4\u7684\u4e2d\u95f4\u5c42"}),"\n",(0,s.jsx)(e.li,{children:"\u4f5c\u4e3a\u6269\u5c55\u6dfb\u52a0\u5176\u4ed6\u529f\u80fd"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u914d\u7f6e\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"/etc/openldap/slapd.conf"}),"\n",(0,s.jsx)(e.li,{children:"/etc/openldap/slapd.ldif"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u540e\u7aef - bdb, dnssrv, hdb, ldap, mdb, meta, monitor, null, passwd, relay, shell, sock, sql"}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"cli"}),(0,s.jsx)(e.th,{children:"desc"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"SBIN"})}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapacl"}),(0,s.jsx)(e.td,{children:"\u6821\u9a8c slapd \u76ee\u5f55\u6743\u9650"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapadd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapauth"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapcat"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapd"}),(0,s.jsx)(e.td,{children:"\u72ec\u7acb LDAP \u5b88\u62a4\u8fdb\u7a0b"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapdn"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapindex"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slappasswd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapschema"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slaptest"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"slapmodify"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"BIN"})}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapadd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapdelete"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapmodify"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldappasswd"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapurl"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapwhoami"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapcompare"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapexop"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapmodrdn"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapsearch"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ldapvc"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"MISC"})}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"lloadd"}),(0,s.jsx)(e.td,{children:"\u8d1f\u8f7d\u5747\u8861\u4ee3\u7406\u670d\u52a1"})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"slapd"}),(0,s.jsx)(e.th,{children:"for"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-h URLs"}),(0,s.jsx)(e.td,{children:"\u76d1\u542c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-u user"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-g group"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-r dir"}),(0,s.jsx)(e.td,{children:"chroot"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-c cookie"}),(0,s.jsx)(e.td,{children:"cookie for syncrepl"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-o option=value"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-d debug-level"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-f slapd.conf"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-F slapd.d"}),(0,s.jsx)(e.td,{children:"ldif \u914d\u7f6e\u76ee\u5f55"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-T"}),(0,s.jsx)(e.td,{children:"\u5de5\u5177"})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"-T - acl, a/add, auth, c/cat, d/dn, i/index, p/passwd, s/schema, t/test"}),"\n",(0,s.jsxs)(e.li,{children:["-h ",(0,s.jsx)(e.code,{children:"ldap:/// ldaps:/// ldapi:///"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ldap - \u9ed8\u8ba4 389"}),"\n",(0,s.jsx)(e.li,{children:"ldaps - \u9ed8\u8ba4 636 - LDAP over TLS"}),"\n",(0,s.jsxs)(e.li,{children:["ldapi - LDAP over IPC\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"x-mod \u53ef\u6307\u5b9a\u6743\u9650"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"PLDAP, PLDAPS - HAProxy proxy protocol version 2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["-c cookie\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"rid, sid, csn"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["-o option\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"slp"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'slapd -d ?                 # \u663e\u793a\u6240\u6709\u7684 debug level\nslapd -Tt -f slapd.conf    # \u6821\u9a8c\u914d\u7f6e - slaptest\nslapd -f slapd.conf -d 255 # \u542f\u52a8\n\nchown -R ldap:ldap slapd.d # \u786e\u4fdd\u6743\u9650\u6b63\u786e\n# \u5b58\u5728 slapd.d/cn=config.ldif\nslapd -F slapd.d -u ldap -g ldap # \u63a8\u8350\u4f7f\u7528 ldif \u914d\u7f6e\n\n# \u914d\u7f6e\u8f6c\u6362\nslaptest -f slapd.conf -F slapd.d\n\nslapcat -F /usr/local/etc/openldap/slapd.d -n0 -l extracted_config.ldif\nslapadd -F /usr/local/etc/openldap/slapd.d -l updated_config.ldif\n\n# -b DN\n# -U authcID\n# [attr[/access][:value]]\n# \u68c0\u6d4b wener \u7528\u6237\u662f\u5426\u80fd\u8bfb\u53d6 dc=wener,dc=me \u7684 name \u5c5e\u6027\nslapacl -f slapd.conf -v -U wener -b "dc=wener,dc=me" "name/read:wener"\n'})}),"\n",(0,s.jsx)(e.h2,{id:"overlay",children:"Overlay"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"overlay"}),(0,s.jsx)(e.th,{children:"desc"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"accesslog"}),(0,s.jsx)(e.td,{children:"\u5b58\u50a8\u8bbf\u95ee\u65e5\u5fd7\u5230 DB - \u4e5f\u4f1a\u7528\u4e8e delta-syncrepl"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"auditlog"}),(0,s.jsx)(e.td,{children:"\u4fee\u6539\u65e5\u5fd7"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"chain"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"collect"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"constraint"}),(0,s.jsx)(e.td,{children:"\u7528 regex \u9650\u5b9a\u5c5e\u6027\u503c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"dds"}),(0,s.jsx)(e.td,{children:"dynamicObject,ttl"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"deref"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"dynlist"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"homedir"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"lastbind"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"memberof"}),(0,s.jsx)(e.td,{children:"\u7ef4\u62a4\u53cd\u5411\u5206\u7ec4\u5173\u7cfb"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"mqtt"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"pcache"}),(0,s.jsx)(e.td,{children:"Proxy Cache"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ppolicy"}),(0,s.jsx)(e.td,{children:"Password Policy"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"proxycache"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"refint"}),(0,s.jsx)(e.td,{children:"Referential Integrity"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"remoteauth"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"retcode"}),(0,s.jsx)(e.td,{children:"Return Code"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"rwm"}),(0,s.jsx)(e.td,{children:"Rewrite/Remap"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"seqmod"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"sssvlv"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"syncprov"}),(0,s.jsx)(e.td,{children:"Sync Provider"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"translucent"}),(0,s.jsx)(e.td,{children:"Translucent Proxy"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"unique"}),(0,s.jsx)(e.td,{children:"\u552f\u4e00\u9650\u5b9a"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"valsort"}),(0,s.jsx)(e.td,{children:"Value Sorting"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.del,{children:"dyngroup"})}),(0,s.jsx)(e.td,{children:"\u4f7f\u7528 dynlist"})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u591a\u4e2a overlay \u662f\u53cd\u5e8f\u6267\u884c\u7684"}),"\n",(0,s.jsxs)(e.li,{children:["dds - Dynamic Directory Services - rfc2859\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["CRP - Client Refresh Period\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5237\u65b0 ttl - ldapexop"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["memberof\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e3a groupOfNames \u7684 member \u5bf9\u8c61\u751f\u6210 memberof \u53cd\u5411\u5f15\u7528\u5c5e\u6027"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["rwm ",(0,s.jsx)(e.a,{href:"https://www.openldap.org/software/man.cgi?query=slapo-rwm&apropos=0&sektion=5&manpath=OpenLDAP+2.6-Release&arch=default&format=html",children:"slapo-rwm"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e3a\u8fdc\u7a0b ldap \u6216 relay \u63d0\u4f9b\u865a\u62df\u5b57\u6bb5"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["translucent\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b58\u50a8\u90e8\u5206\u4ee3\u7406\u6570\u636e\u7684\u5230\u672c\u5730"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["unique\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["unique_uri - ",(0,s.jsx)(e.code,{children:"ldap:///ou=users,dc=example,dc=com?mail?sub?(objectClass=inetOrgPerson)"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["valsort\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["valsort-attr - ",(0,s.jsx)(e.code,{children:"memberUid ou=groups,dc=wener,dc=me alpha-ascend"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"refint"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u652f\u6301 rename"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c user \u88ab\u5220\u9664\uff0c\u5bf9\u5e94\u7684 member \u5173\u7cfb\u4e5f\u88ab\u5220\u9664"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u6ca1\u6709\u4efb\u4f55 member \u5219\u4f7f\u7528 refint_nothing"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:'overlay refint\nrefint_attributes member\nrefint_nothing "cn=admin,dc=example,dc=com"\n'})}),"\n",(0,s.jsx)(e.h3,{id:"dynlist",children:"dynlist"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:"overlay dynlist\n# dynlist-attrset <group-oc> <URL-ad> [member-ad]\n# member-ad - \u5b58\u5728\u5219\u4e3a dyngroup - \u9700\u8981\u5305\u542b dyngroup.schema\n\n# \u5c06\u67e5\u8be2\u7ed3\u679c\u7684\u5355\u4e00\u5c5e\u6027\u8fd4\u56de\ndynlist-attrset nisMailAlias labeledURI\n\n# \u5c06\u67e5\u8be2\u7ed3\u679c\u4f5c\u4e3a member \u5c5e\u6027\u8fd4\u56de\ndynlist-attrset groupOfURLs labeledURI member\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ldif",children:"cn=all,ou=aliases,dc=example,dc=com\ncn: all\nobjectClass: nisMailAlias\nlabeledURI: ldap:///ou=People,dc=example,dc=com?mail?one?(objectClass=inetOrgPerson)\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u67e5\u8be2\u8be5\u5bf9\u8c61\u65f6\u5b9e\u9645\u8fd4\u56de labeledURI \u67e5\u8be2\u7ed3\u679c"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"schema",children:"Schema"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"schema"}),(0,s.jsx)(e.th,{children:"note"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"collective"}),(0,s.jsx)(e.td,{children:"Collective attributes (experimental)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"corba"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"core"}),(0,s.jsx)(e.td,{children:"OpenLDAP core"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"cosine"}),(0,s.jsx)(e.td,{children:"COSINE Pilot"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"dsee"}),(0,s.jsx)(e.td,{children:"Sun DSEE"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"duaconf"}),(0,s.jsx)(e.td,{children:"Client Configuration - WIP"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"dyngroup"}),(0,s.jsx)(e.td,{children:"Dynamic Group (experimental)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"inetorgperson"}),(0,s.jsx)(e.td,{children:"InetOrgPerson"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"java"}),(0,s.jsx)(e.td,{children:"Java Object"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"misc"}),(0,s.jsx)(e.td,{children:"Miscellaneous Schema (experimental)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"msuser"}),(0,s.jsx)(e.td,{children:"Microsoft's Active Directory schema for replication"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"namedobject"}),(0,s.jsx)(e.td,{children:"namedObject draft schema - WIP"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"nis"}),(0,s.jsx)(e.td,{children:"Network Information Service (experimental)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"openldap"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"pmi"}),(0,s.jsx)(e.td,{children:"ITU X.509 PMI support (experimental)"})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/openldap/openldap/tree/master/contrib",children:"https://github.com/openldap/openldap/tree/master/contrib"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u989d\u5916\u6a21\u5757\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"passwd/pbkdf2"}),"\n",(0,s.jsx)(e.li,{children:"passwd/sha2"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"password",children:"Password"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"argon2"}),"\n",(0,s.jsxs)(e.li,{children:["pbkdf2\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"PBKDF2 -> PBKDF2-SHA1"}),"\n",(0,s.jsx)(e.li,{children:"PBKDF2-SHA1"}),"\n",(0,s.jsx)(e.li,{children:"PBKDF2-SHA256"}),"\n",(0,s.jsx)(e.li,{children:"PBKDF2-SHA512"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["sha2\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"SHA512"}),"\n",(0,s.jsx)(e.li,{children:"SHA384"}),"\n",(0,s.jsx)(e.li,{children:"SHA256"}),"\n",(0,s.jsx)(e.li,{children:"SSHA512"}),"\n",(0,s.jsx)(e.li,{children:"SSHA384"}),"\n",(0,s.jsx)(e.li,{children:"SSHA256"}),"\n",(0,s.jsx)(e.li,{children:"S \u524d\u7f00 Salted"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["totp - RFC 6238 Time-based One Time Passwords\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"TOTP1 - SHA-1"}),"\n",(0,s.jsx)(e.li,{children:"TOTP256 - SHA-256"}),"\n",(0,s.jsx)(e.li,{children:"TOTP512 - SHA-512"}),"\n",(0,s.jsx)(e.li,{children:"TOTP1ANDPW"}),"\n",(0,s.jsx)(e.li,{children:"TOTP256ANDPW"}),"\n",(0,s.jsxs)(e.li,{children:["TOTP512ANDPW\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"TOTP+password"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"kerberos"}),"\n",(0,s.jsx)(e.li,{children:"netscape"}),"\n",(0,s.jsx)(e.li,{children:"apr1"}),"\n",(0,s.jsx)(e.li,{children:"radius"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-txt",metastring:'title="password"',children:"# password=secret salt=saltsalt\nuserPassword: {ARGON2}$argon2i$v=19$m=4096,t=3,p=1$c2FsdHNhbHQ$DKlexoEJUoZTmkAAC3SaMWk30El9/RvVhlqGo6afIng\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# \u9ed8\u8ba4\u652f\u6301 SHA\nslappasswd -o module-load=pw-sha2.so -h {SHA} -s secret\n\necho -n "secret" | argon2 "salt" -e\nslappasswd -o module-load=argon2.so -h {ARGON2} -s secret\n\nslappasswd -o module-load=pw-pbkdf2.so -h {PBKDF2} -s secret\n\nslappasswd -o module-load=pw-sha2.so -h {SHA256} -s secret\necho -n "secret" | openssl dgst -sha256 -binary | openssl enc -base64\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["passwd - ",(0,s.jsx)(e.a,{href:"https://github.com/openldap/openldap/tree/master/servers/slapd/pwmods",children:"servers/slapd/pwmods"})]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"slapd-config",children:"slapd-config"}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528 ldif \u914d\u7f6e"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["cn=config 0 olcGlobal\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"olcIdleTimeout"}),"\n",(0,s.jsx)(e.li,{children:"olcLogLevel"}),"\n",(0,s.jsx)(e.li,{children:"olcReferral"}),"\n",(0,s.jsxs)(e.li,{children:["cn=module\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"olcModuleLoad"}),"\n",(0,s.jsx)(e.li,{children:"olcModulePath"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cn=schema - olcSchemaConfig - System schema\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"olcAttributeTypes"}),"\n",(0,s.jsx)(e.li,{children:"olcObjectClasses"}),"\n",(0,s.jsxs)(e.li,{children:["cn={0}core - CoreSchema\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"olcAttributeTypes"}),"\n",(0,s.jsx)(e.li,{children:"olcObjectClasses"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"olcBackend"}),"\n",(0,s.jsxs)(e.li,{children:["olcDatabase={1}mdb - olcBackendConfig\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["index \u7528\u4e8e\u533a\u5206\u591a\u4e2a\u540c\u7c7b\u578b\u7684\u4e0d\u540c db\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4e0d\u6307\u5b9a\u4f1a\u81ea\u52a8\u521b\u5efa"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"olcAccess: to <what> [ by <who> [<accesslevel>] [<control>] ]+"})}),"\n",(0,s.jsx)(e.li,{children:"olcReadonly"}),"\n",(0,s.jsx)(e.li,{children:"olcRootDN"}),"\n",(0,s.jsx)(e.li,{children:"olcRootPW"}),"\n",(0,s.jsx)(e.li,{children:"olcSizeLimit"}),"\n",(0,s.jsx)(e.li,{children:"olcSuffix"}),"\n",(0,s.jsx)(e.li,{children:"olcSyncrepl"}),"\n",(0,s.jsx)(e.li,{children:"olcTimeLimit: 3600"}),"\n",(0,s.jsx)(e.li,{children:"olcUpdateref"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["olcDatabase=frontend\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"olcAccess"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["mdb\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["backend\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"olcBkMdbIdlExp: 16"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["database\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"olcDbDirectory: /usr/local/var/openldap-data"}),"\n",(0,s.jsx)(e.li,{children:"olcDbCheckpoint: 1024 10"}),"\n",(0,s.jsx)(e.li,{children:"olcDbEnvFlags"}),"\n",(0,s.jsx)(e.li,{children:"olcDbIndex"}),"\n",(0,s.jsx)(e.li,{children:"olcDbMaxEntrySize: 0"}),"\n",(0,s.jsx)(e.li,{children:"olcDbMaxReaders: 126"}),"\n",(0,s.jsx)(e.li,{children:"olcDbMaxSize: 10485760 - 10MB"}),"\n",(0,s.jsx)(e.li,{children:"olcDbMode: 0600"}),"\n",(0,s.jsx)(e.li,{children:"olcDbMultival"}),"\n",(0,s.jsx)(e.li,{children:"olcDbRtxnsize"}),"\n",(0,s.jsx)(e.li,{children:"olcDbSearchStack: 16"}),"\n",(0,s.jsx)(e.li,{children:"olcDbNosync"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u7840\u914d\u7f6e",children:"\u57fa\u7840\u914d\u7f6e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ldif",children:'dn: cn=config\nobjectClass: olcGlobal\ncn: config\n\nolcArgsFile: /var/lib/openldap/run/slapd.args\nolcPidFile: /var/lib/openldap/run/slapd.pid\n\n# \u6a21\u5757\u52a0\u8f7d\ndn: cn=module,cn=config\nobjectClass: olcModuleList\ncn: module\nolcModulepath:\t/usr/lib/openldap\nolcModuleload:\tback_mdb.so\n\ndn: cn=schema,cn=config\nobjectClass: olcSchemaConfig\ncn: schema\n\ninclude: file:///etc/openldap/schema/core.ldif\n\n# \u524d\u7aef\n#\ndn: olcDatabase=frontend,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcFrontendConfig\nolcDatabase: frontend\n# \u8bbf\u95ee\u63a7\u5236\u7b56\u7565\n#\tOther DSEs:\n#\t\tAllow self write access\n#\t\tAllow authenticated users read access\n#\t\tAllow anonymous users to authenticate\n#\n#olcAccess: to dn.base="" by * read\n#olcAccess: to dn.base="cn=Subschema" by * read\n#olcAccess: to *\n#\tby self write\n#\tby users read\n#\tby anonymous auth\n#\n# if no access controls are present, the default policy\n# allows anyone and everyone to read anything but restricts\n# updates to rootdn.  (e.g., "access to * by * read")\n#\n# rootdn can always read and write EVERYTHING!\n#\n\n# \u6570\u636e\u5e93\u914d\u7f6e\ndn: olcDatabase=mdb,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcMdbConfig\nolcDatabase: mdb\nolcDbMaxSize: 1073741824\nolcSuffix: dc=wener,dc=me\nolcRootDN: cn=admin,dc=wener,dc=me\nolcRootPW: secret\nolcDbDirectory:\t/var/lib/openldap/openldap-data\nolcDbIndex: objectClass eq\n\ndn: olcDatabase=monitor,cn=config\nobjectClass: olcDatabaseConfig\nolcDatabase: monitor\nolcRootDN: cn=config\nolcMonitoring: FALSE\n'})}),"\n",(0,s.jsx)(e.h2,{id:"slapdconf",children:"slapd.conf"}),"\n",(0,s.jsx)(e.admonition,{type:"caution",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8be5\u914d\u7f6e\u65b9\u5f0f\u5df2\u5e9f\u5f03\uff0c\u63a8\u8350\u4f7f\u7528 slapd-config \u914d\u7f6e"}),"\n"]})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5168\u5c40\u914d\u7f6e+\u6570\u636e\u5e93\u914d\u7f6e"}),"\n",(0,s.jsx)(e.li,{children:"\u884c\u5f00\u5934\u4e3a\u7a7a\u767d\u5219\u4e3a \u7eed \u884c"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"backend <type>"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"asyncmeta, config, dnssrv, ldap, ldif, mdb, meta, monitor, null, passwd, perl, relay, sock, sql, wt"}),"\n",(0,s.jsx)(e.li,{children:"wt - WiredTiger"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"overlay <name>"})}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.openldap.org/doc/admin26/slapdconf2.html",children:"https://www.openldap.org/doc/admin26/slapdconf2.html"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man5/slapd.conf.5.html",children:"https://man7.org/linux/man-pages/man5/slapd.conf.5.html"})}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u7840\u914d\u7f6e-1",children:"\u57fa\u7840\u914d\u7f6e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:'include\t\t/etc/openldap/schema/core.schema\n\npidfile\t\t/var/lib/openldap/run/slapd.pid\nargsfile\t/var/lib/openldap/run/slapd.args\n\n# \u52a0\u8f7d\u6a21\u5757\nmodulepath\t/usr/lib/openldap\nmoduleload\tback_mdb.la\n\nattributeoptions x-hidden lang-\naccess to attrs=name;x-hidden by * =cs\naccess to attrs=userPassword  by * auth\naccess to * by * read\n\ndatabase config\n# \u5f00\u542f\u540e\u53ef bind cn=config \u76f4\u63a5\u4fee\u6539\u914d\u7f6e - \u4e0d\u8fc7\u914d\u7f6e\u4fee\u6539\u4e0d\u4f1a\u4fdd\u5b58\n# rootpw secret\n\n# mdb \u914d\u7f6e\ndatabase\tmdb\nmaxsize\t\t1073741824\nsuffix\t\t"dc=wener,dc=me"\nrootdn\t\t"cn=admin,dc=wener,dc=me"\n# \u907f\u514d\u5bc6\u7801\u660e\u6587 - \u4f7f\u7528 slappasswd \u751f\u6210\nrootpw\t\tsecret\n# chmod 700\ndirectory\t/var/lib/openldap/openldap-data\n# \u9700\u8981\u7ef4\u62a4\u7684\u7d22\u5f15\nindex\tobjectClass\teq\nindex cn,sn,mail pres,eq,approx,sub\n\ndatabase monitor\n'})}),"\n",(0,s.jsx)(e.h2,{id:"backend-sql",children:"backend sql"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528 odbc \u8fde\u63a5"}),"\n",(0,s.jsx)(e.li,{children:"\u9700\u8981\u81ea\u884c\u7ef4\u62a4 \u8868 \u4e0e ObjectClass \u7684\u5173\u7cfb"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",metastring:'title="/etc/odbc.ini"',children:"[example]\nDescription         = OpenLDAP back-sql\nDriver              = PostgreSQL\nTrace               = No\nDatabase            = example\nServername          = localhost\nUserName            = manager\nPassword            = secret\nPort                = 5432\n;Protocol            = 6.4\nReadOnly            = No\nRowVersioning       = No\nShowSystemTables    = No\nShowOidColumn       = No\nFakeOidIndex        = No\nConnSettings        =\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",metastring:'title="/etc/odbcinst.ini"',children:"[PostgreSQL]\nDescription     = ODBC for PostgreSQL\nDriver          = /usr/lib/libodbcpsql.so\nSetup           = /usr/lib/libodbcpsqlS.so\nFileUsage       = 1\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:'database\tsql\nsuffix\t\t"o=sql,c=RU"\nrootdn\t\t"cn=root,o=sql,c=RU"\nrootpw\t\tsecret\ndbname\t\tPostgreSQL\ndbuser\t\tpostgres\ndbpasswd\tpostgres\ninsentry_stmt\t"insert into ldap_entries (id,dn,oc_map_id,parent,keyval) values ((select max(id)+1 from ldap_entries),?,?,?,?)"\nupper_func\t"upper"\nstrcast_func\t"text"\nconcat_pattern\t"?||?"\nhas_ldapinfo_dn_ru\tno\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"PostgreSQL"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ldap_oc_mappings"}),"\n",(0,s.jsx)(e.li,{children:"ldap_attr_mappings"}),"\n",(0,s.jsx)(e.li,{children:"ldap_entries"}),"\n",(0,s.jsx)(e.li,{children:"ldap_entry_objclasses"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"create table\n  ldap_oc_mappings (\n    id serial not null primary key,\n    -- objectClass name\n    name varchar(64) not null,\n    -- \u6620\u5c04\u7684\u8868\u540d\n    keytbl varchar(64) not null,\n    -- pk \u5217\n    keycol varchar(64) not null,\n    -- \u521b\u5efa SQL\n    create_proc varchar(255),\n    -- \u5220\u9664 SQL\n    delete_proc varchar(255),\n    expect_return int not null\n  );\n\ncreate table\n  ldap_attr_mappings (\n    id serial not null primary key,\n    oc_map_id integer not null references ldap_oc_mappings(id),\n    name varchar(255) not null,\n    sel_expr varchar(255) not null,\n    sel_expr_u varchar(255),\n    from_tbls varchar(255) not null,\n    join_where varchar(255),\n    add_proc varchar(255),\n    delete_proc varchar(255),\n    param_order int not null,\n    expect_return int not null\n  );\n\ncreate table\n  ldap_entries (\n    id serial not null primary key,\n    dn varchar(255) not null,\n    oc_map_id integer not null references ldap_oc_mappings(id),\n    parent int NOT NULL,\n    keyval int NOT NULL,\n    UNIQUE (oc_map_id, keyval),\n    UNIQUE (dn)\n  );\n\ncreate table\n  ldap_entry_objclasses (\n    entry_id integer not null references ldap_entries(id),\n    oc_name varchar(64)\n  );\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/openldap/openldap/tree/master/servers/slapd/back-sql/rdbms_depend/pgsql",children:"https://github.com/openldap/openldap/tree/master/servers/slapd/back-sql/rdbms_depend/pgsql"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"backend-monitor",children:"backend monitor"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7531 slapd \u7ef4\u62a4\uff0c\u63d0\u4f9b\u7cfb\u7edf\u5065\u5eb7\u4fe1\u606f"}),"\n",(0,s.jsxs)(e.li,{children:["cn=Monitor\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["cn=Backends\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"monitoredInfo"}),"\n",(0,s.jsx)(e.li,{children:"cn=Backend 0"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cn=Connections\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"cn=Total"}),"\n",(0,s.jsx)(e.li,{children:"cn=Current"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cn=Databases\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"cn=Database 0"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"cn=Listeners"}),"\n",(0,s.jsxs)(e.li,{children:["cn=Overlays\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"monitoredInfo"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cn=Statistics\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["cn=Entries\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"monitorCounter"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cn=Threads\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["cn=Max\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"monitoredInfo"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cn=Time\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["cn=Current\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"monitorTimestamp"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"cn=Start"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["cn=Waiters\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["cn=Read\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"monitorCounter"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"cn=Write"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:'database monitor\naccess to * by dn.exact="cn=admin,dc=wener,dc=me" by * none\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"ldapsearch -x -D 'cn=admin,dc=wener,dc=me' -W -b 'cn=Monitor' -s base 1.1\nldapsearch -x -D 'cn=admin,dc=wener,dc=me' -W -b 'cn=Monitor' -s base '(objectClass=*)' '*' '+'\n"})}),"\n",(0,s.jsx)(e.h2,{id:"access-control",children:"Access Control"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"<access directive> ::= to <what>\n    [by <who> [<access>] [<control>] ]+\n<what> ::= * |\n    [dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>]\n    [filter=<ldapfilter>] [attrs=<attrlist>]\n<basic-style> ::= regex | exact\n<scope-style> ::= base | one | subtree | children\n<attrlist> ::= <attr> [val[.<basic-style>]=<regex>] | <attr> , <attrlist>\n<attr> ::= <attrname> | entry | children\n<who> ::= * | [anonymous | users | self\n        | dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>]\n    [dnattr=<attrname>]\n    [group[/<objectclass>[/<attrname>][.<basic-style>]]=<regex>]\n    [peername[.<basic-style>]=<regex>]\n    [sockname[.<basic-style>]=<regex>]\n    [domain[.<basic-style>]=<regex>]\n    [sockurl[.<basic-style>]=<regex>]\n    [set=<setspec>]\n    [aci=<attrname>]\n<access> ::= [self]{<level>|<priv>}\n<level> ::= none | disclose | auth | compare | search | read | write | manage\n<priv> ::= {=|+|-}{m|w|r|s|c|x|d|0}+\n<control> ::= [stop | continue | break]\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["what\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"*"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"basic-style - regex, exact"}),"\n",(0,s.jsx)(e.li,{children:"scope-style - base, one, subtree, children"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"filter=<ldapfilter>] [attrs=<attrlist>"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["who\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"*"})}),"\n",(0,s.jsx)(e.li,{children:"anonymous"}),"\n",(0,s.jsx)(e.li,{children:"users - \u8ba4\u8bc1\u7528\u6237"}),"\n",(0,s.jsx)(e.li,{children:"self - \u7528\u6237\u6240\u5728 entry"}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"dn[.<basic-style>]=<regex> | dn.<scope-style>=<DN>]"})}),"\n",(0,s.jsx)(e.li,{children:"dnattr="}),"\n",(0,s.jsx)(e.li,{children:"group="}),"\n",(0,s.jsx)(e.li,{children:"peername="}),"\n",(0,s.jsx)(e.li,{children:"sockname="}),"\n",(0,s.jsx)(e.li,{children:"domain="}),"\n",(0,s.jsx)(e.li,{children:"sockurl="}),"\n",(0,s.jsx)(e.li,{children:"set="}),"\n",(0,s.jsx)(e.li,{children:"aci="}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["access\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"self"}),"\n",(0,s.jsxs)(e.li,{children:["level\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"none | disclose | auth | compare | search | read | write | manage"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0b\u7ea7\u5305\u542b\u4e0a\u7ea7"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["priv\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"{=|+|-}{m|w|r|s|c|x|d|0}+"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["control\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"stop - \u9ed8\u8ba4"}),"\n",(0,s.jsx)(e.li,{children:"continue - \u7ee7\u7eed\u5904\u7406 who"}),"\n",(0,s.jsx)(e.li,{children:"break - \u8df3\u51fa\u5f53\u524d access \u7ee7\u7eed\u5904\u7406\u4e0b\u4e00\u6761"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u9690\u542b\u89c4\u5219 ",(0,s.jsx)(e.code,{children:"by * none stop"})]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6743\u9650\u7ec4\u5408"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'access to *\n    by peername.ip="127.0.0.1" =w continue\n    by dn.exact="cn=foo" +rcsx\n    by * auth\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["127.0.0.1 \u6743\u9650\u4e3a ",(0,s.jsx)(e.code,{children:"w"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679c cn=foo \u5219\u6dfb\u52a0\u66f4\u591a\u6743\u9650"}),"\n"]}),"\n"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"who"}),(0,s.jsx)(e.th,{children:"desc"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"*"})}),(0,s.jsx)(e.td,{children:"\u6240\u6709"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"anonymous"}),(0,s.jsx)(e.td,{children:"\u533f\u540d/\u672a\u6388\u6743 \u7528\u6237"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"users"}),(0,s.jsx)(e.td,{children:"\u6388\u6743\u7528\u6237"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"self"}),(0,s.jsx)(e.td,{children:"User associated with target entry"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"dn[.<basic-style>]=<regex>"})}),(0,s.jsx)(e.td,{children:"Users matching a regular expression"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"dn.<scope-style>=<DN>"})}),(0,s.jsx)(e.td,{children:"Users within scope of a DN"})]})]})]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"level"}),(0,s.jsx)(e.th,{children:"priv"}),(0,s.jsx)(e.th,{children:"desc"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"none"}),(0,s.jsx)(e.td,{children:"=0"}),(0,s.jsx)(e.td,{children:"\u4e0d\u80fd\u8bbf\u95ee"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"disclose"}),(0,s.jsx)(e.td,{children:"=d"}),(0,s.jsx)(e.td,{children:"needed for information disclosure on error"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"auth"}),(0,s.jsx)(e.td,{children:"=dx"}),(0,s.jsx)(e.td,{children:"\u9700\u8981\u8ba4\u8bc1 - bind"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"compare"}),(0,s.jsx)(e.td,{children:"=cdx"}),(0,s.jsx)(e.td,{children:"needed to compare"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"search"}),(0,s.jsx)(e.td,{children:"=scdx"}),(0,s.jsx)(e.td,{children:"needed to apply search filters"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"read"}),(0,s.jsx)(e.td,{children:"=rscdx"}),(0,s.jsx)(e.td,{children:"needed to read search results"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"write"}),(0,s.jsx)(e.td,{children:"=wrscdx"}),(0,s.jsx)(e.td,{children:"needed to modify/rename"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"manage"}),(0,s.jsx)(e.td,{children:"=mwrscdx"}),(0,s.jsx)(e.td,{children:"needed to manage"})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.openldap.org/faq/data/cache/454.html",children:"https://www.openldap.org/faq/data/cache/454.html"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://uit.stanford.edu/service/directory/aclexamples",children:"https://uit.stanford.edu/service/directory/aclexamples"})}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"off-line",children:"Off-line"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ldif",children:"dn: dc=wener,dc=me\nobjectClass: dcObject\nobjectClass: organization\ndc: wener\no: Wener's Website\ndescription: A blog full of notes\n\ndn: cn=admin,dc=example,dc=com\nobjectClass: organizationalRole\ncn: admin\ndescription: Directory Administrator\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \u4f7f\u7528 directory \u7684 \u53ef\u4ee5\u52a0\nslapd -Ta -F slapd.d -l demo.ldif\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5907\u4efd",children:"\u5907\u4efd"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'slapcat -f slapd.conf -b "dc=example,dc=com"\n'})}),"\n",(0,s.jsx)(e.h2,{id:"lloadd",children:"lloadd"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8d1f\u8f7d\u5747\u8861"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",children:'feature proxyauthz\n\nbindconf bindmethod=simple\n        binddn="cn=Manager,dc=example,dc=com"\n        credentials=secret\n\ntier roundrobin\nbackend-server uri=ldap://server1.example.com\n              numconns=5 bindconns=5\n              max-pending-ops=10 conn-max-pending=3\n              retry=5000\nbackend-server uri=ldap://server2.example.com\n              numconns=5 bindconns=5\n              max-pending-ops=10 conn-max-pending=3\n              retry=5000\n'})}),"\n",(0,s.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,s.jsx)(e.h2,{id:"\u4e0d\u652f\u6301-sha256-sha512",children:"\u4e0d\u652f\u6301 sha256, sha512"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"At present there is no need to change anything in the core since SHA-2 support\ncan be dynamically loaded. Don't fix what isn't broken.\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.openldap.org/lists/openldap-bugs/201205/msg00055.html",children:"https://www.openldap.org/lists/openldap-bugs/201205/msg00055.html"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.openldap.org/faq/data/cache/1467.html",children:"https://www.openldap.org/faq/data/cache/1467.html"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"no-passwd-entry-for-user-ldap",children:"No passwd entry for user ldap"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"getent passwd ldap\n"})}),"\n",(0,s.jsx)(e.h2,{id:"slapdldif",children:"slapd.ldif"}),"\n",(0,s.jsx)(e.p,{children:"\u9ed8\u8ba4\u53ea\u80fd slapd.conf \u5355\u6587\u4ef6\u914d\u7f6e\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u5b9a\u7684\u65b9\u5f0f\u5b9e\u73b0 ldif \u914d\u7f6e\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"slapd -f slapd.conf.init -F slapd.d -h 'ldap:// ldaps:// ldapi://'\n\n# slapd.ldif \u5305\u542b\u6240\u6709\u914d\u7f6e\nldapadd -Y EXTERNAL -H ldapi:// -f slapd.ldif\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-conf",metastring:'title="slapd.conf.init"',children:'pidfile /var/lib/openldap/run/slapd.pid\n\ndatabase config\n# \u5141\u8bb8\u901a\u8fc7 sock \u7ba1\u7406\naccess to * by dn.base="gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth" manage\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ldif",metastring:'title="slapd.ldif"',children:'dn: cn=module,cn=config\nobjectClass: olcModuleList\ncn: module\nolcModulePath: /usr/lib/openldap\nolcModuleLoad: back_mdb.so\n\ndn: olcDatabase=mdb,cn=config\nobjectClass: olcDatabaseConfig\nobjectClass: olcMdbConfig\nolcDatabase: mdb\nolcSuffix: dc=example,dc=com\nolcRootDN: cn=manager,dc=example,dc=com\nolcRootPW:: c2VjcmV0\nolcDbDirectory: /var/lib/openldap/example.com\nolcAccess: to * by dn.base="gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth" manage\n'})}),"\n",(0,s.jsx)(e.h2,{id:"daemon-bind7-failed-errno2-no-such-file-or-directory",children:"daemon: bind(7) failed errno=2 (No such file or directory)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"install -d -m 700 -o ldap -g ldap /var/lib/openldap/run\nchown -R ldap:ldap /var/lib/openldap\n"})})]})}function h(n={}){const{wrapper:e}={...(0,d.M)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},38088:(n,e,l)=>{var s=l(96651),d=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function a(n,e,l){var s,r={},a=null,o=null;for(s in void 0!==l&&(a=""+l),void 0!==e.key&&(a=""+e.key),void 0!==e.ref&&(o=e.ref),e)i.call(e,s)&&!t.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps)void 0===r[s]&&(r[s]=e[s]);return{$$typeof:d,type:n,key:a,ref:o,props:r,_owner:c.current}}e.Fragment=r,e.jsx=a,e.jsxs=a},2488:(n,e,l)=>{n.exports=l(38088)},62780:(n,e,l)=>{l.d(e,{I:()=>c,M:()=>i});var s=l(96651);const d={},r=s.createContext(d);function i(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:i(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);