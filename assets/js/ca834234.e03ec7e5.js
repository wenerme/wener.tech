/*! For license information please see ca834234.e03ec7e5.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[23676],{25844:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>j,frontMatter:()=>r,metadata:()=>l,toc:()=>h});var d=s(2488),t=s(62780);const r={title:"zentao"},i="zentao",l={id:"service/forge/zentao",title:"zentao",description:"- LDAP \u9700\u8981 \u4f01\u4e1a\u7248\u3001\u65d7\u8230\u7248",source:"@site/../notes/service/forge/zentao.md",sourceDirName:"service/forge",slug:"/service/forge/zentao",permalink:"/notes/service/forge/zentao",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/forge/zentao.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1705291463,formattedLastUpdatedAt:"Jan 15, 2024",frontMatter:{title:"zentao"},sidebar:"docs",previous:{title:"Server",permalink:"/notes/service/forge/woodpecker/server"},next:{title:"Forum Awesome",permalink:"/notes/service/forum/awesome"}},c={},h=[{value:"Docker",id:"docker",level:2},{value:"\u4fee\u6539 AI \u53c2\u6570",id:"\u4fee\u6539-ai-\u53c2\u6570",level:2},{value:"\u8fd8\u6ca1\u6709\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6",id:"\u8fd8\u6ca1\u6709\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6",level:2},{value:"Admin",id:"admin",level:2},{value:"18.6",id:"186",level:2}];function x(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.M)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.h1,{id:"zentao",children:"zentao"}),"\n",(0,d.jsx)(e.admonition,{type:"caution",children:(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"LDAP \u9700\u8981 \u4f01\u4e1a\u7248\u3001\u65d7\u8230\u7248"}),"\n",(0,d.jsx)(e.li,{children:"zentao \u9700\u8981 SUPER/SYSTEM_VARIABLES_ADMIN \u6743\u9650 - \u5efa\u8bae\u72ec\u7acb MySQL \u6216\u8005\u4f7f\u7528 \u5185\u7f6e"}),"\n"]})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://github.com/easysoft/zentaopms",children:"easysoft/zentaopms"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://gitee.com/wwccss/zentaopms",children:"wwccss/zentaopms"})}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://github.com/quicklyon/zentao-docker",children:"quicklyon/zentao-docker"})}),"\n",(0,d.jsx)(e.li,{children:"\u7985\u9053"}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"# https://hub.docker.com/r/easysoft/zentao\n# Zentao >= 18.6\ndocker run --rm -it \\\n  -p 8080:80 \\\n  -v $PWD/data:/data \\\n  -e MYSQL_ROOT_PASSWORD=123456\n--name zentao easysoft/zentao:18.7\n\n# Zentao < 18.6\ndocker run --rm -it \\\n  -p 8080:80 \\\n  -v $PWD/data/zentaopms:/www/zentaopms \\\n  -v $PWD/data/mysql:/var/lib/mysql \\\n  -e MYSQL_ROOT_PASSWORD=123456\n--name zentao easysoft/zentao:18.5\n"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"env"}),(0,d.jsx)(e.th,{children:"default"}),(0,d.jsx)(e.th,{children:"note"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"DEBUG"}),(0,d.jsx)(e.td,{children:"false"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"PHP_SESSION_TYPE"}),(0,d.jsx)(e.td,{children:"files"}),(0,d.jsx)(e.td,{children:"redis/files"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"PHP_SESSION_PATH"}),(0,d.jsx)(e.td,{children:"/data/php/session"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"PHP_MAX_EXECUTION_TIME"}),(0,d.jsx)(e.td,{children:"120"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"PHP_MEMORY_LIMIT"}),(0,d.jsx)(e.td,{children:"256M"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"PHP_POST_MAX_SIZE"}),(0,d.jsx)(e.td,{children:"128M"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"PHP_UPLOAD_MAX_FILESIZE"}),(0,d.jsx)(e.td,{children:"128M"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ZT_MYSQL_HOST"}),(0,d.jsx)(e.td,{children:"127.0.0.1"}),(0,d.jsx)(e.td,{children:"MySQL \u8fde\u63a5\u4fe1\u606f"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ZT_MYSQL_PORT"}),(0,d.jsx)(e.td,{children:"3306"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ZT_MYSQL_DB"}),(0,d.jsx)(e.td,{children:"zentao"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ZT_MYSQL_USER"}),(0,d.jsx)(e.td,{children:"root"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"ZT_MYSQL_PASSWORD"}),(0,d.jsx)(e.td,{children:"pass4zenTao"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_ENABLED"}),(0,d.jsx)(e.td,{children:"false"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_HOST"}),(0,d.jsx)(e.td,{children:"127.0.0.1"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_PORT"}),(0,d.jsx)(e.td,{children:"389"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_BASEDN"}),(0,d.jsx)(e.td,{children:"dc=quickon,dc=org"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_ADMINUSER"}),(0,d.jsx)(e.td,{children:"cn=admin,dc=quickon,dc=org"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_BINDPASSWORD"}),(0,d.jsx)(e.td,{children:"pass4zenTao"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_USERKEY"}),(0,d.jsx)(e.td,{children:"uid"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_EMAILKEY"}),(0,d.jsx)(e.td,{children:"mail"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_GROUP"}),(0,d.jsx)(e.td,{children:"1"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_REALNAME"}),(0,d.jsx)(e.td,{children:"name"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_REPEATPOLICY"}),(0,d.jsx)(e.td,{children:"number"}),(0,d.jsx)(e.td,{children:"\u91cd\u540d\u7b56\u7565"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LDAP_AUTOCREATE"}),(0,d.jsx)(e.td,{children:"1"}),(0,d.jsx)(e.td,{children:"\u81ea\u52a8\u521b\u5efa\u7528\u6237"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"SMTP_ENABLED"}),(0,d.jsx)(e.td,{children:"false"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LINK_GIT"}),(0,d.jsx)(e.td,{children:"false"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"GIT_TYPE"}),(0,d.jsx)(e.td,{children:"gitea"}),(0,d.jsx)(e.td,{children:"gitea/gogs/gitlab"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"GIT_INSTANCE_NAME"}),(0,d.jsx)(e.td,{children:"gitea"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"GIT_USERNAME"}),(0,d.jsx)(e.td,{children:"root"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"GIT_PASSWORD"}),(0,d.jsx)(e.td,{children:"pass4QuickOn"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"GIT_PROTOCOL"}),(0,d.jsx)(e.td,{children:"https"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"GIT_DOMAIN"}),(0,d.jsx)(e.td,{}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"GIT_TOKEN"}),(0,d.jsx)(e.td,{}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LINK_CI"}),(0,d.jsx)(e.td,{children:"false"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"CI_TYPE"}),(0,d.jsx)(e.td,{children:"jenkins"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"LINK_SCAN"}),(0,d.jsx)(e.td,{children:"false"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"SCAN_TYPE"}),(0,d.jsx)(e.td,{children:"sonarqube"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"IS_CONTAINER"}),(0,d.jsx)(e.td,{children:"true"}),(0,d.jsx)(e.td,{})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"MYSQL_INTERNAL"}),(0,d.jsx)(e.td,{children:"false"}),(0,d.jsx)(e.td,{children:"\u5185\u7f6e MySQL"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"MYSQL_ROOT_PASSWORD"}),(0,d.jsx)(e.td,{}),(0,d.jsx)(e.td,{})]})]})]}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u5bb9\u5668\u5185apache\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff1a/etc/apache2/"}),"\n",(0,d.jsx)(e.li,{children:"\u5bb9\u5668\u5185\u7985\u9053\u76ee\u5f55\uff1a/www/zentaopms"}),"\n",(0,d.jsx)(e.li,{children:"\u5bb9\u5668\u5185mysql\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff1a/etc/mysql/"}),"\n",(0,d.jsx)(e.li,{children:"\u5bb9\u5668\u5185php\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff1a/etc/php/7.0/apache2"}),"\n",(0,d.jsxs)(e.li,{children:["Redis\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"PHP_SESSION_TYPE=redis"}),"\n",(0,d.jsx)(e.li,{children:"PHP_SESSION_PATH=tcp://redis:6379"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.zentao.net/book/zentaopms/405.html",children:"Docker\u65b9\u5f0f\u90e8\u7f72\u7985\u9053"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"docker",children:"Docker"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"/apps/zentao/config/my.php"}),"\n"]}),"\n",(0,d.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,d.jsx)(e.h2,{id:"\u4fee\u6539-ai-\u53c2\u6570",children:"\u4fee\u6539 AI \u53c2\u6570"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"echo '$config->ai->openai->api->openai->format = \"https://openai-proxy.wener.me/%s/%s\";' >> /apps/zentao/module/ai/config.php\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://gitee.com/wwccss/zentaopms/blob/zentaopms_18.9/module/ai/config.php",children:"https://gitee.com/wwccss/zentaopms/blob/zentaopms_18.9/module/ai/config.php"})}),"\n"]}),"\n",(0,d.jsx)(e.h2,{id:"\u8fd8\u6ca1\u6709\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6",children:"\u8fd8\u6ca1\u6709\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,d.jsx)(e.h2,{id:"admin",children:"Admin"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"select admins from zt_company;\n\n-- \u4fee\u6539 admin\nupdate zt_company set admins=',cyw,' where id=1;\n"})}),"\n",(0,d.jsx)(e.h1,{id:"\u7248\u672c",children:"\u7248\u672c"}),"\n",(0,d.jsx)(e.h2,{id:"186",children:"18.6"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u7ed3\u6784\u53d8\u5316"}),"\n",(0,d.jsxs)(e.li,{children:["\u5185\u7f6e MySQL \u53ef\u5173\u95ed\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"MYSQL_INTERNAL"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u65b9\u4fbf\u914d\u7f6e\u5916\u90e8 MySQL\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"ZT_MYSQL"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"\u53ef\u4ee5\u4f7f\u7528 Redis \u6301\u4e45\u5316 Session"}),"\n",(0,d.jsx)(e.li,{children:"\u53ef\u4ee5\u4f7f\u7528 ENV \u914d\u7f6e PHP"}),"\n",(0,d.jsx)(e.li,{children:"\u76ee\u5f55\u53d8\u5316"}),"\n",(0,d.jsx)(e.li,{children:(0,d.jsx)(e.a,{href:"https://www.zentao.net/book/zentaopms/1059.html",children:"https://www.zentao.net/book/zentaopms/1059.html"})}),"\n"]}),"\n",(0,d.jsx)(e.hr,{}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u65e7\u7248\u672c\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["/www/zentaopms - 18.3\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"/www/zentaopms/VERSION"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"/apps/zentaopms - 18.4,18.5"}),"\n",(0,d.jsx)(e.li,{children:"/var/lib/mysql"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u65b0\u7248\u672c\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["/data\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"/data/mysql"}),"\n",(0,d.jsxs)(e.li,{children:["/data/zentao\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"/data/zentao/.version"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.li,{children:"/data/phy"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-bash",children:"# \u65e7\u7248\u672c\u5907\u4efd\ncd /www/zentaopms/bin\nbash init.sh\nbash backup.sh\n\nls -1 /www/zentaopms/tmp/backup\n\ncp -rp old/www/data new/data/zentao/www\ncp -rp old/config/my.php new/data/zentao/config/my.php\n\ncd old/www/zentaopms/tmp/backup\n\ncp 202401100259473.sql.php bak.sql\nsed -i '1d' bak.sql\nsed -i 's/0000-00-00/1970-01-01/g' bak.sql\n\nmysql -uroot -h127.0.0.1 -P3306 -p123456 zentao < bak.sql\n\nmysql -uroot -h127.0.0.1 -P3306 -p123456 zentao\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-sql",children:"-- \u5224\u65ad\u6570\u636e\u662f\u5426\u6062\u590d\nselect account from zt_user;\n"})})]})}function j(n={}){const{wrapper:e}={...(0,t.M)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(x,{...n})}):x(n)}},38088:(n,e,s)=>{var d=s(96651),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,s){var d,r={},h=null,x=null;for(d in void 0!==s&&(h=""+s),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(x=e.ref),e)i.call(e,d)&&!c.hasOwnProperty(d)&&(r[d]=e[d]);if(n&&n.defaultProps)for(d in e=n.defaultProps)void 0===r[d]&&(r[d]=e[d]);return{$$typeof:t,type:n,key:h,ref:x,props:r,_owner:l.current}}e.Fragment=r,e.jsx=h,e.jsxs=h},2488:(n,e,s)=>{n.exports=s(38088)},62780:(n,e,s)=>{s.d(e,{I:()=>l,M:()=>i});var d=s(96651);const t={},r=d.createContext(t);function i(n){const e=d.useContext(r);return d.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),d.createElement(r.Provider,{value:e},n.children)}}}]);