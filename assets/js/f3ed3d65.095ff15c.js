/*! For license information please see f3ed3d65.095ff15c.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[56023],{42307:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>a});var r=s(11527),n=s(47214);const o={title:"cstore_fdw"},l="cstore_fdw",c={id:"db/relational/postgresql/cstore_fdw",title:"cstore_fdw",description:"- citusdata/cstorefdw",source:"@site/../notes/db/relational/postgresql/cstore_fdw.md",sourceDirName:"db/relational/postgresql",slug:"/db/relational/postgresql/cstore_fdw",permalink:"/notes/db/relational/postgresql/cstore_fdw",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/db/relational/postgresql/cstore_fdw.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1633617108,formattedLastUpdatedAt:"Oct 7, 2021",frontMatter:{title:"cstore_fdw"},sidebar:"docs",previous:{title:"Citus",permalink:"/notes/db/relational/postgresql/citus"},next:{title:"Hasura",permalink:"/notes/db/relational/postgresql/hasura"}},i={},a=[];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",li:"li",pre:"pre",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"cstore_fdw",children:"cstore_fdw"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/citusdata/cstore_fdw",children:"citusdata/cstore_fdw"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u5217\u5b58"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.li,{children:"\u5b9e\u9645\u4f7f\u7528\u6548\u679c\u4e00\u822c"}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"caution",children:(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"citus 10+ \u5185\u7f6e columnar, \u53d6\u4ee3 cstore_fdw"}),"\n"]})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# \u4f9d\u8d56\u4e8e protobuf-c\n# \u786e\u4fdd pg_config \u5728 PATH \u4e2d\n\ngit clone https://github.com/citusdata/cstore_fdw\ncd cstore_fdw\nmake install\n# /bin/sh /usr/local/lib/postgresql/pgxs/src/makefiles/../../config/install-sh -c -d '/usr/local/lib/postgresql'\n# /bin/sh /usr/local/lib/postgresql/pgxs/src/makefiles/../../config/install-sh -c -d '/usr/local/share/postgresql/extension'\n# /bin/sh /usr/local/lib/postgresql/pgxs/src/makefiles/../../config/install-sh -c -d '/usr/local/share/postgresql/extension'\n# /usr/bin/install -c -m 755  cstore_fdw.so '/usr/local/lib/postgresql/cstore_fdw.so'\n# /usr/bin/install -c -m 644 .//cstore_fdw.control '/usr/local/share/postgresql/extension/'\n# /usr/bin/install -c -m 644 .//cstore_fdw--1.6.sql .//cstore_fdw--1.5--1.6.sql .//cstore_fdw--1.4--1.5.sql .//cstore_fdw--1.3--1.4.sql .//cstore_fdw--1.2--1.3.sql .//cstore_fdw--1.1--1.2.sql .//cstore_fdw--1.0--1.1.sql  '/usr/local/share/postgresql/extension/'\n\n# mac\ncp cstore_fdw.so /usr/local/lib/postgresql/\n\necho \"shared_preload_libraries = 'cstore_fdw'\" >> postgresql.conf\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-sql",children:"-- load extension first time after install\nCREATE EXTENSION cstore_fdw;\n\n-- create server object\nCREATE SERVER cstore_server FOREIGN DATA WRAPPER cstore_fdw;\n\n-- create foreign table\nCREATE FOREIGN TABLE customer_reviews\n(\n    customer_id TEXT,\n    review_date DATE,\n    review_rating INTEGER,\n    review_votes INTEGER,\n    review_helpful_votes INTEGER,\n    product_id CHAR(10),\n    product_title TEXT,\n    product_sales_rank BIGINT,\n    product_group TEXT,\n    product_category TEXT,\n    product_subcategory TEXT,\n    similar_product_ids CHAR(10)[]\n)\nSERVER cstore_server\nOPTIONS(compression 'pglz');\n\nCOPY customer_reviews FROM '/home/user/customer_reviews_1998.csv' WITH CSV;\nCOPY customer_reviews FROM '/home/user/customer_reviews_1999.csv' WITH CSV;\n\nANALYZE customer_reviews;\n\n-- Find all reviews a particular customer made on the Dune series in 1998.\nSELECT\n    customer_id, review_date, review_rating, product_id, product_title\nFROM\n    customer_reviews\nWHERE\n    customer_id ='A27T7HVDXA3K2A' AND\n    product_title LIKE '%Dune%' AND\n    review_date >= '1998-01-01' AND\n    review_date <= '1998-12-31';\n\n-- Do we have a correlation between a book's title's length and its review ratings?\nSELECT\n    width_bucket(length(product_title), 1, 50, 5) title_length_bucket,\n    round(avg(review_rating), 2) AS review_average,\n    count(*)\nFROM\n   customer_reviews\nWHERE\n    product_group = 'Book'\nGROUP BY\n    title_length_bucket\nORDER BY\n    title_length_bucket;\n\nDROP FOREIGN TABLE cstore_table_n;\n\nDROP SERVER cstore_server;\nDROP EXTENSION cstore_fdw;\n"})})]})}function u(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3354:(e,t,s)=>{var r=s(50959),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(e,t,s){var r,o={},a=null,d=null;for(r in void 0!==s&&(a=""+s),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!i.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:n,type:e,key:a,ref:d,props:o,_owner:c.current}}t.Fragment=o,t.jsx=a,t.jsxs=a},11527:(e,t,s)=>{e.exports=s(3354)},47214:(e,t,s)=>{s.d(t,{Z:()=>c,a:()=>l});var r=s(50959);const n={},o=r.createContext(n);function l(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);