"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[27202],{49613:function(t,e,a){a.d(e,{Zo:function(){return m},kt:function(){return d}});var n=a(59496);function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e){if(null==t)return{};var a,n,l=function(t,e){if(null==t)return{};var a,n,l={},r=Object.keys(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(l[a]=t[a]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(l[a]=t[a])}return l}var o=n.createContext({}),u=function(t){var e=n.useContext(o),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=u(t.components);return n.createElement(o.Provider,{value:e},t.children)},N={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},k=n.forwardRef((function(t,e){var a=t.components,l=t.mdxType,r=t.originalType,o=t.parentName,m=p(t,["components","mdxType","originalType","parentName"]),k=u(a),d=l,s=k["".concat(o,".").concat(d)]||k[d]||N[d]||r;return a?n.createElement(s,i(i({ref:e},m),{},{components:a})):n.createElement(s,i({ref:e},m))}));function d(t,e){var a=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var r=a.length,i=new Array(r);i[0]=k;var p={};for(var o in e)hasOwnProperty.call(e,o)&&(p[o]=e[o]);p.originalType=t,p.mdxType="string"==typeof t?t:l,i[1]=p;for(var u=2;u<r;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},70416:function(t,e,a){a.r(e),a.d(e,{assets:function(){return m},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return p},metadata:function(){return u},toc:function(){return N}});var n=a(96600),l=a(27279),r=(a(59496),a(49613)),i=["components"],p={title:"Apache NiFi",tags:["Apache"]},o="Apache NiFi",u={unversionedId:"service/data/nifi",id:"service/data/nifi",title:"Apache NiFi",description:"- apache/nifi",source:"@site/../notes/service/data/nifi.md",sourceDirName:"service/data",slug:"/service/data/nifi",permalink:"/notes/service/data/nifi",draft:!1,editUrl:"https://github.com/wenerme/wener/edit/master/../notes/service/data/nifi.md",tags:[{label:"Apache",permalink:"/notes/tags/apache"}],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1663838677,formattedLastUpdatedAt:"Sep 22, 2022",frontMatter:{title:"Apache NiFi",tags:["Apache"]},sidebar:"docs",previous:{title:"NiFi Registry",permalink:"/notes/service/data/nifi-registry"},next:{title:"ISO/IEC 11179",permalink:"/notes/service/data/std/iso-11179"}},m={},N=[{value:"Notes",id:"notes",level:2},{value:"Glossary",id:"glossary",level:2},{value:"Driver",id:"driver",level:2},{value:"Processor",id:"processor",level:2},{value:"FlowFile",id:"flowfile",level:2},{value:"EL",id:"el",level:2},{value:"JOLT",id:"jolt",level:2},{value:"Kubernetes",id:"kubernetes",level:2},{value:"Upgrade",id:"upgrade",level:2},{value:"Illegal initial character: ?column?",id:"illegal-initial-character-column",level:2},{value:"Record does not have a value for the UpdateKey column",id:"record-does-not-have-a-value-for-the-updatekey-column",level:2},{value:"\u591a\u503c\u53c2\u6570",id:"\u591a\u503c\u53c2\u6570",level:2},{value:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6",id:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6",level:2},{value:"h2 java.lang.IllegalStateException: The file is locked",id:"h2-javalangillegalstateexception-the-file-is-locked",level:2},{value:"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup",id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup",level:2}],k={toc:N};function d(t){var e=t.components,a=(0,l.Z)(t,i);return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"apache-nifi"},"Apache NiFi"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi"},"apache/nifi"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Cloudera Dataflow Pipeline"))),(0,r.kt)("li",{parentName:"ul"},"nifi-stateless"),(0,r.kt)("li",{parentName:"ul"},"nifi-registry",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"NiFi Process Group \u7248\u672c\u7ba1\u7406 - Flow \u4ed3\u5e93"))),(0,r.kt)("li",{parentName:"ul"},"minifi",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u8f7b\u91cf\u7ea7\u7684 NiFi - \u652f\u6301\u90e8\u5206\u529f\u80fd"),(0,r.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e Edge \u90e8\u7f72"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi-minifi-cpp"},"apache/nifi-minifi-cpp"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"C++"),(0,r.kt)("li",{parentName:"ul"},"\u9002\u7528\u4e8e Ingest \u548c\u6700\u7ec8\u8f93\u51fa"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi-minifi-cpp/blob/main/PROCESSORS.md"},"processors")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi/tree/main/minifi"},"minifi"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Java"),(0,r.kt)("li",{parentName:"ul"},"minifi-bin.zip 271M vs nifi-bin.zip 1.5G"),(0,r.kt)("li",{parentName:"ul"},"\u529f\u80fd\u6309\u9700\u6253\u5305 - NAR"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi/tree/main/minifi/minifi-docker"},"minifi/minifi-docker"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"apache/nifi-minifi"))))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/apache/nifi-fds"},"apache/nifi-fds")," - Flow Design System",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Angular, \u524d\u7aef\u7ec4\u4ef6"))),(0,r.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/user-guide.html"},"User Guide")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html"},"Administration Guide")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/nifi-in-depth.html"},"NiFi In Depth")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://dev.to/tspannhw/simple-change-data-capture-cdc-with-sql-selects-via-apache-nifi-flank-19m4"},"Simple Change Data Capture (CDC) with SQL Selects via Apache NiFi (FLaNK)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/rest-api/index.html"},"REST API"))))),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"\u4e00\u4e2a NiFi \u5b9e\u4f8b\u53ea\u6709\u4e00\u4e2a flow",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u901a\u8fc7 Process Group \u7ba1\u7406\u591a\u7ec4\u903b\u8f91"))),(0,r.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4 bootstrap.conf \u4e3a -Xmx512m",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6b63\u5e38\u4f7f\u7528\u591a\u534a\u4e0d\u591f"))))),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"\u5904\u7406\u8fc7\u7a0b\u5c3d\u91cf\u4f7f\u7528 Avro",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u9762\u5411\u884c"),(0,r.kt)("li",{parentName:"ul"},"\u5305\u542b schema \u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"\u6bd4 JSON \u652f\u6301\u66f4\u591a\u7c7b\u578b - \u4f8b\u5982: DB \u63d2\u5165\u7684 Date \u5217\u7684\u65f6\u5019\uff0cJSON \u53ef\u80fd\u5931\u8d25\u3002"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Docker \u542f\u52a8\n# ===========\n# https://hub.docker.com/r/apache/nifi\n# NIFI_HOME /opt/nifi/nifi-current\n# NIFI_TOOLKIT_HOME /opt/nifi/nifi-toolkit-current\n# -v $PWD/data:/opt/nifi/nifi-current\n# \u5bc6\u7801\u81f3\u5c11 12 \u4f4d\n# \u811a\u672c\u91cc\u5217\u4e3e\u4e86\u652f\u6301\u7684\u53d8\u91cf\n# https://github.com/apache/nifi/blob/main/nifi-docker/dockerhub/sh/start.sh\ndocker run --rm -it \\\n  -p 8443:8443 \\\n  -e SINGLE_USER_CREDENTIALS_USERNAME=admin \\\n  -e SINGLE_USER_CREDENTIALS_PASSWORD=000000000000 \\\n  --name nifi apache/nifi\n\n# \u542f\u52a8\u540e\ndocker exec -it nifi bash\n./bin/nifi.sh status\n\n# \u672c\u5730 \u542f\u52a8\n# ===========\n./bin/nifi.sh set-single-user-credentials admin 000000000000\n./bin/nifi.sh start   # \u542f\u52a8\n./bin/nifi.sh status  # \u67e5\u770b\u72b6\u6001\n# \u65e5\u5fd7\ntail -F logs/nifi-app.log\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="\u63a8\u8350\u751f\u4ea7\u4f7f\u7528\u65b9\u5f0f"',title:'"\u63a8\u8350\u751f\u4ea7\u4f7f\u7528\u65b9\u5f0f"'},"# \u72b6\u6001\u7559\u5728 Host\ncurl -O https://mirror.sjtu.edu.cn/apache/nifi/1.15.3/nifi-1.15.3-bin.zip\nunzip nifi-1.15.3-bin.zip\ncat > .nifi-env <<CONF\nCONF\n# \u51c6\u5907 volume - \u56e0\u4e3a dockerfile \u5b9a\u4e49\u4e86 volume - \u4e0d\u8986\u76d6\u5bb9\u5668\u5185\u4f1a\u65e0\u6cd5\u8bbf\u95ee\u5230\u5916\u90e8\nmkdir -p nifi-1.15.3/{logs,conf,database_repository,flowfile_repository,content_repository,provenance_repository,state}\nchown 1000 nifi-1.15.3/{logs,conf,database_repository,flowfile_repository,content_repository,provenance_repository,state}\n\n# https://github.com/apache/nifi/blob/main/nifi-docker/dockerhub/Dockerfile#L77-L83\n# Docker \u5185\u542f\u52a8 - \u73af\u5883\u9694\u79bb\uff0c\u7b80\u5316\u914d\u7f6e\ndocker run --rm -it \\\n  -p 8443:8443 \\\n  -v $PWD/nifi-1.15.3:/opt/nifi/nifi-current \\\n  -v $PWD/nifi-1.15.3/logs:/opt/nifi/nifi-current/logs \\\n  -v $PWD/nifi-1.15.3/conf:/opt/nifi/nifi-current/conf \\\n  -v $PWD/nifi-1.15.3/state:/opt/nifi/nifi-current/state \\\n  -v $PWD/nifi-1.15.3/database_repository:/opt/nifi/nifi-current/database_repository \\\n  -v $PWD/nifi-1.15.3/flowfile_repository:/opt/nifi/nifi-current/flowfile_repository \\\n  -v $PWD/nifi-1.15.3/content_repository:/opt/nifi/nifi-current/content_repository \\\n  -v $PWD/nifi-1.15.3/provenance_repository:/opt/nifi/nifi-current/provenance_repository \\\n  -e SINGLE_USER_CREDENTIALS_USERNAME=admin \\\n  -e SINGLE_USER_CREDENTIALS_PASSWORD=000000000000 \\\n  --name nifi apache/nifi:1.15.3\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"property"),(0,r.kt)("th",{parentName:"tr",align:null},"default"),(0,r.kt)("th",{parentName:"tr",align:null},"env"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.https.host"),(0,r.kt)("td",{parentName:"tr",align:null},"$HOSTNAME"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_WEB_HTTPS_HOST")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.https.port"),(0,r.kt)("td",{parentName:"tr",align:null},"8443"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_WEB_HTTPS_PORT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.proxy.host"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_WEB_PROXY_HOST")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.proxy.context.path"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_WEB_PROXY_CONTEXT_PATH")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.http.host"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_WEB_HTTP_HOST")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.http.port"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_WEB_HTTP_PORT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.remote.input.host"),(0,r.kt)("td",{parentName:"tr",align:null},"$HOSTNAME"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_REMOTE_INPUT_HOST")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.remote.input.secure"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.remote.input.socket.port"),(0,r.kt)("td",{parentName:"tr",align:null},"10000"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_REMOTE_INPUT_SOCKET_PORT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.variable.registry.properties"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_VARIABLE_REGISTRY_PROPERTIES")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.flow.election.max.candidates"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ELECTION_MAX_CANDIDATES")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.flow.election.max.wait.time"),(0,r.kt)("td",{parentName:"tr",align:null},"5 mins"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ELECTION_MAX_WAIT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.is.node"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_CLUSTER_IS_NODE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.node.address"),(0,r.kt)("td",{parentName:"tr",align:null},"$HOSTNAME"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_CLUSTER_ADDRESS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.node.protocol.max.threads"),(0,r.kt)("td",{parentName:"tr",align:null},"50"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_CLUSTER_NODE_PROTOCOL_MAX_THREADS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.node.protocol.port"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_CLUSTER_NODE_PROTOCOL_PORT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.protocol.is.secure"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null},"$NIFI_CLUSTER_IS_NODE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.zookeeper.connect.string"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ZK_CONNECT_STRING")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.zookeeper.root.node"),(0,r.kt)("td",{parentName:"tr",align:null},"/nifi"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ZK_ROOT_NODE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.analytics.predict.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ANALYTICS_PREDICT_ENABLED")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.analytics.predict.interval"),(0,r.kt)("td",{parentName:"tr",align:null},"3 mins"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ANALYTICS_PREDICT_INTERVAL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.analytics.query.interval"),(0,r.kt)("td",{parentName:"tr",align:null},"5 mins"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ANALYTICS_QUERY_INTERVAL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.analytics.connection.model.implementation"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2935\ufe0e"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ANALYTICS_MODEL_IMPLEMENTATION")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.analytics.connection.model.score.name"),(0,r.kt)("td",{parentName:"tr",align:null},"rSquared"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ANALYTICS_MODEL_SCORE_NAME")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.analytics.connection.model.score.threshold"),(0,r.kt)("td",{parentName:"tr",align:null},".90"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_ANALYTICS_MODEL_SCORE_THRESHOLD")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.sensitive.props.key"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_SENSITIVE_PROPS_KEY")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.keystore"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"KEYSTORE_PATH")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.keystoreType"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"KEYSTORE_TYPE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.keystorePasswd"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"KEYSTORE_PASSWORD")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.keyPasswd"),(0,r.kt)("td",{parentName:"tr",align:null},"$KEYSTORE_PASSWORD"),(0,r.kt)("td",{parentName:"tr",align:null},"KEY_PASSWORD")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.truststore"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"TRUSTSTORE_PATH")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.truststoreType"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"TRUSTSTORE_TYPE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.truststorePasswd"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"TRUSTSTORE_PASSWORD")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.user.authorizer"),(0,r.kt)("td",{parentName:"tr",align:null},"managed-authorizer"),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_SECURITY_USER_AUTHORIZER")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.user.login.identity.provider"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.autoreload.enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.security.autoreload.interval"),(0,r.kt)("td",{parentName:"tr",align:null},"10 secs"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"NODE_IDENTITY")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"INITIAL_ADMIN_IDENTITY")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"SINGLE_USER_CREDENTIALS_USERNAME")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"SINGLE_USER_CREDENTIALS_PASSWORD")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"AUTH")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.ui.banner.text"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.ui.autorefresh.interval"),(0,r.kt)("td",{parentName:"tr",align:null},"30 sec"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.flow.configuration.file"),(0,r.kt)("td",{parentName:"tr",align:null},"./conf/flow.xml.gz"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.authorizer.configuration.file"),(0,r.kt)("td",{parentName:"tr",align:null},"./conf/authorizers.xml"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.database.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./database_repository"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.documentation.working.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./work/docs/components"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.login.identity.provider.configuration.file"),(0,r.kt)("td",{parentName:"tr",align:null},"./conf/login-identity-providers.xml"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.nar.library.autoload.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./extensions"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.nar.library.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./lib"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.nar.working.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./work/nar/"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.templates.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./conf/templates"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.state.management.embedded.zookeeper.properties"),(0,r.kt)("td",{parentName:"tr",align:null},"./conf/zookeeper.properties"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.flowfile.repository.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./flowfile_repository"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.content.repository.directory.default"),(0,r.kt)("td",{parentName:"tr",align:null},"./content_repository"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.provenance.repository.directory.default"),(0,r.kt)("td",{parentName:"tr",align:null},"./provenance_repository"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.status.repository.questdb.persist.location"),(0,r.kt)("td",{parentName:"tr",align:null},"./status_repository"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.jetty.working.directory"),(0,r.kt)("td",{parentName:"tr",align:null},"./work/jetty"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e\u4e86 NIFI_WEB_HTTP_PORT \u5219\u4f1a\u53d6\u6d88 https"),(0,r.kt)("li",{parentName:"ul"},"nifi.analytics.connection.model.implementation",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4 org.apache.nifi.controller.status.analytics.models.OrdinaryLeastSquares"))),(0,r.kt)("li",{parentName:"ul"},"AUTH - tls,ldap"),(0,r.kt)("li",{parentName:"ul"},"NIFI_SECURITY_USER_LOGIN_IDENTITY_PROVIDER - ldap-provider"),(0,r.kt)("li",{parentName:"ul"},"nifi.variable.registry.properties",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u53d8\u91cf\u7684\u6587\u4ef6"))),(0,r.kt)("li",{parentName:"ul"},"nifi.sensitive.props.key",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7528\u4e8e\u52a0\u5bc6\u654f\u611f\u4fe1\u606f\u7684 Key"),(0,r.kt)("li",{parentName:"ul"},"\u8fc1\u79fb\u65f6\u786e\u4fdd Key \u76f8\u540c"),(0,r.kt)("li",{parentName:"ul"},"./nifi-toolkit/bin/encrypt-config.sh \u53ef\u79bb\u7ebf\u4fee\u6539\u6216\u6062\u590d"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"./bin/nifi.sh set-sensitive-properties-key <sensitivePropertiesKey>"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53ef\u542f\u52a8\u540e\u4fee\u6539"),(0,r.kt)("li",{parentName:"ul"},"\u81f3\u5c11 12 \u4f4d")))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# \u4fee\u6539\u5bc6\u7801\n./nifi-toolkit/bin/encrypt-config.sh \\\n  -f nifi-old/conf/flow.xml.gz -g nifi-new/conf/flow.xml.gz \\\n  -n nifi-old/conf/nifi.properties -o nifi-new/conf/nifi.properties \\\n  -x \\\n  -s new_password\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"JVM \u914d\u7f6e")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"env"),(0,r.kt)("th",{parentName:"tr",align:null},"bootstrap.conf"),(0,r.kt)("th",{parentName:"tr",align:null},"default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_JVM_HEAP_INIT"),(0,r.kt)("td",{parentName:"tr",align:null},"java.arg.2"),(0,r.kt)("td",{parentName:"tr",align:null},"512m")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_JVM_HEAP_MAX"),(0,r.kt)("td",{parentName:"tr",align:null},"java.arg.3"),(0,r.kt)("td",{parentName:"tr",align:null},"512m")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"NIFI_JVM_DEBUGGER"),(0,r.kt)("td",{parentName:"tr",align:null},"java.arg.debug"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7aef\u53e3")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"props"),(0,r.kt)("th",{parentName:"tr",align:null},"port"),(0,r.kt)("th",{parentName:"tr",align:null},"note"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.web.https.port"),(0,r.kt)("td",{parentName:"tr",align:null},"8443"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.remote.input.socket.port"),(0,r.kt)("td",{parentName:"tr",align:null},"10443"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.node.protocol.port"),(0,r.kt)("td",{parentName:"tr",align:null},"11443"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nifi.cluster.node.load.balance.port"),(0,r.kt)("td",{parentName:"tr",align:null},"6342"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"clientPort"),(0,r.kt)("td",{parentName:"tr",align:null},"2181"),(0,r.kt)("td",{parentName:"tr",align:null},"zookeeper.properties")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"conf/flow.xml.gz"),(0,r.kt)("li",{parentName:"ul"},"conf/bootstrap.conf",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u63d0\u4f9b JVM \u76f8\u5173\u53c2\u6570"))),(0,r.kt)("li",{parentName:"ul"},"conf/nifi.properties",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u6838\u5fc3 NiFi \u914d\u7f6e"))),(0,r.kt)("li",{parentName:"ul"},"conf/login-identity-providers.xml",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u767b\u9646\u8ba4\u8bc1\u8bbe\u7f6e"),(0,r.kt)("li",{parentName:"ul"},"single-user-provider"),(0,r.kt)("li",{parentName:"ul"},"ldap-provider"),(0,r.kt)("li",{parentName:"ul"},"kerberos-provider"))),(0,r.kt)("li",{parentName:"ul"},"conf/authorizers.xml",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u8ba4\u8bc1\u4fe1\u606f"),(0,r.kt)("li",{parentName:"ul"},"file-user-group-provider",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"conf/users.xml"))),(0,r.kt)("li",{parentName:"ul"},"ldap-user-group-provider"),(0,r.kt)("li",{parentName:"ul"},"shell-user-group-provider"),(0,r.kt)("li",{parentName:"ul"},"azure-graph-user-group-provider"),(0,r.kt)("li",{parentName:"ul"},"composite-user-group-provider"),(0,r.kt)("li",{parentName:"ul"},"composite-configurable-user-group-provider"),(0,r.kt)("li",{parentName:"ul"},"file-access-policy-provider"),(0,r.kt)("li",{parentName:"ul"},"managed-authorizer - org.apache.nifi.authorization.StandardManagedAuthorizer"),(0,r.kt)("li",{parentName:"ul"},"file-provider - \u88ab managed-authorizer \u66ff\u4ee3"),(0,r.kt)("li",{parentName:"ul"},"single-user-authorizer - org.apache.nifi.authorization.single.user.SingleUserAuthorizer"))),(0,r.kt)("li",{parentName:"ul"},"conf/state-management.xml",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"local-provider",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"./state/local"))),(0,r.kt)("li",{parentName:"ul"},"zk-provider"),(0,r.kt)("li",{parentName:"ul"},"redis-provider - org.apache.nifi.redis.state.RedisStateProvider"))),(0,r.kt)("li",{parentName:"ul"},"conf/stateless.properties"),(0,r.kt)("li",{parentName:"ul"},"conf/zookeeper.properties",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5185\u7f6e Zookeeper \u7684\u914d\u7f6e"))),(0,r.kt)("li",{parentName:"ul"},"content_repository/"),(0,r.kt)("li",{parentName:"ul"},"database_repository/ - H2",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"nifi-flow-audit.mv.db"),(0,r.kt)("li",{parentName:"ul"},"nifi-identity-providers.mv.db"))),(0,r.kt)("li",{parentName:"ul"},"flowfile_repository/"),(0,r.kt)("li",{parentName:"ul"},"provenance_repository/ - \u5185\u7f6e Lucene"),(0,r.kt)("li",{parentName:"ul"},"state/"),(0,r.kt)("li",{parentName:"ul"},"extensions/",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f1a\u88ab nar \u81ea\u52a8\u52a0\u8f7d\u7684\u6269\u5c55\u76ee\u5f55"))),(0,r.kt)("li",{parentName:"ul"},"work/",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"nar/",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"extensions/",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"*.nar-unpacked"),"/"))),(0,r.kt)("li",{parentName:"ul"},"framework/",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"nifi-framework-nar-1.15.2.nar-unpacked/"))))),(0,r.kt)("li",{parentName:"ul"},"jetty/",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"*.war")))))),(0,r.kt)("li",{parentName:"ul"},"logs/")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -O https://jdbc.postgresql.org/download/postgresql-42.3.3.jar\ndocker exec -it nifi mkdir -p /opt/nifi/lib\ndocker cp postgresql-42.3.3.jar nifi:/opt/nifi/lib\n")),(0,r.kt)("h2",{id:"notes"},"Notes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u96c6\u7fa4\u4f7f\u7528 zookeeper \u7ba1\u7406\u72b6\u6001"),(0,r.kt)("li",{parentName:"ul"},"\u652f\u6301\u4f7f\u7528\u5185\u7f6e\u7684 zookeeper"),(0,r.kt)("li",{parentName:"ul"},"\u5f03\u7528 Variable \uff0c\u4f7f\u7528 Parameter"),(0,r.kt)("li",{parentName:"ul"},"record-oriented",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5728 record \u4e4b\u524d\uff0c\u5185\u90e8\u7ed3\u6784\u90fd\u4ee5 avro \u4e3a\u4e3b"),(0,r.kt)("li",{parentName:"ul"},"\u5f15\u5165 record \u62bd\u79bb reader, writer")))),(0,r.kt)("h2",{id:"glossary"},"Glossary"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"NAR - NiFi Archive",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u63d0\u4f9b Java ClassLoader isolation")))),(0,r.kt)("h2",{id:"driver"},"Driver"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"postgresql",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"org.postgresql.Driver"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://jdbc.postgresql.org/download.html"},"https://jdbc.postgresql.org/download.html")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar"},"https://jdbc.postgresql.org/download/postgresql-42.3.3.jar"))))),(0,r.kt)("h2",{id:"processor"},"Processor"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"PutFile",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5199\u5165\u5230\u76ee\u5f55\uff0c\u6587\u4ef6\u540d\u4e3a UUID\uff0c\u6bcf\u6b21\u4ea7\u751f\u4e00\u4e2a\u6587\u4ef6"))),(0,r.kt)("li",{parentName:"ul"},"PutS3, PutFTP, PutSSH"),(0,r.kt)("li",{parentName:"ul"},"PutRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Put \u5230 RecordSinkServices"))),(0,r.kt)("li",{parentName:"ul"},"PutDatabaseRecord"),(0,r.kt)("li",{parentName:"ul"},"QueryDatabaseTableRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u589e\u91cf\u67e5\u8be2"))),(0,r.kt)("li",{parentName:"ul"},"MergeRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5408\u5e76\u90e8\u5206 Record"),(0,r.kt)("li",{parentName:"ul"},"\u4f8b\u5982 \u7528\u4e8e\u5c0f\u6279\u91cf\u63d2\u5165"))),(0,r.kt)("li",{parentName:"ul"},"ValidateRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u57fa\u4e8e schema \u68c0\u67e5"))),(0,r.kt)("li",{parentName:"ul"},"\u8f6c\u6362",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ConvertRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Avro, JSON, CSV \u7b49"))),(0,r.kt)("li",{parentName:"ul"},"JoltTransformRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"JOLT - JsOn Language for Transform"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/bazaarvoice/jolt"},"bazaarvoice/jolt"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Apache-2.0, Java"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://jolt-demo.appspot.com/"},"https://jolt-demo.appspot.com/")))),(0,r.kt)("li",{parentName:"ul"},"QueryRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u5185\u7f6e Calcite SQL \u5f15\u64ce\u5904\u7406 Flow \u6587\u4ef6"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SELECT * FROM FLOWFILE")))),(0,r.kt)("li",{parentName:"ul"},"LookupRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u67e5\u8be2\u5916\u90e8 - \u4f8b\u5982 Redis"))),(0,r.kt)("li",{parentName:"ul"},"UpdateRecord"))),(0,r.kt)("li",{parentName:"ul"},"\u805a\u5408",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"PartitionRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5206\u7ec4"))),(0,r.kt)("li",{parentName:"ul"},"SplitRecord",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5206\u7ec4\u53d8\u5355\u884c")))))),(0,r.kt)("h2",{id:"flowfile"},"FlowFile"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"FlowFile",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"org.apache.nifi.flowfile.attributes.CoreAttributes",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"filename"),(0,r.kt)("li",{parentName:"ul"},"uuid"),(0,r.kt)("li",{parentName:"ul"},"path"),(0,r.kt)("li",{parentName:"ul"},"absolute.path"),(0,r.kt)("li",{parentName:"ul"},"priority"),(0,r.kt)("li",{parentName:"ul"},"mime.type",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"application/avro-binary"))),(0,r.kt)("li",{parentName:"ul"},"alternate.identifier"))),(0,r.kt)("li",{parentName:"ul"},"Standard FlowFile Attributes",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"fileSize"),(0,r.kt)("li",{parentName:"ul"},"entryDate"),(0,r.kt)("li",{parentName:"ul"},"lineageStartDate"))))),(0,r.kt)("li",{parentName:"ul"},"\u5e38\u89c1\u5c5e\u6027",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"tablename"),(0,r.kt)("li",{parentName:"ul"},"querydbtable.row.count"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"maxvalue.<column>"))))),(0,r.kt)("hr",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53c2\u8003",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/developer-guide.html"},"Developer Guide")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/expression-language-guide.html"},"Expression Language Guide"))))),(0,r.kt)("h2",{id:"el"},"EL"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"${filename:equals(${uuid})}"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"${\u5c5e\u6027:\u51fd\u6570(\u53c2\u6570)}"))),(0,r.kt)("li",{parentName:"ul"},"\u5c5e\u6027\u7ea7\u8054\u5173\u7cfb",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"FlowFile"),(0,r.kt)("li",{parentName:"ul"},"Process Group Variable"),(0,r.kt)("li",{parentName:"ul"},"File Registry"),(0,r.kt)("li",{parentName:"ul"},"NiFi JVM Properties"),(0,r.kt)("li",{parentName:"ul"},"System Environment"))),(0,r.kt)("li",{parentName:"ul"},"\u51fd\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Bool",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"isNull, notNull, isEmpty, equals, equalsIgnoreCase, gt, ge, lt, le, and, or, not"),(0,r.kt)("li",{parentName:"ul"},"ifElse",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"${literal(true):ifElse('a','b')}")))))),(0,r.kt)("li",{parentName:"ul"},"String",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"toUpper, toLower, trim, substring, substringBefore, substringBeforeLast, substringAfter, substringAfterLast"),(0,r.kt)("li",{parentName:"ul"},"getDelimitedField, append, prepend, replace, replaceFirst, replaceAll, padLeft, padRight"),(0,r.kt)("li",{parentName:"ul"},"replaceNull, replaceEmpty, length, evaluateELString, repeat"),(0,r.kt)("li",{parentName:"ul"},"startsWith, endsWith, contains, in, find, matches, indexOf, lastIndexOf"),(0,r.kt)("li",{parentName:"ul"},"jsonPath, jsonPathDelete, jsonPathAdd, jsonPathSet, jsonPathPut"))),(0,r.kt)("li",{parentName:"ul"},"Codec",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"{escape,unescape}{Json,Xml,Csv,Html3,Html4}"),(0,r.kt)("li",{parentName:"ul"},"urlEncode, urlDecode, base64Encode, base64Decode"),(0,r.kt)("li",{parentName:"ul"},"UUID3, UUID5"),(0,r.kt)("li",{parentName:"ul"},"hash",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"hex"))))),(0,r.kt)("li",{parentName:"ul"},"Math",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"plus, minus, multiply, divide, mod, toRadix, fromRadix, random, math"))),(0,r.kt)("li",{parentName:"ul"},"Date - format, toDate, now"),(0,r.kt)("li",{parentName:"ul"},"Typing - toString, toNumber, toDecimal"),(0,r.kt)("li",{parentName:"ul"},"ip, hostname, UUID, nextInt, literal"),(0,r.kt)("li",{parentName:"ul"},"getStateValue, thread"),(0,r.kt)("li",{parentName:"ul"},"anyAttribute, allAttributes, anyMatchingAttribute, allMatchingAttributes, anyDelineatedValue, allDelineatedValues"),(0,r.kt)("li",{parentName:"ul"},"join, count")))),(0,r.kt)("h2",{id:"jolt"},"JOLT"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "operation": "default",\n    "spec": {}\n  }\n]\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"operation",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"shift"),(0,r.kt)("li",{parentName:"ul"},"default"),(0,r.kt)("li",{parentName:"ul"},"remove"),(0,r.kt)("li",{parentName:"ul"},"sort"),(0,r.kt)("li",{parentName:"ul"},"java"),(0,r.kt)("li",{parentName:"ul"},"cardinality")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  // \u79fb\u9664\u6570\u7ec4\u91cc\u6bcf\u4e2a\u5143\u7d20\u7684 id,raw \u5b57\u6bb5\n  {\n    "operation": "remove",\n    "spec": {\n      "*": {\n        "id": "",\n        "raw": ""\n      }\n    }\n  }\n]\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://community.cloudera.com/t5/Community-Articles/Jolt-quick-reference-for-Nifi-Jolt-Processors/ta-p/244350"},"Jolt quick reference for Nifi Jolt Processors "))),(0,r.kt)("h2",{id:"kubernetes"},"Kubernetes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/cetic/helm-nifi"},"https://github.com/cetic/helm-nifi"))),(0,r.kt)("h2",{id:"upgrade"},"Upgrade"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://cwiki.apache.org/confluence/display/NIFI/Migration+Guidance"},"Migration Guidance")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nifi.apache.org/docs/nifi-docs/html/administration-guide.html#upgrading_nifi"},"Upgrading NiFi"))),(0,r.kt)("h1",{id:"faq"},"FAQ"),(0,r.kt)("h2",{id:"illegal-initial-character-column"},"Illegal initial character: ?column?"),(0,r.kt)("p",null,"ExecuteSQL \u6dfb\u52a0 alias"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- \u6709\u95ee\u9898\nselect 1;\n-- \u53ef\u4ee5\nselect 1 as val;\n")),(0,r.kt)("h2",{id:"record-does-not-have-a-value-for-the-updatekey-column"},"Record does not have a value for the UpdateKey column"),(0,r.kt)("p",null,"\u914d\u7f6e\u7684 update key \u6ca1\u6709\u6570\u636e\uff0c\u68c0\u67e5\u6570\u636e\u5185\u5bb9\u3002"),(0,r.kt)("h2",{id:"\u591a\u503c\u53c2\u6570"},"\u591a\u503c\u53c2\u6570"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u9017\u53f7\u5206\u9694\uff0c\u4f7f\u7528\u65f6\u91cd\u65b0\u62fc\u63a5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-pre",metastring:'title="owner_ids \u4e0d\u53ef\u4ee5\u5305\u542b\u7a7a\u683c"',title:'"owner_ids','\u4e0d\u53ef\u4ee5\u5305\u542b\u7a7a\u683c"':!0},"owner_id in ('${#{owner_ids}:replaceAll(',', \"','\")}')\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-pre",metastring:'title="owner_ids \u53ef\u4ee5\u5305\u542b\u7a7a\u683c"',title:'"owner_ids','\u53ef\u4ee5\u5305\u542b\u7a7a\u683c"':!0},'owner_id in (\'${allDelineatedValues("${#{owner_ids}}", ","):trim():join("\',\'")}\')\n')),(0,r.kt)("h2",{id:"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6"},"\u589e\u91cf\u5199\u5165\u5230\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var flowFile = session.get();\nvar File = Java.type('java.io.RandomAccessFile');\nif (flowFile != null) {\n  var filename = flowFile.getAttribute('filename');\n  /// \u5199\u5165\u6587\u4ef6\n  var filePath = '/tmp/nifi/test.log';\n  flowFile = session.putAttribute(flowFile, 'filePath', filePath);\n  var file = new File(filePath, 'rws');\n  file.seek(file.length());\n  // \u5199\u5165\u5185\u5bb9\n  file.write(filename.getBytes());\n  file.write('\\n'.getBytes());\n  file.close();\n  // Finish by transferring the FlowFile to an output relationship\n  session.transfer(flowFile, REL_SUCCESS);\n}\n")),(0,r.kt)("h2",{id:"h2-javalangillegalstateexception-the-file-is-locked"},"h2 java.lang.IllegalStateException: The file is locked"),(0,r.kt)("p",null,"\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u542f\u52a8\u8fc7 NiFi \u4e86"),(0,r.kt)("h2",{id:"filesystemrepository-unable-to-write-to-container-default-due-to-archive-file-size-constraints-waiting-for-archive-cleanup"},"FileSystemRepository Unable to write to container default due to archive file size constraints; waiting for archive cleanup"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"nifi.content.repository.implementation=org.apache.nifi.controller.repository.FileSystemRepository\nnifi.content.claim.max.appendable.size=1 MB\nnifi.content.repository.directory.default=./content_repository\nnifi.content.repository.archive.max.retention.period=7 days\n# \u9650\u5b9a\u4e86\u6700\u5927\u53ef\u7528\u7a7a\u95f4\nnifi.content.repository.archive.max.usage.percentage=50%\nnifi.content.repository.archive.enabled=true\nnifi.content.repository.always.sync=false\nnifi.content.viewer.url=../nifi-content-viewer/\n")))}d.isMDXComponent=!0}}]);