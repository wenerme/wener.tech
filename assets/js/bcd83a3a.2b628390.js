/*! For license information please see bcd83a3a.2b628390.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[23700],{4028:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>x,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var t=r(11527),d=r(47214);const s={title:"Agent"},c="Woodpecker Agent",i={id:"service/forge/woodpecker/woodpecker-agent",title:"Agent",description:"| flag                 | env                          | default         |",source:"@site/../notes/service/forge/woodpecker/woodpecker-agent.md",sourceDirName:"service/forge/woodpecker",slug:"/service/forge/woodpecker/agent",permalink:"/notes/service/forge/woodpecker/agent",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/forge/woodpecker/woodpecker-agent.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1680070123,formattedLastUpdatedAt:"Mar 29, 2023",frontMatter:{title:"Agent"},sidebar:"docs",previous:{title:"woodpecker",permalink:"/notes/service/forge/woodpecker/"},next:{title:"Woodpecker FAQ",permalink:"/notes/service/forge/woodpecker/faq"}},o={},l=[{value:"Docker",id:"docker",level:2},{value:"docker network mtu",id:"docker-network-mtu",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"woodpecker-agent",children:"Woodpecker Agent"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"flag"}),(0,t.jsx)(n.th,{children:"env"}),(0,t.jsx)(n.th,{children:"default"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--server"}),(0,t.jsx)(n.td,{children:"WOODPECKER_SERVER"}),(0,t.jsx)(n.td,{children:"woodpecker:9000"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--grpc-username"}),(0,t.jsx)(n.td,{children:"WOODPECKER_USERNAME"}),(0,t.jsx)(n.td,{children:"x-oauth-basic"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--grpc-password"}),(0,t.jsx)(n.td,{children:"WOODPECKER_AGENT_SECRET"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--grpc-secure"}),(0,t.jsx)(n.td,{children:"WOODPECKER_GRPC_SECURE"}),(0,t.jsx)(n.td,{children:"false"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--grpc-skip-insecure"}),(0,t.jsx)(n.td,{children:"WOODPECKER_GRPC_VERIFY"}),(0,t.jsx)(n.td,{children:"true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--log-level"}),(0,t.jsx)(n.td,{children:"WOODPECKER_LOG_LEVEL"}),(0,t.jsx)(n.td,{children:"trace"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--pretty"}),(0,t.jsx)(n.td,{children:"WOODPECKER_DEBUG_PRETTY"}),(0,t.jsx)(n.td,{children:"true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--nocolor"}),(0,t.jsx)(n.td,{children:"WOODPECKER_DEBUG_NOCOLOR"}),(0,t.jsx)(n.td,{children:"true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--hostname"}),(0,t.jsx)(n.td,{children:"WOODPECKER_HOSTNAME"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--filter"}),(0,t.jsx)(n.td,{children:"WOODPECKER_FILTER_LABELS"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--max-procs"}),(0,t.jsx)(n.td,{children:"WOODPECKER_MAX_WORKFLOWS"}),(0,t.jsx)(n.td,{children:"10"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--healthcheck"}),(0,t.jsx)(n.td,{children:"WOODPECKER_HEALTHCHECK"}),(0,t.jsx)(n.td,{children:"true"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--keepalive-time"}),(0,t.jsx)(n.td,{children:"WOODPECKER_KEEPALIVE_TIME"}),(0,t.jsx)(n.td,{children:"0s"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--keepalive-timeout"}),(0,t.jsx)(n.td,{children:"WOODPECKER_KEEPALIVE_TIMEOUT"}),(0,t.jsx)(n.td,{children:"20s"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--backend-engine"}),(0,t.jsx)(n.td,{children:"WOODPECKER_BACKEND"}),(0,t.jsx)(n.td,{children:"auto-detect"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"docker",children:"Docker"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"agent \u76f4\u63a5\u901a\u8fc7 sock \u8c03\u7528 docker \u8fdb\u884c\u64cd\u4f5c"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"WOODPECKER_BACKEND_DOCKER_NETWORK=\nWOODPECKER_BACKEND_DOCKER_ENABLE_IPV6=false\nWOODPECKER_BACKEND_DOCKER_VOLUMES=/etc/ssl/certs:/etc/ssl/certs:ro,/etc/timezone:/etc/timezone\nWOODPECKER_DOCKER_CONFIG=\n# \u7528\u4e8e\u652f\u6301 podman\nDOCKER_SOCK=\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://woodpecker-ci.org/docs/next/administration/backends/docker",children:"https://woodpecker-ci.org/docs/next/administration/backends/docker"})}),"\n"]}),"\n",(0,t.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,t.jsx)(n.h2,{id:"docker-network-mtu",children:"docker network mtu"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"dind \u9700\u8981\u4fee\u6539 mtu \u4e3a 1450"}),"\n",(0,t.jsx)(n.li,{children:"\u65e0\u6cd5\u4fee\u6539"}),"\n",(0,t.jsx)(n.li,{children:"drone \u53ef\u4ee5 DRONE_RUNNER_NETWORK_OPTS"}),"\n",(0,t.jsxs)(n.li,{children:["workaround WOODPECKER_BACKEND_DOCKER_NETWORK=bridge\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"v0.15 \u4e0d\u652f\u6301"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/woodpecker-ci/woodpecker/issues/1579",children:"https://github.com/woodpecker-ci/woodpecker/issues/1579"})}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},3354:(e,n,r)=>{var t=r(50959),d=Symbol.for("react.element"),s=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,r){var t,s={},l=null,h=null;for(t in void 0!==r&&(l=""+r),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(h=n.ref),n)c.call(n,t)&&!o.hasOwnProperty(t)&&(s[t]=n[t]);if(e&&e.defaultProps)for(t in n=e.defaultProps)void 0===s[t]&&(s[t]=n[t]);return{$$typeof:d,type:e,key:l,ref:h,props:s,_owner:i.current}}n.Fragment=s,n.jsx=l,n.jsxs=l},11527:(e,n,r)=>{e.exports=r(3354)},47214:(e,n,r)=>{r.d(n,{Z:()=>i,a:()=>c});var t=r(50959);const d={},s=t.createContext(d);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);