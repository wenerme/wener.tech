/*! For license information please see de4a4ee1.c7801d0a.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[96998],{40425:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>a});var i=n(11527),r=n(47214);const l={title:"Build Asterisk"},t="Build Asterisk",c={id:"voip/asterisk/asterisk-build",title:"Build Asterisk",description:"- debian \u80fd\u5b89\u88c5 16",source:"@site/../notes/voip/asterisk/asterisk-build.md",sourceDirName:"voip/asterisk",slug:"/voip/asterisk/build",permalink:"/notes/voip/asterisk/build",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/voip/asterisk/asterisk-build.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1626706991,formattedLastUpdatedAt:"Jul 19, 2021",frontMatter:{title:"Build Asterisk"},sidebar:"docs",previous:{title:"Asterisk Awesome",permalink:"/notes/voip/asterisk/awesome"},next:{title:"Asterisk CDR",permalink:"/notes/voip/asterisk/cdr"}},o={},a=[{value:"Asterisk Crash",id:"asterisk-crash",level:2},{value:"There are no local system nameservers configured, resorting to system resolution",id:"there-are-no-local-system-nameservers-configured-resorting-to-system-resolution",level:2},{value:"AlpineLinux musl \u95ee\u9898",id:"alpinelinux-musl-\u95ee\u9898",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"build-asterisk",children:"Build Asterisk"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["debian \u80fd\u5b89\u88c5 16\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\u6ca1\u6709 codec_ilbc, app_meetme\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"ilbc -> opus"}),"\n",(0,i.jsx)(s.li,{children:"meetme -> ConfBridge"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["alpine \u80fd\u5b89\u88c5 18 - \u6700\u65b0 \b lts \u7248 - \u4f46\u6709\u4e9b\u573a\u666f\u53ef\u80fd crash\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u53ef\u4ee5\u8003\u8651\u57fa\u4e8e frolvlad/alpine-glibc \u4ece\u65b0\u6784\u5efa"}),"\n",(0,i.jsxs)(s.li,{children:["\u6ca1\u6709 codec_opus_open_source - ",(0,i.jsx)(s.a,{href:"https://gitlab.alpinelinux.org/alpine/aports/-/issues/12808",children:"#12808"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"\u5982\u679c\u9700\u8981 certificated asterisk \u7248\u672c\u53ea\u80fd\u81ea\u5df1\u6784\u5efa"}),"\n",(0,i.jsxs)(s.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["aports ",(0,i.jsx)(s.a,{href:"https://github.com/alpinelinux/aports/blob/master/main/asterisk/APKBUILD",children:"main/asterisk/APKBUILD"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://github.com/andrius/asterisk",children:"andrius/asterisk"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"debian, centos \u6784\u5efa\u4e2a\u4e2a\u7248\u672c asterisk"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["debian\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u5171\u4eab\u8d44\u6e90\u4f4d\u4e8e /usr/share/asterisk"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"caution",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["opus \u7f16\u7801\u6a21\u5757\u4e0d\u662f\u5f00\u6e90\u7684 - \u9ed8\u8ba4\u5b89\u88c5\u662f\u7528\u5b98\u65b9\u4e0b\u8f7d - \u4f1a phonehome \u5230 stats.asterisk.org\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["debian \u7684 opus \u57fa\u4e8e ",(0,i.jsx)(s.a,{href:"https://github.com/traud/asterisk-opus",children:"traud/asterisk-opus"})]}),"\n",(0,i.jsx)(s.li,{children:"\u4e3b\u8981\u5305\u542b codec_opus \u548c format_ogg_opus"}),"\n",(0,i.jsxs)(s.li,{children:["debian \u6e90\u7801 ",(0,i.jsx)(s.a,{href:"https://salsa.debian.org/pkg-voip-team/asterisk-opus",children:"pkg-voip-team/asterisk-opus"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://web.archive.org/web/20161003135358/http://blogs.digium.com/2016/09/30/opus-in-asterisk/",children:"Opus for Asterisk"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u5b98\u65b9\u7684\u8bf4\u6cd5\u662f\u56e0\u4e3a\u6cd5\u5f8b\u5173\u7cfb\u6240\u4ee5\u4e0d\u5f00\u653e\u6e90\u7801"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \u6784\u5efa doc xml\n# \u53ef\u7528\u4e8e\u751f\u6210\u4ee3\u7801\u6216\u6587\u6863\n# core \u505a\u4e86 html escape, full \u6ca1\u6709 - \u4e24\u4e2a\u533a\u522b\u4e0d\u5927\nmake doc/core-en_US.xml\nmake doc/full-en_US.xml\n\n# \u6a21\u5757\u652f\u6301\u72b6\u6001\ngrep -rP '^\\t<support_level>' $(find . -name '*.c') | sed -re 's#</?support_level>##g' | sort\n"})}),"\n",(0,i.jsx)(s.h1,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(s.h2,{id:"asterisk-crash",children:"Asterisk Crash"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Dial \u65f6 WebSocket \u53d1\u9001 DTMF\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Debian 16.16 crash"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Echo \u5e94\u7528\u6309\u4efb\u610f\u952e\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"18 alpinelinux crash"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Asterisk crashes during call transfer ",(0,i.jsx)(s.a,{href:"https://issues.asterisk.org/jira/browse/ASTERISK-29168",children:"ASTERISK-29168"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"pbx_realtime diaplans"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"there-are-no-local-system-nameservers-configured-resorting-to-system-resolution",children:"There are no local system nameservers configured, resorting to system resolution"}),"\n",(0,i.jsx)(s.p,{children:"musl \u4e0d\u652f\u6301"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u5bfc\u81f4 pjsip \u65e0\u6cd5\u4f7f\u7528 DNS SRV \u800c\u4f7f\u7528 A \u548c AAAA \u89e3\u6790"}),"\n",(0,i.jsxs)(s.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://github.com/asterisk/asterisk/blob/b4347c486150653ec7ce1d129e8f9017c69344da/res/res_pjsip/config_system.c#L266-L270",children:"res/res_pjsip/config_system.c#L266-L270"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u8dd1\u51fa\u5f02\u5e38\u7684\u5730\u65b9"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://github.com/asterisk/asterisk/blob/b4347c486150653ec7ce1d129e8f9017c69344da/configure.ac#L1415-L1471",children:"configure.ac#L1415-L1471"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"\u4f9d\u8d56\u7684\u7cfb\u7edf\u51fd\u6570"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"musl \u672a\u5b9e\u73b0 res_ninit"}),"\n",(0,i.jsxs)(s.li,{children:["\u53ef\u4ee5\u5c1d\u8bd5\u8be5 patch ",(0,i.jsx)(s.a,{href:"https://github.com/openembedded/openembedded-core/blob/master/meta/recipes-connectivity/connman/connman/0002-resolve-musl-does-not-implement-res_ninit.patch",children:"0002-resolve-musl-does-not-implement-res_ninit.patch"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"alpinelinux-musl-\u95ee\u9898",children:"AlpineLinux musl \u95ee\u9898"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["segfault\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"agi dump html"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"pjsip \u65e0\u6cd5\u83b7\u53d6 nameserver"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},3354:(e,s,n)=>{var i=n(50959),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(e,s,n){var i,l={},a=null,d=null;for(i in void 0!==n&&(a=""+n),void 0!==s.key&&(a=""+s.key),void 0!==s.ref&&(d=s.ref),s)t.call(s,i)&&!o.hasOwnProperty(i)&&(l[i]=s[i]);if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===l[i]&&(l[i]=s[i]);return{$$typeof:r,type:e,key:a,ref:d,props:l,_owner:c.current}}s.Fragment=l,s.jsx=a,s.jsxs=a},11527:(e,s,n)=>{e.exports=n(3354)},47214:(e,s,n)=>{n.d(s,{Z:()=>c,a:()=>t});var i=n(50959);const r={},l=i.createContext(r);function t(e){const s=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);