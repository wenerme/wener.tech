/*! For license information please see 1a6a1d1a.0594ed4f.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[2568],{19628:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>a});var o=n(2488),s=n(62780);const t={title:"ProseMirror"},i="ProseMirror",l={id:"web/editor/prosemirror",title:"ProseMirror",description:"- prosemirror",source:"@site/../notes/web/editor/prosemirror.md",sourceDirName:"web/editor",slug:"/web/editor/prosemirror",permalink:"/notes/web/editor/prosemirror",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/editor/prosemirror.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1666756281,formattedLastUpdatedAt:"Oct 26, 2022",frontMatter:{title:"ProseMirror"},sidebar:"docs",previous:{title:"prosemirror-inside",permalink:"/notes/web/editor/prosemirror-inside"},next:{title:"puck",permalink:"/notes/web/editor/puck"}},c={},a=[];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",li:"li",pre:"pre",ul:"ul",...(0,s.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h1,{id:"prosemirror",children:"ProseMirror"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.a,{href:"https://prosemirror.net/",children:"prosemirror"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"low-level rte toolkit"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(r.li,{children:["\u7279\u6027\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"\u7ed3\u6784\u5316\u7684\u6a21\u578b\u6811"}),"\n",(0,o.jsx)(r.li,{children:"\u6a21\u578b\u4e0d\u53ef\u53d8"}),"\n",(0,o.jsx)(r.li,{children:"\u652f\u6301\u534f\u4f5c\u7f16\u8f91"}),"\n",(0,o.jsxs)(r.li,{children:["\u6a21\u578b\u53d7 schema \u9650\u5236 - \u5b9e\u73b0\u81ea\u5b9a\u4e49\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"\u89e3\u6790\u81ea\u52a8\u5316 - \u4f46\u53ef\u80fd\u4e22\u5f03 schema \u4e4b\u5916\u4fe1\u606f"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:"\u6a21\u578b\u72b6\u6001\u53d8\u5316\u7c7b\u4f3c\u4e8e redux"}),"\n",(0,o.jsx)(r.li,{children:"\u6574\u4f53\u6982\u5ff5\u7c7b\u4f3c\u4e8e react+redux"}),"\n",(0,o.jsx)(r.li,{children:"\u72b6\u6001 UI \u72ec\u7acb"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"https://prosemirror.net/docs/ref/",children:"Reference manual"})}),"\n"]}),"\n",(0,o.jsx)(r.admonition,{type:"tip",children:(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"\u5355\u7eaf\u5b66\u4e60 ProseMirror \u7684\u8bbe\u8ba1\u4e5f\u975e\u5e38\u6709\u610f\u4e49"}),"\n"]})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-bash",children:"# \u6838\u5fc3\u6a21\u5757\nnpm add prosemirror-{state,view,model,schema-basic,schema-list}\nnpm add --dev @types/prosemirror-{state,view,model,schema-basic,schema-list}\n# \u6269\u5c55\u6a21\u5757\nnpm add prosemirror-{keymap,history,commands,dropcursor,gapcursor,menu,inputrules}\nnpm add --dev @types/prosemirror-{keymap,history,commands,dropcursor,gapcursor,menu,inputrules}\n"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"import { schema } from 'prosemirror-schema-basic';\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { DOMParser } from 'prosemirror-model';\n\nimport { baseKeymap } from 'prosemirror-commands';\nimport { undo, redo, history } from 'prosemirror-history';\nimport { keymap } from 'prosemirror-keymap';\n\nlet content = document.getElementById('content');\nlet state = EditorState.create({\n  // \u521d\u59cb\u72b6\u6001\n  doc: DOMParser.fromSchema(schema).parse(content),\n  schema,\n  plugins: [history(), keymap({ 'Mod-z': undo, 'Mod-y': redo }), keymap(baseKeymap)],\n});\nlet view = new EditorView(document.body, { state });\n\n// \u57fa\u4e8e schema \u53ef\u76f4\u63a5\u6784\u5efa doc\nlet doc = schema.node('doc', null, [\n  schema.node('paragraph', null, [schema.text('One.')]),\n  schema.node('horizontal_rule'),\n  schema.node('paragraph', null, [schema.text('Two!')]),\n]);\n\n// Schema \u5305\u542b nodes, marks\nnew Schema({\n  nodes: {\n    doc: { content: 'block+' },\n    paragraph: {\n      group: 'block',\n      content: 'text*',\n      marks: '_',\n\n      toDOM(node) {\n        return ['p', 0];\n      },\n    },\n    heading: { group: 'block', content: 'text*', marks: '', attrs: { level: { default: 1 } } },\n    text: { inline: true },\n  },\n  marks: {\n    strong: {},\n    em: {\n      parseDOM: [\n        { tag: 'em' }, // Match <em> nodes\n        { tag: 'i' }, // and <i> nodes\n        { style: 'font-style=italic' }, // and inline 'font-style: italic'\n      ],\n    },\n  },\n});\n"})}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["content \u8bed\u6cd5 - \u7c7b\u4f3c\u4e8e PEG \u8bed\u6cd5\u3001RegExp \u8bed\u6cd5\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"paragraph"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"paragraph+"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"paragraph*"})}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"paragraph{2}"}),",",(0,o.jsx)(r.code,{children:"paragraph{2,}"}),",",(0,o.jsx)(r.code,{children:"paragraph{2,3}"})]}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"heading paragraph+"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.code,{children:"(paragraph | blockquote)+"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(r.li,{children:["marks\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"_"})," \u8868\u793a\u4efb\u610f"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:"group \u5b9a\u4e49\u7c7b\u578b\u7ec4\u5408"}),"\n",(0,o.jsxs)(r.li,{children:["Plugin\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["props\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"decorations"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:"state"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.li,{children:"EditorView - typing, clicking, copying, pasting, dragging"}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,s.M)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},38088:(e,r,n)=>{var o=n(96651),s=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function a(e,r,n){var o,t={},a=null,d=null;for(o in void 0!==n&&(a=""+n),void 0!==r.key&&(a=""+r.key),void 0!==r.ref&&(d=r.ref),r)i.call(r,o)&&!c.hasOwnProperty(o)&&(t[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===t[o]&&(t[o]=r[o]);return{$$typeof:s,type:e,key:a,ref:d,props:t,_owner:l.current}}r.Fragment=t,r.jsx=a,r.jsxs=a},2488:(e,r,n)=>{e.exports=n(38088)},62780:(e,r,n)=>{n.d(r,{I:()=>l,M:()=>i});var o=n(96651);const s={},t=o.createContext(s);function i(e){const r=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(t.Provider,{value:r},e.children)}}}]);