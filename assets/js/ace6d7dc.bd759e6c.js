/*! For license information please see ace6d7dc.bd759e6c.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[78399],{55824:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>c,toc:()=>o});var l=s(2488),i=s(62780);const r={title:"ACL"},d="Redis ACL",c={id:"db/kv/redis/redis-acl",title:"ACL",description:"- Redis v6 ACLv1",source:"@site/../notes/db/kv/redis/redis-acl.md",sourceDirName:"db/kv/redis",slug:"/db/kv/redis/acl",permalink:"/notes/db/kv/redis/acl",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/db/kv/redis/redis-acl.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1689578517,formattedLastUpdatedAt:"Jul 17, 2023",frontMatter:{title:"ACL"},sidebar:"docs",previous:{title:"Redis",permalink:"/notes/db/kv/redis/"},next:{title:"\u914d\u7f6e",permalink:"/notes/db/kv/redis/conf"}},t={},o=[];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"redis-acl",children:"Redis ACL"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Redis v6 ACLv1"}),"\n",(0,l.jsxs)(n.li,{children:["Redis v7 ACLv1\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8bfb\u5199\u3001\u547d\u4ee4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"caution",children:(0,l.jsxs)(n.p,{children:["ACL \u662f\u914d\u7f6e\uff0c\u4e0d\u662f\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u4f1a\u540c\u6b65\uff0c\u4e0d\u4f1a\u6301\u4e45\u3002 ",(0,l.jsx)(n.a,{href:"https://github.com/redis/redis/issues/7988",children:"#7988"})]})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5ba2\u6237\u7aef ",(0,l.jsx)(n.code,{children:"AUTH <username> <password>"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u9ed8\u8ba4\u7528\u6237 ",(0,l.jsx)(n.code,{children:"AUTH <password>"})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-txt",metastring:'title="\u9ed8\u8ba4\u914d\u7f6e"',children:"user default on nopass ~* &* +@all\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5bc6\u7801\u8bbe\u7f6e\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"nopass"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:">\u5bc6\u7801"}),"/",(0,l.jsx)(n.code,{children:"<\u5bc6\u7801"})," - \u8bbe\u7f6e/\u79fb\u9664 \u660e\u6587\u5bc6\u7801"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"#<hash>"}),"/",(0,l.jsx)(n.code,{children:"!<hash>"})," - \u8bbe\u7f6e/\u79fb\u9664 SHA-256 \u5bc6\u7801"]}),"\n",(0,l.jsx)(n.li,{children:"resetpass \u91cd\u7f6e"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u547d\u4ee4\u6743\u9650\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"+<command>"}),",",(0,l.jsx)(n.code,{children:"-<command>"}),",",(0,l.jsx)(n.code,{children:"+@<category>"}),",",(0,l.jsx)(n.code,{children:"-@<category>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["v7.0 \u652f\u6301\u7981\u6b62\u5b50\u547d\u4ee4 - \u4f8b\u5982 ",(0,l.jsx)(n.code,{children:"-config|set"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ACL CAT"})," \u6240\u6709\u5206\u7c7b"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"+<command>|arg"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4f8b\u5982: ",(0,l.jsx)(n.code,{children:"-SELECT|1"})," \u7981\u6b62 select 1 DB"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"allcommands"})," -> ",(0,l.jsx)(n.code,{children:"+@all"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"nocommands"})," -> ",(0,l.jsx)(n.code,{children:"-@all"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Key \u6743\u9650\u9650\u5b9a\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"~<pattern>"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"allkeys"})," -> ",(0,l.jsx)(n.code,{children:"~*"})]}),"\n",(0,l.jsx)(n.li,{children:"resetkeys - \u91cd\u7f6e"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"%R~<pattern>"}),",",(0,l.jsx)(n.code,{children:"%W~<pattern>"}),",",(0,l.jsx)(n.code,{children:"%RW~<pattern>"})," - v7.0+ \u9650\u5b9a \u8bfb\u5199"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Pub/Sub \u9650\u5b9a\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"&<pattern>"})," - v6.2+"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"allchannels"})," -> ",(0,l.jsx)(n.code,{children:"&*"})]}),"\n",(0,l.jsx)(n.li,{children:"resetchannels - \u91cd\u7f6e"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"reset - \u91cd\u7f6e\u6240\u6709\u89c4\u5219"}),"\n",(0,l.jsxs)(n.li,{children:["selector - v7.0+\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"(<rule list>)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"clearselectors"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"# user default on nopass ~* &* +@all\n\n# \u4e3a\u9ed8\u8ba4\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\nACL SETUSER default >PASSWD\n\n# \u5ba2\u6237\u7aef \u6d4b\u8bd5\u5bc6\u7801\u662f\u5426\u6b63\u786e\nHELLO 3 AUTH default PASSWD\n\n# \u5173\u95ed\u9ed8\u8ba4\u7528\u6237 - \u5982\u679c\u52a0\u4e86\u5176\u4ed6\u7528\u6237\nACL SETUSER default off\n\n# \u91cd\u65b0\u8bbe\u7f6e\nACL SETUSER admin reset on ~* >ADMIN &* +@all\n# \u91cd\u65b0\u8ba4\u8bc1\u4e3a admin\nAUTH admin ADMIN\n# \u4fee\u6539\u9ed8\u8ba4\u7528\u6237\u6743\u9650\nACL SETUSER default reset on nopass ~* &* +@all -@admin\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u8f93\u51fa \u5bc6\u7801 \u548c sha-256\nuuidgen | tee /dev/fd/2 | tr -d '[:space:]' | sha256sum\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"sentinel"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ACL SETUSER sentinel-user on >somepassword allchannels +multi +slaveof +ping +exec +subscribe +config|rewrite +role +publish +info +client|setname +client|kill +script|kill\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"replica"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ACL setuser replica-user on >somepassword +psync +replconf +ping\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u547d\u4ee4\u7c7b\u76ee"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"keyspace"}),"\n",(0,l.jsx)(n.li,{children:"read"}),"\n",(0,l.jsx)(n.li,{children:"write"}),"\n",(0,l.jsx)(n.li,{children:"set"}),"\n",(0,l.jsx)(n.li,{children:"sortedset"}),"\n",(0,l.jsx)(n.li,{children:"list"}),"\n",(0,l.jsx)(n.li,{children:"hash"}),"\n",(0,l.jsx)(n.li,{children:"string"}),"\n",(0,l.jsx)(n.li,{children:"bitmap"}),"\n",(0,l.jsx)(n.li,{children:"hyperloglog"}),"\n",(0,l.jsx)(n.li,{children:"geo"}),"\n",(0,l.jsx)(n.li,{children:"stream"}),"\n",(0,l.jsx)(n.li,{children:"pubsub"}),"\n",(0,l.jsx)(n.li,{children:"admin"}),"\n",(0,l.jsx)(n.li,{children:"fast - O(1)"}),"\n",(0,l.jsx)(n.li,{children:"slow"}),"\n",(0,l.jsx)(n.li,{children:"blocking"}),"\n",(0,l.jsx)(n.li,{children:"dangerous - FLUSHALL, MIGRATE, RESTORE, SORT, KEYS, CLIENT, DEBUG, INFO, CONFIG, SAVE, REPLICAOF"}),"\n",(0,l.jsx)(n.li,{children:"connection"}),"\n",(0,l.jsx)(n.li,{children:"transaction - WATCH, MULTI, EXEC"}),"\n",(0,l.jsx)(n.li,{children:"scripting"}),"\n",(0,l.jsxs)(n.li,{children:["replication\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"keydb"}),"\n",(0,l.jsx)(n.li,{children:"\u547d\u4ee4: ping, replconf, sync, replping, psync,"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://redis.io/topics/acl",children:"ACL"})}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},38088:(e,n,s)=>{var l=s(96651),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,s){var l,r={},o=null,h=null;for(l in void 0!==s&&(o=""+s),void 0!==n.key&&(o=""+n.key),void 0!==n.ref&&(h=n.ref),n)d.call(n,l)&&!t.hasOwnProperty(l)&&(r[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps)void 0===r[l]&&(r[l]=n[l]);return{$$typeof:i,type:e,key:o,ref:h,props:r,_owner:c.current}}n.Fragment=r,n.jsx=o,n.jsxs=o},2488:(e,n,s)=>{e.exports=s(38088)},62780:(e,n,s)=>{s.d(n,{I:()=>c,M:()=>d});var l=s(96651);const i={},r=l.createContext(i);function d(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);