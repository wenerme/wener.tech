/*! For license information please see 166be2d9.6c7e20a9.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[18521],{44569:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>o});var i=r(11527),t=r(47214);const s={title:"WireGuard"},d="WireGuard",l={id:"service/network/vpn/wireguard/README",title:"WireGuard",description:"- \u652f\u6301 Userspace \u8fd0\u884c\uff0c\u7c7b\u4f3c\u4e8e Proxy \u65b9\u5f0f",source:"@site/../notes/service/network/vpn/wireguard/README.md",sourceDirName:"service/network/vpn/wireguard",slug:"/service/network/vpn/wireguard/",permalink:"/notes/service/network/vpn/wireguard/",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/service/network/vpn/wireguard/README.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1699268951,formattedLastUpdatedAt:"Nov 6, 2023",frontMatter:{title:"WireGuard"},sidebar:"docs",previous:{title:"\u79c1\u6709\u865a\u62df\u7f51\u7edc\u5e38\u89c1\u95ee\u9898",permalink:"/notes/service/network/vpn/faq"},next:{title:"WireGuard Awesome",permalink:"/notes/service/network/vpn/wireguard/awesome"}},a={},o=[{value:"FAQ",id:"faq",level:2},{value:"\u6865\u63a5\u6216 DHCP",id:"\u6865\u63a5\u6216-dhcp",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"wireguard",children:"WireGuard"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u652f\u6301 Userspace \u8fd0\u884c\uff0c\u7c7b\u4f3c\u4e8e Proxy \u65b9\u5f0f"}),"\n"]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.wireguard.com/performance",children:"\u6027\u80fd\u5bf9\u6bd4"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/k4yt3x/wireguard-mesh-configurator",children:"WireGuard Mesh Configurator"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"mesh \u914d\u7f6e\u5de5\u5177 - \u6279\u91cf\u751f\u6210\u914d\u7f6e"}),"\n",(0,i.jsx)(n.li,{children:"\u4e0d\u4f1a\u81ea\u52a8\u53d1\u73b0 - \u9700\u8981\u989d\u5916\u914d\u7f6e"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/WireGuard/wg-dynamic",children:"wg-dynamic"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Wireguard Dynamic IP Configuration Tool"}),"\n",(0,i.jsx)(n.li,{children:"\u672a\u5b8c\u6210 - \u65e0\u7ef4\u62a4"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"\u5e38\u89c1\u7aef\u53e3 51820"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.wireguard.com/known-limitations/",children:"\u9650\u5236"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e0d\u4f1a\u5bf9\u5305\u505a\u6df7\u6dc6"}),"\n",(0,i.jsx)(n.li,{children:"\u901a\u9053\u4f7f\u7528 UDP - TCP over UDP"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528 ChaCha20Poly1305 \u52a0\u5bc6\uff0c\u76ee\u524d\u57fa\u672c\u4e0d\u652f\u6301\u786c\u4ef6\u52a0\u901f"}),"\n",(0,i.jsx)(n.li,{children:"Roaming Mischief - \u6f2b\u6e38\u573a\u666f\u4e0d\u592a\u53cb\u597d"}),"\n",(0,i.jsx)(n.li,{children:"Identity Hiding Forward Secrecy"}),"\n",(0,i.jsx)(n.li,{children:"Post-Quantum Secrecy - \u52a0\u5bc6\u65b9\u5f0f\u4e0d\u662f\u540e\u91cf\u5b50\u65f6\u4ee3\u5b89\u5168\u7684"}),"\n",(0,i.jsx)(n.li,{children:"Denial of Service"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://restoreprivacy.com/wireguard",children:"WireGuard VPN: What You Need to Know"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/gsliepen/tinc/issues/179",children:"gsliepen/tinc#178"})," - tinc: Wireguard backend"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u5185\u6838\u6a21\u5757\napk add wireguard-$(uname -r | sed -r 's/.*?-(.*)$/\\1/')\n# \u7528\u6237\u7a7a\u95f4\u5de5\u5177\napk add wireguard-tools\n\n# \u914d\u7f6e A \u7aef\n# ==========\n# \u751f\u6210\u5bc6\u94a5\u548c\u516c\u94a5\nwg genkey | tee wg0.pri | wg pubkey > wg0.pub\n# \u914d\u7f6e\u7f51\u5361\nip link add wg0 type wireguard\nip addr add 10.0.0.1/24 dev wg0\nwg set wg0 listen-port 51820 private-key wg0.pri\nip link set wg0 up\n\n# \u914d\u7f6e B \u7aef\n# ==========\n# \u751f\u6210\u5bc6\u94a5\u548c\u516c\u94a5\nwg genkey | tee wg0.pri | wg pubkey > wg0.pub\n# \u914d\u7f6e\u7f51\u5361\nip link add wg0 type wireguard\nip addr add 10.0.0.2/24 dev wg0\nwg set wg0 listen-port 51820 private-key wg0.pri\nip link set wg0 up\n\n# A -> B\n# ==========\n# \u5728 B \u6267\u884c - \u5c06\u8f93\u51fa\u7ed3\u679c\u5728 A \u6267\u884c\n# \u5982\u679c B \u6ca1\u6709 A \u80fd\u76f4\u63a5\u8bbf\u95ee\u7684\u5730\u5740 - \u5219\u5ffd\u7565 endpoint\necho wg set wg0 peer $(cat wg0.pub) persistent-keepalive 25 allowed-ips 10.0.0.2/32 endpoint <\u4e3b\u673aB\u5730\u5740>:51820\n\n# B -> A\n# ==========\n# \u5728 A \u6267\u884c - \u5c06\u8f93\u51fa\u7ed3\u679c\u5728 B \u6267\u884c\n# \u5982\u679c A \u6ca1\u6709 B \u80fd\u76f4\u63a5\u8bbf\u95ee\u7684\u5730\u5740 - \u5219\u5ffd\u7565 endpoint\necho wg set wg0 peer $(cat wg0.pub) persistent-keepalive 25 allowed-ips 10.0.0.1/32 endpoint <\u4e3b\u673aA\u5730\u5740>:51820\n\n# \u5728 B \u80fd\u8bbf\u95ee A\nping 10.0.0.1\n"})}),"\n",(0,i.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(n.h3,{id:"\u6865\u63a5\u6216-dhcp",children:"\u6865\u63a5\u6216 DHCP"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["wg \u53ea\u652f\u6301 L3 - TCP/IP\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"DHCP \u9700\u8981 L2 \u5c42 MAC"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6865\u63a5\u7684\u7f51\u8def\u53ef\u4ee5\u8003\u8651\u901a\u8fc7\u8def\u7531\u5b9e\u73b0 - ",(0,i.jsx)(n.a,{href:"https://lists.zx2c4.com/pipermail/wireguard/2018-January/002341.html",children:"\u4f8b\u5982"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u5982\u679c\u9700\u8981\u6865\u63a5\u53ef\u4ee5\u8003\u8651 tinc \u7684 switch \u6a21\u5f0f\u6216\u8005 ",(0,i.jsx)(n.a,{href:"https://remote-lab.net/linux-l2tp-ethernet-pseudowires",children:"l2tp"})]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},3354:(e,n,r)=>{var i=r(50959),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,r){var i,s={},o=null,c=null;for(i in void 0!==r&&(o=""+r),void 0!==n.key&&(o=""+n.key),void 0!==n.ref&&(c=n.ref),n)d.call(n,i)&&!a.hasOwnProperty(i)&&(s[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps)void 0===s[i]&&(s[i]=n[i]);return{$$typeof:t,type:e,key:o,ref:c,props:s,_owner:l.current}}n.Fragment=s,n.jsx=o,n.jsxs=o},11527:(e,n,r)=>{e.exports=r(3354)},47214:(e,n,r)=>{r.d(n,{Z:()=>l,a:()=>d});var i=r(50959);const t={},s=i.createContext(t);function d(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);