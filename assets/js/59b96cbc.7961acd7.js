/*! For license information please see 59b96cbc.7961acd7.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[14911],{77011:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>p,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var o=s(11527),r=s(47214);const t={title:"composer"},p="composer",c={id:"languages/php/composer",title:"composer",description:"- https://repo.packagist.org/",source:"@site/../notes/languages/php/composer.md",sourceDirName:"languages/php",slug:"/languages/php/composer",permalink:"/notes/languages/php/composer",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/languages/php/composer.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1695042174,formattedLastUpdatedAt:"Sep 18, 2023",frontMatter:{title:"composer"},sidebar:"docs",previous:{title:"PHP",permalink:"/notes/languages/php/"},next:{title:"laravel",permalink:"/notes/languages/php/laravel/"}},i={},l=[{value:"config",id:"config",level:2},{value:"auth.json",id:"authjson",level:2},{value:"file_put_contents(./composer.lock): Failed to open stream: Permission denied",id:"file_put_contentscomposerlock-failed-to-open-stream-permission-denied",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"composer",children:"composer"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://repo.packagist.org/",children:"https://repo.packagist.org/"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://repo.packagist.org/mirrors",children:"https://repo.packagist.org/mirrors"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://packagist.pages.dev/",children:"https://packagist.pages.dev/"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://pkg.xyz/",children:"https://pkg.xyz/"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://mirrors.aliyun.com/composer/composer.phar",children:"https://mirrors.aliyun.com/composer/composer.phar"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://developer.aliyun.com/composer",children:"https://developer.aliyun.com/composer"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# v1 \u5347\u7ea7\u5230 v2\ncomposer self-update --2\n\n# macOS\nbrew install composer\n# \u5168\u5c40\u4ed3\u5e93\u955c\u50cf\ncomposer config -g repos.packagist composer https://packagist.pages.dev\n# \u963f\u91cc\u4e91\n# composer config -g repos.packagist composer https://mirrors.aliyun.com/composer/\n# \u4e0a\u6d77\u4ea4\u5927\n# composer config -g repos.packagist composer https://packagist.mirrors.sjtug.sjtu.edu.cn\n\n# \u7981\u7528\ncomposer config -g --unset repos.packagist\n\ncomposer init\n# \u5355\u9879\u76ee\u4ed3\u5e93\u955c\u50cf\ncomposer config repos.packagist composer https://mirrors.aliyun.com/composer/\n\ncomposer dump-autoload -o\n\n# \u9879\u76ee \u5b89\u88c5 composer\nphp -r \"copy('https://getcomposer.org/installer', 'composer-setup.php');\"\n# --install-dir\n# --filename\n# --version\nphp composer-setup.php\nphp -r \"unlink('composer-setup.php');\"\n\nphp composer.phar init\n\nphp composer.phar update\n\ncomposer config --list\ncomposer config --global\n\n# \u624b\u52a8\u5b89\u88c5\nphp -r \"copy('https://install.phpcomposer.com/installer', 'composer-setup.php');\" \\\n  && php composer-setup.php \\\n  && php -r \"unlink('composer-setup.php');\" \\\n  && mv composer.phar /usr/local/bin/composer\n\n# CI\ncomposer install --no-ansi --no-dev --no-interaction --no-plugins --no-progress --no-scripts --optimize-autoloader\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"<?php\nrequire __DIR__ . '/vendor/autoload.php';\n"})}),"\n",(0,o.jsx)(n.h2,{id:"config",children:"config"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["$HOME/.composer - data-dir/home\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"auth.json"}),"\n",(0,o.jsx)(n.li,{children:"config.json"}),"\n",(0,o.jsx)(n.li,{children:"keys.dev.pub"}),"\n",(0,o.jsx)(n.li,{children:"keys.tags.pub"}),"\n",(0,o.jsxs)(n.li,{children:["cache/ - cache-dir\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"files/"}),"\n",(0,o.jsx)(n.li,{children:"repo/"}),"\n",(0,o.jsx)(n.li,{children:"vcs/"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://getcomposer.org/doc/06-config.md",children:"https://getcomposer.org/doc/06-config.md"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"authjson",children:"auth.json"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["COMPOSER_AUTH\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u53ef\u4ee5\u5b58\u50a8 json"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://getcomposer.org/doc/03-cli.md#composer-auth",children:"https://getcomposer.org/doc/03-cli.md#composer-auth"})}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",metastring:'title="~/.composer/auth.json"',children:'{\n  "bitbucket-oauth": {},\n  "github-oauth": {},\n  "gitlab-oauth": {},\n  "gitlab-token": {},\n  "http-basic": {\n    "try.gitea.com": {\n      "username": "wener",\n      "password": ""\n    }\n  },\n  "bearer": {}\n}\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"gitea \u53ef\u4ee5\u4f7f\u7528 PAT"}),"\n"]}),"\n",(0,o.jsx)(n.h1,{id:"faq",children:"FAQ"}),"\n",(0,o.jsx)(n.h2,{id:"file_put_contentscomposerlock-failed-to-open-stream-permission-denied",children:"file_put_contents(./composer.lock): Failed to open stream: Permission denied"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"chown $USER .\nsudo chown -R $USER ~/.composer/\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},3354:(e,n,s)=>{var o=s(50959),r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,s){var o,t={},l=null,a=null;for(o in void 0!==s&&(l=""+s),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(a=n.ref),n)p.call(n,o)&&!i.hasOwnProperty(o)&&(t[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===t[o]&&(t[o]=n[o]);return{$$typeof:r,type:e,key:l,ref:a,props:t,_owner:c.current}}n.Fragment=t,n.jsx=l,n.jsxs=l},11527:(e,n,s)=>{e.exports=s(3354)},47214:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>p});var o=s(50959);const r={},t=o.createContext(r);function p(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:p(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);