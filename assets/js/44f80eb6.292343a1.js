/*! For license information please see 44f80eb6.292343a1.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[74856],{64308:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var t=s(2488),i=s(62780);const r={title:"ssh config",tags:["Configuration"]},o=void 0,l={id:"os/linux/shell/ssh/ssh-config",title:"ssh config",description:"ssh config",source:"@site/../notes/os/linux/shell/ssh/ssh-config.md",sourceDirName:"os/linux/shell/ssh",slug:"/os/linux/shell/ssh/config",permalink:"/notes/os/linux/shell/ssh/config",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/shell/ssh/ssh-config.md",tags:[{label:"Configuration",permalink:"/notes/tags/configuration"}],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1693804740,formattedLastUpdatedAt:"Sep 4, 2023",frontMatter:{title:"ssh config",tags:["Configuration"]},sidebar:"docs",previous:{title:"ssh-agent",permalink:"/notes/os/linux/shell/ssh/agent"},next:{title:"SSH FAQ",permalink:"/notes/os/linux/shell/ssh/faq"}},a={},c=[{value:"ssh config",id:"ssh-config",level:2},{value:"Match \u672c\u5730\u5730\u5740",id:"match-\u672c\u5730\u5730\u5740",level:2}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"ssh-config",children:"ssh config"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u7528\u6237 ~/.ssh/config"}),"\n",(0,t.jsx)(e.li,{children:"\u7cfb\u7edf /etc/ssh/ssh_config"}),"\n",(0,t.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man5/ssh_config.5.html",children:"ssh_config.5"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\nssh -F /path/to/configfile\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Include\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u5305\u542b\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6 - \u652f\u6301 glob \u548c ~ \u5c55\u5f00"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# \u7f51\u5173\u670d\u52a1\u5668\nHost my-gate\nUser root\nHostname 1.2.3.4\n\n# \u901a\u8fc7 my-gate \u94fe\u63a5 1.2.3.100\n# busybox \u7684 nc \u6ca1\u6709 -q, \u9700\u8981\nHost my-gate-110\nUser root\nProxyCommand ssh -q qc-sh-1 nc -q0 1.2.3.100 22\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Host/Match \u533a\u5206\u6bb5\u843d"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ini",metastring:'title="\u901a\u914d Host"',children:"# \u4e3a\u5339\u914d\u7684 Host \u6307\u5b9a\u9ed8\u8ba4 User\nHost 10.10.*\n    User root\n# \u53ef\u4ee5 \u6392\u9664\nHost !10.10.10.*\n    User admin\n\n# \u8bbe\u7f6e\u6240\u6709\u9ed8\u8ba4\u53c2\u6570\nHost *\n    UseKeychain yes\n    AddKeysToAgent yes\n    IdentityFile ~/.ssh/id_rsa\n    User admin\n    ExitOnForwardFailure yes\n\n# \u76f4\u5230\u4e0b\u4e00\u4e2a Host/Match\nMatch\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Match\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"canonical, final, exec, host, originalhost, user, localuser, all"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u901a\u914d Host \u9700\u8981\u653e\u5728\u540e\u9762"}),"\n"]}),"\n",(0,t.jsx)(e.h1,{id:"faq",children:"FAQ"}),"\n",(0,t.jsx)(e.h2,{id:"match-\u672c\u5730\u5730\u5740",children:"Match \u672c\u5730\u5730\u5740"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# macOS\n# grep -v \u53d6\u53cd\nifconfig | grep 'inet ' | grep -Fv 127.0.0.1 | awk '{print $2}' | grep -qF 192.168.0.\n# Linux\nhostname -I | grep -qF 10.10.11.\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ssh_config",children:"Match exec \"ifconfig | grep 'inet ' | grep -Fv 127.0.0.1 | awk '{print $2}' | grep -vqF 192.168.0\"\n  # IP is not 192.168.0.*\n  Include ~/.ssh/not-at-home\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"onsubnet"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'#!/usr/bin/env bash\n\nif [[ "$1" == "--help" ]] || [[ "$1" == "-h" ]] || [[ "$1" == "" ]]; then\n  printf "Usage:\\n\\tonsubnet [ --not ] partial-ip-address\\n\\n"\n  printf "Example:\\n\\tonsubnet 10.10.\\n\\tonsubnet --not 192.168.0.\\n\\n"\n  printf "Note:\\n\\tThe partial-ip-address must match starting at the first\\n"\n  printf "\\tcharacter of the ip-address, therefore the first example\\n"\n  printf "\\tabove will match 10.10.10.1 but not 110.10.10.1\\n"\n  exit 0\nfi\n\non=0\noff=1\nif [[ "$1" == "--not" ]]; then\n  shift\n  on=1\n  off=0\nfi\n\nregexp="^$(sed \'s/\\./\\\\./g\' <<< "$1")"\n\nif [[ "$(uname)" == "Darwin" ]]; then\n  ifconfig | grep -F \'inet \' | grep -Fv 127.0.0. | cut -d \' \' -f 2 | grep -Eq "$regexp"\nelse\n  hostname -I | tr -s " " "\\012" | grep -Fv 127.0.0. | grep -Eq "$regexp"\nfi\n\nif [[ $? == 0 ]]; then\n  exit $on\nelse\n  exit $off\nfi\n'})})]})}function d(n={}){const{wrapper:e}={...(0,i.M)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}},38088:(n,e,s)=>{var t=s(96651),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(n,e,s){var t,r={},c=null,h=null;for(t in void 0!==s&&(c=""+s),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)o.call(e,t)&&!a.hasOwnProperty(t)&&(r[t]=e[t]);if(n&&n.defaultProps)for(t in e=n.defaultProps)void 0===r[t]&&(r[t]=e[t]);return{$$typeof:i,type:n,key:c,ref:h,props:r,_owner:l.current}}e.Fragment=r,e.jsx=c,e.jsxs=c},2488:(n,e,s)=>{n.exports=s(38088)},62780:(n,e,s)=>{s.d(e,{I:()=>l,M:()=>o});var t=s(96651);const i={},r=t.createContext(i);function o(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);