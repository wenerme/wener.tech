/*! For license information please see 0038149a.7d91826a.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[7104],{52125:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>t,metadata:()=>d,toc:()=>a});var i=s(11527),r=s(47214);const t={title:"fastify"},l="fastify",d={id:"web/nodejs/fastify",title:"fastify",description:"- fastify/fastify",source:"@site/../notes/web/nodejs/fastify.md",sourceDirName:"web/nodejs",slug:"/web/nodejs/fastify",permalink:"/notes/web/nodejs/fastify",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/web/nodejs/fastify.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1700666411,formattedLastUpdatedAt:"Nov 22, 2023",frontMatter:{title:"fastify"},sidebar:"docs",previous:{title:"drizzle",permalink:"/notes/web/nodejs/drizzle"},next:{title:"ffi-napi",permalink:"/notes/web/nodejs/ffi-napi"}},c={},a=[{value:"\u751f\u547d\u5468\u671f",id:"\u751f\u547d\u5468\u671f",level:2},{value:"\u8def\u7531",id:"\u8def\u7531",level:2},{value:"ecosystem",id:"ecosystem",level:2},{value:"nextjs",id:"nextjs",level:3},{value:"@fastify/autoload",id:"fastifyautoload",level:2},{value:"@fastify/static",id:"fastifystatic",level:2},{value:"fastify-cli",id:"fastify-cli",level:2},{value:"eject",id:"eject",level:3},{value:"ajv",id:"ajv",level:2},{value:"You cannot use <code>send</code> inside the <code>onError</code> hook",id:"you-cannot-use-send-inside-the-onerror-hook",level:2},{value:"Request body is too large",id:"request-body-is-too-large",level:2},{value:"FST_ERR_CTP_INVALID_MEDIA_TYPE",id:"fst_err_ctp_invalid_media_type",level:2},{value:"FST_ERR_CTP_INVALID_CONTENT_LENGTH",id:"fst_err_ctp_invalid_content_length",level:2}];function h(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"fastify",children:"fastify"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify",children:"fastify/fastify"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"MIT, JS+d.ts"}),"\n",(0,i.jsx)(e.li,{children:"\u76ee\u524d\u6027\u80fd\u6700\u597d"}),"\n",(0,i.jsx)(e.li,{children:"\u63a8\u8350\u4f7f\u7528 schema \u6821\u9a8c\u8f93\u5165\u8f93\u51fa"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53c2\u8003\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.fastify.io",children:"fastify.io"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u751f\u547d\u5468\u671f",children:"\u751f\u547d\u5468\u671f"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"phase"}),(0,i.jsx)(e.th,{children:"hook"}),(0,i.jsx)(e.th,{children:"abort"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Incoming"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Routing"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Instance Logger"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"onRequest"}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"preParsing"}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Parsing"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"preValidation"}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Validation"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"400"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"preHandler"}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"User Handler"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Reply"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"preSerialization"}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"onSend"}),(0,i.jsx)(e.td,{})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Outgoing Response"}),(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"4xx,5xx"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{}),(0,i.jsx)(e.td,{children:"onResponse"}),(0,i.jsx)(e.td,{})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u8def\u7531",children:"\u8def\u7531"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"/data/*"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"req.prams['*']"})," \u83b7\u53d6\u4e4b\u540e\u7684\u53c2\u6570"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"ecosystem",children:"ecosystem"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["fastify\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["ajv - \u9a8c\u8bc1\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/ajv-compiler",children:"fastify/ajv-compiler"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u76f4\u63a5\u4f9d\u8d56 ajv"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["pino - \u65e5\u5fd7\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/jsumners/abstract-logging",children:"jsumners/abstract-logging"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ef\u52a8\u6001\u5f00\u5173"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"avvio - \u4f9d\u8d56\u8c03\u5ea6\u987a\u5e8f"}),"\n",(0,i.jsx)(e.li,{children:"find-my-way - \u8def\u7531"}),"\n",(0,i.jsx)(e.li,{children:"light-my-request"}),"\n",(0,i.jsx)(e.li,{children:"secure-json-parse - JSON \u89e3\u6790"}),"\n",(0,i.jsxs)(e.li,{children:["fast-json-stringify - JSON \u5e8f\u5217\u5316\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u66f4\u5feb - 2x faster than JSON.stringify()"}),"\n",(0,i.jsx)(e.li,{children:"\u5229\u7528 schema \u4fe1\u606f\u751f\u6210 stringify"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/fastify/fast-json-stringify-compiler",children:"@fastify/fast-json-stringify-compiler"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"rfdc - Really Fast Deep Clone"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://www.fastify.io/ecosystem/#Core%20Plugins",children:"Core Plugins"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"cookie, cors, compress, caching, rate-limit, helmet, etag"}),"\n",(0,i.jsx)(e.li,{children:"formbody - \u89e3\u6790 x-www-form-urlencoded"}),"\n",(0,i.jsx)(e.li,{children:"multipart"}),"\n",(0,i.jsxs)(e.li,{children:["swagger - \u652f\u6301\u751f\u6210\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/Eomm/json-schema-resolver",children:"json-schema-resolver"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5904\u7406 JSON Schema"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"env - \u9a8c\u8bc1 ENV"}),"\n",(0,i.jsx)(e.li,{children:"request-context - AsyncLocalStorage - NodeJS v16.4"}),"\n",(0,i.jsx)(e.li,{children:"reply-from - \u8f6c\u53d1"}),"\n",(0,i.jsx)(e.li,{children:"schedule - CRON"}),"\n",(0,i.jsxs)(e.li,{children:["session - \u6709\u72b6\u6001\u4f1a\u8bdd\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528 connect-redis \u8fde\u63a5 redis"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["stateless-session - \u65e0\u72b6\u6001\u4f1a\u8bdd\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u52a0\u5bc6\u5b58\u5728 Cookie"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"static - serve \u9759\u6001\u6587\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"under-pressure - \u81ea\u52a8\u7194\u65ad"}),"\n",(0,i.jsx)(e.li,{children:"websocket - \u57fa\u4e8e ws"}),"\n",(0,i.jsx)(e.li,{children:"middie - \u4e2d\u95f4\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:"@fastify/routes - \u6c47\u805a\u6240\u6709\u8def\u7531\u5230 Map fastify.routes"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify-sensible",children:"@fastify/sensible"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4f9d\u8d56\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"forwarded - \u5904\u7406\u8f6c\u53d1\u5934"}),"\n",(0,i.jsx)(e.li,{children:"http-errors - \u6784\u9020\u5f02\u5e38"}),"\n",(0,i.jsx)(e.li,{children:"vary - \u6784\u9020 vary \u5934"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"fastify.httpErrors - \u6784\u9020 error"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.code,{children:"reply.<httpError>"})}),"\n",(0,i.jsx)(e.li,{children:"reply.vary"}),"\n",(0,i.jsx)(e.li,{children:"reply.cacheControl"}),"\n",(0,i.jsx)(e.li,{children:"reply.preventCache"}),"\n",(0,i.jsx)(e.li,{children:"reply.revalidate"}),"\n",(0,i.jsx)(e.li,{children:"reply.staticCache"}),"\n",(0,i.jsx)(e.li,{children:"reply.stale"}),"\n",(0,i.jsx)(e.li,{children:"reply.maxAge"}),"\n",(0,i.jsx)(e.li,{children:"request.forwarded"}),"\n",(0,i.jsx)(e.li,{children:"request.is - \u68c0\u6d4b mime \u7c7b\u578b"}),"\n",(0,i.jsx)(e.li,{children:"fastify.assert"}),"\n",(0,i.jsx)(e.li,{children:"fastify.to - async \u9519\u8bef\u5904\u7406"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"autoload - \u626b\u63cf\u76ee\u5f55\u52a0\u8f7d \u63d2\u4ef6\u3001\u8def\u7531"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify-nextjs",children:"@fastify/nextjs"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"nextjs \u96c6\u6210 - \u4e0d\u662f\u66ff\u4ee3 NextJS \u5185\u90e8\u7684 WebServer"}),"\n",(0,i.jsx)(e.li,{children:"nextjs \u5185\u90e8\u9ed8\u8ba4 express"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify-redis",children:"@fastify/redis"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"redis \u8fde\u63a5\u63d2\u4ef6"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/luin/ioredis",children:"ioredis"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"@fastify/postgres"}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify-auth",children:"@fastify/auth"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b auth \u76f8\u5173 hook"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u591a\u79cd auth \u903b\u8f91"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify-jwt",children:"@fastify/jwt"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"jwt \u9a8c\u8bc1\u548c\u7b7e\u540d"}),"\n",(0,i.jsx)(e.li,{children:"fast-jwt"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify-error",children:"@fastify/error"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6784\u9020 error"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["@fastify/env\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"env-schema"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://github.com/mercurius-js/mercurius",children:"mercurius-js/mercurius"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GraphQL servers and gateways"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/zalando-incubator/graphql-jit",children:"zalando-incubator/graphql-jit"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.fastify.io/docs/latest/Guides/Ecosystem/",children:"https://www.fastify.io/docs/latest/Guides/Ecosystem/"})}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const warning = require('process-warning')();\nwarning.create('FastifyDeprecation', 'FST_ERROR_CODE', 'message');\nwarning.emit('FST_ERROR_CODE');\n"})}),"\n",(0,i.jsx)(e.h3,{id:"nextjs",children:"nextjs"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"const fastify = require('fastify')();\n\nfastify.register(require('@fastify/nextjs')).after(() => {\n  fastify.next('/*');\n});\n\nfastify.listen(3000, (err) => {\n  if (err) throw err;\n  console.log('Server listening on http://localhost:3000');\n});\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://dev.to/applicazza/serve-next-js-with-fastify-5e67",children:"Serve Next.js with Fastify"})}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"fastifyautoload",children:"@fastify/autoload"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"fastify.register(Autoload, {\n  dir: path.join(__dirname, 'plugins'),\n  dirNameRoutePrefix: false\n  // ignorePattern\n  // indexPattern\n  forceESM: true,\n  // fastify-plugin\n  encapsulate: false\n})\n"})}),"\n",(0,i.jsx)(e.h2,{id:"fastifystatic",children:"@fastify/static"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"fastify.register(require('@fastify/static'), {\n  root: path.join(__dirname, 'public'),\n  prefix: '/public/', // optional: default '/'\n});\n"})}),"\n",(0,i.jsx)(e.h2,{id:"fastify-cli",children:"fastify-cli"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"npm add -g fastify-cli\n\n# fastify\n# fastify-plugin\n# fastify-cli\n# @fastify/sensible\n# https://github.com/tapjs/node-tap\nfastify generate my-server --lang=ts\n\ncd my-server\nnpm install # dependencies\nnpm start   # build:ts - fastify start -l info dist/app.js\nnpm build:ts\nnpm run dev # build:ts - watch:ts+dev:start pino-colada pretty logging\nnpm test\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/fastify/fastify-cli",children:"fastify/fastify-cli"})}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"eject",children:"eject"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u751f\u6210 server"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"// Read the .env file.\nimport * as dotenv from 'dotenv';\ndotenv.config();\n\n// Require the framework\nimport Fastify from 'fastify';\n\n// Require library to exit fastify process, gracefully (if possible)\nimport closeWithGrace from 'close-with-grace';\n\n// Instantiate Fastify with some config\nconst app = Fastify({\n  logger: true,\n});\n\n// Register your application as a normal plugin.\napp.register(import('./app'));\n\n// delay is the number of milliseconds for the graceful close to finish\nconst closeListeners = closeWithGrace({ delay: 500 }, async function ({ signal, err, manual }) {\n  if (err) {\n    app.log.error(err);\n  }\n  await app.close();\n} as closeWithGrace.CloseWithGraceAsyncCallback);\n\napp.addHook('onClose', async (instance, done) => {\n  closeListeners.uninstall();\n  done();\n});\n\n// Start listening.\napp.listen({ port: parseInt(process.env.PORT) || 3000 }, (err: any) => {\n  if (err) {\n    app.log.error(err);\n    process.exit(1);\n  }\n});\n"})}),"\n",(0,i.jsx)(e.h2,{id:"ajv",children:"ajv"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9ed8\u8ba4 Ajv v8, Draft 07"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://github.com/fastify/ajv-compiler/blob/main/index.js#L9-L18",children:"https://github.com/fastify/ajv-compiler/blob/main/index.js#L9-L18"})}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ts",children:"const defaultAjvOptions = {\n  coerceTypes: 'array',\n  useDefaults: true,\n  removeAdditional: true,\n  uriResolver: fastUri,\n  addUsedSchema: false,\n  // Explicitly set allErrors to `false`.\n  // When set to `true`, a DoS attack is possible.\n  allErrors: false,\n};\n"})}),"\n",(0,i.jsxs)(e.h2,{id:"you-cannot-use-send-inside-the-onerror-hook",children:["You cannot use ",(0,i.jsx)(e.code,{children:"send"})," inside the ",(0,i.jsx)(e.code,{children:"onError"})," hook"]}),"\n",(0,i.jsx)(e.h2,{id:"request-body-is-too-large",children:"Request body is too large"}),"\n",(0,i.jsx)(e.p,{children:"\u9ed8\u8ba4 1MiB"}),"\n",(0,i.jsx)(e.h2,{id:"fst_err_ctp_invalid_media_type",children:"FST_ERR_CTP_INVALID_MEDIA_TYPE"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"fastify-multipart"}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://fastify.dev/docs/latest/Reference/ContentTypeParser",children:"https://fastify.dev/docs/latest/Reference/ContentTypeParser"})}),"\n",(0,i.jsxs)(e.li,{children:["text/xml\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9700\u8981\u505a\u989d\u5916 middleware \u5904\u7406"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"fst_err_ctp_invalid_content_length",children:"FST_ERR_CTP_INVALID_CONTENT_LENGTH"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"post multipart/form"}),"\n"]})]})}function o(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(h,{...n})}):h(n)}},3354:(n,e,s)=>{var i=s(50959),r=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,d=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function a(n,e,s){var i,t={},a=null,h=null;for(i in void 0!==s&&(a=""+s),void 0!==e.key&&(a=""+e.key),void 0!==e.ref&&(h=e.ref),e)l.call(e,i)&&!c.hasOwnProperty(i)&&(t[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps)void 0===t[i]&&(t[i]=e[i]);return{$$typeof:r,type:n,key:a,ref:h,props:t,_owner:d.current}}e.Fragment=t,e.jsx=a,e.jsxs=a},11527:(n,e,s)=>{n.exports=s(3354)},47214:(n,e,s)=>{s.d(e,{Z:()=>d,a:()=>l});var i=s(50959);const r={},t=i.createContext(r);function l(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);