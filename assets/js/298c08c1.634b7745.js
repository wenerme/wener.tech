"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[30186],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=s(n),c=r,k=d["".concat(p,".").concat(c)]||d[c]||m[c]||l;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=d;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},46762:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return m}});var a=n(87462),r=n(63366),l=(n(67294),n(3905)),i=["components"],o={title:"tiptap"},p=void 0,s={unversionedId:"web/editor/tiptap",id:"web/editor/tiptap",title:"tiptap",description:"- ueberdosis/tiptap",source:"@site/notes/web/editor/tiptap.md",sourceDirName:"web/editor",slug:"/web/editor/tiptap",permalink:"/notes/web/editor/tiptap",draft:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/web/editor/tiptap.md",tags:[],version:"current",frontMatter:{title:"tiptap"},sidebar:"docs",previous:{title:"Slate",permalink:"/notes/web/editor/slate"},next:{title:"unifiedjs",permalink:"/notes/web/editor/unifiedjs"}},u={},m=[{value:"Editor",id:"editor",level:2},{value:"Node vs Mark",id:"node-vs-mark",level:2},{value:"@tiptap/html",id:"tiptaphtml",level:2},{value:"Extensions",id:"extensions",level:2},{value:"nextcloud/text",id:"nextcloudtext",level:2},{value:"Schema",id:"schema",level:2},{value:"Tiptap v1 vs Tiptap v2",id:"tiptap-v1-vs-tiptap-v2",level:2}],d={toc:m};function c(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/ueberdosis/tiptap"},"ueberdosis/tiptap"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"MIT, Typescript"),(0,l.kt)("li",{parentName:"ul"},"Headlees\uff0c\u6846\u67b6\u65e0\u5173\u7684\u7f16\u8f91\u5668"),(0,l.kt)("li",{parentName:"ul"},"\u57fa\u4e8e ProseMirror"),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u534f\u4f5c\u7f16\u8f91 - y.js"),(0,l.kt)("li",{parentName:"ul"},"Pro \u63d0\u4f9b\u90e8\u5206\u989d\u5916\u6269\u5c55 - emoji, details"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://badgen.net/bundlephobia/min/@tiptap/core?label=@tiptap/core%20min",alt:"@tiptap/core min"}),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"188k - prosemirror-{view,model,transform,state,commands,schema-list,keymap}"),(0,l.kt)("li",{parentName:"ul"},"@tiptap/core +58k"),(0,l.kt)("li",{parentName:"ul"},"@tiptap/starter-kit +4k - \u6269\u5c55\u90fd\u5f88\u5c0f"),(0,l.kt)("li",{parentName:"ul"},"@tiptap/react \u5305\u542b @popperjs/core, tippy.js ~ +60k")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u4f1a inject \u4e00\u70b9 css - ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/ueberdosis/tiptap/blob/main/packages/core/src/style.ts"},"packages/core/src/style.ts")),(0,l.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u5185\u7f6e Markdown \u652f\u6301",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/nextcloud/text"},"nextcloud/text"))))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm add @tiptap/{starter-kit,html}\n# starter \u4ee5\u5916\u6269\u5c55\nnpm add @tiptap/extension-{underline,text-style,text-align,underline,link,font-family,color,character-count}\n\nnpm add @tiptap/extension-image\nnpm add @tiptap/extension-table{,-row,-cell,-header}\nnpm add @tiptap/extension-task-{list,item}\n\nnpm add @tiptap/extension-horizontal-rule\n")),(0,l.kt)("h2",{id:"editor"},"Editor"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Node + Mark \u7ec4\u6210 ProseMirror \u7684 Schema"),(0,l.kt)("li",{parentName:"ul"},"\u65b9\u6cd5",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"chain - \u4e00\u6b21\u6027\u6267\u884c\u591a\u4e2a commands"),(0,l.kt)("li",{parentName:"ul"},"getHTML, getJSON, getText"),(0,l.kt)("li",{parentName:"ul"},"getAttributes"),(0,l.kt)("li",{parentName:"ul"},"isActive - \u68c0\u67e5\u9009\u4e2d\u5185\u5bb9\u662f\u5426\u5339\u914d\u6761\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"registerPlugin, unregisterPlugin"),(0,l.kt)("li",{parentName:"ul"},"setOptions, setEditable, isEditable, isEmpty"))),(0,l.kt)("li",{parentName:"ul"},"commands",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"focus - focus Editor"))),(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u4ef6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"beforeCreate, creaate"),(0,l.kt)("li",{parentName:"ul"},"update"),(0,l.kt)("li",{parentName:"ul"},"selectionUpdate"),(0,l.kt)("li",{parentName:"ul"},"transaction"),(0,l.kt)("li",{parentName:"ul"},"focus, blur"),(0,l.kt)("li",{parentName:"ul"},"destroy")))),(0,l.kt)("h2",{id:"node-vs-mark"},"Node vs Mark"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Node",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"block \u5143\u7d20"),(0,l.kt)("li",{parentName:"ul"},"tag \u6807\u7b7e"),(0,l.kt)("li",{parentName:"ul"},"atom \u4e3a\u4e0d\u53ef\u76f4\u63a5\u7f16\u8f91 Node - \u4f8b\u5982 Mention"))),(0,l.kt)("li",{parentName:"ul"},"Mark",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"node \u7684\u5c5e\u6027"),(0,l.kt)("li",{parentName:"ul"},"tag \u5c5e\u6027\u3001\u6837\u5f0f")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const MyNode = Node.create({\n  name: 'my-node',\n  content: 'block+', // \u5141\u8bb8\u5185\u5bb9 - +,*,?,|,()\n  group: 'block', // node \u5206\u7ec4\n  inline: true,\n  atom: false,\n  selectable: true,\n  draggable: true,\n  code: false,\n  whitespace: 'pre', // \u63a7\u5236\u7a7a\u767d \u5904\u7406 \u903b\u8f91\n  defining: false, // \u7c98\u8d34\u7684\u65f6\u5019\u662f\u5426\u4fdd\u7559\n  allowGapCursor: false,\n  isolating: false, // \u9694\u79bb\u7f16\u8f91\u8303\u56f4 - \u4f8b\u5982 TableCell\n  tableRole: 'cell', //  Table \u6269\u5c55\u5b9a\u4e49\u7684\u89d2\u8272 - table, row, cell, header_cell\n  marks: 'bold', // \u5141\u8bb8 mark - _ \u4efb\u610f, '' \u4e0d\u5141\u8bb8\n});\nconst MyMark = Node.create({\n  inclusive: false, // \u5149\u6807\u5728\u7ed3\u5c3e\u7684\u65f6\u5019\u662f\u5426\u5305\u542b\u5728\u5f53\u524d mark - \u4f8b\u5982 Link \u4e3a false\n  excludes: 'bold', // \u6392\u4ed6 mark\n  group: 'basic',\n  code: false, // \u5185\u5bb9\u662f\u5426\u4e3a\u4ee3\u7801\n  spanning: false, // \u662f\u5426\u53ef\u4ee5\u8de8\u591a\u4e2a\u8282\u70b9\n});\n")),(0,l.kt)("h2",{id:"tiptaphtml"},"@tiptap/html"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"JSON <-> HTML"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u9700\u8981 Editor \u5b9e\u4f8b"),(0,l.kt)("li",{parentName:"ul"},"\u57fa\u4e8e zeed-dom",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"+85k"),(0,l.kt)("li",{parentName:"ul"},"css-what +10k")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Browser + server-side\nimport { generateHTML, generateJSON } from '@tiptap/html';\n// \u8f7b\u91cf\u7ea7\nimport { generateHTML, generateJSON } from '@tiptap/core';\n")),(0,l.kt)("h2",{id:"extensions"},"Extensions"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// typescript \u7c7b\u578b\u4fe1\u606f\n\ninterface CustomExtensionOptions {}\ninterface CustomExtensionStorage {}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    customExtension: {\n      /**\n       * Comments will be added to the autocomplete.\n       */\n      yourCommand: (someProp: any) => ReturnType;\n    };\n  }\n}\n\n// Node.create, Mark.create\nconst CustomExtension = Extension.create<CustomExtensionOptions, CustomExtensionStorage>({\n  name: 'customExtension',\n\n  content: 'paragraph*',\n  draggable: true,\n\n  addAttributes() {\n    // this.{name,editor,type,options,parent,}\n    return {\n      ...this.parent?.(), // \u6269\u5c55\u65f6 \u7ee7\u627f\u4e0a\u7ea7\n      color: {\n        default: 'pink',\n        rendered: true, // \u662f\u5426\u6e32\u67d3\u5c5e\u6027\n        parseHTML: (element) => element.getAttribute('data-color'),\n        renderHTML: (attributes) => {\n          return {\n            'data-color': attributes.color,\n            style: `color: ${attributes.color}`,\n          };\n        },\n      },\n    };\n  },\n\n  addGlobalAttributes() {\n    // \u5168\u5c40\u5c5e\u6027\n    return [\n      {\n        // extend \u6269\u5c55\n        types: ['heading', 'paragraph'],\n        // \u6dfb\u52a0\u7684\u989d\u5916\u5c5e\u6027\n        attributes: {\n          textAlign: {\n            default: 'left',\n            renderHTML: (attributes) => ({\n              style: `text-align: ${attributes.textAlign}`,\n            }),\n            parseHTML: (element) => element.style.textAlign || 'left',\n          },\n        },\n      },\n    ];\n  },\n\n  // \u5b9a\u4e49\u5982\u4f55\u6e32\u67d3 HTML\n  renderHTML({ HTMLAttributes }) {\n    // tag,\u5c5e\u6027,children\n    // tag,\u5c5e\u6027,0 - 0 \u8868\u793a content \u63d2\u5165\u4f4d\u7f6e\n    return ['pre', ['code', HTMLAttributes, 0]];\n    // import { mergeAttributes } from '@tiptap/core'\n    return ['a', mergeAttributes(HTMLAttributes, { rel: this.options.rel }), 0];\n  },\n  parseHTML() {\n    return [\n      {\n        tag: 'strong',\n      },\n      {\n        tag: 'b',\n        // node.hasAttribute('style')\n        // node.getAttribute('data-color')\n        getAttrs: (node) => node.style.fontWeight !== 'normal' && null,\n      },\n    ];\n  },\n\n  addCommands() {\n    return {\n      paragraph:\n        () =>\n        ({ commands }) => {\n          // \u8bbf\u95ee\u5176\u4ed6 commands\n          return commands.setNode('paragraph');\n        },\n    };\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-l': () => this.editor.commands.toggleBulletList(),\n    };\n  },\n\n  addInputRules() {\n    // \u5f53\u8f93\u5165\u6307\u5b9a\u5185\u5bb9\u65f6\u5339\u914d\u4e3a type - \u4f8b\u5982 markdown \u8bed\u6cd5 ~~ -> Strike\n    // \u89c4\u5219\u4e00\u822c\u4ee5 $ \u7ed3\u5c3e\n    // import { markInputRule } from '@tiptap/core'\n    // const inputRegex = /(?:^|\\s)((?:~)((?:[^~]+))(?:~))$/\n    return [\n      markInputRule({\n        find: inputRegex,\n        type: this.type,\n      }),\n    ];\n  },\n  addPasteRules() {\n    // \u89c4\u5219\u4e00\u822c\u4e0d\u4f1a\u4ee5 $ \u7ed3\u5c3e\n    // import { markPasteRule } from '@tiptap/core'\n    // const pasteRegex = /(?:^|\\s)((?:~)((?:[^~]+))(?:~))/g\n    return [\n      markPasteRule({\n        find: pasteRegex,\n        type: this.type,\n      }),\n    ];\n  },\n\n  addStorage() {\n    // \u5916\u90e8\u8bbf\u95ee editor.storage.customExtension.counter\n    return {\n      counter: 100,\n    };\n  },\n\n  // \u4e8b\u4ef6\n  onUpdate() {\n    this.storage.counter += 1;\n  },\n\n  /* \u9ad8\u7ea7\u6269\u5c55 */\n\n  // \u6269\u5c55 ProseMirror\n  addProseMirrorPlugins() {\n    return [\n      history(),\n      // \u2026\n    ];\n  },\n\n  addNodeView() {\n    // \u4e3a\u7f16\u8f91\u5143\u7d20\u589e\u52a0\u4ea4\u4e92\u529f\u80fd\n    // https://tiptap.dev/guide/node-views\n    return ({ editor, node, getPos, HTMLAttributes, decorations, extension }) => {\n      const { view } = editor;\n      // view.dispatch\n\n      const dom = document.createElement('div');\n      dom.innerHTML = 'Node View';\n\n      const button = document.createElement('button');\n      button.innerHTML = `Counter ${node.attrs.count}`;\n\n      button.addEventListener('click', () => {\n        if (typeof getPos === 'function') {\n          view.dispatch(\n            // \u66f4\u65b0 node\n            view.state.tr.setNodeMarkup(getPos(), undefined, {\n              // node.attrs.count \u8bbf\u95ee\u5b9a\u4e49\u7684 \u5c5e\u6027\n              count: node.attrs.count + 1,\n            }),\n          );\n\n          editor.commands.focus();\n        }\n      });\n\n      const content = document.createElement('div');\n\n      dom.append(button, content);\n\n      return {\n        dom: container,\n        // \u53ef\u7f16\u8f91\u5185\u5bb9 - \u7531 tiptap \u6e32\u67d3\n        contentDOM: content,\n      };\n      // React \u7ec4\u4ef6\n      // import { ReactNodeViewRenderer, NodeViewWrapper } from '@tiptap/react'\n      // \u7ec4\u4ef6\u5185\u8fd4\u56de NodeViewWrapper\n      // props.node.attrs.count \u8bbf\u95ee node \u5c5e\u6027\n      // props.updateAttributes \u4fee\u6539 \u5c5e\u6027\n      // \u5185\u5bb9\u4f7f\u7528 NodeViewContent\n      return ReactNodeViewRenderer(Component);\n    };\n  },\n});\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"addKeyboardShortcuts",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Mod \u6307\u4ee3 Cmd \u6216 Control"),(0,l.kt)("li",{parentName:"ul"},"Shift, Alt, Control, Cmd"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://keycode.info/"},"https://keycode.info/"))))),(0,l.kt)("hr",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"@tiptap/extension-{name}")),(0,l.kt)("li",{parentName:"ul"},"\u6837\u5f0f/Mark",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"code - ",(0,l.kt)("inlineCode",{parentName:"li"},"<code>")),(0,l.kt)("li",{parentName:"ul"},"bold - strong, b, style.font-weight=bold/bolder/500-900"),(0,l.kt)("li",{parentName:"ul"},"color - \u57fa\u4e8e text-style - style.color"),(0,l.kt)("li",{parentName:"ul"},"font-family - \u57fa\u4e8e text-style - style.fontFamily"),(0,l.kt)("li",{parentName:"ul"},"link - a"),(0,l.kt)("li",{parentName:"ul"},"subscript - sub, style.vertical-align=sub"),(0,l.kt)("li",{parentName:"ul"},"superscript - sup, style.vertical-align=super"),(0,l.kt)("li",{parentName:"ul"},"text-align - style.textAlign"),(0,l.kt)("li",{parentName:"ul"},"text-style - \u5b9e\u73b0\u81ea\u5b9a\u4e49\u5c5e\u6027 - \u5305\u88c5\u4e3a span,"),(0,l.kt)("li",{parentName:"ul"},"typography - \u5e38\u7528\u5b57\u7b26\u66ff\u6362 - addInputRules - \u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"+-")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"\xb1")),(0,l.kt)("li",{parentName:"ul"},"underline - u"),(0,l.kt)("li",{parentName:"ul"},"strike - s, del, strike, style.text-decoration=line-through"),(0,l.kt)("li",{parentName:"ul"},"italic - em, i, style.font-style=italic"),(0,l.kt)("li",{parentName:"ul"},"highlight - data-color, style.backgroundColor"))),(0,l.kt)("li",{parentName:"ul"},"\u5143\u7d20/node",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"blockquote - ",(0,l.kt)("inlineCode",{parentName:"li"},"<blockquote>")),(0,l.kt)("li",{parentName:"ul"},"code-block - ",(0,l.kt)("inlineCode",{parentName:"li"},'<pre><code class="lang">')),(0,l.kt)("li",{parentName:"ul"},"code-block-lowlight - \u8bed\u6cd5\u9ad8\u4eae - ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/wooorm/lowlight"},"lowlight")," \u57fa\u4e8e highlight.js"),(0,l.kt)("li",{parentName:"ul"},"document - ",(0,l.kt)("inlineCode",{parentName:"li"},"Node.create({name: 'doc',topNode: true,content: 'block+'})")),(0,l.kt)("li",{parentName:"ul"},"emoji - PRO"),(0,l.kt)("li",{parentName:"ul"},"hard-break - br"),(0,l.kt)("li",{parentName:"ul"},"hash-tag - WIP"),(0,l.kt)("li",{parentName:"ul"},"details - PRO - DetailsSummary, DetailsContent"),(0,l.kt)("li",{parentName:"ul"},"heading - h1-h6"),(0,l.kt)("li",{parentName:"ul"},"horizontal-rule - hr"),(0,l.kt)("li",{parentName:"ul"},"image - ",(0,l.kt)("inlineCode",{parentName:"li"},"<img src>")),(0,l.kt)("li",{parentName:"ul"},"list-item - li"),(0,l.kt)("li",{parentName:"ul"},"mention - ",(0,l.kt)("inlineCode",{parentName:"li"},"<span data-id data-label>")),(0,l.kt)("li",{parentName:"ul"},"ordered-list - ol"),(0,l.kt)("li",{parentName:"ul"},"bullet-list - ul"),(0,l.kt)("li",{parentName:"ul"},"paragraph - p"),(0,l.kt)("li",{parentName:"ul"},"text - ",(0,l.kt)("inlineCode",{parentName:"li"},"Node.create({name: 'text',group: 'inline'})")),(0,l.kt)("li",{parentName:"ul"},"table",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"table-cell"),(0,l.kt)("li",{parentName:"ul"},"table-header"),(0,l.kt)("li",{parentName:"ul"},"table-row"))),(0,l.kt)("li",{parentName:"ul"},"task-list",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"task-item"))))),(0,l.kt)("li",{parentName:"ul"},"\u6269\u5c55",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"placeholder - Editor \u5185\u5bb9\u4e3a\u7a7a\u65f6\u7684\u5360\u4f4d\u5185\u5bb9 - ProseMirrorPlugin"),(0,l.kt)("li",{parentName:"ul"},"history - undo, redo"),(0,l.kt)("li",{parentName:"ul"},"bubble-menu - \u9009\u4e2d\u65f6\u51fa\u73b0\u7684\u83dc\u5355 - \u57fa\u4e8e tippy.js"),(0,l.kt)("li",{parentName:"ul"},"floating-menu - \u7a7a\u767d\u884c\u51fa\u73b0"),(0,l.kt)("li",{parentName:"ul"},"character-count - \u8bb0\u5f55\u6570\u91cf - \u53ef\u9650\u5b9a\u8f93\u5165\u6570\u91cf"),(0,l.kt)("li",{parentName:"ul"},"focus - \u5982\u679c Node \u6709 focus \u6dfb\u52a0 className has-focus - ProseMirrorPlugin"),(0,l.kt)("li",{parentName:"ul"},"dropcursor - prosemirror-dropcursor"),(0,l.kt)("li",{parentName:"ul"},"gapcursor - \u5904\u7406 Node \u4e0a\u7684 allowGapCursor \u5c5e\u6027 - prosemirror-gapcursor"))),(0,l.kt)("li",{parentName:"ul"},"\u534f\u4f5c - y-prosemirror",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"collaboration"),(0,l.kt)("li",{parentName:"ul"},"collaboration-cursor"))),(0,l.kt)("li",{parentName:"ul"},"starter-kit",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"blockquote, bullet-list, list-item, ordered-list, paragraph, code, code-block, document, heading"),(0,l.kt)("li",{parentName:"ul"},"strike, bold, text, italic"),(0,l.kt)("li",{parentName:"ul"},"hard-break, horizontal-rule"),(0,l.kt)("li",{parentName:"ul"},"history"),(0,l.kt)("li",{parentName:"ul"},"dropcursor, gapcursor")))),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"\u6269\u5c55\u529f\u80fd Node \u4f1a\u8bb0\u5f55\u7c7b\u578b\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"data-type")," - \u4f8b\u5982 TaskList -> ",(0,l.kt)("inlineCode",{parentName:"li"},"ul[data-type=taskList]")),(0,l.kt)("li",{parentName:"ul"},"Mark \u5e38\u89c1 command \u6a21\u5f0f ",(0,l.kt)("inlineCode",{parentName:"li"},"set<Mark>"),",",(0,l.kt)("inlineCode",{parentName:"li"},"unset<Mark>"),",",(0,l.kt)("inlineCode",{parentName:"li"},"toggle<Mark>"))))),(0,l.kt)("hr",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://tiptap.dev/experiments/commands"},"https://tiptap.dev/experiments/commands")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/ueberdosis/tiptap/issues/1036"},"https://github.com/ueberdosis/tiptap/issues/1036"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"indent"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/Leecason/element-tiptap/tree/master/src/extensions"},"https://github.com/Leecason/element-tiptap/tree/master/src/extensions"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"tiptap v1"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://tiptap.dev/api/extensions"},"https://tiptap.dev/api/extensions")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/ueberdosis/tiptap/tree/main/packages"},"https://github.com/ueberdosis/tiptap/tree/main/packages"))),(0,l.kt)("h2",{id:"nextcloudtext"},"nextcloud/text"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8282\u70b9/Node",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/nextcloud/text/blob/master/src/extensions/Emoji.js"},"Emoji"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9009\u53d6\u7ec4\u4ef6 ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/nextcloud/nextcloud-vue/blob/master/src/components/EmojiPicker/EmojiPicker.vue"},"EmojiPicker.vue")),(0,l.kt)("li",{parentName:"ul"},"React \u7248 ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/missive/emoji-mart"},"missive/emoji-mart")),(0,l.kt)("li",{parentName:"ul"},"Vue fork ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/serebrov/emoji-mart-vue"},"serebrov/emoji-mart-vue")))))),(0,l.kt)("li",{parentName:"ul"},"\u6269\u5c55/Extension",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Keymap - Ctrl-f \u89e6\u53d1\u6d4f\u89c8\u5668\u641c\u7d22\u800c\u975e Editor"),(0,l.kt)("li",{parentName:"ul"},"Markdown - \u589e\u52a0 toMarkdown\uff0c\u4f7f\u7528 prosemirror-markdown \u8fdb\u884c\u9ed8\u8ba4\u5e8f\u5217\u5316"),(0,l.kt)("li",{parentName:"ul"},"Collaboration"),(0,l.kt)("li",{parentName:"ul"},"UserColor")))),(0,l.kt)("hr",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/nextcloud/text"},"nextcloud/text"))),(0,l.kt)("h2",{id:"schema"},"Schema"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://tiptap.dev/api/schema"},"schema"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="model.json"',title:'"model.json"'},'{\n  "type": "doc",\n  "content": [\n    {\n      "type": "paragraph",\n      "content": [\n        {\n          "type": "text",\n          "text": "Wow, this editor instance exports its content as JSON."\n        }\n      ]\n    }\n  ]\n}\n')),(0,l.kt)("h1",{id:"faq"},"FAQ"),(0,l.kt)("h2",{id:"tiptap-v1-vs-tiptap-v2"},"Tiptap v1 vs Tiptap v2"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Tiptap v1",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Vue"))),(0,l.kt)("li",{parentName:"ul"},"Tiptap v2",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6838\u5fc3 Headless"),(0,l.kt)("li",{parentName:"ul"},"React, Vue, Alpine, Svelte"),(0,l.kt)("li",{parentName:"ul"},"\u534f\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"@mentions \u8865\u5168")))))}c.isMDXComponent=!0}}]);