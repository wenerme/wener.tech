/*! For license information please see 9577406d.905f7557.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[64810],{29812:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>o,frontMatter:()=>l,metadata:()=>i,toc:()=>h});var s=r(2488),d=r(62780);const l={title:"lsof"},t="lsof",i={id:"os/linux/shell/lsof",title:"lsof",description:"- lsof.8",source:"@site/../notes/os/linux/shell/lsof.md",sourceDirName:"os/linux/shell",slug:"/os/linux/shell/lsof",permalink:"/notes/os/linux/shell/lsof",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/os/linux/shell/lsof.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1687760370,formattedLastUpdatedAt:"Jun 26, 2023",frontMatter:{title:"lsof"},sidebar:"docs",previous:{title:"jq",permalink:"/notes/os/linux/shell/jq"},next:{title:"nano",permalink:"/notes/os/linux/shell/nano"}},c={},h=[];function x(n){const e={a:"a",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.M)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"lsof",children:"lsof"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://man7.org/linux/man-pages/man8/lsof.8.html",children:"lsof.8"})}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# \u641c\u7d22\u76ee\u5f55\nlsof +D /var/lib/k0s/containerd/io.containerd.snapshotter.v1.overlayfs/\n# \u641c\u7d22 Linux \u6587\u4ef6\nlsof -f -- /run/k0s/konnectivity-server/konnectivity-server.sock\n\nlsof -c ssh -c init\n\n# \u5224\u65ad roofs \u5bf9\u5e94\u78c1\u76d8\u6ca1\u6709\u592a\u591a\u8bfb\u5199\nlsof -a -d "^cwd,^rtd" +D "/"\nlsof -a -d "^cwd,^rtd,^mem,^txt" +D "/"\n'})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"flag"}),(0,s.jsx)(e.th,{children:"for"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-d FD"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"+D DIR"}),(0,s.jsx)(e.td,{children:"\u904d\u5386 DIR"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"+d DIR"}),(0,s.jsx)(e.td,{children:"\u4e0d\u904d\u5386"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-u USER"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-g GROUP"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-a"}),(0,s.jsx)(e.td,{children:"AND"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-c PROCESS_NAME"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-p PID"}),(0,s.jsx)(e.td,{})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-t"}),(0,s.jsx)(e.td,{children:"\u8f93\u51fa PID"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"+|-r [t[m<fmt>]]"})}),(0,s.jsx)(e.td,{children:"repeat N times"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-i"}),(0,s.jsx)(e.td,{children:"network"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-N"}),(0,s.jsx)(e.td,{children:"NFS"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-P"}),(0,s.jsx)(e.td,{children:"\u4e0d port -> name"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-n"}),(0,s.jsx)(e.td,{children:"\u4e0d ip -> hostname"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"+|-f [cfgGn]"})}),(0,s.jsx)(e.td,{children:"path name"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"-D D"}),(0,s.jsx)(e.td,{children:"device cache file"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"-x [fl]"})}),(0,s.jsx)(e.td,{children:"l - symlink, f - mount"})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"^EXCLUDE"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"-u ^root"})," - exclude root user"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"-p ^init"})," - exclude init process"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"-p 123,^456"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"-i [46][protocol][@hostname|hostaddr][:service|port]"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"-i TCP:22"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"-i TCP:1-1024"})}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"-i 4"})," - IPv4"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"-i 6"})," - IPv6"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"+D DIR -x l"})," - follow symlink"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"+D DIR -x f"})," - follow mount point"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"FD"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"FD"}),(0,s.jsx)(e.th,{children:"for"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"cwd"}),(0,s.jsx)(e.td,{children:"current working directory"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Lnn"}),(0,s.jsx)(e.td,{children:"library references (AIX)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"err"}),(0,s.jsx)(e.td,{children:"FD information error (see NAME column)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"jld"}),(0,s.jsx)(e.td,{children:"jail directory (FreeBSD)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"ltx"}),(0,s.jsx)(e.td,{children:"shared library text (code and data)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Mxx"}),(0,s.jsx)(e.td,{children:"hex memory-mapped type number xx"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"m86"}),(0,s.jsx)(e.td,{children:"DOS Merge mapped file"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"mem"}),(0,s.jsx)(e.td,{children:"memory-mapped file"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"mmap"}),(0,s.jsx)(e.td,{children:"memory-mapped device"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"pd"}),(0,s.jsx)(e.td,{children:"parent directory"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"rtd"}),(0,s.jsx)(e.td,{children:"root directory"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"tr"}),(0,s.jsx)(e.td,{children:"kernel trace file (OpenBSD)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"txt"}),(0,s.jsx)(e.td,{children:"program text (code and data)"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"v86"}),(0,s.jsx)(e.td,{children:"VP/ix mapped file"})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"r -> read"}),"\n",(0,s.jsx)(e.li,{children:"w -> write"}),"\n",(0,s.jsx)(e.li,{children:"u -> read+write"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:" "})," -> unknow & no lock"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"-"})," -> unknown & lock"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Lock"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"L"}),(0,s.jsx)(e.th,{children:"for"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"N"}),(0,s.jsx)(e.td,{children:"Solaris NFS lock of unknown type;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"r"}),(0,s.jsx)(e.td,{children:"read lock on part of the file;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"R"}),(0,s.jsx)(e.td,{children:"read lock on the entire file;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"w"}),(0,s.jsx)(e.td,{children:"write lock on part of the file;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"W"}),(0,s.jsx)(e.td,{children:"write lock on the entire file;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"u"}),(0,s.jsx)(e.td,{children:"read and write lock of any length;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"U"}),(0,s.jsx)(e.td,{children:"lock of unknown type;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"x"}),(0,s.jsx)(e.td,{children:"SCO OpenServer Xenix lock on part of the file;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"X"}),(0,s.jsx)(e.td,{children:"SCO OpenServer Xenix lock on the entire file;"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"space"}),(0,s.jsx)(e.td,{children:"no lock."})]})]})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["TYPE\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"REG - Regular File"}),"\n",(0,s.jsx)(e.li,{children:"DIR"}),"\n",(0,s.jsx)(e.li,{children:"FIFO"}),"\n",(0,s.jsx)(e.li,{children:"CHR"}),"\n"]}),"\n"]}),"\n"]})]})}function o(n={}){const{wrapper:e}={...(0,d.M)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(x,{...n})}):x(n)}},38088:(n,e,r)=>{var s=r(96651),d=Symbol.for("react.element"),l=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(n,e,r){var s,l={},h=null,x=null;for(s in void 0!==r&&(h=""+r),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(x=e.ref),e)t.call(e,s)&&!c.hasOwnProperty(s)&&(l[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps)void 0===l[s]&&(l[s]=e[s]);return{$$typeof:d,type:n,key:h,ref:x,props:l,_owner:i.current}}e.Fragment=l,e.jsx=h,e.jsxs=h},2488:(n,e,r)=>{n.exports=r(38088)},62780:(n,e,r)=>{r.d(e,{I:()=>i,M:()=>t});var s=r(96651);const d={},l=s.createContext(d);function t(n){const e=s.useContext(l);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:t(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);