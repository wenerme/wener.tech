/*! For license information please see f5e26598.4bd2b713.js.LICENSE.txt */
"use strict";(self.webpackChunkwener_website=self.webpackChunkwener_website||[]).push([[75572],{45812:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>x,frontMatter:()=>r,metadata:()=>d,toc:()=>o});var s=i(2488),l=i(62780);const r={title:"QEMU \u6587\u6863"},c="QEMU Document",d={id:"os/virt/qemu/qemu-doc",title:"QEMU \u6587\u6863",description:"- QEMU User Guide",source:"@site/../notes/os/virt/qemu/qemu-doc.md",sourceDirName:"os/virt/qemu",slug:"/os/virt/qemu/doc",permalink:"/notes/os/virt/qemu/doc",draft:!1,unlisted:!1,editUrl:"https://github.com/wenerme/wener/edit/master/notes/../notes/os/virt/qemu/qemu-doc.md",tags:[],version:"current",lastUpdatedBy:"wener",lastUpdatedAt:1709694572,formattedLastUpdatedAt:"Mar 6, 2024",frontMatter:{title:"QEMU \u6587\u6863"},sidebar:"docs",previous:{title:"QEMU Awesome",permalink:"/notes/os/virt/qemu/awesome"},next:{title:"QEMU FAQ",permalink:"/notes/os/virt/qemu/faq"}},t={},o=[{value:"Device URL Syntax",id:"device-url-syntax",level:3},{value:"\u955c\u50cf",id:"\u955c\u50cf",level:2},{value:"\u53ea\u8bfb\u683c\u5f0f",id:"\u53ea\u8bfb\u683c\u5f0f",level:3},{value:"\u78c1\u76d8\u955c\u50cf",id:"\u78c1\u76d8\u955c\u50cf",level:3},{value:"\u7f51\u7edc\u5757\u8bbe\u5907",id:"\u7f51\u7edc\u5757\u8bbe\u5907",level:3},{value:"\u7f51\u7edc",id:"\u7f51\u7edc",level:2},{value:"\u5916\u8bbe",id:"\u5916\u8bbe",level:2},{value:"USB",id:"usb",level:3},{value:"PCI",id:"pci",level:3},{value:"\u7528\u6237\u7a7a\u95f4\u865a\u62df",id:"\u7528\u6237\u7a7a\u95f4\u865a\u62df",level:2},{value:"\u663e\u793a",id:"\u663e\u793a",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,l.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"qemu-document",children:"QEMU Document"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["QEMU ",(0,s.jsx)(n.a,{href:"https://qemu.weilnetz.de/doc/7.0/",children:"User Guide"})]}),"\n",(0,s.jsxs)(n.li,{children:["QEMU ",(0,s.jsx)(n.a,{href:"https://qemu.weilnetz.de/doc/devel/",children:"Developers Guide"})]}),"\n",(0,s.jsx)(n.li,{children:"\u865a\u62df\u6a21\u5f0f"}),"\n",(0,s.jsxs)(n.li,{children:["PC \u7cfb\u7edf\u6a21\u62df\u5668\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6807\u51c6\u9009\u9879"}),"\n",(0,s.jsx)(n.li,{children:"\u5757\u8bbe\u5907\u9009\u9879"}),"\n",(0,s.jsx)(n.li,{children:"USB \u9009\u9879"}),"\n",(0,s.jsxs)(n.li,{children:["\u663e\u793a\u9009\u9879\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-display [type]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"sdl,curses,none,gtk,vnc"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"-nographic"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-alt-grab"})," - Ctrl-Alt-Shift"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-ctrl-grab"})," - Right-Ctrl"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-spice option[,option[,...]]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"spice \u8fdc\u7a0b\u684c\u9762\u534f\u8bae"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-full-screen"})," \u5168\u5c4f\u7684\u65b9\u5f0f\u6253\u5f00"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-g widthxheight[xdepth]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8bbe\u7f6e\u521d\u59cb\u5927\u5c0f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-vnc display[,option[,option[,...]]]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53c2\u6570"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u7f51\u7edc"}),"\n",(0,s.jsx)(n.li,{children:"\u5b57\u7b26\u8bbe\u5907"}),"\n",(0,s.jsx)(n.li,{children:"\u84dd\u7259"}),"\n",(0,s.jsx)(n.li,{children:"TPM \u8bbe\u5907"}),"\n",(0,s.jsx)(n.li,{children:"Linux/Multiboot \u542f\u52a8"}),"\n",(0,s.jsxs)(n.li,{children:["\u8c03\u8bd5\u548c\u4e13\u5bb6\u9009\u9879\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-serial [dev]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8f6c\u53d1\u865a\u62df\u4e32\u53e3\u5230\u4e3b\u673a\u7684\u5b57\u7b26\u8bbe\u5907"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"vc[:WxH]"})," Virtual console"]}),"\n",(0,s.jsx)(n.li,{children:"pty, none, null, chardev:id, /dev/XXX, stdio, pipe:filename,, COMn"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"udp:[remote_host]:remote_port[@[src_ip]:src_port]"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"tcp:[host]:port[,server][,nowait][,nodelay][,reconnect=seconds]"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"telnet:host:port[,server][,nowait][,nodelay]"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"unix:path[,server][,nowait][,reconnect=seconds]"})}),"\n",(0,s.jsx)(n.li,{children:"/dev/parportN"}),"\n",(0,s.jsx)(n.li,{children:"mon:dev_string"}),"\n",(0,s.jsx)(n.li,{children:"braille"}),"\n",(0,s.jsx)(n.li,{children:"msmouse"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-S"})," - \u542f\u52a8\u65f6\u4e0d\u542f\u52a8 CPU, \u624b\u52a8\u8f93\u5165 ",(0,s.jsx)(n.code,{children:"c"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-bios file"})," - \u6307\u5b9a BIOS \u6587\u4ef6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-no-reboot"})," - \u9000\u51fa\u800c\u4e0d\u662f\u91cd\u542f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-enable-kvm"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u662f\u5426\u542f\u7528 KVM"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-enable-hax"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u662f\u5426\u542f\u7528 HAX (Hardware-based Acceleration eXecution)"}),"\n",(0,s.jsx)(n.li,{children:"\u53ea\u5bf9 Mac \u548c Windows \u6709\u6548"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-loadvm [file]"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u52a0\u8f7d\u4fdd\u5b58\u7684\u72b6\u6001"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-daemonize"})," - \u540e\u53f0\u8fd0\u884c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-readconfig file"})," - \u4ece\u6587\u4ef6\u8bfb\u53d6\u8bbe\u5907\u914d\u7f6e"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-writeconfig file"})," - \u5c06\u8bbe\u5907\u914d\u7f6e\u5199\u5165\u5230\u6587\u4ef6"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u76d1\u63a7"}),"\n",(0,s.jsx)(n.li,{children:"\u78c1\u76d8\u955c\u50cf"}),"\n",(0,s.jsx)(n.li,{children:"\u7f51\u7edc\u6a21\u62df\u5668"}),"\n",(0,s.jsx)(n.li,{children:"\u5176\u4ed6\u8bbe\u5907"}),"\n",(0,s.jsx)(n.li,{children:"\u76f4\u63a5 Linux \u542f\u52a8"}),"\n",(0,s.jsx)(n.li,{children:"USB \u6a21\u62df\u5668"}),"\n",(0,s.jsx)(n.li,{children:"VNC \u5b89\u5168\u76f8\u5173"}),"\n",(0,s.jsx)(n.li,{children:"\u5e73\u53f0\u76f8\u5173\u9009\u9879"}),"\n",(0,s.jsxs)(n.li,{children:["\u975e PC \u7cfb\u7edf\u6a21\u62df\u5668\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"PowerPC"}),"\n",(0,s.jsx)(n.li,{children:"Sparc32"}),"\n",(0,s.jsx)(n.li,{children:"Sparec64"}),"\n",(0,s.jsx)(n.li,{children:"MIPS"}),"\n",(0,s.jsx)(n.li,{children:"ARM"}),"\n",(0,s.jsx)(n.li,{children:"Cris"}),"\n",(0,s.jsx)(n.li,{children:"ClodFire"}),"\n",(0,s.jsx)(n.li,{children:"Cris"}),"\n",(0,s.jsx)(n.li,{children:"Microblaze"}),"\n",(0,s.jsx)(n.li,{children:"Sh4"}),"\n",(0,s.jsx)(n.li,{children:"Xtensa"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u5ba2\u6237\u7aef\u8c03\u7528"}),"\n",(0,s.jsxs)(n.li,{children:["\u7528\u6237\u7a7a\u95f4\u6a21\u62df\u5668\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Linux"}),"\n",(0,s.jsx)(n.li,{children:"BSD"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u652f\u6301\u7684\u673a\u5668\nqemu-system-x86_64 -machine help\n# \u652f\u6301\u7684 CPU\nqemu-system-x86_64 -cpu help\n# ARM \u652f\u6301 raspi2\nqemu-system-arm -machine help | grep rasp\n# \u67e5\u770b\u65e5\u5fd7\u9879\nqemu-system-x86_64 -d help\n\n# Alpine virt \u7248, 30M \u5de6\u53f3, alpine-standard \u4e3a 100M \u5de6\u53f3\nwget http://dl-cdn.alpinelinux.org/alpine/v3.6/releases/x86_64/alpine-virt-3.6.2-x86_64.iso\n\n# WARNING: Image format was not specified for 'alpine-virt-3.6.2-x86_64.iso' and probing guessed raw.\n#          Automatically detecting the format is dangerous for raw images, write operations on block 0 will be restricted.\n#          Specify the 'raw' format explicitly to remove the restrictions.\nqemu-system-x86_64 alpine-virt-3.6.2-x86_64.iso\n# \u8fd9\u6837\u5c31\u4e0d\u4f1a\u51fa\u73b0\u8b66\u544a\nqemu-system-x86_64 -cdrom alpine-virt-3.6.2-x86_64.iso\n\n# \u5c06\u4e00\u4e2a\u76ee\u5f55\u4f5c\u4e3a\u865a\u62df\u7684 fat \u78c1\u76d8\u955c\u50cf, \u9ed8\u8ba4\u53ea\u8bfb\nqemu-system-i386 linux.img -hdb fat:/my_directory\n"})}),"\n",(0,s.jsx)(n.h3,{id:"device-url-syntax",children:"Device URL Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# \u8bbe\u5907 URL \u8bed\u6cd5\n# ===========\n# iSCSI\n# iscsi://<target-ip>[:<port>]/<target-iqn>/<lun>\n# \u65e0\u6388\u6743\nqemu-system-i386 \\\n  -iscsi initiator-name=iqn.2001-04.com.example:my-initiator \\\n  -cdrom iscsi://192.0.2.1/iqn.2001-04.com.example/2 \\\n  -drive file=iscsi://192.0.2.1/iqn.2001-04.com.example/1\n# \u5728 URL \u4e0a\u6307\u5b9a CHAP \u8d26\u53f7\u5bc6\u7801\nqemu-system-i386 \\\n  -drive file=iscsi://user%password@192.0.2.1/iqn.2001-04.com.example/1\n# \u5728\u73af\u5883\u53d8\u91cf\u4e2d\u6307\u5b9a CHAP \u8d26\u53f7\u5bc6\u7801\nLIBISCSI_CHAP_USERNAME="user" LIBISCSI_CHAP_PASSWORD="password" \\\n  qemu-system-i386 -drive file=iscsi://192.0.2.1/iqn.2001-04.com.example/1\n\n# NBD\n# nbd:<server-ip>:<port>[:exportname=<export>]\n# TCP\nqemu-system-i386 --drive file=nbd:192.0.2.1:30000\n# Unix Domain Sockets\nqemu-system-i386 --drive file=nbd:unix:/tmp/nbd-socket\n\n# Sheepdog\n# a distributed storage system for QEMU.\n# supports using either local sheepdog devices or remote networked devices.\n# sheepdog[+tcp|+unix]://[host:port]/vdiname[?socket=path][#snapid|#tag]\n# https://sheepdog.github.io/sheepdog/\nqemu-system-i386 --drive file=sheepdog://192.0.2.1:30000/MyVirtualMachine\n\n# GlusterFS\n# a user space distributed file system.\n# supports the use of GlusterFS volumes for hosting VM disk images using TCP, Unix Domain Sockets and RDMA transport protocols.\n# URI:\n# gluster[+type]://[host[:port]]/volume/path[?socket=...][,debug=N][,logfile=...]\n# JSON:\n# \'json:{"driver":"qcow2","file":{"driver":"gluster","volume":"testvol","path":"a.img","debug":N,"logfile":"...",\n#                                  "server":[{"type":"tcp","host":"...","port":"..."},\n#                                            {"type":"unix","socket":"..."}]}}\'\n# URI\nqemu-system-x86_64 --drive file=gluster://192.0.2.1/testvol/a.img,file.debug=9,file.logfile=/var/log/qemu-gluster.log\n# JSON\nqemu-system-x86_64 \'json:{"driver":"qcow2",\n                          "file":{"driver":"gluster",\n                                   "volume":"testvol","path":"a.img",\n                                   "debug":9,"logfile":"/var/log/qemu-gluster.log",\n                                   "server":[{"type":"tcp","host":"1.2.3.4","port":24007},\n                                             {"type":"unix","socket":"/var/run/glusterd.socket"}]}}\'\nqemu-system-x86_64 -drive driver=qcow2,file.driver=gluster,file.volume=testvol,file.path=/path/a.img, file.debug=9,file.logfile=/var/log/qemu-gluster.log, file.server.0.type=tcp,file.server.0.host=1.2.3.4,file.server.0.port=24007, file.server.1.type=unix,file.server.1.socket=/var/run/glusterd.socket\n# HTTP/HTTPS/FTP/FTPS\n# QEMU supports read-only access to files accessed over http(s) and ftp(s).\n# <protocol>://[<username>[:<password>]@]<host>/<path>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u955c\u50cf",children:"\u955c\u50cf"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["raw\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u539f\u59cb\u683c\u5f0f"}),"\n",(0,s.jsx)(n.li,{children:"\u7b80\u5355\u6613\u7528"}),"\n",(0,s.jsxs)(n.li,{children:["\u5982\u679c\u6587\u4ef6\u7cfb\u7edf\u652f\u6301 ",(0,s.jsx)(n.code,{children:"holes"}),"(ext2,ext3,ntfs), \u90a3\u4f1a\u5360\u4e0d\u4e86\u591a\u5c11\u7a7a\u95f4"]}),"\n",(0,s.jsxs)(n.li,{children:["\u9009\u9879\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["preallocation - \u9884\u5206\u914d\u6a21\u5f0f\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"off, falloc, full"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["qcow2\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"QEMU \u955c\u50cf\u683c\u5f0f"}),"\n",(0,s.jsxs)(n.li,{children:["\u529f\u80fd\u6700\u591a\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"COW - \u53ea\u9488\u5bf9 btrfs \u6709\u7528"}),"\n",(0,s.jsx)(n.li,{children:"\u538b\u7f29"}),"\n",(0,s.jsx)(n.li,{children:"\u52a0\u5bc6 - aes,luks"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["qed\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u65e7\u7684 QEMU \u955c\u50cf\u683c\u5f0f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["qcow\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u65e7\u7684 QEMU \u955c\u50cf\u683c\u5f0f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["luks\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"LUKS v1 \u52a0\u5bc6\u683c\u5f0f"}),"\n",(0,s.jsx)(n.li,{children:"\u4e0e Linux dm-crypt/cryptsetup \u517c\u5bb9"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["vdi\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"vbox 1.1 \u517c\u5bb9\u683c\u5f0f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["vmdk\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"vm 3,4 \u517c\u5bb9\u683c\u5f0f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["vpc\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Virtual PC \u517c\u5bb9\u683c\u5f0f (VHD)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["VHDX\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Hyper-V \u517c\u5bb9\u7684\u955c\u50cf\u683c\u5f0f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u53ea\u8bfb\u683c\u5f0f",children:"\u53ea\u8bfb\u683c\u5f0f"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["bochs\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"growing \u7684 Bochs \u955c\u50cf"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["cloop\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Linux Compressed Loop \u955c\u50cf"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["dmg\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Apple \u7684\u78c1\u76d8\u683c\u5f0f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["parallels\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Parallels \u78c1\u76d8\u955c\u50cf\u683c\u5f0f"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u78c1\u76d8\u955c\u50cf",children:"\u78c1\u76d8\u955c\u50cf"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"qemu-img"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u78c1\u76d8\u955c\u50cf\nqemu-img create demo.img 100m\n# \u67e5\u770b\u57fa\u672c\u4fe1\u606f\nqemu-img info demo.img\n# \u67e5\u770b\u6620\u5c04\u4fe1\u606f\nqemu-img map demo.img\n# \u63a8\u8350\u4f7f\u7528 qcow2 \u683c\u5f0f\nqemu-img create -f qcow2 sys.qcow2 2g\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u7f51\u7edc\u5757\u8bbe\u5907",children:"\u7f51\u7edc\u5757\u8bbe\u5907"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"qemu-nbd"}),"\n",(0,s.jsxs)(n.li,{children:["\u5728 linux \u4e0b\u4e00\u822c\u4f1a\u6302\u8f7d\u4e3a ",(0,s.jsx)(n.code,{children:"/dev/ndb*"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/sheepdog/sheepdog/",children:"https://github.com/sheepdog/sheepdog/"})}),"\n",(0,s.jsx)(n.li,{children:"iSCSI LUN"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u4f7f\u7528 \u8fdc\u7a0b NBD \u534f\u8bae\nqemu-system-i386 linux.img -hdb nbd://my_nbd_server.mydomain.org:1024/\n# \u4f7f\u7528 unix socket\nqemu-system-i386 linux.img -hdb nbd+unix://?socket=/tmp/my_socket\n\n# \u66b4\u9732\u4e3a unix socket\nqemu-nbd --socket=/tmp/my_socket my_disk.qcow2\n# \u5141\u8bb8\u591a\u4e2a\u5ba2\u6237\u7aef\u5171\u4eab\nqemu-nbd --socket=/tmp/my_socket --share=2 my_disk.qcow2\n# \u540c\u65f6\u4f7f\u7528\nqemu-system-i386 linux1.img -hdb nbd+unix://?socket=/tmp/my_socket\nqemu-system-i386 linux2.img -hdb nbd+unix://?socket=/tmp/my_socket\n# \u5982\u679c\u670d\u52a1\u7aef\u6307\u5b9a\u4e86\u540d\u5b57, \u5728\u5ba2\u6237\u7aef\u4f7f\u7528\u65f6\u4e5f\u9700\u8981\u6307\u5b9a\u540d\u5b57\nqemu-system-i386 -cdrom nbd://localhost/debian-500-ppc-netinst\nqemu-system-i386 -cdrom nbd://localhost/openSUSE-11.1-ppc-netinst\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7f51\u7edc",children:"\u7f51\u7edc"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.linux-kvm.org/page/Networking",children:"https://www.linux-kvm.org/page/Networking"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u652f\u6301\u7684 NIC\nqemu-system-x86_64 -net nic,model=help\n# \u6700\u7b80\u5355\u7684\u7f51\u7edc\n# 10.0.2.0/24 \u9ed8\u8ba4\u8d77\u59cb\u5730\u5740 x.x.x.15-13, \u4e3b\u673a\u5730\u5740 x.x.x.2 dns x.x.x.3\n# \u4e3b\u673a\u65e0\u6cd5\u8bbf\u95ee\u865a\u62df\u673a\nqemu-system-x86_64 -hda vdisk.img -cdrom alpine-standard-3.6.2-x86_64.iso -net nic -net user\n\n# \u4f7f\u7528 tap \u53ef\u4ee5\u521b\u5efa\u865a\u62df\u7f51\u7edc\u8bbe\u5907\u4f7f\u4e3b\u673a\u4e92\u901a\nqemu-system-x86_64 -m 512M -net nic -net tap,script=no,downscript=no\n# \u4f7f\u7528\u6307\u5b9a\u7684\u540d\u5b57\nqemu-system-x86_64 -m 512M -net nic -net tap,ifname=tap0,script=no,downscript=no\n# -net nic,model=virtio -net tap,ifname=tap0,script=no,downscript=no\n# \u786e\u4fdd\u6743\u9650\n# ip tuntap add dev tap0 mode tap group netdev\n# \u6216\u8005\u4f7f\u7528 tunctl \u63a7\u5236\n# tunctl -p -t tap0 -u $USER\n# tunctl -t tap0 -g netdev\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5916\u8bbe",children:"\u5916\u8bbe"}),"\n",(0,s.jsx)(n.h3,{id:"usb",children:"USB"}),"\n",(0,s.jsx)(n.h3,{id:"pci",children:"PCI"}),"\n",(0,s.jsx)(n.h2,{id:"\u7528\u6237\u7a7a\u95f4\u865a\u62df",children:"\u7528\u6237\u7a7a\u95f4\u865a\u62df"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"qemu-*"})}),"\n",(0,s.jsx)(n.li,{children:"\u53ea\u652f\u6301 Linix, BSD"}),"\n",(0,s.jsxs)(n.li,{children:["\u7279\u6027\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7cfb\u7edf\u8c03\u7528\u8f6c\u6362"}),"\n",(0,s.jsx)(n.li,{children:"POSIX \u4fe1\u53f7\u5904\u7406"}),"\n",(0,s.jsx)(n.li,{children:"\u7ebf\u7a0b"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# -L / \u544a\u8bc9\u52a8\u6001\u8fde\u63a5\u5668\u4ece / \u5f00\u59cb\u641c\u7d22\nqemu-i386 -L / /bin/ls\n# \u4e5f\u53ef\u4ee5\u518d qemu \u4e2d\u5141\u8bb8 qemu\nqemu-i386 -L / qemu-i386 -L / /bin/ls\n\n# \u5728\u975e x86 CPU \u4e0a\u8fd0\u884c\n# \u81f3\u5c11\u9700\u8981 x86 \u7684 glibc(qemu-runtime-i386-*)\n# \u786e\u4fdd\u672a\u8bbe\u7f6e LD_LIBRARY_PATH\nunset LD_LIBRARY_PATH\n# \u6267\u884c\u9884\u7f16\u8bd1\u7684\u53ef\u6267\u884c\u6587\u4ef6\nqemu-i386 tests/i386/ls\n\n# \u4f7f\u7528 Wine\n# \u786e\u4fdd\u5b89\u88c5 wine(qemu-*-i386-wine)\n# \u81f3\u5c11\u5148\u786e\u4fdd\u6709 i386\nqemu-i386 /usr/local/qemu-i386/bin/ls-i386\n# \u914d\u7f6e\n# \u914d\u7f6e\u4f4d\u4e8e ~/.wine, \u4e4b\u524d\u7684\u914d\u7f6e\u4f1a\u88ab\u5b58\u4e8e ~/.wine.org\n/usr/local/qemu-i386/bin/wine-conf.sh\nqemu-i386 /usr/local/qemu-i386/wine/bin/wine \\\n  /usr/local/qemu-i386/wine/c/Program\\ Files/putty.exe\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u663e\u793a",children:"\u663e\u793a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.spice-space.org",children:"https://www.spice-space.org"})}),"\n",(0,s.jsx)(n.li,{children:"vnc"}),"\n",(0,s.jsx)(n.li,{children:"SPICE\uff08Simple Protocol for Independent Computing Environments\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"brew install tiger-vnc\n\n# 5900\nqemu-system-x86_64 -vga std -nographic -vnc :0\nvncviewer :0\n\n# 5901\nqemu-system-x86_64 sys.vhd-display vnc=:1\nvncviewer :1\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["vga\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"std - \u6807\u51c6 VGA"}),"\n",(0,s.jsx)(n.li,{children:"cirrus"}),"\n",(0,s.jsx)(n.li,{children:"vmware"}),"\n",(0,s.jsxs)(n.li,{children:["qxl - QXL \u9a71\u52a8\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e3aSPICE\u534f\u8bae\u4f18\u5316\u7684\u4e00\u79cd\u865a\u62dfVGA\u8bbe\u5907"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"virtio"}),"\n",(0,s.jsx)(n.li,{children:"none"}),"\n"]}),"\n"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,l.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},38088:(e,n,i)=>{var s=i(96651),l=Symbol.for("react.element"),r=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,d=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,i){var s,r={},o=null,h=null;for(s in void 0!==i&&(o=""+i),void 0!==n.key&&(o=""+n.key),void 0!==n.ref&&(h=n.ref),n)c.call(n,s)&&!t.hasOwnProperty(s)&&(r[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps)void 0===r[s]&&(r[s]=n[s]);return{$$typeof:l,type:e,key:o,ref:h,props:r,_owner:d.current}}n.Fragment=r,n.jsx=o,n.jsxs=o},2488:(e,n,i)=>{e.exports=i(38088)},62780:(e,n,i)=>{i.d(n,{I:()=>d,M:()=>c});var s=i(96651);const l={},r=s.createContext(l);function c(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);